(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+DPT":function(t,e){angular.module("doubtfire.units.states.tasks.inbox.directives",["doubtfire.units.states.tasks.inbox.directives.staff-task-list"])},"+H4Z":function(t,e){angular.module("doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-outcomes-card",[]).directive("taskOutcomesCard",function(){return{restrict:"E",templateUrl:"projects/states/dashboard/directives/task-dashboard/directives/task-outcomes-card/task-outcomes-card.tpl.html",scope:{taskDef:"=",unit:"="},controller:function(t,e,n,r){if(null!=t.unit)return n.listenTo(t).push(t.$watch("taskDef.id",function(){return t.alignments=t.unit.staffAlignmentsForTaskDefinition(t.taskDef)}))}}})},"+f+8":function(t,e){!function(t,e){"use strict";function n(t){var e=t.slice(9);return null!=e&&e.length>0?e.substring(0,1).toLowerCase()+e.substring(1):e}var r=window.angulartics||(window.angulartics={});r.waitForVendorCount=0,r.waitForVendorApi=function(t,e,n,i,o){o||r.waitForVendorCount++,i||(i=n,n=void 0),!Object.prototype.hasOwnProperty.call(window,t)||void 0!==n&&void 0===window[t][n]?setTimeout(function(){r.waitForVendorApi(t,e,n,i,!0)},e):(r.waitForVendorCount--,i(window[t]))},t.module("angulartics",[]).provider("$analytics",function(){function e(e,n){return a[e]||(a[e]=[]),a[e].push(n),function(){var n=arguments;t.forEach(a[e],function(t){t.apply(this,n)},this)}}function n(n,r){s[n]=e(n,r);var a=i[n],l=a?a.bufferFlushDelay:null,u=null!==l?l:i.bufferFlushDelay;t.forEach(o[n],function(t,e){!function(t,e){e?setTimeout(t,e):t()}(function(){r.apply(this,t)},e*u)})}var i={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,autoBasePath:!1,basePath:"",excludedRoutes:[]},eventTracking:{},bufferFlushDelay:1e3,developerMode:!1},o={},a={},s={settings:i},l={$get:function(){return s},api:s,settings:i,virtualPageviews:function(t){this.settings.pageTracking.autoTrackVirtualPages=t},excludeRoutes:function(t){this.settings.pageTracking.excludedRoutes=t},firstPageview:function(t){this.settings.pageTracking.autoTrackFirstPage=t},withBase:function(e){this.settings.pageTracking.basePath=e?t.element(document).find("base").attr("href"):""},withAutoBase:function(t){this.settings.pageTracking.autoBasePath=t},developerMode:function(t){this.settings.developerMode=t}};return t.forEach(["pageTrack","eventTrack","exceptionTrack","setAlias","setUsername","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce","userTimings"],function(t){var i="register"+function(t){return t.replace(/^./,function(t){return t.toUpperCase()})}(t);l[i]=function(e){n(t,e)},s[t]=e(t,function(t){return function(){r.waitForVendorCount&&(o[t]||(o[t]=[]),o[t].push(arguments))}}(t))}),l}).run(["$rootScope","$window","$analytics","$injector",function(e,n,r,i){function o(t,e){(function(t){for(var e=0;e<r.settings.pageTracking.excludedRoutes.length;e++){var n=r.settings.pageTracking.excludedRoutes[e];if(n instanceof RegExp&&n.test(t)||t.indexOf(n)>-1)return!0}return!1})(t)||r.pageTrack(t,e)}r.settings.pageTracking.autoTrackFirstPage&&i.invoke(["$location",function(t){var e=!0;if(i.has("$route")){var a=i.get("$route");for(var s in a.routes){e=!1;break}}else if(i.has("$state")){var l=i.get("$state");for(var u in l.get()){e=!1;break}}e&&(r.settings.pageTracking.autoBasePath&&(r.settings.pageTracking.basePath=n.location.pathname),o(r.settings.pageTracking.trackRelativePath?r.settings.pageTracking.basePath+t.url():t.absUrl(),t))}]),r.settings.pageTracking.autoTrackVirtualPages&&i.invoke(["$location",function(t){r.settings.pageTracking.autoBasePath&&(r.settings.pageTracking.basePath=n.location.pathname+"#");var a=!0;if(i.has("$route")){var s=i.get("$route");for(var l in s.routes){a=!1;break}e.$on("$routeChangeSuccess",function(e,n){n&&(n.$$route||n).redirectTo||o(r.settings.pageTracking.basePath+t.url(),t)})}i.has("$state")&&(a=!1,e.$on("$stateChangeSuccess",function(e,n){o(r.settings.pageTracking.basePath+t.url(),t)})),a&&e.$on("$locationChangeSuccess",function(e,n){n&&(n.$$route||n).redirectTo||o(r.settings.pageTracking.trackRelativePath?r.settings.pageTracking.basePath+t.url():t.absUrl(),t)})}]),r.settings.developerMode&&t.forEach(r,function(t,e){"function"==typeof t&&(r[e]=function(){})})}]).directive("analyticsOn",["$analytics",function(e){return{restrict:"A",link:function(r,i,o){var a=o.analyticsOn||"click",s={};t.forEach(o.$attr,function(t,e){(function(t){return"analytics"===t.substr(0,9)&&-1===["On","Event","If","Properties","EventType"].indexOf(t.substr(9))})(e)&&(s[n(e)]=o[e],o.$observe(e,function(t){s[n(e)]=t}))}),t.element(i[0]).bind(a,function(n){var a=o.analyticsEvent||function(t){return function(t){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(t.tagName.toLowerCase()+":"+(t.type||""))>=0}(t)?t.innerText||t.value:t.id||t.name||t.tagName}(i[0]);s.eventType=n.type,(!o.analyticsIf||r.$eval(o.analyticsIf))&&(o.analyticsProperties&&t.extend(s,r.$eval(o.analyticsProperties)),e.eventTrack(a,s))})}}}])}(angular)},"/7oY":function(t,e){angular.module("doubtfire.units.modals.unit-tutorial-edit-modal",[]).factory("UnitTutorialEditModal",function(t){var e;return(e={}).show=function(e,n){return t.open({controller:"UnitTutorialEditModalCtrl",templateUrl:"units/modals/unit-tutorial-edit-modal/unit-tutorial-edit-modal.tpl.html",resolve:{tutorial:function(){return n},unit:function(){return e}}})},e}).controller("UnitTutorialEditModalCtrl",function(t,e,n,r,i,o){var a;return(a=new Date).setHours(8),a.setMinutes(30),t.tutorial=n||{meeting_day:"Monday",meeting_time:a,abbreviation:null,meeting_location:null},t.isNew=null==n,t.unit=r,t.tutors=t.unit.staff,t.validForm=function(){return null!=t.tutorial.tutor&&null!=t.tutorial.abbreviation&&null!=t.tutorial.meeting_location},t.saveTutorial=function(){var a;if((a=_.omit(t.tutorial,"tutor","tutor_name","meeting_time","data")).tutor_id=t.tutorial.tutor.user_id?t.tutorial.tutor.user_id:t.tutorial.tutor.id,t.tutorial.meeting_time.getHours&&(a.meeting_time=t.tutorial.meeting_time.getHours()+":"+t.tutorial.meeting_time.getMinutes()),null!=a.tutor_id)return t.isNew?(a.unit_id=r.id,i.create({tutorial:a}).$promise.then(function(n){return e.close(n),t.unit.tutorials.push(n),o.add("success","Tutorial Added",2e3)},function(t){if(null!=t.data.error)return o.add("danger","Error: "+t.data.error,6e3)})):i.update({id:n.id,tutorial:a}).$promise.then(function(n){return e.close(n),t.tutorial.tutor=n.tutor,t.tutorial.tutor_name=n.tutor_name,o.add("success","Tutorial Updated",2e3)},function(t){if(null!=t.data.error)return o.add("danger","Error: "+t.data.error,6e3)});o.add("danger","Ensure that you select a tutor from those engaged in this unit.",6e3)}})},"/7wq":function(t,e,n){"use strict";angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",function(t,e){return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror needs CodeMirror to work... (o rly?)");return n}};function n(n,r,i,o){var a=angular.extend({value:r.text()},e.codemirror||{},n.$eval(i.uiCodemirror),n.$eval(i.uiCodemirrorOpts)),s=function(t,e){var n;return"TEXTAREA"===t[0].tagName?n=window.CodeMirror.fromTextArea(t[0],e):(t.html(""),n=new window.CodeMirror(function(e){t.append(e)},e)),n}(r,a);!function(t,e,n){if(e){var r=Object.keys(window.CodeMirror.defaults);n.$watch(e,function(e,n){angular.isObject(e)&&r.forEach(function(r){if(e.hasOwnProperty(r)){if(n&&e[r]===n[r])return;t.setOption(r,e[r])}})},!0)}}(s,i.uiCodemirror||i.uiCodemirrorOpts,n),function(t,e,n){e&&(e.$formatters.push(function(t){if(angular.isUndefined(t)||null===t)return"";if(angular.isObject(t)||angular.isArray(t))throw new Error("ui-codemirror cannot use an object or an array as a model");return t}),e.$render=function(){t.setValue(e.$viewValue||"")},t.on("change",function(t){var r=t.getValue();r!==e.$viewValue&&n.$evalAsync(function(){e.$setViewValue(r)})}))}(s,o,n),function(e,n,r){n&&r.$watch(n,function(n,r){n!==r&&t(function(){e.refresh()})})}(s,i.uiRefresh,n),n.$on("CodeMirror",function(t,e){if(!angular.isFunction(e))throw new Error("the CodeMirror event requires a callback function");e(s)}),angular.isFunction(a.onLoad)&&a.onLoad(s)}})},"/FGW":function(t,e){var n;!function(){function t(t,e){window.XMLHttpRequest.prototype[t]=e(window.XMLHttpRequest.prototype[t])}function e(t,e,n){try{Object.defineProperty(t,e,{get:n})}catch(r){}}if(window.FileAPI||(window.FileAPI={}),FileAPI.shouldLoad=window.XMLHttpRequest&&!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var n=function(t){if(!t.__listeners){t.upload||(t.upload={}),t.__listeners=[];var e=t.upload.addEventListener;t.upload.addEventListener=function(n,r){t.__listeners[n]=r,e&&e.apply(this,arguments)}}};t("open",function(t){return function(e,r,i){n(this),this.__url=r;try{t.apply(this,[e,r,i])}catch(o){o.message.indexOf("Access is denied")>-1&&(this.__origError=o,t.apply(this,[e,"_fix_for_ie_crossdomain__",i]))}}}),t("getResponseHeader",function(t){return function(e){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(e):null==t?null:t.apply(this,[e])}}),t("getAllResponseHeaders",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==t?null:t.apply(this)}}),t("abort",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==t?null:t.apply(this)}}),t("setRequestHeader",function(t){return function(e,r){if("__setXHR_"===e){n(this);var i=r(this);i instanceof Function&&i(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[e]=r,t.apply(this,arguments)}}),t("send",function(t){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){for(var r=arguments[0],i={url:n.__url,jsonp:!1,cache:!0,complete:function(t,r){n.__completed=!0,!t&&n.__listeners.load&&n.__listeners.load({type:"load",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!t&&n.__listeners.loadend&&n.__listeners.loadend({type:"loadend",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),"abort"===t&&n.__listeners.abort&&n.__listeners.abort({type:"abort",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==r.status&&e(n,"status",function(){return 0===r.status&&t&&"abort"!==t?500:r.status}),void 0!==r.statusText&&e(n,"statusText",function(){return r.statusText}),e(n,"readyState",function(){return 4}),void 0!==r.response&&e(n,"response",function(){return r.response});var i=r.responseText||(t&&0===r.status&&"abort"!==t?t:void 0);e(n,"responseText",function(){return i}),e(n,"response",function(){return i}),t&&e(n,"err",function(){return t}),n.__fileApiXHR=r,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},progress:function(t){if(t.target=n,n.__listeners.progress&&n.__listeners.progress(t),n.__total=t.total,n.__loaded=t.loaded,t.total===t.loaded){var e=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},e.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders,data:{},files:{}},o=0;o<r.data.length;o++){var a=r.data[o];null!=a.val&&null!=a.val.name&&null!=a.val.size&&null!=a.val.type?i.files[a.key]=a.val:i.data[a.key]=a.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.__fileApiXHR=FileAPI.upload(i)},1)}else{if(this.__origError)throw this.__origError;t.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(t,e,n){e.__isFileAPIBlobShim&&(e=e.data[0]),this.data.push({key:t,val:e,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(t){return{data:t,__isFileAPIBlobShim:!0}}}}(),function(){function t(t){return"input"===t[0].tagName.toLowerCase()&&t.attr("type")&&"file"===t.attr("type").toLowerCase()}function e(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(e){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function n(t){var e=0,n=0;if(window.jQuery)return jQuery(t).offset();if(t.offsetParent)do{e+=t.offsetLeft-t.scrollLeft,n+=t.offsetTop-t.scrollTop,t=t.offsetParent}while(t);return{left:e,top:n}}if(FileAPI.shouldLoad){if(FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var r,i,o,a,s,l=document.createElement("script"),u=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)r=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)i=window.FileAPI.jsPath;else for(o=0;o<u.length;o++)if((a=(s=u[o].src).search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/))>-1){i=s.substring(0,a+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=i),l.setAttribute("src",r||i+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(l),FileAPI.hasFlash=e()}FileAPI.ngfFixIE=function(r,i,o,a){if(!e())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var s=function(){if(r.attr("disabled"))r.$$ngfRefElem.removeClass("js-fileapi-wrapper");else{var e=r.$$ngfRefElem;e?o(r.$$ngfRefElem):((e=r.$$ngfRefElem=i()).addClass("js-fileapi-wrapper"),t(r),setTimeout(function(){e.bind("mouseenter",s)},10),e.bind("change",function(t){l.apply(this,[t]),a.apply(this,[t])})),t(r)||e.css("position","absolute").css("top",n(r[0]).top+"px").css("left",n(r[0]).left+"px").css("width",r[0].offsetWidth+"px").css("height",r[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",r.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible")}};r.bind("mouseenter",s);var l=function(t){for(var e=FileAPI.getFiles(t),n=0;n<e.length;n++)void 0===e[n].size&&(e[n].size=0),void 0===e[n].name&&(e[n].name="file"),void 0===e[n].type&&(e[n].type="undefined");t.target||(t.target={}),t.target.files=e,t.target.files!==e&&(t.__files_=e),(t.__files_||t.target.files).item=function(e){return(t.__files_||t.target.files)[e]||null}}},FileAPI.disableFileInput=function(t,e){e?t.removeClass("js-fileapi-wrapper"):t.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){var t=this,e=!1;this.listeners={},this.addEventListener=function(e,n){t.listeners[e]=t.listeners[e]||[],t.listeners[e].push(n)},this.removeEventListener=function(e,n){t.listeners[e]&&t.listeners[e].splice(t.listeners[e].indexOf(n),1)},this.dispatchEvent=function(e){var n=t.listeners[e.type];if(n)for(var r=0;r<n.length;r++)n[r].call(t,e)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(e,n){var r={type:e,target:t,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(r.target.result=n.result),r},r=function(r){var i;e||(e=!0,t.onloadstart&&t.onloadstart(n("loadstart",r))),"load"===r.type?(t.onloadend&&t.onloadend(n("loadend",r)),i=n("load",r),t.onload&&t.onload(i),t.dispatchEvent(i)):"progress"===r.type?(i=n("progress",r),t.onprogress&&t.onprogress(i),t.dispatchEvent(i)):(i=n("error",r),t.onerror&&t.onerror(i),t.dispatchEvent(i))};this.readAsArrayBuffer=function(t){FileAPI.readAsBinaryString(t,r)},this.readAsBinaryString=function(t){FileAPI.readAsBinaryString(t,r)},this.readAsDataURL=function(t){FileAPI.readAsDataURL(t,r)},this.readAsText=function(t){FileAPI.readAsText(t,r)}}),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=(n=window.XMLHttpRequest.prototype.setRequestHeader,function(t,e){if("__setXHR_"===t){var r=e(this);r instanceof Function&&r(this)}else n.apply(this,arguments)}));var r=angular.module("ngFileUpload",[]);r.version="5.0.9",r.service("Upload",["$http","$q","$timeout",function(t,e,n){function r(r){r.method=r.method||"POST",r.headers=r.headers||{};var i=e.defer(),o=i.promise;return r.headers.__setXHR_=function(){return function(t){t&&(r.__XHR=t,r.xhrFn&&r.xhrFn(t),t.upload.addEventListener("progress",function(t){t.config=r,i.notify?i.notify(t):o.progressFunc&&n(function(){o.progressFunc(t)})},!1),t.upload.addEventListener("load",function(t){t.lengthComputable&&(t.config=r,i.notify?i.notify(t):o.progressFunc&&n(function(){o.progressFunc(t)}))},!1))}},t(r).then(function(t){i.resolve(t)},function(t){i.reject(t)},function(t){i.notify(t)}),o.success=function(t){return o.then(function(e){t(e.data,e.status,e.headers,r)}),o},o.error=function(t){return o.then(null,function(e){t(e.data,e.status,e.headers,r)}),o},o.progress=function(t){return o.progressFunc=t,o.then(null,null,function(e){t(e)}),o},o.abort=function(){return r.__XHR&&n(function(){r.__XHR.abort()}),o},o.xhr=function(t){return r.xhrFn=(e=r.xhrFn,function(){e&&e.apply(o,arguments),t.apply(o,arguments)}),o;var e},o}this.upload=function(t){function e(n,r,i){if(void 0!==r)if(angular.isDate(r)&&(r=r.toISOString()),angular.isString(r))n.append(i,r);else if("form"===t.sendFieldsAs)if(angular.isObject(r))for(var o in r)r.hasOwnProperty(o)&&e(n,r[o],i+"["+o+"]");else n.append(i,r);else r=angular.isString(r)?r:JSON.stringify(r),n.append(i,"json-blob"===t.sendFieldsAs?new Blob([r],{type:"application/json"}):r)}return t.headers=t.headers||{},t.headers["Content-Type"]=void 0,t.transformRequest=t.transformRequest?angular.isArray(t.transformRequest)?t.transformRequest:[t.transformRequest]:[],t.transformRequest.push(function(n){var r,i=new FormData,o={};for(r in t.fields)t.fields.hasOwnProperty(r)&&(o[r]=t.fields[r]);for(r in n&&(o.data=n),o)if(o.hasOwnProperty(r)){var a=o[r];t.formDataAppender?t.formDataAppender(i,r,a):e(i,a,r)}if(null!=t.file){var s=t.fileFormDataName||"file";if(angular.isArray(t.file))for(var l=angular.isString(s),u=0;u<t.file.length;u++)i.append(l?s:s[u],t.file[u],t.fileName&&t.fileName[u]||t.file[u].name);else i.append(s,t.file,t.fileName||t.file.name)}return i}),r(t)},this.http=function(e){return e.transformRequest=e.transformRequest||function(e){return window.ArrayBuffer&&e instanceof window.ArrayBuffer||e instanceof Blob?e:t.defaults.transformRequest[0](arguments)},r(e)}}]),function(){function t(t,r,i,o,a,s,l){function u(){return"input"===r[0].tagName.toLowerCase()&&i.type&&"file"===i.type.toLowerCase()}function c(r){if(!m){m=!0;try{for(var l=r.__files_||r.target&&r.target.files,u=[],c=[],d=0;d<l.length;d++){var p=l.item(d);e(t,a,i,p,r)?u.push(p):c.push(p)}n(a,s,t,o,i,i.ngfChange||i.ngfSelect,u,c,r),0===u.length&&(r.target.value=u)}finally{m=!1}}}function d(e){i.ngfMultiple&&e.attr("multiple",a(i.ngfMultiple)(t)),i.ngfCapture&&e.attr("capture",a(i.ngfCapture)(t)),i.accept&&e.attr("accept",i.accept);for(var n=0;n<r[0].attributes.length;n++){var o=r[0].attributes[n];(u()&&"type"!==o.name||"type"!==o.name&&"class"!==o.name&&"id"!==o.name&&"style"!==o.name)&&e.attr(o.name,o.value)}}function p(e,n){if(!n&&(e||u()))return r.$$ngfRefElem||r;var i=angular.element('<input type="file">');return d(i),u()?(r.replaceWith(i),r=i,i.attr("__ngf_gen__",!0),l(r)(t)):(i.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("z-index","-100000").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),r.$$ngfRefElem&&r.$$ngfRefElem.remove(),r.$$ngfRefElem=i,document.body.appendChild(i[0])),i}function f(e){n(a,s,t,o,i,i.ngfChange||i.ngfSelect,[],[],e,!0)}if(!r.attr("__ngf_gen__")){t.$on("$destroy",function(){r.$$ngfRefElem&&r.$$ngfRefElem.remove()});var h=!1;-1===i.ngfSelect.search(/\W+$files\W+/)&&t.$watch(i.ngfSelect,function(t){h=!1===t});var m=!1;window.FileAPI&&window.FileAPI.ngfFixIE?window.FileAPI.ngfFixIE(r,p,d,c):function e(n){function o(t){t&&l[0].click(),(u()||!t)&&r.bind("click touchend",e)}if(r.attr("disabled")||h)return!1;null!=n&&(n.preventDefault(),n.stopPropagation());var s=!1!==a(i.ngfResetOnClick)(t),l=p(n,s);return l&&((!n||s)&&l.bind("change",c),n&&s&&!1!==a(i.ngfResetModelOnClick)(t)&&f(n),function(t){var e=t.match(/Android[^\d]*(\d+)\.(\d+)/);return e&&e.length>2?parseInt(e[1])<4||4===parseInt(e[1])&&parseInt(e[2])<4:/.*Windows.*Safari.*/.test(t)}(navigator.userAgent)?setTimeout(function(){o(n)},0):o(n)),!1}()}}r.directive("ngfSelect",["$parse","$timeout","$compile",function(e,n,r){return{restrict:"AEC",require:"?ngModel",link:function(i,o,a,s){t(i,o,a,s,e,n,r)}}}]),r.validate=function(t,e,n,r,i){var o=e(n.ngfAccept)(t,{$file:r,$event:i}),a=e(n.ngfMaxSize)(t,{$file:r,$event:i})||9007199254740991,s=e(n.ngfMinSize)(t,{$file:r,$event:i})||-1;if(null!=o&&angular.isString(o)){var l=new RegExp(function t(e){if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])return e.substring(1,e.length-1);var n=e.split(","),r="";if(n.length>1)for(var i=0;i<n.length;i++)r+="("+t(n[i])+")",i<n.length-1&&(r+="|");else 0===e.indexOf(".")&&(e="*"+e),r=(r="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$").replace(/\\\*/g,".*").replace(/\\\?/g,".");return r}(o),"gi");o=null!=r.type&&l.test(r.type.toLowerCase())||null!=r.name&&l.test(r.name.toLowerCase())}return(null==o||o)&&(null==r.size||r.size<a&&r.size>s)},r.updateModel=function(t,e,n,r,i,o,a,s,l,u){function c(){if(!0===t(i.ngfKeep)(n)){var u=(r.$modelValue||[]).slice(0);if(a&&a.length)if(!0===t(i.ngfKeepDistinct)(n)){for(var c=u.length,d=0;d<a.length;d++){for(var p=0;c>p&&a[d].name!==u[p].name;p++);p===c&&u.push(a[d])}a=u}else a=u.concat(a);else a=u}r&&(t(i.ngModel).assign(n,a),e(function(){r&&r.$setViewValue(null!=a&&0===a.length?null:a)})),i.ngModelRejected&&t(i.ngModelRejected).assign(n,s),o&&t(o)(n,{$files:a,$rejectedFiles:s,$event:l})}u?c():e(function(){c()})};var e=r.validate,n=r.updateModel}(),function(){function t(t,r,o,a,s,l,u){function c(t,e,r){var i=!0,o=r.dataTransfer.items;if(null!=o)for(var a=0;a<o.length&&i;a++)i=i&&("file"===o[a].kind||""===o[a].kind)&&n(t,s,e,o[a],r);var l=s(e.ngfDragOverClass)(t,{$event:r});return l&&(l.delay&&(g=l.delay),l.accept&&(l=i?l.accept:l.reject)),l||e.ngfDragOverClass||"dragover"}var d=e();if(o.dropAvailable&&l(function(){t[o.dropAvailable]?t[o.dropAvailable].value=d:t[o.dropAvailable]=d}),d){var p=!1;-1===o.ngfDrop.search(/\W+$files\W+/)&&t.$watch(o.ngfDrop,function(t){p=!1===t});var f,h=null,m=s(o.ngfStopPropagation),g=1;r[0].addEventListener("dragover",function(e){if(!r.attr("disabled")&&!p){if(e.preventDefault(),m(t)&&e.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var n=e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy"}l.cancel(h),t.actualDragOverClass||(f=c(t,o,e)),r.addClass(f)}},!1),r[0].addEventListener("dragenter",function(e){r.attr("disabled")||p||(e.preventDefault(),m(t)&&e.stopPropagation())},!1),r[0].addEventListener("dragleave",function(){r.attr("disabled")||p||(h=l(function(){r.removeClass(f),f=null},g||1))},!1),r[0].addEventListener("drop",function(e){r.attr("disabled")||p||(e.preventDefault(),m(t)&&e.stopPropagation(),r.removeClass(f),f=null,function(e,r,i,a){function c(r){n(t,s,o,r,e)?p.push(r):f.push(r)}function d(t,e,n){if(null!=e)if(e.isDirectory){c({name:e.name,type:"directory",path:(n||"")+e.name});var r=e.createReader(),i=[];m++;var o=function(){r.readEntries(function(r){try{if(r.length)i=i.concat(Array.prototype.slice.call(r||[],0)),o();else{for(var a=0;a<i.length;a++)d(t,i[a],(n||"")+e.name+"/");m--}}catch(s){m--,console.error(s)}},function(){m--})};o()}else m++,e.file(function(t){try{m--,t.path=(n||"")+t.name,c(t)}catch(e){m--,console.error(e)}},function(){m--})}var p=[],f=[],h=e.dataTransfer.items,m=0;if(h&&h.length>0&&"file"!==u.protocol())for(var g=0;g<h.length;g++){if(h[g].webkitGetAsEntry&&h[g].webkitGetAsEntry()&&h[g].webkitGetAsEntry().isDirectory){var v=h[g].webkitGetAsEntry();if(v.isDirectory&&!i)continue;null!=v&&d(p,v)}else{var b=h[g].getAsFile();null!=b&&c(b)}if(!a&&p.length>0)break}else{var y=e.dataTransfer.files;if(null!=y)for(var w=0;w<y.length&&(c(y.item(w)),a||!(p.length>0));w++);}var k=0;!function t(e){l(function(){if(m)10*k++<2e4&&t(10);else{if(!a&&p.length>1){for(g=0;"directory"===p[g].type;)g++;p=[p[g]]}r(p,f)}},e||0)}()}(e,function(n,r){i(s,l,t,a,o,o.ngfChange||o.ngfDrop,n,r,e)},!1!==s(o.ngfAllowDir)(t),o.multiple||s(o.ngfMultiple)(t)))},!1)}else!0===s(o.ngfHideOnDropNotAvailable)(t)&&r.css("display","none")}function e(){var t=document.createElement("div");return"draggable"in t&&"ondrop"in t}var n=r.validate,i=r.updateModel;r.directive("ngfDrop",["$parse","$timeout","$location",function(e,n,r){return{restrict:"AEC",require:"?ngModel",link:function(i,o,a,s){t(i,o,a,s,e,n,r)}}}]),r.directive("ngfNoFileDrop",function(){return function(t,n){e()&&n.css("display","none")}}),r.directive("ngfDropAvailable",["$parse","$timeout",function(t,n){return function(r,i,o){if(e()){var a=t(o.ngfDropAvailable);n(function(){a(r),a.assign&&a.assign(r,!0)})}}}]),r.directive("ngfSrc",["$parse","$timeout",function(t,e){return{restrict:"AE",link:function(r,i,o){window.FileReader&&r.$watch(o.ngfSrc,function(a){a&&n(r,t,o,a,null)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||a.size<4e6)?e(function(){var t=window.URL||window.webkitURL;if(t&&t.createObjectURL)i.attr("src",t.createObjectURL(a));else{var n=new FileReader;n.readAsDataURL(a),n.onload=function(t){e(function(){i.attr("src",t.target.result)})}}}):i.attr("src",o.ngfDefaultSrc||"")})}}}])}()},"/Lkx":function(t,e){angular.module("doubtfire.api.models.teaching-period",[]).factory("TeachingPeriod",function(t,e,n){var r,i,o,a;return o=t("/teaching_periods/:id",{id:"@id"}),a=t("/teaching_periods/:existing_teaching_period_id/rollover",{existing_teaching_period_id:"@existing_teaching_period_id"}),(r={}).loadedPeriods=[],i=function(t){return null==t.name&&(t.name=function(){return t.period+" "+t.year},t.active=function(){return moment(t.active_until).diff(moment())>0}),t},{rollover:a,getTeachingPeriod:function(t){return _.find(r.loadedPeriods,function(e){return e.id===t})},query:function(t,e){return 0===r.loadedPeriods.length&&o.query(function(e){if(r.loadedPeriods=_.map(e,function(t){return i(t)}),null!=t&&_.isFunction(t))return t(r)},function(t){var r;if(n.add("danger","Failed to load teaching periods. "+(null!=t&&null!=(r=t.data)?r.error:void 0),6e3),null!=e&&_.isFunction(e))return e(t)}),null!=t&&_.isFunction(t)&&t(r),r},create:function(t){return o.create({teaching_period:t.teaching_period})},update:function(t){return o.update({id:t.id,teaching_period:t.teaching_period},function(t){var e,n,o,a,s;for(n=0,s=[],e=0,o=(a=r.loadedPeriods).length;e<o;e++)a[e].id===t.id&&(r.loadedPeriods[n]=i(t)),s.push(n++);return s})},get:function(t,e,n){return o.get({id:t},function(n){var i;return null!=(i=_.find(r.loadedPeriods,function(e){return e.id===t}))?_.extend(i,n):i=n,e(i)},function(t){return n(t)})}}})},"/rw+":function(t,e){},0:function(t,e,n){t.exports=n("zUnb")},"09Tn":function(t,e){angular.module("doubtfire.tasks.task-viewer",[]).directive("taskViewer",function(){return{restrict:"E",replace:!0,templateUrl:"tasks/task-viewer/task-viewer.tpl.html",scope:{unit:"=",project:"=",assessingUnitRole:"="},controller:function(t,e,n,r,i,o,a,s,l,u,c,d){var p;return t.tabs={taskSheet:{title:"Task Description",subtitle:"A brief description of this task",icon:"fa-info",seq:0,active:!1},fileUpload:{title:"Upload Submission",subtitle:"Upload your submission so it is ready for your tutor to mark",icon:"fa-upload",seq:1,active:!1},viewSubmission:{title:"View Submission",subtitle:"View the latest submission you have uploaded",icon:"fa-file-o",seq:2,active:!1},viewComments:{title:"View Comments",subtitle:"Write and read comments between you and your tutor",icon:"fa-comments-o",seq:3,active:!1},plagiarismReport:{title:"View Similarities Detected",subtitle:"See the other submissions and how closely they relate to your submission",icon:"fa-eye",seq:4,active:!1}},t.setActiveTab=function(e){var n;if(e!==t.activeTab)return null!=(n=t.activeTab)&&(n.active=!1),t.activeTab=e,t.activeTab.active=!0,d.event("Student Project View - Tasks Tab","Switched Tab as "+(null!=t.assessingUnitRole?t.assessingUnitRole.role:"Student"),e.title+" Tab")},t.isActiveTab=function(e){return e===t.activeTab},p=function(e){return t.setActiveTab(t.tabs.taskSheet)},t.$watch("project.selectedTask",function(e){return null==e&&(e=_.first(t.project.tasks)),p(),t.daysPastTargetDate=s.daysPastTargetDate(e)}),t.$watch("project.selectedTask.status",function(e){return t.activeStatusData=t.statusData(e)}),t.setSelectedTask=function(e){if(d.event("Student Project View","Switched to Task","Task Feedback Page Dropdown"),e!==t.project.selectedTask)return t.project.selectedTask=e},t.statusData=s.statusData,t.statusClass=s.statusClass,t.daysPastTargetDate=s.daysPastTargetDate,t.groupSetName=function(e){return l.groupSetName(e,t.unit)},t.hideGroupSetName=0===t.unit.group_sets.length,t.recreatePDF=function(){return s.recreatePDF(t.project.selectedTask,null)},t.studentStatuses=s.switchableStates.student,t.tutorStatuses=s.switchableStates.tutor,t.taskEngagementConfig={studentTriggers:t.studentStatuses.map(s.statusData),tutorTriggers:t.tutorStatuses.map(s.statusData)},t.triggerTransition=function(e){if("ready_to_mark"!==e&&"need_help"!==e||!(t.project.selectedTask.definition.upload_requirements.length>0))return s.updateTaskStatus(t.unit,t.project,t.project.selectedTask,e),d.event("Student Project View - Tasks Tab","Updated Status as "+(null!=t.assessingUnitRole?t.assessingUnitRole.role:"Student"),s.statusLabels[e]);t.setActiveTab(t.tabs.fileUpload),t.project.selectedTask.status=e}}}})},"0mrk":function(t,e){angular.module("doubtfire.tasks.modals",["doubtfire.tasks.modals.grade-task-modal","doubtfire.tasks.modals.upload-submission-modal","doubtfire.tasks.modals.plagiarism-report-modal"])},"0r4E":function(t,e){angular.module("doubtfire.common.pdf-viewer",[]).directive("pdfViewer",function(){return{restrict:"E",templateUrl:"common/pdf-viewer/pdf-viewer.tpl.html",scope:{pdfUrl:"="},controller:function(t,e){}}})},"19sK":function(t,e){angular.module("doubtfire.units.states.edit.directives.unit-ilo-editor",[]).directive("unitIloEditor",function(){return{replace:!0,restrict:"E",templateUrl:"units/states/edit/directives/unit-ilo-editor/unit-ilo-editor.tpl.html",controller:function(t,e,n,r,i,o,a){return t.batchFiles={file:{name:"CSV Data",type:"csv"}},t.batchOutcomeUrl=function(){return r.getOutcomeBatchUploadUrl(t.unit)},t.onBatchOutcomeSuccess=function(e){if(o.show("Outcome CSV Upload Results",e),e.success.length>0)return t.unit.refresh()},t.editILO=function(e){return a.show(t.unit,e)},t.createILO=function(){return t.editILO()},t.deleteILO=function(e){return r.delete({id:e.id,unit_id:t.unit.id},function(n){return t.unit.ilos=_.without(t.unit.ilos,e),i.add("info","ILO "+e.id+" was deleted successfully",2e3)},function(t){return i.add("danger","Error: "+t.data.error,6e3)})}}}})},"1VGn":function(t,e){angular.module("doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-description-card",[]).directive("taskDescriptionCard",function(){return{restrict:"E",templateUrl:"projects/states/dashboard/directives/task-dashboard/directives/task-description-card/task-description-card.tpl.html",scope:{task:"=",taskDef:"=",unit:"="},controller:function(t,e,n,r,i,o){return n.listenTo(t).push(t.$watch("taskDef.id",function(){if(null!=t.taskDef)return t.urls={taskSheet:e.getTaskPDFUrl(t.unit,t.taskDef)+"&as_attachment=true",resources:e.getTaskResourcesUrl(t.unit,t.taskDef)}})),t.downloadEvent=function(t){return r.event("Task Sheet","Downloaded Task "+t)},t.grades={names:i.grades,acronyms:i.gradeAcronyms},t.dueDate=function(){return null!=t.task?t.task.targetDate():null!=t.taskDef?t.taskDef.localTargetDate():new Date},t.startDate=function(){return null!=t.task?t.task.startDate():null!=t.taskDef?t.taskDef.start_date:new Date},t.shouldShowDeadline=function(){var e;return(null!=(e=t.task)?e.daysUntilDueDate():void 0)<=14||!1},t.applyForExtension=function(){return t.task.applyForExtension(function(t){return o.add("success","Extension granted",2e3)},function(t){return o.add("danger","Extension failed - "+t.data.error,6e3)})}}}})},"1gZ8":function(t,e){angular.module("doubtfire.home.states.home",[]).config(function(t){return t.state("home",{url:"/home?notifications",views:{main:{controller:"HomeCtrl",templateUrl:"home/states/home/home.tpl.html"}},data:{pageTitle:"_Home_",roleWhitelist:["Student","Tutor","Convenor","Admin"]}})}).controller("HomeCtrl",function(t,e,n,r,i,o,a,s,l,u,c,d,p,f){var h,m,g,v,b,y;if(d.event("Home","Viewed Home page"),t.externalName=o.ExternalName,t.userFirstName=s.profile.nickname||s.profile.first_name,t.showDate=p.showDate,v=function(){var t,n,r;return r=null===s.profile.opt_in_to_research,n=(t=!1===s.profile.has_run_first_time_setup)||r,r=r&&!t,n&&e.go("new-user-wizard",{optInOnly:r}),n},b=function(){return v()},y=n(function(){return t.showSpinner=!0},2e3),l.getUnitRoles(function(e){return t.unitRoles=e,u.getProjects(!1,function(e){return t.projects=e,t.showSpinner=!1,t.dataLoaded=!0,b(),n.cancel(y)})}),h=function(){if(null!=t.unitRoles&&null!=t.projects)return t.notEnrolled=function(){return 0===t.unitRoles.length&&"Tutor"===s.role||0===t.projects.length&&"Student"===s.role}},t.$watch("projects",h),t.$watch("unitRoles",h),"Student"!==s.role&&i.query(function(e){return t.units=e}),t.unit=function(e){return _.find(t.units,{id:e})},t.currentUser=s,null!=(null!=(m=e.params)?m.notifications:void 0)&&"true"===(null!=(g=e.params)?g.notifications:void 0))return f.show(null!=s?s.profile:void 0)})},"1lqO":function(t,e){angular.module("doubtfire.units.states.edit.directives.unit-details-editor",[]).directive("unitDetailsEditor",function(){return{replace:!0,restrict:"E",templateUrl:"units/states/edit/directives/unit-details-editor/unit-details-editor.tpl.html",controller:function(t,e,n,r,i,o,a,s){return t.calOptions={startOpened:!1,endOpened:!1},t.externalName=r.ExternalName,t.teachingPeriods=s.query(),t.open=function(e,n){return e.preventDefault(),e.stopPropagation(),"start"===n?(t.calOptions.startOpened=!t.calOptions.startOpened,t.calOptions.endOpened=!1):(t.calOptions.startOpened=!1,t.calOptions.endOpened=!t.calOptions.endOpened)},t.dateOptions={formatYear:"yy",startingDay:1},t.unitTypeAheadData=a.unitTypeAheadData,t.studentSearch="",t.saveUnit=function(){var e;return t.unit.convenors&&delete t.unit.convenors,t.unit.start_date&&t.unit.start_date.getMonth&&(t.unit.start_date=t.unit.start_date.getFullYear()+"-"+(t.unit.start_date.getMonth()+1)+"-"+t.unit.start_date.getDate()),t.unit.end_date&&t.unit.end_date.getMonth&&(t.unit.end_date=t.unit.end_date.getFullYear()+"-"+(t.unit.end_date.getMonth()+1)+"-"+t.unit.end_date.getDate()),e=t.unit.teaching_period_id?{name:t.unit.name,code:t.unit.code,description:t.unit.description,teaching_period_id:t.unit.teaching_period_id,active:t.unit.active}:{name:t.unit.name,code:t.unit.code,description:t.unit.description,start_date:t.unit.start_date,end_date:t.unit.end_date,active:t.unit.active},-1===t.unit.id?i.create({unit:e},function(e){return t.saveSuccess(e)},function(t){return o.add("danger",t.data.error,6e3)}):i.update({id:t.unit.id,unit:e},function(t){return o.add("success","Unit updated.",2e3)},function(t){return o.add("danger","Failed to update unit. "+t.data.error,6e3)})}}}})},"1pJz":function(t,e){angular.module("doubtfire.units.states.analytics.directives.task-status-stats",[]).directive("taskStatusStats",function(){return{replace:!0,restrict:"E",templateUrl:"units/states/analytics/directives/task-status-stats/task-status-stats.tpl.html",scope:{unit:"="},controller:function(t,e,n,r){var i,o;return t.dataModel={},t.depth=0,t.overviewSelectors={task:{text:"Overview of tasks",seq:-1,id:-1},tutorial:{text:"Overview of tutorials",abbreviation:"ZZZ",id:-1}},t.tasksForSelector=[t.overviewSelectors.task],_.each(t.unit.task_definitions,function(e){return t.tasksForSelector.push({text:e.abbreviation+" - "+e.name,id:e.id,seq:e.seq,abbreviation:e.abbreviation,name:e.name})}),t.tutorialsForSelector=[],_.each(t.unit.tutorials,function(e){return t.tutorialsForSelector.push({text:e.abbreviation+" - "+e.tutor_name,id:e.id,meeting_time:e.meeting_time,tutor_name:e.tutor_name,abbreviation:e.abbreviation})}),t.tutorialsForSelector.push(t.overviewSelectors.tutorial),null==t.unit.analytics.taskStatusCountByTutorial?n.taskStatusCountByTutorial.get({id:t.unit.id},function(e){return delete e.$promise,delete e.$resolved,t.unit.analytics.taskStatusCountByTutorial=e,t.dataModel.selectedType="unit",t.switchToTasksForTutorial()}):t.dataModel.selectedType="unit",i=!0,o=!0,t.$watch("dataModel.selectedType",function(e){if(o){if(t.dataModel.selectedTutorial=null,t.dataModel.selectedTask=null,t.depth=0,null!=e)switch(e){case"unit":return t.data=t.reduceDataToOverall();case"tutorial":return t.dataModel.selectedTutorial=t.overviewSelectors.tutorial;case"task":return t.dataModel.selectedTask=t.overviewSelectors.task}}else o=!0}),t.$watch("dataModel.selectedTutorial",function(n){if(null!=n){if(i)return n.id>=0?(t.depth=0,t.data=t.reduceDataToTutorialWithId(n)):(t.depth=1,t.data=t.reduceDataToTutorial(),t.overviewKeys=_.map(t.unit.tutorials,function(n){return{subtitle:n.tutor_name+" at "+e("date")(n.meeting_time,"shortTime"),title:n.abbreviation,data:t.data[n.id],show:_.keys(t.data[n.id]).length>0,tutorial:n}}));i=!0}}),t.$watch("dataModel.selectedTask",function(e){if(null!=e){if(i)return e.id>=0?(t.depth=0,t.data=t.reduceDataToTaskDefWithId(e)):(t.depth=1,t.data=t.reduceDataToTaskDef(),t.overviewKeys=_.map(t.unit.task_definitions,function(e){return{title:e.abbreviation,subtitle:e.name,data:t.data[e.id],show:_.keys(t.data[e.id]).length>0,task:e}}));i=!0}}),t.$watch("data",function(e){var n,i;if(null!=e)return i=_.chain(e).values().reduce(function(t,e){return t+e},0).value(),t.completeStats=null==(n=e[r.acronymKey.COM]/i)||isNaN(n)?{completed:0,left:100}:{completed:Math.round(100*n),left:Math.round(100*(1-n))}}),t.drillToTask=function(e){return 0===t.depth||2===t.depth?(o=!1,i=2===t.depth,t.dataModel.selectedType="task",t.dataModel.selectedTutorial=null,t.dataModel.selectedTask=e):(o=i=!1,t.drillDown(e))},t.drillToTutorial=function(e){return 0===t.depth||2===t.depth?(o=!1,i=2===t.depth,t.dataModel.selectedType="tutorial",t.dataModel.selectedTask=null,t.dataModel.selectedTutorial=e):(o=i=!1,t.drillDown(e))},t.drillDown=function(n){var r;switch(t.dataModel.selectedType){case"unit":return t.dataModel.selectedType="tutorial";case"tutorial":return t.depth=2,null!=n?(t.dataModel.selectedTutorial=n,r=n):r=t.dataModel.selectedTutorial,t.data=t.switchToTasksForTutorial()[r.id],t.overviewKeys=_.map(t.unit.task_definitions,function(e){return{data:t.data[e.id],show:_.keys(t.data[e.id]).length>0,task:e,title:e.abbreviation,subtitle:e.name}});case"task":return t.depth=2,null!=n?(t.dataModel.selectedTask=n,r=n):r=t.dataModel.selectedTask,t.data=t.switchToTutorialsForTask()[r.id],t.overviewKeys=_.map(t.unit.tutorials,function(n){return{data:t.data[n.id],show:_.keys(t.data[n.id]).length>0,tutorial:n,title:n.abbreviation,subtitle:n.tutor_name+" at "+e("date")(n.meeting_time,"shortTime")}})}},t.resetToOverview=function(){switch(t.dataModel.selectedType){case"unit":return;case"tutorial":t.dataModel.selectedTutorial=t.overviewSelectors.tutorial;break;case"task":t.dataModel.selectedTask=t.overviewSelectors.task}return drillDown()},t.switchToTasksForTutorial=function(){var e;return(e={})[""]={},_.each(t.unit.task_definitions,function(t){return e[""][t.id]={}}),_.each(t.unit.tutorials,function(n){return e[n.id]={},_.each(t.unit.task_definitions,function(t){return e[n.id][t.id]={}})}),_.each(t.unit.analytics.taskStatusCountByTutorial,function(t,n){return _.each(t,function(t,r){return _.each(t,function(t){return e[r][n][t.status]=t.num})})}),e},t.switchToTutorialsForTask=function(){var e;return e={},_.each(t.unit.task_definitions,function(n){return e[n.id]={},_.each(t.unit.tutorials,function(t){return e[n.id][t.id]={}}),e[n.id][""]={}}),_.each(t.unit.analytics.taskStatusCountByTutorial,function(t,n){return _.each(t,function(t,r){return _.each(t,function(t,i){return e[n][r][t.status]=t.num})})}),e},t.reduceDataToTaskDef=function(){return _.chain(t.unit.analytics.taskStatusCountByTutorial).map(function(t,e){return[e,_.chain(t).values().flatten().groupBy("status").map(function(t,e){return[e,_.chain(t).map(function(t){return t.num}).reduce(function(t,e){return t+e},0).value()]}).fromPairs().value()]}).fromPairs().value()},t.reduceDataToTaskDefWithId=function(e){return t.reduceDataToTaskDef()[e.id]},t.reduceDataToOverall=function(){var e;return e=_.values(t.reduceDataToTaskDef()),_.reduce(e,function(t,e){var n;for(n in e)t[n]=(n in t?t[n]:0)+e[n];return t},{})},t.reduceDataToTutorial=function(){var e,n,r,i,o,a,s,l,u;for(a in e={},i=t.unit.analytics.taskStatusCountByTutorial)for(l in s=i[a])for(u=s[l],null==e[l]&&(e[l]={}),n=0,r=u.length;n<r;n++)null==e[l][(o=u[n]).status]&&(e[l][o.status]=0),e[l][o.status]+=o.num;return e},t.reduceDataToTutorialWithId=function(e){return t.reduceDataToTutorial()[e.id]}}}})},"2ChG":function(t,e){angular.module("doubtfire.common.audio-recorder",[]).directive("audioRecorder",function(){return{restrict:"E",replace:!0,templateUrl:"common/audio-recorder/audio-recorder.tpl.html",controller:function(t,e,n,r){var i,o,a,s,l,u,c;navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(t.canRecord=!0,(l=new n).config.stopTracksAndCloseCtxWhenFinished=!0,l.config.createAnalyserNode=!0,l.em.addEventListener("recording",function(t){return u(t)}),t.recordingAvailable=!1,t.isRecording=!1,o={},a=document.getElementById("audio-recorder-visualiser"),i=document.getElementById("audioPlayer"),s=a.getContext("2d"),t.playStop=function(){i.paused?(i.play(),t.isPlaying=!0):(i.pause(),i.currentTime=0,t.isPlaying=!1)},u=function(e){o=e.detail.recording.blob,i.src=e.detail.recording.blobUrl,i.load(),t.$apply(function(){return t.recordingAvailable=!0})},c=function(){var t,e,n;n=function(){var r,i,o,l,u,c;for(i=a.width,r=a.height,requestAnimationFrame(n),t.getByteTimeDomainData(e),t.getByteFrequencyData(e),s.clearRect(0,0,i,r),c=0;c<i;)s.fillRect(l=10*c,u=r/2,1,o=-e[c]/4+1),s.fillRect(l,u-o,1,o),c++},(t=l.analyserNode).fftSize=2048,e=new Uint8Array(t.frequencyBinCount),n()},t.recordingToggle=function(){t.isRecording?t.isRecording&&(l.stopRecording(),t.isRecording=!1):(l.startRecording(),c(),t.isRecording=!0)},t.sendRecording=function(){e.addMediaComment(t.task,o,function(t){return e.scrollDown()},function(t){var e;return r.add("danger","Failed to post audio. "+(null!=(e=t.data)?e.error:void 0))}),o={},t.recordingAvailable=!1,e.scrollDown()})}}})},"2Isw":function(t,e){angular.module("doubtfire.errors.states.unauthorised",[]).config(function(t){return t.state("unauthorised",{url:"/unauthorised",views:{main:{controller:"UnauthorisedCtrl",templateUrl:"errors/states/unauthorised/unauthorised.tpl.html"}},data:{pageTitle:"_Unauthorised_"}})}).controller("UnauthorisedCtrl",function(t){})},"2Kj5":function(t,e){angular.module("doubtfire.api.models.task-feedback",[]).factory("TaskFeedback",function(t,e,n,r){var i;return(i=r("/projects/:project_id/task_def_id/:task_definition_id/submission",{task_definition_id:"@task_definition_id",project_id:"@project_id"})).getTaskUrl=function(n,r){var i;return null==r&&(r=!1),i=t.API_URL+"/projects/"+n.project().project_id+"/task_def_id/"+n.definition.id+"/submission?auth_token="+e.authenticationToken,r&&(i+="&as_attachment=true"),i},i.getTaskFilesUrl=function(n){return t.API_URL+"/projects/"+n.project().project_id+"/task_def_id/"+n.definition.id+"/submission_files?auth_token="+e.authenticationToken},i.openFeedback=function(t){return n.open(i.getTaskUrl(t),"_blank")},i})},"2TZ6":function(t,e){angular.module("doubtfire.projects.states.dashboard.directives",["doubtfire.projects.states.dashboard.directives.student-task-list","doubtfire.projects.states.dashboard.directives.progress-dashboard","doubtfire.projects.states.dashboard.directives.task-dashboard"])},"2VkZ":function(t,e){angular.module("doubtfire.visualisations",["doubtfire.visualisations.summary-task-status-scatter","doubtfire.visualisations.progress-burndown-chart","doubtfire.visualisations.alignment-bar-chart","doubtfire.visualisations.alignment-bullet-chart","doubtfire.visualisations.student-task-status-pie-chart","doubtfire.visualisations.task-status-pie-chart","doubtfire.visualisations.target-grade-pie-chart","doubtfire.visualisations.task-completion-box-plot","doubtfire.visualisations.achievement-box-plot","doubtfire.visualisations.achievement-custom-bar-chart"]).factory("Visualisation",function(t,e){var n;return(n=function(t,n,r,i,o,a){var s,l,u;return s={visible:!0,extended:!1,disabled:!1,autorefresh:!0,refreshDataOnly:!0,deepWatchOptions:!0,deepWatchData:!1,deepWatchConfig:!0,debounce:10},(u=angular.extend({},{objectequality:!0,interactive:!0,showValues:!0,showXAxis:!0,showYAxis:!0,showLegend:!0,transitionDuration:500,duration:500,height:600,color:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]},r)).type=t,l=angular.extend({},s,i),e.event("Visualisations","Created Visualisation",n),[{chart:u,title:o,subtitle:a},l]}).refreshAll=function(){return t(function(){return window.dispatchEvent(new Event("resize"))},50,1)},n})},"3QH1":function(t,e){angular.module("doubtfire.units.states.edit.directives.unit-staff-editor",[]).directive("unitStaffEditor",function(){return{replace:!0,restrict:"E",templateUrl:"units/states/edit/directives/unit-staff-editor/unit-staff-editor.tpl.html",controller:function(t,e,n,r,i,o){return t.changeRole=function(e,n){return e.role_id=n,e.unit_id=t.unit.id,r.update({id:e.id,unit_role:e},function(t){return i.add("success","Role changed",2e3)},function(t){return i.add("danger",t.data.error,6e3)})},t.addSelectedStaff=function(){var e,n;return e=t.selectedStaff,t.selectedStaff=null,t.unit.staff||(t.unit.staff=[]),null!=e.id?n=r.create({unit_id:t.unit.id,user_id:e.id,role:"Tutor"},function(e){return t.unit.staff.push(n)},function(t){return i.add("danger","Unable to add staff member. "+t.data.error,6e3)}):i.add("danger","Unable to add staff member. Ensure they have a tutor or convenor account in User admin first.",6e3)},t.findStaffUser=function(e){var n,r,i,o;for(n=0,r=(i=t.staff).length;n<r;n++)if((o=i[n]).id===e)return o},t.filterStaff=function(e){return!_.find(t.unit.staff,function(t){return e.id===t.user_id})},t.removeStaff=function(e){return t.unit.staff=_.without(t.unit.staff,e),r.delete({id:e.id}),t.findStaffUser(e.user_id)},t.groupSetName=function(e){return o.groupSetName(e,t.unit)}}}})},"3Vef":function(t,e){angular.module("doubtfire.units.modals",["doubtfire.units.modals.unit-ilo-edit-modal","doubtfire.units.modals.unit-student-enrolment-modal","doubtfire.units.modals.unit-tutorial-edit-modal"])},"3g9P":function(t,e){angular.module("doubtfire.api.models",["doubtfire.api.models.break","doubtfire.api.models.project","doubtfire.api.models.unit","doubtfire.api.models.unit-role","doubtfire.api.models.user-role","doubtfire.api.models.convenor","doubtfire.api.models.tutor","doubtfire.api.models.tutorial","doubtfire.api.models.learning-alignments","doubtfire.api.models.intended-learning-outcome","doubtfire.api.models.task","doubtfire.api.models.task-comment","doubtfire.api.models.task-definition","doubtfire.api.models.group-member","doubtfire.api.models.group","doubtfire.api.models.group-set","doubtfire.api.models.rollover-unit","doubtfire.api.models.task-alignment","doubtfire.api.models.task-feedback","doubtfire.api.models.task-similarity","doubtfire.api.models.teaching-period","doubtfire.api.models.students","doubtfire.api.models.user","doubtfire.api.models.task-completion-csv","doubtfire.api.models.portfolio-submission"])},"3nbo":function(t,e){angular.module("doubtfire.api.models.unit",[]).factory("Unit",function(t,e,n,r){var i;return(i=t("/units/:id",{id:"@id"})).getGradesUrl=function(t){return r.API_URL+"/units/"+(null!=t?t.id:void 0)+"/grades?auth_token="+e.authenticationToken},i.getPortfoliosUrl=function(t){return r.API_URL+"/submission/unit/"+(null!=t?t.id:void 0)+"/portfolio?auth_token="+e.authenticationToken},i.getAllTaskSubmissionsUrl=function(t,n){return r.API_URL+"/submission/unit/"+(null!=t?t.id:void 0)+"/task_definitions/"+(null!=n?n.id:void 0)+"/download_submissions?auth_token="+e.authenticationToken},i.taskUploadUrl=function(t){return r.API_URL+"/units/"+t.id+"/task_definitions/task_pdfs?auth_token="+e.authenticationToken},i.taskSheetUploadUrl=function(t,n){return r.API_URL+"/units/"+t.id+"/task_definitions/"+n.id+"/task_sheet?auth_token="+e.authenticationToken},i.taskResourcesUploadUrl=function(t,n){return r.API_URL+"/units/"+t.id+"/task_definitions/"+n.id+"/task_resources?auth_token="+e.authenticationToken},i.allResourcesDownloadUrl=function(t){return r.API_URL+"/units/"+t.id+"/all_resources?auth_token="+e.authenticationToken},i.enrolStudentsCSVUrl=function(t){return r.API_URL+"/csv/units/"+t.id+"?auth_token="+e.authenticationToken},i.withdrawStudentsCSVUrl=function(t){return r.API_URL+"/csv/units/"+t.id+"/withdraw?auth_token="+e.authenticationToken},i.learningProgressClassStats=t("/units/:id/learning_alignments/class_stats",{id:"@id"}),i.learningProgressClassDetails=t("/units/:id/learning_alignments/class_details",{id:"@id"}),i.tasksRequiringFeedback=t("/units/:id/feedback",{id:"@id"}),i.tasksForTaskInbox=t("/units/:id/tasks/inbox",{id:"@id"}),i.tasksForDefinition=t("/units/:id/task_definitions/:task_def_id/tasks",{id:"@id",task_def_id:"@task_def_id"}),i.taskStatusCountByTutorial=t("/units/:id/stats/task_status_pct",{id:"@id"}),i.targetGradeStats=t("/units/:id/stats/student_target_grade",{id:"@id"}),i.taskCompletionStats=t("/units/:id/stats/task_completion_stats",{id:"@id"}),i.groups=t("/units/:id/groups",{id:"@id"}),i})},"47hH":function(t,e){angular.module("doubtfire.common.on-long-press",[]).directive("onLongPress",function(t){return{restrict:"A",link:function(e,n,r){n.bind("touchstart",function(t){}),e.longPress=!0,t(function(){e.longPress&&e.$apply(function(){e.$eval(r.onLongPress)})},600)}}})},"4Xs5":function(t,e){angular.module("doubtfire.common.services.comments",[]).factory("CommentResourceService",function(){var t;return(t={}).setResourceUrl=function(e){if(null!=e)return t.commentResourceUrl=e},t.setCommentType=function(e){if(null!=e)return t.commentType=e},t.setTask=function(e){if(null!=e)return t.task=e},t})},"4jb+":function(t,e){angular.module("doubtfire.units.states.plagiarism.directives.unit-student-plagiarism-list",[]).directive("unitStudentPlagiarismList",function(){return{replace:!0,restrict:"E",templateUrl:"units/states/plagiarism/directives/unit-student-plagiarism-list/unit-student-plagiarism-list.tpl.html",scope:{unit:"=",unitRole:"="},controller:function(t,e,n,r,i){return t.grades=r.grades,t.view="students",t.tutorName=n.profile.name,t.search="",t.reverse=!1,t.currentPage=1,t.maxSize=5,t.pageSize=5,t.assessingUnitRole=t.unitRole,t.studentFilter="allStudents",t.$watch("unit.students",function(n){var r;if(null!=(r=e("showStudents")(t.unit.students,"myStudents",t.tutorName))&&0===r.length)return t.studentFilter="allStudents"}),t.activeStudent=null,t.activeTask=null,t.loadingStudent=!0,t.selectStudent=function(n){if(t.activeStudent=n,t.loadingStudent=!0,n)return i.getProject(n,t.unit,function(r){return t.activeTask=e("taskWithPlagiarism")(n.tasks)[0],t.loadingStudent=!1})},t.selectTask=function(e){return t.activeTask=e}}}})},"4wZu":function(t,e){angular.module("doubtfire.tasks.task-comments-viewer",[]).directive("taskCommentsViewer",function(){return{restrict:"E",templateUrl:"tasks/task-comments-viewer/task-comments-viewer.tpl.html",scope:{task:"=",comment:"=?",autofocus:"@?",refocusOnTaskChange:"@?"},controller:function(t,e,n,r,i,o,a,s,l,u,c,d,p,f,h,m,g){var v,b;return v=s.listenTo(t),_.isString(null!=(b=t.comment)?b.text:void 0)||(t.comment={text:""}),v.push(t.$watch("task",function(e){if(null!=(null!=e?e.project:void 0))return t.project=e.project(),c.query({project_id:t.project.project_id,task_definition_id:t.task.task_definition_id},function(e){return t.task.comments=_.map(e,f.mapComment),t.lastComment=t.task.comments.slice(-1)[0],t.task.num_new_comments=0,f.scrollDown(),t.refocusOnTaskChange&&"function"==typeof t.focus&&t.focus(),o.setTask(t.task)})})),t.openCommentsModal=function(e){var n;return n=r.trustAsResourceUrl(d.generateCommentsAttachmentUrl(t.project,t.task,e)),o.setResourceUrl(n),o.setCommentType(e.type),a.show()},t.canUserEdit=function(t){var e;return e=!1,(t.author_is_me||"Admin"===l.role)&&(e=!0),e},t.getCommentAttachment=function(e){return r.trustAsResourceUrl(d.generateCommentsAttachmentUrl(t.project,t.task,e))},t.deleteComment=function(e){return c.delete({project_id:t.project.project_id,task_definition_id:t.task.task_definition_id,id:e},function(n){return t.task.comments=t.task.comments.filter(function(t){return t.id!==e}),g.event("View Task Comments","Deleted existing comment")},function(t){return h.add("danger",t.data.error,2e3)})}}}})},"5Buf":function(t,e){angular.module("doubtfire.common.filters",[]).filter("startFrom",function(){return function(t,e){return null!=t?t.slice(+e):void 0}}).filter("showStudents",function(){return function(t,e,n){return!t||"mine"!==e&&"myStudents"!==e?t:_.filter(t,{tutorial:{tutor_name:n}})}}).filter("showTasks",function(){return function(t,e,n){return t&&"mine"===e?_.filter(t,function(t){return null!=t&&t.project().tutorName()===n}):t}}).filter("orderObjectBy",function(){return function(t,e,n){var r;return r=[],angular.forEach(t,function(t){return r.push(t)}),r.sort(function(t,n){var r;return null!=(r=t[e]>n[e])?r:{1:-1}}),n&&r.reverse(),r}}).filter("byGrade",function(){return function(t,e){return t?_.filter(t,function(t){return null!=t&&t.definition.target_grade<=e}):t}}).filter("studentsWithPlagiarism",function(){return function(t){return t?_.filter(t,function(t){return null!=t&&t.max_pct_copy>0}):t}}).filter("studentsWithPortfolio",function(){return function(t,e){return t?_.filter(t,function(t){return"allStudents"===e||null!=t&&t.has_portfolio>0}):t}}).filter("studentsWithTargetGrade",function(){return function(t,e){return t&&e>-1?_.filter(t,function(t){return null!=t&&t.target_grade===e}):t}}).filter("taskWithPlagiarism",function(){return function(t){return t?_.filter(t,function(t){return null!=t&&t.pct_similar>0}):t}}).filter("studentsForGroup",function(){return function(t,e,n,r){return t?e.keep_groups_in_same_class?_.filter(t,function(t){return null!=t&&t.tutorial_id===n.tutorial_id&&!_.find(r,function(e){return t.project_id===e.project_id})}):_.filter(t,function(t){return null!=t&&!_.find(r,function(e){return t.project_id===e.project_id})}):t}}).filter("outcomeFilter",function(){return function(t,e){return t&&e?_.filter(t,function(t){return t.learning_outcome_id===e}):t}}).filter("taskDefinitionFilter",function(){return function(t,e){return t&&e?_.filter(t,function(t){return t.task_definition_id===e}):t}}).filter("truncatedMarkdown",function(t){return function(e,n){return n=n||128,e=t("markdown")(e),e=t("stripTags")(e),t("truncate")(e,n,"...")}}).filter("statusFilter",function(){return function(t,e){return t&&e?_.filter(t,function(t){return"discuss"===e?t.status===e||"demonstrate"===t.status:t.status===e}):t}}).filter("taskFilter",function(){return function(t,e){var n;if(_.isString(e))return n=e.toLowerCase(),t?_.filter(t,function(t){var e;return null!=t&&(e=t.project(),t.definition.abbreviation.toLowerCase().indexOf(n)>=0||t.definition.name.toLowerCase().indexOf(n)>=0||null!=e&&(e.student_id.indexOf(n)>=0||e.name.toLowerCase().indexOf(n)>=0||null!=e.tutorial&&(e.tutorial.abbreviation.toLowerCase().indexOf(n)>=0||null!=e.tutorName()&&e.tutorName().toLowerCase().indexOf(n)>=0)))}):t}}).filter("projectFilter",function(){return function(t,e){var n;if(_.isString(e))return n=e.toLowerCase(),t?_.filter(t,function(t){return null!=t&&(t.student_id.indexOf(n)>=0||t.name.toLowerCase().indexOf(n)>=0||null!=t.tutorial&&(t.tutorial.abbreviation.toLowerCase().indexOf(n)>=0||null!=t.tutorName()&&t.tutorName().toLowerCase().indexOf(n)>=0))}):t}}).filter("taskForPortfolio",function(t){return function(e,n){return n&&e?_.filter(e,function(e){return null!=e&&!_.includes(t.toBeWorkedOn,e.status)}):e}}).filter("tasksOfTaskDefinition",function(){return function(t,e){return null==e||null==t?t:_.filter(t,{task_definition_id:e.id})}}).filter("tasksWithStatuses",function(){return function(t,e){return null==t?t:_.isEmpty(e)?[]:_.filter(t,function(t){return _.includes(e,t.status)})}}).filter("tasksInTutorials",function(){return function(t,e){return null==t?t:_.isEmpty(e)?[]:_.filter(t,function(t){return t.isGroupTask()?null!=t.group()?_.includes(e,t.group().tutorial_id):void 0:_.includes(e,t.project().tutorial_id)})}}).filter("tasksWithStudentName",function(){return function(t,e){return null==e||null==t?t:(e=e.toLowerCase(),_.filter(t,function(t){return t.project().name.toLowerCase().indexOf(e)>=0}))}}).filter("groupsInTutorials",function(){return function(t,e,n){if(null!=t&&null!=e&&null!=n)return"all"===n?t:"mine"===n?_.filter(t,function(t){return t.tutorial().tutor_name===e.name}):void 0}}).filter("groupsForStudent",function(){return function(t,e,n){if(null!=t&&null!=n&&null!=e)return n.keep_groups_in_same_class?n.keep_groups_in_same_class?_.filter(t,function(t){var n;return t.tutorial_id===(null!=(n=e.tutorial)?n.id:void 0)}):void 0:t}}).filter("paginateAndSort",function(t){return function(e,n,r){if(null!=e&&null!=r&&null!=n)return 0===e.length?e:(n.show=e.length>n.pageSize,n.totalSize=e.length,e=t("orderBy")(e,r.order,r.reverse),e=t("startFrom")(e,(n.currentPage-1)*n.pageSize),e=t("limitTo")(e,n.pageSize))}}).filter("tasksWithName",function(){return function(t,e){return null==e||null==t?t:(e=e.toLowerCase(),_.filter(t,function(t){return t.definition.name.toLowerCase().indexOf(e)>=0||t.definition.abbreviation.toLowerCase().indexOf(e)>=0}))}}).filter("taskDefinitionName",function(){return function(t,e){return null==e||null==t?t:(e=e.toLowerCase(),_.filter(t,function(t){return t.name.toLowerCase().indexOf(e)>=0||t.abbreviation.toLowerCase().indexOf(e)>=0||t.targetGrade().toLowerCase().indexOf(e)>=0}))}}).filter("humanizedDate",function(t){return function(t){if(null!=t)return moment(t).calendar(null,{sameDay:"",nextDay:"[tomorrow]",nextWeek:"[this] dddd",lastDay:"[yesterday]",lastWeek:"[last] dddd",sameElse:"DD/MM/YYYY"})}}).filter("lcfirst",function(){return function(t){if(null!=t&&0!==t.length)return t[0].toLowerCase()+t.substring(1)}}).filter("isActiveUnitRole",function(){return function(t){return _.filter(t,function(t){return t.active})}})},"5GP2":function(t,e){angular.module("doubtfire.sessions.states",["doubtfire.sessions.states.sign-in","doubtfire.sessions.states.sign-out"])},"5Zb3":function(t,e){angular.module("doubtfire.api.models.group-set",[]).factory("GroupSet",function(t,e,n,r){var i;return(i=t("/units/:unit_id/group_sets/:id",{id:"@id",unit_id:"@unit_id"})).groupCSVUploadUrl=function(t,r){return e.API_URL+"/units/"+t.id+"/group_sets/"+r.id+"/groups/csv.json?auth_token="+n.authenticationToken},i.downloadCSV=function(t,i){return r.open(e.API_URL+"/units/"+t.id+"/group_sets/"+i.id+"/groups/csv.json?auth_token="+n.authenticationToken,"_blank")},i})},"5fuZ":function(t,e){var n;angular.module("xeditable",[]).value("editableOptions",{theme:"default",icon_set:"default",buttons:"right",blurElem:"cancel",blurForm:"ignore",activate:"focus",isDisabled:!1,activationEvent:"click",submitButtonTitle:"Submit",submitButtonAriaLabel:"Submit",cancelButtonTitle:"Cancel",cancelButtonAriaLabel:"Cancel",clearButtonTitle:"Clear",clearButtonAriaLabel:"Clear",displayClearButton:!1}),angular.module("xeditable").directive("editableBsdate",["editableDirectiveFactory","$injector","$parse",function(t,e,n){var r=e.get("uibDatepickerConfig"),i=e.get("uibDatepickerPopupConfig"),o=[["eIsOpen","is-open"],["eDateDisabled","date-disabled"],["eDatepickerPopup","uib-datepicker-popup"],["eShowButtonBar","show-button-bar"],["eCurrentText","current-text"],["eClearText","clear-text"],["eCloseText","close-text"],["eCloseOnDateSelection","close-on-date-selection"],["eDatepickerAppendToBody","datepicker-append-to-body"],["eOnOpenFocus","on-open-focus"],["eName","name"],["eDateDisabled","date-disabled"],["eAltInputFormats","alt-input-formats"],["eDatepickerTemplateUrl","datepicker-template-url"]],a=[["eFormatDay","formatDay"],["eFormatMonth","formatMonth"],["eFormatYear","formatYear"],["eFormatDayHeader","formatDayHeader"],["eFormatDayTitle","formatDayTitle"],["eFormatMonthTitle","formatMonthTitle"],["eMaxMode","maxMode"],["eMinMode","minMode"],["eDatepickerMode","datepickerMode"]];return t({directiveName:"editableBsdate",inputTpl:"<div></div>",render:function(){this.parent.render.call(this);var t=this.attrs,e=this.scope,s=angular.element('<input type="text" class="form-control" ng-model="$parent.$data"/>');s.attr("uib-datepicker-popup",t.eDatepickerPopupXEditable||i.datepickerPopup),s.attr("year-range",t.eYearRange||20),s.attr("ng-readonly",t.eReadonly||!1);for(var l=o.length-1;l>=0;l--){var u=t[o[l][0]];void 0!==u&&s.attr(o[l][1],u)}t.eNgChange&&(s.attr("ng-change",t.eNgChange),this.inputEl.removeAttr("ng-change")),t.eStyle&&(s.attr("style",t.eStyle),this.inputEl.removeAttr("style"));var c={maxDate:e.$eval(t.eMaxDate)||r.maxDate,minDate:e.$eval(t.eMinDate)||r.minDate,showWeeks:t.eShowWeeks?"true"===t.eShowWeeks.toLowerCase():r.showWeeks,startingDay:t.eStartingDay||0,initDate:e.$eval(t.eInitDate)||new Date};if(t.eDatepickerOptions){var d=n(t.eDatepickerOptions)(e);angular.extend(c,d)}for(var p=a.length-1;p>=0;p--){var f=t[a[p][0]];void 0!==f&&(c[a[p][1]]=f)}if(e.dateOptions=c,"true"===(angular.isDefined(t.eShowCalendarButton)?t.eShowCalendarButton:"true")){var h=angular.element('<button type="button" class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button>'),m=angular.element('<span class="input-group-btn"></span>');h.attr("ng-click",t.eNgClick),m.append(h),this.inputEl.append(m)}else s.attr("ng-click",t.eNgClick);s.attr("datepicker-options","dateOptions"),this.inputEl.prepend(s),this.inputEl.removeAttr("class"),this.inputEl.removeAttr("ng-click"),this.inputEl.removeAttr("is-open"),this.inputEl.removeAttr("init-date"),this.inputEl.removeAttr("datepicker-popup"),this.inputEl.removeAttr("required"),this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("date-picker-append-to-body"),this.inputEl.removeAttr("name"),this.inputEl.attr("class","input-group")},autosubmit:function(){var t=this;t.inputEl.bind("change",function(){setTimeout(function(){t.scope.$apply(function(){t.scope.$form.$submit()})},500)}),t.inputEl.bind("keydown",function(e){9===e.keyCode&&"submit"===t.editorEl.attr("blur")&&t.scope.$apply(function(){t.scope.$form.$submit()})})}})}]),angular.module("xeditable").directive("editableBstime",["editableDirectiveFactory",function(t){return t({directiveName:"editableBstime",inputTpl:"<div uib-timepicker></div>",render:function(){this.parent.render.call(this);var t=angular.element('<div class="well well-small" style="display:inline-block;"></div>');t.attr("ng-model",this.inputEl.attr("ng-model")),this.inputEl.removeAttr("ng-model"),this.attrs.eNgChange&&(t.attr("ng-change",this.inputEl.attr("ng-change")),this.inputEl.removeAttr("ng-change")),this.inputEl.wrap(t)}})}]),angular.module("xeditable").directive("editableCheckbox",["editableDirectiveFactory",function(t){return t({directiveName:"editableCheckbox",inputTpl:'<input type="checkbox">',render:function(){this.parent.render.call(this),this.inputEl.wrap("<label></label>"),this.attrs.eTitle&&this.inputEl.parent().append("<span>"+this.attrs.eTitle+"</span>")},autosubmit:function(){var t=this;t.inputEl.bind("change",function(){setTimeout(function(){t.scope.$apply(function(){t.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableChecklist",["editableDirectiveFactory","editableNgOptionsParser",function(t,e){return t({directiveName:"editableChecklist",inputTpl:"<span></span>",useCopy:!0,render:function(){this.parent.render.call(this);var t=e(this.attrs.eNgOptions),n="",r="";this.attrs.eNgChange&&(n=' ng-change="'+this.attrs.eNgChange+'"'),this.attrs.eChecklistComparator&&(r=' checklist-comparator="'+this.attrs.eChecklistComparator+'"');var i='<label ng-repeat="'+t.ngRepeat+'"><input type="checkbox" checklist-model="$parent.$parent.$data" checklist-value="'+t.locals.valueFn+'"'+n+r+'><span ng-bind="'+t.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.removeAttr("ng-change"),this.inputEl.removeAttr("checklist-comparator"),this.inputEl.html(i)}})}]),angular.module("xeditable").directive("editableCombodate",["editableDirectiveFactory","editableCombodate",function(t,e){return t({directiveName:"editableCombodate",inputTpl:'<input type="text">',render:function(){this.parent.render.call(this);var t={value:new Date(this.scope.$data)},n=this;angular.forEach(["format","template","minYear","maxYear","yearDescending","minuteStep","secondStep","firstItem","errorClass","customClass","roundTime","smartDays"],function(e){var r="e"+e.charAt(0).toUpperCase()+e.slice(1);r in n.attrs&&(t[e]="minYear"==e||"maxYear"==e||"minuteStep"==e||"secondStep"==e?parseInt(n.attrs[r],10):n.attrs[r])});var r=e.getInstance(this.inputEl,t);r.$widget.find("select").bind("change",function(t){n.scope.$data=r.getValue()?moment(r.getValue(),r.options.format).toDate().toISOString():null}).change()}})}]),n="text|password|email|tel|number|url|search|color|date|datetime|datetime-local|time|month|week|file".split("|"),angular.forEach(n,function(t){var e=("editable-"+t).toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()});angular.module("xeditable").directive(e,["editableDirectiveFactory",function(n){return n({directiveName:e,inputTpl:'<input type="'+t+'">',render:function(){this.parent.render.call(this);var t=this.attrs;if(t.eInputgroupleft||t.eInputgroupright){if(this.inputEl.wrap('<div class="input-group"></div>'),t.eInputgroupleft){var e=angular.element('<span class="input-group-addon" data-ng-bind="'+t.eInputgroupleft+'"></span>');this.inputEl.parent().prepend(e)}if(t.eInputgroupright){var n=angular.element('<span class="input-group-addon" data-ng-bind="'+t.eInputgroupright+'"></span>');this.inputEl.parent().append(n)}}if(t.eLabel){var r=angular.element("<label>"+t.eLabel+"</label>");t.eInputgroupleft||t.eInputgroupright?this.inputEl.parent().parent().prepend(r):this.inputEl.parent().prepend(r)}t.eFormclass&&(this.editorEl.addClass(t.eFormclass),this.inputEl.removeAttr("formclass"))},autosubmit:function(){var t=this;t.inputEl.bind("keydown",function(e){9===e.keyCode&&"submit"===t.editorEl.attr("blur")&&t.scope.$apply(function(){t.scope.$form.$submit()})})}})}])}),angular.module("xeditable").directive("editableRange",["editableDirectiveFactory","$interpolate",function(t,e){return t({directiveName:"editableRange",inputTpl:'<input type="range" id="range" name="range">',render:function(){this.parent.render.call(this),this.inputEl.after("<output>"+e.startSymbol()+"$data"+e.endSymbol()+"</output>")}})}]),angular.module("xeditable").directive("editableTagsInput",["editableDirectiveFactory","editableUtils",function(t,e){var n=t({directiveName:"editableTagsInput",inputTpl:"<tags-input></tags-input>",useCopy:!0,render:function(){this.parent.render.call(this),this.inputEl.append(e.rename("auto-complete",this.attrs.$autoCompleteElement)),this.inputEl.removeAttr("ng-model"),this.inputEl.attr("ng-model","$parent.$data")}}),r=n.link;return n.link=function(t,e,n,i){var o=e.find("editable-tags-input-auto-complete");return n.$autoCompleteElement=o.clone(),o.remove(),r(t,e,n,i)},n}]),angular.module("xeditable").directive("editableRadiolist",["editableDirectiveFactory","editableNgOptionsParser","$interpolate",function(t,e,n){return t({directiveName:"editableRadiolist",inputTpl:"<span></span>",render:function(){this.parent.render.call(this);var t=e(this.attrs.eNgOptions),r="",i="";this.attrs.eNgChange&&(r=' ng-change="'+this.attrs.eNgChange+'"'),this.attrs.eName&&(i=' name="'+this.attrs.eName+'"');var o='<label data-ng-repeat="'+t.ngRepeat+'"><input type="radio" data-ng-disabled="::'+this.attrs.eNgDisabled+'" data-ng-model="$parent.$parent.$data" data-ng-value="'+n.startSymbol()+"::"+t.locals.valueFn+n.endSymbol()+'"'+r+i+'><span data-ng-bind="::'+t.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.removeAttr("ng-change"),this.inputEl.html(o)},autosubmit:function(){var t=this;t.inputEl.bind("change",function(){setTimeout(function(){t.scope.$apply(function(){t.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableSelect",["editableDirectiveFactory",function(t){return t({directiveName:"editableSelect",inputTpl:"<select></select>",render:function(){if(this.parent.render.call(this),this.attrs.ePlaceholder){var t=angular.element('<option value="">'+this.attrs.ePlaceholder+"</option>");this.inputEl.append(t)}},autosubmit:function(){var t=this;t.attrs.hasOwnProperty("eMultiple")||t.inputEl.bind("change",function(){t.scope.$apply(function(){t.scope.$form.$submit()})})}})}]),angular.module("xeditable").directive("editableTextarea",["editableDirectiveFactory",function(t){return t({directiveName:"editableTextarea",inputTpl:"<textarea></textarea>",render:function(){this.parent.render.call(this),this.attrs.eFormclass&&(this.editorEl.addClass(this.attrs.eFormclass),this.inputEl.removeAttr("formclass"))},addListeners:function(){this.parent.addListeners.call(this),this.single&&"no"!==this.buttons&&this.autosubmit()},autosubmit:function(){var t=this;t.inputEl.bind("keydown",function(e){t.attrs.submitOnEnter?13!==e.keyCode||e.shiftKey||t.scope.$apply(function(){t.scope.$form.$submit()}):((e.ctrlKey||e.metaKey)&&13===e.keyCode||9===e.keyCode&&"submit"===t.editorEl.attr("blur"))&&t.scope.$apply(function(){t.scope.$form.$submit()})})}})}]),angular.module("xeditable").directive("editableUidate",["editableDirectiveFactory",function(t){return t({directiveName:"editableUidate",inputTpl:'<input class="form-control" />',render:function(){this.parent.render.call(this),this.inputEl.attr("ui-date",this.attrs.eUiDate),this.inputEl.attr("placeholder",this.attrs.ePlaceholder)}})}]),angular.module("xeditable").directive("editableUiSelect",["editableDirectiveFactory","editableUtils",function(t,e){var n=t({directiveName:"editableUiSelect",inputTpl:"<ui-select></ui-select>",render:function(){this.parent.render.call(this),this.inputEl.append(e.rename("ui-select-match",this.attrs.$matchElement)),this.inputEl.append(e.rename("ui-select-choices",this.attrs.$choicesElement)),this.inputEl.removeAttr("ng-model"),this.inputEl.attr("ng-model","$parent.$parent.$data")},autosubmit:function(){var t=this;t.inputEl.bind("change",function(){setTimeout(function(){t.scope.$apply(function(){t.scope.$form.$submit()})},500)}),t.inputEl.bind("keydown",function(e){9===e.keyCode&&"submit"===t.editorEl.attr("blur")&&t.scope.$apply(function(){t.scope.$form.$submit()})})}}),r=n.link;return n.link=function(t,e,n,i){var o=e.find("editable-ui-select-match"),a=e.find("editable-ui-select-choices");return n.$matchElement=o.clone(),n.$choicesElement=a.clone(),o.remove(),a.remove(),r(t,e,n,i)},n}]),angular.module("xeditable").factory("editableController",["$q","editableUtils",function(t,e){function n(t,n,r,i,o,a,s,l,u,c,d,p){var f,h,m=this;m.scope=t,m.elem=r,m.attrs=n,m.inputEl=null,m.editorEl=null,m.single=!0,m.error="",m.theme=o[n.editableTheme]||o[s.theme]||o.default,m.parent={};var g=n.editableIconSet||s.icon_set;m.icon_set="default"===g?a.default[n.editableTheme||s.theme||"default"]:a.external[g],m.inputTpl="",m.directiveName="",m.useCopy=!1,m.single=null,m.buttons="right",m.popover=!1,m.init=function(e){if(m.single=e,m.name=n.eName||n[m.directiveName],!n[m.directiveName])throw"You should provide value for `"+m.directiveName+"` in editable element!";f=i(n[m.directiveName]),m.buttons=m.single?m.attrs.buttons||s.buttons:"no",n.eName&&m.scope.$watch("$data",function(t){m.scope.$form.$data[n.eName]=t}),n.onshow&&(m.onshow=function(){return m.catchError(i(n.onshow)(t))}),n.onhide&&(m.onhide=function(){return i(n.onhide)(t)}),n.oncancel&&(m.oncancel=function(){return i(n.oncancel)(t)}),n.onbeforesave&&(m.onbeforesave=function(){return m.catchError(i(n.onbeforesave)(t))}),n.onaftersave&&(m.onaftersave=function(){return m.catchError(i(n.onaftersave)(t))}),n.popover&&(m.popover=m.attrs.popover),t.$parent.$watch(n[m.directiveName],function(t,e){m.setLocalValue(),m.handleEmpty()})},m.render=function(){var t=m.theme;for(var r in m.inputEl=angular.element(m.inputTpl),m.controlsEl=angular.element(t.controlsTpl),m.controlsEl.append(m.inputEl),"no"!==m.buttons&&(m.buttonsEl=angular.element(t.buttonsTpl),m.submitEl=angular.element(t.submitTpl),m.resetEl=angular.element(t.resetTpl),m.cancelEl=angular.element(t.cancelTpl),m.submitEl.attr("title",s.submitButtonTitle),m.submitEl.attr("aria-label",s.submitButtonAriaLabel),m.cancelEl.attr("title",s.cancelButtonTitle),m.cancelEl.attr("aria-label",s.cancelButtonAriaLabel),m.resetEl.attr("title",s.clearButtonTitle),m.resetEl.attr("aria-label",s.clearButtonAriaLabel),m.icon_set&&(m.submitEl.find("span").addClass(m.icon_set.ok),m.cancelEl.find("span").addClass(m.icon_set.cancel),m.resetEl.find("span").addClass(m.icon_set.clear)),m.buttonsEl.append(m.submitEl).append(m.cancelEl),s.displayClearButton&&m.buttonsEl.append(m.resetEl),m.controlsEl.append(m.buttonsEl),m.inputEl.addClass("editable-has-buttons")),m.errorEl=angular.element(t.errorTpl),m.controlsEl.append(m.errorEl),m.editorEl=angular.element(m.single?t.formTpl:t.noformTpl),m.editorEl.append(m.controlsEl),n.$attr)if(!(r.length<=1)){var i=!1,o=r.substring(1,2);if("e"===r.substring(0,1)&&o===o.toUpperCase()&&"Form"!==(i=r.substring(1))&&"NgSubmit"!==i){var a=i.substring(0,1),l=i.substring(1,2);i=l===l.toUpperCase()&&a===a.toUpperCase()?a.toLowerCase()+"-"+e.camelToDash(i.substring(1)):a.toLowerCase()+e.camelToDash(i.substring(1)),m.inputEl.attr(i,"value"!==i&&""===n[r]?i:n[r])}}if(m.inputEl.addClass("editable-input"),m.inputEl.attr("ng-model","$parent.$data"),m.editorEl.addClass(e.camelToDash(m.directiveName)),m.single&&(m.editorEl.attr("editable-form","$form"),m.editorEl.attr("blur",m.attrs.blur||s.blurElem)),m.popover){var u=angular.element("<div></div>");u.append(m.editorEl),m.editorEl=u,p.put("popover.html",m.editorEl[0].outerHTML)}angular.isFunction(t.postrender)&&t.postrender.call(m)},m.setLocalValue=function(){m.scope.$data=m.useCopy?angular.copy(f(t.$parent)):f(t.$parent)};var v=null;m.show=function(){return m.setLocalValue(),m.render(),r.after(m.editorEl),v=t.$new(),u(m.editorEl)(v),m.addListeners(),r.addClass("editable-hide"),m.onshow()},m.hide=function(){return v.$destroy(),m.controlsEl.remove(),m.editorEl.remove(),r.removeClass("editable-hide"),m.popover&&p.remove("popover.html"),m.onhide()},m.cancel=function(){m.oncancel()},m.addListeners=function(){m.inputEl.bind("keyup",function(t){if(m.single)switch(t.keyCode){case 27:m.scope.$apply(function(){m.scope.$form.$cancel()})}}),m.single&&"no"===m.buttons&&m.autosubmit(),m.editorEl.bind("click",function(t){t.which&&1!==t.which||m.scope.$form.$visible&&(m.scope.$form._clicked=!0)})},m.setWaiting=function(t){t?(h=!m.inputEl.attr("disabled")&&!m.inputEl.attr("ng-disabled")&&!m.inputEl.attr("ng-enabled"))&&(m.inputEl.attr("disabled","disabled"),m.buttonsEl&&m.buttonsEl.find("button").attr("disabled","disabled")):h&&(m.inputEl.removeAttr("disabled"),m.buttonsEl&&m.buttonsEl.find("button").removeAttr("disabled"))},m.activate=function(t,e){setTimeout(function(){var n=m.inputEl[0];"focus"===s.activate&&n.focus?(void 0!==t&&""!==t&&n.setSelectionRange&&(e=e||t,n.onfocus=function(){setTimeout((function(){try{this.setSelectionRange(t,e)}catch(n){}}).bind(this))}),"editableRadiolist"==m.directiveName||"editableChecklist"==m.directiveName||"editableBsdate"==m.directiveName||"editableTagsInput"==m.directiveName?n.querySelector(".ng-pristine").focus():n.focus()):"select"===s.activate&&(n.select?n.select():n.focus&&n.focus())},0)},m.setError=function(e){angular.isObject(e)||(t.$error=d.trustAsHtml(e),m.error=e)},m.catchError=function(t,e){return angular.isObject(t)&&!0!==e?c.when(t).then(angular.bind(this,function(t){this.catchError(t,!0)}),angular.bind(this,function(t){this.catchError(t,!0)})):e&&angular.isObject(t)&&t.status&&200!==t.status&&t.data&&angular.isString(t.data)?(this.setError(t.data),t=t.data):angular.isString(t)&&this.setError(t),t},m.save=function(){f.assign(t.$parent,m.useCopy?angular.copy(m.scope.$data):m.scope.$data)},m.handleEmpty=function(){var e=f(t.$parent),n=null==e||""===e||angular.isArray(e)&&0===e.length;r.toggleClass("editable-empty",n)},m.autosubmit=angular.noop,m.onshow=angular.noop,m.onhide=angular.noop,m.oncancel=angular.noop,m.onbeforesave=angular.noop,m.onaftersave=angular.noop}return n.$inject=["$scope","$attrs","$element","$parse","editableThemes","editableIcons","editableOptions","$rootScope","$compile","$q","$sce","$templateCache"],n}]),angular.module("xeditable").factory("editableDirectiveFactory",["$parse","$compile","editableThemes","$rootScope","$document","editableController","editableFormController","editableOptions",function(t,e,n,r,i,o,a,s){return function(e){return{restrict:"A",scope:!0,require:[e.directiveName,"?^form"],controller:o,link:function(n,o,l,u){var c,d=u[0],p=!1;if(u[1])c=u[1],p=void 0===l.eSingle;else if(l.eForm){var f=t(l.eForm)(n);if(f)c=f,p=!0;else if(o&&"function"==typeof o.parents&&o.parents().last().find('form[name="'+l.eForm+'"]').length)c=null,p=!0;else for(var h=0;h<i[0].forms.length;h++)if(i[0].forms[h].name===l.eForm){c=null,p=!0;break}}if(angular.forEach(e,function(t,e){void 0!==d[e]&&(d.parent[e]=d[e])}),angular.extend(d,e),d.init(!p),n.$editable=d,o.addClass("editable"),p)if(c){if(n.$form=c,!n.$form.$addEditable)throw"Form with editable elements should have `editable-form` attribute.";n.$form.$addEditable(d)}else r.$$editableBuffer=r.$$editableBuffer||{},r.$$editableBuffer[l.eForm]=r.$$editableBuffer[l.eForm]||[],r.$$editableBuffer[l.eForm].push(d),n.$form=null;else n.$form=a(),n.$form.$addEditable(d),l.eForm&&(t(l.eForm).assign||angular.noop)(n.$parent,n.$form),l.eForm&&!l.eClickable||(o.addClass("editable-click"),o.bind(s.activationEvent,function(t){t.preventDefault(),t.editable=d,(angular.isDefined(l.editDisabled)?n.$eval(l.editDisabled):s.isDisabled)||n.$apply(function(){n.$form.$show()})}))}}}}]),angular.module("xeditable").factory("editableFormController",["$parse","$document","$rootScope","editablePromiseCollection","editableUtils",function(t,e,n,r,i){var o=[],a=function(t,e){var n=!0;return angular.forEach(t.$editables,function(t){(function(t,e){if(e==t)return!0;for(var n=e.parentNode;null!==n;){if(n==t)return!0;n=n.parentNode}return!1})(t.editorEl[0],e.target)&&(n=!1)}),n};e.bind("click",function(t){if(!t.which||1===t.which){for(var e=[],r=[],i=0;i<o.length;i++)o[i]._clicked?o[i]._clicked=!1:o[i].$waiting||("cancel"===o[i]._blur&&a(o[i],t)&&e.push(o[i]),"submit"===o[i]._blur&&a(o[i],t)&&r.push(o[i]));(e.length||r.length)&&n.$apply(function(){angular.forEach(e,function(t){t.$cancel()}),angular.forEach(r,function(t){t.$submit()})})}}),n.$on("closeEdit",function(){for(var t=0;t<o.length;t++)o[t].$hide()});var s={$addEditable:function(t){this.$editables.push(t),t.elem.bind("$destroy",angular.bind(this,this.$removeEditable,t)),t.scope.$form||(t.scope.$form=this),this.$visible&&t.catchError(t.show()),t.catchError(t.setWaiting(this.$waiting))},$removeEditable:function(t){for(var e=0;e<this.$editables.length;e++)if(this.$editables[e]===t)return void this.$editables.splice(e,1)},$show:function(){if(!this.$visible){this.$visible=!0;var t=r();t.when(this.$onshow()),this.$setError(null,""),angular.forEach(this.$editables,function(e){t.when(e.show())}),t.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$activate),onFalse:angular.bind(this,this.$activate),onString:angular.bind(this,this.$activate)}),setTimeout(angular.bind(this,function(){this._clicked=!1,-1===i.indexOf(o,this)&&o.push(this)}),0)}},$activate:function(t){var e;if(this.$editables.length){if(angular.isString(t))for(e=0;e<this.$editables.length;e++)if(this.$editables[e].name===t)return void this.$editables[e].activate();for(e=0;e<this.$editables.length;e++)if(this.$editables[e].error)return void this.$editables[e].activate();this.$editables[0].activate(this.$editables[0].elem[0].selectionStart?this.$editables[0].elem[0].selectionStart:this.$editables[0].elem[0].text?this.$editables[0].elem[0].text.length:this.$editables[0].elem[0].innerHTML?this.$editables[0].elem[0].innerHTML.length:0,this.$editables[0].elem[0].selectionEnd?this.$editables[0].elem[0].selectionEnd:this.$editables[0].elem[0].text?this.$editables[0].elem[0].text.length:this.$editables[0].elem[0].innerHTML?this.$editables[0].elem[0].innerHTML.length:0)}},$hide:function(){this.$visible&&(this.$visible=!1,this.$onhide(),angular.forEach(this.$editables,function(t){t.hide()}),i.arrayRemove(o,this))},$cancel:function(){this.$visible&&(this.$oncancel(),angular.forEach(this.$editables,function(t){t.cancel()}),this.$hide())},$setWaiting:function(t){this.$waiting=!!t,angular.forEach(this.$editables,function(e){e.setWaiting(!!t)})},$setError:function(t,e){angular.forEach(this.$editables,function(n){t&&n.name!==t||n.setError(e)})},$submit:function(){if(!this.$waiting){this.$setError(null,"");var t=r();angular.forEach(this.$editables,function(e){t.when(e.onbeforesave())}),t.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,e,!0),onFalse:angular.bind(this,e,!1),onString:angular.bind(this,this.$activate)})}function e(t){var e=r();e.when(this.$onbeforesave()),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:t?angular.bind(this,this.$save):angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})}},$save:function(){angular.forEach(this.$editables,function(t){t.save()});var t=r();t.when(this.$onaftersave()),angular.forEach(this.$editables,function(e){t.when(e.onaftersave())}),t.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})},$onshow:angular.noop,$oncancel:angular.noop,$onhide:angular.noop,$onbeforesave:angular.noop,$onaftersave:angular.noop};return function(){return angular.extend({$editables:[],$visible:!1,$waiting:!1,$data:{},_clicked:!1,_blur:null},s)}}]),angular.module("xeditable").directive("editableForm",["$rootScope","$parse","editableFormController","editableOptions",function(t,e,n,r){return{restrict:"A",require:["form"],compile:function(){return{pre:function(e,r,i,o){var a,s=o[0];i.editableForm?e[i.editableForm]&&e[i.editableForm].$show?(a=e[i.editableForm],angular.extend(s,a)):(a=n(),e[i.editableForm]=a,angular.extend(a,s)):(a=n(),angular.extend(s,a));var l=t.$$editableBuffer,u=s.$name;u&&l&&l[u]&&(angular.forEach(l[u],function(t){a.$addEditable(t)}),delete l[u])},post:function(t,n,i,o){var a;a=i.editableForm&&t[i.editableForm]&&t[i.editableForm].$show?t[i.editableForm]:o[0],i.onshow&&(a.$onshow=angular.bind(a,e(i.onshow),t)),i.onhide&&(a.$onhide=angular.bind(a,e(i.onhide),t)),i.oncancel&&(a.$oncancel=angular.bind(a,e(i.oncancel),t)),i.shown&&e(i.shown)(t)&&a.$show(),a._blur=i.blur||r.blurForm,i.ngSubmit||i.submit||(i.onbeforesave&&(a.$onbeforesave=function(){return e(i.onbeforesave)(t,{$data:a.$data})}),i.onaftersave&&(a.$onaftersave=function(){return e(i.onaftersave)(t,{$data:a.$data})}),n.bind("submit",function(e){e.preventDefault(),t.$apply(function(){a.$submit()})})),n.bind("click",function(t){t.which&&1!==t.which||a.$visible&&(a._clicked=!0)})}}}}}]),angular.module("xeditable").factory("editablePromiseCollection",["$q",function(t){return function(){return{promises:[],hasFalse:!1,hasString:!1,when:function(e,n){if(!1===e)this.hasFalse=!0;else if(!n&&angular.isObject(e))this.promises.push(t.when(e));else{if(!angular.isString(e))return;this.hasString=!0}},then:function(e){var n=(e=e||{}).onTrue||angular.noop,r=e.onFalse||angular.noop,i=e.onString||angular.noop,o=e.onWait||angular.noop,a=this;function s(){a.hasString||a.hasFalse?!a.hasString&&a.hasFalse?r():i():n()}this.promises.length?(o(!0),t.all(this.promises).then(function(t){o(!1),angular.forEach(t,function(t){a.when(t,!0)}),s()},function(t){o(!1),i()})):s()}}}}]),angular.module("xeditable").factory("editableUtils",[function(){return{indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1},arrayRemove:function(t,e){var n=this.indexOf(t,e);return n>=0&&t.splice(n,1),e},camelToDash:function(t){return t.replace(/[A-Z]/g,function(t,e){return(e?"-":"")+t.toLowerCase()})},dashToCamel:function(t){return t.replace(/([\:\-\_]+(.))/g,function(t,e,n,r){return r?n.toUpperCase():n}).replace(/^moz([A-Z])/,"Moz$1")},rename:function(t,e){if(e[0]&&e[0].attributes){var n=angular.element("<"+t+"/>");n.html(e.html());for(var r=e[0].attributes,i=0;i<r.length;++i)n.attr(r.item(i).nodeName,r.item(i).value);return n}}}}]),angular.module("xeditable").factory("editableNgOptionsParser",[function(){var t=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/;return function(e){var n;if(!(n=e.match(t)))throw"ng-options parse error";var r,i=n[4]||n[6],o=n[5],a=n[7],s=n[8];return void 0===o?(r=i+" in "+a,void 0!==s&&(r+=" track by "+(s?n[8]:null))):r="("+o+", "+i+") in "+a,{ngRepeat:r,locals:{valueName:i,keyName:o,valueFn:n[2]?n[1]:i,displayFn:n[2]||n[1]}}}}]),angular.module("xeditable").factory("editableCombodate",[function(){function t(t,e){if(this.$element=angular.element(t),"INPUT"!=this.$element[0].nodeName)throw"Combodate should be applied to INPUT element";var n=(new Date).getFullYear();this.defaults={format:"YYYY-MM-DD HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:n,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,customClass:"",roundTime:!0,smartDays:!0},this.options=angular.extend({},this.defaults,e),this.init()}return t.prototype={constructor:t,init:function(){if(this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=angular.element('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.options.smartDays){var t=this;this.$widget.find("select").bind("change",function(e){(angular.element(e.target).hasClass("month")||angular.element(e.target).hasClass("year"))&&t.fillCombo("day")})}this.$widget.find("select").css("width","auto"),this.$element.css("display","none").after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var t=this.options.template,e=this.options.customClass;return angular.forEach(this.map,function(e,n){e=e[0];var r=new RegExp(e+"+"),i=e.length>1?e.substring(1,2):e;t=t.replace(r,"{"+i+"}")}),t=t.replace(/ /g,"&nbsp;"),angular.forEach(this.map,function(n,r){var i=(n=n[0]).length>1?n.substring(1,2):n;t=t.replace("{"+i+"}",'<select class="'+r+" "+e+'"></select>')}),t},initCombos:function(){for(var t in this.map){var e=this.$widget[0].querySelectorAll("."+t);this["$"+t]=e.length?angular.element(e):null,this.fillCombo(t)}},fillCombo:function(t){var e=this["$"+t];if(e){var n=this["fill"+t.charAt(0).toUpperCase()+t.slice(1)](),r=e.val();e.html("");for(var i=0;i<n.length;i++)e.append('<option value="'+n[i][0]+'">'+n[i][1]+"</option>");e.val(r)}},fillCommon:function(t){var e,n=[];if("name"===this.options.firstItem){var r="function"==typeof(e=moment.relativeTime||moment.langData()._relativeTime)[t]?e[t](1,!0,t,!1):e[t];r=r.split(" ").reverse()[0],n.push(["",r])}else"empty"===this.options.firstItem&&n.push(["",""]);return n},fillDay:function(){var t,e,n=this.fillCommon("d"),r=-1!==this.options.template.indexOf("DD"),i=31;if(this.options.smartDays&&this.$month&&this.$year){var o=parseInt(this.$month.val(),10),a=parseInt(this.$year.val(),10);isNaN(o)||isNaN(a)||(i=moment([a,o]).daysInMonth())}for(e=1;e<=i;e++)t=r?this.leadZero(e):e,n.push([e,t]);return n},fillMonth:function(){var t,e,n=this.fillCommon("M"),r=-1!==this.options.template.indexOf("MMMM"),i=-1!==this.options.template.indexOf("MMM"),o=-1!==this.options.template.indexOf("MM");for(e=0;e<=11;e++)t=r?moment().date(1).month(e).format("MMMM"):i?moment().date(1).month(e).format("MMM"):o?this.leadZero(e+1):e+1,n.push([e,t]);return n},fillYear:function(){var t,e,n=[],r=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--)t=r?e:(e+"").substring(2),n[this.options.yearDescending?"push":"unshift"]([e,t]);return this.fillCommon("y").concat(n)},fillHour:function(){var t,e,n=this.fillCommon("h"),r=-1!==this.options.template.indexOf("h"),i=(this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),o=r?12:23;for(e=r?1:0;e<=o;e++)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillMinute:function(){var t,e,n=this.fillCommon("m"),r=-1!==this.options.template.indexOf("mm");for(e=0;e<=59;e+=this.options.minuteStep)t=r?this.leadZero(e):e,n.push([e,t]);return n},fillSecond:function(){var t,e,n=this.fillCommon("s"),r=-1!==this.options.template.indexOf("ss");for(e=0;e<=59;e+=this.options.secondStep)t=r?this.leadZero(e):e,n.push([e,t]);return n},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a");return this.options.template.indexOf("A"),[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]},getValue:function(t){var e,n={},r=this,i=!1;return angular.forEach(this.map,function(t,e){if("ampm"!==e){var o="day"===e?1:0;return n[e]=r["$"+e]?parseInt(r["$"+e].val(),10):o,isNaN(n[e])?(i=!0,!1):void 0}}),i?"":(this.$ampm&&(n.hour=12===n.hour?"am"===this.$ampm.val()?0:12:"am"===this.$ampm.val()?n.hour:n.hour+12),e=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]),this.highlight(e),null===(t=void 0===t?this.options.format:t)?e.isValid()?e:null:e.isValid()?e.format(t):"")},setValue:function(t){if(t){var e="string"==typeof t?moment(t,this.options.format,!0):moment(t),n=this,r={};e.isValid()&&(angular.forEach(this.map,function(t,n){"ampm"!==n&&(r[n]=e[t[1]]())}),this.$ampm&&(r.hour>=12?(r.ampm="pm",r.hour>12&&(r.hour-=12)):(r.ampm="am",0===r.hour&&(r.hour=12))),angular.forEach(r,function(t,e){n["$"+e]&&("minute"===e&&n.options.minuteStep>1&&n.options.roundTime&&(t=i(n["$"+e],t)),"second"===e&&n.options.secondStep>1&&n.options.roundTime&&(t=i(n["$"+e],t)),n["$"+e].val(t))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(e.format(this.options.format)).triggerHandler("change"))}function i(t,e){var n={};return angular.forEach(t.children("option"),function(t,r){var i=angular.element(t).attr("value");if(""!==i){var o=Math.abs(i-e);(void 0===n.distance||o<n.distance)&&(n={value:i,distance:o})}}),n.value}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return t<=9?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},{getInstance:function(e,n){return new t(e,n)}}}]),angular.module("xeditable").factory("editableIcons",function(){return{default:{bs2:{ok:"icon-ok icon-white",cancel:"icon-remove",clear:"icon-trash"},bs3:{ok:"glyphicon glyphicon-ok",cancel:"glyphicon glyphicon-remove",clear:"glyphicon glyphicon-trash"}},external:{"font-awesome":{ok:"fa fa-check",cancel:"fa fa-times",clear:"fa fa-trash"}}}}),angular.module("xeditable").factory("editableThemes",function(){return{default:{formTpl:'<form class="editable-wrap"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<span class="editable-controls"></span>',inputTpl:"",errorTpl:'<div class="editable-error" data-ng-if="$error" data-ng-bind-html="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit">save</button>',cancelTpl:'<button type="button" ng-click="$form.$cancel()">cancel</button>',resetTpl:'<button type="reset">clear</button>'},bs2:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls controls control-group" ng-class="{\'error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" data-ng-if="$error" data-ng-bind-html="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn" ng-click="$form.$cancel()"><span></span></button>',resetTpl:'<button type="reset" class="btn btn-danger">clear</button>'},bs3:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls form-group" ng-class="{\'has-error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" data-ng-if="$error" data-ng-bind-html="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn btn-default" ng-click="$form.$cancel()"><span></span></button>',resetTpl:'<button type="reset" class="btn btn-danger">clear</button>',buttonsClass:"",inputClass:"",postrender:function(){switch(this.directiveName){case"editableText":case"editableSelect":case"editableTextarea":case"editableEmail":case"editableTel":case"editableNumber":case"editableUrl":case"editableSearch":case"editableDate":case"editableDatetime":case"editableBsdate":case"editableTime":case"editableMonth":case"editableWeek":case"editablePassword":case"editableDatetimeLocal":if(this.inputEl.addClass("form-control"),this.theme.inputClass){if(this.inputEl.attr("multiple")&&("input-sm"===this.theme.inputClass||"input-lg"===this.theme.inputClass))break;this.inputEl.addClass(this.theme.inputClass)}break;case"editableCheckbox":this.editorEl.addClass("checkbox")}this.buttonsEl&&this.theme.buttonsClass&&this.buttonsEl.find("button").addClass(this.theme.buttonsClass)}},semantic:{formTpl:'<form class="editable-wrap ui form" ng-class="{\'error\': $error}" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls ui fluid input" ng-class="{\'error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error ui error message" data-ng-if="$error" data-ng-bind-html="$error"></div>',buttonsTpl:'<span class="mini ui buttons"></span>',submitTpl:'<button type="submit" class="ui primary button"><i class="ui check icon"></i></button>',cancelTpl:'<button type="button" class="ui button" ng-click="$form.$cancel()"><i class="ui cancel icon"></i></button>',resetTpl:'<button type="reset" class="ui button">clear</button>'}}})},"5iTH":function(t,e){!function(t,e){angular.module("ngCsv.config",[]).value("ngCsv.config",{debug:!0}).config(["$compileProvider",function(t){angular.isDefined(t.urlSanitizationWhitelist)?t.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/):t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}]),angular.module("ngCsv.directives",["ngCsv.services"]),angular.module("ngCsv.services",[]),angular.module("ngCsv",["ngCsv.config","ngCsv.services","ngCsv.directives","ngSanitize"]),angular.module("ngCsv.services").service("CSV",["$q",function(e){var n=encodeURIComponent("\r\n");this.stringifyField=function(t,e,n){return"string"==typeof t?(t=t.replace(/"/g,'""'),(n||t.indexOf(",")>-1||t.indexOf("\n")>-1||t.indexOf("\r")>-1)&&(t=e+t+e),encodeURIComponent(t)):"boolean"==typeof t?t?"TRUE":"FALSE":t},this.stringify=function(r,i){var o=e.defer(),a=this,s="",l=e.when(r).then(function(e){var r,l,u;e=angular.copy(e),angular.isDefined(i.header)&&i.header&&(r=[],angular.forEach(i.header,function(t,e){this.push(a.stringifyField(t,i.txtDelim,i.quoteStrings))},r),l=r.join(i.fieldSep?i.fieldSep:","),s+=l+n),u=angular.isArray(e)?e:e(),angular.forEach(u,function(t,e){var r,o;o=[],angular.forEach(t,function(t,e){this.push(a.stringifyField(t,i.txtDelim,i.quoteStrings))},o),r=o.join(i.fieldSep?i.fieldSep:","),s+=e<u.length?r+n:r}),o.resolve(t.navigator.msSaveOrOpenBlob?s:"data:text/csv;charset=utf-8,"+s)});return"function"==typeof l.catch&&l.catch(function(t){o.reject(t)}),o.promise}}]),angular.module("ngCsv.directives").directive("ngCsv",["$parse","$q","CSV","$document","$timeout",function(e,n,r,i,o){return{restrict:"AC",scope:{data:"&ngCsv",filename:"@filename",header:"&csvHeader",txtDelim:"@textDelimiter",quoteStrings:"@quoteStrings",fieldSep:"@fieldSeparator",lazyLoad:"@lazyLoad",ngClick:"&"},controller:["$scope","$element","$attrs","$transclude",function(t,e,i,o){t.csv="",angular.isDefined(t.lazyLoad)&&"true"==t.lazyLoad||angular.isArray(t.data)&&t.$watch("data",function(e){t.buildCSV()},!0),t.getFilename=function(){return t.filename||"download.csv"},t.buildCSV=function(){var e,o=n.defer();return r.stringify(t.data(),(e={txtDelim:t.txtDelim?t.txtDelim:'"',quoteStrings:t.quoteStrings},angular.isDefined(i.csvHeader)&&(e.header=t.$eval(t.header)),e.fieldSep=t.fieldSep?t.fieldSep:",",e)).then(function(e){t.csv=e,o.resolve(e)}),t.$apply(),o.promise}}],link:function(e,n,r){n.bind("click",function(n){e.buildCSV().then(function(n){!function(){if(t.navigator.msSaveOrOpenBlob){var n=new Blob([e.csv],{type:"text/csv;charset=utf-8;"});navigator.msSaveBlob(n,e.getFilename())}else{var r=angular.element("<a></a>");r.attr("href",e.csv),r.attr("download",e.getFilename()),i.find("body").append(r),o(function(){r[0].click(),r.remove()},null)}}()}),e.$apply()})}}}])}(window,document)},"6+Iu":function(t,e){angular.module("doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-assessment-card",[]).directive("taskAssessmentCard",function(){return{restrict:"E",templateUrl:"projects/states/dashboard/directives/task-dashboard/directives/task-assessment-card/task-assessment-card.tpl.html",scope:{task:"="},controller:function(t,e,n){return t.gradeNames=n.grades,t.hasBeenGivenStars=function(t){return null!=t&&(t.quality_pts>0||_.includes(e.gradeableStatuses,t.status))},t.hasBeenGraded=function(t){return null!=t&&_.isNumber(t.grade)}}}})},"6/UL":function(t,e){angular.module("doubtfire.units.states.index",[]).config(function(t){return t.state("units/index",{url:"/units/:unitId",abstract:!0,views:{main:{controller:"UnitsIndexStateCtrl",templateUrl:"units/states/index/index.tpl.html"}},data:{pageTitle:"_Home_",roleWhitelist:["Student","Tutor","Convenor","Admin"]}})}).controller("UnitsIndexStateCtrl",function(t,e,n,r,i,o,a,s,l){var u;return(u=+r.unitId)?o.getUnitRoles(function(r){return t.unitRole=_.find(r,{unit_id:u}),null==t.unitRole&&"Admin"===l.role&&(t.unitRole={role:"Admin",unit_id:u,name:l.Name,unit_name:"Unit admin mode",unit_code:"---"}),null==t.unitRole?n.go("home"):(e.$broadcast("UnitRoleChanged",{context:t.unitRole}),o.getUnit(u,{loadOnlyEnrolledStudents:!0},function(e){return t.unit=e}))}):n.go("home")})},"688P":function(t,e){angular.module("doubtfire.units.states.rollover.directives.unit-dates-selector",[]).directive("unitDatesSelector",function(){return{replace:!0,restrict:"E",templateUrl:"units/states/rollover/directives/unit-dates-selector/unit-dates-selector.tpl.html",controller:function(t,e,n,r,i,o,a,s,l,u){return t.calOptions={startOpened:!1,endOpened:!1},t.externalName=r.ExternalName,t.teachingPeriods=u.query(),t.open=function(e,n){return e.preventDefault(),e.stopPropagation(),"start"===n?(t.calOptions.startOpened=!t.calOptions.startOpened,t.calOptions.endOpened=!1):(t.calOptions.startOpened=!1,t.calOptions.endOpened=!t.calOptions.endOpened)},t.dateOptions={formatYear:"yy",startingDay:1},t.saveUnit=function(){return t.unit.convenors&&delete t.unit.convenors,l.loadedUnitRoles=null,t.unit.start_date&&t.unit.start_date.getMonth&&(t.unit.start_date=t.unit.start_date.getFullYear()+"-"+(t.unit.start_date.getMonth()+1)+"-"+t.unit.start_date.getDate()),t.unit.end_date&&t.unit.end_date.getMonth&&(t.unit.end_date=t.unit.end_date.getFullYear()+"-"+(t.unit.end_date.getMonth()+1)+"-"+t.unit.end_date.getDate()),o.create(t.unit.teaching_period_id?{id:t.unit.id,teaching_period_id:t.unit.teaching_period_id}:{id:t.unit.id,start_date:t.unit.start_date,end_date:t.unit.end_date},function(t){return a.add("success","Unit created.",2e3),s.event("Unit Admin","Saved New Unit"),e.go("admin/units")},function(t){return a.add("danger","Error creating unit - "+t.data.error)})}}}})},"6dr/":function(t,e){angular.module("doubtfire.admin.modals.create-break-modal",[]).factory("CreateBreakModal",function(t){var e;return(e={}).show=function(e){return t.open({templateUrl:"admin/modals/create-break-modal/create-break-modal.tpl.html",controller:"CreateBreakModal",resolve:{teachingperiod:function(){return e}}})},e}).controller("CreateBreakModal",function(t,e,n,r,i,o){return r.event("Teaching Period Admin","Started to Add Break"),t.teachingperiod=i,t.calOptions={startOpened:!1},t.break={start_date:null,number_of_weeks:null,teaching_period_id:t.teachingperiod.id},t.open=function(e,n){if(e.preventDefault(),e.stopPropagation(),"start"===n)return t.calOptions.startOpened=!t.calOptions.startOpened},t.dateOptions={formatYear:"yy",startingDay:1},t.addBreak=function(){return t.break.start_date&&t.break.start_date.getMonth&&(t.break.start_date=t.break.start_date.getFullYear()+"-"+(t.break.start_date.getMonth()+1)+"-"+t.break.start_date.getDate()),o.create(t.break,function(i){return n.add("success","Break added.",2e3),e.close(),t.teachingperiod.breaks.push(i),r.event("Teaching Period Admin","Added New Break")},function(t){return n.add("danger","Error adding break - "+t.data.error)})}})},"6heI":function(t,e){angular.module("doubtfire.sessions.states.sign-out",[]).config(function(t){return t.state("sign_out",{url:"/sign_out",views:{main:{controller:"SignOutCtrl",templateUrl:"sessions/states/sign-out/sign-out.tpl.html"}},data:{pageTitle:"_Sign Out_"}})}).controller("SignOutCtrl",function(t,e,n,r,i,o){return null!=(null!=o?o.authenticationToken:void 0)&&r.signOut(i.API_URL+"/auth/"+o.authenticationToken+".json"),null!=i.SignoutURL?window.location.assign(i.SignoutURL):e(function(){return t.go("sign_in")},500)})},"6pEX":function(t,e){angular.module("doubtfire.units.states.edit.directives.unit-group-set-editor",[]).directive("unitGroupSetEditor",function(){return{restrict:"E",templateUrl:"units/states/edit/directives/unit-group-set-editor/unit-group-set-editor.tpl.html",replace:!0,controller:function(t,e,n,r,i,o,a){return t.addGroupSet=function(){var n;return e.create({unit_id:t.unit.id,group_set:{name:0===(n=t.unit.group_sets.length)?"Group Work":"Group Work Set "+(n+1)}},function(e){return t.unit.group_sets.push(e),o.add("success","Group set created.",2e3)},function(t){return o.add("danger","Failed to create group set. "+t.data.error,6e3)})},t.saveGroupSet=function(n,r){return e.update({unit_id:t.unit.id,id:r,group_set:{name:n.name,allow_students_to_create_groups:n.allow_students_to_create_groups,allow_students_to_manage_groups:n.allow_students_to_manage_groups,keep_groups_in_same_class:n.keep_groups_in_same_class}},function(t){return o.add("success","Group set updated.",2e3)},function(t){return o.add("danger","Failed to update group set. "+t.data.error,6e3)})},t.removeGroupSet=function(n){return e.delete({unit_id:t.unit.id,id:n.id},function(e){var r;return t.unit.group_sets=_.filter(t.unit.group_sets,function(t){return t.id!==n.id}),r=t.unit.group_sets[t.unit.group_sets.indexOf(n)-1],n===t.selectedGroupSet&&t.selectGroupSet(r),o.add("success","Group set deleted.",2e3)},function(t){return o.add("danger","Failed to delete group set. "+t.data.error,6e3)})},t.selectGroupSet=function(e){return t.selectedGroupSet=e,t.$broadcast("UnitGroupSetEditor/SelectedGroupSetChanged",{id:null!=e?e.id:void 0})},t.studentStaffOptions=[{value:!0,text:"Staff and Students"},{value:!1,text:"Staff Only"}],t.tutorialOptions=[{value:!0,text:"Same Tutorial"},{value:!1,text:"Any Tutorial"}],t.unit.group_sets.length>0&&t.selectGroupSet(t.unit.group_sets[0]),t.csvImportResponse={},t.groupCSV={file:{name:"Group CSV",type:"csv"}},t.groupCSVUploadUrl=function(){return e.groupCSVUploadUrl(t.unit,t.selectedGroupSet)},t.isGroupCSVUploading=null,t.onGroupCSVSuccess=function(e){return a.show("Group CSV upload results.",e),t.unit.refresh()},t.onGroupCSVComplete=function(){return t.isGroupCSVUploading=null},t.downloadGroupCSV=function(){return e.downloadCSV(t.unit,t.selectedGroupSet)}}}})},"6qpU":function(t,e){angular.module("doubtfire.tasks.task-comment-composer",[]).directive("taskCommentComposer",function(){return{restrict:"E",templateUrl:"tasks/task-comment-composer/task-comment-composer.tpl.html",scope:{task:"=",singleDropZone:"=?"},controller:function(t,e,n,r,i,o,a,s,l,u,c,d,p,f,h,m,g){var v;return t.isRecorderOpen=!1,t.comment={text:"",type:"text"},t.audioPopover="audioRecorderPopover.html",t.keyPress=function(e){if("enter"===e.key.toLowerCase()&&!e.shiftKey&&(e.preventDefault(),""!==t.comment.text.trim()))return t.addComment()},t.formatImageName=function(t){var e,n,r;return e=t.indexOf("."),n=t.substring(0,e),r=t.substring(e),n.length>20&&(n=n.substring(0,20)+".."),n+r},t.clearEnqueuedUpload=function(t){return t.model=null,v()},t.postAttachmentComment=function(){return f.addMediaComment(o.task,t.upload.model[0],function(t){return f.scrollDown()},function(t){var e;return h.add("danger","Failed to post image. "+(null!=(e=t.data)?e.error:void 0))}),t.clearEnqueuedUpload(t.upload)},v=function(){var e;if(t.singleDropZone)return e=_.find(t.uploadZones,function(t){return null==t.model||0===t.model.length}),t.shownUploadZones=null!=e?[e]:[]},t.addComment=function(){return t.comment.text=t.comment.text.trim(),f.addComment(t.task,t.comment.text,"text",function(e){return t.comment.text="",g.event("View Task Comments","Added new comment"),f.scrollDown()},function(t){return h.add("danger",t.data.error,2e3)})}}}})},"727p":function(t,e){angular.module("doubtfire.units.states.tasks.viewer",["doubtfire.units.states.tasks.viewer.directives"]).config(function(t){return t.state("units/tasks/viewer",{parent:"units/tasks",url:"/viewer/{taskKey:any}",templateUrl:"units/states/tasks/viewer/viewer.tpl.html",controller:"TaskViewerStateCtrl",data:{task:"Task List",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin"]}})}).controller("TaskViewerStateCtrl",function(t,e){return t.unitTasks=t.unit.task_definitions,t.selectedTaskDef=t.unitTasks[0]})},"72vh":function(t,e){angular.module("doubtfire.tasks",["doubtfire.tasks.modals","doubtfire.tasks.task-ilo-alignment","doubtfire.tasks.project-tasks-list","doubtfire.tasks.project-top-tasks-list","doubtfire.tasks.task-comment-composer","doubtfire.tasks.task-comments-viewer","doubtfire.tasks.task-definition-editor","doubtfire.tasks.task-definition-selector","doubtfire.tasks.task-feedback-assessor","doubtfire.tasks.task-plagiarism-file-viewer","doubtfire.tasks.task-plagiarism-report-viewer","doubtfire.tasks.task-sheet-viewer","doubtfire.tasks.task-status-selector","doubtfire.tasks.task-submission-viewer","doubtfire.tasks.task-submission-wizard","doubtfire.tasks.task-viewer"])},"7axO":function(t,e){angular.module("doubtfire.api.models.user-role",[]).factory("UserRole",function(t){return t("/user_roles/:id",{id:"@id"})})},"8NPN":function(t,e){angular.module("doubtfire.projects.states.portfolio.directives.portfolio-tasks-step",[]).directive("portfolioTasksStep",function(){return{restrict:"E",replace:!0,templateUrl:"projects/states/portfolio/directives/portfolio-tasks-step/portfolio-tasks-step.tpl.html",controller:function(t){return t.noTasksSelected=function(){return 0===t.selectedTasks().length}}}})},"8VRA":function(t,e){angular.module("doubtfire.projects.states.portfolio.directives.portfolio-welcome-step",[]).directive("portfolioWelcomeStep",function(){return{restrict:"E",replace:!0,templateUrl:"projects/states/portfolio/directives/portfolio-welcome-step/portfolio-welcome-step.tpl.html"}})},"8h+h":function(t,e){angular.module("doubtfire.common.services.analytics",[]).factory("analyticsService",function(t,e){var n;return(n={}).event=function(n,r,i,o){if(e.profile.opt_in_to_research){if(null!=o&&"Number"!=typeof o&&o<0)throw new Error("Value needs to be a positive number");return t.eventTrack(r,{category:n,label:i,value:o})}},n.watchEvent=function(t,e,r,i){return t.$watch(e,function(t,o){if(null!=t&&t!==o)return _.isFunction(i)?n.event(r,"Changed "+e,i(t)):_.isInteger(t)?n.event(r,"Changed "+e,i,t):n.event(r,"Changed "+e,t)})},n})},"8pUN":function(t,e){angular.module("doubtfire.common.services.header",[]).provider("headerService",function(t){var e;return(e={}).$get=function(t){var e;return t.headerMenuData=[],t.showHeader=!0,(e={}).showHeader=function(){return t.showHeader=!0},e.hideHeader=function(){return t.showHeader=!1},e},e.state=function(e,n,r){if(null==r&&(r="BasicHeaderCtrl"),null==n.views&&null==n.parent)throw new Error("stateData must have at least one view or have a parent");return n.views.header={controller:r,templateUrl:"common/header/header.tpl.html"},t.state(e,n)},e})},"999U":function(t,e){angular.module("doubtfire.common.modals.progress-modal",[]).factory("ProgressModal",function(t,e){var n;return(n={}).show=function(e,n,r){var i;return i=t.open({templateUrl:"common/modals/progress-modal/progress-modal.tpl.html",controller:"ProgressModalCtrl",resolve:{title:function(){return e},message:function(){return n}}}),null!=r?r.finally(function(){return i.close()}):void 0},n}).controller("ProgressModalCtrl",function(t,e,n,r){return t.title=n,t.message=r,t.close=function(){return e.dismiss()}})},"AZ+m":function(t,e){angular.module("doubtfire.api.resource-plus",["ngResource"]).factory("resourcePlus",function(t,e,n){return function(n,r,i){var o;return n=e.API_URL+n,i=angular.extend({},i,{create:{method:"POST"},update:{method:"PUT"}}),delete(o=t(n,r,i)).save,angular.extend(o.prototype,{$save:function(){return this[null!=this.id?"$update":"$create"].apply(this,arguments)}}),o}})},AcHm:function(t,e){angular.module("doubtfire.groups.group-set-manager",[]).directive("groupSetManager",function(){return{restrict:"E",templateUrl:"groups/group-set-manager/group-set-manager.tpl.html",scope:{unit:"=",unitRole:"=",project:"=",selectedGroupSet:"=",showGroupSetSelector:"=?"},controller:function(t,e,n,r,i,o,a){var s;if(null==t.unitRole&&null==t.project)throw Error("Group set group manager must have exactly one unit role or project");return t.newGroupSelected=function(){if(null!=t.unitRole)return t.showMemberPanelToolbar=!1},t.groupMembersLoaded=function(){if(null!=t.unitRole)return t.showMemberPanelToolbar=!0},s=function(){return this.addMemberForm.reset(),this.addMemberForm.querySelector('input[type="search"]').focus()},t.addMember=function(e){return t.selectedGroup.addMember(e,s)},t.updateGroup=function(e){return n.update({unit_id:t.unit.id,group_set_id:t.selectedGroupSet.id,id:t.selectedGroup.id,group:{name:e}},function(t){return o.add("success","Group name changed",2e3)},function(t){return o.add("danger",t.data.error,6e3)})}}}})},B2it:function(t,e){angular.module("doubtfire.units.states.tasks.inbox.directives.staff-task-list",[]).directive("staffTaskList",function(){return{restrict:"E",templateUrl:"units/states/tasks/inbox/directives/staff-task-list/staff-task-list.tpl.html",scope:{taskData:"=",unit:"=",unitRole:"=",filters:"=?",showSearchOptions:"=?"},controller:function(t,e,n,r,i,o,a,s,l,u,c,d,p){var f,h,m,g,v,b,y,w,k,x;if(m=u.listenTo(t),null==(null!=(g=t.taskData)?g.source:void 0))throw Error("Invalid taskData.source provided for task list; supply one of Unit.tasksForTaskInbox, Unit.tasksRequiringFeedback, Unit.taskByTaskDefinition");return t.showDate=c.showFullDate,t.userHasTutorials=(null!=(v=t.unit.tutorialsForUserName(s.profile.name))?v.length:void 0)>0,t.filteredTasks=[],t.filters=_.extend({studentName:null,tutorialIdSelected:t.userHasTutorials?"mine":"all",tutorials:[],taskDefinitionIdSelected:null,taskDefinition:null},t.filters),f=function(){var e;return e=n("tasksOfTaskDefinition")(t.tasks,t.filters.taskDefinition),e=n("tasksInTutorials")(e,t.filters.tutorials),e=n("tasksWithStudentName")(e,t.filters.studentName),t.filteredTasks=e},t.isTaskDefMode=t.taskData.source===i.tasksForDefinition&&null!=(null!=(b=t.filters)?b.taskDefinitionIdSelected:void 0)&&null!=t.showSearchOptions,t.isTaskDefMode&&(t.submissionsUrl=p.getSubmissionsUrl(t.unit.id,t.filters.taskDefinitionIdSelected),t.submissionsPdfsUrl=p.getSubmissionsPdfsUrl(t.unit.id,t.filters.taskDefinitionIdSelected)),t.isTaskDefMode&&e(function(){var t;return(t=document.querySelector('select[ng-model="filters.taskDefinitionIdSelected"]')).size=10,t.focus()}),t.tutorials=_.map(t.unit.tutorials.concat([{id:"all",description:"All tutorials",abbreviation:"__all"},{id:"mine",description:"Just my tutorials",abbreviation:"__mine"}]),function(t){return _.includes(["all","mine"],t.id)||-1===t.description.indexOf(t.abbreviation)&&(t.description=t.abbreviation+" - "+t.description),t}),t.tutorialIdChanged=function(){var e;return t.filters.tutorials="mine"===(e=t.filters.tutorialIdSelected)?t.unit.tutorialsForUserName(s.profile.name):"all"===e?_.concat(t.unit.tutorials,[{id:null}]):[t.unit.tutorialFromId(e)],t.filters.tutorials=_.map(t.filters.tutorials,"id"),f()},t.tutorialIdChanged(),t.groupSetName=function(e){if(t.unit.hasGroupwork())return l.groupSetName(e,t.unit)},t.taskDefinitionIdChanged=function(){var e,n;return t.submissionsUrl=p.getSubmissionsUrl(t.unit.id,t.filters.taskDefinitionIdSelected),t.submissionsPdfsUrl=p.getSubmissionsPdfsUrl(t.unit.id,t.filters.taskDefinitionIdSelected),null!=(n=t.filters.taskDefinitionIdSelected)&&(e=t.unit.taskDef(n)),t.filters.taskDefinition=e,t.isTaskDefMode&&y(),f()},(k=function(e){var n;if(t.isTaskDefMode)return n=_.find(t.unit.task_definitions,{abbreviation:null!=e?e.taskDefAbbr:void 0})||_.first(t.unit.task_definitions),t.filters.taskDefinitionIdSelected=n.id,t.filters.taskDefinition=n})(t.taskData.taskKey),t.studentNameChanged=f,h=function(e){return _.find(t.tasks,function(t){return t.hasTaskKey(e)})},x=!1,y=function(){return t.taskData.source.query({id:t.unit.id,task_def_id:t.filters.taskDefinitionIdSelected},function(n){var r,i;if(t.tasks=t.unit.incorporateTasks(n,f),t.isTaskDefMode&&(i=t.unit.fillWithUnStartedTasks(t.tasks,t.filters.taskDefinitionIdSelected),_.extend(t.tasks,i)),f(),r=h(t.taskData.taskKey),e(function(){return t.setSelectedTask(r)},500),!x)return x=!0,m.push(t.$watch("taskData.taskKey",function(e,n){if(!_.isEqual(e,n)&&null!=e)return t.isTaskDefMode&&e.taskDefAbbr!==(null!=n?n.taskDefAbbr:void 0)?(k(t.taskData.taskKey),y()):t.setSelectedTask(h(e))}))},function(t){return a.add("danger",t.data.error,6e3)})},m.push(t.$watch("unit.id",function(e,n){if(null!=e&&(e!==n||null==t.tasks))return y()})),t.setSelectedTask=function(e){var n;if(t.taskData.selectedTask=e,"function"==typeof(n=t.taskData).onSelectedTaskChange&&n.onSelectedTaskChange(e),null!=e)return w(e)},w=function(t){var e,n;if(null!=(n=document.querySelector("staff-task-list #"+t.taskKeyToIdString()))&&null!=(e=null!=n.scrollIntoViewIfNeeded?"scrollIntoViewIfNeeded":null!=n.scrollIntoView?"scrollIntoView":void 0))return n[e]({behavior:"smooth",block:"top"})},t.isSelectedTask=function(e){var n,r,i,o;return i=(null!=(n=t.taskData.selectedTask)?n.project().project_id:void 0)===e.project().project_id,o=(null!=(r=t.taskData.selectedTask)?r.task_definition_id:void 0)===e.task_definition_id,i&&o}}}})},BSnQ:function(t,e){angular.module("doubtfire.groups.group-selector",[]).directive("groupSelector",function(){return{restrict:"E",templateUrl:"groups/group-selector/group-selector.tpl.html",scope:{unit:"=",project:"=?",unitRole:"=?",selectedGroupSet:"=",selectedGroup:"=?",showGroupSetSelector:"=?",onSelect:"=?"},controller:function(t,e,n,r,i,o,a){var s,l,u,c,d,p;if(u=a.listenTo(t),null==t.unitRole&&null==t.project||null!=t.unitRole&&null!=t.project)throw Error("Group selector must have exactly one unit role or one project");return s=function(){var n;return n=null!=t.unitRole?e("groupsInTutorials")(t.selectedGroupSet.groups,t.unitRole,t.staffFilter):e("groupsForStudent")(t.selectedGroupSet.groups,t.project,t.selectedGroupSet),t.filteredGroups=e("paginateAndSort")(n,t.pagination,t.tableSort)},t.pagination={currentPage:1,maxSize:10,pageSize:10,totalSize:null,show:!1,onChange:s},t.tableSort={order:"number",reverse:!1},t.sortTableBy=function(e){return t.tableSort.order=e,t.tableSort.reverse=!t.tableSort.reverse,s()},p=function(){return t.loaded=!1},l=function(){return n(function(){return t.loaded=!0},500)},t.selectGroup=function(e){return t.selectedGroup=e,"function"==typeof t.onSelect?t.onSelect(e):void 0},d=function(){var e,n;return null!=(e=this.newGroupForm)&&e.reset(),t.newGroupNamePlaceholder=_.isEmpty(t.selectedGroupSet.groups)?"Group 1":null!=(null!=(n=_.last(t.selectedGroupSet.groups))?n.name.match(/\d+$/):void 0)?"Group "+(_.last(t.selectedGroupSet.groups).number+1):"Enter New Group Name..."},null==t.selectedGroupSet&&(t.selectedGroupSet=_.first(t.unit.group_sets)),null==t.showGroupSetSelector&&(t.showGroupSetSelector=t.unit.group_sets.length>1),t.selectGroupSet=function(e){if(null!=e)return p(),t.selectGroup(null),t.canCreateGroups=null!=t.unitRole||(null!=e?e.allow_students_to_create_groups:void 0),t.unit.getGroups(e.id,function(n){return t.selectedGroupSet=e,e.groups=n,l(),d(),s()},l)},t.selectGroupSet(t.selectedGroupSet),null!=(null!=(c=t.selectedGroupSet)?c.groups:void 0)&&t.unit.getGroups(t.selectedGroupSet.id),null!=t.unitRole&&(t.staffFilter={Convenor:"all",Tutor:"mine"}[t.unitRole.role]),t.onChangeStaffFilter=s,t.searchTextChanged=s,t.addGroup=function(e){var n,i,a,l;return 0===t.unit.tutorials.length&&r.add("danger","Please ensure there is at least one tutorial before groups are created",6e3),t.project?l=t.project.tutorial.id:(a=(null!=(n=t.unitRole)?n.name:void 0)||o.profile.name,null==(l=null!=(i=_.find(t.unit.tutorials,{tutor_name:a}))?i.id:void 0)&&(l=_.first(t.unit.tutorials).id)),t.unit.addGroup(t.selectedGroupSet,e,l,function(e){return d(),s(),t.selectedGroup=e})},t.projectInGroup=function(e){var n;return null!=_.find(null!=(n=t.project)?n.groups:void 0,{id:e.id})},t.joinGroup=function(e){if(null!=t.project)return t.projectInGroup(e)?r.add("danger","You are already member of this group"):e.addMember(t.project,function(){return t.selectedGroup=e},function(){})},t.updateGroup=function(e,n){var r;return r=_.find(t.selectedGroupSet.groups,{id:n}),r=_.extend(r,e),t.unit.updateGroup(r,s)},t.deleteGroup=function(e){return t.unit.deleteGroup(e,t.selectedGroupSet,function(n){var r;return e.id===(null!=(r=t.selectedGroup)?r.id:void 0)&&(t.selectedGroup=null),d(),s()})},u.push(t.$on("UnitGroupSetEditor/SelectedGroupSetChanged",function(e,n){var r;if((r=t.unit.findGroupSet(n.id))!==t.selectedGroupSet)return t.selectGroupSet(r)}))}}})},BUA6:function(t,e){angular.module("doubtfire.common.services.dates",[]).factory("dateService",function(){var t,e;return e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],(t={}).showDate=function(t){var n;return null!=t?(n=new Date(t),e[n.getMonth()]+" "+n.getFullYear()):"-"},t.showFullDate=function(t){var n;return null!=t?(n=new Date(t)).getDate()+" "+e[n.getMonth()]+" "+n.getFullYear():"-"},t})},BV18:function(t,e){angular.module("doubtfire.api.models.break",[]).factory("Break",function(t){return t("/teaching_periods/:teaching_period_id/breaks",{teaching_period_id:"@teaching_period_id"})})},By75:function(t,e){angular.module("doubtfire.tasks.project-top-tasks-list",[]).directive("projectTopTasksList",function(){return{restrict:"E",templateUrl:"tasks/project-top-tasks-list/project-top-tasks-list.tpl.html",scope:{project:"=project",onSelect:"="},controller:function(t,e,n){var r,i,o,a;return t.statusText=e.statusText,t.statusData=e.statusData,t.statusClass=e.statusClass,t.statusIcon=function(t){return e.statusIcons[t]},i=new Date,a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i.getDay()],r=function(r){var i,o,s,l,u,c,d,p,f,h,m,g,v,b,y;if(h=[],m=_.sortBy(_.sortBy(_.filter(r,function(t){return _.includes(e.validTopTask,t.status)}),"definition.seq"),"definition.start_date"),d=_.filter(m,function(t){return e.daysPastTargetDate(t)>0}),y=null!=t.project&&null!=t.project.tutorial?t.project.tutorial.meeting_day:"Monday",null!=(g=_.filter(d,function(t){return _.includes(e.statusToDiscuss,t.status)}))&&g.length>0){if(a===y&&(v=_.map(g,function(t){return{task:t,reason:"Discuss this task with your tutor in class today."}}),Array.prototype.push.apply(h,v)),_.size(h)>=5)return _.slice(h,0,5);d=_.filter(d,function(t){return!_.includes(g,t)})}for(o=0,l=(p=n.gradeValues).length;o<l&&(i=p[o],null!=(c=_.filter(d,function(t){return t.definition.target_grade===i}))&&c.length>0&&(v=_.map(c,function(t){return{task:t,reason:"Complete this "+n.grades[i]+" task to get back on track."}}),Array.prototype.push.apply(h,v)),!(h.length>=5));o++);if(h.length>=5)return _.slice(h,0,5);for(v=_.filter(m,function(t){return _.includes(e.toBeWorkedOn,t.status)&&e.daysUntilTargetDate(t)>=0}),s=0,u=(f=n.gradeValues).length;s<u;s++)i=f[s],b=_.map(_.filter(v,function(t){return t.definition.target_grade===i}),function(t){return{task:t,reason:"This is one of the next tasks for you to complete."}}),Array.prototype.push.apply(h,b);return _.slice(h,0,5)},t.topTasks=[],o=function(){return t.topTasks.length=0,t.topTasks=r(t.project.activeTasks())},t.$watch("project.target_grade",o),t.$watch("project.tasks",o),o()}}})},C6Cm:function(t,e){angular.module("doubtfire.config.routing",[]).config(function(t,e){return t.otherwise("/not_found"),t.when("","/"),t.when("/","/home")})},CjTd:function(t,e){angular.module("doubtfire.config.debug",[])},CoPh:function(t,e){angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.transition","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-popup.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/tooltip/tooltip-template-popup.html","template/popover/popover-html.html","template/popover/popover-template.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("collapse",["$animate",function(t){return{link:function(e,n,r){function i(){n.removeClass("collapsing"),n.css({height:"auto"})}function o(){n.css({height:"0"}),n.removeClass("collapsing"),n.addClass("collapse")}e.$watch(r.collapse,function(e){e?function(){if(!n.hasClass("collapse")&&!n.hasClass("in"))return o();n.css({height:n[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),t.removeClass(n,"in",{to:{height:"0"}}).then(o)}():(n.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),t.addClass(n,"in",{to:{height:n[0].scrollHeight+"px"}}).then(i))})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(t,e,n){this.groups=[],this.closeOthers=function(r){(angular.isDefined(e.closeOthers)?t.$eval(e.closeOthers):n.closeOthers)&&angular.forEach(this.groups,function(t){t!==r&&(t.isOpen=!1)})},this.addGroup=function(t){var e=this;this.groups.push(t),t.$on("$destroy",function(n){e.removeGroup(t)})},this.removeGroup=function(t){var e=this.groups.indexOf(t);-1!==e&&this.groups.splice(e,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",controllerAs:"accordion",transclude:!0,replace:!1,templateUrl:function(t,e){return e.templateUrl||"template/accordion/accordion.html"}}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(t,e){return e.templateUrl||"template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(t){this.heading=t}},link:function(t,e,n,r){r.addGroup(t),t.openClass=n.openClass||"panel-open",t.panelClass=n.panelClass,t.$watch("isOpen",function(n){e.toggleClass(t.openClass,n),n&&r.closeOthers(t)}),t.toggleOpen=function(e){t.isDisabled||e&&32!==e.which||(t.isOpen=!t.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(t,e,n,r,i){r.setHeading(i(t,angular.noop))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(t,e,n,r){t.$watch(function(){return r[n.accordionTransclude]},function(t){t&&(e.find("span").html(""),e.find("span").append(t))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(t,e){t.closeable=!!e.close,this.close=t.close}]).directive("alert",function(){return{controller:"AlertController",controllerAs:"alert",templateUrl:function(t,e){return e.templateUrl||"template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(t){return{require:"alert",link:function(e,n,r,i){t(function(){i.close()},parseInt(r.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).value("$bindHtmlUnsafeSuppressDeprecated",!1).directive("bindHtmlUnsafe",["$log","$bindHtmlUnsafeSuppressDeprecated",function(t,e){return function(n,r,i){e||t.warn("bindHtmlUnsafe is now deprecated. Use ngBindHtml instead"),r.addClass("ng-binding").data("$binding",i.bindHtmlUnsafe),n.$watch(i.bindHtmlUnsafe,function(t){r.html(t||"")})}}]),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(t){this.activeClass=t.activeClass||"active",this.toggleEvent=t.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",controllerAs:"buttons",link:function(t,e,n,r){var i=r[0],o=r[1];e.find("input").css({display:"none"}),o.$render=function(){e.toggleClass(i.activeClass,angular.equals(o.$modelValue,t.$eval(n.btnRadio)))},e.bind(i.toggleEvent,function(){if(!n.disabled){var r=e.hasClass(i.activeClass);r&&!angular.isDefined(n.uncheckable)||t.$apply(function(){o.$setViewValue(r?null:t.$eval(n.btnRadio)),o.$render()})}})}}}).directive("btnCheckbox",["$document",function(t){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",controllerAs:"button",link:function(e,n,r,i){var o=i[0],a=i[1];function s(){return u(r.btnCheckboxTrue,!0)}function l(){return u(r.btnCheckboxFalse,!1)}function u(t,n){var r=e.$eval(t);return angular.isDefined(r)?r:n}n.find("input").css({display:"none"}),a.$render=function(){n.toggleClass(o.activeClass,angular.equals(a.$modelValue,s()))},n.bind(o.toggleEvent,function(){r.disabled||e.$apply(function(){a.$setViewValue(n.hasClass(o.activeClass)?l():s()),a.$render()})}),n.on("keypress",function(i){r.disabled||32!==i.which||t[0].activeElement!==n[0]||e.$apply(function(){a.$setViewValue(n.hasClass(o.activeClass)?l():s()),a.$render()})})}}}]),angular.module("ui.bootstrap.carousel",[]).controller("CarouselController",["$scope","$element","$interval","$animate",function(t,e,n,r){var i,o,a=this,s=a.slides=t.slides=[],l=angular.version.minor>=4,u=-1;a.currentSlide=null;var c=!1;function d(t){if(angular.isUndefined(s[t].index))return s[t];var e;for(e=0;e<s.length;++e)if(s[e].index==t)return s[e]}function p(){f();var e=+t.interval;!isNaN(e)&&e>0&&(i=n(h,e))}function f(){i&&(n.cancel(i),i=null)}function h(){var e=+t.interval;o&&!isNaN(e)&&e>0&&s.length?t.next():t.pause()}a.select=t.select=function(e,n){var i=t.indexOfSlide(e);void 0===n&&(n=i>a.getCurrentIndex()?"next":"prev"),e&&e!==a.currentSlide&&!t.$currentTransition&&function(e,n,i){c||(angular.extend(e,{direction:i,active:!0}),angular.extend(a.currentSlide||{},{direction:i,active:!1}),r.enabled()&&!t.noTransition&&!t.$currentTransition&&e.$element&&a.slides.length>1&&(e.$element.data("uib-slideDirection",e.direction),a.currentSlide&&a.currentSlide.$element&&a.currentSlide.$element.data("uib-slideDirection",e.direction),t.$currentTransition=!0,l?r.on("addClass",e.$element,function(e,n){"close"===n&&(t.$currentTransition=null,r.off("addClass",e))}):e.$element.one("$animate:close",function(){t.$currentTransition=null})),a.currentSlide=e,u=n,p())}(e,i,n)},t.$on("$destroy",function(){c=!0}),a.getCurrentIndex=function(){return a.currentSlide&&angular.isDefined(a.currentSlide.index)?+a.currentSlide.index:u},t.indexOfSlide=function(t){return angular.isDefined(t.index)?+t.index:s.indexOf(t)},t.next=function(){var e=(a.getCurrentIndex()+1)%s.length;if(0!==e||!t.noWrap())return a.select(d(e),"next");t.pause()},t.prev=function(){var e=a.getCurrentIndex()-1<0?s.length-1:a.getCurrentIndex()-1;if(!t.noWrap()||e!==s.length-1)return a.select(d(e),"prev");t.pause()},t.isActive=function(t){return a.currentSlide===t},t.$watch("interval",p),t.$on("$destroy",f),t.play=function(){o||(o=!0,p())},t.pause=function(){t.noPause||(o=!1,f())},a.addSlide=function(e,n){e.$element=n,s.push(e),1===s.length||e.active?(a.select(s[s.length-1]),1==s.length&&t.play()):e.active=!1},a.removeSlide=function(t){angular.isDefined(t.index)&&s.sort(function(t,e){return+t.index>+e.index});var e=s.indexOf(t);s.splice(e,1),s.length>0&&t.active?a.select(e>=s.length?s[e-1]:s[e]):u>e&&u--,0===s.length&&(a.currentSlide=null)},t.$watch("noTransition",function(t){e.data("uib-noTransition",t)})}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",controllerAs:"carousel",require:"carousel",templateUrl:function(t,e){return e.templateUrl||"template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(t,e){return e.templateUrl||"template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function(t,e,n,r){r.addSlide(t,e),t.$on("$destroy",function(){r.removeSlide(t)}),t.$watch("active",function(e){e&&r.select(t)})}}}).animation(".item",["$injector","$animate",function(t,e){var n=null;function r(t,e,n){t.removeClass(e),n&&n()}return t.has("$animateCss")&&(n=t.get("$animateCss")),{beforeAddClass:function(t,i,o){if("active"==i&&t.parent()&&!t.parent().data("uib-noTransition")){var a=!1,s=t.data("uib-slideDirection"),l="next"==s?"left":"right",u=r.bind(this,t,l+" "+s,o);return t.addClass(s),n?n(t,{addClass:l}).start().done(u):e.addClass(t,l).then(function(){a||u(),o()}),function(){a=!0}}o()},beforeRemoveClass:function(t,i,o){if("active"===i&&t.parent()&&!t.parent().data("uib-noTransition")){var a=!1,s="next"==t.data("uib-slideDirection")?"left":"right",l=r.bind(this,t,s,o);return n?n(t,{addClass:s}).start().done(l):e.addClass(t,s).then(function(){a||l(),o()}),function(){a=!0}}o()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$log","$locale","orderByFilter",function(t,e,n){var r=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.parsers={};var i={yyyy:{regex:"\\d{4}",apply:function(t){this.year=+t}},yy:{regex:"\\d{2}",apply:function(t){this.year=+t+2e3}},y:{regex:"\\d{1,4}",apply:function(t){this.year=+t}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(t){this.month=t-1}},M:{regex:"[1-9]|1[0-2]",apply:function(t){this.month=t-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(t){this.date=+t}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(t){this.date=+t}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(t){this.hours=+t}},hh:{regex:"0[0-9]|1[0-2]",apply:function(t){this.hours=+t}},H:{regex:"1?[0-9]|2[0-3]",apply:function(t){this.hours=+t}},h:{regex:"[0-9]|1[0-2]",apply:function(t){this.hours=+t}},mm:{regex:"[0-5][0-9]",apply:function(t){this.minutes=+t}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(t){this.minutes=+t}},sss:{regex:"[0-9][0-9][0-9]",apply:function(t){this.milliseconds=+t}},ss:{regex:"[0-5][0-9]",apply:function(t){this.seconds=+t}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(t){this.seconds=+t}},a:{regex:e.DATETIME_FORMATS.AMPMS.join("|"),apply:function(t){12===this.hours&&(this.hours=0),"PM"===t&&(this.hours+=12)}}};this.parse=function(o,a,s){if(!angular.isString(o)||!a)return o;a=(a=e.DATETIME_FORMATS[a]||a).replace(r,"\\$&"),this.parsers[a]||(this.parsers[a]=function(t){var e=[],r=t.split("");return angular.forEach(i,function(n,i){var o=t.indexOf(i);if(o>-1){t=t.split(""),r[o]="("+n.regex+")",t[o]="$";for(var a=o+1,s=o+i.length;a<s;a++)r[a]="",t[a]="$";t=t.join(""),e.push({index:o,apply:n.apply})}}),{regex:new RegExp("^"+r.join("")+"$"),map:n(e,"index")}}(a));var l,u,c,d=this.parsers[a],p=d.map,f=o.match(d.regex);if(f&&f.length){var h,m;angular.isDate(s)&&!isNaN(s.getTime())?h={year:s.getFullYear(),month:s.getMonth(),date:s.getDate(),hours:s.getHours(),minutes:s.getMinutes(),seconds:s.getSeconds(),milliseconds:s.getMilliseconds()}:(s&&t.warn("dateparser:","baseDate is not a valid date"),h={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var g=1,v=f.length;g<v;g++){var b=p[g-1];b.apply&&b.apply.call(h,f[g])}return l=h.year,u=h.month,!((c=h.date)<1)&&(1===u&&c>28?29===c&&(l%4==0&&l%100!=0||l%400==0):3!==u&&5!==u&&8!==u&&10!==u||c<31)&&(m=new Date(h.year,h.month,h.date,h.hours,h.minutes,h.seconds,h.milliseconds||0)),m}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(t,e){function n(t){return"static"===(((n=t).currentStyle?n.currentStyle.position:e.getComputedStyle?e.getComputedStyle(n).position:n.style.position)||"static");var n}return{position:function(e){var r=this.offset(e),i={top:0,left:0},o=function(e){for(var r=t[0],i=e.offsetParent||r;i&&i!==r&&n(i);)i=i.offsetParent;return i||r}(e[0]);o!=t[0]&&((i=this.offset(angular.element(o))).top+=o.clientTop-o.scrollTop,i.left+=o.clientLeft-o.scrollLeft);var a=e[0].getBoundingClientRect();return{width:a.width||e.prop("offsetWidth"),height:a.height||e.prop("offsetHeight"),top:r.top-i.top,left:r.left-i.left}},offset:function(n){var r=n[0].getBoundingClientRect();return{width:r.width||n.prop("offsetWidth"),height:r.height||n.prop("offsetHeight"),top:r.top+(e.pageYOffset||t[0].documentElement.scrollTop),left:r.left+(e.pageXOffset||t[0].documentElement.scrollLeft)}},positionElements:function(t,e,n,r){var i,o,a,s,l=n.split("-"),u=l[0],c=l[1]||"center";i=r?this.offset(t):this.position(t),o=e.prop("offsetWidth"),a=e.prop("offsetHeight");var d={center:function(){return i.left+i.width/2-o/2},left:function(){return i.left},right:function(){return i.left+i.width}},p={center:function(){return i.top+i.height/2-a/2},top:function(){return i.top},bottom:function(){return i.top+i.height}};switch(u){case"right":s={top:p[c](),left:d[u]()};break;case"left":s={top:p[c](),left:i.left-o};break;case"bottom":s={top:p[u](),left:d[c]()};break;default:s={top:i.top-a,left:d[c]()}}return s}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","datepickerConfig","$datepickerSuppressError",function(t,e,n,r,i,o,a,s){var l=this,u={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRange","shortcutPropagation"],function(n,i){l[n]=angular.isDefined(e[n])?i<6?r(e[n])(t.$parent):t.$parent.$eval(e[n]):a[n]}),angular.forEach(["minDate","maxDate"],function(r){e[r]?t.$parent.$watch(n(e[r]),function(t){l[r]=t?new Date(t):null,l.refreshView()}):l[r]=a[r]?new Date(a[r]):null}),angular.forEach(["minMode","maxMode"],function(r){e[r]?t.$parent.$watch(n(e[r]),function(n){l[r]=angular.isDefined(n)?n:e[r],t[r]=l[r],("minMode"==r&&l.modes.indexOf(t.datepickerMode)<l.modes.indexOf(l[r])||"maxMode"==r&&l.modes.indexOf(t.datepickerMode)>l.modes.indexOf(l[r]))&&(t.datepickerMode=l[r])}):(l[r]=a[r]||null,t[r]=l[r])}),t.datepickerMode=t.datepickerMode||a.datepickerMode,t.uniqueId="datepicker-"+t.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(e.initDate)?(this.activeDate=t.$parent.$eval(e.initDate)||new Date,t.$parent.$watch(e.initDate,function(t){t&&(u.$isEmpty(u.$modelValue)||u.$invalid)&&(l.activeDate=t,l.refreshView())})):this.activeDate=new Date,t.isActive=function(e){return 0===l.compare(e.date,l.activeDate)&&(t.activeDateId=e.uid,!0)},this.init=function(t){(u=t).$render=function(){l.render()}},this.render=function(){if(u.$viewValue){var t=new Date(u.$viewValue);isNaN(t)?s||i.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'):this.activeDate=t}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var t=u.$viewValue?new Date(u.$viewValue):null;u.$setValidity("dateDisabled",!t||this.element&&!this.isDisabled(t))}},this.createDateObject=function(t,e){var n=u.$viewValue?new Date(u.$viewValue):null;return{date:t,label:o(t,e),selected:n&&0===this.compare(t,n),disabled:this.isDisabled(t),current:0===this.compare(t,new Date),customClass:this.customClass(t)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||e.dateDisabled&&t.dateDisabled({date:n,mode:t.datepickerMode})},this.customClass=function(e){return t.customClass({date:e,mode:t.datepickerMode})},this.split=function(t,e){for(var n=[];t.length>0;)n.push(t.splice(0,e));return n},this.fixTimeZone=function(t){var e=t.getHours();t.setHours(23===e?e+2:0)},t.select=function(e){if(t.datepickerMode===l.minMode){var n=u.$viewValue?new Date(u.$viewValue):new Date(0,0,0,0,0,0,0);n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),u.$setViewValue(n),u.$render()}else l.activeDate=e,t.datepickerMode=l.modes[l.modes.indexOf(t.datepickerMode)-1]},t.move=function(t){var e=l.activeDate.getFullYear()+t*(l.step.years||0),n=l.activeDate.getMonth()+t*(l.step.months||0);l.activeDate.setFullYear(e,n,1),l.refreshView()},t.toggleMode=function(e){e=e||1,t.datepickerMode===l.maxMode&&1===e||t.datepickerMode===l.minMode&&-1===e||(t.datepickerMode=l.modes[l.modes.indexOf(t.datepickerMode)+e])},t.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var c=function(){l.element[0].focus()};t.$on("datepicker.focus",c),t.keydown=function(e){var n=t.keys[e.which];if(n&&!e.shiftKey&&!e.altKey)if(e.preventDefault(),l.shortcutPropagation||e.stopPropagation(),"enter"===n||"space"===n){if(l.isDisabled(l.activeDate))return;t.select(l.activeDate),c()}else!e.ctrlKey||"up"!==n&&"down"!==n?(l.handleKeyDown(n,e),l.refreshView()):(t.toggleMode("up"===n?1:-1),c())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:function(t,e){return e.templateUrl||"template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","^ngModel"],controller:"DatepickerController",controllerAs:"datepicker",link:function(t,e,n,r){r[0].init(r[1])}}}).directive("daypicker",["dateFilter",function(t){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(e,n,r,i){e.showWeeks=i.showWeeks,i.step={months:1},i.element=n;var o=[31,28,31,30,31,30,31,31,30,31,30,31];function a(t,e){return 1!==e||t%4!=0||t%100==0&&t%400!=0?o[e]:29}function s(t){var e=new Date(t);e.setDate(e.getDate()+4-(e.getDay()||7));var n=e.getTime();return e.setMonth(0),e.setDate(1),Math.floor(Math.round((n-e)/864e5)/7)+1}i._refreshView=function(){var n=i.activeDate.getFullYear(),r=i.activeDate.getMonth(),o=new Date(n,r,1),a=i.startingDay-o.getDay(),l=a>0?7-a:-a,u=new Date(o);l>0&&u.setDate(1-l);for(var c=function(t,e){for(var n,r=new Array(42),o=new Date(t),a=0;a<42;)n=new Date(o),i.fixTimeZone(n),r[a++]=n,o.setDate(o.getDate()+1);return r}(u),d=0;d<42;d++)c[d]=angular.extend(i.createDateObject(c[d],i.formatDay),{secondary:c[d].getMonth()!==r,uid:e.uniqueId+"-"+d});e.labels=new Array(7);for(var p=0;p<7;p++)e.labels[p]={abbr:t(c[p].date,i.formatDayHeader),full:t(c[p].date,"EEEE")};if(e.title=t(i.activeDate,i.formatDayTitle),e.rows=i.split(c,7),e.showWeeks){e.weekNumbers=[];for(var f=(11-i.startingDay)%7,h=e.rows.length,m=0;m<h;m++)e.weekNumbers.push(s(e.rows[m][f].date))}},i.compare=function(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate())-new Date(e.getFullYear(),e.getMonth(),e.getDate())},i.handleKeyDown=function(t,e){var n=i.activeDate.getDate();if("left"===t)n-=1;else if("up"===t)n-=7;else if("right"===t)n+=1;else if("down"===t)n+=7;else if("pageup"===t||"pagedown"===t){var r=i.activeDate.getMonth()+("pageup"===t?-1:1);i.activeDate.setMonth(r,1),n=Math.min(a(i.activeDate.getFullYear(),i.activeDate.getMonth()),n)}else"home"===t?n=1:"end"===t&&(n=a(i.activeDate.getFullYear(),i.activeDate.getMonth()));i.activeDate.setDate(n)},i.refreshView()}}}]).directive("monthpicker",["dateFilter",function(t){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(e,n,r,i){i.step={years:1},i.element=n,i._refreshView=function(){for(var n,r=new Array(12),o=i.activeDate.getFullYear(),a=0;a<12;a++)n=new Date(o,a,1),i.fixTimeZone(n),r[a]=angular.extend(i.createDateObject(n,i.formatMonth),{uid:e.uniqueId+"-"+a});e.title=t(i.activeDate,i.formatMonthTitle),e.rows=i.split(r,3)},i.compare=function(t,e){return new Date(t.getFullYear(),t.getMonth())-new Date(e.getFullYear(),e.getMonth())},i.handleKeyDown=function(t,e){var n=i.activeDate.getMonth();if("left"===t)n-=1;else if("up"===t)n-=3;else if("right"===t)n+=1;else if("down"===t)n+=3;else if("pageup"===t||"pagedown"===t){var r=i.activeDate.getFullYear()+("pageup"===t?-1:1);i.activeDate.setFullYear(r)}else"home"===t?n=0:"end"===t&&(n=11);i.activeDate.setMonth(n)},i.refreshView()}}}]).directive("yearpicker",["dateFilter",function(t){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(t,e,n,r){var i=r.yearRange;function o(t){return parseInt((t-1)/i,10)*i+1}r.step={years:i},r.element=e,r._refreshView=function(){for(var e,n=new Array(i),a=0,s=o(r.activeDate.getFullYear());a<i;a++)e=new Date(s+a,0,1),r.fixTimeZone(e),n[a]=angular.extend(r.createDateObject(e,r.formatYear),{uid:t.uniqueId+"-"+a});t.title=[n[0].label,n[i-1].label].join(" - "),t.rows=r.split(n,5)},r.compare=function(t,e){return t.getFullYear()-e.getFullYear()},r.handleKeyDown=function(t,e){var n=r.activeDate.getFullYear();"left"===t?n-=1:"up"===t?n-=5:"right"===t?n+=1:"down"===t?n+=5:"pageup"===t||"pagedown"===t?n+=("pageup"===t?-1:1)*r.step.years:"home"===t?n=o(r.activeDate.getFullYear()):"end"===t&&(n=o(r.activeDate.getFullYear())+i-1),r.activeDate.setFullYear(n)},r.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"template/datepicker/popup.html",datepickerTemplateUrl:"template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0,onOpenFocus:!0}).directive("datepickerPopup",["$compile","$parse","$document","$rootScope","$position","dateFilter","dateParser","datepickerPopupConfig","$timeout",function(t,e,n,r,i,o,a,s,l){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(u,c,d,p){var f,h=angular.isDefined(d.closeOnDateSelection)?u.$parent.$eval(d.closeOnDateSelection):s.closeOnDateSelection,m=angular.isDefined(d.datepickerAppendToBody)?u.$parent.$eval(d.datepickerAppendToBody):s.appendToBody,g=angular.isDefined(d.onOpenFocus)?u.$parent.$eval(d.onOpenFocus):s.onOpenFocus,v=angular.isDefined(d.datepickerPopupTemplateUrl)?d.datepickerPopupTemplateUrl:s.datepickerPopupTemplateUrl,b=angular.isDefined(d.datepickerTemplateUrl)?d.datepickerTemplateUrl:s.datepickerTemplateUrl,y={};u.showButtonBar=angular.isDefined(d.showButtonBar)?u.$parent.$eval(d.showButtonBar):s.showButtonBar,u.getText=function(t){return u[t+"Text"]||s[t+"Text"]},u.isDisabled=function(t){return"today"===t&&(t=new Date),u.watchData.minDate&&u.compare(t,y.minDate)<0||u.watchData.maxDate&&u.compare(t,y.maxDate)>0},u.compare=function(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate())-new Date(e.getFullYear(),e.getMonth(),e.getDate())};var w=!1;if(s.html5Types[d.type]?(f=s.html5Types[d.type],w=!0):(f=d.datepickerPopup||s.datepickerPopup,d.$observe("datepickerPopup",function(t,e){var n=t||s.datepickerPopup;if(n!==f&&(f=n,p.$modelValue=null,!f))throw new Error("datepickerPopup must have a date format specified.")})),!f)throw new Error("datepickerPopup must have a date format specified.");if(w&&d.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");var k=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");function _(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}k.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":v});var x=angular.element(k.children()[0]);if(x.attr("template-url",b),w&&"month"===d.type&&(x.attr("datepicker-mode",'"month"'),x.attr("min-mode","month")),d.datepickerOptions){var S=u.$parent.$eval(d.datepickerOptions);S&&S.initDate&&(u.initDate=S.initDate,x.attr("init-date","initDate"),delete S.initDate),angular.forEach(S,function(t,e){x.attr(_(e),t)})}u.watchData={},angular.forEach(["minMode","maxMode","minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(t){if(d[t]){var n=e(d[t]);if(u.$parent.$watch(n,function(e){u.watchData[t]=e,"minDate"!==t&&"maxDate"!==t||(y[t]=new Date(e))}),x.attr(_(t),"watchData."+t),"datepickerMode"===t){var r=n.assign;u.$watch("watchData."+t,function(t,e){angular.isFunction(r)&&t!==e&&r(u.$parent,t)})}}}),d.dateDisabled&&x.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),d.showWeeks&&x.attr("show-weeks",d.showWeeks),d.customClass&&x.attr("custom-class","customClass({ date: date, mode: mode })"),w?p.$formatters.push(function(t){return u.date=t,t}):(p.$$parserName="date",p.$validators.date=function(t,e){var n=t||e;if(!d.ngRequired&&!n)return!0;if(angular.isNumber(n)&&(n=new Date(n)),n){if(angular.isDate(n)&&!isNaN(n))return!0;if(angular.isString(n)){var r=a.parse(n,f);return!isNaN(r)}return!1}return!0},p.$parsers.unshift(function(t){if(angular.isNumber(t)&&(t=new Date(t)),!t)return null;if(angular.isDate(t)&&!isNaN(t))return t;if(angular.isString(t)){var e=a.parse(t,f,u.date);return isNaN(e)?void 0:e}}),p.$formatters.push(function(t){return u.date=t,p.$isEmpty(t)?t:o(t,f)})),u.dateSelection=function(t){angular.isDefined(t)&&(u.date=t);var e=u.date?o(u.date,f):null;c.val(e),p.$setViewValue(e),h&&(u.isOpen=!1,c[0].focus())},p.$viewChangeListeners.push(function(){u.date=a.parse(p.$viewValue,f,u.date)});var $=function(t){!u.isOpen||c[0].contains(t.target)||k[0].contains(t.target)||u.$apply(function(){u.isOpen=!1})},T=function(t){27===t.which&&u.isOpen?(t.preventDefault(),t.stopPropagation(),u.$apply(function(){u.isOpen=!1}),c[0].focus()):40!==t.which||u.isOpen||(t.preventDefault(),t.stopPropagation(),u.$apply(function(){u.isOpen=!0}))};c.bind("keydown",T),u.keydown=function(t){27===t.which&&(u.isOpen=!1,c[0].focus())},u.$watch("isOpen",function(t){t?(u.position=m?i.offset(c):i.position(c),u.position.top=u.position.top+c.prop("offsetHeight"),l(function(){g&&u.$broadcast("datepicker.focus"),n.bind("click",$)},0,!1)):n.unbind("click",$)}),u.select=function(t){if("today"===t){var e=new Date;angular.isDate(u.date)?(t=new Date(u.date)).setFullYear(e.getFullYear(),e.getMonth(),e.getDate()):t=new Date(e.setHours(0,0,0,0))}u.dateSelection(t)},u.close=function(){u.isOpen=!1,c[0].focus()};var C=t(k)(u);k.remove(),m?n.find("body").append(C):c.after(C),u.$on("$destroy",function(){!0===u.isOpen&&(r.$$phase||u.$apply(function(){u.isOpen=!1})),C.remove(),c.unbind("keydown",T),n.unbind("click",$)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:function(t,e){return e.templateUrl||"template/datepicker/popup.html"}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document","$rootScope",function(t,e){var n=null;this.open=function(e){n||(t.bind("click",r),t.bind("keydown",i)),n&&n!==e&&(n.isOpen=!1),n=e},this.close=function(e){n===e&&(n=null,t.unbind("click",r),t.unbind("keydown",i))};var r=function(t){if(n&&(!t||"disabled"!==n.getAutoClose())){var r=n.getToggleElement();if(!(t&&r&&r[0].contains(t.target))){var i=n.getDropdownElement();t&&"outsideClick"===n.getAutoClose()&&i&&i[0].contains(t.target)||(n.isOpen=!1,e.$$phase||n.$apply())}}},i=function(t){27===t.which?(n.focusToggleElement(),r()):n.isKeynavEnabled()&&/(38|40)/.test(t.which)&&n.isOpen&&(t.preventDefault(),t.stopPropagation(),n.focusDropdownEntry(t.which))}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate","$position","$document","$compile","$templateRequest",function(t,e,n,r,i,o,a,s,l,u){var c,d,p=this,f=t.$new(),h=r.openClass,m=angular.noop,g=e.onToggle?n(e.onToggle):angular.noop,v=!1,b=!1,y=s.find("body");this.init=function(r){p.$element=r,e.isOpen&&(d=n(e.isOpen),m=d.assign,t.$watch(d,function(t){f.isOpen=!!t})),v=angular.isDefined(e.dropdownAppendToBody),b=angular.isDefined(e.keyboardNav),v&&p.dropdownMenu&&(y.append(p.dropdownMenu),y.addClass("dropdown"),r.on("$destroy",function(){p.dropdownMenu.remove()}))},this.toggle=function(t){return f.isOpen=arguments.length?!!t:!f.isOpen},this.isOpen=function(){return f.isOpen},f.getToggleElement=function(){return p.toggleElement},f.getAutoClose=function(){return e.autoClose||"always"},f.getElement=function(){return p.$element},f.isKeynavEnabled=function(){return b},f.focusDropdownEntry=function(t){var e=p.dropdownMenu?angular.element(p.dropdownMenu).find("a"):angular.element(p.$element).find("ul").eq(0).find("a");switch(t){case 40:p.selectedOption=angular.isNumber(p.selectedOption)?p.selectedOption===e.length-1?p.selectedOption:p.selectedOption+1:0;break;case 38:p.selectedOption=angular.isNumber(p.selectedOption)?0===p.selectedOption?0:p.selectedOption-1:e.length-1}e[p.selectedOption].focus()},f.getDropdownElement=function(){return p.dropdownMenu},f.focusToggleElement=function(){p.toggleElement&&p.toggleElement[0].focus()},f.$watch("isOpen",function(e,n){if(v&&p.dropdownMenu){var r=a.positionElements(p.$element,p.dropdownMenu,"bottom-left",!0),s={top:r.top+"px",display:e?"block":"none"};p.dropdownMenu.hasClass("dropdown-menu-right")?(s.left="auto",s.right=window.innerWidth-(r.left+p.$element.prop("offsetWidth"))+"px"):(s.left=r.left+"px",s.right="auto"),p.dropdownMenu.css(s)}if(o[e?"addClass":"removeClass"](v?y:p.$element,h).then(function(){angular.isDefined(e)&&e!==n&&g(t,{open:!!e})}),e)p.dropdownMenuTemplateUrl&&u(p.dropdownMenuTemplateUrl).then(function(t){c=f.$new(),l(t.trim())(c,function(t){var e=t;p.dropdownMenu.replaceWith(e),p.dropdownMenu=e})}),f.focusToggleElement(),i.open(f);else{if(p.dropdownMenuTemplateUrl){c&&c.$destroy();var d=angular.element('<ul class="dropdown-menu"></ul>');p.dropdownMenu.replaceWith(d),p.dropdownMenu=d}i.close(f),p.selectedOption=null}angular.isFunction(m)&&m(t,e)}),t.$on("$locationChangeSuccess",function(){"disabled"!==f.getAutoClose()&&(f.isOpen=!1)});var w=t.$on("$destroy",function(){f.$destroy()});f.$on("$destroy",w)}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(t,e,n,r){r.init(e),e.addClass("dropdown")}}}).directive("dropdownMenu",function(){return{restrict:"AC",require:"?^dropdown",link:function(t,e,n,r){if(r){var i=n.templateUrl;i&&(r.dropdownMenuTemplateUrl=i),r.dropdownMenu||(r.dropdownMenu=e)}}}}).directive("keyboardNav",function(){return{restrict:"A",require:"?^dropdown",link:function(t,e,n,r){e.bind("keydown",function(t){if(-1!==[38,40].indexOf(t.which)){t.preventDefault(),t.stopPropagation();var e=r.dropdownMenu.find("a");switch(t.which){case 40:r.selectedOption=angular.isNumber(r.selectedOption)?r.selectedOption===e.length-1?r.selectedOption:r.selectedOption+1:0;break;case 38:r.selectedOption=angular.isNumber(r.selectedOption)?0===r.selectedOption?0:r.selectedOption-1:e.length-1}e[r.selectedOption].focus()}})}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(t,e,n,r){if(r){e.addClass("dropdown-toggle"),r.toggleElement=e;var i=function(i){i.preventDefault(),e.hasClass("disabled")||n.disabled||t.$apply(function(){r.toggle()})};e.bind("click",i),e.attr({"aria-haspopup":!0,"aria-expanded":!1}),t.$watch(r.isOpen,function(t){e.attr("aria-expanded",!!t)}),t.$on("$destroy",function(){e.unbind("click",i)})}}}}),angular.module("ui.bootstrap.modal",[]).factory("$$stackedMap",function(){return{createNew:function(){var t=[];return{add:function(e,n){t.push({key:e,value:n})},get:function(e){for(var n=0;n<t.length;n++)if(e==t[n].key)return t[n]},keys:function(){for(var e=[],n=0;n<t.length;n++)e.push(t[n].key);return e},top:function(){return t[t.length-1]},remove:function(e){for(var n=-1,r=0;r<t.length;r++)if(e==t[r].key){n=r;break}return t.splice(n,1)[0]},removeTop:function(){return t.splice(t.length-1,1)[0]},length:function(){return t.length}}}}}).factory("$$multiMap",function(){return{createNew:function(){var t={};return{entries:function(){return Object.keys(t).map(function(e){return{key:e,value:t[e]}})},get:function(e){return t[e]},hasKey:function(e){return!!t[e]},keys:function(){return Object.keys(t)},put:function(e,n){t[e]||(t[e]=[]),t[e].push(n)},remove:function(e,n){var r=t[e];if(r){var i=r.indexOf(n);-1!==i&&r.splice(i,1),r.length||delete t[e]}}}}}}).directive("modalBackdrop",["$animate","$injector","$modalStack",function(t,e,n){var r=null;return e.has("$animateCss")&&(r=e.get("$animateCss")),{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(t,e){return t.addClass(e.backdropClass),i}};function i(e,i,o){o.modalInClass&&(r?r(i,{addClass:o.modalInClass}).start():t.addClass(i,o.modalInClass),e.$on(n.NOW_CLOSING_EVENT,function(e,n){var a=n();r?r(i,{removeClass:o.modalInClass}).start().then(a):t.removeClass(i,o.modalInClass).then(a)}))}}]).directive("modalWindow",["$modalStack","$q","$animate","$injector",function(t,e,n,r){var i=null;return r.has("$animateCss")&&(i=r.get("$animateCss")),{restrict:"EA",scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(t,e){return e.templateUrl||"template/modal/window.html"},link:function(r,o,a){o.addClass(a.windowClass||""),r.size=a.size,r.close=function(e){var n=t.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&e.target===e.currentTarget&&(e.preventDefault(),e.stopPropagation(),t.dismiss(n.key,"backdrop click"))},r.$isRendered=!0;var s=e.defer();a.$observe("modalRender",function(t){"true"==t&&s.resolve()}),s.promise.then(function(){var s=null;a.modalInClass&&(s=i?i(o,{addClass:a.modalInClass}).start():n.addClass(o,a.modalInClass),r.$on(t.NOW_CLOSING_EVENT,function(t,e){var r=e();i?i(o,{removeClass:a.modalInClass}).start().then(r):n.removeClass(o,a.modalInClass).then(r)})),e.when(s).then(function(){var t=o[0].querySelectorAll("[autofocus]");t.length?t[0].focus():o[0].focus()});var l=t.getTop();l&&t.modalRendered(l.key)})}}}]).directive("modalAnimationClass",[function(){return{compile:function(t,e){e.modalAnimation&&t.addClass(e.modalAnimationClass)}}}]).directive("modalTransclude",function(){return{link:function(t,e,n,r,i){i(t.$parent,function(t){e.empty(),e.append(t)})}}}).factory("$modalStack",["$animate","$timeout","$document","$compile","$rootScope","$q","$injector","$$multiMap","$$stackedMap",function(t,e,n,r,i,o,a,s,l){var u=null;a.has("$animateCss")&&(u=a.get("$animateCss"));var c,d,p,f="modal-open",h=l.createNew(),m=s.createNew(),g={NOW_CLOSING_EVENT:"modal.stack.now-closing"};function v(){for(var t=-1,e=h.keys(),n=0;n<e.length;n++)h.get(e[n]).value.backdrop&&(t=n);return t}function b(t,e){var r=n.find("body").eq(0),i=h.get(t).value;h.remove(t),y(i.modalDomEl,i.modalScope,function(){var e=i.openedClass||f;m.remove(e,t),r.toggleClass(e,m.hasKey(e))}),c&&-1==v()&&(y(c,d,function(){}),c=void 0,d=void 0),e&&e.focus?e.focus():r.focus()}function y(e,n,r){var i,a=null;return n.$broadcast(g.NOW_CLOSING_EVENT,function(){return i||(i=o.defer(),a=i.promise),function(){i.resolve()}}),o.when(a).then(function i(){i.done||(i.done=!0,u?u(e,{event:"leave"}).start().then(function(){e.remove()}):t.leave(e),n.$destroy(),r&&r())})}function w(t,e,n){return!t.value.modalScope.$broadcast("modal.closing",e,n).defaultPrevented}return i.$watch(v,function(t){d&&(d.index=t)}),n.bind("keydown",function(t){if(t.isDefaultPrevented())return t;var e=h.top();if(e&&e.value.keyboard)switch(t.which){case 27:t.preventDefault(),i.$apply(function(){g.dismiss(e.key,"escape key press")});break;case 9:g.loadFocusElementList(e);var n=!1;t.shiftKey?g.isFocusInFirstItem(t)&&(n=g.focusLastFocusableElement()):g.isFocusInLastItem(t)&&(n=g.focusFirstFocusableElement()),n&&(t.preventDefault(),t.stopPropagation())}}),g.open=function(t,e){var o=n[0].activeElement,a=e.openedClass||f;h.add(t,{deferred:e.deferred,renderDeferred:e.renderDeferred,modalScope:e.scope,backdrop:e.backdrop,keyboard:e.keyboard,openedClass:e.openedClass}),m.put(a,t);var s=n.find("body").eq(0),l=v();if(l>=0&&!c){(d=i.$new(!0)).index=l;var u=angular.element('<div modal-backdrop="modal-backdrop"></div>');u.attr("backdrop-class",e.backdropClass),e.animation&&u.attr("modal-animation","true"),c=r(u)(d),s.append(c)}var p=angular.element('<div modal-window="modal-window"></div>');p.attr({"template-url":e.windowTemplateUrl,"window-class":e.windowClass,size:e.size,index:h.length()-1,animate:"animate"}).html(e.content),e.animation&&p.attr("modal-animation","true");var b=r(p)(e.scope);h.top().value.modalDomEl=b,h.top().value.modalOpener=o,s.append(b),s.addClass(a),g.clearFocusListCache()},g.close=function(t,e){var n=h.get(t);return n&&w(n,e,!0)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.resolve(e),b(t,n.value.modalOpener),!0):!n},g.dismiss=function(t,e){var n=h.get(t);return n&&w(n,e,!1)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.reject(e),b(t,n.value.modalOpener),!0):!n},g.dismissAll=function(t){for(var e=this.getTop();e&&this.dismiss(e.key,t);)e=this.getTop()},g.getTop=function(){return h.top()},g.modalRendered=function(t){var e=h.get(t);e&&e.value.renderDeferred.resolve()},g.focusFirstFocusableElement=function(){return p.length>0&&(p[0].focus(),!0)},g.focusLastFocusableElement=function(){return p.length>0&&(p[p.length-1].focus(),!0)},g.isFocusInFirstItem=function(t){return p.length>0&&(t.target||t.srcElement)==p[0]},g.isFocusInLastItem=function(t){return p.length>0&&(t.target||t.srcElement)==p[p.length-1]},g.clearFocusListCache=function(){p=[]},g.loadFocusElementList=function(t){if((void 0===p||!p.length0)&&t){var e=t.value.modalDomEl;e&&e.length&&(p=e[0].querySelectorAll("a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]"))}},g}]).provider("$modal",function(){var t={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$modalStack",function(e,n,r,i,o,a){var s={},l=null;return s.getPromiseChain=function(){return l},s.open=function(s){var u=r.defer(),c=r.defer(),d=r.defer(),p={result:u.promise,opened:c.promise,rendered:d.promise,close:function(t){return a.close(p,t)},dismiss:function(t){return a.dismiss(p,t)}};if((s=angular.extend({},t.options,s)).resolve=s.resolve||{},!s.template&&!s.templateUrl)throw new Error("One of template or templateUrl options is required.");var f,h,m,g=r.all([(h=s,h.template?r.when(h.template):i(angular.isFunction(h.templateUrl)?h.templateUrl():h.templateUrl))].concat((f=[],angular.forEach(s.resolve,function(t){angular.isFunction(t)||angular.isArray(t)?f.push(r.when(e.invoke(t))):angular.isString(t)?f.push(r.when(e.get(t))):f.push(r.when(t))}),f)));return m=l=r.all([l]).then(function(){return g},function(){return g}).then(function(t){var e=(s.scope||n).$new();e.$close=p.close,e.$dismiss=p.dismiss,e.$on("$destroy",function(){e.$$uibDestructionScheduled||e.$dismiss("$uibUnscheduledDestruction")});var r,i={},l=1;s.controller&&(i.$scope=e,i.$modalInstance=p,angular.forEach(s.resolve,function(e,n){i[n]=t[l++]}),r=o(s.controller,i),s.controllerAs&&(s.bindToController&&angular.extend(r,e),e[s.controllerAs]=r)),a.open(p,{scope:e,deferred:u,renderDeferred:d,content:t[0],animation:s.animation,backdrop:s.backdrop,keyboard:s.keyboard,backdropClass:s.backdropClass,windowClass:s.windowClass,windowTemplateUrl:s.windowTemplateUrl,size:s.size,openedClass:s.openedClass}),c.resolve(!0)},function(t){c.reject(t),u.reject(t)}).finally(function(){l===m&&(l=null)}),p},s}]};return t}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(t,e,n){var r=this,i={$setViewValue:angular.noop},o=e.numPages?n(e.numPages).assign:angular.noop;this.init=function(a,s){i=a,this.config=s,i.$render=function(){r.render()},e.itemsPerPage?t.$parent.$watch(n(e.itemsPerPage),function(e){r.itemsPerPage=parseInt(e,10),t.totalPages=r.calculateTotalPages()}):this.itemsPerPage=s.itemsPerPage,t.$watch("totalItems",function(){t.totalPages=r.calculateTotalPages()}),t.$watch("totalPages",function(e){o(t.$parent,e),t.page>e?t.selectPage(e):i.$render()})},this.calculateTotalPages=function(){var e=this.itemsPerPage<1?1:Math.ceil(t.totalItems/this.itemsPerPage);return Math.max(e||0,1)},this.render=function(){t.page=parseInt(i.$viewValue,10)||1},t.selectPage=function(e,n){n&&n.preventDefault(),(!t.ngDisabled||!n)&&t.page!==e&&e>0&&e<=t.totalPages&&(n&&n.target&&n.target.blur(),i.$setViewValue(e),i.$render())},t.getText=function(e){return t[e+"Text"]||r.config[e+"Text"]},t.noPrevious=function(){return 1===t.page},t.noNext=function(){return t.page===t.totalPages}}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(t,e){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["pagination","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(t,e){return e.templateUrl||"template/pagination/pagination.html"},replace:!0,link:function(n,r,i,o){var a=o[0],s=o[1];if(s){var l=angular.isDefined(i.maxSize)?n.$parent.$eval(i.maxSize):e.maxSize,u=angular.isDefined(i.rotate)?n.$parent.$eval(i.rotate):e.rotate;n.boundaryLinks=angular.isDefined(i.boundaryLinks)?n.$parent.$eval(i.boundaryLinks):e.boundaryLinks,n.directionLinks=angular.isDefined(i.directionLinks)?n.$parent.$eval(i.directionLinks):e.directionLinks,a.init(s,e),i.maxSize&&n.$parent.$watch(t(i.maxSize),function(t){l=parseInt(t,10),a.render()});var c=a.render;a.render=function(){c(),n.page>0&&n.page<=n.totalPages&&(n.pages=function(t,e){var n=[],r=1,i=e,o=angular.isDefined(l)&&l<e;o&&(u?(i=(r=Math.max(t-Math.floor(l/2),1))+l-1)>e&&(r=(i=e)-l+1):(r=(Math.ceil(t/l)-1)*l+1,i=Math.min(r+l-1,e)));for(var a=r;a<=i;a++){var s=d(a,a,a===t);n.push(s)}if(o&&!u){if(r>1){var c=d(r-1,"...",!1);n.unshift(c)}if(i<e){var p=d(i+1,"...",!1);n.push(p)}}return n}(n.page,n.totalPages))}}function d(t,e,n){return{number:t,text:e,active:n}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"\xab Previous",nextText:"Next \xbb",align:!0}).directive("pager",["pagerConfig",function(t){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["pager","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(t,e){return e.templateUrl||"template/pagination/pager.html"},replace:!0,link:function(e,n,r,i){var o=i[0],a=i[1];a&&(e.align=angular.isDefined(r.align)?e.$parent.$eval(r.align):t.align,o.init(a,t))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){var t={placement:"top",animation:!0,popupDelay:0,useContentExp:!1},e={mouseenter:"mouseleave",click:"click",focus:"blur",none:""},n={};this.options=function(t){angular.extend(n,t)},this.setTriggers=function(t){angular.extend(e,t)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate","$rootScope","$parse",function(r,i,o,a,s,l,u,c){return function(r,d,p,f){function h(t){var n=(t||f.trigger||p).split(" "),r=n.map(function(t){return e[t]||t});return{show:n,hide:r}}f=angular.extend({},t,n,f);var m=r.replace(/[A-Z]/g,function(t,e){return(e?"-":"")+t.toLowerCase()}),g=l.startSymbol(),v=l.endSymbol(),b="<div "+m+'-popup title="'+g+"title"+v+'" '+(f.useContentExp?'content-exp="contentExp()" ':'content="'+g+"content"+v+'" ')+'placement="'+g+"placement"+v+'" popup-class="'+g+"popupClass"+v+'" animation="animation" is-open="isOpen"origin-scope="origScope" ></div>';return{restrict:"EA",compile:function(t,e){var n=i(b);return function(t,e,i,l){var p,m,g,v,b,y=!!angular.isDefined(f.appendToBody)&&f.appendToBody,w=h(void 0),k=angular.isDefined(i[d+"Enable"]),_=t.$new(!0),x=!1,S=!!angular.isDefined(i[d+"IsOpen"])&&c(i[d+"IsOpen"]),$=function(){p&&(b||(b=o(function(){p.css({top:0,left:0,width:"auto",height:"auto"});var t=s.position(p),n=s.positionElements(e,p,_.placement,y);n.top+="px",n.left+="px",n.width=t.width+"px",n.height=t.height+"px",p.css(n),b=null},0,!1)))};function T(){_.isOpen?E():C()}function C(){var e;k&&!t.$eval(i[d+"Enable"])||(_.popupClass=i[d+"Class"],O(),e=parseInt(i[d+"PopupDelay"],10),_.popupDelay=isNaN(e)?f.popupDelay:e,_.popupDelay?v||(v=o(A,_.popupDelay,!1)):A())}function E(){D(),u.$$phase||u.$digest()}function A(){if(v=null,g&&(o.cancel(g),g=null),!(f.useContentExp?_.contentExp():_.content))return angular.noop;p&&P(),m=_.$new(),p=n(m,function(t){y?a.find("body").append(t):e.after(t)}),f.useContentExp&&(m.$watch("contentExp()",function(t){!t&&_.isOpen&&D()}),m.$watch(function(){x||(x=!0,m.$$postDigest(function(){x=!1,_.isOpen&&$()}))})),_.isOpen=!0,S&&S.assign(_.origScope,_.isOpen),u.$$phase||_.$apply(),p.css({display:"block"}),$()}function D(){_.isOpen=!1,S&&S.assign(_.origScope,_.isOpen),o.cancel(v),v=null,o.cancel(b),b=null,_.animation?g||(g=o(P,500)):P()}function P(){g=null,p&&(p.remove(),p=null),m&&(m.$destroy(),m=null)}function O(){var t=i[d+"Placement"];_.placement=angular.isDefined(t)?t:f.placement}_.origScope=t,_.isOpen=!1,_.contentExp=function(){return t.$eval(i[r])},f.useContentExp||i.$observe(r,function(t){_.content=t,!t&&_.isOpen?D():$()}),i.$observe("disabled",function(t){v&&t&&(o.cancel(v),v=null),t&&_.isOpen&&D()}),i.$observe(d+"Title",function(t){_.title=t,$()}),i.$observe(d+"Placement",function(){_.isOpen&&(O(),$())}),S&&t.$watch(S,function(t){t!==_.isOpen&&T()});var M,R=function(){w.show.forEach(function(t){e.unbind(t,C)}),w.hide.forEach(function(t){e.unbind(t,E)})};M=i[d+"Trigger"],R(),"none"!==(w=h(M)).show&&w.show.forEach(function(t,n){t===w.hide[n]?e[0].addEventListener(t,T):t&&(e[0].addEventListener(t,C),e[0].addEventListener(w.hide[n],E))});var j=t.$eval(i[d+"Animation"]);_.animation=angular.isDefined(j)?!!j:f.animation;var I=t.$eval(i[d+"AppendToBody"]);(y=angular.isDefined(I)?I:y)&&t.$on("$locationChangeSuccess",function(){_.isOpen&&D()}),t.$on("$destroy",function(){o.cancel(g),o.cancel(v),o.cancel(b),R(),P(),_=null})}}}}}]}).directive("tooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(t,e,n,r){return{link:function(i,o,a){var s,l,u,c=i.$eval(a.tooltipTemplateTranscludeScope),d=0,p=function(){l&&(l.remove(),l=null),s&&(s.$destroy(),s=null),u&&(t.leave(u).then(function(){l=null}),l=u,u=null)};i.$watch(e.parseAsResourceUrl(a.tooltipTemplateTransclude),function(e){var a=++d;e?(r(e,!0).then(function(r){if(a===d){var i=c.$new(),l=n(r)(i,function(e){p(),t.enter(e,o)});u=l,(s=i).$emit("$includeContentLoaded",e)}},function(){a===d&&(p(),i.$emit("$includeContentError",e))}),i.$emit("$includeContentRequested",e)):p()}),i.$on("$destroy",p)}}}]).directive("tooltipClasses",function(){return{restrict:"A",link:function(t,e,n){t.placement&&e.addClass(t.placement),t.popupClass&&e.addClass(t.popupClass),t.animation()&&e.addClass(n.tooltipAnimationClass)}}}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(t){return t("tooltip","tooltip","mouseenter")}]).directive("tooltipTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html"}}).directive("tooltipTemplate",["$tooltip",function(t){return t("tooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlPopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html"}}).directive("tooltipHtml",["$tooltip",function(t){return t("tooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).value("tooltipHtmlUnsafeSuppressDeprecated",!1).directive("tooltipHtmlUnsafe",["$tooltip","tooltipHtmlUnsafeSuppressDeprecated","$log",function(t,e,n){return e||n.warn("tooltip-html-unsafe is now deprecated. Use tooltip-html or tooltip-template instead."),t("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html"}}).directive("popoverTemplate",["$tooltip",function(t){return t("popoverTemplate","popover","click",{useContentExp:!0})}]).directive("popoverHtmlPopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover-html.html"}}).directive("popoverHtml",["$tooltip",function(t){return t("popoverHtml","popover","click",{useContentExp:!0})}]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(t){return t("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).value("$progressSuppressWarning",!1).controller("ProgressController",["$scope","$attrs","progressConfig",function(t,e,n){var r=this,i=angular.isDefined(e.animate)?t.$parent.$eval(e.animate):n.animate;this.bars=[],t.max=angular.isDefined(t.max)?t.max:n.max,this.addBar=function(e,n){i||n.css({transition:"none"}),this.bars.push(e),e.max=t.max,e.$watch("value",function(t){e.recalculatePercentage()}),e.recalculatePercentage=function(){e.percent=+(100*e.value/e.max).toFixed(2);var t=r.bars.reduce(function(t,e){return t+e.percent},0);t>100&&(e.percent-=t-100)},e.$on("$destroy",function(){n=null,r.removeBar(e)})},this.removeBar=function(t){this.bars.splice(this.bars.indexOf(t),1)},t.$watch("max",function(e){r.bars.forEach(function(e){e.max=t.max,e.recalculatePercentage()})})}]).directive("uibProgress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"uibProgress",scope:{max:"=?"},templateUrl:"template/progressbar/progress.html"}}).directive("progress",["$log","$progressSuppressWarning",function(t,e){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{max:"=?"},templateUrl:"template/progressbar/progress.html",link:function(){e&&t.warn("progress is now deprecated. Use uib-progress instead")}}}]).directive("uibBar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(t,e,n,r){r.addBar(t,e)}}}).directive("bar",["$log","$progressSuppressWarning",function(t,e){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(n,r,i,o){e&&t.warn("bar is now deprecated. Use uib-bar instead"),o.addBar(n,r)}}}]).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(t,e,n,r){r.addBar(t,angular.element(e.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("RatingController",["$scope","$attrs","ratingConfig",function(t,e,n){var r={$setViewValue:angular.noop};this.init=function(i){(r=i).$render=this.render,r.$formatters.push(function(t){return angular.isNumber(t)&&t<<0!==t&&(t=Math.round(t)),t}),this.stateOn=angular.isDefined(e.stateOn)?t.$parent.$eval(e.stateOn):n.stateOn,this.stateOff=angular.isDefined(e.stateOff)?t.$parent.$eval(e.stateOff):n.stateOff;var o=angular.isDefined(e.titles)?t.$parent.$eval(e.titles):n.titles;this.titles=angular.isArray(o)&&o.length>0?o:n.titles;var a=angular.isDefined(e.ratingStates)?t.$parent.$eval(e.ratingStates):new Array(angular.isDefined(e.max)?t.$parent.$eval(e.max):n.max);t.range=this.buildTemplateObjects(a)},this.buildTemplateObjects=function(t){for(var e=0,n=t.length;e<n;e++)t[e]=angular.extend({index:e},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(e)},t[e]);return t},this.getTitle=function(t){return t>=this.titles.length?t+1:this.titles[t]},t.rate=function(e){!t.readonly&&e>=0&&e<=t.range.length&&(r.$setViewValue(r.$viewValue===e?0:e),r.$render())},t.enter=function(e){t.readonly||(t.value=e),t.onHover({value:e})},t.reset=function(){t.value=r.$viewValue,t.onLeave()},t.onKeydown=function(e){/(37|38|39|40)/.test(e.which)&&(e.preventDefault(),e.stopPropagation(),t.rate(t.value+(38===e.which||39===e.which?1:-1)))},this.render=function(){t.value=r.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(t,e,n,r){r[0].init(r[1])}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(t){var e,n=this,r=n.tabs=t.tabs=[];n.select=function(t){angular.forEach(r,function(e){e.active&&e!==t&&(e.active=!1,e.onDeselect(),t.selectCalled=!1)}),t.active=!0,t.selectCalled||(t.onSelect(),t.selectCalled=!0)},n.addTab=function(t){r.push(t),1===r.length&&!1!==t.active?t.active=!0:t.active?n.select(t):t.active=!1},n.removeTab=function(t){var i=r.indexOf(t);t.active&&r.length>1&&!e&&n.select(r[i==r.length-1?i-1:i+1]),r.splice(i,1)},t.$on("$destroy",function(){e=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(t,e,n){t.vertical=!!angular.isDefined(n.vertical)&&t.$parent.$eval(n.vertical),t.justified=!!angular.isDefined(n.justified)&&t.$parent.$eval(n.justified)}}}).directive("tab",["$parse","$log",function(t,e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(n,r,i,o,a){n.$watch("active",function(t){t&&o.select(n)}),n.disabled=!1,i.disable&&n.$parent.$watch(t(i.disable),function(t){n.disabled=!!t}),i.disabled&&(e.warn('Use of "disabled" attribute has been deprecated, please use "disable"'),n.$parent.$watch(t(i.disabled),function(t){n.disabled=!!t})),n.select=function(){n.disabled||(n.active=!0)},o.addTab(n),n.$on("$destroy",function(){o.removeTab(n)}),n.$transcludeFn=a}}}]).directive("tabHeadingTransclude",function(){return{restrict:"A",require:"^tab",link:function(t,e,n,r){t.$watch("headingElement",function(t){t&&(e.html(""),e.append(t))})}}}).directive("tabContentTransclude",function(){return{restrict:"A",require:"^tabset",link:function(t,e,n){var r=t.$eval(n.tabContentTransclude);r.$transcludeFn(r.$parent,function(t){angular.forEach(t,function(t){!function(t){return t.tagName&&(t.hasAttribute("tab-heading")||t.hasAttribute("data-tab-heading")||t.hasAttribute("x-tab-heading")||"tab-heading"===t.tagName.toLowerCase()||"data-tab-heading"===t.tagName.toLowerCase()||"x-tab-heading"===t.tagName.toLowerCase())}(t)?e.append(t):r.headingElement=t})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(t,e,n,r,i,o){var a=new Date,s={$setViewValue:angular.noop},l=angular.isDefined(e.meridians)?t.$parent.$eval(e.meridians):o.meridians||i.DATETIME_FORMATS.AMPMS;this.init=function(n,r){(s=n).$render=this.render,s.$formatters.unshift(function(t){return t?new Date(t):null});var i=r.eq(0),a=r.eq(1);(angular.isDefined(e.mousewheel)?t.$parent.$eval(e.mousewheel):o.mousewheel)&&this.setupMousewheelEvents(i,a),(angular.isDefined(e.arrowkeys)?t.$parent.$eval(e.arrowkeys):o.arrowkeys)&&this.setupArrowkeyEvents(i,a),t.readonlyInput=angular.isDefined(e.readonlyInput)?t.$parent.$eval(e.readonlyInput):o.readonlyInput,this.setupInputEvents(i,a)};var u=o.hourStep;e.hourStep&&t.$parent.$watch(n(e.hourStep),function(t){u=parseInt(t,10)});var c,d,p=o.minuteStep;function f(){var e=parseInt(t.hours,10);if(t.showMeridian?e>0&&e<13:e>=0&&e<24)return t.showMeridian&&(12===e&&(e=0),t.meridian===l[1]&&(e+=12)),e}function h(){var e=parseInt(t.minutes,10);return e>=0&&e<60?e:void 0}function m(t){return angular.isDefined(t)&&t.toString().length<2?"0"+t:t.toString()}function g(t){v(),s.$setViewValue(new Date(a)),b(t)}function v(){s.$setValidity("time",!0),t.invalidHours=!1,t.invalidMinutes=!1}function b(e){var n=a.getHours(),r=a.getMinutes();t.showMeridian&&(n=0===n||12===n?12:n%12),t.hours="h"===e?n:m(n),"m"!==e&&(t.minutes=m(r)),t.meridian=a.getHours()<12?l[0]:l[1]}function y(t,e){var n=new Date(t.getTime()+6e4*e),r=new Date(t);return r.setHours(n.getHours(),n.getMinutes()),r}function w(t){a=y(a,t),g()}e.minuteStep&&t.$parent.$watch(n(e.minuteStep),function(t){p=parseInt(t,10)}),t.$parent.$watch(n(e.min),function(t){var e=new Date(t);c=isNaN(e)?void 0:e}),t.$parent.$watch(n(e.max),function(t){var e=new Date(t);d=isNaN(e)?void 0:e}),t.noIncrementHours=function(){var t=y(a,60*u);return t>d||t<a&&t<c},t.noDecrementHours=function(){var t=y(a,60*-u);return t<c||t>a&&t>d},t.noIncrementMinutes=function(){var t=y(a,p);return t>d||t<a&&t<c},t.noDecrementMinutes=function(){var t=y(a,-p);return t<c||t>a&&t>d},t.noToggleMeridian=function(){return a.getHours()<13?y(a,720)>d:y(a,-720)<c},t.showMeridian=o.showMeridian,e.showMeridian&&t.$parent.$watch(n(e.showMeridian),function(e){if(t.showMeridian=!!e,s.$error.time){var n=f(),r=h();angular.isDefined(n)&&angular.isDefined(r)&&(a.setHours(n),g())}else b()}),this.setupMousewheelEvents=function(e,n){var r=function(t){return t.originalEvent&&(t=t.originalEvent),t.detail||(t.wheelDelta?t.wheelDelta:-t.deltaY)>0};e.bind("mousewheel wheel",function(e){t.$apply(r(e)?t.incrementHours():t.decrementHours()),e.preventDefault()}),n.bind("mousewheel wheel",function(e){t.$apply(r(e)?t.incrementMinutes():t.decrementMinutes()),e.preventDefault()})},this.setupArrowkeyEvents=function(e,n){e.bind("keydown",function(e){38===e.which?(e.preventDefault(),t.incrementHours(),t.$apply()):40===e.which&&(e.preventDefault(),t.decrementHours(),t.$apply())}),n.bind("keydown",function(e){38===e.which?(e.preventDefault(),t.incrementMinutes(),t.$apply()):40===e.which&&(e.preventDefault(),t.decrementMinutes(),t.$apply())})},this.setupInputEvents=function(e,n){if(t.readonlyInput)return t.updateHours=angular.noop,void(t.updateMinutes=angular.noop);var r=function(e,n){s.$setViewValue(null),s.$setValidity("time",!1),angular.isDefined(e)&&(t.invalidHours=e),angular.isDefined(n)&&(t.invalidMinutes=n)};t.updateHours=function(){var t=f(),e=h();angular.isDefined(t)&&angular.isDefined(e)?(a.setHours(t),a<c||a>d?r(!0):g("h")):r(!0)},e.bind("blur",function(e){!t.invalidHours&&t.hours<10&&t.$apply(function(){t.hours=m(t.hours)})}),t.updateMinutes=function(){var t=h(),e=f();angular.isDefined(t)&&angular.isDefined(e)?(a.setMinutes(t),a<c||a>d?r(void 0,!0):g("m")):r(void 0,!0)},n.bind("blur",function(e){!t.invalidMinutes&&t.minutes<10&&t.$apply(function(){t.minutes=m(t.minutes)})})},this.render=function(){var e=s.$viewValue;isNaN(e)?(s.$setValidity("time",!1),r.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(a=e),a<c||a>d?(s.$setValidity("time",!1),t.invalidHours=!0,t.invalidMinutes=!0):v(),b())},t.showSpinners=angular.isDefined(e.showSpinners)?t.$parent.$eval(e.showSpinners):o.showSpinners,t.incrementHours=function(){t.noIncrementHours()||w(60*u)},t.decrementHours=function(){t.noDecrementHours()||w(60*-u)},t.incrementMinutes=function(){t.noIncrementMinutes()||w(p)},t.decrementMinutes=function(){t.noDecrementMinutes()||w(-p)},t.toggleMeridian=function(){t.noToggleMeridian()||w(720*(a.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(t,e){return e.templateUrl||"template/timepicker/timepicker.html"},link:function(t,e,n,r){var i=r[1];i&&r[0].init(i,e.find("input"))}}}),angular.module("ui.bootstrap.transition",[]).value("$transitionSuppressDeprecated",!1).factory("$transition",["$q","$timeout","$rootScope","$log","$transitionSuppressDeprecated",function(t,e,n,r,i){i||r.warn("$transition is now deprecated. Use $animate from ngAnimate instead.");var o=function(r,i,a){a=a||{};var s=t.defer(),l=o[a.animation?"animationEndEventName":"transitionEndEventName"],u=function(t){n.$apply(function(){r.unbind(l,u),s.resolve(r)})};return l&&r.bind(l,u),e(function(){angular.isString(i)?r.addClass(i):angular.isFunction(i)?i(r):angular.isObject(i)&&r.css(i),l||s.resolve(r)}),s.promise.cancel=function(){l&&r.unbind(l,u),s.reject("Transition cancelled")},s.promise},a=document.createElement("trans");function s(t){for(var e in t)if(void 0!==a.style[e])return t[e]}return o.transitionEndEventName=s({WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}),o.animationEndEventName=s({WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"}),o}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("typeaheadParser",["$parse",function(t){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var r=n.match(e);if(!r)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:r[3],source:t(r[4]),viewMapper:t(r[2]||r[1]),modelMapper:t(r[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$window","$rootScope","$position","typeaheadParser",function(t,e,n,r,i,o,a,s,l){var u=[9,13,27,38,40],c=200;return{require:["ngModel","^?ngModelOptions"],link:function(d,p,f,h){var m=h[0],g=h[1],v=d.$eval(f.typeaheadMinLength);v||0===v||(v=1);var b,y,w=d.$eval(f.typeaheadWaitMs)||0,k=!1!==d.$eval(f.typeaheadEditable),_=e(f.typeaheadLoading).assign||angular.noop,x=e(f.typeaheadOnSelect),S=!!angular.isDefined(f.typeaheadSelectOnBlur)&&d.$eval(f.typeaheadSelectOnBlur),$=e(f.typeaheadNoResults).assign||angular.noop,T=f.typeaheadInputFormatter?e(f.typeaheadInputFormatter):void 0,C=!!f.typeaheadAppendToBody&&d.$eval(f.typeaheadAppendToBody),E=!1!==d.$eval(f.typeaheadFocusFirst),A=!!f.typeaheadSelectOnExact&&d.$eval(f.typeaheadSelectOnExact),D=e(f.ngModel),P=e(f.ngModel+"($$$p)"),O=l.parse(f.typeahead),M=d.$new(),R=d.$on("$destroy",function(){M.$destroy()});M.$on("$destroy",R);var j="typeahead-"+M.$id+"-"+Math.floor(1e4*Math.random());p.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":j});var I=angular.element("<div typeahead-popup></div>");I.attr({id:j,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(f.typeaheadTemplateUrl)&&I.attr("template-url",f.typeaheadTemplateUrl),angular.isDefined(f.typeaheadPopupTemplateUrl)&&I.attr("popup-template-url",f.typeaheadPopupTemplateUrl);var N=function(){M.matches=[],M.activeIdx=-1,p.attr("aria-expanded",!1)},F=function(t){return j+"-option-"+t};M.$watch("activeIdx",function(t){t<0?p.removeAttr("aria-activedescendant"):p.attr("aria-activedescendant",F(t))});var U,L,V=function(t){var e={$viewValue:t};_(d,!0),$(d,!1),n.when(O.source(d,e)).then(function(n){var r=t===m.$viewValue;if(r&&b)if(n&&n.length>0){M.activeIdx=E?0:-1,$(d,!1),M.matches.length=0;for(var i=0;i<n.length;i++)e[O.itemName]=n[i],M.matches.push({id:F(i),label:O.viewMapper(M,e),model:n[i]});M.query=t,H(),p.attr("aria-expanded",!0),A&&1===M.matches.length&&function(t,e){return!!(M.matches.length>0&&t)&&t.toUpperCase()===M.matches[0].label.toUpperCase()}(t)&&M.select(0)}else N(),$(d,!0);r&&_(d,!1)},function(){N(),_(d,!1),$(d,!0)})};function B(){M.moveInProgress||(M.moveInProgress=!0,M.$digest()),U&&r.cancel(U),U=r(function(){M.matches.length&&H(),M.moveInProgress=!1,M.$digest()},c)}function H(){M.position=C?s.offset(p):s.position(p),M.position.top+=p.prop("offsetHeight")}C&&(angular.element(o).bind("resize",B),i.find("body").bind("scroll",B)),M.moveInProgress=!1,N(),M.query=void 0;var q=function(){L&&r.cancel(L)};m.$parsers.unshift(function(t){return b=!0,0===v||t&&t.length>=v?w>0?(q(),function(t){L=r(function(){V(t)},w)}(t)):V(t):(_(d,!1),q(),N()),k?t:t?void m.$setValidity("editable",!1):(m.$setValidity("editable",!0),null)}),m.$formatters.push(function(t){var e,n={};return k||m.$setValidity("editable",!0),T?(n.$model=t,T(d,n)):(n[O.itemName]=t,e=O.viewMapper(d,n),n[O.itemName]=void 0,e!==O.viewMapper(d,n)?e:t)}),M.select=function(t){var e,n,i={};y=!0,i[O.itemName]=n=M.matches[t].model,e=O.modelMapper(d,i),function(t,e){angular.isFunction(D(d))&&g&&g.$options&&g.$options.getterSetter?P(t,{$$$p:e}):D.assign(t,e)}(d,e),m.$setValidity("editable",!0),m.$setValidity("parse",!0),x(d,{$item:n,$model:e,$label:O.viewMapper(d,i)}),N(),!1!==M.$eval(f.typeaheadFocusOnSelect)&&r(function(){p[0].focus()},0,!1)},p.bind("keydown",function(t){if(0!==M.matches.length&&-1!==u.indexOf(t.which)){if(-1===M.activeIdx&&(9===t.which||13===t.which))return N(),void M.$digest();t.preventDefault(),40===t.which?(M.activeIdx=(M.activeIdx+1)%M.matches.length,M.$digest()):38===t.which?(M.activeIdx=(M.activeIdx>0?M.activeIdx:M.matches.length)-1,M.$digest()):13===t.which||9===t.which?M.$apply(function(){M.select(M.activeIdx)}):27===t.which&&(t.stopPropagation(),N(),M.$digest())}}),p.bind("blur",function(){S&&M.matches.length&&-1!==M.activeIdx&&!y&&(y=!0,M.$apply(function(){M.select(M.activeIdx)})),b=!1,y=!1});var z=function(t){p[0]!==t.target&&3!==t.which&&0!==M.matches.length&&(N(),a.$$phase||M.$digest())};i.bind("click",z),d.$on("$destroy",function(){i.unbind("click",z),C&&G.remove(),I.remove()});var G=t(I)(M);C?i.find("body").append(G):p.after(G)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(t,e){return e.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(t,e,n){t.templateUrl=n.templateUrl,t.isOpen=function(){return t.matches.length>0},t.isActive=function(e){return t.active==e},t.selectActive=function(e){t.active=e},t.selectMatch=function(e){t.select({activeIdx:e})}}}}).directive("typeaheadMatch",["$templateRequest","$compile","$parse",function(t,e,n){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(r,i,o){var a=n(o.templateUrl)(r.$parent)||"template/typeahead/typeahead-match.html";t(a).then(function(t){e(t.trim())(r,function(t){i.replaceWith(t)})})}}}]).filter("typeaheadHighlight",["$sce","$injector","$log",function(t,e,n){var r;return r=e.has("$sanitize"),function(e,i){return!r&&function(t){return/<.*>/g.test(t)}(e)&&n.warn("Unsafe use of typeahead please use ngSanitize"),e=i?(""+e).replace(new RegExp(i.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),"<strong>$&</strong>"):e,r||(e=t.trustAsHtml(e)),e}}]),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(t){t.put("template/accordion/accordion-group.html",'<div class="panel {{panelClass || \'panel-default\'}}">\n  <div class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <a href tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" collapse="!isOpen">\n\t  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(t){t.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(t){t.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close($event)">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(t){t.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(t){t.put("template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(t){t.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(t){t.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(t){t.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(t){t.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-if="isOpen" style="display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n\t<li ng-transclude></li>\n\t<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n\t\t<span class="btn-group pull-left">\n\t\t\t<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n\t\t\t<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n\t\t</span>\n\t\t<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n\t</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(t){t.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(t){t.put("template/modal/backdrop.html",'<div class="modal-backdrop"\n     modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(t){t.put("template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    modal-animation-class="fade"\n    modal-in-class="in"\n\tng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" modal-transclude></div></div>\n</div>\n')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(t){t.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(t){t.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(t){t.put("template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(t){t.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(t){t.put("template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(t){t.put("template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("template/popover/popover-html.html",[]).run(["$templateCache",function(t){t.put("template/popover/popover-html.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover-template.html",[]).run(["$templateCache",function(t){t.put("template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(t){t.put("template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(t){t.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" style="min-width: 0;" ng-transclude></div>\n')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(t){t.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(t){t.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" style="min-width: 0;" ng-transclude></div>\n</div>\n')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(t){t.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}" ></i>\n</span>\n')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(t){t.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(t){t.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(t){t.put("template/timepicker/timepicker.html",'<table>\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group" ng-class="{\'has-error\': invalidHours}">\n        <input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2">\n      </td>\n      <td>:</td>\n      <td class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n        <input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2">\n      </td>\n      <td ng-show="showMeridian"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(t){t.put("template/typeahead/typeahead-match.html",'<a href tabindex="-1" ng-bind-html="match.label | typeaheadHighlight:query"></a>\n')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(t){t.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>')},D0Uj:function(t,e){angular.module("doubtfire.groups",["doubtfire.groups.group-member-contribution-assigner","doubtfire.groups.group-member-list","doubtfire.groups.group-selector","doubtfire.groups.group-set-manager","doubtfire.groups.group-set-selector","doubtfire.groups.student-group-manager","doubtfire.groups.tutor-group-manager"])},D1nA:function(t,e){angular.module("doubtfire.projects.states.dashboard.directives.task-dashboard.directives",["doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-description-card","doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-status-card","doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-assessment-card","doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-submission-card","doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-due-card","doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-outcomes-card","doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-plagiarism-card"])},DDRc:function(t,e){angular.module("doubtfire.units.states.tasks.definition",["doubtfire.units.states.tasks.inbox.directives"]).config(function(t){return t.state("units/tasks/definition",{parent:"units/tasks",url:"/definition/{taskKey:any}",templateUrl:"units/states/tasks/inbox/inbox.tpl.html",controller:"TaskDefinitionStateCtrl",data:{task:"Mark by Task Definition",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin"]}})}).controller("TaskDefinitionStateCtrl",function(t,e){var n;return t.taskData.source=e.tasksForDefinition,t.showSearchOptions=!0,t.filters={taskDefinitionIdSelected:null!=(n=_.first(t.unit.task_definitions))?n.id:void 0}})},DNp5:function(t,e){angular.module("doubtfire.common.alert-list",[]).directive("alertList",function(){return{restrict:"E",templateUrl:"common/alert-list/alert-list.tpl.html",replace:!0,controller:function(t){}}})},DXtn:function(t,e){var n=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("doubtfire.common.services.projects",[]).factory("projectService",function(t,e,r,i,o,a,s,l,u){var c,d,p;return c=function(t){return null==t.teachingPeriod&&(t._teachingPeriod=null,t.teachingPeriod=function(){return null!=t.teaching_period_id&&null==t._teachingPeriod&&(t._teachingPeriod=u.getTeachingPeriod(t.teaching_period_id)),t._teachingPeriod}),t},p=function(t,e){var n,r,i,o,a;for(r=0,i=(a=["weeks","days","hours","minutes","seconds"]).length;r<i;r++){if((n=e.diff(t,o=a[r]))>1)return n+" "+(o.charAt(0).toUpperCase()+o.substr(1));if(1===n)return"1 "+(o.charAt(0).toUpperCase()+o.substr(1,o.length-2))}return e.diff(t,"seconds")},(d={}).loadedProjects=null,i.$on("signOut",function(){return d.loadedProjects=null}),d.getProjects=function(t,e){var n;return n=function(){var n;if(n=t?d.loadedProjects:_.filter(d.loadedProjects,function(t){return t.active}),_.isFunction(e))return e(n)},null==d.loadedProjects?r.query({include_inactive:!0},function(t){return d.loadedProjects=_.map(t,function(t){return c(t)}),n()},function(t){if(419!==(null!=t?t.status:void 0))return o.add("danger","Failed to connect to Doubtfire server. "+(null==t?t.error:""),6e3)}):n()},d.updateProject=function(t,e,n,i){return e=_.extend({id:t},e),r.update(e,function(t){return"function"==typeof n?n(t):void 0},function(t){return"function"==typeof i?i(t):void 0})},d.mapTask=function(t,r,i){var o,s;if(s=r.taskDef(t.task_definition_id),null!=(o=i.findTaskForDefinition(s.id))){if(_.extend(o,t),null!=o.definition)return o;t=o}return t.definition=s,t.project=function(){return i},t.unit=i.unit,t.status_txt=function(){return e.statusLabels[t.status]},t.statusSeq=function(){return e.statusSeq[t.status]},t.canReuploadEvidence=function(){return t.inSubmittedState()},t.requiresFileUpload=function(){return t.definition.upload_requirements.length>0},t.plagiarismDetected=function(){return e.plagiarismDetected(t)},t.isGroupTask=function(){return e.isGroupTask(t)},t.studentInAGroup=function(){return null!=t.group()},t.group=function(){return d.getGroupForTask(t.project(),t)},t.addComment=function(n,r,i){return e.addComment(t,n,r,i)},t.applyForExtension=function(n,r){return e.applyForExtension(t,n,r)},t.staffAlignments=function(){return e.staffAlignmentsForTask(t)},t.timeToDue=function(){var e;return t.daysUntilTargetDate()<0?"":(e=t.daysUntilTargetDate())<7?e+"d":Math.floor(e/7)+"w"},t.localDueDate=function(){var e;return null!=t.due_date?(e=new Date(t.due_date),new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59)):null},t.targetDate=function(){return null!=t.due_date?t.localDueDate():t.definition.localTargetDate()},t.startDate=function(){return null!=t.start_date?t.start_date:t.definition.start_date},t.isToBeCompletedSoon=function(){return t.daysUntilTargetDate()<=7&&t.timePastTargetDate()<0&&!t.inSubmittedState()},t.isDueSoon=function(){return t.daysUntilDueDate()<=14&&t.timePastDueDate()<0&&!t.inFinalState()},t.isOverdue=function(){return t.timePastDueDate()>0&&n.call(e.overdueStates,t.status)>=0},t.isPastTargetDate=function(){return t.timePastTargetDate()>0&&!t.inSubmittedState()},t.isDueToday=function(){return 0===t.daysUntilDueDate()&&!t.inSubmittedState()},t.daysPastDueDate=function(){return e.daysPastDueDate(t)},t.daysPastTargetDate=function(){return e.daysPastTargetDate(t)},t.timePastTargetDate=function(){return e.timePastTargetDate(t)},t.timePastDueDate=function(){return e.timePastDueDate(t)},t.daysUntilDueDate=function(){return e.daysUntilDueDate(t)},t.daysUntilTargetDate=function(){return e.daysUntilTargetDate(t)},t.timeUntilStartDate=function(){return moment(t.startDate()).diff(moment())},t.daysUntilStartDate=function(){return moment(t.startDate()).diff(moment(),"days")},t.isBeforeStartDate=function(){return t.timeUntilStartDate()>0},t.timeToStart=function(){var e;return t.daysUntilStartDate()<0?"":(e=t.daysUntilStartDate())<7?e+"d":Math.floor(e/7)+"w"},t.timeUntilDeadlineDescription=function(){return p(moment(),moment(t.definition.localDueDate()))},t.timeUntilTargetDescription=function(){return p(moment(),moment(t.targetDate()))},t.timePastDeadlineDescription=function(){return p(moment(t.definition.localDueDate()),moment())},t.timePastTargetDescription=function(){return p(moment(t.targetDate()),moment())},t.inFinalState=function(){return n.call(e.finalStatuses,t.status)>=0},t.inTerminalState=function(){return n.call(e.terminalStatuses,t.status)>=0},t.inSubmittedState=function(){return n.call(e.submittedStatuses,t.status)>=0},t.inDiscussState=function(){return n.call(e.discussionStatuses,t.status)>=0},t.triggerTransition=function(n,r){return e.triggerTransition(t,n,r)},t.updateTaskStatus=function(e,n){return t.status=e,t.project().updateTaskStats(n)},t.needsSubmissionDetails=function(){return null==t.has_pdf},t.statusClass=function(){return e.statusData(t.status).class},t.statusIcon=function(){return e.statusData(t.status).icon},t.statusLabel=function(){return e.statusData(t.status).label},t.statusHelp=function(){return e.statusData(t.status).help},t.taskKey=function(){return e.taskKey(t)},t.recreateSubmissionPdf=function(n,r){return e.recreateSubmissionPdf(t,n,r)},t.taskKeyToUrlString=function(){return e.taskKeyToUrlString(t)},t.taskKeyToIdString=function(){return e.taskKeyToIdString(t)},t.taskKeyFromString=function(t){return e.taskKeyFromString(t)},t.hasTaskKey=function(n){return e.hasTaskKey(t,n)},t.filterFutureStates=function(r){return _.reject(r,function(r){return n.call(e.rejectFutureStates[t.status],r.status)>=0})},t.gradeDesc=function(){return l.gradeAcronyms[t.grade]},t.hasGrade=function(){return null!=t.grade},t.hasQualityPoints=function(){return t.definition.max_quality_pts>0&&n.call(e.gradeableStatuses,t.status)>=0},t.getSubmissionDetails=function(e,n){return t.needsSubmissionDetails()?a.SubmissionDetails.get({id:i.project_id,task_definition_id:t.definition.id},function(n){return t.has_pdf=n.has_pdf,t.processing_pdf=n.processing_pdf,t.submission_date=n.submission_date,"function"==typeof e?e(t):void 0},function(t){return"function"==typeof n?n(t):void 0}):"function"==typeof e?e(t):void 0},t},d.addTaskDetailsToProject=function(t,e){var n;return(null==t.tasks||t.tasks.length<e.task_definitions.length)&&(n=e.task_definitions.map(function(t){return{id:null,status:"not_started",task_definition_id:t.id,include_in_portfolio:!0,pct_similar:0,similar_to_count:0,similar_to_dismissed_count:0,times_assessed:0,num_new_comments:0}}),n=_.filter(n,function(e){return!_.find(t.tasks,{task_definition_id:e.task_definition_id})}),null==t.tasks&&(t.tasks=[]),Array.prototype.push.apply(t.tasks,n)),t.tasks=t.tasks.map(function(n){return d.mapTask(n,e,t)}),t.tasks=_.sortBy(t.tasks,function(t){return t.definition.abbreviation}).reverse(),t.target_tasks=function(){return d.tasksInTargetGrade(t)},t},d.addProjectMethods=function(t){return null!=t.updateTaskStats?t:(t.updateTaskStats=function(e){var n;return(n=t.task_stats)[0].value=Math.round(100*e.red_pct),n[1].value=Math.round(100*e.grey_pct),n[2].value=Math.round(100*e.orange_pct),n[3].value=Math.round(100*e.blue_pct),n[4].value=Math.round(100*e.green_pct),t.orderScale=Math.round(100*e.order_scale),t.task_stats=n},t.updateBurndownChart=function(){return r.get({id:t.project_id},function(e){return t.burndown_chart_data=e.burndown_chart_data,s.refreshAll()})},t.incorporateTask=function(e,n){var r;return null==t.tasks&&(t.tasks=[]),null!=(r=_.find(t.tasks,{task_definition_id:e.task_definition_id}))?r=_.extend(r,e):(t.tasks.push(d.mapTask(e,unit,t)),r=e),r.isGroupTask()&&null==r.group()&&d.updateGroups(r.project(),n,!0),"function"==typeof n&&n(),r},t.refresh=function(e){return r.get({id:t.project_id},function(n){if(_.extend(t,n),e)return d.addTaskDetailsToProject(t,e)})},t)},d.getProject=function(t,e,n,i){var a;if(null==(a=_.isNumber(t)?t:null!=t?t.project_id:void 0))throw Error("No project id given to getProject");return null!=t.burndown_chart_data?"function"==typeof n?n(t):void 0:r.get({id:a},function(r){return t=_.extend(t,r),d.addProjectMethods(t),null!=e&&d.addTaskDetailsToProject(t,e),"function"==typeof n?n(t):void 0},function(t){return o.add("danger",""+(t.data.error||"Unable to load project"),6e3),"function"==typeof i?i(t):void 0})},d.updateGroups=function(t,e,n){if(null==n&&(n=!1),null!=t.groups||n)return r.get({id:t.project_id},function(n){return t.groups=n.groups,"function"==typeof e?e(t):void 0}),t.unit().refreshGroups()},d.getGroupForTask=function(t,e){return e.definition.group_set?_.find(t.groups,function(t){return t.group_set_id===e.definition.group_set.id})||_.find(t.unit().groups,function(r){return r.group_set_id===e.definition.group_set.id&&n.call(r.projects,t.project_id)>=0}):null},d.taskFromTaskDefId=function(t,e){return t.findTaskForDefinition(e)},d.tasksInTargetGrade=function(e){return t("byGrade")(e.tasks,e.target_grade)},d.tasksByStatus=function(t,e){var n;return n=d.tasksInTargetGrade(t),_.filter(n,{status:e})},d})},Duzk:function(t,e){angular.module("doubtfire.projects.project-outcome-alignment",[]).directive("projectOutcomeAlignment",function(){return{restrict:"E",templateUrl:"projects/project-outcome-alignment/project-outcome-alignment.tpl.html",controller:function(t,e,n,r,i,o,a,s){var l;return t.poaView={activeTab:"list"},t.targets=r.calculateTargets(t.unit,t.unit,r.unitTaskStatusFactor()),t.currentProgress=r.calculateProgress(t.unit,t.project),t.refreshCharts=s.refreshAll,l=function(){return t.currentProgress.length=0,t.currentProgress=_.extend(t.currentProgress,r.calculateProgress(t.unit,t.project))},t.$watch("project",function(){return l(),e.$broadcast("ProgressUpdated")}),t.$watch("project.tasks",function(){return l(),e.$broadcast("ProgressUpdated")}),t.selectTab=function(e){return"progress"===e&&null==t.classStats&&i.learningProgressClassStats.get({id:t.unit.id},function(e){return t.classStats=e},function(e){return o.add("danger",null!=e.data.error?"Error: "+e.data.error:"Failed to get unit progress class statistics",6e3),t.classStats={}}),t.poaView.activeTab=e,a.event("Stuent Feedback View - Learning Outcomes Tab","Switched Tab","progress"===e?"View Learning Progress Tab":"Reflect on Learning Tab"),t.refreshCharts()},t.selectTab("progress"),t.$on("UpdateAlignmentChart",function(){return l(),e.$broadcast("ProgressUpdated")})}}})},ED7q:function(t,e){angular.module("doubtfire.units.states.plagiarism.directives",["doubtfire.units.states.plagiarism.directives.unit-student-plagiarism-list"])},EDb2:function(t,e){angular.module("doubtfire.units.states.tasks.feedback",["doubtfire.units.states.tasks.inbox.directives"]).config(function(t){return t.state("units/tasks/feedback",{parent:"units/tasks",url:"/feedback/{taskKey:any}",templateUrl:"units/states/tasks/inbox/inbox.tpl.html",controller:"TaskFeedbackStateCtrl",data:{task:"Give Student Feedback",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin"]}})}).controller("TaskFeedbackStateCtrl",function(t,e){return t.taskData.source=e.tasksRequiringFeedback})},EqbJ:function(t,e){angular.module("doubtfire.api.models.project",[]).factory("Project",function(t){return t("/projects/:id",{id:"@id"})})},FE7D:function(t,e){angular.module("doubtfire.units.states.all",["doubtfire.units.states.all.directives"])},FKRd:function(t,e){angular.module("doubtfire.units.states.tasks.inbox",["doubtfire.units.states.tasks.inbox.directives"]).config(function(t){return t.state("units/tasks/inbox",{parent:"units/tasks",url:"/inbox/{taskKey:any}",templateUrl:"units/states/tasks/inbox/inbox.tpl.html",controller:"TaskInboxStateCtrl",data:{task:"Task Inbox",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin"]}})}).controller("TaskInboxStateCtrl",function(t,e){return t.taskData.source=e.tasksForTaskInbox})},FTi6:function(t,e){angular.module("doubtfire.units.states.analytics.directives",["doubtfire.units.states.analytics.directives.task-completion-stats","doubtfire.units.states.analytics.directives.task-status-stats","doubtfire.units.states.analytics.directives.task-summary-stats","doubtfire.units.states.analytics.directives.unit-target-grade-stats","doubtfire.units.states.analytics.directives.unit-achievement-stats","doubtfire.units.states.analytics.directives.unit-stats-download"])},FVRI:function(t,e){angular.module("doubtfire.projects.states.index",[]).config(function(t){return t.state("projects/index",{url:"/projects/:projectId",abstract:!0,views:{main:{controller:"ProjectsIndexStateCtrl",templateUrl:"units/states/index/index.tpl.html"}},data:{pageTitle:"_Home_",roleWhitelist:["Student","Tutor","Convenor","Admin"]}})}).controller("ProjectsIndexStateCtrl",function(t,e,n,r,i,o,a,s){var l;return(l=+r.projectId)?a.getProject(l,null,function(r){return null==r?n.go("home"):o.getUnit(r.unit_id,function(n){return t.unit=n,t.project=t.unit.mapStudentToUnit(r),e.$broadcast("ProjectChanged",{context:t.project})})},function(t){return n.go("home")}):n.go("home")})},"G/2P":function(t,e){angular.module("doubtfire.api.models.portfolio-submission",["ngFileUpload"]).factory("PortfolioSubmission",function(t,e,n,r,i,o){var a;return(a=function(e){var n;return(n=o("/submission/project/:id/portfolio",{id:"@id"})).portfolioUrl=t.API_URL+"/submission/project/"+e.project_id+"/portfolio?auth_token="+r.authenticationToken,n.portfolioUrlAsAttachment=n.portfolioUrl+"&as_attachment=true",n.learningSummaryReportFileUploadData={type:{file0:{name:"Learning Summary Report",type:"document"}},payload:{name:"LearningSummaryReport",kind:"document"}},n.otherFileFileUploadData=function(t){return{type:{file0:{name:"Other",type:t}},payload:{name:"Other",kind:t}}},n.deleteFile=function(t,e){var r;return r=angular.extend(e,{id:t.project_id}),n.delete(r,function(){return t.portfolio_files=_.without(t.portfolio_files,e)})},n}).getPortfolioUrl=function(e,n){var i;return null==n&&(n=!1),i=t.API_URL+"/submission/project/"+e.project_id+"/portfolio?auth_token="+r.authenticationToken,n&&(i+="&as_attachment=true"),i},a})},G11L:function(t,e){angular.module("doubtfire.units.states.edit",["doubtfire.units.states.edit.directives"]).config(function(t){return t.state("units/admin",{parent:"units/index",url:"/admin",controller:"EditUnitStateCtrl",templateUrl:"units/states/edit/edit.tpl.html",data:{task:"Unit Administration",pageTitle:"_Unit Administration_",roleWhitelist:["Convenor","Admin"]}})}).controller("EditUnitStateCtrl",function(t,e,n,r,i,o,a,s,l,u){return u.event("Edit Unit View","Started Edit Unit View","Unit Tab"),a.getUnit(e.params.unitId,{loadAllStudents:!0},function(e){return t.unit=e,t.newUnit=-1===t.unit.id,t.currentStaff=t.unit.staff,o.query(function(n){if(t.unitRoles=_.filter(n,function(t){return t.unit_id===e.id}),t.unitRoles)return t.assessingUnitRole=t.unitRoles[0]})}),t.tabs={unitTab:{title:"Unit Details",seq:0},learningOutcomesTab:{title:"Learning Outcomes",seq:1},staffTab:{title:"Staff",seq:2},tutorialsTab:{title:"Tutorials",seq:3},studentsTab:{title:"Students",seq:4},tasksTab:{title:"Tasks",seq:5},taskAlignmentTab:{title:"Task Alignment",seq:5},groupsTab:{title:"Groups",seq:6,deselect:function(){return t.unit.refreshGroups()}}},t.setActiveTab=function(e){var n,r;if(e!==t.activeTab)return null!=(r=t.activeTab)&&(r.active=!1),"function"==typeof(n=t.activeTab).deselect&&n.deselect(),t.activeTab=e,t.activeTab.active=!0,u.event((t.newUnit?"Edit":"Create")+" Unit View",null!=t.assessingUnitRole?"Switched Tab as "+t.assessingUnitRole.role:"Switched Tab as Administrator",e.title+" Tab")},t.activeTab=t.tabs.unitTab,i.query(function(e){return t.staff=_.map(e,function(t){return{id:t.id,full_name:t.first_name+" "+t.last_name}})})})},G1in:function(t,e){angular.module("doubtfire.groups.group-member-list",[]).directive("groupMemberList",function(){return{restrict:"E",templateUrl:"groups/group-member-list/group-member-list.tpl.html",scope:{unit:"=",project:"=",unitRole:"=",selectedGroup:"=",onMembersLoaded:"=?"},controller:function(t,e,n,r,i,o){var a,s,l;return s=o.listenTo(t),t.tableSort={order:"student_name",reverse:!1},t.sortTableBy=function(e){return t.tableSort.order=e,t.tableSort.reverse=!t.tableSort.reverse},l=function(){return t.loaded=!1},a=function(){return e(function(){return t.loaded=!0,"function"==typeof t.onMembersLoaded?t.onMembersLoaded():void 0},500)},t.loaded=!1,t.removeMember=function(e){return t.selectedGroup.removeMember(e,function(){var n;if(e.project_id===(null!=(n=t.project)?n.project_id:void 0))return t.project.groups=_.without(t.project.groups,t.selectedGroup),t.selectedGroup=null})},s.push(t.$watch("selectedGroup.id",function(n){if(null!=n)return l(),t.canRemoveMembers=t.unitRole||t.selectedGroup.groupSet().allow_students_to_manage_groups,t.selectedGroup.getMembers(function(t){return a()},function(n){return e(function(){return i.add("danger","Unauthorised to view members in this group",3e3),t.selectedGroup=null},1e3)})}))}}})},G5Ey:function(t,e){angular.module("doubtfire.units.states.tasks.viewer.directives.unit-task-list",[]).directive("unitTaskList",function(){return{restrict:"E",templateUrl:"units/states/tasks/viewer/directives/unit-task-list/unit-task-list.tpl.html",scope:{unit:"=",refreshTasks:"=?",unitTasks:"=",selectedTaskDef:"="},controller:function(t,e,n,r,i,o){var a;return o.listenTo(t),t.filteredTasks=[],t.filters={taskSearch:null},(a=function(){var e;return e=n("taskDefinitionName")(t.unitTasks,t.filters.taskSearch),e=n("orderBy")(e,"task.seq"),t.filteredTasks=e})(),t.refreshTasks=a,t.gradeNames=r.grades,t.taskNameChanged=a,t.setSelectedTask=function(e){return t.selectedTaskDef=e},t.isSelectedTask=function(e){var n;return e.id===(null!=(n=t.selectedTaskDef)?n.id:void 0)}}}})},GEUR:function(t,e){angular.module("localization",[]).factory("localize",["$http","$rootScope","$window","$filter",function(t,e,n,r){var i={language:n.navigator.userLanguage||n.navigator.language,dictionary:[],resourceFileLoaded:!1,successCallback:function(t){i.dictionary=t,i.resourceFileLoaded=!0,e.$broadcast("i18nReady")},setLanguage:function(t){i.language=t,i.initLocalizedResources()},initLocalizedResources:function(){t({method:"GET",url:"src/i18n/resources-locale_"+i.language+".js",cache:!1}).success(i.successCallback).error(function(){t({method:"GET",url:"src/i18n/resources-locale_default.js",cache:!1}).success(i.successCallback)})},getLocalizedString:function(t){var e="";return i.dictionary!==[]&&i.dictionary.length>0&&(e=r("filter")(i.dictionary,function(e){return e.key===t})[0].value),e}};return i.initLocalizedResources(),i}]).filter("i18n",["localize",function(t){return function(e){return t.getLocalizedString(e)}}]).directive("i18n",["localize",function(t){var e={restrict:"EAC",updateText:function(e,n){var r=n.split("|");if(r.length>=1){var i=t.getLocalizedString(r[0]);if(null!=i&&""!==i){if(r.length>1)for(var o=1;o<r.length;o++)i=i.replace("{"+(o-1)+"}",r[o]);e.text(i)}}},link:function(t,n,r){t.$on("i18nReady",function(){e.updateText(n,r.i18n)}),r.$observe("i18n",function(t){e.updateText(n,r.i18n)})}};return e}]).directive("i18nAttr",["localize",function(t){var e={restrict:"EAC",updateText:function(e,n){var r=n.split("|"),i=t.getLocalizedString(r[0]);if(null!=i&&""!==i){if(r.length>2)for(var o=2;o<r.length;o++)i=i.replace("{"+(o-2)+"}",r[o]);e.attr(r[1],i)}},link:function(t,n,r){t.$on("localizeResourcesUpdated",function(){e.updateText(n,r.i18nAttr)}),r.$observe("i18nAttr",function(t){e.updateText(n,t)})}};return e}])},GMb7:function(t,e){angular.module("doubtfire.admin.modals.rollover-teaching-period-modal",[]).factory("RolloverTeachingPeriodModal",function(t){var e;return(e={}).show=function(e){return t.open({templateUrl:"admin/modals/rollover-teaching-period-modal/rollover-teaching-period-modal.tpl.html",controller:"RolloverTeachingPeriodModal",resolve:{teachingperiod:function(){return e}}})},e}).controller("RolloverTeachingPeriodModal",function(t,e,n,r,i,o,a,s){return t.teachingperiod=a,t.teachingPeriods=o.query(),t.rolloverTo={},t.rollover=function(){return o.rollover.create({existing_teaching_period_id:t.teachingperiod.id,new_teaching_period_id:t.rolloverTo},function(e){return t.teachingPeriods.loadedPeriods.push(e),n.add("success","Teaching Period created.",2e3)},function(t){return n.add("danger",t.data.error,6e3)})}})},GmOA:function(t,e){angular.module("doubtfire.errors.states.timeout",[]).config(function(t){return t.state("timeout",{url:"/timeout?dest&params",views:{main:{controller:"TimeoutCtrl",templateUrl:"errors/states/timeout/timeout.tpl.html"}},data:{pageTitle:"_Timeout_"}},"TimeoutCtrl")}).controller("TimeoutCtrl",function(t){return t.go("sign_out")})},GsxH:function(t,e){angular.module("doubtfire.api.models.unit-role",[]).factory("UnitRole",function(t){return t("/unit_roles/:id",{id:"@id"})})},H91u:function(t,e){angular.module("doubtfire.units.states.groups",[]).config(function(t){return t.state("units/students/groups",{parent:"units/index",url:"/students/groups",templateUrl:"units/states/groups/groups.tpl.html",controller:"UnitGroupsStateCtrl",data:{task:"Student Groups",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin"]}})}).controller("UnitGroupsStateCtrl",function(t){t.unit.hasGroupwork()})},H9ox:function(t,e){angular.module("doubtfire.home.states.new-user-wizard",[]).config(function(t){return t.state("new-user-wizard",{url:"/home#new-user-wizard?optInOnly",views:{main:{controller:"NewUserWizardCtrl",templateUrl:"home/states/new-user-wizard/new-user-wizard.tpl.html"}},data:{pageTitle:"_Welcome to Doubtfire_",roleWhitelist:["Student","Tutor","Convenor","Admin"]}})}).controller("NewUserWizardCtrl",function(t,e,n,r,i,o,a,s,l,u,c,d,p){var f,h,m;return t.steps={nameStep:{title:"What's your name?",subtitle:"We will need a name to help identify you on Doubtfire.",seq:0},nicknameStep:{title:"Do you have a preferred name or nickname?",subtitle:"If you'll find it easier for your tutor to call you another name please let us know!",seq:1},studentIdStep:{title:"What is your Student ID?",subtitle:"Please enter your Student ID number that is allocated by your institution.",seq:2},avatarStep:{title:"Give yourself an avatar",subtitle:"Set your avatar using Gravatar to help you be identified on Doubtfire.",seq:3},emailStep:{title:"How would you like us to email you?",subtitle:"Based on your preferences, we will email you as frequently as you'd like us to.",seq:4},targetGradeStep:{title:"What grades are you aiming for?",subtitle:"We noticed you are enrolled in the following subject(s).",seq:5},optInToResearchStep:{title:"Would you like to help us make Doubtfire better?",subtitle:"We would like to anonymously use your Doubtfire usage for research in making Doubtfire better.",seq:6}},t.firstStep=_.find(t.steps,{seq:0}),t.lastStep=_.find(t.steps,{seq:_.keys(t.steps).length-1}),t.currentStep=t.optInOnly?t.steps.optInToResearchStep:t.firstStep,t.optInOnly?(t.user=u.profile,t.user.opt_in_to_research=null):(h=null,m=null,f=null,"first name"!==u.profile.first_name.toLowerCase()&&"last name"!==u.profile.last_name.toLowerCase()&&(h=u.profile.first_name,m=u.profile.last_name,f=u.profile.email),t.user={first_name:h,last_name:m,nickname:null,email:f,student_id:"",receive_feedback_notifications:!0,receive_portfolio_notifications:!0,receive_task_notifications:!0,opt_in_to_research:!0,has_run_first_time_setup:!0}),t.moveStep=function(e){var n,r;return 0===t.projects.length&&(r=_.find(t.steps,{seq:t.steps.targetGradeStep.seq-1}),n=_.find(t.steps,{seq:t.steps.targetGradeStep.seq+1}),1===e&&t.currentStep===r?e+=1:-1===e&&t.currentStep===n&&(e-=1)),t.currentStep=_.find(t.steps,{seq:t.currentStep.seq+e})},t.gradeAcronyms=l.gradeAcronyms,t.grades=l.grades,t.determineDisabledForCurrentStep=function(){var e,n,r,i,o;switch(t.currentStep){case t.steps.nameStep:o=(null!=(e=t.user.first_name)?e.trim().length:void 0)>0&&(null!=(n=t.user.last_name)?n.trim().length:void 0)>0;break;case t.steps.nicknameStep:case t.steps.targetGradeStep:case t.steps.avatarStep:o=!0;break;case t.steps.studentIdStep:o=(null!=(r=t.user.student_id)?r.trim().length:void 0)>0;break;case t.steps.emailStep:o=(o=(null!=(i=t.user.email)?i.trim().length:void 0)>0)&&_.isBoolean(t.user.receive_feedback_notifications)&&_.isBoolean(t.user.receive_portfolio_notifications)&&_.isBoolean(t.user.receive_task_notifications);break;case t.steps.optInToResearchStep:o=_.isBoolean(t.user.opt_in_to_research)}return!o},t.done=function(n){var i,s,l,f,h,m;for(n=null!=n?n:t.user,h=[],i=function(t){return c.add("danger","Error: "+t.data.error,6e3)},s=0,l=(m=t.projects).length;s<l;s++)h.push(a.update(null,{id:(f=m[s]).project_id,target_grade:f.target_grade},null,i).$promise);return h.push(o.update(null,{id:u.id,user:t.user},function(t){return u.profile=t},i).$promise),r.all(h).then(function(){return t.user.opt_in_to_research&&d.event("Doubtfire Analytics","User opted in research"),p.saveCurrentUser(),e.go("home")})},t.userFirstName=u.profile.first_name,t.externalName=i.ExternalName,s.getProjects(!1,function(e){var n,r,i;if(t.projects=e,0===e.length&&"Student"!==u.role){for(t.isStaff=!0,t.user.student_id=null,delete t.steps.studentIdStep,n=0,r=(i=["emailStep","targetGradeStep","avatarStep","optInToResearchStep"]).length;n<r;n++)t.steps[i[n]].seq-=1;return t.steps.nicknameStep.subtitle=t.steps.nicknameStep.subtitle.replace("tutor","students")}})})},Hbtf:function(t,e){angular.module("doubtfire.api.models.group-member",[]).factory("GroupMember",function(t){return t("/units/:unit_id/group_sets/:group_set_id/groups/:group_id/members/:id",{id:"@id",group_id:"@group_id",group_set_id:"@group_set_id",unit_id:"@unit_id"})})},HvVG:function(t,e){angular.module("doubtfire.tasks.task-ilo-alignment",["doubtfire.tasks.task-ilo-alignment.modals","doubtfire.tasks.task-ilo-alignment.task-ilo-alignment-editor","doubtfire.tasks.task-ilo-alignment.task-ilo-alignment-rater","doubtfire.tasks.task-ilo-alignment.task-ilo-alignment-viewer"])},IN6a:function(t,e){angular.module("doubtfire.tasks.modals.grade-task-modal",[]).factory("GradeTaskModal",function(t){var e;return(e={}).show=function(e){return t.open({templateUrl:"tasks/modals/grade-task-modal/grade-task-modal.tpl.html",controller:"GradeTaskModal",resolve:{task:function(){return e}}})},e}).controller("GradeTaskModal",function(t,e,n,r){return t.task=r,t.data={desiredGrade:r.grade,rating:r.quality_pts||1,overStar:0,confRating:0},t.gradeValues=n.allGradeValues,t.grades=n.grades,t.dismiss=e.dismiss,t.numStars=r.definition.max_quality_pts||5,t.close=function(){return e.close({qualityPts:t.data.rating,selectedGrade:t.data.desiredGrade})},t.hoveringOver=function(e){return t.data.overStar=e},t.checkClearRating=function(){return 1===t.data.confRating&&1===t.data.rating&&1===t.data.overStar?t.data.rating=0:1===t.data.confRating&&1===t.data.overStar&&0===t.data.rating&&(t.data.rating=1),t.data.confRating=t.data.rating}})},INTa:function(t,e){angular.module("utilService",[]).filter("fromNow",function(){return function(t){return moment(new Date(t)).fromNow()}}).filter("titleize",function(){return function(t){return _.titleize(t)}}).filter("humanize",function(){return function(t){return _.humanize(t)}}).directive("autoFillSync",function(t){return{require:"ngModel",link:function(e,n,r,i){var o;return o=n.val(),t(function(){var t;if(t=n.val(),i.$pristine&&o!==t)return i.$setViewValue(t)},500)}}})},IRdx:function(t,e){angular.module("doubtfire.admin.modals.user-notification-settings-modal",[]).factory("UserNotificationSettingsModal",function(t){var e;return(e={}).show=function(e){return t.open({templateUrl:"admin/modals/user-notification-settings-modal/user-notification-settings-modal.tpl.html",controller:"UserNotificationSettingsModalCtrl",resolve:{user:function(){return e}}})},e}).controller("UserNotificationSettingsModalCtrl",function(t,e,n,r,i,o,a){return t.user=o,t.currentUser=r,t.modalState={},t.saveNotifications=function(){return i.update({id:t.user.id,user:t.user}).$promise.then(function(t){if(e.close(t),o.name=o.first_name+" "+o.last_name,o===r.profile)return a.saveCurrentUser()},function(t){if(null!=t.data.error)return n.add("danger","Error: "+t.data.error,6e3)})}})},IZpb:function(t,e){!function(t,e){"use strict";var n=e.$$minErr("$resource"),r=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;function i(t,n){for(var r in e.forEach(n=n||{},function(t,e){delete n[e]}),t)!t.hasOwnProperty(r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(n[r]=t[r]);return n}e.module("ngResource",["ng"]).provider("$resource",function(){var t=/^https?:\/\/[^\/]*/,o=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function(a,s,l,u){var c=e.noop,d=e.forEach,p=e.extend,f=e.copy,h=e.isArray,m=e.isDefined,g=e.isFunction,v=e.isNumber;function b(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,e?"%20":"+")}function y(t,e){this.template=t,this.defaults=p({},o.defaults,e),this.urlParams={}}return y.prototype={setUrlParams:function(e,r,i){var o,a,s=this,l=i||s.template,u="",c=s.urlParams={};d(l.split(/\W/),function(t){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(t)&&t&&new RegExp("(^|[^\\\\]):"+t+"(\\W|$)").test(l)&&(c[t]={isQueryParamValue:new RegExp("\\?.*=:"+t+"(?:\\W|$)").test(l)})}),l=(l=l.replace(/\\:/g,":")).replace(t,function(t){return u=t,""}),r=r||{},d(s.urlParams,function(t,e){o=r.hasOwnProperty(e)?r[e]:s.defaults[e],m(o)&&null!==o?(a=t.isQueryParamValue?b(o,!0):function(t){return b(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}(o),l=l.replace(new RegExp(":"+e+"(\\W|$)","g"),function(t,e){return a+e})):l=l.replace(new RegExp("(/?):"+e+"(\\W|$)","g"),function(t,e,n){return"/"===n.charAt(0)?n:e+n})}),s.defaults.stripTrailingSlashes&&(l=l.replace(/\/+$/,"")||"/"),l=l.replace(/\/\.(?=\w+($|\?))/,"."),e.url=u+l.replace(/\/\\\./,"/."),d(r,function(t,n){s.urlParams[n]||(e.params=e.params||{},e.params[n]=t)})}},function t(b,w,k,_){var x=new y(b,_);function S(t){return t.resource}function $(t){i(t||{},this)}return k=p({},o.defaults.actions,k),$.prototype.toJSON=function(){var t=p({},this);return delete t.$promise,delete t.$resolved,delete t.$cancelRequest,t},d(k,function(t,o){var b=/^(POST|PUT|PATCH)$/i.test(t.method),y=t.timeout,k=m(t.cancellable)?t.cancellable:x.defaults.cancellable;y&&!v(y)&&(s.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete t.timeout,y=null),$[o]=function(s,m,v,_){var T,C,E,A={};switch(arguments.length){case 4:E=_,C=v;case 3:case 2:if(!g(m)){A=s,T=m,C=v;break}if(g(s)){C=s,E=m;break}C=m,E=v;case 1:g(s)?C=s:b?T=s:A=s;break;case 0:break;default:throw n("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var D,P,O=this instanceof $,M=O?T:t.isArray?[]:new $(T),R={},j=t.interceptor&&t.interceptor.response||S,I=t.interceptor&&t.interceptor.responseError||void 0;d(t,function(t,e){switch(e){default:R[e]=f(t);break;case"params":case"isArray":case"interceptor":case"cancellable":}}),!O&&k&&(D=l.defer(),R.timeout=D.promise,y&&(P=u(D.resolve,y))),b&&(R.data=T),x.setUrlParams(R,p({},function(t,i){var o={};return i=p({},w,i),d(i,function(i,a){g(i)&&(i=i(t)),o[a]=i&&i.charAt&&"@"===i.charAt(0)?function(t,i){if(!function(t){return null!=t&&""!==t&&"hasOwnProperty"!==t&&r.test("."+t)}(i))throw n("badmember",'Dotted member path "@{0}" is invalid.',i);for(var o=i.split("."),a=0,s=o.length;a<s&&e.isDefined(t);a++)t=null!==t?t[o[a]]:void 0;return t}(t,i.substr(1)):i}),o}(T,t.params||{}),A),t.url);var N=a(R).then(function(e){var r=e.data;if(r){if(h(r)!==!!t.isArray)throw n("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",o,t.isArray?"array":"object",h(r)?"array":"object",R.method,R.url);if(t.isArray)M.length=0,d(r,function(t){M.push("object"==typeof t?new $(t):t)});else{var a=M.$promise;i(r,M),M.$promise=a}}return e.resource=M,e},function(t){return(E||c)(t),l.reject(t)});return N.finally(function(){M.$resolved=!0,!O&&k&&(M.$cancelRequest=c,u.cancel(P),D=P=R.timeout=null)}),N=N.then(function(t){var e=j(t);return(C||c)(e,t.headers,t.status,t.statusText),e},I),O?N:(M.$promise=N,M.$resolved=!1,k&&(M.$cancelRequest=D.resolve),M)},$.prototype["$"+o]=function(t,e,n){g(t)&&(n=e,e=t,t={});var r=$[o].call(this,t,this,e,n);return r.$promise||r}}),$.bind=function(e){var n=p({},w,e);return t(b,n,k,_)},$}}]})}(window,window.angular)},"IbG+":function(t,e){!function(t){"use strict";function e(t,e){return e=e||Error,function(){var n,r,i=arguments,o=i[0],a="["+(t?t+":":"")+o+"] ";for(a+=i[1].replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1)+2;return e<i.length?Lt(i[e]):t}),a+="\nhttp://errors.angularjs.org/1.5.11/"+(t?t+"/":"")+o,r=2,n="?";r<i.length;r++,n="&")a+=n+"p"+(r-2)+"="+encodeURIComponent(Lt(i[r]));return new e(a)}}var n=/^\/(.+)\/([a-z]*)$/,r="validity",i=Object.prototype.hasOwnProperty,o=function(t){return U(t)?t.toLowerCase():t},a=function(t){return U(t)?t.toUpperCase():t};"i"!=="I".toLowerCase()&&(o=function(t){return U(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},a=function(t){return U(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t});var s,l,u,c,d=[].slice,p=[].splice,f=[].push,h=Object.prototype.toString,m=Object.getPrototypeOf,g=e("ng"),v=t.angular||(t.angular={}),b=0;function y(t){if(null==t||z(t))return!1;if(B(t)||U(t)||l&&t instanceof l)return!0;var e="length"in Object(t)&&t.length;return L(e)&&(e>=0&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function w(t,e,n){var r,o;if(t)if(H(t))for(r in t)"prototype"===r||"length"===r||"name"===r||t.hasOwnProperty&&!t.hasOwnProperty(r)||e.call(n,t[r],r,t);else if(B(t)||y(t)){var a="object"!=typeof t;for(r=0,o=t.length;r<o;r++)(a||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==w)t.forEach(e,n,t);else if(F(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)i.call(t,r)&&e.call(n,t[r],r,t);return t}function k(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function _(t){return function(e,n){t(n,e)}}function x(){return++b}function S(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function $(t,e,n){for(var r=t.$$hashKey,i=0,o=e.length;i<o;++i){var a=e[i];if(N(a)||H(a))for(var s=Object.keys(a),l=0,u=s.length;l<u;l++){var c=s[l],d=a[c];n&&N(d)?V(d)?t[c]=new Date(d.valueOf()):q(d)?t[c]=new RegExp(d):d.nodeName?t[c]=d.cloneNode(!0):X(d)?t[c]=d.clone():(N(t[c])||(t[c]=B(d)?[]:{}),$(t[c],[d],!0)):t[c]=d}}return S(t,r),t}function T(t){return $(t,d.call(arguments,1),!1)}function C(t){return $(t,d.call(arguments,1),!0)}function E(t){return parseInt(t,10)}s=t.document.documentMode;var A=Number.isNaN||function(t){return t!=t};function D(t,e){return T(Object.create(t),e)}function P(){}function O(t){return t}function M(t){return function(){return t}}function R(t){return H(t.toString)&&t.toString!==h}function j(t){return void 0===t}function I(t){return void 0!==t}function N(t){return null!==t&&"object"==typeof t}function F(t){return null!==t&&"object"==typeof t&&!m(t)}function U(t){return"string"==typeof t}function L(t){return"number"==typeof t}function V(t){return"[object Date]"===h.call(t)}P.$inject=[],O.$inject=[];var B=Array.isArray;function H(t){return"function"==typeof t}function q(t){return"[object RegExp]"===h.call(t)}function z(t){return t&&t.window===t}function G(t){return t&&t.$evalAsync&&t.$watch}function W(t){return"boolean"==typeof t}function Y(t){return t&&H(t.then)}var K=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,Z=function(t){return U(t)?t.trim():t},Q=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function X(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function J(t){return o(t.nodeName||t[0]&&t[0].nodeName)}function tt(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function et(t,e){var n,r=[],o=[];if(e){if((n=e)&&L(n.length)&&K.test(h.call(n))||"[object ArrayBuffer]"===h.call(e))throw g("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw g("cpi","Can't copy! Source and destination are identical.");return B(e)?e.length=0:w(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),r.push(t),o.push(e),a(t,e)}return s(t);function a(t,e){var n,r=e.$$hashKey;if(B(t))for(var o=0,a=t.length;o<a;o++)e.push(s(t[o]));else if(F(t))for(n in t)e[n]=s(t[n]);else if(t&&"function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&(e[n]=s(t[n]));else for(n in t)i.call(t,n)&&(e[n]=s(t[n]));return S(e,r),e}function s(t){if(!N(t))return t;var e=r.indexOf(t);if(-1!==e)return o[e];if(z(t)||G(t))throw g("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var n=!1,i=function(t){switch(h.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(s(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(H(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===i&&(i=B(t)?[]:Object.create(m(t)),n=!0),r.push(t),o.push(i),n?a(t,i):i}}function nt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,i,o=typeof t;if(o===typeof e&&"object"===o){if(!B(t)){if(V(t))return!!V(e)&&nt(t.getTime(),e.getTime());if(q(t))return!!q(e)&&t.toString()===e.toString();if(G(t)||G(e)||z(t)||z(e)||B(e)||V(e)||q(e))return!1;for(r in i=Mt(),t)if("$"!==r.charAt(0)&&!H(t[r])){if(!nt(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!(r in i)&&"$"!==r.charAt(0)&&I(e[r])&&!H(e[r]))return!1;return!0}if(!B(e))return!1;if((n=t.length)===e.length){for(r=0;r<n;r++)if(!nt(t[r],e[r]))return!1;return!0}}return!1}var rt=function(){if(!I(rt.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");rt.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else rt.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return rt.rules},it=function(){if(I(it.name_))return it.name_;var e,n,r,i,o=wt.length;for(n=0;n<o;++n)if(e=t.document.querySelector("["+(r=wt[n]).replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return it.name_=i};function ot(t,e,n){return t.concat(d.call(e,n))}function at(t,e){return d.call(t,e||0)}function st(t,e){var n=arguments.length>2?at(arguments,2):[];return!H(e)||e instanceof RegExp?e:n.length?function(){return e.apply(t,arguments.length?ot(n,arguments,0):n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function lt(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:z(n)?r="$WINDOW":n&&t.document===n?r="$DOCUMENT":G(n)&&(r="$SCOPE"),r}function ut(t,e){if(!j(t))return L(e)||(e=e?2:null),JSON.stringify(t,lt,e)}function ct(t){return U(t)?JSON.parse(t):t}var dt=/:/g;function pt(t,e){t=t.replace(dt,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return A(n)?e:n}function ft(t,e,n){n=n?-1:1;var r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,n*(pt(e,r)-r))}function ht(t){t=l(t).clone();try{t.empty()}catch(n){}var e=l("<div>").append(t).html();try{return t[0].nodeType===jt?o(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(t,e){return"<"+o(e)})}catch(n){return o(e)}}function mt(t){try{return decodeURIComponent(t)}catch(e){}}function gt(t){var e={};return w((t||"").split("&"),function(t){var n,r,o;t&&(r=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(r=t.substring(0,n),o=t.substring(n+1)),I(r=mt(r))&&(o=!I(o)||mt(o),i.call(e,r)?B(e[r])?e[r].push(o):e[r]=[e[r],o]:e[r]=o))}),e}function vt(t){var e=[];return w(t,function(t,n){B(t)?w(t,function(t){e.push(yt(n,!0)+(!0===t?"":"="+yt(t,!0)))}):e.push(yt(n,!0)+(!0===t?"":"="+yt(t,!0)))}),e.length?e.join("&"):""}function bt(t){return yt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function yt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var wt=["ng-","data-ng-","ng:","x-ng-"],kt=function(t){var e=t.currentScript,n=e&&e.getAttribute("src");if(!n)return!0;var r=t.createElement("a");if(r.href=n,t.location.origin===r.origin)return!0;switch(r.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}(t.document);function _t(e,n,r){N(r)||(r={}),r=T({strictDi:!1},r);var i=function(){if((e=l(e)).injector()){var i=e[0]===t.document?"document":ht(e);throw g("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=Ve(n,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!a.test(t.name))return i();t.name=t.name.replace(a,""),v.resumeBootstrap=function(t){return w(t,function(t){n.push(t)}),i()},H(v.resumeDeferredBootstrap)&&v.resumeDeferredBootstrap()}function xt(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function St(t){var e=v.element(t).injector();if(!e)throw g("test","no injector found for element argument to getTestability");return e.get("$$testability")}var $t=/[A-Z]/g;function Tt(t,e){return e=e||"_",t.replace($t,function(t,n){return(n?e:"")+t.toLowerCase()})}var Ct=!1;function Et(t,e,n){if(!t)throw g("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function At(t,e,n){return n&&B(t)&&(t=t[t.length-1]),Et(H(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Dt(t,e){if("hasOwnProperty"===t)throw g("badname","hasOwnProperty is not a valid {0} name",e)}function Pt(t,e,n){if(!e)return t;for(var r=e.split("."),i=t,o=r.length,a=0;a<o;a++)t&&(t=(i=t)[r[a]]);return!n&&H(t)?st(i,t):t}function Ot(t){for(var e,n=t[0],r=t[t.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(e||t[i]!==n)&&(e||(e=l(d.call(t,0,i))),e.push(n));return e||t}function Mt(){return Object.create(null)}var Rt=1,jt=3,It=8,Nt=9,Ft=11;function Ut(t,e){if(B(t)){e=e||[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}else if(N(t))for(var i in e=e||{},t)"$"===i.charAt(0)&&"$"===i.charAt(1)||(e[i]=t[i]);return e||t}function Lt(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):j(t)?"undefined":"string"!=typeof t?function(t){var e=[];return JSON.stringify(t,function(t,n){if(N(n=lt(t,n))){if(e.indexOf(n)>=0)return"...";e.push(n)}return n})}(t):t}var Vt={full:"1.5.11",major:1,minor:5,dot:11,codeName:"princely-quest"};se.expando="ng339";var Bt=se.cache={},Ht=1,qt=function(t,e,n){t.addEventListener(e,n,!1)},zt=function(t,e,n){t.removeEventListener(e,n,!1)};se._data=function(t){return this.cache[t[this.expando]]||{}};var Gt=/([:\-_]+(.))/g,Wt=/^moz([A-Z])/,Yt={mouseleave:"mouseout",mouseenter:"mouseover"},Kt=e("jqLite");function Zt(t){return t.replace(Gt,function(t,e,n,r){return r?n.toUpperCase():n}).replace(Wt,"Moz$1")}var Qt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Xt=/<|&#?\w+;/,Jt=/<([\w:-]+)/,te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ee={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ne(t){return!Xt.test(t)}function re(t){var e=t.nodeType;return e===Rt||!e||e===Nt}function ie(t,e){var n,r,i,o,a=e.createDocumentFragment(),s=[];if(ne(t))s.push(e.createTextNode(t));else{for(n=a.appendChild(e.createElement("div")),r=(Jt.exec(t)||["",""])[1].toLowerCase(),n.innerHTML=(i=ee[r]||ee._default)[1]+t.replace(te,"<$1></$2>")+i[2],o=i[0];o--;)n=n.lastChild;s=ot(s,n.childNodes),(n=a.firstChild).textContent=""}return a.textContent="",a.innerHTML="",w(s,function(t){a.appendChild(t)}),a}function oe(t,e){var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)}ee.optgroup=ee.option,ee.tbody=ee.tfoot=ee.colgroup=ee.caption=ee.thead,ee.th=ee.td;var ae=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function se(e){if(e instanceof se)return e;var n,r,i,o;if(U(e)&&(e=Z(e),n=!0),!(this instanceof se)){if(n&&"<"!==e.charAt(0))throw Kt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new se(e)}ve(this,n?(i=i||t.document,(o=Qt.exec(r=e))?[i.createElement(o[1])]:(o=ie(r,i))?o.childNodes:[]):e)}function le(t){return t.cloneNode(!0)}function ue(t,e){if(e||de(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),r=0,i=n.length;r<i;r++)de(n[r])}function ce(t,e,n,r){if(I(r))throw Kt("offargs","jqLite#off() does not support the `selector` argument");var i=pe(t),o=i&&i.events,a=i&&i.handle;if(a)if(e){var s=function(e){var r=o[e];I(n)&&tt(r||[],n),I(n)&&r&&r.length>0||(zt(t,e,a),delete o[e])};w(e.split(" "),function(t){s(t),Yt[t]&&s(Yt[t])})}else for(e in o)"$destroy"!==e&&zt(t,e,a),delete o[e]}function de(t,e){var n=t.ng339,r=n&&Bt[n];if(r){if(e)return void delete r.data[e];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),ce(t)),delete Bt[n],t.ng339=void 0}}function pe(t,e){var n=t.ng339,r=n&&Bt[n];return e&&!r&&(t.ng339=n=++Ht,r=Bt[n]={events:{},data:{},handle:void 0}),r}function fe(t,e,n){if(re(t)){var r=I(n),i=!r&&e&&!N(e),o=!e,a=pe(t,!i),s=a&&a.data;if(r)s[e]=n;else{if(o)return s;if(i)return s&&s[e];T(s,e)}}}function he(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function me(t,e){e&&t.setAttribute&&w(e.split(" "),function(e){t.setAttribute("class",Z((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Z(e)+" "," ")))})}function ge(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");w(e.split(" "),function(t){t=Z(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",Z(n))}}function ve(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;r<n;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function be(t,e){return ye(t,"$"+(e||"ngController")+"Controller")}function ye(t,e,n){t.nodeType===Nt&&(t=t.documentElement);for(var r=B(e)?e:[e];t;){for(var i=0,o=r.length;i<o;i++)if(I(n=l.data(t,r[i])))return n;t=t.parentNode||t.nodeType===Ft&&t.host}}function we(t){for(ue(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function ke(t,e){e||ue(t);var n=t.parentNode;n&&n.removeChild(t)}var _e=se.prototype={ready:function(e){var n=!1;function r(){n||(n=!0,e())}"complete"===t.document.readyState?t.setTimeout(r):(this.on("DOMContentLoaded",r),se(t).on("load",r))},toString:function(){var t=[];return w(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return l(t>=0?this[t]:this[this.length+t])},length:0,push:f,sort:[].sort,splice:[].splice},xe={};w("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){xe[o(t)]=t});var Se={};w("input,select,option,textarea,button,form,details".split(","),function(t){Se[t]=!0});var $e={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};function Te(t,e){var n=xe[e.toLowerCase()];return n&&Se[J(t)]&&n}function Ce(t,e,n){n.call(t,e)}function Ee(t,e,n){var r=e.relatedTarget;r&&(r===t||ae.call(t,r))||n.call(t,e)}function Ae(){this.$get=function(){return T(se,{hasClass:function(t,e){return t.attr&&(t=t[0]),he(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),ge(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),me(t,e)}})}}function De(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return"function"===r||"object"===r&&null!==t?t.$$hashKey=r+":"+(e||x)():r+":"+t}function Pe(t,e){if(e){var n=0;this.nextUid=function(){return++n}}w(t,this.put,this)}w({data:fe,removeData:de,hasData:function(t){for(var e in Bt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)de(t[e])}},function(t,e){se[e]=t}),w({data:fe,inheritedData:ye,scope:function(t){return l.data(t,"$scope")||ye(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return l.data(t,"$isolateScope")||l.data(t,"$isolateScopeNoTemplate")},controller:be,injector:function(t){return ye(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:he,css:function(t,e,n){if(e=Zt(e),!I(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var r=t.nodeType;if(r!==jt&&2!==r&&r!==It){var i=o(e);if(xe[i]){if(!I(n))return t[e]||(t.attributes.getNamedItem(e)||P).specified?i:void 0;n?(t[e]=!0,t.setAttribute(e,i)):(t[e]=!1,t.removeAttribute(i))}else if(I(n))t.setAttribute(e,n);else if(t.getAttribute){var a=t.getAttribute(e,2);return null===a?void 0:a}}},prop:function(t,e,n){if(!I(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(j(e)){var n=t.nodeType;return n===Rt||n===jt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(j(e)){if(t.multiple&&"select"===J(t)){var n=[];return w(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){if(j(e))return t.innerHTML;ue(t,!0),t.innerHTML=e},empty:we},function(t,e){se.prototype[e]=function(e,n){var r,i,o=this.length;if(t!==we&&j(2===t.length&&t!==he&&t!==be?e:n)){if(N(e)){for(r=0;r<o;r++)if(t===fe)t(this[r],e);else for(i in e)t(this[r],i,e[i]);return this}for(var a=t.$dv,s=j(a)?Math.min(o,1):o,l=0;l<s;l++){var u=t(this[l],e,n);a=a?a+u:u}return a}for(r=0;r<o;r++)t(this[r],e,n);return this}}),w({removeData:de,on:function(t,e,n,r){if(I(r))throw Kt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(re(t)){var i=pe(t,!0),o=i.events,a=i.handle;a||(a=i.handle=function(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],o=i?i.length:0;if(o){if(j(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=i.specialHandlerWrapper||Ce;o>1&&(i=Ut(i));for(var l=0;l<o;l++)n.isImmediatePropagationStopped()||s(t,n,i[l])}};return n.elem=t,n}(t,o));for(var s=e.indexOf(" ")>=0?e.split(" "):[e],l=s.length,u=function(e,r,i){var s=o[e];s||((s=o[e]=[]).specialHandlerWrapper=r,"$destroy"===e||i||qt(t,e,a)),s.push(n)};l--;)Yt[e=s[l]]?(u(Yt[e],Ee),u(e,void 0,!0)):u(e)}},off:ce,one:function(t,e,n){(t=l(t)).on(e,function r(){t.off(e,n),t.off(e,r)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;ue(t),w(new se(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return w(t.childNodes,function(t){t.nodeType===Rt&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===Rt||n===Ft)for(var r=0,i=(e=new se(e)).length;r<i;r++)t.appendChild(e[r])},prepend:function(t,e){if(t.nodeType===Rt){var n=t.firstChild;w(new se(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){oe(t,l(e).eq(0).clone()[0])},remove:ke,detach:function(t){ke(t,!0)},after:function(t,e){var n=t,r=t.parentNode;if(r)for(var i=0,o=(e=new se(e)).length;i<o;i++){var a=e[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:ge,removeClass:me,toggleClass:function(t,e,n){e&&w(e.split(" "),function(e){var r=n;j(r)&&(r=!he(t,e)),(r?ge:me)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==Ft?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:le,triggerHandler:function(t,e,n){var r,i,o,a=e.type||e,s=pe(t),l=s&&s.events,u=l&&l[a];u&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:P,type:a,target:t},e.type&&(r=T(r,e)),i=Ut(u),o=n?[r].concat(n):[r],w(i,function(e){r.isImmediatePropagationStopped()||e.apply(t,o)}))}},function(t,e){se.prototype[e]=function(e,n,r){for(var i,o=0,a=this.length;o<a;o++)j(i)?I(i=t(this[o],e,n,r))&&(i=l(i)):ve(i,t(this[o],e,n,r));return I(i)?i:this}}),se.prototype.bind=se.prototype.on,se.prototype.unbind=se.prototype.off,Pe.prototype={put:function(t,e){this[De(t,this.nextUid)]=e},get:function(t){return this[De(t,this.nextUid)]},remove:function(t){var e=this[t=De(t,this.nextUid)];return delete this[t],e}};var Oe=[function(){this.$get=[function(){return Pe}]}],Me=/^([^(]+?)=>/,Re=/^[^(]*\(\s*([^)]*)\)/m,je=/,/,Ie=/^\s*(_?)(\S+?)\1\s*$/,Ne=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Fe=e("$injector");function Ue(t){return Function.prototype.toString.call(t)+" "}function Le(t){var e=Ue(t).replace(Ne,"");return e.match(Me)||e.match(Re)}function Ve(t,e){e=!0===e;var n={},r="Provider",i=[],o=new Pe([],!0),a={$provide:{provider:h(m),factory:h(b),service:h(function(t,e){return b(t,["$injector",function(t){return t.instantiate(e)}])}),value:h(function(t,e){return b(t,M(e),!1)}),constant:h(function(t,e){Dt(t,"constant"),a[t]=e,u[t]=e}),decorator:function(t,e){var n=l.get(t+r),i=n.$get;n.$get=function(){var t=p.invoke(i,n);return p.invoke(e,null,{$delegate:t})}}}},l=a.$injector=y(a,function(t,e){throw v.isString(e)&&i.push(e),Fe("unpr","Unknown provider: {0}",i.join(" <- "))}),u={},d=y(u,function(t,e){var n=l.get(t+r,e);return p.invoke(n.$get,n,void 0,t)}),p=d;a["$injector"+r]={$get:M(d)};var f=function t(e){Et(j(e)||B(e),"modulesToLoad","not an array");var n,r=[];return w(e,function(e){if(!o.get(e)){o.put(e,!0);try{U(e)?(n=c(e),r=r.concat(t(n.requires)).concat(n._runBlocks),i(n._invokeQueue),i(n._configBlocks)):H(e)?r.push(l.invoke(e)):B(e)?r.push(l.invoke(e)):At(e,"module")}catch(a){throw B(e)&&(e=e[e.length-1]),a.message&&a.stack&&-1===a.stack.indexOf(a.message)&&(a=a.message+"\n"+a.stack),Fe("modulerr","Failed to instantiate module {0} due to:\n{1}",e,a.stack||a.message||a)}}function i(t){var e,n;for(e=0,n=t.length;e<n;e++){var r=t[e],i=l.get(r[0]);i[r[1]].apply(i,r[2])}}}),r}(t);return(p=d.get("$injector")).strictDi=e,w(f,function(t){t&&p.invoke(t)}),p;function h(t){return function(e,n){if(!N(e))return t(e,n);w(e,_(t))}}function m(t,e){if(Dt(t,"service"),(H(e)||B(e))&&(e=l.instantiate(e)),!e.$get)throw Fe("pget","Provider '{0}' must define $get factory method.",t);return a[t+r]=e}function g(t,e){return function(){var n=p.invoke(e,this);if(j(n))throw Fe("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function b(t,e,n){return m(t,{$get:!1!==n?g(t,e):e})}function y(t,o){function l(e,r){if(t.hasOwnProperty(e)){if(t[e]===n)throw Fe("cdep","Circular dependency found: {0}",e+" <- "+i.join(" <- "));return t[e]}try{return i.unshift(e),t[e]=n,t[e]=o(e,r),t[e]}catch(a){throw t[e]===n&&delete t[e],a}finally{i.shift()}}function u(t,n,r){for(var i=[],o=Ve.$$annotate(t,e,r),a=0,s=o.length;a<s;a++){var u=o[a];if("string"!=typeof u)throw Fe("itkn","Incorrect injection token! Expected service name as string, got {0}",u);i.push(n&&n.hasOwnProperty(u)?n[u]:l(u,r))}return i}return{invoke:function(t,e,n,r){"string"==typeof n&&(r=n,n=null);var i,o=u(t,n,r);return B(t)&&(t=t[t.length-1]),i=t,s<=11||"function"!=typeof i||!/^(?:class\b|constructor\()/.test(Ue(i))?t.apply(e,o):(o.unshift(null),new(Function.prototype.bind.apply(t,o)))},instantiate:function(t,e,n){var r=B(t)?t[t.length-1]:t,i=u(t,e,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))},get:l,annotate:Ve.$$annotate,has:function(e){return a.hasOwnProperty(e+r)||t.hasOwnProperty(e)}}}}function Be(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){var o=n.document;function a(t){if(t){t.scrollIntoView();var e=function(){var t=s.yOffset;if(H(t))t=t();else if(X(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else L(t)||(t=0);return t}();if(e){var r=t.getBoundingClientRect().top;n.scrollBy(0,r-e)}}else n.scrollTo(0,0)}function s(t){var e,n,i;(t=U(t)?t:L(t)?t.toString():r.hash())?(e=o.getElementById(t))?a(e):(n=o.getElementsByName(t),i=null,Array.prototype.some.call(n,function(t){if("a"===J(t))return i=t,!0}),(e=i)?a(e):"top"===t&&a(null)):a(null)}return e&&i.$watch(function(){return r.hash()},function(e,n){var r,o;e===n&&""===e||(r=function(){i.$evalAsync(s)},"complete"===(o=o||t).document.readyState?o.setTimeout(r):l(o).on("load",r))}),s}]}Ve.$$annotate=function(t,e,n){var r,i;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw U(n)&&n||(n=t.name||function(t){var e=Le(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Fe("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);w(Le(t)[1].split(je),function(t){t.replace(Ie,function(t,e,n){r.push(n)})})}t.$inject=r}}else B(t)?(At(t[i=t.length-1],"fn"),r=t.slice(0,i)):At(t,"fn",!0);return r};var He=e("$animate"),qe=1;function ze(t,e){return t||e?t?e?(B(t)&&(t=t.join(" ")),B(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function Ge(t){return N(t)?t:{}}var We=function(){this.$get=P},Ye=function(){var t=new Pe,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){return{enabled:P,on:P,off:P,pin:P,push:function(a,s,l,u){u&&u(),(l=l||{}).from&&a.css(l.from),l.to&&a.css(l.to),(l.addClass||l.removeClass)&&function(n,a,s){var l=t.get(n)||{},u=i(l,a,!0),c=i(l,s,!1);(u||c)&&(t.put(n,l),e.push(n),1===e.length&&r.$$postDigest(o))}(a,l.addClass,l.removeClass);var c=new n;return c.complete(),c}};function i(t,e,n){var r=!1;return e&&w(e=U(e)?e.split(" "):B(e)?e:[],function(e){e&&(r=!0,t[e]=n)}),r}function o(){w(e,function(e){var n=t.get(e);if(n){var r=function(t){U(t)&&(t=t.split(" "));var e=Mt();return w(t,function(t){t.length&&(e[t]=!0)}),e}(e.attr("class")),i="",o="";w(n,function(t,e){t!==!!r[e]&&(t?i+=(i.length?" ":"")+e:o+=(o.length?" ":"")+e)}),w(e,function(t){i&&ge(t,i),o&&me(t,o)}),t.remove(e)}}),e.length=0}}]},Ke=["$provide",function(t){var e=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw He("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.classNameFilter=function(t){if(1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null,this.$$classNameFilter&&new RegExp("(\\s+|\\/)ng-animate(\\s+|\\/)").test(this.$$classNameFilter.toString())))throw He("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return this.$$classNameFilter},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===qe)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,r,i,o){return r=r&&l(r),i=i&&l(i),e(n,r=r||i.parent(),i),t.push(n,"enter",Ge(o))},move:function(n,r,i,o){return r=r&&l(r),i=i&&l(i),e(n,r=r||i.parent(),i),t.push(n,"move",Ge(o))},leave:function(e,n){return t.push(e,"leave",Ge(n),function(){e.remove()})},addClass:function(e,n,r){return(r=Ge(r)).addClass=ze(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return(r=Ge(r)).removeClass=ze(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return(i=Ge(i)).addClass=ze(i.addClass,n),i.removeClass=ze(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,o){return(o=Ge(o)).from=o.from?T(o.from,n):n,o.to=o.to?T(o.to,r):r,o.tempClasses=ze(o.tempClasses,i=i||"ng-inline-animate"),t.push(e,"animate",o)}}}]}],Ze=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t(function(){for(var t=0;t<e.length;t++)e[t]();e=[]})}return function(){var t=!1;return n(function(){t=!0}),function(e){t?e():n(e)}}}]},Qe=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(t,e,n,r,i){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){var n=r[0];n&&n.hidden?function(t){i(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function r(){n!==t.length?t[n](function(t){!1!==t?(n++,r()):e(!1)}):e(!0)}()},o.all=function(t,e){var n=0,r=!0;function i(i){r=r&&i,++n===t.length&&e(r)}w(t,function(t){t.done(i)})},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:P,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(t){2!==this._state&&(w(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},o}]},Xe=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,r){var i=r||{};i.$$prepared||(i=et(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(e.css(i.from),i.from=null);var o,a=new n;return{start:s,end:s};function s(){return t(function(){i.addClass&&(e.addClass(i.addClass),i.addClass=null),i.removeClass&&(e.removeClass(i.removeClass),i.removeClass=null),i.to&&(e.css(i.to),i.to=null),o||a.complete(),o=!0}),a}}}]};function Je(t,e,n,r){var i=this,o=t.location,a=t.history,s=t.setTimeout,u=t.clearTimeout,c={};i.isMock=!1;var d=0,p=[];function f(t){try{t.apply(null,at(arguments,1))}finally{if(0==--d)for(;p.length;)try{p.pop()()}catch(e){n.error(e)}}}i.$$completeOutstandingRequest=f,i.$$incOutstandingRequestCount=function(){d++},i.notifyWhenNoOutstandingRequests=function(t){0===d?t():p.push(t)};var h,m,g=o.href,v=e.find("base"),b=null,y=r.history?function(){try{return a.state}catch(t){}}:P;$(),m=h,i.url=function(e,n,s){if(j(s)&&(s=null),o!==t.location&&(o=t.location),a!==t.history&&(a=t.history),e){var l=m===s;if(g===e&&(!r.history||l))return i;var u=g&&Zn(g)===Zn(e);return g=e,m=s,!r.history||u&&l?(u||(b=e),n?o.replace(e):u?o.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):o.href=e,o.href!==e&&(b=e)):(a[n?"replaceState":"pushState"](s,"",e),$(),m=h),b&&(b=e),i}return b||o.href.replace(/%27/g,"'")},i.state=function(){return h};var k=[],_=!1;function x(){b=null,$(),T()}var S=null;function $(){nt(h=j(h=y())?null:h,S)&&(h=S),S=h}function T(){g===i.url()&&m===h||(g=i.url(),m=h,w(k,function(t){t(i.url(),h)}))}i.onUrlChange=function(e){return _||(r.history&&l(t).on("popstate",x),l(t).on("hashchange",x),_=!0),k.push(e),e},i.$$applicationDestroyed=function(){l(t).off("hashchange popstate",x)},i.$$checkUrlChange=T,i.baseHref=function(){var t=v.attr("href");return t?t.replace(/^(https?:)?\/\/[^\/]*/,""):""},i.defer=function(t,e){var n;return d++,n=s(function(){delete c[n],f(t)},e||0),c[n]=!0,n},i.defer.cancel=function(t){return!!c[t]&&(delete c[t],u(t),f(P),!0)}}function tn(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new Je(t,r,e,n)}]}function en(){this.$get=function(){var t={};function n(n,r){if(n in t)throw e("$cacheFactory")("iid","CacheId '{0}' is already taken!",n);var i=0,o=T({},r,{id:n}),a=Mt(),s=r&&r.capacity||Number.MAX_VALUE,l=Mt(),u=null,c=null;return t[n]={put:function(t,e){if(!j(e))return s<Number.MAX_VALUE&&d(l[t]||(l[t]={key:t})),t in a||i++,a[t]=e,i>s&&this.remove(c.key),e},get:function(t){if(s<Number.MAX_VALUE){var e=l[t];if(!e)return;d(e)}return a[t]},remove:function(t){if(s<Number.MAX_VALUE){var e=l[t];if(!e)return;e===u&&(u=e.p),e===c&&(c=e.n),p(e.n,e.p),delete l[t]}t in a&&(delete a[t],i--)},removeAll:function(){a=Mt(),i=0,l=Mt(),u=c=null},destroy:function(){a=null,o=null,l=null,delete t[n]},info:function(){return T({},o,{size:i})}};function d(t){t!==u&&(c?c===t&&(c=t.n):c=t,p(t.n,t.p),p(t,u),(u=t).n=null)}function p(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return n.info=function(){var e={};return w(t,function(t,n){e[n]=t.info()}),e},n.get=function(e){return t[e]},n}}function nn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var rn=e("$compile"),on=new function(){};function an(e,n){var r={},a="Directive",u=/^\s*directive:\s*([\w-]+)\s+(.*)$/,c=/(([\w-]+)(?::([^;]+))?;?)/,d=function(t){var e,n={},r="ngSrc,ngSrcset,src,srcset".split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}(),p=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,f=/^(on[a-z]+|formaction)$/,m=Mt();function g(t,e,n){var r=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,i=Mt();return w(t,function(t,o){if(t in m)i[o]=m[t];else{var a=t.match(r);if(!a)throw rn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");i[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(m[t]=i[o])}}),i}function v(t,e){var n={isolateScope:null,bindToController:null};if(N(t.scope)&&(!0===t.bindToController?(n.bindToController=g(t.scope,e,!0),n.isolateScope={}):n.isolateScope=g(t.scope,e,!1)),N(t.bindToController)&&(n.bindToController=g(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw rn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,i){return Et(n,"name"),Dt(n,"directive"),U(n)?(function(t){var e=t.charAt(0);if(!e||e!==o(e))throw rn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw rn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),Et(i,"directiveFactory"),r.hasOwnProperty(n)||(r[n]=[],e.factory(n+a,["$injector","$exceptionHandler",function(t,e){var i=[];return w(r[n],function(r,o){try{var a=t.invoke(r);H(a)?a={compile:M(a)}:!a.compile&&a.link&&(a.compile=M(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=function(t){var e=t.require||t.controller&&t.name;return!B(e)&&N(e)&&w(e,function(t,n){var r=t.match(p);t.substring(r[0].length)||(e[n]=r[0]+n)}),e}(a),a.restrict=function(t,e){if(t&&(!U(t)||!/[EACM]/.test(t)))throw rn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(a.restrict,n),a.$$moduleName=r.$$moduleName,i.push(a)}catch(s){e(s)}}),i}])),r[n].push(i)):w(n,_(t)),this},this.component=function(t,e){var n=e.controller||function(){};function r(t){function r(e){return H(e)||B(e)?function(n,r){return t.invoke(e,this,{$element:n,$attrs:r})}:e}var i=e.template||e.templateUrl?e.template:"",o={controller:n,controllerAs:hn(e.controller)||e.controllerAs||"$ctrl",template:r(i),templateUrl:r(e.templateUrl),transclude:e.transclude,scope:{},bindToController:e.bindings||{},restrict:"E",require:e.require};return w(e,function(t,e){"$"===e.charAt(0)&&(o[e]=t)}),o}return w(e,function(t,e){"$"===e.charAt(0)&&(r[e]=t,H(n)&&(n[e]=t))}),r.$inject=["$injector"],this.directive(t,r)},this.aHrefSanitizationWhitelist=function(t){return I(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return I(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var b=!0;this.debugInfoEnabled=function(t){return I(t)?(b=t,this):b};var y=!0;this.preAssignBindingsEnabled=function(t){return I(t)?(y=t,this):y};var k=10;this.onChangesTtl=function(t){return arguments.length?(k=t,this):k};var x=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(x=t,this):x};var S=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(S=t,this):S},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,n,m,g,_,$,C,E,A,M){var R,F=/^\w/,L=t.document.createElement("div"),V=x,q=S,z=k;function Y(){try{if(!--z)throw R=void 0,rn("infchng","{0} $onChanges() iterations reached. Aborting!\n",k);C.$apply(function(){for(var t=[],e=0,n=R.length;e<n;++e)try{R[e]()}catch(r){t.push(r)}if(R=void 0,t.length)throw t})}finally{z++}}function K(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;n<r;n++)this[i=o[n]]=e[i]}else this.$attr={};this.$$element=t}function Q(t,e){try{t.addClass(e)}catch(n){}}K.prototype={$normalize:un,$addClass:function(t){t&&t.length>0&&A.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&A.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=cn(t,e);n&&n.length&&A.addClass(this.$$element,n);var r=cn(e,t);r&&r.length&&A.removeClass(this.$$element,r)},$set:function(t,e,n,r){var i,o=Te(this.$$element[0],t),a=$e[t],s=t;if(o?(this.$$element.prop(t,e),r=o):a&&(this[a]=e,s=a),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t])||(this.$attr[t]=r=Tt(t,"-")),"a"===(i=J(this.$$element))&&("href"===t||"xlinkHref"===t)||"img"===i&&"src"===t)this[t]=e=M(e,"src"===t);else if("img"===i&&"srcset"===t&&I(e)){for(var l="",u=Z(e),c=/\s/.test(u)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,d=u.split(c),p=Math.floor(d.length/2),f=0;f<p;f++){var h=2*f;l+=M(Z(d[h]),!0),l+=" "+Z(d[h+1])}var g=Z(d[2*f]).split(/\s/);l+=M(Z(g[0]),!0),2===g.length&&(l+=" "+Z(g[1])),this[t]=e=l}!1!==n&&(null===e||j(e)?this.$$element.removeAttr(r):F.test(r)?this.$$element.attr(r,e):function(t,e,n){L.innerHTML="<span "+e+">";var r=L.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,t.attributes.setNamedItem(i)}(this.$$element[0],r,e));var v=this.$$observers;v&&w(v[s],function(t){try{t(e)}catch(n){m(n)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=Mt()),i=r[t]||(r[t]=[]);return i.push(e),C.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(t)||j(n[t])||e(n[t])}),function(){tt(i,e)}}};var X=n.startSymbol(),et=n.endSymbol(),rt="{{"===X&&"}}"===et?O:function(t){return t.replace(/\{\{/g,X).replace(/}}/g,et)},it=/^ngAttr[A-Z]/,ot=/^(.+)Start$/;return lt.$$addBindingInfo=b?function(t,e){var n=t.data("$binding")||[];B(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:P,lt.$$addBindingClass=b?function(t){Q(t,"ng-binding")}:P,lt.$$addScopeInfo=b?function(t,e,n,r){t.data(n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope",e)}:P,lt.$$addScopeClass=b?function(t,e){Q(t,e?"ng-isolate-scope":"ng-scope")}:P,lt.$$createComment=function(e,n){var r="";return b&&(r=" "+(e||"")+": ",n&&(r+=n+" ")),t.document.createComment(r)},lt;function lt(e,n,r,i,o){e instanceof l||(e=l(e));for(var a=/\S+/,s=0,u=e.length;s<u;s++){var c=e[s];c.nodeType===jt&&c.nodeValue.match(a)&&oe(c,e[s]=t.document.createElement("span"))}var d=ut(e,n,e,r,i,o);lt.$$addScopeClass(e);var p=null;return function(t,n,r){Et(t,"scope"),o&&o.needsNewScope&&(t=t.$parent.$new());var i,a,s,u=(r=r||{}).parentBoundTranscludeFn,c=r.transcludeControllers;if(u&&u.$$boundTransclude&&(u=u.$$boundTransclude),p||(p=(a=(i=r.futureParentElement)&&i[0])&&"foreignobject"!==J(a)&&h.call(a).match(/SVG/)?"svg":"html"),s="html"!==p?l($t(p,l("<div>").append(e).html())):n?_e.clone.call(e):e,c)for(var f in c)s.data("$"+f+"Controller",c[f].instance);return lt.$$addScopeInfo(s,t),n&&n(s,t),d&&d(t,s,s,u),s}}function ut(t,e,n,r,i,o){for(var a,s,u,c,d,p,f,h=[],m=0;m<t.length;m++)a=new K,(u=(s=dt(t[m],[],a,0===m?r:void 0,i)).length?gt(s,t[m],a,e,n,null,[],[],o):null)&&u.scope&&lt.$$addScopeClass(a.$$element),d=u&&u.terminal||!(c=t[m].childNodes)||!c.length?null:ut(c,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:e),(u||d)&&(h.push(m,u,d),p=!0,f=f||u),o=null;return p?function(t,n,r,i){var o,a,s,u,c,d,p,m;if(f)for(m=new Array(n.length),c=0;c<h.length;c+=3)m[p=h[c]]=n[p];else m=n;for(c=0,d=h.length;c<d;)s=m[h[c++]],o=h[c++],a=h[c++],o?(o.scope?(u=t.$new(),lt.$$addScopeInfo(l(s),u)):u=t,o(a,u,s,r,o.transcludeOnThisElement?ct(t,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&e?ct(t,e):null)):a&&a(t,s.childNodes,void 0,i)}:null}function ct(t,e,n){function r(r,i,o,a,s){return r||((r=t.$new(!1,s)).$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=Mt();for(var o in e.$$slots)i[o]=e.$$slots[o]?ct(t,e.$$slots[o],n):null;return r}function dt(t,e,r,i,o){var a,l,d,p=r.$attr;switch(t.nodeType){case Rt:yt(e,un(l=J(t)),"E",i,o);for(var f,h,m,g,v,b,y=t.attributes,w=0,k=y&&y.length;w<k;w++){var _=!1,x=!1;h=(f=y[w]).name,v=Z(f.value),g=un(h),(b=it.test(g))&&(h=h.replace(ln,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var S=g.match(ot);S&&wt(S[1])&&(_=h,x=h.substr(0,h.length-5)+"end",h=h.substr(0,h.length-6)),p[m=un(h.toLowerCase())]=h,!b&&r.hasOwnProperty(m)||(r[m]=v,Te(t,m)&&(r[m]=!0)),Ct(t,e,v,m,b),yt(e,m,"A",i,o,_,x)}if("input"===l&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!q)break;if(N(d=t.className)&&(d=d.animVal),U(d)&&""!==d)for(;a=c.exec(d);)yt(e,m=un(a[2]),"C",i,o)&&(r[m]=Z(a[3])),d=d.substr(a.index+a[0].length);break;case jt:if(11===s)for(;t.parentNode&&t.nextSibling&&t.nextSibling.nodeType===jt;)t.nodeValue=t.nodeValue+t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);!function(e,r){var i=n(t.nodeValue,!0);i&&e.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&lt.$$addBindingClass(e),function(t,e){var r=e.parent();n||lt.$$addBindingClass(r),lt.$$addBindingInfo(r,i.expressions),t.$watch(i,function(t){e[0].nodeValue=t})}}})}(e);break;case It:if(!V)break;!function(t,e,n,r,i){try{var o=u.exec(t.nodeValue);if(o){var a=un(o[1]);yt(e,a,"M",r,i)&&(n[a]=Z(o[2]))}}catch(s){}}(t,e,r,i,o)}return e.sort(xt),e}function pt(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw rn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType===Rt&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0);else r.push(t);return l(r)}function ft(t,e,n){return function(r,i,o,a,s){return i=pt(i[0],e,n),t(r,i,o,a,s)}}function mt(t,e,n,r,i,o){var a;return t?lt(e,n,r,i,o):function(){return a||(a=lt(e,n,r,i,o),e=n=o=null),a.apply(this,arguments)}}function gt(t,e,n,r,i,o,a,s,u){u=u||{};for(var c,d,p,f,h,g=-Number.MAX_VALUE,v=u.newScopeDirective,b=u.controllerDirectives,k=u.newIsolateScopeDirective,_=u.templateDirective,x=u.nonTlbTranscludeDirective,S=!1,C=!1,E=u.hasElementTranscludeDirective,A=n.$$element=l(e),D=o,P=r,O=!1,M=!1,R=0,I=t.length;R<I;R++){var F=(c=t[R]).$$start,U=c.$$end;if(F&&(A=pt(e,F,U)),p=void 0,g>c.priority)break;if((h=c.scope)&&(c.templateUrl||(N(h)?(St("new/isolated scope",k||v,c,A),k=c):St("new/isolated scope",k,c,A)),v=v||c),d=c.name,!O&&(c.replace&&(c.templateUrl||c.template)||c.transclude&&!c.$$tlb)){for(var L,V=R+1;L=t[V++];)if(L.transclude&&!L.$$tlb||L.replace&&(L.templateUrl||L.template)){M=!0;break}O=!0}if(!c.templateUrl&&c.controller&&(b=b||Mt(),St("'"+d+"' controller",b[d],c,A),b[d]=c),h=c.transclude)if(S=!0,c.$$tlb||(St("transclusion",x,c,A),x=c),"element"===h)E=!0,g=c.priority,p=A,A=n.$$element=l(lt.$$createComment(d,n[d])),e=A[0],At(i,at(p),e),p[0].$$parentNode=p[0].parentNode,P=mt(M,p,r,g,D&&D.name,{nonTlbTranscludeDirective:x});else{var q=Mt();if(p=l(le(e)).contents(),N(h)){p=[];var z=Mt(),W=Mt();for(var Y in w(h,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,z[t]=e,q[e]=null,W[e]=n}),w(A.contents(),function(t){var e=z[un(J(t))];e?(W[e]=!0,q[e]=q[e]||[],q[e].push(t)):p.push(t)}),w(W,function(t,e){if(!t)throw rn("reqslot","Required transclusion slot `{0}` was not filled.",e)}),q)q[Y]&&(q[Y]=mt(M,q[Y],r))}A.empty(),(P=mt(M,p,r,void 0,void 0,{needsNewScope:c.$$isolateScope||c.$$newScope})).$$slots=q}if(c.template)if(C=!0,St("template",_,c,A),_=c,h=H(c.template)?c.template(A,n):c.template,h=rt(h),c.replace){if(D=c,p=ne(h)?[]:dn($t(c.templateNamespace,Z(h))),e=p[0],1!==p.length||e.nodeType!==Rt)throw rn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",d,"");At(i,A,e);var Q={$attr:{}},X=dt(e,[],Q),tt=t.splice(R+1,t.length-(R+1));(k||v)&&bt(X,k,v),t=t.concat(X).concat(tt),kt(n,Q),I=t.length}else A.html(h);if(c.templateUrl)C=!0,St("template",_,c,A),_=c,c.replace&&(D=c),it=_t(t.splice(R,t.length-R),A,n,i,S&&P,a,s,{controllerDirectives:b,newScopeDirective:v!==c&&v,newIsolateScopeDirective:k,templateDirective:_,nonTlbTranscludeDirective:x}),I=t.length;else if(c.compile)try{f=c.compile(A,n,P);var et=c.$$originalDirective||c;H(f)?nt(null,st(et,f),F,U):f&&nt(st(et,f.pre),st(et,f.post),F,U)}catch(ot){m(ot,ht(A))}c.terminal&&(it.terminal=!0,g=Math.max(g,c.priority))}return it.scope=v&&!0===v.scope,it.transcludeOnThisElement=S,it.templateOnThisElement=C,it.transclude=P,u.hasElementTranscludeDirective=E,it;function nt(t,e,n,r){t&&(n&&(t=ft(t,n,r)),t.require=c.require,t.directiveName=d,(k===c||c.$$isolateScope)&&(t=Dt(t,{isolateScope:!0})),a.push(t)),e&&(n&&(e=ft(e,n,r)),e.require=c.require,e.directiveName=d,(k===c||c.$$isolateScope)&&(e=Dt(e,{isolateScope:!0})),s.push(e))}function it(t,r,i,o,u){var c,d,p,f,h,g,x,S,C,A;for(var D in e===i?(C=n,S=n.$$element):C=new K(S=l(i),n),h=r,k?f=r.$new(!0):v&&(h=r.$parent),u&&((x=function(t,e,n,r){var i;if(G(t)||(r=n,n=e,e=t,t=void 0),E&&(i=g),n||(n=E?S.parent():S),!r)return u(t,e,i,n,I);var o=u.$$slots[r];if(o)return o(t,e,i,n,I);if(j(o))throw rn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,ht(S))}).$$boundTransclude=u,x.isSlotFilled=function(t){return!!u.$$slots[t]}),b&&(g=function(t,e,n,r,i,o,a){var s=Mt();for(var l in r){var u=r[l],c=u.controller;"@"===c&&(c=e[u.name]);var d=$(c,{$scope:u===a||u.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:n},!0,u.controllerAs);s[u.name]=d,t.data("$"+u.name+"Controller",d.instance)}return s}(S,C,x,b,f,r,k)),k&&(lt.$$addScopeInfo(S,f,!0,!(_&&(_===k||_===k.$$originalDirective))),lt.$$addScopeClass(S,!0),f.$$isolateBindings=k.$$isolateBindings,(A=Ot(r,C,f,f.$$isolateBindings,k)).removeWatches&&f.$on("$destroy",A.removeWatches)),g){var P=b[D],O=g[D],M=P.$$bindings.bindToController;if(y){O.bindingInfo=M?Ot(h,C,O.instance,M,P):{};var R=O();R!==O.instance&&(O.instance=R,S.data("$"+P.name+"Controller",R),O.bindingInfo.removeWatches&&O.bindingInfo.removeWatches(),O.bindingInfo=Ot(h,C,O.instance,M,P))}else O.instance=O(),S.data("$"+P.name+"Controller",O.instance),O.bindingInfo=Ot(h,C,O.instance,M,P)}for(w(b,function(t,e){var n=t.require;t.bindToController&&!B(n)&&N(n)&&T(g[e].instance,vt(e,n,S,g))}),w(g,function(t){var e=t.instance;if(H(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(ot){m(ot)}if(H(e.$onInit))try{e.$onInit()}catch(ot){m(ot)}H(e.$doCheck)&&(h.$watch(function(){e.$doCheck()}),e.$doCheck()),H(e.$onDestroy)&&h.$on("$destroy",function(){e.$onDestroy()})}),c=0,d=a.length;c<d;c++)Pt(p=a[c],p.isolateScope?f:r,S,C,p.require&&vt(p.directiveName,p.require,S,g),x);var I=r;for(k&&(k.template||null===k.templateUrl)&&(I=f),t&&t(I,i.childNodes,void 0,u),c=s.length-1;c>=0;c--)Pt(p=s[c],p.isolateScope?f:r,S,C,p.require&&vt(p.directiveName,p.require,S,g),x);w(g,function(t){var e=t.instance;H(e.$postLink)&&e.$postLink()})}}function vt(t,e,n,r){var i;if(U(e)){var o=e.match(p),a=e.substring(o[0].length),s=o[1]||o[3],l="?"===o[2];if("^^"===s?n=n.parent():i=(i=r&&r[a])&&i.instance,!i){var u="$"+a+"Controller";i=s?n.inheritedData(u):n.data(u)}if(!i&&!l)throw rn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(B(e)){i=[];for(var c=0,d=e.length;c<d;c++)i[c]=vt(t,e[c],n,r)}else N(e)&&(i={},w(e,function(e,o){i[o]=vt(t,e,n,r)}));return i||null}function bt(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=D(t[r],{$$isolateScope:e,$$newScope:n})}function yt(t,n,i,o,s,l,u){if(n===s)return null;var c=null;if(r.hasOwnProperty(n))for(var d,p=e.get(n+a),f=0,h=p.length;f<h;f++)if(d=p[f],(j(o)||o>d.priority)&&-1!==d.restrict.indexOf(i)){if(l&&(d=D(d,{$$start:l,$$end:u})),!d.$$bindings){var m=d.$$bindings=v(d,d.name);N(m.isolateScope)&&(d.$$isolateBindings=m.isolateScope)}t.push(d),c=d}return c}function wt(t){if(r.hasOwnProperty(t))for(var n=e.get(t+a),i=0,o=n.length;i<o;i++)if(n[i].multiElement)return!0;return!1}function kt(t,e){var n=e.$attr,r=t.$attr;w(t,function(r,i){"$"!==i.charAt(0)&&(e[i]&&e[i]!==r&&(r+=("style"===i?";":" ")+e[i]),t.$set(i,r,!0,n[i]))}),w(e,function(e,i){t.hasOwnProperty(i)||"$"===i.charAt(0)||(t[i]=e,"class"!==i&&"style"!==i&&(r[i]=n[i]))})}function _t(t,e,n,r,i,o,a,s){var u,c,d=[],p=e[0],f=t.shift(),h=D(f,{templateUrl:null,transclude:null,replace:null,$$originalDirective:f}),m=H(f.templateUrl)?f.templateUrl(e,n):f.templateUrl,v=f.templateNamespace;return e.empty(),g(m).then(function(g){var b,y,k,_;if(g=rt(g),f.replace){if(k=ne(g)?[]:dn($t(v,Z(g))),b=k[0],1!==k.length||b.nodeType!==Rt)throw rn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",f.name,m);y={$attr:{}},At(r,e,b);var x=dt(b,[],y);N(f.scope)&&bt(x,!0),t=x.concat(t),kt(n,y)}else b=p,e.html(g);for(t.unshift(h),u=gt(t,b,n,i,e,f,o,a,s),w(r,function(t,n){t===b&&(r[n]=e[0])}),c=ut(e[0].childNodes,i);d.length;){var S=d.shift(),$=d.shift(),T=d.shift(),C=d.shift(),E=e[0];if(!S.$$destroyed){if($!==p){var A=$.className;s.hasElementTranscludeDirective&&f.replace||(E=le(b)),At(T,l($),E),Q(l(E),A)}_=u.transcludeOnThisElement?ct(S,u.transclude,C):C,u(c,S,E,r,_)}}d=null}),function(t,e,n,r,i){var o=i;e.$$destroyed||(d?d.push(e,n,r,o):(u.transcludeOnThisElement&&(o=ct(e,u.transclude,i)),u(c,e,n,r,o)))}}function xt(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function St(t,e,n,r){function i(t){return t?" (module: "+t+")":""}if(e)throw rn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,i(e.$$moduleName),n.name,i(n.$$moduleName),t,ht(r))}function $t(e,n){switch(e=o(e||"html")){case"svg":case"math":var r=t.document.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function Ct(t,e,r,i,o){var a=function(t,e){if("srcdoc"===e)return E.HTML;var n=J(t);if("src"===e||"ngSrc"===e){if(-1===["img","video","audio","source","track"].indexOf(n))return E.RESOURCE_URL}else if("xlinkHref"===e||"form"===n&&"action"===e)return E.RESOURCE_URL}(t,i),s=d[i]||o,l=n(r,!o,a,s);if(l){if("multiple"===i&&"select"===J(t))throw rn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",ht(t));e.push({priority:100,compile:function(){return{pre:function(t,e,o){var u=o.$$observers||(o.$$observers=Mt());if(f.test(i))throw rn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=o[i];c!==r&&(l=c&&n(c,!0,a,s),r=c),l&&(o[i]=l(t),(u[i]||(u[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||t).$watch(l,function(t,e){"class"===i&&t!==e?o.$updateClass(t,e):o.$set(i,t)}))}}}})}}function At(e,n,r){var i,o,a=n[0],s=n.length,u=a.parentNode;if(e)for(i=0,o=e.length;i<o;i++)if(e[i]===a){e[i++]=r;for(var c=i,d=c+s-1,p=e.length;c<p;c++,d++)d<p?e[c]=e[d]:delete e[c];e.length-=s-1,e.context===a&&(e.context=r);break}u&&u.replaceChild(r,a);var f=t.document.createDocumentFragment();for(i=0;i<s;i++)f.appendChild(n[i]);for(l.hasData(a)&&(l.data(r,l.data(a)),l(a).off("$destroy")),l.cleanData(f.querySelectorAll("*")),i=1;i<s;i++)delete n[i];n[0]=r,n.length=1}function Dt(t,e){return T(function(){return t.apply(null,arguments)},t,e)}function Pt(t,e,n,r,i,o){try{t(e,n,r,i,o)}catch(a){m(a,ht(n))}}function Ot(t,e,r,o,a){var s,l=[],u={};function c(e,n,i){!H(r.$onChanges)||n===i||n!=n&&i!=i||(R||(t.$$postDigest(Y),R=[]),s||(s={},R.push(d)),s[e]&&(i=s[e].previousValue),s[e]=new sn(i,n))}function d(){r.$onChanges(s),s=void 0}return w(o,function(o,s){var d,p,f,h,m,g=o.attrName,v=o.optional;switch(o.mode){case"@":v||i.call(e,g)||(r[s]=e[g]=void 0),m=e.$observe(g,function(t){(U(t)||W(t))&&(c(s,t,r[s]),r[s]=t)}),e.$$observers[g].$$scope=t,U(d=e[g])?r[s]=n(d)(t):W(d)&&(r[s]=d),u[s]=new sn(on,r[s]),l.push(m);break;case"=":if(!i.call(e,g)){if(v)break;e[g]=void 0}if(v&&!e[g])break;p=_(e[g]),h=p.literal?nt:function(t,e){return t===e||t!=t&&e!=e},f=p.assign||function(){throw d=r[s]=p(t),rn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[g],g,a.name)},d=r[s]=p(t);var b=function(e){return h(e,r[s])||(h(e,d)?f(t,e=r[s]):r[s]=e),d=e};b.$stateful=!0,m=o.collection?t.$watchCollection(e[g],b):t.$watch(_(e[g],b),null,p.literal),l.push(m);break;case"<":if(!i.call(e,g)){if(v)break;e[g]=void 0}if(v&&!e[g])break;var y=(p=_(e[g])).literal,w=r[s]=p(t);u[s]=new sn(on,r[s]),m=t.$watch(p,function(t,e){if(e===t){if(e===w||y&&nt(e,w))return;e=w}c(s,t,e),r[s]=t},y),l.push(m);break;case"&":if((p=e.hasOwnProperty(g)?_(e[g]):P)===P&&v)break;r[s]=function(e){return p(t,e)}}}),{initialChanges:u,removeWatches:l.length&&function(){for(var t=0,e=l.length;t<e;++t)l[t]()}}}}]}function sn(t,e){this.previousValue=t,this.currentValue=e}an.$inject=["$provide","$$sanitizeUriProvider"],sn.prototype.isFirstChange=function(){return this.previousValue===on};var ln=/^((?:x|data)[:\-_])/i;function un(t){return Zt(t.replace(ln,""))}function cn(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a===i[s])continue t;n+=(n.length>0?" ":"")+a}return n}function dn(t){var e=(t=l(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(n.nodeType===It||n.nodeType===jt&&""===n.nodeValue.trim())&&p.call(t,e,1)}return t}var pn=e("$controller"),fn=/^(\S+)(\s+as\s+([\w$]+))?$/;function hn(t,e){if(e&&U(e))return e;if(U(t)){var n=fn.exec(t);if(n)return n[3]}}function mn(){var t={},n=!1;this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){Dt(e,"controller"),N(e)?T(t,e):t[e]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(r,i){return function(e,a,s,l){var u,c,d,p;if(s=!0===s,l&&U(l)&&(p=l),U(e)){if(!(c=e.match(fn)))throw pn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",e);if(p=p||c[3],!(e=t.hasOwnProperty(d=c[1])?t[d]:Pt(a.$scope,d,!0)||(n?Pt(i,d,!0):void 0)))throw pn("ctrlreg","The controller with the name '{0}' is not registered.",d);At(e,d,!0)}if(s){var f=(B(e)?e[e.length-1]:e).prototype;return u=Object.create(f||null),p&&o(a,p,u,d||e.name),T(function(){var t=r.invoke(e,u,a,d);return t!==u&&(N(t)||H(t))&&(u=t,p&&o(a,p,u,d||e.name)),u},{instance:u,identifier:p})}return u=r.instantiate(e,a,d),p&&o(a,p,u,d||e.name),u};function o(t,n,r,i){if(!t||!N(t.$scope))throw e("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,n);t.$scope[n]=r}}]}function gn(){this.$get=["$window",function(t){return l(t.document)}]}function vn(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var bn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof l&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},yn="application/json",wn={"Content-Type":yn+";charset=utf-8"},kn=/^\[|^\{(?!\{)/,_n={"[":/]$/,"{":/}$/},xn=/^\)]\}',?\n/,Sn=e("$http"),$n=function(t){return function(){throw Sn("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",t)}};function Tn(t){return N(t)?V(t)?t.toISOString():ut(t):t}function Cn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return k(t,function(t,n){null===t||j(t)||(B(t)?w(t,function(t){e.push(yt(n)+"="+yt(Tn(t)))}):e.push(yt(n)+"="+yt(Tn(t))))}),e.join("&")}}}function En(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,r,i){null===n||j(n)||(B(n)?w(n,function(e,n){t(e,r+"["+(N(e)?n:"")+"]")}):N(n)&&!V(n)?k(n,function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))}):e.push(yt(r)+"="+yt(Tn(n))))}(t,"",!0),e.join("&")}}}function An(t,e){if(U(t)){var n=t.replace(xn,"").trim();if(n){var r=e("Content-Type");(r&&0===r.indexOf(yn)||(o=(i=n).match(kn))&&_n[o[0]].test(i))&&(t=ct(n))}}var i,o;return t}function Dn(t){var e,n=Mt();function r(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return U(t)?w(t.split("\n"),function(t){e=t.indexOf(":"),r(o(Z(t.substr(0,e))),Z(t.substr(e+1)))}):N(t)&&w(t,function(t,e){r(o(e),Z(t))}),n}function Pn(t){var e;return function(n){if(e||(e=Dn(t)),n){var r=e[o(n)];return void 0===r&&(r=null),r}return e}}function On(t,e,n,r){return H(r)?r(t,e,n):(w(r,function(r){t=r(t,e,n)}),t)}function Mn(t){return 200<=t&&t<300}function Rn(){var t=this.defaults={transformResponse:[An],transformRequest:[function(t){return N(t)&&"[object File]"!==h.call(t)&&"[object Blob]"!==h.call(t)&&"[object FormData]"!==h.call(t)?ut(t):t}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Ut(wn),put:Ut(wn),patch:Ut(wn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},n=!1;this.useApplyAsync=function(t){return I(t)?(n=!!t,this):n};var r=!0;this.useLegacyPromiseExtensions=function(t){return I(t)?(r=!!t,this):r};var i=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(s,l,u,c,d,p){var f=u("$http");t.paramSerializer=U(t.paramSerializer)?p.get(t.paramSerializer):t.paramSerializer;var h=[];function m(i){if(!N(i))throw e("$http")("badreq","Http request configuration must be an object.  Received: {0}",i);if(!U(i.url))throw e("$http")("badreq","Http request configuration url must be a string.  Received: {0}",i.url);var u=T({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer},i);u.headers=function(e){var n,r,i,a=t.headers,s=T({},e.headers);a=T({},a.common,a[o(e.method)]);t:for(n in a){for(i in r=o(n),s)if(o(i)===r)continue t;s[n]=a[n]}return function(t,e){var n,r={};return w(t,function(t,i){H(t)?null!=(n=t(e))&&(r[i]=n):r[i]=t}),r}(s,Ut(e))}(i),u.method=a(u.method),u.paramSerializer=U(u.paramSerializer)?p.get(u.paramSerializer):u.paramSerializer;var g=[],v=[],b=d.when(u);return w(h,function(t){(t.request||t.requestError)&&g.unshift(t.request,t.requestError),(t.response||t.responseError)&&v.push(t.response,t.responseError)}),b=y(b,g),b=y(b=b.then(function(e){var r=e.headers,i=On(e.data,Pn(r),void 0,e.transformRequest);return j(i)&&w(r,function(t,e){"content-type"===o(e)&&delete r[e]}),j(e.withCredentials)&&!j(t.withCredentials)&&(e.withCredentials=t.withCredentials),function(e,r){var i,o,a=d.defer(),u=a.promise,p=e.headers,h=function(t,e){return e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}(e.url,e.paramSerializer(e.params));if(m.pendingRequests.push(e),u.then(k,k),!e.cache&&!t.cache||!1===e.cache||"GET"!==e.method&&"JSONP"!==e.method||(i=N(e.cache)?e.cache:N(t.cache)?t.cache:f),i&&(I(o=i.get(h))?Y(o)?o.then(y,y):B(o)?b(o[1],o[0],Ut(o[2]),o[3]):b(o,200,{},"OK"):i.put(h,u)),j(o)){var g=di(e.url)?l()[e.xsrfCookieName||t.xsrfCookieName]:void 0;g&&(p[e.xsrfHeaderName||t.xsrfHeaderName]=g),s(e.method,h,r,function(t,e,r,o){function a(){b(e,t,r,o)}i&&(Mn(t)?i.put(h,[t,e,Dn(r),o]):i.remove(h)),n?c.$applyAsync(a):(a(),c.$$phase||c.$apply())},p,e.timeout,e.withCredentials,e.responseType,v(e.eventHandlers),v(e.uploadEventHandlers))}return u;function v(t){if(t){var e={};return w(t,function(t,r){e[r]=function(e){function r(){t(e)}n?c.$applyAsync(r):c.$$phase?r():c.$apply(r)}}),e}}function b(t,n,r,i){(Mn(n=n>=-1?n:0)?a.resolve:a.reject)({data:t,status:n,headers:Pn(r),config:e,statusText:i})}function y(t){b(t.data,t.status,Ut(t.headers()),t.statusText)}function k(){var t=m.pendingRequests.indexOf(e);-1!==t&&m.pendingRequests.splice(t,1)}}(e,i).then(k,k)}),v),r?(b.success=function(t){return At(t,"fn"),b.then(function(e){t(e.data,e.status,e.headers,u)}),b},b.error=function(t){return At(t,"fn"),b.then(null,function(e){t(e.data,e.status,e.headers,u)}),b}):(b.success=$n("success"),b.error=$n("error")),b;function y(t,e){for(var n=0,r=e.length;n<r;){var i=e[n++],o=e[n++];t=t.then(i,o)}return e.length=0,t}function k(t){var e=T({},t);return e.data=On(t.data,t.headers,t.status,u.transformResponse),Mn(t.status)?e:d.reject(e)}}return w(i,function(t){h.unshift(U(t)?p.get(t):p.invoke(t))}),m.pendingRequests=[],function(t){w(arguments,function(t){m[t]=function(e,n){return m(T({},n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){w(arguments,function(t){m[t]=function(e,n,r){return m(T({},r||{},{method:t,url:e,data:n}))}})}("post","put","patch"),m.defaults=t,m}]}function jn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function In(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,r){return function(t,e,n,r,i){return function(a,s,l,u,c,d,p,f,h,m){if(t.$$incOutstandingRequestCount(),s=s||t.url(),"jsonp"===o(a))var g=r.createCallback(s),v=function(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=i.createElement("script"),a=null;return o.type="text/javascript",o.src=t,o.async=!0,a=function(t){zt(o,"load",a),zt(o,"error",a),i.body.removeChild(o),o=null;var s=-1,l="unknown";t&&("load"!==t.type||r.wasCalled(e)||(t={type:"error"}),l=t.type,s="error"===t.type?404:200),n&&n(s,l)},qt(o,"load",a),qt(o,"error",a),i.body.appendChild(o),a}(s,g,function(t,e){var n=200===t&&r.getResponse(g);x(u,t,n,"",e),r.removeCallback(g)});else{var b=e(a,s);b.open(a,s,!0),w(c,function(t,e){I(t)&&b.setRequestHeader(e,t)}),b.onload=function(){var t=b.statusText||"",e="response"in b?b.response:b.responseText,n=1223===b.status?204:b.status;0===n&&(n=e?200:"file"===ci(s).protocol?404:0),x(u,n,e,b.getAllResponseHeaders(),t)};var y=function(){x(u,-1,null,null,"")};if(b.onerror=y,b.onabort=y,b.ontimeout=y,w(h,function(t,e){b.addEventListener(e,t)}),w(m,function(t,e){b.upload.addEventListener(e,t)}),p&&(b.withCredentials=!0),f)try{b.responseType=f}catch(S){if("json"!==f)throw S}b.send(j(l)?null:l)}if(d>0)var k=n(_,d);else Y(d)&&d.then(_);function _(){v&&v(),b&&b.abort()}function x(e,r,i,o,a){I(k)&&n.cancel(k),v=b=null,e(r,i,o,a),t.$$completeOutstandingRequest(P)}}}(t,r,t.defer,e,n[0])}]}var Nn=v.$interpolateMinErr=e("$interpolate");function Fn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){var o=t.length,a=e.length,s=new RegExp(t.replace(/./g,u),"g"),l=new RegExp(e.replace(/./g,u),"g");function u(t){return"\\\\\\"+t}function c(n){return n.replace(s,t).replace(l,e)}function d(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function p(s,l,u,p){var f;if(!s.length||-1===s.indexOf(t))return l||((f=M(c(s))).exp=s,f.expressions=[],f.$$watchDelegate=d),f;p=!!p;for(var h,m,g,v=0,b=[],y=[],w=s.length,k=[],_=[];v<w;){if(-1===(h=s.indexOf(t,v))||-1===(m=s.indexOf(e,h+o))){v!==w&&k.push(c(s.substring(v)));break}v!==h&&k.push(c(s.substring(v,h))),g=s.substring(h+o,m),b.push(g),y.push(n(g,$)),v=m+a,_.push(k.length),k.push("")}if(u&&k.length>1&&Nn.throwNoconcat(s),!l||b.length){var x=function(t){for(var e=0,n=b.length;e<n;e++){if(p&&j(t[e]))return;k[_[e]]=t[e]}return k.join("")},S=function(t){return u?i.getTrusted(u,t):i.valueOf(t)};return T(function(t){var e=0,n=b.length,i=new Array(n);try{for(;e<n;e++)i[e]=y[e](t);return x(i)}catch(o){r(Nn.interr(s,o))}},{exp:s,expressions:b,$$watchDelegate:function(t,e){var n;return t.$watchGroup(y,function(r,i){var o=x(r);H(e)&&e.call(this,o,r!==i?n:o,t),n=o})}})}function $(t){try{return t=S(t),p&&!I(t)?t:function(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=ut(t)}return t}(t)}catch(e){r(Nn.interr(s,e))}}}return p.startSymbol=function(){return t},p.endSymbol=function(){return e},p}]}function Un(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,r,i){var o={};function a(a,s,l,u){var c=arguments.length>4,d=c?at(arguments,4):[],p=e.setInterval,f=e.clearInterval,h=0,m=I(u)&&!u,g=(m?r:n).defer(),v=g.promise;return l=I(l)?l:0,v.$$intervalId=p(function(){m?i.defer(b):t.$evalAsync(b),g.notify(h++),l>0&&h>=l&&(g.resolve(h),f(v.$$intervalId),delete o[v.$$intervalId]),m||t.$apply()},s),o[v.$$intervalId]=g,v;function b(){c?a.apply(null,d):a(h)}}return a.cancel=function(t){return!!(t&&t.$$intervalId in o)&&(o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0)},a}]}Nn.throwNoconcat=function(t){throw Nn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Nn.interr=function(t,e){return Nn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Ln=function(){this.$get=["$window",function(t){var e=t.angular.callbacks,n={};return{createCallback:function(t){var r="_"+(e.$$counter++).toString(36),i="angular.callbacks."+r,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(r);return n[i]=e[r]=o,i},wasCalled:function(t){return n[t].called},getResponse:function(t){return n[t].data},removeCallback:function(t){delete e[n[t].id],delete n[t]}}}]},Vn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Bn={http:80,https:443,ftp:21},Hn=e("$location");function qn(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=bt(e[n]);return e.join("/")}function zn(t,e){var n=ci(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=E(n.port)||Bn[n.protocol]||null}var Gn=/^\s*[\\\/]{2,}/;function Wn(t,e){if(Gn.test(t))throw Hn("badpath",'Invalid url "{0}".',t);var n="/"!==t.charAt(0);n&&(t="/"+t);var r=ci(t);e.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),e.$$search=gt(r.search),e.$$hash=decodeURIComponent(r.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Yn(t,e){return t.slice(0,e.length)===e}function Kn(t,e){if(Yn(e,t))return e.substr(t.length)}function Zn(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function Qn(t){return t.replace(/(#.+)|#$/,"$1")}function Xn(t,e,n){this.$$html5=!0,n=n||"",zn(t,this),this.$$parse=function(t){var n=Kn(e,t);if(!U(n))throw Hn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);Wn(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=vt(this.$$search),n=this.$$hash?"#"+bt(this.$$hash):"";this.$$url=qn(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(I(o=Kn(t,r))?(a=o,s=n&&I(o=Kn(n,o))?e+(Kn("/",o)||o):t+a):I(o=Kn(e,r))?s=e+o:e===r+"/"&&(s=e),s&&this.$$parse(s),!!s);var o,a,s}}function Jn(t,e,n){zn(t,this),this.$$parse=function(r){var i,o=Kn(t,r)||Kn(e,r);j(o)||"#"!==o.charAt(0)?this.$$html5?i=o:(i="",j(o)&&(t=r,this.replace())):j(i=Kn(n,o))&&(i=o),Wn(i,this),this.$$path=function(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;return Yn(e,n)&&(e=e.replace(n,"")),i.exec(e)?t:(r=i.exec(t))?r[1]:t}(this.$$path,i,t),this.$$compose()},this.$$compose=function(){var e=vt(this.$$search),r=this.$$hash?"#"+bt(this.$$hash):"";this.$$url=qn(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(e,n){return Zn(t)===Zn(e)&&(this.$$parse(e),!0)}}function tr(t,e,n){this.$$html5=!0,Jn.apply(this,arguments),this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(t===Zn(r)?o=r:(a=Kn(e,r))?o=t+n+a:e===r+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,a},this.$$compose=function(){var e=vt(this.$$search),r=this.$$hash?"#"+bt(this.$$hash):"";this.$$url=qn(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+n+this.$$url}}var er={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:nr("$$absUrl"),url:function(t){if(j(t))return this.$$url;var e=Vn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:nr("$$protocol"),host:nr("$$host"),port:nr("$$port"),path:rr("$$path",function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(U(t)||L(t))t=t.toString(),this.$$search=gt(t);else{if(!N(t))throw Hn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");w(t=et(t,{}),function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:j(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:rr("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};function nr(t){return function(){return this[t]}}function rr(t,e){return function(n){return j(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function ir(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return I(e)?(t=e,this):t},this.html5Mode=function(t){return W(t)?(e.enabled=t,this):N(t)?(W(t.enabled)&&(e.enabled=t.enabled),W(t.requireBase)&&(e.requireBase=t.requireBase),(W(t.rewriteLinks)||U(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){var s,u,c,d,p=r.baseHref(),f=r.url();if(e.enabled){if(!p&&e.requireBase)throw Hn("nobase","$location in HTML5 mode requires a <base> tag to be present!");c=(d=f).substring(0,d.indexOf("/",d.indexOf("//")+2))+(p||"/"),u=i.history?Xn:tr}else c=Zn(f),u=Jn;var h=c.substr(0,Zn(c).lastIndexOf("/")+1);(s=new u(c,h,"#"+t)).$$parseLinkUrl(f,f),s.$$state=r.state();var m=/^\s*(javascript|mailto):/i;function g(t,e,n){var i=s.url(),o=s.$$state;try{r.url(t,e,n),s.$$state=r.state()}catch(a){throw s.url(i),s.$$state=o,a}}o.on("click",function(t){var i=e.rewriteLinks;if(i&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var u=l(t.target);"a"!==J(u[0]);)if(u[0]===o[0]||!(u=u.parent())[0])return;if(!U(i)||!j(u.attr(i))){var c=u.prop("href"),d=u.attr("href")||u.attr("xlink:href");N(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=ci(c.animVal).href),m.test(c)||!c||u.attr("target")||t.isDefaultPrevented()||s.$$parseLinkUrl(c,d)&&(t.preventDefault(),s.absUrl()!==r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),Qn(s.absUrl())!==Qn(f)&&r.url(s.absUrl(),!0);var v=!0;return r.onUrlChange(function(t,e){j(Kn(h,t))?a.location.href=t:(n.$evalAsync(function(){var r,i=s.absUrl(),o=s.$$state;t=Qn(t),s.$$parse(t),s.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,s.absUrl()===t&&(r?(s.$$parse(i),s.$$state=o,g(i,!1,o)):(v=!1,b(i,o)))}),n.$$phase||n.$digest())}),n.$watch(function(){var t=Qn(r.url()),e=Qn(s.absUrl()),o=r.state(),a=s.$$replace,l=t!==e||s.$$html5&&i.history&&o!==s.$$state;(v||l)&&(v=!1,n.$evalAsync(function(){var e=s.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,s.$$state,o).defaultPrevented;s.absUrl()===e&&(r?(s.$$parse(t),s.$$state=o):(l&&g(e,a,o===s.$$state?null:s.$$state),b(t,o)))})),s.$$replace=!1}),s;function b(t,e){n.$broadcast("$locationChangeSuccess",s.absUrl(),t,s.$$state,e)}}]}function or(){var t=!0,e=this;this.debugEnabled=function(e){return I(e)?(t=e,this):t},this.$get=["$window",function(n){return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:(r=i("debug"),function(){t&&r.apply(e,arguments)})};var r;function i(t){var e=n.console||{},r=e[t]||e.log||P,i=!1;try{i=!!r.apply}catch(o){}return i?function(){var t=[];return w(arguments,function(e){t.push(function(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}(e))}),r.apply(e,t)}:function(t,e){r(t,null==e?"":e)}}}]}w([tr,Jn,Xn],function(t){t.prototype=Object.create(er),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Xn||!this.$$html5)throw Hn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=j(e)?null:e,this}});var ar=e("$parse"),sr=[].constructor,lr=(!1).constructor,ur=Function.constructor,cr=(0).constructor,dr={}.constructor,pr="".constructor,fr=sr.prototype,hr=lr.prototype,mr=ur.prototype,gr=cr.prototype,vr=dr.prototype,br=pr.prototype,yr=mr.call,wr=mr.apply,kr=mr.bind,_r=vr.valueOf;function xr(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw ar("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function Sr(t){return t+""}function $r(t,e){if(t){if(t.constructor===t)throw ar("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.window===t)throw ar("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw ar("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw ar("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}function Tr(t,e){if(t){if(t.constructor===t)throw ar("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===yr||t===wr||t===kr)throw ar("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}function Cr(t,e){if(t&&(t===sr||t===lr||t===ur||t===cr||t===dr||t===pr||t===fr||t===hr||t===mr||t===gr||t===vr||t===br))throw ar("isecaf","Assigning to a constructor or its prototype is disallowed! Expression: {0}",e)}var Er=Mt();w("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){Er[t]=!0});var Ar={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Dr=function(t){this.options=t};Dr.prototype={constructor:Dr,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=Er[n],o=Er[r];if(Er[e]||i||o){var a=o?r:i?n:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||"\xa0"===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),r=e.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=I(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw ar("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=o(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else n+=Ar[o]||o;i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var Pr=function(t,e){this.lexer=t,this.options=e};function Or(t,e){return void 0!==t?t:e}function Mr(t,e){return void 0===t?e:void 0===e?t:t+e}function Rr(t,e){var n,r,i;switch(t.type){case Pr.Program:n=!0,w(t.body,function(t){Rr(t.expression,e),n=n&&t.expression.constant}),t.constant=n;break;case Pr.Literal:t.constant=!0,t.toWatch=[];break;case Pr.UnaryExpression:Rr(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Pr.BinaryExpression:Rr(t.left,e),Rr(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Pr.LogicalExpression:Rr(t.left,e),Rr(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Pr.ConditionalExpression:Rr(t.test,e),Rr(t.alternate,e),Rr(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Pr.Identifier:t.constant=!1,t.toWatch=[t];break;case Pr.MemberExpression:Rr(t.object,e),t.computed&&Rr(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case Pr.CallExpression:i=!!t.filter&&function(e,n){return!e(t.callee.name).$stateful}(e),n=i,r=[],w(t.arguments,function(t){Rr(t,e),n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=i?r:[t];break;case Pr.AssignmentExpression:Rr(t.left,e),Rr(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Pr.ArrayExpression:n=!0,r=[],w(t.elements,function(t){Rr(t,e),n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=r;break;case Pr.ObjectExpression:n=!0,r=[],w(t.properties,function(t){Rr(t.value,e),n=n&&t.value.constant&&!t.computed,t.value.constant||r.push.apply(r,t.value.toWatch)}),t.constant=n,t.toWatch=r;break;case Pr.ThisExpression:case Pr.LocalsExpression:t.constant=!1,t.toWatch=[]}}function jr(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function Ir(t){return t.type===Pr.Identifier||t.type===Pr.MemberExpression}function Nr(t){if(1===t.body.length&&Ir(t.body[0].expression))return{type:Pr.AssignmentExpression,left:t.body[0].expression,right:{type:Pr.NGValueParameter},operator:"="}}function Fr(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===Pr.Literal||t.body[0].expression.type===Pr.ArrayExpression||t.body[0].expression.type===Pr.ObjectExpression)}function Ur(t){return t.constant}function Lr(t,e){this.astBuilder=t,this.$filter=e}function Vr(t,e){this.astBuilder=t,this.$filter=e}Pr.Program="Program",Pr.ExpressionStatement="ExpressionStatement",Pr.AssignmentExpression="AssignmentExpression",Pr.ConditionalExpression="ConditionalExpression",Pr.LogicalExpression="LogicalExpression",Pr.BinaryExpression="BinaryExpression",Pr.UnaryExpression="UnaryExpression",Pr.CallExpression="CallExpression",Pr.MemberExpression="MemberExpression",Pr.Identifier="Identifier",Pr.Literal="Literal",Pr.ArrayExpression="ArrayExpression",Pr.Property="Property",Pr.ObjectExpression="ObjectExpression",Pr.ThisExpression="ThisExpression",Pr.LocalsExpression="LocalsExpression",Pr.NGValueParameter="NGValueParameter",Pr.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Pr.Program,body:t}},expressionStatement:function(){return{type:Pr.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Ir(t))throw ar("lval","Trying to assign a value to a non l-value");t={type:Pr.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Pr.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Pr.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Pr.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Pr.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Pr.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Pr.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Pr.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Pr.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=et(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:Pr.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:Pr.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Pr.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Pr.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:Pr.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Pr.Identifier,name:t.text}},constant:function(){return{type:Pr.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Pr.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Pr.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Pr.ObjectExpression,properties:e}},throwError:function(t,e){throw ar("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw ar("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw ar("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===r||a===i||!e&&!n&&!r&&!i)return o}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:Pr.ThisExpression},$locals:{type:Pr.LocalsExpression}}},Lr.prototype={compile:function(t,e){var n=this,r=this.astBuilder.ast(t);this.state={nextId:0,filters:{},expensiveChecks:e,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Rr(r,n.$filter);var i,o="";if(this.stage="assign",i=Nr(r)){this.state.computing="assign";var a=this.nextId();this.recurse(i,a),this.return_(a),o="fn.assign="+this.generateFunction("assign","s,v,l")}var s=jr(r.body);n.stage="inputs",w(s,function(t,e){var r="fn"+e;n.state[r]={vars:[],body:[],own:{}},n.state.computing=r;var i=n.nextId();n.recurse(t,i),n.return_(i),n.state.inputs.push(r),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(r);var l='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+o+this.watchFns()+"return fn;",u=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",l)(this.$filter,xr,$r,Tr,Sr,Cr,Or,Mr,t);return this.state=this.stage=void 0,u.literal=Fr(r),u.constant=Ur(r),u},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return w(e,function(e){t.push("var "+e+"="+n.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return w(this.state.filters,function(n,r){t.push(n+"=$filter("+e.escape(r)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,r,i,o){var a,s,l,u,c,d=this;if(r=r||P,!o&&I(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,r,i,!0));switch(t.type){case Pr.Program:w(t.body,function(e,n){d.recurse(e.expression,void 0,void 0,function(t){s=t}),n!==t.body.length-1?d.current().body.push(s,";"):d.return_(s)});break;case Pr.Literal:u=this.escape(t.value),this.assign(e,u),r(u);break;case Pr.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){s=t}),u=t.operator+"("+this.ifDefined(s,0)+")",this.assign(e,u),r(u);break;case Pr.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){a=t}),this.recurse(t.right,void 0,void 0,function(t){s=t}),u="+"===t.operator?this.plus(a,s):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(s,0):"("+a+")"+t.operator+"("+s+")",this.assign(e,u),r(u);break;case Pr.LogicalExpression:e=e||this.nextId(),d.recurse(t.left,e),d.if_("&&"===t.operator?e:d.not(e),d.lazyRecurse(t.right,e)),r(e);break;case Pr.ConditionalExpression:e=e||this.nextId(),d.recurse(t.test,e),d.if_(e,d.lazyRecurse(t.alternate,e),d.lazyRecurse(t.consequent,e)),r(e);break;case Pr.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),xr(t.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",t.name)),function(){d.if_("inputs"===d.stage||"s",function(){i&&1!==i&&d.if_(d.not(d.nonComputedMember("s",t.name)),d.lazyAssign(d.nonComputedMember("s",t.name),"{}")),d.assign(e,d.nonComputedMember("s",t.name))})},e&&d.lazyAssign(e,d.nonComputedMember("l",t.name))),(d.state.expensiveChecks||Hr(t.name))&&d.addEnsureSafeObject(e),r(e);break;case Pr.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),d.recurse(t.object,a,void 0,function(){d.if_(d.notNull(a),function(){i&&1!==i&&d.addEnsureSafeAssignContext(a),t.computed?(s=d.nextId(),d.recurse(t.property,s),d.getStringValue(s),d.addEnsureSafeMemberName(s),i&&1!==i&&d.if_(d.not(d.computedMember(a,s)),d.lazyAssign(d.computedMember(a,s),"{}")),u=d.ensureSafeObject(d.computedMember(a,s)),d.assign(e,u),n&&(n.computed=!0,n.name=s)):(xr(t.property.name),i&&1!==i&&d.if_(d.not(d.nonComputedMember(a,t.property.name)),d.lazyAssign(d.nonComputedMember(a,t.property.name),"{}")),u=d.nonComputedMember(a,t.property.name),(d.state.expensiveChecks||Hr(t.property.name))&&(u=d.ensureSafeObject(u)),d.assign(e,u),n&&(n.computed=!1,n.name=t.property.name))},function(){d.assign(e,"undefined")}),r(e)},!!i);break;case Pr.CallExpression:e=e||this.nextId(),t.filter?(s=d.filter(t.callee.name),l=[],w(t.arguments,function(t){var e=d.nextId();d.recurse(t,e),l.push(e)}),u=s+"("+l.join(",")+")",d.assign(e,u),r(e)):(s=d.nextId(),l=[],d.recurse(t.callee,s,a={},function(){d.if_(d.notNull(s),function(){d.addEnsureSafeFunction(s),w(t.arguments,function(t){d.recurse(t,d.nextId(),void 0,function(t){l.push(d.ensureSafeObject(t))})}),a.name?(d.state.expensiveChecks||d.addEnsureSafeObject(a.context),u=d.member(a.context,a.name,a.computed)+"("+l.join(",")+")"):u=s+"("+l.join(",")+")",u=d.ensureSafeObject(u),d.assign(e,u)},function(){d.assign(e,"undefined")}),r(e)}));break;case Pr.AssignmentExpression:s=this.nextId(),this.recurse(t.left,void 0,a={},function(){d.if_(d.notNull(a.context),function(){d.recurse(t.right,s),d.addEnsureSafeObject(d.member(a.context,a.name,a.computed)),d.addEnsureSafeAssignContext(a.context),u=d.member(a.context,a.name,a.computed)+t.operator+s,d.assign(e,u),r(e||u)})},1);break;case Pr.ArrayExpression:l=[],w(t.elements,function(t){d.recurse(t,d.nextId(),void 0,function(t){l.push(t)})}),u="["+l.join(",")+"]",this.assign(e,u),r(u);break;case Pr.ObjectExpression:l=[],c=!1,w(t.properties,function(t){t.computed&&(c=!0)}),c?(e=e||this.nextId(),this.assign(e,"{}"),w(t.properties,function(t){t.computed?(a=d.nextId(),d.recurse(t.key,a)):a=t.key.type===Pr.Identifier?t.key.name:""+t.key.value,s=d.nextId(),d.recurse(t.value,s),d.assign(d.member(e,a,t.computed),s)})):(w(t.properties,function(e){d.recurse(e.value,t.constant?void 0:d.nextId(),void 0,function(t){l.push(d.escape(e.key.type===Pr.Identifier?e.key.name:""+e.key.value)+":"+t)})}),u="{"+l.join(",")+"}",this.assign(e,u)),r(e||u);break;case Pr.ThisExpression:this.assign(e,"s"),r("s");break;case Pr.LocalsExpression:this.assign(e,"l"),r("l");break;case Pr.NGValueParameter:this.assign(e,"v"),r("v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},addEnsureSafeObject:function(t){this.current().body.push(this.ensureSafeObject(t),";")},addEnsureSafeMemberName:function(t){this.current().body.push(this.ensureSafeMemberName(t),";")},addEnsureSafeFunction:function(t){this.current().body.push(this.ensureSafeFunction(t),";")},addEnsureSafeAssignContext:function(t){this.current().body.push(this.ensureSafeAssignContext(t),";")},ensureSafeObject:function(t){return"ensureSafeObject("+t+",text)"},ensureSafeMemberName:function(t){return"ensureSafeMemberName("+t+",text)"},ensureSafeFunction:function(t){return"ensureSafeFunction("+t+",text)"},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},ensureSafeAssignContext:function(t){return"ensureSafeAssignContext("+t+",text)"},lazyRecurse:function(t,e,n,r,i,o){var a=this;return function(){a.recurse(t,e,n,r,i,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(U(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(L(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw ar("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},Vr.prototype={compile:function(t,e){var n,r,i=this,o=this.astBuilder.ast(t);this.expression=t,this.expensiveChecks=e,Rr(o,i.$filter),(n=Nr(o))&&(r=this.recurse(n));var a,s=jr(o.body);s&&(a=[],w(s,function(t,e){var n=i.recurse(t);t.input=n,a.push(n),t.watchId=e}));var l=[];w(o.body,function(t){l.push(i.recurse(t.expression))});var u=0===o.body.length?P:1===o.body.length?l[0]:function(t,e){var n;return w(l,function(r){n=r(t,e)}),n};return r&&(u.assign=function(t,e,n){return r(t,n,e)}),a&&(u.inputs=a),u.literal=Fr(o),u.constant=Ur(o),u},recurse:function(t,e,n){var r,i,o,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Pr.Literal:return this.value(t.value,e);case Pr.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case Pr.BinaryExpression:case Pr.LogicalExpression:return r=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](r,i,e);case Pr.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Pr.Identifier:return xr(t.name,a.expression),a.identifier(t.name,a.expensiveChecks||Hr(t.name),e,n,a.expression);case Pr.MemberExpression:return r=this.recurse(t.object,!1,!!n),t.computed||(xr(t.property.name,a.expression),i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(r,i,e,n,a.expression):this.nonComputedMember(r,i,a.expensiveChecks,e,n,a.expression);case Pr.CallExpression:return o=[],w(t.arguments,function(t){o.push(a.recurse(t))}),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(t,n,r,a){for(var s=[],l=0;l<o.length;++l)s.push(o[l](t,n,r,a));var u=i.apply(void 0,s,a);return e?{context:void 0,name:void 0,value:u}:u}:function(t,n,r,s){var l,u=i(t,n,r,s);if(null!=u.value){$r(u.context,a.expression),Tr(u.value,a.expression);for(var c=[],d=0;d<o.length;++d)c.push($r(o[d](t,n,r,s),a.expression));l=$r(u.value.apply(u.context,c),a.expression)}return e?{value:l}:l};case Pr.AssignmentExpression:return r=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(t,n,o,s){var l=r(t,n,o,s),u=i(t,n,o,s);return $r(l.value,a.expression),Cr(l.context),l.context[l.name]=u,e?{value:u}:u};case Pr.ArrayExpression:return o=[],w(t.elements,function(t){o.push(a.recurse(t))}),function(t,n,r,i){for(var a=[],s=0;s<o.length;++s)a.push(o[s](t,n,r,i));return e?{value:a}:a};case Pr.ObjectExpression:return o=[],w(t.properties,function(t){o.push(t.computed?{key:a.recurse(t.key),computed:!0,value:a.recurse(t.value)}:{key:t.key.type===Pr.Identifier?t.key.name:""+t.key.value,computed:!1,value:a.recurse(t.value)})}),function(t,n,r,i){for(var a={},s=0;s<o.length;++s)o[s].computed?a[o[s].key(t,n,r,i)]=o[s].value(t,n,r,i):a[o[s].key]=o[s].value(t,n,r,i);return e?{value:a}:a};case Pr.ThisExpression:return function(t){return e?{value:t}:t};case Pr.LocalsExpression:return function(t,n){return e?{value:n}:n};case Pr.NGValueParameter:return function(t,n,r){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=I(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=I(a)?-a:0,e?{value:a}:a}},"unary!":function(t,e){return function(n,r,i,o){var a=!t(n,r,i,o);return e?{value:a}:a}},"binary+":function(t,e,n){return function(r,i,o,a){var s=Mr(t(r,i,o,a),e(r,i,o,a));return n?{value:s}:s}},"binary-":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a),l=e(r,i,o,a),u=(I(s)?s:0)-(I(l)?l:0);return n?{value:u}:u}},"binary*":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)*e(r,i,o,a);return n?{value:s}:s}},"binary/":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)/e(r,i,o,a);return n?{value:s}:s}},"binary%":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)%e(r,i,o,a);return n?{value:s}:s}},"binary===":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)===e(r,i,o,a);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!==e(r,i,o,a);return n?{value:s}:s}},"binary==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)==e(r,i,o,a);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!=e(r,i,o,a);return n?{value:s}:s}},"binary<":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<e(r,i,o,a);return n?{value:s}:s}},"binary>":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>e(r,i,o,a);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<=e(r,i,o,a);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>=e(r,i,o,a);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)&&e(r,i,o,a);return n?{value:s}:s}},"binary||":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)||e(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(t,e,n,r){return function(i,o,a,s){var l=t(i,o,a,s)?e(i,o,a,s):n(i,o,a,s);return r?{value:l}:l}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n,r,i){return function(o,a,s,l){var u=a&&t in a?a:o;r&&1!==r&&u&&!u[t]&&(u[t]={});var c=u?u[t]:void 0;return e&&$r(c,i),n?{context:u,name:t,value:c}:c}},computedMember:function(t,e,n,r,i){return function(o,a,s,l){var u,c,d=t(o,a,s,l);return null!=d&&(xr(u=Sr(u=e(o,a,s,l)),i),r&&1!==r&&(Cr(d),d&&!d[u]&&(d[u]={})),$r(c=d[u],i)),n?{context:d,name:u,value:c}:c}},nonComputedMember:function(t,e,n,r,i,o){return function(a,s,l,u){var c=t(a,s,l,u);i&&1!==i&&(Cr(c),c&&!c[e]&&(c[e]={}));var d=null!=c?c[e]:void 0;return(n||Hr(e))&&$r(d,o),r?{context:c,name:e,value:d}:d}},inputs:function(t,e){return function(n,r,i,o){return o?o[e]:t(n,r,i)}}};var Br=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n,this.ast=new Pr(t,n),this.astCompiler=n.csp?new Vr(this.ast,e):new Lr(this.ast,e)};function Hr(t){return"constructor"===t}function qr(t){return H(t.valueOf)?t.valueOf():_r.call(t)}function zr(){var t,e,n=Mt(),r=Mt(),i={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){i[t]=e},this.setIdentifierFns=function(n,r){return t=n,e=r,this},this.$get=["$filter",function(o){var a=rt().noUnsafeEval,s={csp:a,expensiveChecks:!1,literals:et(i),isIdentifierStart:H(t)&&t,isIdentifierContinue:H(e)&&e},l={csp:a,expensiveChecks:!0,literals:et(i),isIdentifierStart:H(t)&&t,isIdentifierContinue:H(e)&&e},u=!1;return c.$$runningExpensiveChecks=function(){return u},c;function c(t,e,i){var a,c,d;switch(i=i||u,typeof t){case"string":t=t.trim();var v=i?r:n;if(!(a=v[d=t])){":"===t.charAt(0)&&":"===t.charAt(1)&&(c=!0,t=t.substring(2));var b=i?l:s,y=new Dr(b);(a=new Br(y,o,b).parse(t)).constant?a.$$watchDelegate=m:c?a.$$watchDelegate=a.literal?h:f:a.inputs&&(a.$$watchDelegate=p),i&&(a=function t(e){if(!e)return e;r.$$watchDelegate=e.$$watchDelegate,r.assign=t(e.assign),r.constant=e.constant,r.literal=e.literal;for(var n=0;e.inputs&&n<e.inputs.length;++n)e.inputs[n]=t(e.inputs[n]);return r.inputs=e.inputs,r;function r(t,n,r,i){var o=u;u=!0;try{return e(t,n,r,i)}finally{u=o}}}(a)),v[d]=a}return g(a,e);case"function":return g(t,e);default:return g(P,e)}}function d(t,e){return null==t||null==e?t===e:("object"!=typeof t||"object"!=typeof(t=qr(t)))&&(t===e||t!=t&&e!=e)}function p(t,e,n,r,i){var o,a=r.inputs;if(1===a.length){var s=d;return a=a[0],t.$watch(function(t){var e=a(t);return d(e,s)||(o=r(t,void 0,void 0,[e]),s=e&&qr(e)),o},e,n,i)}for(var l=[],u=[],c=0,p=a.length;c<p;c++)l[c]=d,u[c]=null;return t.$watch(function(t){for(var e=!1,n=0,i=a.length;n<i;n++){var s=a[n](t);(e||(e=!d(s,l[n])))&&(u[n]=s,l[n]=s&&qr(s))}return e&&(o=r(t,void 0,void 0,u)),o},e,n,i)}function f(t,e,n,r){var i,o;return i=t.$watch(function(t){return r(t)},function(t,n,r){o=t,H(e)&&e.apply(this,arguments),I(t)&&r.$$postDigest(function(){I(o)&&i()})},n)}function h(t,e,n,r){var i,o;return i=t.$watch(function(t){return r(t)},function(t,n,r){o=t,H(e)&&e.call(this,t,n,r),a(t)&&r.$$postDigest(function(){a(o)&&i()})},n);function a(t){var e=!0;return w(t,function(t){I(t)||(e=!1)}),e}}function m(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function g(t,e){if(!e)return t;var n=t.$$watchDelegate,r=!1,i=n!==h&&n!==f?function(n,i,o,a){var s=r&&a?a[0]:t(n,i,o,a);return e(s,n,i)}:function(n,r,i,o){var a=t(n,r,i,o),s=e(a,n,r);return I(a)?s:a};return t.$$watchDelegate&&t.$$watchDelegate!==p?i.$$watchDelegate=t.$$watchDelegate:e.$stateful||(i.$$watchDelegate=p,r=!t.inputs,i.inputs=t.inputs?t.inputs:[t]),i}}]}function Gr(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return Yr(function(e){t.$evalAsync(e)},e)}]}function Wr(){this.$get=["$browser","$exceptionHandler",function(t,e){return Yr(function(e){t.defer(e)},e)}]}function Yr(t,n){var r=e("$q",TypeError);function i(){var t=new l;return t.resolve=a(t,t.resolve),t.reject=a(t,t.reject),t.notify=a(t,t.notify),t}function o(){this.$$state={status:0}}function a(t,e){return function(n){e.call(t,n)}}function s(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){!function(t){var e,r,i;i=t.pending,t.processScheduled=!1,t.pending=void 0;for(var o=0,a=i.length;o<a;++o){r=i[o][0],e=i[o][t.status];try{H(e)?r.resolve(e(t.value)):1===t.status?r.resolve(t.value):r.reject(t.value)}catch(s){r.reject(s),n(s)}}}(e)}))}function l(){this.promise=new o}function u(t){var e=new l;return e.reject(t),e.promise}function c(t,e,n){var r=null;try{H(n)&&(r=n())}catch(i){return u(i)}return Y(r)?r.then(function(){return e(t)},u):e(t)}function d(t,e,n,r){var i=new l;return i.resolve(t),i.promise.then(e,n,r)}T(o.prototype,{then:function(t,e,n){if(j(t)&&j(e)&&j(n))return this;var r=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&s(this.$$state),r.promise},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return c(e,p,t)},function(e){return c(e,u,t)},e)}}),T(l.prototype,{resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(r("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):this.$$resolve(t))},$$resolve:function(t){var e,r=this,i=!1;try{(N(t)||H(t))&&(e=t&&t.then),H(e)?(this.promise.$$state.status=-1,e.call(t,function(t){i||(i=!0,r.$$resolve(t))},o,a(this,this.notify))):(this.promise.$$state.value=t,this.promise.$$state.status=1,s(this.promise.$$state))}catch(l){o(l),n(l)}function o(t){i||(i=!0,r.$$reject(t))}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,s(this.promise.$$state)},notify:function(e){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&t(function(){for(var t,i,o=0,a=r.length;o<a;o++){i=r[o][0],t=r[o][3];try{i.notify(H(t)?t(e):e)}catch(s){n(s)}}})}});var p=d;function f(t){if(!H(t))throw r("norslvr","Expected resolverFn, got '{0}'",t);var e=new l;return t(function(t){e.resolve(t)},function(t){e.reject(t)}),e.promise}return f.prototype=o.prototype,f.defer=i,f.reject=u,f.when=d,f.resolve=p,f.all=function(t){var e=new l,n=0,r=B(t)?[]:{};return w(t,function(t,i){n++,d(t).then(function(t){r[i]=t,--n||e.resolve(r)},function(t){e.reject(t)})}),0===n&&e.resolve(r),e.promise},f.race=function(t){var e=i();return w(t,function(t){d(t).then(e.resolve,e.reject)}),e.promise},f}function Kr(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=i,o}]}function Zr(){var t=10,n=e("$rootScope"),r=null,o=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(e,a,l){function u(t){t.currentScope.$$destroyed=!0}function c(){this.$id=x(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}c.prototype={constructor:c,$new:function(t,e){var n;return e=e||this,t?(n=new c).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=x(),this.$$ChildScope=null}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",u),n},$watch:function(t,e,n,i){var o=a(t);if(o.$$watchDelegate)return o.$$watchDelegate(this,e,n,o,t);var s=this,l=s.$$watchers,u={fn:e,last:_,get:o,exp:i||t,eq:!!n};return r=null,H(e)||(u.fn=P),l||((l=s.$$watchers=[]).$$digestWatchIndex=-1),l.unshift(u),l.$$digestWatchIndex++,b(this,1),function(){var t=tt(l,u);t>=0&&(b(s,-1),t<l.$$digestWatchIndex&&l.$$digestWatchIndex--),r=null}},$watchGroup:function(t,e){var n=new Array(t.length),r=new Array(t.length),i=[],o=this,a=!1,s=!0;if(!t.length){var l=!0;return o.$evalAsync(function(){l&&e(r,r,o)}),function(){l=!1}}if(1===t.length)return this.$watch(t[0],function(t,i,o){r[0]=t,n[0]=i,e(r,t===i?r:n,o)});function u(){a=!1,s?(s=!1,e(r,r,o)):e(r,n,o)}return w(t,function(t,e){var s=o.$watch(t,function(t,i){r[e]=t,n[e]=i,a||(a=!0,o.$evalAsync(u))});i.push(s)}),function(){for(;i.length;)i.shift()()}},$watchCollection:function(t,e){m.$stateful=!0;var n,r,o,s=this,l=e.length>1,u=0,c=a(t,m),d=[],p={},f=!0,h=0;function m(t){var e,o,a,s;if(!j(n=t)){if(N(n))if(y(n)){r!==d&&(h=(r=d).length=0,u++),h!==(e=n.length)&&(u++,r.length=h=e);for(var l=0;l<e;l++)a=n[l],(s=r[l])!=s&&a!=a||s===a||(u++,r[l]=a)}else{for(o in r!==p&&(r=p={},h=0,u++),e=0,n)i.call(n,o)&&(e++,a=n[o],s=r[o],o in r?s!=s&&a!=a||s===a||(u++,r[o]=a):(h++,r[o]=a,u++));if(h>e)for(o in u++,r)i.call(n,o)||(h--,delete r[o])}else r!==n&&(r=n,u++);return u}}return this.$watch(c,function(){if(f?(f=!1,e(n,n,s)):e(n,o,s),l)if(N(n))if(y(n)){o=new Array(n.length);for(var t=0;t<n.length;t++)o[t]=n[t]}else for(var r in o={},n)i.call(n,r)&&(o[r]=n[r]);else o=n})},$digest:function(){var i,a,s,u,c,h,b,y,w,k=t,x=[];g("$digest"),l.$$checkUrlChange(),this===d&&null!==o&&(l.defer.cancel(o),S()),r=null;do{c=!1,b=this;for(var $=0;$<p.length;$++){try{(w=p[$]).scope.$eval(w.expression,w.locals)}catch(T){e(T)}r=null}p.length=0;t:do{if(u=b.$$watchers)for(u.$$digestWatchIndex=u.length;u.$$digestWatchIndex--;)try{if(i=u[u.$$digestWatchIndex])if((a=(0,i.get)(b))===(s=i.last)||(i.eq?nt(a,s):A(a)&&A(s))){if(i===r){c=!1;break t}}else c=!0,r=i,i.last=i.eq?et(a,null):a,(0,i.fn)(a,s===_?a:s,b),k<5&&(x[y=4-k]||(x[y]=[]),x[y].push({msg:H(i.exp)?"fn: "+(i.exp.name||i.exp.toString()):i.exp,newVal:a,oldVal:s}))}catch(T){e(T)}if(!(h=b.$$watchersCount&&b.$$childHead||b!==this&&b.$$nextSibling))for(;b!==this&&!(h=b.$$nextSibling);)b=b.$parent}while(b=h);if((c||p.length)&&!k--)throw v(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,x)}while(c||p.length);for(v();m<f.length;)try{f[m++]()}catch(T){e(T)}f.length=m=0},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===d&&l.$$applicationDestroyed(),b(this,-this.$$watchersCount),this.$$listenerCount)k(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=P,this.$on=this.$watch=this.$watchGroup=function(){return P},this.$$listeners={},this.$$nextSibling=null,function t(e){9===s&&(e.$$childHead&&t(e.$$childHead),e.$$nextSibling&&t(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}(this)}},$eval:function(t,e){return a(t)(this,e)},$evalAsync:function(t,e){d.$$phase||p.length||l.defer(function(){p.length&&d.$digest()}),p.push({scope:this,expression:a(t),locals:e})},$$postDigest:function(t){f.push(t)},$apply:function(t){try{g("$apply");try{return this.$eval(t)}finally{v()}}catch(n){e(n)}finally{try{d.$digest()}catch(n){throw e(n),n}}},$applyAsync:function(t){var e=this;t&&h.push(function(){e.$eval(t)}),t=a(t),null===o&&(o=l.defer(function(){d.$apply(S)}))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do{r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(n[r]=null,k(i,1,t))}},$emit:function(t,n){var r,i,o,a=[],s=this,l=!1,u={name:t,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=ot([u],arguments,1);do{for(r=s.$$listeners[t]||a,u.currentScope=s,i=0,o=r.length;i<o;i++)if(r[i])try{r[i].apply(null,c)}catch(d){e(d)}else r.splice(i,1),i--,o--;if(l)return u.currentScope=null,u;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(t,n){var r=this,i=this,o={name:t,targetScope:this,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return o;for(var a,s,l,u=ot([o],arguments,1);r=i;){for(o.currentScope=r,s=0,l=(a=r.$$listeners[t]||[]).length;s<l;s++)if(a[s])try{a[s].apply(null,u)}catch(c){e(c)}else a.splice(s,1),s--,l--;if(!(i=r.$$listenerCount[t]&&r.$$childHead||r!==this&&r.$$nextSibling))for(;r!==this&&!(i=r.$$nextSibling);)r=r.$parent}return o.currentScope=null,o}};var d=new c,p=d.$$asyncQueue=[],f=d.$$postDigestQueue=[],h=d.$$applyAsyncQueue=[],m=0;return d;function g(t){if(d.$$phase)throw n("inprog","{0} already in progress",d.$$phase);d.$$phase=t}function v(){d.$$phase=null}function b(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function k(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function _(){}function S(){for(;h.length;)try{h.shift()()}catch(t){e(t)}o=null}}]}function Qr(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return I(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return I(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i,o=r?e:t;return""===(i=ci(n).href)||i.match(o)?n:"unsafe:"+i}}}Br.prototype={constructor:Br,parse:function(t){return this.astCompiler.compile(t,this.options.expensiveChecks)}};var Xr=e("$sce"),Jr={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function ti(t){var e=[];return I(t)&&w(t,function(t){e.push(function(t){if("self"===t)return t;if(U(t)){if(t.indexOf("***")>-1)throw Xr("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=Q(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(q(t))return new RegExp("^"+t.source+"$");throw Xr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function ei(){this.SCE_CONTEXTS=Jr;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=ti(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=ti(t)),e},this.$get=["$injector",function(n){var r=function(t){throw Xr("unsafe","Attempting to use an unsafe value in a safe context.")};function i(t,e){return"self"===t?di(e):!!t.exec(e.href)}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}n.has("$sanitize")&&(r=n.get("$sanitize"));var a=o(),s={};return s[Jr.HTML]=o(a),s[Jr.CSS]=o(a),s[Jr.URL]=o(a),s[Jr.JS]=o(a),s[Jr.RESOURCE_URL]=o(s[Jr.URL]),{trustAs:function(t,e){var n=s.hasOwnProperty(t)?s[t]:null;if(!n)throw Xr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||j(e)||""===e)return e;if("string"!=typeof e)throw Xr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(n,o){if(null===o||j(o)||""===o)return o;var a=s.hasOwnProperty(n)?s[n]:null;if(a&&o instanceof a)return o.$$unwrapTrustedValue();if(n===Jr.RESOURCE_URL){if(function(n){var r,a,s=ci(o.toString()),l=!1;for(r=0,a=t.length;r<a;r++)if(i(t[r],s)){l=!0;break}if(l)for(r=0,a=e.length;r<a;r++)if(i(e[r],s)){l=!1;break}return l}())return o;throw Xr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",o.toString())}if(n===Jr.HTML)return r(o);throw Xr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof a?t.$$unwrapTrustedValue():t}}}]}function ni(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&s<8)throw Xr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=Ut(Jr);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=O),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var i=r.parseAs,a=r.getTrusted,l=r.trustAs;return w(Jr,function(t,e){var n=o(e);r[Zt("parse_as_"+n)]=function(e){return i(t,e)},r[Zt("get_trusted_"+n)]=function(e){return a(t,e)},r[Zt("trust_as_"+n)]=function(e){return l(t,e)}}),r}]}function ri(){this.$get=["$window","$document",function(t,e){var n,r,i={},a=!(t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,l=E((/android (\d+)/.exec(o((t.navigator||{}).userAgent))||[])[1]),u=/Boxee/i.test((t.navigator||{}).userAgent),c=e[0]||{},d=/^(Moz|webkit|ms)(?=[A-Z])/,p=c.body&&c.body.style,f=!1,h=!1;if(p){for(var m in p)if(r=d.exec(m)){n=(n=r[0])[0].toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in p&&"webkit"),f=!!("transition"in p||n+"Transition"in p),h=!!("animation"in p||n+"Animation"in p),!l||f&&h||(f=U(p.webkitTransition),h=U(p.webkitAnimation))}return{history:!(!a||l<4||u),hasEvent:function(t){if("input"===t&&s<=11)return!1;if(j(i[t])){var e=c.createElement("div");i[t]="on"+t in e}return i[t]},csp:rt(),vendorPrefix:n,transitions:f,animations:h,android:l}}]}var ii=e("$compile");function oi(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$templateCache","$http","$q","$sce",function(e,n,r,i){function o(a,s){o.totalPendingRequests++,U(a)&&!j(e.get(a))||(a=i.getTrustedResourceUrl(a));var l=n.defaults&&n.defaults.transformResponse;return B(l)?l=l.filter(function(t){return t!==An}):l===An&&(l=null),n.get(a,T({cache:e,transformResponse:l},t)).finally(function(){o.totalPendingRequests--}).then(function(t){return e.put(a,t.data),t.data},function(t){if(!s)throw ii("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,t.status,t.statusText);return r.reject(t)})}return o.totalPendingRequests=0,o}]}function ai(){this.$get=["$rootScope","$browser","$location",function(t,e,n){return{findBindings:function(t,e,n){var r=t.getElementsByClassName("ng-binding"),i=[];return w(r,function(t){var r=v.element(t).data("$binding");r&&w(r,function(r){n?new RegExp("(^|\\s)"+Q(e)+"(\\s|\\||$)").test(r)&&i.push(t):-1!==r.indexOf(e)&&i.push(t)})}),i},findModels:function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=t.querySelectorAll("["+r[i]+"model"+(n?"=":"*=")+'"'+e+'"]');if(o.length)return o}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}}}]}function si(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){var o={};function a(a,s,l){H(a)||(l=s,s=a,a=P);var u,c=at(arguments,3),d=I(l)&&!l,p=(d?r:n).defer(),f=p.promise;return u=e.defer(function(){try{p.resolve(a.apply(null,c))}catch(e){p.reject(e),i(e)}finally{delete o[f.$$timeoutId]}d||t.$apply()},s),f.$$timeoutId=u,o[u]=p,f}return a.cancel=function(t){return!!(t&&t.$$timeoutId in o)&&(o[t.$$timeoutId].reject("canceled"),delete o[t.$$timeoutId],e.defer.cancel(t.$$timeoutId))},a}]}var li=t.document.createElement("a"),ui=ci(t.location.href);function ci(t){var e=t;return s&&(li.setAttribute("href",e),e=li.href),li.setAttribute("href",e),{href:li.href,protocol:li.protocol?li.protocol.replace(/:$/,""):"",host:li.host,search:li.search?li.search.replace(/^\?/,""):"",hash:li.hash?li.hash.replace(/^#/,""):"",hostname:li.hostname,port:li.port,pathname:"/"===li.pathname.charAt(0)?li.pathname:"/"+li.pathname}}function di(t){var e=U(t)?ci(t):t;return e.protocol===ui.protocol&&e.host===ui.host}function pi(){this.$get=M(t)}function fi(t){var e=t[0]||{},n={},r="";function i(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,a,s,l,u=function(t){try{return t.cookie||""}catch(e){return""}}(e);if(u!==r)for(t=(r=u).split("; "),n={},a=0;a<t.length;a++)(s=(o=t[a]).indexOf("="))>0&&(l=i(o.substring(0,s)),j(n[l])&&(n[l]=i(o.substring(s+1))));return n}}function hi(){this.$get=fi}function mi(t){var e="Filter";function n(r,i){if(N(r)){var o={};return w(r,function(t,e){o[e]=n(e,t)}),o}return t.factory(r+e,i)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",_i),n("date",Ri),n("filter",gi),n("json",ji),n("limitTo",Fi),n("lowercase",Ii),n("number",xi),n("orderBy",Li),n("uppercase",Ni)}function gi(){return function(t,n,r,i){if(!y(t)){if(null==t)return t;throw e("filter")("notarray","Expected array but received: {0}",t)}var a,s;switch(i=i||"$",bi(n)){case"function":a=n;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":a=function(t,e,n,r){var i=N(t)&&n in t;return!0===e?e=nt:H(e)||(e=function(t,e){return!(j(t)||(null===t||null===e?t!==e:N(e)||N(t)&&!R(t)||(t=o(""+t),e=o(""+e),-1===t.indexOf(e))))}),function(o){return i&&!N(o)?vi(o,t[n],e,n,!1):vi(o,t,e,n,r)}}(n,r,i,s);break;default:return t}return Array.prototype.filter.call(t,a)}}function vi(t,e,n,r,i,o){var a=bi(t),s=bi(e);if("string"===s&&"!"===e.charAt(0))return!vi(t,e.substring(1),n,r,i);if(B(t))return t.some(function(t){return vi(t,e,n,r,i)});switch(a){case"object":var l;if(i){for(l in t)if("$"!==l.charAt(0)&&vi(t[l],e,n,r,!0))return!0;return!o&&vi(t,e,n,r,!1)}if("object"===s){for(l in e){var u=e[l];if(!H(u)&&!j(u)){var c=l===r;if(!vi(c?t:t[l],u,n,r,c,c))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function bi(t){return null===t?"null":typeof t}fi.$inject=["$document"],mi.$inject=["$provide"];var yi=22,wi=".",ki="0";function _i(t){var e=t.NUMBER_FORMATS;return function(t,n,r){return j(n)&&(n=e.CURRENCY_SYM),j(r)&&(r=e.PATTERNS[1].maxFrac),null==t?t:Si(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function xi(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:Si(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function Si(t,e,n,r,i){if(!U(t)&&!L(t)||isNaN(t))return"";var o,a=!isFinite(t),s=!1,l=Math.abs(t)+"",u="";if(a)u="\u221e";else{!function(t,e,n,r){var i=t.d,o=i.length-t.i,a=(e=j(e)?Math.min(Math.max(n,o),r):+e)+t.i,s=i[a];if(a>0){i.splice(Math.max(t.i,a));for(var l=a;l<i.length;l++)i[l]=0}else{o=Math.max(0,o),t.i=1,i.length=Math.max(1,a=e+1),i[0]=0;for(var u=1;u<a;u++)i[u]=0}if(s>=5)if(a-1<0){for(var c=0;c>a;c--)i.unshift(0),t.i++;i.unshift(1),t.i++}else i[a-1]++;for(;o<Math.max(0,e);o++)i.push(0);var d=i.reduceRight(function(t,e,n,r){return r[n]=(e+=t)%10,Math.floor(e/10)},0);d&&(i.unshift(d),t.i++)}(o=function(t){var e,n,r,i,o,a=0;for((n=t.indexOf(wi))>-1&&(t=t.replace(wi,"")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charAt(r)===ki;r++);if(r===(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)===ki;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=+t.charAt(r)}return n>yi&&(e=e.splice(0,yi-1),a=n-1,n=1),{d:e,e:a,i:n}}(l),i,e.minFrac,e.maxFrac);var c=o.d,d=o.i,p=o.e,f=[];for(s=c.reduce(function(t,e){return t&&!e},!0);d<0;)c.unshift(0),d++;d>0?f=c.splice(d,c.length):(f=c,c=[0]);var h=[];for(c.length>=e.lgSize&&h.unshift(c.splice(-e.lgSize,c.length).join(""));c.length>e.gSize;)h.unshift(c.splice(-e.gSize,c.length).join(""));c.length&&h.unshift(c.join("")),u=h.join(n),f.length&&(u+=r+f.join("")),p&&(u+="e+"+p)}return t<0&&!s?e.negPre+u+e.negSuf:e.posPre+u+e.posSuf}function $i(t,e,n,r){var i="";for((t<0||r&&t<=0)&&(r?t=1-t:(t=-t,i="-")),t=""+t;t.length<e;)t=ki+t;return n&&(t=t.substr(t.length-e)),i+t}function Ti(t,e,n,r,i){return n=n||0,function(o){var a=o["get"+t]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),$i(a,e,r,i)}}function Ci(t,e,n){return function(r,i){var o=r["get"+t]();return i[a((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function Ei(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function Ai(t){return function(e){var n,r=Ei(e.getFullYear()),i=(n=e,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())));return $i(1+Math.round((+i-+r)/6048e5),t)}}function Di(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}_i.$inject=["$locale"],xi.$inject=["$locale"];var Pi={yyyy:Ti("FullYear",4,0,!1,!0),yy:Ti("FullYear",2,0,!0,!0),y:Ti("FullYear",1,0,!1,!0),MMMM:Ci("Month"),MMM:Ci("Month",!0),MM:Ti("Month",2,1),M:Ti("Month",1,1),LLLL:Ci("Month",!1,!0),dd:Ti("Date",2),d:Ti("Date",1),HH:Ti("Hours",2),H:Ti("Hours",1),hh:Ti("Hours",2,-12),h:Ti("Hours",1,-12),mm:Ti("Minutes",2),m:Ti("Minutes",1),ss:Ti("Seconds",2),s:Ti("Seconds",1),sss:Ti("Milliseconds",3),EEEE:Ci("Day"),EEE:Ci("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var r=-1*n;return(r>=0?"+":"")+($i(Math[r>0?"floor":"ceil"](r/60),2)+$i(Math.abs(r%60),2))},ww:Ai(2),w:Ai(1),G:Di,GG:Di,GGG:Di,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Oi=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Mi=/^-?\d+$/;function Ri(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var o,a,s="",l=[];if(r=t.DATETIME_FORMATS[r=r||"mediumDate"]||r,U(n)&&(n=Mi.test(n)?E(n):function(t){var n;if(n=t.match(e)){var r=new Date(0),i=0,o=0,a=n[8]?r.setUTCFullYear:r.setFullYear,s=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=E(n[9]+n[10]),o=E(n[9]+n[11])),a.call(r,E(n[1]),E(n[2])-1,E(n[3]));var l=E(n[4]||0)-i,u=E(n[5]||0)-o,c=E(n[6]||0),d=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(r,l,u,c,d),r}return t}(n)),L(n)&&(n=new Date(n)),!V(n)||!isFinite(n.getTime()))return n;for(;r;)(a=Oi.exec(r))?r=(l=ot(l,a,1)).pop():(l.push(r),r=null);var u=n.getTimezoneOffset();return i&&(u=pt(i,u),n=ft(n,i,!0)),w(l,function(e){s+=(o=Pi[e])?o(n,t.DATETIME_FORMATS,u):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),s}}function ji(){return function(t,e){return j(e)&&(e=2),ut(t,e)}}Ri.$inject=["$locale"];var Ii=M(o),Ni=M(a);function Fi(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):E(e),A(e)?t:(L(t)&&(t=t.toString()),y(t)?(n=(n=!n||isNaN(n)?0:E(n))<0?Math.max(0,t.length+n):n,e>=0?Ui(t,n,n+e):0===n?Ui(t,e,t.length):Ui(t,Math.max(0,n+e),n)):t)}}function Ui(t,e,n){return U(t)?t.slice(e,n):d.call(t,e,n)}function Li(t){return function(i,o,a,s){if(null==i)return i;if(!y(i))throw e("orderBy")("notarray","Expected array but received: {0}",i);B(o)||(o=[o]),0===o.length&&(o=["+"]);var l=o.map(function(e){var n=1,r=O;if(H(e))r=e;else if(U(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=t(e)).constant)){var i=r();r=function(t){return t[i]}}return{get:r,descending:n}}),u=a?-1:1,c=H(s)?s:r,d=Array.prototype.map.call(i,function(t,e){return{value:t,tieBreaker:{value:e,type:"number",index:e},predicateValues:l.map(function(r){return function(t,e){var r=typeof t;return null===t?(r="string",t="null"):"object"===r&&(t=function(t){return H(t.valueOf)&&n(t=t.valueOf())?t:(R(t)&&n(t=t.toString()),t)}(t)),{value:t,type:r,index:e}}(r.get(t),e)})}});return d.sort(function(t,e){for(var n=0,r=l.length;n<r;n++){var i=c(t.predicateValues[n],e.predicateValues[n]);if(i)return i*l[n].descending*u}return c(t.tieBreaker,e.tieBreaker)*u}),d.map(function(t){return t.value})};function n(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function r(t,e){var n=0,r=t.type,i=e.type;if(r===i){var o=t.value,a=e.value;"string"===r?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===r&&(N(o)&&(o=t.index),N(a)&&(a=e.index)),o!==a&&(n=o<a?-1:1)}else n=r<i?-1:1;return n}}function Vi(t){return H(t)&&(t={link:t}),t.restrict=t.restrict||"AC",M(t)}Li.$inject=["$parse"];var Bi=M({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===h.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),Hi={};w(xe,function(t,e){if("multiple"!==t){var n=un("ng-"+e),r=i;"checked"===t&&(r=function(t,e,r){r.ngModel!==r[n]&&i(t,0,r)}),Hi[n]=function(){return{restrict:"A",priority:100,link:r}}}function i(t,r,i){t.$watch(i[n],function(t){i.$set(e,!!t)})}}),w($e,function(t,e){Hi[e]=function(){return{priority:100,link:function(t,r,i){if("ngPattern"===e&&"/"===i.ngPattern.charAt(0)){var o=i.ngPattern.match(n);if(o)return void i.$set("ngPattern",new RegExp(o[1],o[2]))}t.$watch(i[e],function(t){i.$set(e,t)})}}}}),w(["src","srcset","href"],function(t){var e=un("ng-"+t);Hi[e]=function(){return{priority:99,link:function(n,r,i){var o=t,a=t;"href"===t&&"[object SVGAnimatedString]"===h.call(r.prop("href"))&&(i.$attr[a="xlinkHref"]="xlink:href",o=null),i.$observe(e,function(e){e?(i.$set(a,e),s&&o&&r.prop(o,i[a])):"href"===t&&i.$set(a,null)})}}}});var qi={$addControl:P,$$renameControl:function(t,e){t.$name=e},$removeControl:P,$setValidity:P,$setDirty:P,$setPristine:P,$setSubmitted:P},zi="ng-submitted";function Gi(t,e,n,r,i){var o=this,a=[];o.$error={},o.$$success={},o.$pending=void 0,o.$name=i(e.name||e.ngForm||"")(n),o.$dirty=!1,o.$pristine=!0,o.$valid=!0,o.$invalid=!1,o.$submitted=!1,o.$$parentForm=qi,o.$rollbackViewValue=function(){w(a,function(t){t.$rollbackViewValue()})},o.$commitViewValue=function(){w(a,function(t){t.$commitViewValue()})},o.$addControl=function(t){Dt(t.$name,"input"),a.push(t),t.$name&&(o[t.$name]=t),t.$$parentForm=o},o.$$renameControl=function(t,e){var n=t.$name;o[n]===t&&delete o[n],o[e]=t,t.$name=e},o.$removeControl=function(t){t.$name&&o[t.$name]===t&&delete o[t.$name],w(o.$pending,function(e,n){o.$setValidity(n,null,t)}),w(o.$error,function(e,n){o.$setValidity(n,null,t)}),w(o.$$success,function(e,n){o.$setValidity(n,null,t)}),tt(a,t),t.$$parentForm=qi},Ko({ctrl:this,$element:t,set:function(t,e,n){var r=t[e];r?-1===r.indexOf(n)&&r.push(n):t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(tt(r,n),0===r.length&&delete t[e])},$animate:r}),o.$setDirty=function(){r.removeClass(t,Vo),r.addClass(t,Bo),o.$dirty=!0,o.$pristine=!1,o.$$parentForm.$setDirty()},o.$setPristine=function(){r.setClass(t,Vo,Bo+" "+zi),o.$dirty=!1,o.$pristine=!0,o.$submitted=!1,w(a,function(t){t.$setPristine()})},o.$setUntouched=function(){w(a,function(t){t.$setUntouched()})},o.$setSubmitted=function(){r.addClass(t,zi),o.$submitted=!0,o.$$parentForm.$setSubmitted()}}Gi.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Wi=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Gi,compile:function(n,i){n.addClass(Vo).addClass(Uo);var o=i.name?"name":!(!t||!i.ngForm)&&"ngForm";return{pre:function(t,n,i,a){var s=a[0];if(!("action"in i)){var l=function(e){t.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),e.preventDefault()};qt(n[0],"submit",l),n.on("$destroy",function(){e(function(){zt(n[0],"submit",l)},0,!1)})}(a[1]||s.$$parentForm).$addControl(s);var u=o?r(s.$name):P;o&&(u(t,s),i.$observe(o,function(e){s.$name!==e&&(u(t,void 0),s.$$parentForm.$$renameControl(s,e),(u=r(s.$name))(t,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),u(t,void 0),T(s,qi)})}}}};function r(t){return""===t?n('this[""]').assign:n(t).assign||P}}]},Yi=Wi(),Ki=Wi(!0),Zi=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Qi=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Xi=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Ji=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,to=/^(\d{4,})-(\d{2})-(\d{2})$/,eo=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,no=/^(\d{4,})-W(\d\d)$/,ro=/^(\d{4,})-(\d\d)$/,io=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,oo="keydown wheel mousedown",ao=Mt();w("date,datetime-local,month,time,week".split(","),function(t){ao[t]=!0});var so={text:function(t,e,n,r,i,o){uo(0,e,n,r,i,o),lo(r)},date:po("date",to,co(to,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":po("datetimelocal",eo,co(eo,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:po("time",io,co(io,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:po("week",no,function(t,e){if(V(t))return t;if(U(t)){no.lastIndex=0;var n=no.exec(t);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,l=0,u=Ei(r),c=7*(i-1);return e&&(o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),l=e.getMilliseconds()),new Date(r,0,u.getDate()+c,o,a,s,l)}}return NaN},"yyyy-Www"),month:po("month",ro,co(ro,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,r,i,o){var a,s;fo(0,e,0,r),uo(0,e,n,r,i,o),ho(r),(I(n.min)||n.ngMin)&&(r.$validators.min=function(t){return r.$isEmpty(t)||j(a)||t>=a},n.$observe("min",function(t){a=mo(t),r.$validate()})),(I(n.max)||n.ngMax)&&(r.$validators.max=function(t){return r.$isEmpty(t)||j(s)||t<=s},n.$observe("max",function(t){s=mo(t),r.$validate()}))},url:function(t,e,n,r,i,o){uo(0,e,n,r,i,o),lo(r),r.$$parserName="url",r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||Qi.test(n)}},email:function(t,e,n,r,i,o){uo(0,e,n,r,i,o),lo(r),r.$$parserName="email",r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||Xi.test(n)}},radio:function(t,e,n,r){j(n.name)&&e.attr("name",x()),e.on("click",function(t){e[0].checked&&r.$setViewValue(n.value,t&&t.type)}),r.$render=function(){e[0].checked=n.value==r.$viewValue},n.$observe("value",r.$render)},range:function(t,e,n,r,i,o){fo(0,e,0,r),ho(r),uo(0,e,n,r,i,o);var a=r.$$hasNativeValidators&&"range"===e[0].type,s=a?0:void 0,l=a?100:void 0,u=a?1:void 0,c=e[0].validity,d=I(n.min),p=I(n.max),f=I(n.step),h=r.$render;function m(t,r){e.attr(t,n[t]),n.$observe(t,r)}r.$render=a&&I(c.rangeUnderflow)&&I(c.rangeOverflow)?function(){h(),r.$setViewValue(e.val())}:h,d&&(r.$validators.min=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||j(s)||e>=s},m("min",function(t){if(s=mo(t),!A(r.$modelValue))if(a){var n=e.val();s>n&&e.val(n=s),r.$setViewValue(n)}else r.$validate()})),p&&(r.$validators.max=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||j(l)||e<=l},m("max",function(t){if(l=mo(t),!A(r.$modelValue))if(a){var n=e.val();l<n&&(e.val(l),n=l<s?s:l),r.$setViewValue(n)}else r.$validate()})),f&&(r.$validators.step=a?function(){return!c.stepMismatch}:function(t,e){return r.$isEmpty(e)||j(u)||function(t,e,n){var r=Number(t);if(!go(r)||!go(e)||!go(n)){var i=Math.max(vo(r),vo(e),vo(n)),o=Math.pow(10,i);r*=o,e*=o,n*=o}return(r-e)%n==0}(e,s||0,u)},m("step",function(t){u=mo(t),A(r.$modelValue)||(a&&r.$viewValue!==e.val()?r.$setViewValue(e.val()):r.$validate())}))},checkbox:function(t,e,n,r,i,o,a,s){var l=bo(s,t,"ngTrueValue",n.ngTrueValue,!0),u=bo(s,t,"ngFalseValue",n.ngFalseValue,!1);e.on("click",function(t){r.$setViewValue(e[0].checked,t&&t.type)}),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return!1===t},r.$formatters.push(function(t){return nt(t,l)}),r.$parsers.push(function(t){return t?l:u})},hidden:P,button:P,submit:P,reset:P,file:P};function lo(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function uo(t,e,n,i,a,s){var l,u=o(e[0].type);if(!a.android){var c=!1;e.on("compositionstart",function(){c=!0}),e.on("compositionend",function(){c=!1,d()})}var d=function(t){if(l&&(s.defer.cancel(l),l=null),!c){var r=e.val(),o=t&&t.type;"password"===u||n.ngTrim&&"false"===n.ngTrim||(r=Z(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,o)}};if(a.hasEvent("input"))e.on("input",d);else{var p=function(t,e,n){l||(l=s.defer(function(){l=null,e&&e.value===n||d(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||p(t,this,this.value)}),a.hasEvent("paste")&&e.on("paste cut",p)}e.on("change",d),ao[u]&&i.$$hasNativeValidators&&u===n.type&&e.on(oo,function(t){if(!l){var e=this[r],n=e.badInput,i=e.typeMismatch;l=s.defer(function(){l=null,e.badInput===n&&e.typeMismatch===i||d(t)})}}),i.$render=function(){var t=i.$isEmpty(i.$viewValue)?"":i.$viewValue;e.val()!==t&&e.val(t)}}function co(t,e){return function(n,r){var i,o;if(V(n))return n;if(U(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Zi.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n))return i.shift(),o=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},w(i,function(t,n){n<e.length&&(o[e[n]]=+t)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return NaN}}function po(t,e,n,r){return function(i,o,a,s,l,u,c){fo(0,o,0,s),uo(0,o,a,s,l,u);var d,p,f,h=s&&s.$options&&s.$options.timezone;function m(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function g(t){return I(t)&&!V(t)?n(t)||void 0:t}s.$$parserName=t,s.$parsers.push(function(t){if(s.$isEmpty(t))return null;if(e.test(t)){var r=n(t,d);return h&&(r=ft(r,h)),r}}),s.$formatters.push(function(t){if(t&&!V(t))throw qo("datefmt","Expected `{0}` to be a date",t);return m(t)?((d=t)&&h&&(d=ft(d,h,!0)),c("date")(t,r,h)):(d=null,"")}),(I(a.min)||a.ngMin)&&(s.$validators.min=function(t){return!m(t)||j(p)||n(t)>=p},a.$observe("min",function(t){p=g(t),s.$validate()})),(I(a.max)||a.ngMax)&&(s.$validators.max=function(t){return!m(t)||j(f)||n(t)<=f},a.$observe("max",function(t){f=g(t),s.$validate()}))}}function fo(t,e,n,i){(i.$$hasNativeValidators=N(e[0].validity))&&i.$parsers.push(function(t){var n=e.prop(r)||{};return n.badInput||n.typeMismatch?void 0:t})}function ho(t){t.$$parserName="number",t.$parsers.push(function(e){return t.$isEmpty(e)?null:Ji.test(e)?parseFloat(e):void 0}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!L(e))throw qo("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function mo(t){return I(t)&&!L(t)&&(t=parseFloat(t)),A(t)?void 0:t}function go(t){return(0|t)===t}function vo(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var r=/e-(\d+)$/.exec(e);if(r)return Number(r[1])}return 0}return e.length-n-1}function bo(t,e,n,r,i){var o;if(I(r)){if(!(o=t(r)).constant)throw qo("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(e)}return i}var yo=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,a,s,l){if(l[0]){var u=o(s.type);"range"!==u||s.hasOwnProperty("ngInputRange")||(u="text"),(so[u]||so.text)(i,a,s,l[0],e,t,n,r)}}}}}],wo=/^(true|false|\d+)$/,ko=function(){return{restrict:"A",priority:100,compile:function(t,e){return wo.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},_o=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,r){t.$$addBindingInfo(n,r.ngBind),n=n[0],e.$watch(r.ngBind,function(t){n.textContent=j(t)?"":t})}}}}],xo=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,r,i){var o=t(r.attr(i.$attr.ngBindTemplate));e.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",function(t){r.textContent=j(t)?"":t})}}}}],So=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),a=e(i.ngBindHtml,function(e){return t.valueOf(e)});return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(a,function(){var n=o(e);r.html(t.getTrustedHtml(n)||"")})}}}}],$o=M({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}});function To(t,e){return t="ngClass"+t,["$animate",function(n){return{restrict:"AC",link:function(o,a,s){var l;function u(t){var e=c(t,1);s.$addClass(e)}function c(t,e){var n=a.data("$classCounts")||Mt(),r=[];return w(t,function(t){(e>0||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(e>0)&&r.push(t))}),a.data("$classCounts",n),r.join(" ")}function d(t){if(!0===e||(1&o.$index)===e){var s=i(t||[]);l?nt(t,l)||function(t,e){var i=r(e,t),o=r(t,e);i=c(i,1),o=c(o,-1),i&&i.length&&n.addClass(a,i),o&&o.length&&n.removeClass(a,o)}(i(l),s):u(s)}l=B(t)?t.map(function(t){return Ut(t)}):Ut(t)}s.$observe("class",function(e){d(o.$eval(s[t]))}),"ngClass"!==t&&o.$watch("$index",function(t,n){var r=1&t;if(r!==(1&n)){var o=i(l);r===e?u(o):function(t){var e=c(t,-1);s.$removeClass(e)}(o)}}),o.$watch(s[t],d,!0)}};function r(t,e){var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i===e[o])continue t;n.push(i)}return n}function i(t){var e=[];return B(t)?(w(t,function(t){e=e.concat(i(t))}),e):U(t)?t.split(" "):N(t)?(w(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e):t}}]}var Co=To("",!0),Eo=To("Odd",0),Ao=To("Even",1),Do=Vi({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Po=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Oo={},Mo={blur:!0,focus:!0};w("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=un("ng-"+t);Oo[e]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[e],null,!0);return function(e,n){n.on(t,function(n){var i=function(){a(e,{$event:n})};Mo[t]&&r.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}]});var Ro=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,l,u;n.$watch(i.ngIf,function(n){n?l||a(function(n,o){l=o,n[n.length++]=e.$$createComment("end ngIf",i.ngIf),s={clone:n},t.enter(n,r.parent(),r)}):(u&&(u.remove(),u=null),l&&(l.$destroy(),l=null),s&&(u=Ot(s.clone),t.leave(u).done(function(t){!1!==t&&(u=null)}),s=null))})}}}],jo=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:v.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,l,u,c){var d,p,f,h=0,m=function(){p&&(p.remove(),p=null),d&&(d.$destroy(),d=null),f&&(n.leave(f).done(function(t){!1!==t&&(p=null)}),p=f,f=null)};r.$watch(o,function(o){var l=function(t){!1===t||!I(s)||s&&!r.$eval(s)||e()},p=++h;o?(t(o,!0).then(function(t){if(!r.$$destroyed&&p===h){var e=r.$new();u.template=t;var s=c(e,function(t){m(),n.enter(t,null,i).done(l)});f=s,(d=e).$emit("$includeContentLoaded",o),r.$eval(a)}},function(){r.$$destroyed||p===h&&(m(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(m(),u.template=null)})}}}}],Io=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){if(h.call(r[0]).match(/SVG/))return r.empty(),void e(ie(o.template,t.document).childNodes)(n,function(t){r.append(t)},{futureParentElement:r});r.html(o.template),e(r.contents())(n)}}}],No=Vi({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Fo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,r){var i=e.attr(n.$attr.ngList)||", ",o="false"!==n.ngTrim,a=o?Z(i):i;r.$parsers.push(function(t){if(!j(t)){var e=[];return t&&w(t.split(a),function(t){t&&e.push(o?Z(t):t)}),e}}),r.$formatters.push(function(t){if(B(t))return t.join(i)}),r.$isEmpty=function(t){return!t||!t.length}}}},Uo="ng-valid",Lo="ng-invalid",Vo="ng-pristine",Bo="ng-dirty",Ho="ng-pending",qo=e("ngModel"),zo=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,n,r,i,o,a,s,l,u){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=u(n.name||"",!1)(t),this.$$parentForm=qi;var c,d=i(n.ngModel),p=d.assign,f=d,h=p,m=null,g=this;this.$$setOptions=function(t){if(g.$options=t,t&&t.getterSetter){var e=i(n.ngModel+"()"),o=i(n.ngModel+"($$$p)");f=function(t){var n=d(t);return H(n)&&(n=e(t)),n},h=function(t,e){H(d(t))?o(t,{$$$p:e}):p(t,e)}}else if(!d.assign)throw qo("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,ht(r))},this.$render=P,this.$isEmpty=function(t){return j(t)||""===t||null===t||t!=t},this.$$updateEmptyClasses=function(t){g.$isEmpty(t)?(o.removeClass(r,"ng-not-empty"),o.addClass(r,"ng-empty")):(o.removeClass(r,"ng-empty"),o.addClass(r,"ng-not-empty"))};var v=0;Ko({ctrl:this,$element:r,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},$animate:o}),this.$setPristine=function(){g.$dirty=!1,g.$pristine=!0,o.removeClass(r,Bo),o.addClass(r,Vo)},this.$setDirty=function(){g.$dirty=!0,g.$pristine=!1,o.removeClass(r,Vo),o.addClass(r,Bo),g.$$parentForm.$setDirty()},this.$setUntouched=function(){g.$touched=!1,g.$untouched=!0,o.setClass(r,"ng-untouched","ng-touched")},this.$setTouched=function(){g.$touched=!0,g.$untouched=!1,o.setClass(r,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){a.cancel(m),g.$viewValue=g.$$lastCommittedViewValue,g.$render()},this.$validate=function(){if(!A(g.$modelValue)){var t=g.$$rawModelValue,e=g.$valid,n=g.$modelValue,r=g.$options&&g.$options.allowInvalid;g.$$runValidators(t,g.$$lastCommittedViewValue,function(i){r||e===i||(g.$modelValue=i?t:void 0,g.$modelValue!==n&&g.$$writeModelToScope())})}},this.$$runValidators=function(t,e,n){var r,i,o,a,s=++v;function u(t,e){s===v&&g.$setValidity(t,e)}function d(t){s===v&&n(t)}a=g.$$parserName||"parse",(j(c)?(u(a,null),1):(c||(w(g.$validators,function(t,e){u(e,null)}),w(g.$asyncValidators,function(t,e){u(e,null)})),u(a,c),c))?(o=!0,w(g.$validators,function(n,r){var i=n(t,e);o=o&&i,u(r,i)}),!o&&(w(g.$asyncValidators,function(t,e){u(e,null)}),1)?d(!1):(r=[],i=!0,w(g.$asyncValidators,function(n,o){var a=n(t,e);if(!Y(a))throw qo("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);u(o,void 0),r.push(a.then(function(){u(o,!0)},function(){i=!1,u(o,!1)}))}),r.length?l.all(r).then(function(){d(i)},P):d(!0))):d(!1)},this.$commitViewValue=function(){var t=g.$viewValue;a.cancel(m),(g.$$lastCommittedViewValue!==t||""===t&&g.$$hasNativeValidators)&&(g.$$updateEmptyClasses(t),g.$$lastCommittedViewValue=t,g.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var e=g.$$lastCommittedViewValue;if(c=!j(e)||void 0)for(var n=0;n<g.$parsers.length;n++)if(j(e=g.$parsers[n](e))){c=!1;break}A(g.$modelValue)&&(g.$modelValue=f(t));var r=g.$modelValue,i=g.$options&&g.$options.allowInvalid;function o(){g.$modelValue!==r&&g.$$writeModelToScope()}g.$$rawModelValue=e,i&&(g.$modelValue=e,o()),g.$$runValidators(e,g.$$lastCommittedViewValue,function(t){i||(g.$modelValue=t?e:void 0,o())})},this.$$writeModelToScope=function(){h(t,g.$modelValue),w(g.$viewChangeListeners,function(t){try{t()}catch(n){e(n)}})},this.$setViewValue=function(t,e){g.$viewValue=t,g.$options&&!g.$options.updateOnDefault||g.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n,r=0,i=g.$options;i&&I(i.debounce)&&(L(n=i.debounce)?r=n:L(n[e])?r=n[e]:L(n.default)&&(r=n.default)),a.cancel(m),r?m=a(function(){g.$commitViewValue()},r):s.$$phase?g.$commitViewValue():t.$apply(function(){g.$commitViewValue()})},t.$watch(function(){var e=f(t);if(e!==g.$modelValue&&(g.$modelValue==g.$modelValue||e==e)){g.$modelValue=g.$$rawModelValue=e,c=void 0;for(var n=g.$formatters,r=n.length,i=e;r--;)i=n[r](i);g.$viewValue!==i&&(g.$$updateEmptyClasses(i),g.$viewValue=g.$$lastCommittedViewValue=i,g.$render(),g.$$runValidators(g.$modelValue,g.$viewValue,P))}return e})}],Go=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:zo,priority:1,compile:function(e){return e.addClass(Vo).addClass("ng-untouched").addClass(Uo),{pre:function(t,e,n,r){var i=r[0],o=r[1]||i.$$parentForm;i.$$setOptions(r[2]&&r[2].$options),o.$addControl(i),n.$observe("name",function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)}),t.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(e,n,r,i){var o=i[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],Wo=/(\s+|^)default(\s+|$)/,Yo=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var n=this;this.$options=et(t.$eval(e.ngModelOptions)),I(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Z(this.$options.updateOn.replace(Wo,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}};function Ko(t){var e=t.ctrl,n=t.$element,r={},i=t.set,o=t.unset,a=t.$animate;function s(t,e){e&&!r[t]?(a.addClass(n,t),r[t]=!0):!e&&r[t]&&(a.removeClass(n,t),r[t]=!1)}function l(t,e){t=t?"-"+Tt(t,"-"):"",s(Uo+t,!0===e),s(Lo+t,!1===e)}r[Lo]=!(r[Uo]=n.hasClass(Uo)),e.$setValidity=function(t,n,r){var a;j(n)?function(t,n,r){e[t]||(e[t]={}),i(e[t],n,r)}("$pending",t,r):function(n,r,i){e[n]&&o(e[n],t,i),Zo(e[n])&&(e[n]=void 0)}("$pending",0,r),W(n)?n?(o(e.$error,t,r),i(e.$$success,t,r)):(i(e.$error,t,r),o(e.$$success,t,r)):(o(e.$error,t,r),o(e.$$success,t,r)),e.$pending?(s(Ho,!0),e.$valid=e.$invalid=void 0,l("",null)):(s(Ho,!1),e.$valid=Zo(e.$error),e.$invalid=!e.$valid,l("",e.$valid)),l(t,a=e.$pending&&e.$pending[t]?void 0:!e.$error[t]&&(!!e.$$success[t]||null)),e.$$parentForm.$setValidity(t,a,e)}}function Zo(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Qo=Vi({terminal:!0,priority:1e3}),Xo=e("ngOptions"),Jo=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ta=["$compile","$document","$parse",function(e,n,r){var i=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,r){r[0].registerOption=P},post:function(t,a,s,u){for(var c,d=u[0],p=u[1],f=s.multiple,h=0,m=a.children(),g=m.length;h<g;h++)if(""===m[h].value){c=m.eq(h);break}var v,b=!!c,k=!1,_=l(i.cloneNode(!1));_.val("?");var x=function(t,e,n){var i=t.match(Jo);if(!i)throw Xo("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,ht(e));var o=i[5]||i[7],a=i[6],s=/ as /.test(i[0])&&i[1],l=i[9],u=r(i[2]?i[1]:o),c=s&&r(s)||u,d=l&&r(l),p=l?function(t,e){return d(n,e)}:function(t){return De(t)},f=function(t,e){return p(t,w(t,e))},h=r(i[2]||i[1]),m=r(i[3]||""),g=r(i[4]||""),v=r(i[8]),b={},w=a?function(t,e){return b[a]=e,b[o]=t,b}:function(t){return b[o]=t,b};function k(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}function _(t){var e;if(!a&&y(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:l,getTrackByValue:f,getWatchables:r(v,function(t){for(var e=[],r=_(t=t||[]),o=r.length,a=0;a<o;a++){var s=t===r?a:r[a],l=t[s],u=w(l,s),c=p(l,u);if(e.push(c),i[2]||i[1]){var d=h(n,u);e.push(d)}if(i[4]){var f=g(n,u);e.push(f)}}return e}),getOptions:function(){for(var t=[],e={},r=v(n)||[],i=_(r),o=i.length,a=0;a<o;a++){var s=r===i?a:i[a],u=w(r[s],s),d=c(n,u),b=p(d,u),y=new k(b,d,h(n,u),m(n,u),g(n,u));t.push(y),e[b]=y}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[f(t)]},getViewValueFromOption:function(t){return l?et(t.viewValue):t.viewValue}}}}}(s.ngOptions,a,t),S=n[0].createDocumentFragment(),$=function(){b?k&&c.removeAttr("selected"):c.remove()},T=function(){_.remove()};function C(t,e){var n=i.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),e.value=t.selectValue}(t,n)}function E(){var t=v&&d.readValue();if(v)for(var e=v.items.length-1;e>=0;e--){var n=v.items[e];I(n.group)?ke(n.element.parentNode):ke(n.element)}v=x.getOptions();var r={};if(b&&a.prepend(c),v.items.forEach(function(t){var e;I(t.group)?((e=r[t.group])||(e=o.cloneNode(!1),S.appendChild(e),e.label=null===t.group?"null":t.group,r[t.group]=e),C(t,e)):C(t,S)}),a[0].appendChild(S),p.$render(),!p.$isEmpty(t)){var i=d.readValue();(x.trackBy||f?nt(t,i):t===i)||(p.$setViewValue(i),p.$render())}}f?(p.$isEmpty=function(t){return!t||0===t.length},d.writeValue=function(t){v.items.forEach(function(t){t.element.selected=!1}),t&&t.forEach(function(t){var e=v.getOptionFromViewValue(t);e&&(e.element.selected=!0)})},d.readValue=function(){var t=a.val()||[],e=[];return w(t,function(t){var n=v.selectValueMap[t];n&&!n.disabled&&e.push(v.getViewValueFromOption(n))}),e},x.trackBy&&t.$watchCollection(function(){if(B(p.$viewValue))return p.$viewValue.map(function(t){return x.getTrackByValue(t)})},function(){p.$render()})):(d.writeValue=function(t){var e=v.selectValueMap[a.val()],n=v.getOptionFromViewValue(t);e&&e.element.removeAttribute("selected"),n?(a[0].value!==n.selectValue&&(T(),$(),a[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):null===t||b?(T(),b||a.prepend(c),a.val(""),k&&(c.prop("selected",!0),c.attr("selected",!0))):($(),a.prepend(_),a.val("?"),_.prop("selected",!0),_.attr("selected",!0))},d.readValue=function(){var t=v.selectValueMap[a.val()];return t&&!t.disabled?($(),T(),v.getViewValueFromOption(t)):null},x.trackBy&&t.$watch(function(){return x.getTrackByValue(p.$viewValue)},function(){p.$render()})),b?(c.remove(),e(c)(t),c[0].nodeType===It?(k=!1,d.registerOption=function(t,e){""===e.val()&&(k=!0,(c=e).removeClass("ng-scope"),p.$render(),e.on("$destroy",function(){c=void 0,k=!1}))}):(c.removeClass("ng-scope"),k=!0)):c=l(i.cloneNode(!1)),a.empty(),E(),t.$watchCollection(x.getWatchables,E)}}}}],ea=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(a,s,l){var u,c=l.count,d=l.$attr.when&&s.attr(l.$attr.when),p=l.offset||0,f=a.$eval(d)||{},h={},m=e.startSymbol(),g=e.endSymbol(),b=m+c+"-"+p+g,y=v.noop;function k(t){s.text(t||"")}w(l,function(t,e){var n=i.exec(e);if(n){var r=(n[1]?"-":"")+o(n[2]);f[r]=s.attr(l.$attr[e])}}),w(f,function(t,n){h[n]=e(t.replace(r,b))}),a.$watch(c,function(e){var r=parseFloat(e),i=A(r);if(i||r in f||(r=t.pluralCat(r-p)),!(r===u||i&&A(u))){y();var o=h[r];j(o)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+d),y=P,k()):y=a.$watch(o,k),u=r}})}}}],na=["$parse","$animate","$compile",function(t,n,r){var o=e("ngRepeat"),a=function(t,e,n,r,i,o,a){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},s=function(t){return t.clone[0]},l=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,u){var c=u.ngRepeat,d=r.$$createComment("end ngRepeat",c),p=c.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw o("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",c);var f=p[1],h=p[2],m=p[3],g=p[4];if(!(p=f.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw o("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",f);var v,b,k,_,x=p[3]||p[1],S=p[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m)))throw o("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",m);var $={$id:De};return g?v=t(g):(k=function(t,e){return De(e)},_=function(t){return t}),function(t,e,r,u,p){v&&(b=function(e,n,r){return S&&($[S]=e),$[x]=n,$.$index=r,v(t,$)});var f=Mt();t.$watchCollection(h,function(r){var u,h,g,v,$,T,C,E,A,D,P,O,M=e[0],R=Mt();if(m&&(t[m]=r),y(r))A=r,E=b||k;else for(var j in E=b||_,A=[],r)i.call(r,j)&&"$"!==j.charAt(0)&&A.push(j);for(v=A.length,P=new Array(v),u=0;u<v;u++)if(C=E($=r===A?u:A[u],T=r[$],u),f[C])D=f[C],delete f[C],R[C]=D,P[u]=D;else{if(R[C])throw w(P,function(t){t&&t.scope&&(f[t.id]=t)}),o("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",c,C,T);P[u]={id:C,scope:void 0,clone:void 0},R[C]=!0}for(var I in f){if(O=Ot((D=f[I]).clone),n.leave(O),O[0].parentNode)for(u=0,h=O.length;u<h;u++)O[u].$$NG_REMOVED=!0;D.scope.$destroy()}for(u=0;u<v;u++)if(T=r[$=r===A?u:A[u]],(D=P[u]).scope){g=M;do{g=g.nextSibling}while(g&&g.$$NG_REMOVED);s(D)!==g&&n.move(Ot(D.clone),null,M),M=l(D),a(D.scope,u,x,T,S,$,v)}else p(function(t,e){D.scope=e;var r=d.cloneNode(!1);t[t.length++]=r,n.enter(t,null,M),M=r,D.clone=t,R[D.id]=D,a(D.scope,u,x,T,S,$,v)});f=R})}}}}],ra=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ia=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],oa=Vi(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&w(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),aa=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,o){var a=[],s=[],l=[],u=[],c=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(i.ngSwitch||i.on,function(n){for(var r,i;l.length;)t.cancel(l.pop());for(r=0,i=u.length;r<i;++r){var d=Ot(s[r].clone);u[r].$destroy(),(l[r]=t.leave(d)).done(c(l,r))}s.length=0,u.length=0,(a=o.cases["!"+n]||o.cases["?"])&&w(a,function(n){n.transclude(function(r,i){u.push(i);var o=n.element;r[r.length++]=e.$$createComment("end ngSwitchWhen"),s.push({clone:r}),t.enter(r,o.parent(),o)})})})}}}],sa=Vi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){w(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(t,e,n){return n[e-1]!==t}),function(t){r.cases["!"+t]=r.cases["!"+t]||[],r.cases["!"+t].push({transclude:i,element:e})})}}),la=Vi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),ua=e("ngTransclude"),ca=["$compile",function(t){return{restrict:"EAC",terminal:!0,compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,r,i,o){if(!o)throw ua("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",ht(e));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var a=r.ngTransclude||r.ngTranscludeSlot;function s(){n(t,function(t){e.append(t)})}o(function(t,n){t.length?e.append(t):(s(),n.$destroy())},null,a),a&&!o.isSlotFilled(a)&&s()}}}}],da=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){"text/ng-template"===n.type&&t.put(n.id,e[0].text)}}}],pa={$setViewValue:P,$render:P},fa=["$element","$scope",function(e,n){var r=this,i=new Pe;r.ngModelCtrl=pa,r.unknownOption=l(t.document.createElement("option")),r.renderUnknownOption=function(t){var n="? "+De(t)+" ?";r.unknownOption.val(n),e.prepend(r.unknownOption),e.val(n)},n.$on("$destroy",function(){r.renderUnknownOption=P}),r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.readValue=function(){return r.removeUnknownOption(),e.val()},r.writeValue=function(t){r.hasOption(t)?(r.removeUnknownOption(),e.val(t),""===t&&r.emptyOption.prop("selected",!0)):null==t&&r.emptyOption?(r.removeUnknownOption(),e.val("")):r.renderUnknownOption(t)},r.addOption=function(t,e){if(e[0].nodeType!==It){Dt(t,'"option value"'),""===t&&(r.emptyOption=e);var n,o=i.get(t)||0;i.put(t,o+1),r.ngModelCtrl.$render(),(n=e)[0].hasAttribute("selected")&&(n[0].selected=!0)}},r.removeOption=function(t){var e=i.get(t);e&&(1===e?(i.remove(t),""===t&&(r.emptyOption=void 0)):i.put(t,e-1))},r.hasOption=function(t){return!!i.get(t)},r.registerOption=function(t,e,n,i,o){var a;i?n.$observe("value",function(t){I(a)&&r.removeOption(a),a=t,r.addOption(t,e)}):o?t.$watch(o,function(t,i){n.$set("value",t),i!==t&&r.removeOption(i),r.addOption(t,e)}):r.addOption(n.value,e),e.on("$destroy",function(){r.removeOption(n.value),r.ngModelCtrl.$render()})}}],ha=function(){return{restrict:"E",require:["select","?ngModel"],controller:fa,priority:1,link:{pre:function(t,e,n,r){var i=r[1];if(i){var o=r[0];if(o.ngModelCtrl=i,e.on("change",function(){t.$apply(function(){i.$setViewValue(o.readValue())})}),n.multiple){o.readValue=function(){var t=[];return w(e.find("option"),function(e){e.selected&&t.push(e.value)}),t},o.writeValue=function(t){var n=new Pe(t);w(e.find("option"),function(t){t.selected=I(n.get(t.value))})};var a,s=NaN;t.$watch(function(){s!==i.$viewValue||nt(a,i.$viewValue)||(a=Ut(i.$viewValue),i.$render()),s=i.$viewValue}),i.$isEmpty=function(t){return!t||0===t.length}}}},post:function(t,e,n,r){var i=r[1];if(i){var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}}}},ma=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var r,i;return I(n.ngValue)?r=!0:I(n.value)?r=t(n.value,!0):(i=t(e.text(),!0))||n.$set("value",e.text()),function(t,e,n){var o=e.parent(),a=o.data("$selectController")||o.parent().data("$selectController");a&&a.registerOption(t,e,n,r,i)}}}}],ga=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(n.required=!0,r.$validators.required=function(t,e){return!n.required||!r.$isEmpty(e)},n.$observe("required",function(){r.$validate()}))}}},va=function(){return{restrict:"A",require:"?ngModel",link:function(t,n,r,i){if(i){var o,a=r.ngPattern||r.pattern;r.$observe("pattern",function(t){if(U(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw e("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,t,ht(n));o=t||void 0,i.$validate()}),i.$validators.pattern=function(t,e){return i.$isEmpty(e)||j(o)||o.test(e)}}}}},ba=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=-1;n.$observe("maxlength",function(t){var e=E(t);i=A(e)?-1:e,r.$validate()}),r.$validators.maxlength=function(t,e){return i<0||r.$isEmpty(e)||e.length<=i}}}}},ya=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=0;n.$observe("minlength",function(t){i=E(t)||0,r.$validate()}),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=i}}}}};t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load angular more than once."):(function(){var e;if(!Ct){var n=it();(u=j(n)?t.jQuery:n?t[n]:void 0)&&u.fn.on?(l=u,T(u.fn,{scope:_e.scope,isolateScope:_e.isolateScope,controller:_e.controller,injector:_e.injector,inheritedData:_e.inheritedData}),e=u.cleanData,u.cleanData=function(t){for(var n,r,i=0;null!=(r=t[i]);i++)(n=u._data(r,"events"))&&n.$destroy&&u(r).triggerHandler("$destroy");e(t)}):l=se,v.element=l,Ct=!0}}(),function(n){T(n,{bootstrap:_t,copy:et,extend:T,merge:C,equals:nt,element:l,forEach:w,injector:Ve,noop:P,bind:st,toJson:ut,fromJson:ct,identity:O,isUndefined:j,isDefined:I,isString:U,isFunction:H,isObject:N,isNumber:L,isElement:X,isArray:B,version:Vt,isDate:V,lowercase:o,uppercase:a,callbacks:{$$counter:0},getTestability:St,$$minErr:e,$$csp:rt,reloadWithDebugInfo:xt}),(c=function(t){var n=e("$injector"),r=e("ng");function i(t,e,n){return t[e]||(t[e]=n())}var o=i(t,"angular",Object);return o.$$minErr=o.$$minErr||e,i(o,"module",function(){var t={};return function(e,o,a){return function(t,e){if("hasOwnProperty"===t)throw r("badname","hasOwnProperty is not a valid {0} name","module")}(e),o&&t.hasOwnProperty(e)&&(t[e]=null),i(t,e,function(){if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",e);var t=[],r=[],i=[],s=u("$injector","invoke","push",r),l={_invokeQueue:t,_configBlocks:r,_runBlocks:i,requires:o,name:e,provider:c("$provide","provider"),factory:c("$provide","factory"),service:c("$provide","service"),value:u("$provide","value"),constant:u("$provide","constant","unshift"),decorator:c("$provide","decorator"),animation:c("$animateProvider","register"),filter:c("$filterProvider","register"),controller:c("$controllerProvider","register"),directive:c("$compileProvider","directive"),component:c("$compileProvider","component"),config:s,run:function(t){return i.push(t),this}};return a&&s(a),l;function u(e,n,r,i){return i||(i=t),function(){return i[r||"push"]([e,n,arguments]),l}}function c(n,r){return function(i,o){return o&&H(o)&&(o.$$moduleName=e),t.push([n,r,arguments]),l}}})}})}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Qr}),t.provider("$compile",an).directive({a:Bi,input:yo,textarea:yo,form:Yi,script:da,select:ha,option:ma,ngBind:_o,ngBindHtml:So,ngBindTemplate:xo,ngClass:Co,ngClassEven:Ao,ngClassOdd:Eo,ngCloak:Do,ngController:Po,ngForm:Ki,ngHide:ia,ngIf:Ro,ngInclude:jo,ngInit:No,ngNonBindable:Qo,ngPluralize:ea,ngRepeat:na,ngShow:ra,ngStyle:oa,ngSwitch:aa,ngSwitchWhen:sa,ngSwitchDefault:la,ngOptions:ta,ngTransclude:ca,ngModel:Go,ngList:Fo,ngChange:$o,pattern:va,ngPattern:va,required:ga,ngRequired:ga,minlength:ya,ngMinlength:ya,maxlength:ba,ngMaxlength:ba,ngValue:ko,ngModelOptions:Yo}).directive({ngInclude:Io}).directive(Hi).directive(Oo),t.provider({$anchorScroll:Be,$animate:Ke,$animateCss:Xe,$$animateJs:We,$$animateQueue:Ye,$$AnimateRunner:Qe,$$animateAsyncRun:Ze,$browser:tn,$cacheFactory:en,$controller:mn,$document:gn,$exceptionHandler:vn,$filter:mi,$$forceReflow:bn,$interpolate:Fn,$interval:Un,$http:Rn,$httpParamSerializer:Cn,$httpParamSerializerJQLike:En,$httpBackend:In,$xhrFactory:jn,$jsonpCallbacks:Ln,$location:ir,$log:or,$parse:zr,$rootScope:Zr,$q:Gr,$$q:Wr,$sce:ni,$sceDelegate:ei,$sniffer:ri,$templateCache:nn,$templateRequest:oi,$$testability:ai,$timeout:si,$window:pi,$$rAF:Kr,$$jqLite:Ae,$$HashMap:Oe,$$cookieReader:hi})}])}(v),v.module("ngLocale",[],["$provide",function(t){t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\xa4",negSuf:"",posPre:"\xa4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,e){var n=0|t,r=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var r=Math.pow(10,n);return{v:n,f:(t*r|0)%r}}(t,e);return 1==n&&0==r.v?"one":"other"}})}]),l(t.document).ready(function(){!function(e,n){var r,i,o={};if(w(wt,function(t){var n=t+"app";!r&&e.hasAttribute&&e.hasAttribute(n)&&(r=e,i=e.getAttribute(n))}),w(wt,function(t){var n,o=t+"app";!r&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(o))}),r){if(!kt)return void t.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==function(t,e){var n,r,i=wt.length;for(r=0;r<i;++r)if(U(n=t.getAttribute(n=wt[r]+"strict-di")))return n;return null}(r),n(r,i?[i]:[],o)}}(t.document,_t)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},IcB5:function(t,e){},IcVH:function(t,e){angular.module("doubtfire.tasks.task-ilo-alignment.task-ilo-alignment-viewer",[]).directive("taskIloAlignmentViewer",function(){return{restrict:"E",replace:!0,templateUrl:"tasks/task-ilo-alignment/task-ilo-alignment-viewer/task-ilo-alignment-viewer.tpl.html",scope:{currentProgress:"=?",classStats:"=?",project:"=?",task:"=?",unit:"=",alignments:"=?",summaryOnly:"=?",hideVisualisation:"=?"},controller:function(t,e,n,r){if(t.hideVisualisation=null!=t.hideVisualisation&&t.hideVisualisation,t.targets=n.calculateTargets(t.unit,t.unit,n.unitTaskStatusFactor()),t.toggleExpanded=function(t){return t.expanded=!t.expanded,t.expanded?(r.event("Student Project View","Showed ILO Details"),e.refreshAll()):r.event("Student Project View","Hid ILO Details")},null==t.alignments&&(t.alignments=t.unit.ilos),null!=t.project&&null!=t.task)return t.classStats=n.calculateTaskPotentialContribution(t.unit,t.project,t.task),t.currentProgress=n.calculateTaskContribution(t.unit,t.project,t.task)}}})},IfsA:function(t,e){angular.module("doubtfire.common.services.outcome-service",[]).factory("outcomeService",function(t,e,n){var r;return(r={}).unitTaskStatusFactor=function(){return function(t){return 1}},r.projectTaskStatusFactor=function(t){return function(r){var i;return null!=(i=e.taskFromTaskDefId(t,r))?n.learningWeight[i.status]:0}},r.alignmentLabels=["The task is not related to this outcome at all","The task is slightly related to this outcome","The task is related to this outcome","The task is a reasonable example for this outcome","The task is a strong example of this outcome","The task is the best example of this outcome"],r.individualTaskStatusFactor=function(t,r){return function(i){return r.definition.id===i?n.learningWeight[e.taskFromTaskDefId(t,i).status]:0}},r.individualTaskPotentialFactor=function(t,e){return function(t){return e.definition.id===t?1:0}},r.calculateTargets=function(t,e,n){var r;return r={},_.each(t.ilos,function(t){return r[t.id]={0:[],1:[],2:[],3:[]}}),_.each(e.task_outcome_alignments,function(e){var i;return i=t.taskDef(e.task_definition_id),r[e.learning_outcome_id][i.target_grade].push(e.rating*n(i.id))}),_.each(r,function(t,e){return _.each(t,function(e,n){var r;return r=Math.pow(2,parseInt(n,10)),t[n]=_.reduce(e,function(t,e){return t+e},0)*r})}),r},r.calculateTaskContribution=function(t,e,n){var i;return(i=[])[0]=r.calculateTargets(t,t,r.individualTaskStatusFactor(e,n)),_.each(i[0],function(t,e){return i[0][e]=_.reduce(t,function(t,e){return t+e},0)}),i[0].title="Current Task Contribution",i},r.calculateTaskPotentialContribution=function(t,e,n){var i;return i=r.calculateTargets(t,t,r.individualTaskPotentialFactor(e,n)),_.each(i,function(t,e){return i[e]=_.reduce(t,function(t,e){return t+e},0)}),i.title="Potential Task Contribution",i},r.calculateProgress=function(t,e){var n;return(n=[])[0]=r.calculateTargets(t,t,r.projectTaskStatusFactor(e)),_.each(n,function(t,e){return _.each(t,function(e,n){return t[n]=_.reduce(e,function(t,e){return t+e},0)})}),n[0].title="Your Progress",n},r.targetsByGrade=function(e,n){var i,o,a;return o=[],i=r.calculateTargets(e,n,r.unitTaskStatusFactor()),a={0:[],1:[],2:[],3:[]},_.each(i,function(t,n){return _.each(t,function(t,r){return a[r].push({label:e.outcome(parseInt(n,10)).abbreviation,value:t})})}),_.each(a,function(e,n){return o.push({key:t.grades[n],values:e})}),o},r})},JJQ8:function(t,e){angular.module("doubtfire.common.services.units",[]).factory("unitService",function(t,e,n,r,i,o,a,s,l,u,c,d,p,f,h,m){var g,v;return(v={}).loadedUnits={},v.loadedUnitRoles=null,g=function(t){return null==t.teachingPeriod&&(t._teachingPeriod=null,t.teachingPeriod=function(){return null!=t.teaching_period_id&&null==t._teachingPeriod&&(t._teachingPeriod=m.getTeachingPeriod(t.teaching_period_id)),t._teachingPeriod}),t},u.$on("signOut",function(){return v.loadedUnits={},v.loadedUnitRoles=null}),v.getUnitRoles=function(t){var n;return n=function(){if(_.isFunction(t))return t(v.loadedUnitRoles)},null==v.loadedUnitRoles?e.query(function(t){return v.loadedUnitRoles=_.map(t,function(t){return g(t)}),n()}):n()},v.getUnit=function(e,r,s,u){var d,f;if(_.isFunction(r)&&(s=r,_.isFunction(s)&&(u=s),r={loadAllStudents:!1,loadOnlyEnrolledStudents:!1}),d=v.loadedUnits[e])return"function"==typeof s?s(d):void 0;if(r.loadAllStudents&&r.loadOnlyEnrolledStudents)throw Error("Load all and only enrolled cannot both be true");return(f={analytics:{}}).refresh=function(n,i){return t.get({id:e},function(t){return _.extend(f,t),f.tutorials=_.map(f.tutorials,function(t){return t.description=v.tutorialDescription(t),t}),f.task_definitions=_.map(f.task_definitions,function(t,e,n){return t.seq=e,t.group_set_id&&(t.group_set=_.find(f.group_sets,{id:t.group_set_id})),t.hasPlagiarismCheck=function(){return t.plagiarism_checks.length>0},t.targetGrade=function(){return a.grades[t.target_grade]},t.localTargetDate=function(){var e;return e=new Date(t.target_date),new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59)},t.localDueDate=function(){var e;return e=new Date(t.due_date),new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59)},t}),(null!=r?r.loadOnlyEnrolledStudents:void 0)||(null!=r?r.loadAllStudents:void 0)?f.refreshStudents(n,i):"function"==typeof n?n(f):void 0},function(t){var e;return p.add("danger","Failed to load unit. "+(null!=t&&null!=(e=t.data)?e.error:void 0),8e3),"function"==typeof i?i(t):void 0})},f.taskDef=function(t){var e;if(!_.isObject(t)&&!_.isNumber(t))throw Error("Task def must be a number or task definition object");return e=_.isObject(t)?t.task_definition_id:t,_.find(f.task_definitions,{id:e})},f.outcome=function(t){return _.find(f.ilos,{id:t})},f.tutorialFromId=function(t){return _.find(f.tutorials,{id:+t})},f.taskCount=function(){return f.task_definitions.length},f.tutorialsForUserName=function(t){return _.filter(f.tutorials,function(e){return e.tutor_name===t})},f.refreshStudents=function(t,e){var i;return i=function(e){return f.students=_.map(e,function(t){return v.mapStudentToUnit(f,t)}),"function"==typeof t?t(f):void 0},n.query({unit_id:f.id,all:!(null!=r?r.loadOnlyEnrolledStudents:void 0)||(null!=r?r.loadAllStudents:void 0)},i,function(t){var n;return p.add("danger","Failed to load students. "+(null!=t&&null!=(n=t.data)?n.error:void 0),8e3),"function"==typeof e?e(t):void 0})},f.studentEnrolled=function(t){var e;return null!=(e=f.findStudent(t))?e.enrolled:void 0},f.findStudent=function(t){if(null==f.students)throw Error("Students not yet mapped to unit (unit.students is undefined)");return _.find(f.students,{project_id:t})},f.addStudent=function(t){var e;return c.event("Unit Service","Added Student"),null!=(e=f.findStudent(t.project_id))?t=_.extend(e,t):f.students.push(t),v.mapStudentToUnit(f,t)},f.activeStudents=function(){return _.filter(f.students,{enrolled:!0})},f.mapStudentToUnit=function(t){return v.mapStudentToUnit(f,t)},f.findGroupSet=function(t){return _.find(f.group_sets,{id:+t})},f.mapGroupToUnit=function(t){return v.mapGroupToUnit(f,t)},f.refreshGroups=function(){var e;if((null!=(e=f.groups)?e.length:void 0)>0)return t.groups.query({id:f.id},function(t){return f.groups=t},function(t){var e;return p.add("danger","Error refreshing unit groups: "+((null!=(e=t.data)?e.error:void 0)||"Unknown cause"),6e3)})},f.getGroups=function(t,e,n){return o.getGroups(f,t,e,n)},f.addGroup=function(t,e,n,r,i){return o.addGroup(f,t,e,n,r,i)},f.updateGroup=function(t,e,n){if(t.unit().id!==f.id)throw Error("Cannot update group -- "+t.id+" does not exist under unit "+f.id);return o.updateGroup(t,e,n)},f.deleteGroup=function(t,e,n,r){if(t.unit().id!==f.id)throw Error("Cannot delete group -- "+t.id+" does not exist under unit "+f.id);return o.deleteGroup(f,t,e,n,r)},f.hasGroupwork=function(){var t;return(null!=(t=f.group_sets)?t.length:void 0)>0},f.incorporateTasks=function(t,e){return _.map(t,function(t){var n;if(null!=(n=f.findStudent(t.project_id)))return null==n.incorporateTask&&(i.mapTask(t,f,n),i.addProjectMethods(n,f)),n.incorporateTask(t,e)})},f.fillWithUnStartedTasks=function(t,e){if(null!=f.students)return e=f.taskDef(e),_.map(f.students,function(n){var r;return null==(r=_.find(t,function(t){return t.project_id===n.project_id&&t.task_definition_id===e.id}))&&(r=_.find(n.tasks,function(t){return t.task_definition_id===e.id})),r.isGroupTask()&&null==r.group()&&i.updateGroups(r.project(),null,!0),r})},f.staffAlignmentsForTaskDefinition=function(t){var e;if(null!=t)return e=l("taskDefinitionFilter")(f.task_outcome_alignments,t.id),_.chain(e).map(function(t){return t.ilo=f.outcome(t.learning_outcome_id),t}).sortBy(function(t){return t.ilo.ilo_number}).value()},f.refresh(s,u),f},v.unitTypeAheadData=function(t){var e;return e=[],angular.forEach(t.tutorials,function(t){return e.push(t.abbreviation),e.push(t.tutor_name)}),angular.forEach(t.students,function(t){return e.push(t.name),e.push(t.student_id)}),e=_.uniq(e,function(t){return t})},v.tutorialDescription=function(t){var e;return null!=t?(e=l("date")(t.meeting_time,"shortTime"),t.meeting_day.slice(0,3)+" at "+e+" by "+t.tutor_name+" in "+t.meeting_location):"No Tutorial"},v.mapGroupToUnit=function(t,e){return e.tutorial=function(){return t.tutorialFromId(e.tutorial_id)},e.unit=function(){return t},e},v.mapStudentToUnit=function(t,e){return null!=e.name?e:(e.findTaskForDefinition=function(t){return _.find(e.tasks,{task_definition_id:t})},e.unit=function(){return t},e.tutorialDescription=function(){return v.tutorialDescription(e.tutorial)},e.shortTutorialDescription=function(){var t;return null!=e.tutorial?(t=l("date")(e.tutorial.meeting_time,"shortTime"),e.tutorial.meeting_day.slice(0,3)+" "+t+" - "+e.tutorial.tutor_name.split(" ")[0]+" - "+e.tutorial.meeting_location):"No Tutorial"},e.switchToTutorial=function(t){var n;return n=null!=t?_.isString(t)||_.isNumber(t)?+t:null!=t?t.id:void 0:-1,c.event("Teacher View - Students Tab","Changed Student Tutorial"),f.update({id:e.project_id,tutorial_id:n},function(t){return p.add("success","Tutorial updated for "+e.name,3e3),e.tutorial_id=t.tutorial_id,e.tutorial=e.unit().tutorialFromId(e.tutorial_id)},function(t){var e;return p.add("danger","Failed to change tutorial. "+(null!=t&&null!=(e=t.data)?e.error:void 0),8e3)})},e.name=e.first_name+" "+e.last_name,e.portfolio_status=e.has_portfolio?1:e.compile_portfolio?.5:0,e.activeTasks=function(){return _.filter(e.tasks,function(t){return t.definition.target_grade<=e.target_grade})},e.tutorial=t.tutorialFromId(e.tutorial_id),e.tutorName=function(){var t;return(null!=(t=e.tutorial)?t.tutor_name:void 0)||"N/A"},e.task_stats=[{value:0,key:s.statusKeys[10]},{value:0,key:s.statusKeys[0]},{value:0,key:s.statusKeys[4]},{value:0,key:s.statusKeys[6]},{value:0,key:s.statusKeys[9]}],e.viewProject=function(t){return h.go("projects/dashboard",{projectId:e.project_id,tutor:t,taskAbbr:""})},e.portfolioUrl=function(){return d.getPortfolioUrl(e)},e.portfolioUrlAsAttachment=function(){return d.getPortfolioUrl(e,!0)},e.assignGrade=function(t,n){return f.update({id:e.project_id,grade:t,old_grade:e.grade,grade_rationale:n},function(t){return e.grade=t.grade,e.grade_rationale=t.grade_rationale,p.add("success","Grade updated.",2e3)},function(t){return p.add("danger","Grade was not updated: "+t.data.error,8e3)})},i.addProjectMethods(e),null!=e.stats&&e.updateTaskStats(e.stats),i.addTaskDetailsToProject(e,t),e)},v})},JZL2:function(t,e){angular.module("doubtfire.units.states.tasks.viewer.directives.task-sheet-view",[]).directive("taskSheetView",function(){return{restrict:"E",templateUrl:"units/states/tasks/viewer/directives/task-sheet-view/task-sheet-view.tpl.html",scope:{taskDef:"=",unit:"="},controller:function(t,e,n,r,i,o,a,s){var l;return l=o.listenTo(t),t.clearSelectedTask=function(){return t.taskDef=null},t.urls={taskPdfUrl:""},l.push(t.$watch("taskDef",function(e){return function(){if(null!=e)return t.hasPdf=e.has_task_sheet,t.urls.taskPdfUrl=a.getTaskPDFUrl(t.unit,t.taskDef)}()}))}}})},KGOA:function(t,e){angular.module("doubtfire.common.file-uploader",[]).directive("fileUploader",function(){return{restrict:"E",replace:!0,templateUrl:"common/file-uploader/file-uploader.tpl.html",scope:{files:"=",url:"=",method:"@",payload:"=?",onBeforeUpload:"=?",onSuccess:"=?",onFailure:"=?",onComplete:"=?",isUploading:"=?",isReady:"=?",showName:"=?",asButton:"=?",filesSelected:"=?",singleDropZone:"=?",showUploadButton:"=?",initiateUpload:"=?",onClickFailureCancel:"=?",resetAfterUpload:"=?"},controller:function(t,e){var n,r,i,o,a;if(n={document:{extensions:["pdf","ps"],icon:"fa-file-pdf-o",name:"PDF"},csv:{extensions:["csv","xls","xlsx"],icon:"fa-file-excel-o",name:"CSV"},code:{extensions:["pas","cpp","c","cs","h","java","py","js","html","coffee","rb","css","scss","yaml","yml","xml","json","ts","vb","sql","txt"],icon:"fa-file-code-o",name:"code"},image:{extensions:["png","bmp","tiff","tif","jpeg","jpg","gif"],name:"image",icon:"fa-file-image-o"},zip:{extensions:["zip","tar.gz","tar"],name:"archive",icon:"fa-file-zip-o"}},0===(null!=(o=t.files)?o.length:void 0))throw Error("No files provided to uploader");return t.clearEnqueuedUpload=function(t){return t.model=null,a()},null==t.showName&&(t.showName=!0),null==t.singleDropZone&&(t.singleDropZone=!1),null==t.asButton&&(t.asButton=!1),t.showUploader=!t.asButton,null==t.showUploadButton&&(t.showUploadButton=!0),null==t.resetAfterUpload&&(t.resetAfterUpload=!0),r=function(t){var n;return(null!=(n=t.rejects)?n.length:void 0)>0&&(t.display.error=!0,t.rejects=null,e(function(){return t.display.error=!1},4e3),!0)},t.modelChanged=function(e,n){if(e.length>0||n.rejects.length>0)return!r(n)&&(t.filesSelected=_.flatten(_.map(t.uploadZones,"model")),t.singleDropZone)?(t.selectedFiles=t.uploadZones,a()):void 0},a=function(){var e;if(t.singleDropZone)return e=_.find(t.uploadZones,function(t){return null==t.model||0===t.model.length}),t.shownUploadZones=null!=e?[e]:[]},t.dropSupported=!0,(i=function(e){var r;return r=_.map(e,function(t,e){var r,i;if(null==(i=n[r=t.type]))throw Error("Invalid type provided to File Uploader "+r);return{name:e,model:null,accept:"'."+i.extensions.join(",.")+"'",rejects:null,display:{name:t.name,icon:i.icon,type:i.name,error:!1}}}),t.shownUploadZones=t.singleDropZone?[_.first(r)]:r,t.uploadZones=r})(t.files),t.$watch("files",function(t,e){return i(t)}),t.readyToUpload=function(){return t.isReady=_.compact(_.flatten(function(){var e,n,r,i;for(i=[],e=0,n=(r=t.uploadZones).length;e<n;e++)i.push(r[e].model);return i}())).length===_.keys(t.files).length},t.resetUploader=function(){var e,n,r,i;for(t.uploadingInfo=null,t.isUploading=!1,t.showUploader=!t.asButton,i=[],e=0,n=(r=t.uploadZones).length;e<n;e++)i.push(t.clearEnqueuedUpload(r[e]));return i},t.resetUploader(),null==t.onClickFailureCancel&&(t.onClickFailureCancel=t.resetUploader),t.initiateUpload=function(){var n,r,i,o,a,s,l,u,c,d,p,f;if(t.readyToUpload()){for("function"==typeof t.onBeforeUpload&&t.onBeforeUpload(),p=new XMLHttpRequest,i=new FormData,r=function(){var e,n,r,i;for(i=[],e=0,n=(r=t.uploadZones).length;e<n;e++)i.push({name:(f=r[e]).name,data:f.model[0]});return i}(),o=0,l=r.length;o<l;o++)i.append((n=r[o]).name,n.data);for(a=0,u=(c=function(){var e,n;for(s in n=[],e=t.payload)n.push({key:s,value:e[s]});return n}()).length;a<u;a++)d=c[a],_.isObject(d.value)&&(d.value=JSON.stringify(d.value)),i.append(d.key,d.value);return t.uploadingInfo={progress:5,success:null,error:null,complete:!1},t.isUploading=!0,p.onreadystatechange=function(){if(4===p.readyState)return e(function(){var n;t.uploadingInfo.complete=!0,n=null;try{n=JSON.parse(p.responseText)}catch(r){n=p.responseText}return p.status>=200&&p.status<300?("function"==typeof t.onSuccess&&t.onSuccess(n),t.uploadingInfo.success=!0,e(function(){if("function"==typeof t.onComplete&&t.onComplete(),t.resetAfterUpload)return t.resetUploader()},2500)):("function"==typeof t.onFailure&&t.onFailure(n),0===p.status&&(n.error="Could not connect to the Doubtfire server"),t.uploadingInfo.success=!1,t.uploadingInfo.error=n.error||"Unknown error"),t.$apply()},2e3)},p.upload.onprogress=function(e){return t.uploadingInfo.progress=parseInt(100*e.position/e.totalSize),t.$apply()},null==t.method&&(t.method="POST"),p.open(t.method,t.url,!0),p.send(i)}}}}})},KHwQ:function(t,e,n){n("IbG+"),t.exports=angular},LjWJ:function(t,e){angular.module("doubtfire.units.states.analytics",["doubtfire.units.states.analytics.directives"]).config(function(t){return t.state("units/analytics",{parent:"units/index",url:"/analytics",templateUrl:"units/states/analytics/analytics.tpl.html",controller:"UnitAnalyticsStateCtrl",data:{task:"Unit Analytics",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin"]}})}).controller("UnitAnalyticsStateCtrl",function(t){return t.tabs={csvStatDownload:{title:"Unit Statistics",subtitle:"Download details related to student progress within the unit.",seq:0},taskStatusStats:{title:"Task Status Statistics",subtitle:"View distribution of tasks by their current status either unit-wide or broken down into a specific tutorial or task",seq:1},taskCompletionStats:{title:"Task Completion Statistics",subtitle:"View how tasks have been marked as completed as a box plot",seq:2},targetGradeStats:{title:"Target Grade Statistics",subtitle:"View distribution of student target grades either unit-wide or broken down into a specific tutorial",seq:3},achievementStats:{title:"ILO Achievement Statistics",subtitle:"View how ILOs have been achieved by students to their associated tasks as a box plot",seq:4},taskSummaryStats:{title:"Task Statistics",subtitle:"Click a lab code's circle in the legend to remove the lab from the graph. Double click the lab code's circle to make this lab the only visible lab in the graph",seq:5}},t.setActiveTab=function(e){var n;if(e!==t.activeTab)return null!=(n=t.activeTab)&&(n.active=!1),t.activeTab=e,t.activeTab.active=!0},t.setActiveTab(t.tabs.csvStatDownload),t.isActiveTab=function(e){return e===t.activeTab}})},LkIK:function(t,e){!function(t,e){"use strict";var n,r,i,o,a,s,l,u,c=e.$$minErr("$sanitize");e.module("ngSanitize",[]).provider("$sanitize",function(){var d=!1;this.$get=["$$sanitizeUri",function(t){return d&&r(x,k),function(e){var n=[];return l(e,u(n,function(e,n){return!/^unsafe:/.test(t(e,n))})),n.join("")}}],this.enableSvg=function(t){return o(t)?(d=t,this):d},n=e.bind,r=e.extend,i=e.forEach,o=e.isDefined,a=e.lowercase,s=e.noop,l=function(e,n){null==e?e="":"string"!=typeof e&&(e=""+e),p.innerHTML=e;var r=5;do{if(0===r)throw c("uinput","Failed to sanitize html because the input is unstable");r--,t.document.documentMode&&P(p),p.innerHTML=e=p.innerHTML}while(e!==p.innerHTML);for(var i=p.firstChild;i;){switch(i.nodeType){case 1:n.start(i.nodeName.toLowerCase(),A(i.attributes));break;case 3:n.chars(i.textContent)}var o;if(!((o=i.firstChild)||(1===i.nodeType&&n.end(i.nodeName.toLowerCase()),o=i.nextSibling)))for(;null==o&&(i=i.parentNode)!==p;)o=i.nextSibling,1===i.nodeType&&n.end(i.nodeName.toLowerCase());i=o}for(;i=p.firstChild;)p.removeChild(i)},u=function(t,e){var r=!1,o=n(t,t.push);return{start:function(t,n){t=a(t),!r&&_[t]&&(r=t),r||!0!==x[t]||(o("<"),o(t),i(n,function(n,r){var i=a(r);!0!==C[i]||!0===S[i]&&!e(n,"img"===t&&"src"===i||"background"===i)||(o(" "),o(r),o('="'),o(D(n)),o('"'))}),o(">"))},end:function(t){t=a(t),r||!0!==x[t]||!0===m[t]||(o("</"),o(t),o(">")),t==r&&(r=!1)},chars:function(t){r||o(D(t))}}};var p,f=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=/([^#-~ |!])/g,m=E("area,br,col,hr,img,wbr"),g=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),v=E("rp,rt"),b=r({},v,g),y=r({},g,E("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),w=r({},v,E("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),k=E("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),_=E("script,style"),x=r({},m,y,w,b),S=E("background,cite,href,longdesc,src,xlink:href"),$=E("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),T=E("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),C=r({},S,T,$);function E(t,e){var n,r={},i=t.split(",");for(n=0;n<i.length;n++)r[e?a(i[n]):i[n]]=!0;return r}function A(t){for(var e={},n=0,r=t.length;n<r;n++){var i=t[n];e[i.name]=i.value}return e}function D(t){return t.replace(/&/g,"&amp;").replace(f,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(h,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function P(e){for(;e;){if(e.nodeType===t.Node.ELEMENT_NODE)for(var n=e.attributes,r=0,i=n.length;r<i;r++){var o=n[r],a=o.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(e.removeAttributeNode(o),r--,i--)}var s=e.firstChild;s&&P(s),e=e.nextSibling}}!function(t){var e;if(!t.document||!t.document.implementation)throw c("noinert","Can't create an inert html document");var n=((e=t.document.implementation.createHTMLDocument("inert")).documentElement||e.getDocumentElement()).getElementsByTagName("body");if(1===n.length)p=n[0];else{var r=e.createElement("html");p=e.createElement("body"),r.appendChild(p),e.appendChild(r)}}(t)}),e.module("ngSanitize").filter("linky",["$sanitize",function(t){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,r=/^mailto:/i,i=e.$$minErr("linky"),o=e.isDefined,a=e.isFunction,l=e.isObject,c=e.isString;return function(e,d,p){if(null==e||""===e)return e;if(!c(e))throw i("notstring","Expected string but received: {0}",e);for(var f,h,m,g=a(p)?p:l(p)?function(){return p}:function(){return{}},v=e,b=[];f=v.match(n);)h=f[0],f[2]||f[4]||(h=(f[3]?"http://":"mailto:")+h),y(v.substr(0,m=f.index)),w(h,f[0].replace(r,"")),v=v.substring(m+f[0].length);return y(v),t(b.join(""));function y(t){var e,n;t&&b.push((e=t,u(n=[],s).chars(e),n.join("")))}function w(t,e){var n,r=g(t);for(n in b.push("<a "),r)b.push(n+'="'+r[n]+'" ');!o(d)||"target"in r||b.push('target="',d,'" '),b.push('href="',t.replace(/"/g,"&quot;"),'">'),y(e),b.push("</a>")}}}])}(window,window.angular)},M0d3:function(t,e){angular.module("doubtfire.api.models.task",[]).factory("Task",function(t,e,n,r){var i;return(i=t("/projects/:project_id/task_def_id/:task_definition_id",{project_id:"@project_id",task_definition_id:"@task_definition_id"})).SubmissionDetails=t("/projects/:id/task_def_id/:task_definition_id/submission_details"),i.summaryData=t("/tasks/:id",{id:"@id"}),i.applyForExtension=function(t,n,i){return r.post(e.API_URL+"/projects/"+t.project().project_id+"/task_def_id/"+t.task_definition_id+"/extension",{}).then(function(t){return n(t)},function(t){return i(t)})},i.generateCommentsUrl=function(t){return e.API_URL+"/projects/"+t.project().project_id+"/task_def_id/"+t.task_definition_id+"/comments?auth_token="+n.authenticationToken},i.generateCommentsAttachmentUrl=function(t,r,i){return e.API_URL+"/projects/"+t.project_id+"/task_def_id/"+r.task_definition_id+"/comments/"+i.id+"?as_attachment=false&auth_token="+n.authenticationToken},i.generateSubmissionUrl=function(t,r){return e.API_URL+"/projects/"+t.project_id+"/task_def_id/"+r.definition.id+"/submission?auth_token="+n.authenticationToken},i.getTaskPDFUrl=function(t,r){return e.API_URL+"/units/"+t.id+"/task_definitions/"+r.id+"/task_pdf.json?auth_token="+n.authenticationToken},i.getTaskResourcesUrl=function(t,r){return e.API_URL+"/units/"+t.id+"/task_definitions/"+r.id+"/task_resources.json?auth_token="+n.authenticationToken},i.getTaskDefinitionBatchUploadUrl=function(t){return e.API_URL+"/csv/task_definitions?auth_token="+n.authenticationToken+"&unit_id="+t.id},i.getTaskMarkingUrl=function(t){return e.API_URL+"/submission/assess.json?unit_id="+t.id+"&auth_token="+n.authenticationToken},i.generateMarkingSubmissionUrl=function(){},i})},"MOf/":function(t,e){angular.module("doubtfire.units.states",["doubtfire.units.states.all","doubtfire.units.states.index","doubtfire.units.states.edit","doubtfire.units.states.tasks","doubtfire.units.states.groups","doubtfire.units.states.students","doubtfire.units.states.plagiarism","doubtfire.units.states.analytics","doubtfire.units.states.portfolios","doubtfire.units.states.rollover"])},MWfS:function(t,e){angular.module("doubtfire.units.states.analytics.directives.unit-stats-download",[]).directive("unitStatsDownload",function(){return{replace:!0,restrict:"E",templateUrl:"units/states/analytics/directives/unit-stats-download/unit-stats-download.tpl.html",scope:{unit:"="},controller:function(t,e,n){return t.fetchTaskCompletionStats=function(){return e.downloadFile(t.unit)},t.fetchTutorAssessmentStats=function(){return n.downloadFile(t.unit)}}}})},N0f2:function(t,e){angular.module("doubtfire.projects.states",["doubtfire.projects.states.index","doubtfire.projects.states.all","doubtfire.projects.states.dashboard","doubtfire.projects.states.tutorials","doubtfire.projects.states.portfolio","doubtfire.projects.states.groups","doubtfire.projects.states.outcomes"])},NU9F:function(t,e){angular.module("doubtfire.tasks.task-plagiarism-report-viewer",[]).directive("taskPlagiarismReportViewer",function(){return{replace:!0,restrict:"E",templateUrl:"tasks/task-plagiarism-report-viewer/task-plagiarism-report-viewer.tpl.html",scope:{task:"=",assessingUnitRole:"="},controller:function(t,e,n,r){var i;if(t.match=1,t.similarityData=null,t.externalName=r.ExternalName,t.assessingUnitRole&&t.$watch("similarityData",function(e){var n,r,i;if(null!=e)return n=t.similarityData.student.email,r=t.similarityData.other_student.email,i=encodeURIComponent("Plagiarism Report for "+t.task.definition.abbreviation),t.mailtoString="mailto:?BCC="+n+","+r+"&Subject="+i,t.canViewOther=null!=e.other_student.name}),t.$watch("task",function(){return t.fetchSimilarity()}),t.$watch("match",function(){return t.fetchSimilarity()}),t.noPlagiarismDetected=function(){return!t.task.plagiarismDetected()||null===t.similarityData},t.fetchSimilarity=function(){var e;if((null!=(e=t.task)?e.similar_to_count:void 0)>0)return n.get(t.task,t.match,function(e){return t.similarityData=e})},(null!=(i=t.task)?i.similar_to_count:void 0)>0)return t.taskId=t.task.id,t.fetchSimilarity(t.task,t.match-1)}}})},Nfv9:function(t,e){angular.module("doubtfire.units.states.analytics.directives.task-summary-stats",[]).directive("taskSummaryStats",function(){return{replace:!0,restrict:"E",templateUrl:"units/states/analytics/directives/task-summary-stats/task-summary-stats.tpl.html",scope:{unit:"=unit"},controller:function(t,e,n,r){var i,o,a,s;return t.statusClass=r.statusClass,t.statusText=r.statusText,t.headerRow=r.allStatusData(),t.scatterData=[],s=_.map(t.unit.task_definitions,function(t){return t.id}),i=function(t){return _.indexOf(s,t)},o=function(e){return _.indexOf(t.unit.tutorials,_.find(t.unit.tutorials,function(t){return t.id===e}))},angular.forEach(t.unit.tutorials,function(t){return{key:t.abbreviation}}),a=0,t.countClass=function(t){return 0===a?"":t/a>.5?"warning":t/a>.25?"info":""},t.fetchStats=function(){var e,s;if(0!==(a=t.unit.students.length))return e=[],s=function(t,n,a){var s,l,u;return u=o(a),l=i(t),s=r.indexOf(n),e[u][s][l]+=1,e[u][0][l]-=1},angular.forEach(t.unit.tutorials,function(n){var i;return i=[],angular.forEach(r.statusKeys,function(e){var o;return o=[],angular.forEach(t.unit.task_definitions,function(t){return o.push(e===r.statusKeys[0]?n.num_students:0)}),i.push(o)}),e.push(i)}),n.summaryData.query({unit_id:t.unit.id},function(n){var r;return angular.forEach(n,function(t){return s(t.task_definition_id,t.status,t.tutorial_id)}),_.each(e,function(t,n){return _.each(t,function(t,r){return _.each(t,function(t,i){return e[n][r][i]/=a})})}),r=[],_.each(t.unit.tutorials,function(n,i){var o;return o={key:n.abbreviation,values:[]},_.each(e[i],function(e,n){return _.each(e,function(e,r){if(e>0)return o.values.push({x:n+i/(2*t.unit.tutorials.length),y:r,size:e})})}),r.push(o)}),t.scatterData=r})},t.fetchStats()}}})},"Or+b":function(t,e){angular.module("doubtfire.admin.states.units",[]).config(function(t){return t.state("admin/units",{url:"/admin/units",views:{main:{controller:"AdministerUnitsState",templateUrl:"admin/states/units/units.tpl.html"}},data:{pageTitle:"_Unit Administration_",roleWhitelist:["Admin","Convenor"]}})}).controller("AdministerUnitsState",function(t,e,n,r,i,o,a,s,l,u,c){return c.event("Unit Admin","Listed Units to Manage"),l.getUnitRoles(function(e){return i.query({include_in_active:!0},function(n){return t.units=_.map(n,function(t){return t.unitRole=_.find(e,{unit_id:t.id}),t.teaching_period_id&&(t.teachingPeriod=o.getTeachingPeriod(t.teaching_period_id)),t})},function(e){return t.error=!0})}),t.sortOrder="start_date",t.reverse=!0,t.currentPage=1,t.maxSize=5,t.pageSize=15,t.externalName=r.ExternalName,t.createUnit=function(){return a.show(t.units)}})},OsdL:function(t,e){angular.module("doubtfire.units",["doubtfire.units.modals","doubtfire.units.states"])},Osgm:function(t,e){angular.module("doubtfire.common.services.media-service",[]).factory("mediaService",function(t,e,n){var r;return(r={}).audioCtx=null!=r.audioCtx||new(window.AudioContext||webkitAudioContext),r.getMimeType=function(){var t;return t="audio/webm",MediaRecorder.isTypeSupported(t)||(console.log(t+" is not Supported"),navigator.userAgent.toLowerCase().indexOf("firefox")>-1?(console.log("Using Firefox"),t="audio/ogg"):t=""),t},r})},OwQH:function(t,e){angular.module("doubtfire.config.analytics",[]).config(function(t){return t.virtualPageviews(!1)})},PHqG:function(t,e){angular.module("doubtfire.common.modals",["doubtfire.common.modals.csv-result-modal","doubtfire.common.modals.progress-modal","doubtfire.common.modals.confirmation-modal","doubtfire.common.modals.comments-modal"])},PfrU:function(t,e){angular.module("doubtfire.api.models.students",[]).factory("Students",function(t){return t("/students")})},Q1Io:function(t,e){angular.module("doubtfire.projects",["doubtfire.projects.states","doubtfire.projects.project-lab-list","doubtfire.projects.project-outcome-alignment","doubtfire.projects.project-progress-dashboard"])},Q4rK:function(t,e){angular.module("doubtfire.tasks.modals.upload-submission-modal",[]).factory("UploadSubmissionModal",function(t,e){var n;return(n={}).show=function(n,r){return n.isGroupTask()&&!n.studentInAGroup()?(e.add("danger","This is a group assignment. Join a "+n.definition.group_set.name+" group set to submit this task.",8e3),null):t.open({templateUrl:"tasks/modals/upload-submission-modal/upload-submission-modal.tpl.html",controller:"UploadSubmissionModalCtrl",size:"lg",keyboard:!1,backdrop:"static",resolve:{task:function(){return n},reuploadEvidence:function(){return r}}})},n}).controller("UploadSubmissionModalCtrl",function(t,e,n,r,i,o,a,s,l,u,c,d,p){var f,h,m,g,v,b;return t.privacyPolicy=p,t.task=a,b=_.chain(o.submittableStatuses).map(function(t){return[t,o.statusLabels[t]]}).fromPairs().value(),t.task.canReuploadEvidence()&&(b.reupload_evidence="New Evidence"),t.submissionTypes=b,t.submissionType=s?"reupload_evidence":t.task.status,t.uploader={url:i.generateSubmissionUrl(t.task.project(),t.task),files:_.chain(a.definition.upload_requirements).map(function(t){return[t.key,{name:t.name,type:t.type}]}).fromPairs().value(),payload:{},isUploading:null,isReady:null,start:null,onBeforeUpload:function(){if(_.includes(v.shown,"group")&&(t.uploader.payload.contributions=m()),_.includes(v.shown,"alignment")&&(t.uploader.payload.alignment_data=h()),"need_help"===t.submissionType)return t.uploader.payload.trigger="need_help"},onSuccess:function(e){return t.uploader.response=e},onFailureCancel:r.dismiss,onComplete:function(){return r.close(a),t.comment.trim().length>0&&a.addComment(t.comment),e.$broadcast("TaskSubmissionUploadComplete",a),n(function(){var e;return e=t.uploader.response,o.processTaskStatusChange(a.unit(),a.project(),a,e.status,e)},1500)}},(v={all:["group","files","alignment","comments","uploading"],shown:[],active:null,activeIdx:function(){return v.shown.indexOf(v.active)},setActive:function(t){return v.active=t},next:function(){return v.setActive(v.shown[v.activeIdx()+1])},previous:function(){return v.setActive(v.shown[v.activeIdx()-1])},isHidden:function(t){return{left:v.shown.indexOf(t)<v.activeIdx(),right:v.shown.indexOf(t)>v.activeIdx()}},removed:function(){var e,n;return n=[],(e="ready_to_mark"===t.submissionType)&&a.isGroupTask()||n.push("group"),(!e||!a.unit().ilos.length>0)&&n.push("alignment"),n},initialise:function(){return v.shown=_.difference(v.all,v.removed()),v.setActive(_.first(v.shown))}}).initialise(),t.onSelectNewSubmissionType=function(e){return"reupload_evidence"!==e&&(t.task.status=e),t.submissionType=e,v.initialise()},t.isHidden=v.isHidden,t.goToState={next:v.next,previous:v.previous},t.shouldDisableBtn={next:function(){var e,n;return("function"==typeof(n={group:function(){return 0===_.chain(t.team.members).map("confRating").compact().value().length},alignment:function(){return 0===_.chain(t.alignments).map("rating").compact().value().length||0===t.alignmentsRationale.trim().length},files:function(){return!t.uploader.isReady}})[e=v.active]?n[e]():void 0)||!1},back:function(){return!1},submit:function(){return 0===t.comment.trim().length&&"need_help"===t.submissionType},cancel:function(){return t.uploader.isUploading}},t.shouldShowBtn={cancel:function(){return!t.uploader.isUploading},next:function(){var t;return null!=(t=v.shown[v.activeIdx()+1])&&"uploading"!==t},back:function(){var t;return null!=(t=v.shown[v.activeIdx()-1])&&"uploading"!==t},submit:function(){return v.activeIdx()===v.shown.indexOf("uploading")-1}},t.uploadButtonClicked=function(){return v.shown=_.without(v.shown,"files"),v.shown.push("files"),n(function(){return v.setActive("files"),t.uploader.start()},251)},t.team={members:[]},m=function(){var e;return e=l.groupContributionSum(t.team.members),_.map(t.team.members,function(t){return{project_id:t.project_id,pct:(100*t.rating/e).toFixed(0),pts:t.rating}})},t.comment="",h=function(){return _.chain(t.alignments).map(function(e,n){return e.rationale=t.alignmentsRationale,e.ilo_id=+n,e}).filter(function(t){return t.rating>0}).value()},f=a.project().task_outcome_alignments.filter(function(t){return t.task_definition_id===a.definition.id}),t.alignmentsRationale=f.length>0?f[0].description:"",g=t.task.staffAlignments(),t.ilos=_.map(a.unit().ilos,function(t){var e;return null==(e=_.find(g,{learning_outcome_id:t.id}))&&(e={}),null==e.rating&&(e.rating=0),e.label=d.alignmentLabels[e.rating],t.staffAlignment=e,t}),t.alignments=_.chain(a.unit().ilos).map(function(t){var e,n,r;return null==(r=null!=(e=f.filter(function(e){return e.learning_outcome_id===t.id}))&&null!=(n=e[0])?n.rating:void 0)&&(r=0),[t.id,{rating:r}]}).fromPairs().value()})},Qc7Y:function(t,e){angular.module("doubtfire.api.models.user",[]).factory("User",function(t,e,n){var r;return(r=t("/users/:id",{id:"@id"})).csvUrl=function(){return n.API_URL+"/csv/users?auth_token="+e.authenticationToken},r})},QqsB:function(t,e){angular.module("doubtfire.admin.states",["doubtfire.admin.states.teachingperiods","doubtfire.admin.states.units","doubtfire.admin.states.users"])},"R+pi":function(t,e){angular.module("doubtfire.projects.states.all.directives.all-projects-list",[]).config(function(t){return t.state("view-all-projects",{url:"/view-all-projects",views:{main:{controller:"AllProjectsList",templateUrl:"projects/states/all/directives/all-projects-list/all-projects-list.tpl.html"}},data:{pageTitle:"_All-Projects_",roleWhitelist:["Student","Tutor","Convenor","Admin"]}})}).controller("AllProjectsList",function(t,e,n,r,i,o,a,s,l,u){var c,d;return l.event("view-all-projects","viewed all-projects list"),t.externalName=i.ExternalName,t.sortOrder="start_date",t.reverse=!0,t.currentPage=1,t.maxSize=5,t.pageSize=15,d=n(function(){return t.showSpinner=!0},2e3),s.getProjects(!0,function(e){return t.projects=e,t.showSpinner=!1,t.dataLoaded=!0,n.cancel(d)}),c=function(){if(null!=t.projects)return t.notEnrolled=function(){return 0===t.projects.length&&"Student"===a.role}},t.$watch("projects",c),t.currentUser=a})},R5V4:function(t,e){},R5WU:function(t,e){angular.module("doubtfire.units.states.all.directives",["doubtfire.units.states.all.directives.all-units-list"])},RIjG:function(t,e){angular.module("doubtfire.api.models.task-similarity",[]).factory("TaskSimilarity",function(t,e,n){var r;return r={similarityUrl:function(t,n){return e.API_URL+"/tasks/"+t.id+"/similarity/"+n},get:function(e,n,i){var o;return o=r.similarityUrl(e,n),t.get(o).success(function(t){return i(t)})},put:function(e,n,i,o,a,s){var l;return l=r.similarityUrl(e,n),t.put(l,{dismissed:o,other:i}).then(function(t){return a(t)},function(t){return s(t)})}}})},ROMr:function(t,e){angular.module("doubtfire.tasks.task-ilo-alignment.modals",["doubtfire.tasks.task-ilo-alignment.modals.task-ilo-alignment-modal"])},RmMz:function(t,e){angular.module("doubtfire.api.models.task-definition",[]).factory("TaskDefinition",function(t,e,n){var r;return(r=t("/task_definitions/:id",{id:"@id"})).taskSheet=t("/units/:unit_id/task_definitions/:task_def_id/task_sheet",{unit_id:"@unit_id",task_def_id:"@task_def_id"}),r.taskResources=t("/units/:unit_id/task_definitions/:task_def_id/task_resources",{unit_id:"@unit_id",task_def_id:"@task_def_id"}),r.getSubmissionsUrl=function(t,r){return e.API_URL+"/submission/unit/"+t+"/task_definitions/"+r+"/download_submissions?auth_token="+n.authenticationToken},r.getSubmissionsPdfsUrl=function(t,r){return e.API_URL+"/submission/unit/"+t+"/task_definitions/"+r+"/student_pdfs?auth_token="+n.authenticationToken},r})},RtYk:function(t,e){angular.module("doubtfire.tasks.task-ilo-alignment.task-ilo-alignment-editor",[]).directive("taskIloAlignmentEditor",function(){return{replace:!0,restrict:"E",templateUrl:"tasks/task-ilo-alignment/task-ilo-alignment-editor/task-ilo-alignment-editor.tpl.html",scope:{unit:"=",project:"=?",showCsv:"=",hidePanel:"=?",showIncludeTasks:"=?"},controller:function(t,e,n,r,i,o,a,s,l,u,c,d,p,f,h,m,g){var v;return t.showTaskName=t.unit.ilos.length<5,t.showGraph=!1,t.closeGraph=function(){return t.showGraph=!1},null!=t.project?(t.source=t.project,t.tasks=t.project.tasks,t.taskStatusFactor=m.projectTaskStatusFactor(t.project)):(t.source=t.unit,t.tasks=_.map(t.unit.task_definitions,function(t){return{definition:t}}),t.taskStatusFactor=m.unitTaskStatusFactor()),v=[],t.$watch("source.task_outcome_alignments.length",function(){if(null!=t.source.task_outcome_alignments)return v=_.chain(t.source.task_outcome_alignments).filter(function(t){return t.rating>0}).groupBy("task_definition_id").map(function(t,e){return[e,t=_.chain(t).groupBy("learning_outcome_id").map(function(t,e){return[e,t[0]]}).fromPairs().value()]}).fromPairs().value()}),t.showAlignmentModal=function(e,n,r){return g.show(e,n,r,t.unit,t.project,t.source)},t.alignmentForTaskAndIlo=function(t,e){var n;return null!=(n=v[t.definition.id])?n[e.id]:void 0},t.disableInclude=function(e){return t.unit.ilos.length>0&&void 0===v[e.definition.id]},t.includeTaskInPorfolio=function(e){return e.include_in_portfolio=!e.include_in_portfolio,f.update({project_id:t.project.project_id,task_definition_id:e.definition.id,include_in_portfolio:e.include_in_portfolio},function(t){return e.include_in_portfolio=t.include_in_portfolio})},t.csvImportResponse={},t.taskAlignmentCSV={file:{name:"Task Outcome Link CSV",type:"csv"}},t.taskAlignmentCSVUploadUrl=function(){return p.taskAlignmentCSVUploadUrl(t.unit,null!=t.project?t.project.project_id:null)},t.isTaskCSVUploading=null,t.onTaskAlignmentCSVSuccess=function(e){return h.show("Task CSV upload results.",e),n.$broadcast("UpdateAlignmentChart",e,{batch:!0}),null!=t.project?t.project.refresh(t.unit):t.unit.refresh()},t.onTaskAlignmentCSVComplete=function(){return t.isTaskCSVUploading=null},t.downloadTaskAlignmentCSV=function(){return p.downloadCSV(t.unit,null!=t.project?t.project.project_id:null)}}}})},S3kq:function(t,e){angular.module("doubtfire.groups.student-group-manager",[]).directive("studentGroupManager",function(){return{restrict:"E",templateUrl:"groups/student-group-manager/student-group-manager.tpl.html",replace:!0,controller:function(t,e,n,r,i){return t.selectedGroupSet=_.first(t.unit.group_sets),t.selectedGroup=null,t.groupForSet=function(e){if(e)return _.find(t.project.groups,function(t){return t.group_set_id===e.id})},t.updateGroup=function(r){return e.update({unit_id:t.unit.id,group_set_id:t.selectedGroupSet.id,id:t.selectedGroup.id,group:{name:r}},function(t){return n.add("success","Group name changed",2e3)},function(t){return n.add("danger",t.data.error,6e3)})},t.onSelectGroup=function(e){return r.create({unit_id:t.unit.id,group_set_id:t.selectedGroupSet.id,group_id:e.id,project_id:t.project.project_id},function(e){return i.updateGroups(t.project),n.add("success","Joined group",2e3),t.refreshGroupMembers()},function(e){return n.add("danger",e.data.error,6e3),t.selectedGroup=null})},t.$watch("project",function(e,n){return t.selectedGroup=t.groupForSet(t.selectedGroupSet),t.$digest}),t.$watch("selectedGroupSet",function(e,n){return t.selectedGroup=t.groupForSet(e),t.$digest})}}})},S4HQ:function(t,e,n){var r;(r={dev:!1}).tooltip=r.tooltip||{},r.utils=r.utils||{},r.models=r.models||{},r.charts={},r.logs={},r.dom={},r.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),r.dev&&(r.dispatch.on("render_start",function(t){r.logs.startTime=+new Date}),r.dispatch.on("render_end",function(t){r.logs.endTime=+new Date,r.logs.totalTime=r.logs.endTime-r.logs.startTime,r.log("total",r.logs.totalTime)})),r.log=function(){return r.dev&&window.console&&console.log&&console.log.apply?console.log.apply(console,arguments):r.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments),arguments[arguments.length-1]},r.deprecated=function(t,e){console&&console.warn&&console.warn("nvd3 warning: `"+t+"` has been deprecated. ",e||"")},r.render=function(t){t=t||1,r.render.active=!0,r.dispatch.render_start();var e=function(){for(var n,i,o=0;o<t&&(i=r.render.queue[o]);o++)n=i.generate(),typeof i.callback==typeof Function&&i.callback(n);r.render.queue.splice(0,o),r.render.queue.length?setTimeout(e):(r.dispatch.render_end(),r.render.active=!1)};setTimeout(e)},r.render.active=!1,r.render.queue=[],r.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),r.render.queue.push(t),r.render.active||r.render()},t.exports=r,"undefined"!=typeof window&&(window.nv=r),r.dom.write=function(t){return void 0!==window.fastdom?fastdom.write(t):t()},r.dom.read=function(t){return void 0!==window.fastdom?fastdom.read(t):t()},r.interactiveGuideline=function(){"use strict";var t=r.models.tooltip();t.duration(0).hideDelay(0)._isInteractiveLayer(!0).hidden(!1);var e=null,n=null,i={left:0,top:0},o=d3.scale.linear(),a=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick"),s=!0,l=null,u="ActiveXObject"in window;function c(d){d.each(function(d){var p=d3.select(this),f=e||960,h=n||400,m=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([d]);function g(){var e=d3.mouse(this),n=e[0],r=e[1],s=!0,l=!1;if(u&&(n=d3.event.offsetX,r=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(s=!1),d3.event.target.className.baseVal.match("nv-legend")&&(l=!0)),s&&(n-=i.left,r-=i.top),n<0||r<0||n>f||r>h||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||l){if(u&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(t.nvPointerEventsClass)))return;return a.elementMouseout({mouseX:n,mouseY:r}),c.renderGuideLine(null),void t.hidden(!0)}t.hidden(!1);var d=o.invert(n);a.elementMousemove({mouseX:n,mouseY:r,pointXValue:d}),"dblclick"===d3.event.type&&a.elementDblclick({mouseX:n,mouseY:r,pointXValue:d}),"click"===d3.event.type&&a.elementClick({mouseX:n,mouseY:r,pointXValue:d})}m.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),l&&(l.on("touchmove",g).on("mousemove",g,!0).on("mouseout",g,!0).on("dblclick",g).on("click",g),c.guideLine=null,c.renderGuideLine=function(t){s&&(c.guideLine&&c.guideLine.attr("x1")===t||r.dom.write(function(){var e=m.select(".nv-interactiveGuideLine").selectAll("line").data(null!=t?[r.utils.NaNtoZero(t)]:[],String);e.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",h).attr("y2",0),e.exit().remove()}))})})}return c.dispatch=a,c.tooltip=t,c.margin=function(t){return arguments.length?(i.top=void 0!==t.top?t.top:i.top,i.left=void 0!==t.left?t.left:i.left,c):i},c.width=function(t){return arguments.length?(e=t,c):e},c.height=function(t){return arguments.length?(n=t,c):n},c.xScale=function(t){return arguments.length?(o=t,c):o},c.showGuideLine=function(t){return arguments.length?(s=t,c):s},c.svgContainer=function(t){return arguments.length?(l=t,c):l},c},r.interactiveBisect=function(t,e,n){"use strict";if(!(t instanceof Array))return null;var r;r="function"!=typeof n?function(t){return t.x}:n;var i=d3.bisector(function(t,e){return r(t)-e}).left,o=d3.max([0,i(t,e)-1]),a=r(t[o]);if(void 0===a&&(a=o),a===e)return o;var s=d3.min([o+1,t.length-1]),l=r(t[s]);return void 0===l&&(l=s),Math.abs(l-e)>=Math.abs(a-e)?o:s},r.nearestValueIndex=function(t,e,n){"use strict";var r=1/0,i=null;return t.forEach(function(t,o){var a=Math.abs(e-t);null!=t&&a<=r&&a<n&&(r=a,i=o)}),i},function(){"use strict";r.models.tooltip=function(){var t=null,e="w",n=25,i=0,o=null,a=null,s=null,l=!0,u=400,c=null,d=null,p={left:null,top:null},f={left:0,top:0},h=!0,m=100,g=!0,v=!1,b="nvtooltip-"+Math.floor(1e5*Math.random()),y="nv-pointer-events-none",w=function(t,e){return t},k=function(t){return t},_=function(t,e){return t},x=function(t){if(null===t)return"";var e=d3.select(document.createElement("table"));g&&e.selectAll("thead").data([t]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(k(t.value));var n=e.selectAll("tbody").data([t]).enter().append("tbody").selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});n.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),n.append("td").classed("key",!0).html(function(t,e){return _(t.key,e)}),n.append("td").classed("value",!0).html(function(t,e){return w(t.value,e)}),n.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]);d3.select(this).style("border-bottom-color",e(.6)).style("border-top-color",e(.6))}});var r=e.node().outerHTML;return void 0!==t.footer&&(r+="<div class='footer'>"+t.footer+"</div>"),r},S=function(t){if(t&&t.series){if(t.series instanceof Array)return!!t.series.length;if(t.series instanceof Object)return t.series=[t.series],!0}return!1},$=function(t){d&&r.dom.read(function(){var i,o,a=parseInt(d.offsetHeight,10),s=parseInt(d.offsetWidth,10),p=r.utils.windowSize().width,h=r.utils.windowSize().height,g=window.pageYOffset,v=window.pageXOffset;h=window.innerWidth>=document.body.scrollWidth?h:h-16,p=window.innerHeight>=document.body.scrollHeight?p:p-16;var b,y,w=function(t){var e=o;do{isNaN(t.offsetTop)||(e+=t.offsetTop),t=t.offsetParent}while(t);return e},k=function(t){var e=i;do{isNaN(t.offsetLeft)||(e+=t.offsetLeft),t=t.offsetParent}while(t);return e};switch(e){case"e":i=t[0]-s-n,o=t[1]-a/2,b=k(d),y=w(d),b<v&&(i=t[0]+n>v?t[0]+n:v-b+i),y<g&&(o=g-y+o),y+a>g+h&&(o=g+h-y+o-a);break;case"w":i=t[0]+n,o=t[1]-a/2,b=k(d),y=w(d),b+s>p&&(i=t[0]-s-n),y<g&&(o=g+5),y+a>g+h&&(o=g+h-y+o-a);break;case"n":i=t[0]-s/2-5,o=t[1]+n,b=k(d),y=w(d),b<v&&(i=v+5),b+s>p&&(i=i-s/2+5),y+a>g+h&&(o=g+h-y+o-a);break;case"s":i=t[0]-s/2,o=t[1]-a-n,b=k(d),y=w(d),b<v&&(i=v+5),b+s>p&&(i=i-s/2+5),g>y&&(o=g);break;case"none":i=t[0],o=t[1]-n,b=k(d),y=w(d)}i-=f.left,o-=f.top;var _=d.getBoundingClientRect(),x=(g=window.pageYOffset||document.documentElement.scrollTop,v=window.pageXOffset||document.documentElement.scrollLeft,"translate("+i+"px, "+o+"px)"),S=d3.interpolateString("translate("+(_.left+v)+"px, "+(_.top+g)+"px)",x),$=c.style("opacity")<.1;l?c.transition().delay(u).duration(0).style("opacity",0):c.interrupt().transition().duration($?0:m).styleTween("transform",function(t){return S},"important").style("-webkit-transform",x).style("opacity",1)})};function T(){if(h&&S(t)){!function(){if(s){var t=d3.select(s);"svg"!==t.node().tagName&&(t=t.select("svg"));var e=t.node()?t.attr("viewBox"):null;if(e){e=e.split(" ");var n=parseInt(t.style("width"),10)/e[2];p.left=p.left*n,p.top=p.top*n}}}();var e=p.left,n=null!==o?o:p.top;return r.dom.write(function(){var o;c||(o=s||document.body,(c=d3.select(o).append("div").attr("class","nvtooltip "+(a||"xy-tooltip")).attr("id",b)).style("top",0).style("left",0),c.style("opacity",0),c.selectAll("div, table, td, tr").classed(y,!0),c.classed(y,!0),d=c.node());var l=x(t);l&&(d.innerHTML=l),s&&v?r.dom.read(function(){var t=s.getElementsByTagName("svg")[0],r={left:0,top:0};if(t){var o=t.getBoundingClientRect(),a=s.getBoundingClientRect(),l=o.top;if(l<0){var u=s.getBoundingClientRect();l=Math.abs(l)>u.height?0:l}r.top=Math.abs(l-a.top),r.left=Math.abs(o.left-a.left)}e+=s.offsetLeft+r.left-2*s.scrollLeft,n+=s.offsetTop+r.top-2*s.scrollTop,i&&i>0&&(n=Math.floor(n/i)*i),$([e,n])}):$([e,n])}),T}}return T.nvPointerEventsClass=y,T.options=r.utils.optionsFunc.bind(T),T._options=Object.create({},{duration:{get:function(){return m},set:function(t){m=t}},gravity:{get:function(){return e},set:function(t){e=t}},distance:{get:function(){return n},set:function(t){n=t}},snapDistance:{get:function(){return i},set:function(t){i=t}},classes:{get:function(){return a},set:function(t){a=t}},chartContainer:{get:function(){return s},set:function(t){s=t}},fixedTop:{get:function(){return o},set:function(t){o=t}},enabled:{get:function(){return h},set:function(t){h=t}},hideDelay:{get:function(){return u},set:function(t){u=t}},contentGenerator:{get:function(){return x},set:function(t){x=t}},valueFormatter:{get:function(){return w},set:function(t){w=t}},headerFormatter:{get:function(){return k},set:function(t){k=t}},keyFormatter:{get:function(){return _},set:function(t){_=t}},headerEnabled:{get:function(){return g},set:function(t){g=t}},_isInteractiveLayer:{get:function(){return v},set:function(t){v=!!t}},position:{get:function(){return p},set:function(t){p.left=void 0!==t.left?t.left:p.left,p.top=void 0!==t.top?t.top:p.top}},offset:{get:function(){return f},set:function(t){f.left=void 0!==t.left?t.left:f.left,f.top=void 0!==t.top?t.top:f.top}},hidden:{get:function(){return l},set:function(t){l!=t&&(l=!!t,T())}},data:{get:function(){return t},set:function(e){e.point&&(e.value=e.point.x,e.series=e.series||{},e.series.value=e.point.y,e.series.color=e.point.color||e.series.color),t=e}},tooltipElem:{get:function(){return d},set:function(t){}},id:{get:function(){return b},set:function(t){}}}),r.utils.initOptions(T),T}}(),r.utils.windowSize=function(){var t={width:640,height:480};return window.innerWidth&&window.innerHeight?(t.width=window.innerWidth,t.height=window.innerHeight,t):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight,t):document.body&&document.body.offsetWidth?(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight,t):t},r.utils.windowResize=function(t){return window.addEventListener?window.addEventListener("resize",t):r.log("ERROR: Failed to bind to window.resize with: ",t),{callback:t,clear:function(){window.removeEventListener("resize",t)}}},r.utils.getColor=function(t){if(void 0===t)return r.utils.defaultColor();if(Array.isArray(t)){var e=d3.scale.ordinal().range(t);return function(t,n){return t.color||e(void 0===n?t:n)}}return t},r.utils.defaultColor=function(){return r.utils.getColor(d3.scale.category20().range())},r.utils.customTheme=function(t,e,n){e=e||function(t){return t.key};var r=(n=n||d3.scale.category20().range()).length;return function(i,o){var a=e(i);return"function"==typeof t[a]?t[a]():void 0!==t[a]?t[a]:(r||(r=n.length),n[r-=1])}},r.utils.pjax=function(t,e){var n=function(n){d3.html(n,function(n){var i=d3.select(e).node();i.parentNode.replaceChild(d3.select(n).select(e).node(),i),r.utils.pjax(t,e)})};d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),n(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&n(d3.event.state)})},r.utils.calcApproxTextWidth=function(t){if("function"==typeof t.style&&"function"==typeof t.text){var e=parseInt(t.style("font-size").replace("px",""),10);return t.text().length*e*.5}return 0},r.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||t===1/0||t===-1/0?0:t},d3.selection.prototype.watchTransition=function(t){var e=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,e)},r.utils.renderWatch=function(t,e){if(!(this instanceof r.utils.renderWatch))return new r.utils.renderWatch(t,e);var n=void 0!==e?e:250,i=[],o=this;this.models=function(t){return(t=[].slice.call(arguments,0)).forEach(function(t){var e;t.__rendered=!1,(e=t).dispatch.on("renderEnd",function(t){e.__rendered=!0,o.renderEnd("model")}),i.indexOf(t)<0&&i.push(t)}),this},this.reset=function(t){void 0!==t&&(n=t),i=[]},this.transition=function(t,e,r){if(r=(e=arguments.length>1?[].slice.call(arguments,1):[]).length>1?e.pop():void 0!==n?n:250,t.__rendered=!1,i.indexOf(t)<0&&i.push(t),0===r)return t.__rendered=!0,t.delay=function(){return this},t.duration=function(){return this},t;t.__rendered=0===t.length||!!t.every(function(t){return!t.length});var a=0;return t.transition().duration(r).each(function(){++a}).each("end",function(n,r){0==--a&&(t.__rendered=!0,o.renderEnd.apply(this,e))})},this.renderEnd=function(){i.every(function(t){return t.__rendered})&&(i.forEach(function(t){t.__rendered=!1}),t.renderEnd.apply(this,arguments))}},r.utils.deepExtend=function(t){(arguments.length>1?[].slice.call(arguments,1):[]).forEach(function(e){for(var n in e){var i=t[n]instanceof Array;"object"!=typeof t[n]||i||"object"!=typeof e[n]?t[n]=e[n]:r.utils.deepExtend(t[n],e[n])}})},r.utils.state=function(){if(!(this instanceof r.utils.state))return new r.utils.state;var t={},e=function(){},n=function(){return{}},i=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(t){e(t,!0)}),this.getter=function(t){return n=t,this},this.setter=function(t,n){return n||(n=function(){}),e=function(e,r){t(e),r&&n()},this},this.init=function(t){r.utils.deepExtend(i=i||{},t)},this.update=function(){i&&(e(i,!1),i=null),(function(){var e=n();if(JSON.stringify(e)===JSON.stringify(t))return!1;for(var r in e)void 0===t[r]&&(t[r]={}),t[r]=e[r];return!0}).call(this)&&this.dispatch.change(t)}},r.utils.optionsFunc=function(t){return t&&d3.map(t).forEach((function(t,e){"function"==typeof this[t]&&this[t](e)}).bind(this)),this},r.utils.calcTicksX=function(t,e){for(var n=1,i=0;i<e.length;i+=1){var o=e[i]&&e[i].values?e[i].values.length:0;n=o>n?o:n}return r.log("Requested number of ticks: ",t),r.log("Calculated max values to be: ",n),t=(t=t>n?t=n-1:t)<1?1:t,t=Math.floor(t),r.log("Calculating tick count as: ",t),t},r.utils.calcTicksY=function(t,e){return r.utils.calcTicksX(t,e)},r.utils.initOption=function(t,e){t._calls&&t._calls[e]?t[e]=t._calls[e]:(t[e]=function(n){return arguments.length?(t._overrides[e]=!0,t._options[e]=n,t):t._options[e]},t["_"+e]=function(n){return arguments.length?(t._overrides[e]||(t._options[e]=n),t):t._options[e]})},r.utils.initOptions=function(t){t._overrides=t._overrides||{};var e=Object.getOwnPropertyNames(t._options||{}),n=Object.getOwnPropertyNames(t._calls||{});for(var i in e=e.concat(n))r.utils.initOption(t,e[i])},r.utils.inheritOptionsD3=function(t,e,n){t._d3options=n.concat(t._d3options||[]),n.unshift(e),n.unshift(t),d3.rebind.apply(this,n)},r.utils.arrayUnique=function(t){return t.sort().filter(function(e,n){return!n||e!=t[n-1]})},r.utils.symbolMap=d3.map(),r.utils.symbol=function(){var t,e=64;function n(n,i){var o=t.call(this,n,i),a=e.call(this,n,i);return-1!==d3.svg.symbolTypes.indexOf(o)?d3.svg.symbol().type(o).size(a)():r.utils.symbolMap.get(o)(a)}return n.type=function(e){return arguments.length?(t=d3.functor(e),n):t},n.size=function(t){return arguments.length?(e=d3.functor(t),n):e},n},r.utils.inheritOptions=function(t,e){var n=Object.getOwnPropertyNames(e._options||{}),i=Object.getOwnPropertyNames(e._calls||{}),o=e._inherited||[],a=e._d3options||[],s=n.concat(i).concat(o).concat(a);s.unshift(e),s.unshift(t),d3.rebind.apply(this,s),t._inherited=r.utils.arrayUnique(n.concat(i).concat(o).concat(n).concat(t._inherited||[])),t._d3options=r.utils.arrayUnique(a.concat(t._d3options||[]))},r.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},r.utils.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},r.utils.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},r.utils.availableHeight=function(t,e,n){return r.utils.sanitizeHeight(t,e)-n.top-n.bottom},r.utils.availableWidth=function(t,e,n){return r.utils.sanitizeWidth(t,e)-n.left-n.right},r.utils.noData=function(t,e){var n=t.options(),i=n.margin(),o=n.noData(),a=null==o?["No Data Available."]:[o],s=r.utils.availableHeight(n.height(),e,i),l=r.utils.availableWidth(n.width(),e,i),u=i.left+l/2,c=i.top+s/2;e.selectAll("g").remove();var d=e.selectAll(".nv-noData").data(a);d.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),d.attr("x",u).attr("y",c).text(function(t){return t})},r.models.axis=function(){"use strict";var t,e=d3.svg.axis(),n=d3.scale.linear(),i={top:0,right:0,bottom:0,left:0},o=75,a=60,s=null,l=!0,u=0,c=!0,d=!1,p=!1,f=null,h=0,m=250,g=d3.dispatch("renderEnd");e.scale(n).orient("bottom").tickFormat(function(t){return t});var v=r.utils.renderWatch(g,m);function b(a){return v.reset(),a.each(function(a){var m=d3.select(this);r.utils.initSVG(m);var g=m.selectAll("g.nv-wrap.nv-axis").data([a]),b=(g.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),g.select("g"));null!==f?e.ticks(f):"top"!=e.orient()&&"bottom"!=e.orient()||e.ticks(Math.abs(n.range()[1]-n.range()[0])/100),b.watchTransition(v,"axis").call(e),t=t||e.scale();var y=e.tickFormat();null==y&&(y=t.tickFormat());var w,k,_,x=b.selectAll("text.nv-axislabel").data([s||null]);switch(x.exit().remove(),e.orient()){case"top":x.enter().append("text").attr("class","nv-axislabel"),_=n.range().length<2?0:2===n.range().length?n.range()[1]:n.range()[n.range().length-1]+(n.range()[1]-n.range()[0]),x.attr("text-anchor","middle").attr("y",0).attr("x",_/2),l&&((k=g.selectAll("g.nv-axisMaxMin").data(n.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),k.exit().remove(),k.attr("transform",function(t,e){return"translate("+r.utils.NaNtoZero(n(t))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-e.tickPadding()).attr("text-anchor","middle").text(function(t,e){var n=y(t);return(""+n).match("NaN")?"":n}),k.watchTransition(v,"min-max top").attr("transform",function(t,e){return"translate("+r.utils.NaNtoZero(n.range()[e])+",0)"}));break;case"bottom":w=h+36;var S=30,$=0,T=b.selectAll("g").select("text"),C="";if(u%360){T.each(function(t,e){var n=this.getBoundingClientRect(),r=n.width;$=n.height,r>S&&(S=r)}),C="rotate("+u+" 0,"+($/2+e.tickPadding())+")";var E=Math.abs(Math.sin(u*Math.PI/180));w=(E?E*S:S)+30,T.attr("transform",C).style("text-anchor",u%360>0?"start":"end")}x.enter().append("text").attr("class","nv-axislabel"),_=n.range().length<2?0:2===n.range().length?n.range()[1]:n.range()[n.range().length-1]+(n.range()[1]-n.range()[0]),x.attr("text-anchor","middle").attr("y",w).attr("x",_/2),l&&((k=g.selectAll("g.nv-axisMaxMin").data([n.domain()[0],n.domain()[n.domain().length-1]])).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),k.exit().remove(),k.attr("transform",function(t,e){return"translate("+r.utils.NaNtoZero(n(t)+(p?n.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",C).style("text-anchor",u?u%360>0?"start":"end":"middle").text(function(t,e){var n=y(t);return(""+n).match("NaN")?"":n}),k.watchTransition(v,"min-max bottom").attr("transform",function(t,e){return"translate("+r.utils.NaNtoZero(n(t)+(p?n.rangeBand()/2:0))+",0)"})),d&&T.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"});break;case"right":x.enter().append("text").attr("class","nv-axislabel"),x.style("text-anchor",c?"middle":"begin").attr("transform",c?"rotate(90)":"").attr("y",c?12-Math.max(i.right,o):-10).attr("x",c?d3.max(n.range())/2:e.tickPadding()),l&&((k=g.selectAll("g.nv-axisMaxMin").data(n.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(t,e){return"translate(0,"+r.utils.NaNtoZero(n(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).style("text-anchor","start").text(function(t,e){var n=y(t);return(""+n).match("NaN")?"":n}),k.watchTransition(v,"min-max right").attr("transform",function(t,e){return"translate(0,"+r.utils.NaNtoZero(n.range()[e])+")"}).select("text").style("opacity",1));break;case"left":x.enter().append("text").attr("class","nv-axislabel"),x.style("text-anchor",c?"middle":"end").attr("transform",c?"rotate(-90)":"").attr("y",c?25-Math.max(i.left,o)-(h||0):-10).attr("x",c?-d3.max(n.range())/2:-e.tickPadding()),l&&((k=g.selectAll("g.nv-axisMaxMin").data(n.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(e,n){return"translate(0,"+r.utils.NaNtoZero(t(e))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(t,e){var n=y(t);return(""+n).match("NaN")?"":n}),k.watchTransition(v,"min-max right").attr("transform",function(t,e){return"translate(0,"+r.utils.NaNtoZero(n.range()[e])+")"}).select("text").style("opacity",1))}if(x.text(function(t){return t}),!l||"left"!==e.orient()&&"right"!==e.orient()||(b.selectAll("g").each(function(t,e){d3.select(this).select("text").attr("opacity",1),(n(t)<n.range()[1]+10||n(t)>n.range()[0]-10)&&((t>1e-10||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),n.domain()[0]==n.domain()[1]&&0==n.domain()[0]&&g.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),l&&("top"===e.orient()||"bottom"===e.orient())){var A=[];g.selectAll("g.nv-axisMaxMin").each(function(t,e){try{A.push(e?n(t)-this.getBoundingClientRect().width-4:n(t)+this.getBoundingClientRect().width+4)}catch(r){A.push(e?n(t)-4:n(t)+4)}}),b.selectAll("g").each(function(t,e){(n(t)<A[0]||n(t)>A[1])&&(t>1e-10||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}b.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t)/1e6)&&void 0!==t}).classed("zero",!0),t=n.copy()}),v.renderEnd("axis immediate"),b}return b.axis=e,b.dispatch=g,b.options=r.utils.optionsFunc.bind(b),b._options=Object.create({},{axisLabelDistance:{get:function(){return h},set:function(t){h=t}},staggerLabels:{get:function(){return d},set:function(t){d=t}},rotateLabels:{get:function(){return u},set:function(t){u=t}},rotateYLabel:{get:function(){return c},set:function(t){c=t}},showMaxMin:{get:function(){return l},set:function(t){l=t}},axisLabel:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return a},set:function(t){a=t}},ticks:{get:function(){return f},set:function(t){f=t}},width:{get:function(){return o},set:function(t){o=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},duration:{get:function(){return m},set:function(t){v.reset(m=t)}},scale:{get:function(){return n},set:function(t){e.scale(n=t),p="function"==typeof n.rangeBands,r.utils.inheritOptionsD3(b,n,["domain","range","rangeBand","rangeBands"])}}}),r.utils.initOptions(b),r.utils.inheritOptionsD3(b,e,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),r.utils.inheritOptionsD3(b,n,["domain","range","rangeBand","rangeBands"]),b},r.models.boxPlot=function(){"use strict";var t,e,n,i,o,a,s={top:0,right:0,bottom:0,left:0},l=960,u=500,c=Math.floor(1e4*Math.random()),d=d3.scale.ordinal(),p=d3.scale.linear(),f=function(t){return t.x},h=function(t){return t.y},m=r.utils.defaultColor(),g=null,v=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),b=250,y=null,w=r.utils.renderWatch(v,b);function k(c){return w.reset(),c.each(function(c){var h=l-s.left-s.right,k=u-s.top-s.bottom;g=d3.select(this),r.utils.initSVG(g),d.domain(t||c.map(function(t,e){return f(t,e)})).rangeBands(n||[0,h],.1);var _=[];e||(_=[d3.min(c.map(function(t){var e=[];return e.push(t.values.Q1),t.values.hasOwnProperty("whisker_low")&&null!==t.values.whisker_low&&e.push(t.values.whisker_low),t.values.hasOwnProperty("outliers")&&null!==t.values.outliers&&(e=e.concat(t.values.outliers)),d3.min(e)})),d3.max(c.map(function(t){var e=[];return e.push(t.values.Q3),t.values.hasOwnProperty("whisker_high")&&null!==t.values.whisker_high&&e.push(t.values.whisker_high),t.values.hasOwnProperty("outliers")&&null!==t.values.outliers&&(e=e.concat(t.values.outliers)),d3.max(e)}))]),p.domain(e||_),p.range(i||[k,0]),o=o||d,a=a||p.copy().range([p(0),p(0)]);var x=g.selectAll("g.nv-wrap").data([c]);x.enter().append("g").attr("class","nvd3 nv-wrap"),x.attr("transform","translate("+s.left+","+s.top+")");var S=x.selectAll(".nv-boxplot").data(function(t){return t}),$=S.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);S.attr("class","nv-boxplot").attr("transform",function(t,e,n){return"translate("+(d(f(t,e))+.05*d.rangeBand())+", 0)"}).classed("hover",function(t){return t.hover}),S.watchTransition(w,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(t,e){return e*b/c.length}).attr("transform",function(t,e){return"translate("+(d(f(t,e))+.05*d.rangeBand())+", 0)"}),S.exit().remove(),$.each(function(t,e){var n=d3.select(this);["low","high"].forEach(function(r){t.values.hasOwnProperty("whisker_"+r)&&null!==t.values["whisker_"+r]&&(n.append("line").style("stroke",t.color?t.color:m(t,e)).attr("class","nv-boxplot-whisker nv-boxplot-"+r),n.append("line").style("stroke",t.color?t.color:m(t,e)).attr("class","nv-boxplot-tick nv-boxplot-"+r))})});var T=S.selectAll(".nv-boxplot-outlier").data(function(t){return t.values.hasOwnProperty("outliers")&&null!==t.values.outliers?t.values.outliers:[]});T.enter().append("circle").style("fill",function(t,e,n){return m(t,n)}).style("stroke",function(t,e,n){return m(t,n)}).on("mouseover",function(t,e,n){d3.select(this).classed("hover",!0),v.elementMouseover({series:{key:t,color:m(t,n)},e:d3.event})}).on("mouseout",function(t,e,n){d3.select(this).classed("hover",!1),v.elementMouseout({series:{key:t,color:m(t,n)},e:d3.event})}).on("mousemove",function(t,e){v.elementMousemove({e:d3.event})}),T.attr("class","nv-boxplot-outlier"),T.watchTransition(w,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*d.rangeBand()).attr("cy",function(t,e,n){return p(t)}).attr("r","3"),T.exit().remove();var C=function(){return null===y?.9*d.rangeBand():Math.min(75,.9*d.rangeBand())},E=function(){return.45*d.rangeBand()-C()/2},A=function(){return.45*d.rangeBand()+C()/2};["low","high"].forEach(function(t){var e="low"===t?"Q1":"Q3";S.select("line.nv-boxplot-whisker.nv-boxplot-"+t).watchTransition(w,"nv-boxplot: boxplots").attr("x1",.45*d.rangeBand()).attr("y1",function(e,n){return p(e.values["whisker_"+t])}).attr("x2",.45*d.rangeBand()).attr("y2",function(t,n){return p(t.values[e])}),S.select("line.nv-boxplot-tick.nv-boxplot-"+t).watchTransition(w,"nv-boxplot: boxplots").attr("x1",E).attr("y1",function(e,n){return p(e.values["whisker_"+t])}).attr("x2",A).attr("y2",function(e,n){return p(e.values["whisker_"+t])})}),["low","high"].forEach(function(t){$.selectAll(".nv-boxplot-"+t).on("mouseover",function(e,n,r){d3.select(this).classed("hover",!0),v.elementMouseover({series:{key:e.values["whisker_"+t],color:m(e,r)},e:d3.event})}).on("mouseout",function(e,n,r){d3.select(this).classed("hover",!1),v.elementMouseout({series:{key:e.values["whisker_"+t],color:m(e,r)},e:d3.event})}).on("mousemove",function(t,e){v.elementMousemove({e:d3.event})})}),$.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(t,e){d3.select(this).classed("hover",!0),v.elementMouseover({key:t.label,value:t.label,series:[{key:"Q3",value:t.values.Q3,color:t.color||m(t,e)},{key:"Q2",value:t.values.Q2,color:t.color||m(t,e)},{key:"Q1",value:t.values.Q1,color:t.color||m(t,e)}],data:t,index:e,e:d3.event})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),v.elementMouseout({key:t.label,value:t.label,series:[{key:"Q3",value:t.values.Q3,color:t.color||m(t,e)},{key:"Q2",value:t.values.Q2,color:t.color||m(t,e)},{key:"Q1",value:t.values.Q1,color:t.color||m(t,e)}],data:t,index:e,e:d3.event})}).on("mousemove",function(t,e){v.elementMousemove({e:d3.event})}),S.select("rect.nv-boxplot-box").watchTransition(w,"nv-boxplot: boxes").attr("y",function(t,e){return p(t.values.Q3)}).attr("width",C).attr("x",E).attr("height",function(t,e){return Math.abs(p(t.values.Q3)-p(t.values.Q1))||1}).style("fill",function(t,e){return t.color||m(t,e)}).style("stroke",function(t,e){return t.color||m(t,e)}),$.append("line").attr("class","nv-boxplot-median"),S.select("line.nv-boxplot-median").watchTransition(w,"nv-boxplot: boxplots line").attr("x1",E).attr("y1",function(t,e){return p(t.values.Q2)}).attr("x2",A).attr("y2",function(t,e){return p(t.values.Q2)}),o=d.copy(),a=p.copy()}),w.renderEnd("nv-boxplot immediate"),k}return k.dispatch=v,k.options=r.utils.optionsFunc.bind(k),k._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return u},set:function(t){u=t}},maxBoxWidth:{get:function(){return y},set:function(t){y=t}},x:{get:function(){return f},set:function(t){f=t}},y:{get:function(){return h},set:function(t){h=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return t},set:function(e){t=e}},yDomain:{get:function(){return e},set:function(t){e=t}},xRange:{get:function(){return n},set:function(t){n=t}},yRange:{get:function(){return i},set:function(t){i=t}},id:{get:function(){return c},set:function(t){c=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},color:{get:function(){return m},set:function(t){m=r.utils.getColor(t)}},duration:{get:function(){return b},set:function(t){w.reset(b=t)}}}),r.utils.initOptions(k),k},r.models.boxPlotChart=function(){"use strict";var t,e,n=r.models.boxPlot(),i=r.models.axis(),o=r.models.axis(),a={top:15,right:10,bottom:50,left:60},s=null,l=null,u=r.utils.getColor(),c=!0,d=!0,p=!1,f=!1,h=r.models.tooltip(),m="No Data Available.",g=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),v=250;i.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),o.orient(p?"right":"left").tickFormat(d3.format(",.1f")),h.duration(0);var b=r.utils.renderWatch(g,v);function y(u){return b.reset(),b.models(n),c&&b.models(i),d&&b.models(o),u.each(function(u){var h=d3.select(this);r.utils.initSVG(h);var b=(s||parseInt(h.style("width"))||960)-a.left-a.right,w=(l||parseInt(h.style("height"))||400)-a.top-a.bottom;if(y.update=function(){g.beforeUpdate(),h.transition().duration(v).call(y)},y.container=this,!(u&&u.length&&u.filter(function(t){return t.values.hasOwnProperty("Q1")&&t.values.hasOwnProperty("Q2")&&t.values.hasOwnProperty("Q3")}).length)){var k=h.selectAll(".nv-noData").data([m]);return k.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),k.attr("x",a.left+b/2).attr("y",a.top+w/2).text(function(t){return t}),y}h.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale().clamp(!0);var _=h.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([u]),x=_.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),S=x.append("defs"),$=_.select("g");if(x.append("g").attr("class","nv-x nv-axis"),x.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),x.append("g").attr("class","nv-barsWrap"),$.attr("transform","translate("+a.left+","+a.top+")"),p&&$.select(".nv-y.nv-axis").attr("transform","translate("+b+",0)"),n.width(b).height(w),$.select(".nv-barsWrap").datum(u.filter(function(t){return!t.disabled})).transition().call(n),S.append("clipPath").attr("id","nv-x-label-clip-"+n.id()).append("rect"),$.select("#nv-x-label-clip-"+n.id()+" rect").attr("width",t.rangeBand()*(f?2:1)).attr("height",16).attr("x",-t.rangeBand()/(f?1:2)),c){i.scale(t).ticks(r.utils.calcTicksX(b/100,u)).tickSize(-w,0),$.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),$.select(".nv-x.nv-axis").call(i);var T=$.select(".nv-x.nv-axis").selectAll("g");f&&T.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}d&&(o.scale(e).ticks(Math.floor(w/36)).tickSize(-b,0),$.select(".nv-y.nv-axis").call(o)),$.select(".nv-zeroLine line").attr("x1",0).attr("x2",b).attr("y1",e(0)).attr("y2",e(0))}),b.renderEnd("nv-boxplot chart immediate"),y}return n.dispatch.on("elementMouseover.tooltip",function(t){h.data(t).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(t){h.data(t).hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(t){h.position({top:d3.event.pageY,left:d3.event.pageX})()}),y.dispatch=g,y.boxplot=n,y.xAxis=i,y.yAxis=o,y.tooltip=h,y.options=r.utils.optionsFunc.bind(y),y._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},staggerLabels:{get:function(){return f},set:function(t){f=t}},showXAxis:{get:function(){return c},set:function(t){c=t}},showYAxis:{get:function(){return d},set:function(t){d=t}},tooltips:{get:function(){return tooltips},set:function(t){tooltips=t}},tooltipContent:{get:function(){return h},set:function(t){h=t}},noData:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},duration:{get:function(){return v},set:function(t){b.reset(v=t),n.duration(v),i.duration(v),o.duration(v)}},color:{get:function(){return u},set:function(t){u=r.utils.getColor(t),n.color(u)}},rightAlignYAxis:{get:function(){return p},set:function(t){p=t,o.orient(t?"right":"left")}}}),r.utils.inheritOptions(y,n),r.utils.initOptions(y),y},r.models.bullet=function(){"use strict";var t={top:0,right:0,bottom:0,left:0},e="left",n=!1,i=function(t){return t.ranges},o=function(t){return t.markers?t.markers:[0]},a=function(t){return t.measures},s=function(t){return t.rangeLabels?t.rangeLabels:[]},l=function(t){return t.markerLabels?t.markerLabels:[]},u=function(t){return t.measureLabels?t.measureLabels:[]},c=[0],d=380,p=30,f=null,h=null,m=r.utils.getColor(["#1f77b4"]),g=d3.dispatch("elementMouseover","elementMouseout","elementMousemove");function v(e){return e.each(function(e,h){var v=d-t.left-t.right,b=p-t.top-t.bottom;f=d3.select(this),r.utils.initSVG(f);var y=i.call(this,e,h).slice().sort(d3.descending),w=o.call(this,e,h).slice().sort(d3.descending),k=a.call(this,e,h).slice().sort(d3.descending),_=s.call(this,e,h).slice(),x=l.call(this,e,h).slice(),S=u.call(this,e,h).slice(),$=d3.scale.linear().domain(d3.extent(d3.merge([c,y]))).range(n?[v,0]:[0,v]);this.__chart__||d3.scale.linear().domain([0,1/0]).range($.range()),this.__chart__=$;var T=d3.min(y),C=d3.max(y),E=y[1],A=f.selectAll("g.nv-wrap.nv-bullet").data([e]),D=A.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),P=A.select("g");D.append("rect").attr("class","nv-range nv-rangeMax"),D.append("rect").attr("class","nv-range nv-rangeAvg"),D.append("rect").attr("class","nv-range nv-rangeMin"),D.append("rect").attr("class","nv-measure"),A.attr("transform","translate("+t.left+","+t.top+")");var O=function(t){return Math.abs($(t)-$(0))},M=function(t){return $(t<0?t:0)};P.select("rect.nv-rangeMax").attr("height",b).attr("width",O(C>0?C:T)).attr("x",M(C>0?C:T)).datum(C>0?C:T),P.select("rect.nv-rangeAvg").attr("height",b).attr("width",O(E)).attr("x",M(E)).datum(E),P.select("rect.nv-rangeMin").attr("height",b).attr("width",O(C)).attr("x",M(C)).attr("width",O(C>0?T:C)).attr("x",M(C>0?T:C)).datum(C>0?T:C),P.select("rect.nv-measure").style("fill",m).attr("height",b/3).attr("y",b/3).attr("width",k<0?$(0)-$(k[0]):$(k[0])-$(0)).attr("x",M(k)).on("mouseover",function(){g.elementMouseover({value:k[0],label:S[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){g.elementMousemove({value:k[0],label:S[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){g.elementMouseout({value:k[0],label:S[0]||"Current",color:d3.select(this).style("fill")})});var R=b/6,j=w.map(function(t,e){return{value:t,label:x[e]}});D.selectAll("path.nv-markerTriangle").data(j).enter().append("path").attr("class","nv-markerTriangle").attr("transform",function(t){return"translate("+$(t.value)+","+b/2+")"}).attr("d","M0,"+R+"L"+R+","+-R+" "+-R+","+-R+"Z").on("mouseover",function(t){g.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[$(t.value),b/2]})}).on("mousemove",function(t){g.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){g.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}),A.selectAll(".nv-range").on("mouseover",function(t,e){g.elementMouseover({value:t,label:_[e]||(e?1==e?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})}).on("mousemove",function(){g.elementMousemove({value:k[0],label:S[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){g.elementMouseout({value:t,label:_[e]||(e?1==e?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})})}),v}return v.dispatch=g,v.options=r.utils.optionsFunc.bind(v),v._options=Object.create({},{ranges:{get:function(){return i},set:function(t){i=t}},markers:{get:function(){return o},set:function(t){o=t}},measures:{get:function(){return a},set:function(t){a=t}},forceX:{get:function(){return c},set:function(t){c=t}},width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return p},set:function(t){p=t}},tickFormat:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return t},set:function(e){t.top=void 0!==e.top?e.top:t.top,t.right=void 0!==e.right?e.right:t.right,t.bottom=void 0!==e.bottom?e.bottom:t.bottom,t.left=void 0!==e.left?e.left:t.left}},orient:{get:function(){return e},set:function(t){n="right"==(e=t)||"bottom"==e}},color:{get:function(){return m},set:function(t){m=r.utils.getColor(t)}}}),r.utils.initOptions(v),v},r.models.bulletChart=function(){"use strict";var t=r.models.bullet(),e=r.models.tooltip(),n="left",i=!1,o={top:5,right:40,bottom:20,left:120},a=function(t){return t.ranges},s=function(t){return t.markers?t.markers:[0]},l=function(t){return t.measures},u=null,c=55,d=null,p=null,f=null,h=d3.dispatch("tooltipShow","tooltipHide");function m(e){return e.each(function(n,f){var h=d3.select(this);r.utils.initSVG(h);var g=r.utils.availableWidth(u,h,o),v=c-o.top-o.bottom;if(m.update=function(){m(e)},m.container=this,!n||!a.call(this,n,f))return r.utils.noData(m,h),m;h.selectAll(".nv-noData").remove();var b=a.call(this,n,f).slice().sort(d3.descending),y=s.call(this,n,f).slice().sort(d3.descending),w=l.call(this,n,f).slice().sort(d3.descending),k=h.selectAll("g.nv-wrap.nv-bulletChart").data([n]),_=k.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),x=k.select("g");_.append("g").attr("class","nv-bulletWrap"),_.append("g").attr("class","nv-titles"),k.attr("transform","translate("+o.left+","+o.top+")");var S=d3.scale.linear().domain([0,Math.max(b[0],y[0],w[0])]).range(i?[g,0]:[0,g]),$=this.__chart__||d3.scale.linear().domain([0,1/0]).range(S.range());this.__chart__=S;var T=_.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(c-o.top-o.bottom)/2+")");T.append("text").attr("class","nv-title").text(function(t){return t.title}),T.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),t.width(g).height(v);var C=x.select(".nv-bulletWrap");d3.transition(C).call(t);var E=d||S.tickFormat(g/100),A=x.selectAll("g.nv-tick").data(S.ticks(p||g/50),function(t){return this.textContent||E(t)}),D=A.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+$(t)+",0)"}).style("opacity",1e-6);D.append("line").attr("y1",v).attr("y2",7*v/6),D.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*v/6).text(E);var P=d3.transition(A).attr("transform",function(t){return"translate("+S(t)+",0)"}).style("opacity",1);P.select("line").attr("y1",v).attr("y2",7*v/6),P.select("text").attr("y",7*v/6),d3.transition(A.exit()).attr("transform",function(t){return"translate("+S(t)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush(),m}return e.duration(0).headerEnabled(!1),t.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.label,value:t.value,color:t.color},e.data(t).hidden(!1)}),t.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),t.dispatch.on("elementMousemove.tooltip",function(t){e.position({top:d3.event.pageY,left:d3.event.pageX})()}),m.bullet=t,m.dispatch=h,m.tooltip=e,m.options=r.utils.optionsFunc.bind(m),m._options=Object.create({},{ranges:{get:function(){return a},set:function(t){a=t}},markers:{get:function(){return s},set:function(t){s=t}},measures:{get:function(){return l},set:function(t){l=t}},width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},tickFormat:{get:function(){return d},set:function(t){d=t}},ticks:{get:function(){return p},set:function(t){p=t}},noData:{get:function(){return f},set:function(t){f=t}},tooltips:{get:function(){return e.enabled()},set:function(t){r.deprecated("tooltips","use chart.tooltip.enabled() instead"),e.enabled(!!t)}},tooltipContent:{get:function(){return e.contentGenerator()},set:function(t){r.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),e.contentGenerator(t)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},orient:{get:function(){return n},set:function(t){i="right"==(n=t)||"bottom"==n}}}),r.utils.inheritOptions(m,t),r.utils.initOptions(m),m},r.models.candlestickBar=function(){"use strict";var t,e,n,i,o,a={top:0,right:0,bottom:0,left:0},s=null,l=null,u=Math.floor(1e4*Math.random()),c=d3.scale.linear(),d=d3.scale.linear(),p=function(t){return t.x},f=function(t){return t.y},h=function(t){return t.open},m=function(t){return t.close},g=function(t){return t.high},v=function(t){return t.low},b=[],y=[],w=!1,k=!0,_=r.utils.defaultColor(),x=!1,S=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function $(_){return _.each(function(_){t=d3.select(this);var x=r.utils.availableWidth(s,t,a),$=r.utils.availableHeight(l,t,a);r.utils.initSVG(t);var T=x/_[0].values.length*.45;c.domain(e||d3.extent(_[0].values.map(p).concat(b))),c.range(w?i||[.5*x/_[0].values.length,x*(_[0].values.length-.5)/_[0].values.length]:i||[5+T/2,x-T/2-5]),d.domain(n||[d3.min(_[0].values.map(v).concat(y)),d3.max(_[0].values.map(g).concat(y))]).range(o||[$,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1]));var C=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([_[0].values]),E=C.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),A=E.append("defs"),D=E.append("g"),P=C.select("g");D.append("g").attr("class","nv-ticks"),C.attr("transform","translate("+a.left+","+a.top+")"),t.on("click",function(t,e){S.chartClick({data:t,index:e,pos:d3.event,id:u})}),A.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),C.select("#nv-chart-clip-path-"+u+" rect").attr("width",x).attr("height",$),P.attr("clip-path",k?"url(#nv-chart-clip-path-"+u+")":"");var O=C.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});O.exit().remove();var M=O.enter().append("g").attr("class",function(t,e,n){return(h(t,e)>m(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e});M.append("line").attr("class","nv-candlestick-lines").attr("transform",function(t,e){return"translate("+c(p(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return d(g(t,e))}).attr("x2",0).attr("y2",function(t,e){return d(v(t,e))}),M.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(t,e){return"translate("+(c(p(t,e))-T/2)+","+(d(f(t,e))-(h(t,e)>m(t,e)?d(m(t,e))-d(h(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",T).attr("height",function(t,e){var n=h(t,e),r=m(t,e);return n>r?d(r)-d(n):d(n)-d(r)}),t.selectAll(".nv-candlestick-lines").transition().attr("transform",function(t,e){return"translate("+c(p(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return d(g(t,e))}).attr("x2",0).attr("y2",function(t,e){return d(v(t,e))}),t.selectAll(".nv-candlestick-rects").transition().attr("transform",function(t,e){return"translate("+(c(p(t,e))-T/2)+","+(d(f(t,e))-(h(t,e)>m(t,e)?d(m(t,e))-d(h(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",T).attr("height",function(t,e){var n=h(t,e),r=m(t,e);return n>r?d(r)-d(n):d(n)-d(r)})}),$}return $.highlightPoint=function(e,n){$.clearHighlights(),t.select(".nv-candlestickBar .nv-tick-0-"+e).classed("hover",n)},$.clearHighlights=function(){t.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},$.dispatch=S,$.options=r.utils.optionsFunc.bind($),$._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceX:{get:function(){return b},set:function(t){b=t}},forceY:{get:function(){return y},set:function(t){y=t}},padData:{get:function(){return w},set:function(t){w=t}},clipEdge:{get:function(){return k},set:function(t){k=t}},id:{get:function(){return u},set:function(t){u=t}},interactive:{get:function(){return x},set:function(t){x=t}},x:{get:function(){return p},set:function(t){p=t}},y:{get:function(){return f},set:function(t){f=t}},open:{get:function(){return h()},set:function(t){h=t}},close:{get:function(){return m()},set:function(t){m=t}},high:{get:function(){return g},set:function(t){g=t}},low:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return a},set:function(t){a.top=null!=t.top?t.top:a.top,a.right=null!=t.right?t.right:a.right,a.bottom=null!=t.bottom?t.bottom:a.bottom,a.left=null!=t.left?t.left:a.left}},color:{get:function(){return _},set:function(t){_=r.utils.getColor(t)}}}),r.utils.initOptions($),$},r.models.cumulativeLineChart=function(){"use strict";var t,e,n=r.models.line(),i=r.models.axis(),o=r.models.axis(),a=r.models.legend(),s=r.models.legend(),l=r.interactiveGuideline(),u=r.models.tooltip(),c={top:30,right:30,bottom:50,left:60},d=r.utils.defaultColor(),p=null,f=null,h=!0,m=!0,g=!0,v=!1,b=!0,y=!1,w=!0,k=n.id(),_=r.utils.state(),x=null,S=null,$=function(t){return t.average},T=d3.dispatch("stateChange","changeState","renderEnd"),C=250,E=!1;_.index=0,_.rescaleY=w,i.orient("bottom").tickPadding(7),o.orient(v?"right":"left"),u.valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return i.tickFormat()(t,e)}),s.updateState(!1);var A=d3.scale.linear(),D={i:0,x:0},P=r.utils.renderWatch(T,C),O=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),index:D.i,rescaleY:w}}},M=function(t){return function(e){void 0!==e.index&&(D.i=e.index),void 0!==e.rescaleY&&(w=e.rescaleY),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function R(u){return P.reset(),P.models(n),m&&P.models(i),g&&P.models(o),u.each(function(u){var S=d3.select(this);r.utils.initSVG(S),S.classed("nv-chart-"+k,!0);var P,I=this,N=r.utils.availableWidth(p,S,c),F=r.utils.availableHeight(f,S,c);if(R.update=function(){0===C?S.call(R):S.transition().duration(C).call(R)},R.container=this,_.setter(M(u),R.update).getter(O(u)).update(),_.disabled=u.map(function(t){return!!t.disabled}),!x)for(P in x={},_)x[P]=_[P]instanceof Array?_[P].slice(0):_[P];var U=d3.behavior.drag().on("dragstart",function(t,e){d3.select(R.container).style("cursor","ew-resize")}).on("drag",function(t,e){D.x=d3.event.x,D.i=Math.round(A.invert(D.x)),J()}).on("dragend",function(t,e){d3.select(R.container).style("cursor","auto"),_.index=D.i,T.stateChange(_)});if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return r.utils.noData(R,S),R;if(S.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale(),w)n.yDomain(null);else{var L=u.filter(function(t){return!t.disabled}).map(function(t,e){var r=d3.extent(t.values,n.y());return r[0]<-.95&&(r[0]=-.95),[(r[0]-r[1])/(1+r[1]),(r[1]-r[0])/(1+r[0])]}),V=[d3.min(L,function(t){return t[0]}),d3.max(L,function(t){return t[1]})];n.yDomain(V)}A.domain([0,u[0].values.length-1]).range([0,N]).clamp(!0),u=function(t,e){return j||(j=n.y()),e.map(function(e,n){if(!e.values)return e;var r=e.values[t];if(null==r)return e;var i=j(r,t);return i<-.95&&!E?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map(function(t,e){return t.display={y:(j(t,e)-i)/(1+i)},t}),e)})}(D.i,u);var B=y?"none":"all",H=S.selectAll("g.nv-wrap.nv-cumulativeLine").data([u]),q=H.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),z=H.select("g");if(q.append("g").attr("class","nv-interactive"),q.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),q.append("g").attr("class","nv-y nv-axis"),q.append("g").attr("class","nv-background"),q.append("g").attr("class","nv-linesWrap").style("pointer-events",B),q.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),q.append("g").attr("class","nv-legendWrap"),q.append("g").attr("class","nv-controlsWrap"),h&&(a.width(N),z.select(".nv-legendWrap").datum(u).call(a),c.top!=a.height()&&(c.top=a.height(),F=r.utils.availableHeight(f,S,c)),z.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")),b){var G=[{key:"Re-scale y-axis",disabled:!w}];s.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),z.select(".nv-controlsWrap").datum(G).attr("transform","translate(0,"+-c.top+")").call(s)}H.attr("transform","translate("+c.left+","+c.top+")"),v&&z.select(".nv-y.nv-axis").attr("transform","translate("+N+",0)");var W=u.filter(function(t){return t.tempDisabled});H.select(".tempDisabled").remove(),W.length&&H.append("text").attr("class","tempDisabled").attr("x",N/2).attr("y","-.71em").style("text-anchor","end").text(W.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),y&&(l.width(N).height(F).margin({left:c.left,top:c.top}).svgContainer(S).xScale(t),H.select(".nv-interactive").call(l)),q.select(".nv-background").append("rect"),z.select(".nv-background rect").attr("width",N).attr("height",F),n.y(function(t){return t.display.y}).width(N).height(F).color(u.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!u[e].disabled&&!u[e].tempDisabled}));var Y=z.select(".nv-linesWrap").datum(u.filter(function(t){return!t.disabled&&!t.tempDisabled}));Y.call(n),u.forEach(function(t,e){t.seriesIndex=e});var K=u.filter(function(t){return!t.disabled&&!!$(t)}),Z=z.select(".nv-avgLinesWrap").selectAll("line").data(K,function(t){return t.key}),Q=function(t){var n=e($(t));return n<0?0:n>F?F:n};Z.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t,e){return n.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",N).attr("y1",Q).attr("y2",Q),Z.style("stroke-opacity",function(t){var n=e($(t));return n<0||n>F?0:1}).attr("x1",0).attr("x2",N).attr("y1",Q).attr("y2",Q),Z.exit().remove();var X=Y.selectAll(".nv-indexLine").data([D]);function J(){X.data([D]);var t=R.duration();R.duration(0),R.update(),R.duration(t)}X.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(U),X.attr("transform",function(t){return"translate("+A(t.i)+",0)"}).attr("height",F),m&&(i.scale(t)._ticks(r.utils.calcTicksX(N/70,u)).tickSize(-F,0),z.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),z.select(".nv-x.nv-axis").call(i)),g&&(o.scale(e)._ticks(r.utils.calcTicksY(F/36,u)).tickSize(-N,0),z.select(".nv-y.nv-axis").call(o)),z.select(".nv-background rect").on("click",function(){D.x=d3.mouse(this)[0],D.i=Math.round(A.invert(D.x)),_.index=D.i,T.stateChange(_),J()}),n.dispatch.on("elementClick",function(t){D.i=t.pointIndex,D.x=A(D.i),_.index=D.i,T.stateChange(_),J()}),s.dispatch.on("legendClick",function(t,e){t.disabled=!t.disabled,_.rescaleY=w=!t.disabled,T.stateChange(_),R.update()}),a.dispatch.on("stateChange",function(t){for(var e in t)_[e]=t[e];T.stateChange(_),R.update()}),l.dispatch.on("elementMousemove",function(t){n.clearHighlights();var e,a,s,p=[];if(u.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(i,o){a=r.interactiveBisect(i.values,t.pointXValue,R.x()),n.highlightPoint(o,a,!0);var l=i.values[a];void 0!==l&&(void 0===e&&(e=l),void 0===s&&(s=R.xScale()(R.x()(l,a))),p.push({key:i.key,value:R.y()(l,a),color:d(i,i.seriesIndex)}))}),p.length>2){var f=R.yScale().invert(t.mouseY),h=.03*Math.abs(R.yScale().domain()[0]-R.yScale().domain()[1]),m=r.nearestValueIndex(p.map(function(t){return t.value}),f,h);null!==m&&(p[m].highlight=!0)}var g=i.tickFormat()(R.x()(e,a),a);l.tooltip.position({left:s+c.left,top:t.mouseY+c.top}).chartContainer(I.parentNode).valueFormatter(function(t,e){return o.tickFormat()(t)}).data({value:g,series:p})(),l.renderGuideLine(s)}),l.dispatch.on("elementMouseout",function(t){n.clearHighlights()}),T.on("changeState",function(t){void 0!==t.disabled&&(u.forEach(function(e,n){e.disabled=t.disabled[n]}),_.disabled=t.disabled),void 0!==t.index&&(D.i=t.index,D.x=A(D.i),_.index=t.index,X.data([D])),void 0!==t.rescaleY&&(w=t.rescaleY),R.update()})}),P.renderEnd("cumulativeLineChart immediate"),R}n.dispatch.on("elementMouseover.tooltip",function(t){var e={x:R.x()(t.point),y:R.y()(t.point),color:t.point.color};t.point=e,u.data(t).position(t.pos).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(t){u.hidden(!0)});var j=null;return R.dispatch=T,R.lines=n,R.legend=a,R.controls=s,R.xAxis=i,R.yAxis=o,R.interactiveLayer=l,R.state=_,R.tooltip=u,R.options=r.utils.optionsFunc.bind(R),R._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return f},set:function(t){f=t}},rescaleY:{get:function(){return w},set:function(t){w=t}},showControls:{get:function(){return b},set:function(t){b=t}},showLegend:{get:function(){return h},set:function(t){h=t}},average:{get:function(){return $},set:function(t){$=t}},defaultState:{get:function(){return x},set:function(t){x=t}},noData:{get:function(){return S},set:function(t){S=t}},showXAxis:{get:function(){return m},set:function(t){m=t}},showYAxis:{get:function(){return g},set:function(t){g=t}},noErrorCheck:{get:function(){return E},set:function(t){E=t}},tooltips:{get:function(){return u.enabled()},set:function(t){r.deprecated("tooltips","use chart.tooltip.enabled() instead"),u.enabled(!!t)}},tooltipContent:{get:function(){return u.contentGenerator()},set:function(t){r.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),u.contentGenerator(t)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return d},set:function(t){d=r.utils.getColor(t),a.color(d)}},useInteractiveGuideline:{get:function(){return y},set:function(t){y=t,!0===t&&(R.interactive(!1),R.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return v},set:function(t){v=t,o.orient(t?"right":"left")}},duration:{get:function(){return C},set:function(t){n.duration(C=t),i.duration(C),o.duration(C),P.reset(C)}}}),r.utils.inheritOptions(R,n),r.utils.initOptions(R),R},r.models.discreteBar=function(){"use strict";var t,e,n,i,o,a,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,d=Math.floor(1e4*Math.random()),p=d3.scale.ordinal(),f=d3.scale.linear(),h=function(t){return t.x},m=function(t){return t.y},g=[0],v=r.utils.defaultColor(),b=!1,y=d3.format(",.2f"),w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),k="discreteBar",_=250,x=r.utils.renderWatch(w,_);function S(d){return x.reset(),d.each(function(d){var _=u-l.left-l.right,S=c-l.top-l.bottom;t=d3.select(this),r.utils.initSVG(t),d.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var $=e&&n?[]:d.map(function(t){return t.values.map(function(t,e){return{x:h(t,e),y:m(t,e),y0:t.y0}})});p.domain(e||d3.merge($).map(function(t){return t.x})).rangeBands(i||[0,_],.1),f.domain(n||d3.extent(d3.merge($).map(function(t){return t.y}).concat(g))),f.range(b?o||[S-(f.domain()[0]<0?12:0),f.domain()[1]>0?12:0]:o||[S,0]),a=a||p,s=s||f.copy().range([f(0),f(0)]);var T=t.selectAll("g.nv-wrap.nv-discretebar").data([d]),C=T.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");T.select("g"),C.append("g").attr("class","nv-groups"),T.attr("transform","translate("+l.left+","+l.top+")");var E=T.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});E.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),E.exit().watchTransition(x,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),E.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),E.watchTransition(x,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var A=E.selectAll("g.nv-bar").data(function(t){return t.values});A.exit().remove();var D=A.enter().append("g").attr("transform",function(t,e,n){return"translate("+(p(h(t,e))+.05*p.rangeBand())+", "+f(0)+")"}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),w.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),w.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){w.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){w.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,e){w.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});D.append("rect").attr("height",0).attr("width",.9*p.rangeBand()/d.length),b?(D.append("text").attr("text-anchor","middle"),A.select("text").text(function(t,e){return y(m(t,e))}).watchTransition(x,"discreteBar: bars text").attr("x",.9*p.rangeBand()/2).attr("y",function(t,e){return m(t,e)<0?f(m(t,e))-f(0)+12:-4})):A.selectAll("text").remove(),A.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||v(t,e)}).style("stroke",function(t,e){return t.color||v(t,e)}).select("rect").attr("class",k).watchTransition(x,"discreteBar: bars rect").attr("width",.9*p.rangeBand()/d.length),A.watchTransition(x,"discreteBar: bars").attr("transform",function(t,e){return"translate("+(p(h(t,e))+.05*p.rangeBand())+", "+(m(t,e)<0?f(0):f(0)-f(m(t,e))<1?f(0)-1:f(m(t,e)))+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(f(m(t,e))-f(n&&n[0]||0))||1)}),a=p.copy(),s=f.copy()}),x.renderEnd("discreteBar immediate"),S}return S.dispatch=w,S.options=r.utils.optionsFunc.bind(S),S._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},forceY:{get:function(){return g},set:function(t){g=t}},showValues:{get:function(){return b},set:function(t){b=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return m},set:function(t){m=t}},xScale:{get:function(){return p},set:function(t){p=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},valueFormat:{get:function(){return y},set:function(t){y=t}},id:{get:function(){return d},set:function(t){d=t}},rectClass:{get:function(){return k},set:function(t){k=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},color:{get:function(){return v},set:function(t){v=r.utils.getColor(t)}},duration:{get:function(){return _},set:function(t){x.reset(_=t)}}}),r.utils.initOptions(S),S},r.models.discreteBarChart=function(){"use strict";var t,e,n=r.models.discreteBar(),i=r.models.axis(),o=r.models.axis(),a=r.models.tooltip(),s={top:15,right:10,bottom:50,left:60},l=null,u=null,c=r.utils.getColor(),d=!0,p=!0,f=!1,h=!1,m=null,g=d3.dispatch("beforeUpdate","renderEnd"),v=250;i.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),o.orient(f?"right":"left").tickFormat(d3.format(",.1f")),a.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return o.tickFormat()(t,e)}).keyFormatter(function(t,e){return i.tickFormat()(t,e)});var b=r.utils.renderWatch(g,v);function y(a){return b.reset(),b.models(n),d&&b.models(i),p&&b.models(o),a.each(function(a){var c=d3.select(this);r.utils.initSVG(c);var m=r.utils.availableWidth(l,c,s),b=r.utils.availableHeight(u,c,s);if(y.update=function(){g.beforeUpdate(),c.transition().duration(v).call(y)},y.container=this,!(a&&a.length&&a.filter(function(t){return t.values.length}).length))return r.utils.noData(y,c),y;c.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale().clamp(!0);var w=c.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([a]),k=w.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),_=k.append("defs"),x=w.select("g");if(k.append("g").attr("class","nv-x nv-axis"),k.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),k.append("g").attr("class","nv-barsWrap"),x.attr("transform","translate("+s.left+","+s.top+")"),f&&x.select(".nv-y.nv-axis").attr("transform","translate("+m+",0)"),n.width(m).height(b),x.select(".nv-barsWrap").datum(a.filter(function(t){return!t.disabled})).transition().call(n),_.append("clipPath").attr("id","nv-x-label-clip-"+n.id()).append("rect"),x.select("#nv-x-label-clip-"+n.id()+" rect").attr("width",t.rangeBand()*(h?2:1)).attr("height",16).attr("x",-t.rangeBand()/(h?1:2)),d){i.scale(t)._ticks(r.utils.calcTicksX(m/100,a)).tickSize(-b,0),x.select(".nv-x.nv-axis").attr("transform","translate(0,"+(e.range()[0]+(n.showValues()&&e.domain()[0]<0?16:0))+")"),x.select(".nv-x.nv-axis").call(i);var S=x.select(".nv-x.nv-axis").selectAll("g");h&&S.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}p&&(o.scale(e)._ticks(r.utils.calcTicksY(b/36,a)).tickSize(-m,0),x.select(".nv-y.nv-axis").call(o)),x.select(".nv-zeroLine line").attr("x1",0).attr("x2",m).attr("y1",e(0)).attr("y2",e(0))}),b.renderEnd("discreteBar chart immediate"),y}return n.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:y.x()(t.data),value:y.y()(t.data),color:t.color},a.data(t).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(t){a.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(t){a.position({top:d3.event.pageY,left:d3.event.pageX})()}),y.dispatch=g,y.discretebar=n,y.xAxis=i,y.yAxis=o,y.tooltip=a,y.options=r.utils.optionsFunc.bind(y),y._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return u},set:function(t){u=t}},staggerLabels:{get:function(){return h},set:function(t){h=t}},showXAxis:{get:function(){return d},set:function(t){d=t}},showYAxis:{get:function(){return p},set:function(t){p=t}},noData:{get:function(){return m},set:function(t){m=t}},tooltips:{get:function(){return a.enabled()},set:function(t){r.deprecated("tooltips","use chart.tooltip.enabled() instead"),a.enabled(!!t)}},tooltipContent:{get:function(){return a.contentGenerator()},set:function(t){r.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),a.contentGenerator(t)}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},duration:{get:function(){return v},set:function(t){b.reset(v=t),n.duration(v),i.duration(v),o.duration(v)}},color:{get:function(){return c},set:function(t){c=r.utils.getColor(t),n.color(c)}},rightAlignYAxis:{get:function(){return f},set:function(t){f=t,o.orient(t?"right":"left")}}}),r.utils.inheritOptions(y,n),r.utils.initOptions(y),y},r.models.distribution=function(){"use strict";var t,e={top:0,right:0,bottom:0,left:0},n=400,i=8,o="x",a=function(t){return t[o]},s=r.utils.defaultColor(),l=d3.scale.linear(),u=250,c=d3.dispatch("renderEnd"),d=r.utils.renderWatch(c,u);function p(n){return d.reset(),n.each(function(n){var u="x"==o?"y":"x",c=d3.select(this);r.utils.initSVG(c),t=t||l;var p=c.selectAll("g.nv-distribution").data([n]),f=(p.enter().append("g").attr("class","nvd3 nv-distribution").append("g"),p.select("g"));p.attr("transform","translate("+e.left+","+e.top+")");var h=f.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});h.enter().append("g"),h.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return s(t,e)});var m=h.selectAll("line.nv-dist"+o).data(function(t){return t.values});m.enter().append("line").attr(o+"1",function(e,n){return t(a(e,n))}).attr(o+"2",function(e,n){return t(a(e,n))}),d.transition(h.exit().selectAll("line.nv-dist"+o),"dist exit").attr(o+"1",function(t,e){return l(a(t,e))}).attr(o+"2",function(t,e){return l(a(t,e))}).style("stroke-opacity",0).remove(),m.attr("class",function(t,e){return"nv-dist"+o+" nv-dist"+o+"-"+e}).attr(u+"1",0).attr(u+"2",i),d.transition(m,"dist").attr(o+"1",function(t,e){return l(a(t,e))}).attr(o+"2",function(t,e){return l(a(t,e))}),t=l.copy()}),d.renderEnd("distribution immediate"),p}return p.options=r.utils.optionsFunc.bind(p),p.dispatch=c,p.margin=function(t){return arguments.length?(e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left,p):e},p.width=function(t){return arguments.length?(n=t,p):n},p.axis=function(t){return arguments.length?(o=t,p):o},p.size=function(t){return arguments.length?(i=t,p):i},p.getData=function(t){return arguments.length?(a=d3.functor(t),p):a},p.scale=function(t){return arguments.length?(l=t,p):l},p.color=function(t){return arguments.length?(s=r.utils.getColor(t),p):s},p.duration=function(t){return arguments.length?(d.reset(u=t),p):u},p},r.models.furiousLegend=function(){"use strict";var t={top:5,right:0,bottom:5,left:0},e=400,n=20,i=function(t){return t.key},o=r.utils.getColor(),a=!0,s=28,l=!0,u=!0,c=!1,d=!1,p=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),f="classic";function h(m){function g(t,e){return"furious"!=f?"#000":d?t.disengaged?o(t,e):"#fff":d?void 0:t.disabled?o(t,e):"#fff"}function v(t,e){return d&&"furious"==f?t.disengaged?"#fff":o(t,e):t.disabled?"#fff":o(t,e)}return m.each(function(h){var m=e-t.left-t.right,b=d3.select(this);r.utils.initSVG(b);var y=b.selectAll("g.nv-legend").data([h]),w=(y.enter().append("g").attr("class","nvd3 nv-legend").append("g"),y.select("g"));y.attr("transform","translate("+t.left+","+t.top+")");var k,_=w.selectAll(".nv-series").data(function(t){return"furious"!=f?t:t.filter(function(t){return!!d||!t.disengaged})}),x=_.enter().append("g").attr("class","nv-series");"classic"==f?(x.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),k=_.select("circle")):"furious"==f&&(x.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),k=_.select("rect"),x.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),_.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",g(t,e))})),x.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var S,$=_.select("text.nv-legend-text");switch(_.on("mouseover",function(t,e){p.legendMouseover(t,e)}).on("mouseout",function(t,e){p.legendMouseout(t,e)}).on("click",function(t,e){p.legendClick(t,e);var n=_.data();u&&("classic"==f?c?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1})):"furious"==f&&(d?(t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled):d||(t.disabled=!t.disabled,t.userDisabled=t.disabled,n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1}))),p.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})}))}).on("dblclick",function(t,e){if(("furious"!=f||!d)&&(p.legendDblclick(t,e),u)){var n=_.data();n.forEach(function(t){t.disabled=!0,"furious"==f&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==f&&(t.userDisabled=t.disabled),p.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),_.classed("nv-disabled",function(t){return t.userDisabled}),_.exit().remove(),$.attr("fill",g).text(i),f){case"furious":S=23;break;case"classic":S=20}if(a){var T=[];_.each(function(t,e){var n,i=d3.select(this).select("text");try{if((n=i.node().getComputedTextLength())<=0)throw Error()}catch(o){n=r.utils.calcApproxTextWidth(i)}T.push(n+s)});for(var C=0,E=0,A=[];E<m&&C<T.length;)A[C]=T[C],E+=T[C++];for(0===C&&(C=1);E>m&&C>1;){A=[],C--;for(var D=0;D<T.length;D++)T[D]>(A[D%C]||0)&&(A[D%C]=T[D]);E=A.reduce(function(t,e,n,r){return t+e})}for(var P=[],O=0,M=0;O<C;O++)P[O]=M,M+=A[O];_.attr("transform",function(t,e){return"translate("+P[e%C]+","+(5+Math.floor(e/C)*S)+")"}),w.attr("transform",l?"translate("+(e-t.right-E)+","+t.top+")":"translate(0,"+t.top+")"),n=t.top+t.bottom+Math.ceil(T.length/C)*S}else{var R,j=5,I=5,N=0;_.attr("transform",function(n,r){var i=d3.select(this).select("text").node().getComputedTextLength()+s;return e<t.left+t.right+(R=I)+i&&(I=R=5,j+=S),(I+=i)>N&&(N=I),"translate("+R+","+j+")"}),w.attr("transform","translate("+(e-t.right-N)+","+t.top+")"),n=t.top+t.bottom+j+15}"furious"==f&&k.attr("width",function(t,e){return $[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),k.style("fill",v).style("stroke",function(t,e){return t.color||o(t,e)})}),h}return h.dispatch=p,h.options=r.utils.optionsFunc.bind(h),h._options=Object.create({},{width:{get:function(){return e},set:function(t){e=t}},height:{get:function(){return n},set:function(t){n=t}},key:{get:function(){return i},set:function(t){i=t}},align:{get:function(){return a},set:function(t){a=t}},rightAlign:{get:function(){return l},set:function(t){l=t}},padding:{get:function(){return s},set:function(t){s=t}},updateState:{get:function(){return u},set:function(t){u=t}},radioButtonMode:{get:function(){return c},set:function(t){c=t}},expanded:{get:function(){return d},set:function(t){d=t}},vers:{get:function(){return f},set:function(t){f=t}},margin:{get:function(){return t},set:function(e){t.top=void 0!==e.top?e.top:t.top,t.right=void 0!==e.right?e.right:t.right,t.bottom=void 0!==e.bottom?e.bottom:t.bottom,t.left=void 0!==e.left?e.left:t.left}},color:{get:function(){return o},set:function(t){o=r.utils.getColor(t)}}}),r.utils.initOptions(h),h},r.models.historicalBar=function(){"use strict";var t,e,n,i,o={top:0,right:0,bottom:0,left:0},a=null,s=null,l=Math.floor(1e4*Math.random()),u=null,c=d3.scale.linear(),d=d3.scale.linear(),p=function(t){return t.x},f=function(t){return t.y},h=[],m=[0],g=!1,v=!0,b=r.utils.defaultColor(),y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),w=!0,k=r.utils.renderWatch(y,0);function _(x){return x.each(function(_){k.reset(),u=d3.select(this);var x=r.utils.availableWidth(a,u,o),S=r.utils.availableHeight(s,u,o);r.utils.initSVG(u),c.domain(t||d3.extent(_[0].values.map(p).concat(h))),c.range(g?n||[.5*x/_[0].values.length,x*(_[0].values.length-.5)/_[0].values.length]:n||[0,x]),d.domain(e||d3.extent(_[0].values.map(f).concat(m))).range(i||[S,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1]));var $=u.selectAll("g.nv-wrap.nv-historicalBar-"+l).data([_[0].values]),T=$.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+l),C=T.append("defs"),E=T.append("g"),A=$.select("g");E.append("g").attr("class","nv-bars"),$.attr("transform","translate("+o.left+","+o.top+")"),u.on("click",function(t,e){y.chartClick({data:t,index:e,pos:d3.event,id:l})}),C.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect"),$.select("#nv-chart-clip-path-"+l+" rect").attr("width",x).attr("height",S),A.attr("clip-path",v?"url(#nv-chart-clip-path-"+l+")":"");var D=$.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return p(t,e)});D.exit().remove(),D.enter().append("rect").attr("x",0).attr("y",function(t,e){return r.utils.NaNtoZero(d(Math.max(0,f(t,e))))}).attr("height",function(t,e){return r.utils.NaNtoZero(Math.abs(d(f(t,e))-d(0)))}).attr("transform",function(t,e){return"translate("+(c(p(t,e))-x/_[0].values.length*.45)+",0)"}).on("mouseover",function(t,e){w&&(d3.select(this).classed("hover",!0),y.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mouseout",function(t,e){w&&(d3.select(this).classed("hover",!1),y.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mousemove",function(t,e){w&&y.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){w&&(y.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(t,e){w&&(y.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}),D.attr("fill",function(t,e){return b(t,e)}).attr("class",function(t,e,n){return(f(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).watchTransition(k,"bars").attr("transform",function(t,e){return"translate("+(c(p(t,e))-x/_[0].values.length*.45)+",0)"}).attr("width",x/_[0].values.length*.9),D.watchTransition(k,"bars").attr("y",function(t,e){var n=f(t,e)<0?d(0):d(0)-d(f(t,e))<1?d(0)-1:d(f(t,e));return r.utils.NaNtoZero(n)}).attr("height",function(t,e){return r.utils.NaNtoZero(Math.max(Math.abs(d(f(t,e))-d(0)),1))})}),k.renderEnd("historicalBar immediate"),_}return _.highlightPoint=function(t,e){u.select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},_.clearHighlights=function(){u.select(".nv-bars .nv-bar.hover").classed("hover",!1)},_.dispatch=y,_.options=r.utils.optionsFunc.bind(_),_._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},forceX:{get:function(){return h},set:function(t){h=t}},forceY:{get:function(){return m},set:function(t){m=t}},padData:{get:function(){return g},set:function(t){g=t}},x:{get:function(){return p},set:function(t){p=t}},y:{get:function(){return f},set:function(t){f=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return t},set:function(e){t=e}},yDomain:{get:function(){return e},set:function(t){e=t}},xRange:{get:function(){return n},set:function(t){n=t}},yRange:{get:function(){return i},set:function(t){i=t}},clipEdge:{get:function(){return v},set:function(t){v=t}},id:{get:function(){return l},set:function(t){l=t}},interactive:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return b},set:function(t){b=r.utils.getColor(t)}}}),r.utils.initOptions(_),_},r.models.historicalBarChart=function(t){"use strict";var e,n,i=t||r.models.historicalBar(),o=r.models.axis(),a=r.models.axis(),s=r.models.legend(),l=r.interactiveGuideline(),u=r.models.tooltip(),c={top:30,right:90,bottom:50,left:90},d=r.utils.defaultColor(),p=null,f=null,h=!1,m=!0,g=!0,v=!1,b=!1,y={},w=null,k=null,_=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),x=250;o.orient("bottom").tickPadding(7),a.orient(v?"right":"left"),u.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return a.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)});var S=r.utils.renderWatch(_,0);function $(t){return t.each(function(u){S.reset(),S.models(i),m&&S.models(o),g&&S.models(a);var k=d3.select(this),T=this;r.utils.initSVG(k);var C,E=r.utils.availableWidth(p,k,c),A=r.utils.availableHeight(f,k,c);if($.update=function(){k.transition().duration(x).call($)},$.container=this,y.disabled=u.map(function(t){return!!t.disabled}),!w)for(C in w={},y)w[C]=y[C]instanceof Array?y[C].slice(0):y[C];if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return r.utils.noData($,k),$;k.selectAll(".nv-noData").remove(),e=i.xScale(),n=i.yScale();var D=k.selectAll("g.nv-wrap.nv-historicalBarChart").data([u]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),O=D.select("g");P.append("g").attr("class","nv-x nv-axis"),P.append("g").attr("class","nv-y nv-axis"),P.append("g").attr("class","nv-barsWrap"),P.append("g").attr("class","nv-legendWrap"),P.append("g").attr("class","nv-interactive"),h&&(s.width(E),O.select(".nv-legendWrap").datum(u).call(s),c.top!=s.height()&&(c.top=s.height(),A=r.utils.availableHeight(f,k,c)),D.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")),D.attr("transform","translate("+c.left+","+c.top+")"),v&&O.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)"),b&&(l.width(E).height(A).margin({left:c.left,top:c.top}).svgContainer(k).xScale(e),D.select(".nv-interactive").call(l)),i.width(E).height(A).color(u.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!u[e].disabled})),O.select(".nv-barsWrap").datum(u.filter(function(t){return!t.disabled})).transition().call(i),m&&(o.scale(e)._ticks(r.utils.calcTicksX(E/100,u)).tickSize(-A,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),O.select(".nv-x.nv-axis").transition().call(o)),g&&(a.scale(n)._ticks(r.utils.calcTicksY(A/36,u)).tickSize(-E,0),O.select(".nv-y.nv-axis").transition().call(a)),l.dispatch.on("elementMousemove",function(t){i.clearHighlights();var e,n,s,p=[];u.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(o,a){n=r.interactiveBisect(o.values,t.pointXValue,$.x()),i.highlightPoint(n,!0);var l=o.values[n];void 0!==l&&(void 0===e&&(e=l),void 0===s&&(s=$.xScale()($.x()(l,n))),p.push({key:o.key,value:$.y()(l,n),color:d(o,o.seriesIndex),data:o.values[n]}))});var f=o.tickFormat()($.x()(e,n));l.tooltip.position({left:s+c.left,top:t.mouseY+c.top}).chartContainer(T.parentNode).valueFormatter(function(t,e){return a.tickFormat()(t)}).data({value:f,index:n,series:p})(),l.renderGuideLine(s)}),l.dispatch.on("elementMouseout",function(t){_.tooltipHide(),i.clearHighlights()}),s.dispatch.on("legendClick",function(e,n){e.disabled=!e.disabled,u.filter(function(t){return!t.disabled}).length||u.map(function(t){return t.disabled=!1,D.selectAll(".nv-series").classed("disabled",!1),t}),y.disabled=u.map(function(t){return!!t.disabled}),_.stateChange(y),t.transition().call($)}),s.dispatch.on("legendDblclick",function(t){u.forEach(function(t){t.disabled=!0}),t.disabled=!1,y.disabled=u.map(function(t){return!!t.disabled}),_.stateChange(y),$.update()}),_.on("changeState",function(t){void 0!==t.disabled&&(u.forEach(function(e,n){e.disabled=t.disabled[n]}),y.disabled=t.disabled),$.update()})}),S.renderEnd("historicalBarChart immediate"),$}return i.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:$.x()(t.data),value:$.y()(t.data),color:t.color},u.data(t).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){u.hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(t){u.position({top:d3.event.pageY,left:d3.event.pageX})()}),$.dispatch=_,$.bars=i,$.legend=s,$.xAxis=o,$.yAxis=a,$.interactiveLayer=l,$.tooltip=u,$.options=r.utils.optionsFunc.bind($),$._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return f},set:function(t){f=t}},showLegend:{get:function(){return h},set:function(t){h=t}},showXAxis:{get:function(){return m},set:function(t){m=t}},showYAxis:{get:function(){return g},set:function(t){g=t}},defaultState:{get:function(){return w},set:function(t){w=t}},noData:{get:function(){return k},set:function(t){k=t}},tooltips:{get:function(){return u.enabled()},set:function(t){r.deprecated("tooltips","use chart.tooltip.enabled() instead"),u.enabled(!!t)}},tooltipContent:{get:function(){return u.contentGenerator()},set:function(t){r.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),u.contentGenerator(t)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return d},set:function(t){d=r.utils.getColor(t),s.color(d),i.color(d)}},duration:{get:function(){return x},set:function(t){S.reset(x=t),a.duration(x),o.duration(x)}},rightAlignYAxis:{get:function(){return v},set:function(t){v=t,a.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return b},set:function(t){b=t,!0===t&&$.interactive(!1)}}}),r.utils.inheritOptions($,i),r.utils.initOptions($),$},r.models.ohlcBarChart=function(){var t=r.models.historicalBarChart(r.models.ohlcBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator(function(e){var n=e.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+e.value+"</h3><table><tr><td>open:</td><td>"+t.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+t.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+t.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+t.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),t},r.models.candlestickBarChart=function(){var t=r.models.historicalBarChart(r.models.candlestickBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator(function(e){var n=e.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+e.value+"</h3><table><tr><td>open:</td><td>"+t.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+t.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+t.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+t.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),t},r.models.legend=function(){"use strict";var t={top:5,right:0,bottom:5,left:0},e=400,n=20,i=function(t){return t.key},o=r.utils.getColor(),a=!0,s=32,l=!0,u=!0,c=!1,d=!1,p=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),f="classic";function h(m){function g(t,e){return"furious"!=f?"#000":d?t.disengaged?"#000":"#fff":d?void 0:(t.color||(t.color=o(t,e)),t.disabled?t.color:"#fff")}function v(t,e){return d&&"furious"==f&&t.disengaged?"#eee":t.color||o(t,e)}function b(t,e){return d&&"furious"==f?1:t.disabled?0:1}return m.each(function(o){var h=e-t.left-t.right,m=d3.select(this);r.utils.initSVG(m);var y=m.selectAll("g.nv-legend").data([o]),w=y.enter().append("g").attr("class","nvd3 nv-legend").append("g"),k=y.select("g");y.attr("transform","translate("+t.left+","+t.top+")");var _,x,S=k.selectAll(".nv-series").data(function(t){return"furious"!=f?t:t.filter(function(t){return!!d||!t.disengaged})}),$=S.enter().append("g").attr("class","nv-series");switch(f){case"furious":x=23;break;case"classic":x=20}"classic"==f?($.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),_=S.select("circle")):"furious"==f&&($.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),_=S.select(".nv-legend-symbol"),$.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),S.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",g(t,e))})),$.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var T=S.select("text.nv-legend-text");S.on("mouseover",function(t,e){p.legendMouseover(t,e)}).on("mouseout",function(t,e){p.legendMouseout(t,e)}).on("click",function(t,e){p.legendClick(t,e);var n=S.data();u&&("classic"==f?c?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1})):"furious"==f&&(d?(t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled):d||(t.disabled=!t.disabled,t.userDisabled=t.disabled,n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1}))),p.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})}))}).on("dblclick",function(t,e){if(("furious"!=f||!d)&&(p.legendDblclick(t,e),u)){var n=S.data();n.forEach(function(t){t.disabled=!0,"furious"==f&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==f&&(t.userDisabled=t.disabled),p.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),S.classed("nv-disabled",function(t){return t.userDisabled}),S.exit().remove(),T.attr("fill",g).text(i);var C=0;if(a){var E=[];S.each(function(t,e){var n,i=d3.select(this).select("text");try{if((n=i.node().getComputedTextLength())<=0)throw Error()}catch(o){n=r.utils.calcApproxTextWidth(i)}E.push(n+s)});var A=0,D=[];for(C=0;C<h&&A<E.length;)D[A]=E[A],C+=E[A++];for(0===A&&(A=1);C>h&&A>1;){D=[],A--;for(var P=0;P<E.length;P++)E[P]>(D[P%A]||0)&&(D[P%A]=E[P]);C=D.reduce(function(t,e,n,r){return t+e})}for(var O=[],M=0,R=0;M<A;M++)O[M]=R,R+=D[M];S.attr("transform",function(t,e){return"translate("+O[e%A]+","+(5+Math.floor(e/A)*x)+")"}),k.attr("transform",l?"translate("+(e-t.right-C)+","+t.top+")":"translate(0,"+t.top+")"),n=t.top+t.bottom+Math.ceil(E.length/A)*x}else{var j,I=5,N=5,F=0;S.attr("transform",function(n,r){var i=d3.select(this).select("text").node().getComputedTextLength()+s;return e<t.left+t.right+(j=N)+i&&(N=j=5,I+=x),(N+=i)>F&&(F=N),C<j+F&&(C=j+F),"translate("+j+","+I+")"}),k.attr("transform","translate("+(e-t.right-F)+","+t.top+")"),n=t.top+t.bottom+I+15}"furious"==f&&(_.attr("width",function(t,e){return T[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),w.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),k.select(".nv-legend-bg").transition().duration(300).attr("x",-x).attr("width",C+x-12).attr("height",n+10).attr("y",-t.top-10).attr("opacity",d?1:0)),_.style("fill",v).style("fill-opacity",b).style("stroke",v)}),h}return h.dispatch=p,h.options=r.utils.optionsFunc.bind(h),h._options=Object.create({},{width:{get:function(){return e},set:function(t){e=t}},height:{get:function(){return n},set:function(t){n=t}},key:{get:function(){return i},set:function(t){i=t}},align:{get:function(){return a},set:function(t){a=t}},rightAlign:{get:function(){return l},set:function(t){l=t}},padding:{get:function(){return s},set:function(t){s=t}},updateState:{get:function(){return u},set:function(t){u=t}},radioButtonMode:{get:function(){return c},set:function(t){c=t}},expanded:{get:function(){return d},set:function(t){d=t}},vers:{get:function(){return f},set:function(t){f=t}},margin:{get:function(){return t},set:function(e){t.top=void 0!==e.top?e.top:t.top,t.right=void 0!==e.right?e.right:t.right,t.bottom=void 0!==e.bottom?e.bottom:t.bottom,t.left=void 0!==e.left?e.left:t.left}},color:{get:function(){return o},set:function(t){o=r.utils.getColor(t)}}}),r.utils.initOptions(h),h},r.models.line=function(){"use strict";var t,e,n=r.models.scatter(),i={top:0,right:0,bottom:0,left:0},o=960,a=500,s=null,l=1.5,u=r.utils.defaultColor(),c=function(t){return t.x},d=function(t){return t.y},p=function(t,e){return!isNaN(d(t,e))&&null!==d(t,e)},f=function(t){return t.area},h=!1,m="linear",g=250,v=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");n.pointSize(16).pointDomain([16,256]);var b,y,w=r.utils.renderWatch(v,g);function k(g){return w.reset(),w.models(n),g.each(function(g){s=d3.select(this);var v=r.utils.availableWidth(o,s,i),k=r.utils.availableHeight(a,s,i);r.utils.initSVG(s),t=n.xScale(),e=n.yScale(),b=b||t,y=y||e;var _=s.selectAll("g.nv-wrap.nv-line").data([g]),x=_.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),S=x.append("defs"),$=x.append("g"),T=_.select("g");$.append("g").attr("class","nv-groups"),$.append("g").attr("class","nv-scatterWrap"),_.attr("transform","translate("+i.left+","+i.top+")"),n.width(v).height(k);var C=_.select(".nv-scatterWrap");C.call(n),S.append("clipPath").attr("id","nv-edge-clip-"+n.id()).append("rect"),_.select("#nv-edge-clip-"+n.id()+" rect").attr("width",v).attr("height",k>0?k:0),T.attr("clip-path",h?"url(#nv-edge-clip-"+n.id()+")":""),C.attr("clip-path",h?"url(#nv-edge-clip-"+n.id()+")":"");var E=_.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});E.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",function(t){return t.strokeWidth||l}).style("fill-opacity",1e-6),E.exit().remove(),E.attr("class",function(t,e){return(t.classed||"")+" nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return u(t,e)}).style("stroke",function(t,e){return u(t,e)}),E.watchTransition(w,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(t){return t.fillOpacity||.5});var A=E.selectAll("path.nv-area").data(function(t){return f(t)?[t]:[]});A.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(m).defined(p).x(function(t,e){return r.utils.NaNtoZero(b(c(t,e)))}).y0(function(t,e){return r.utils.NaNtoZero(y(d(t,e)))}).y1(function(t,n){return y(e.domain()[0]<=0?e.domain()[1]>=0?0:e.domain()[1]:e.domain()[0])}).apply(this,[t.values])}),E.exit().selectAll("path.nv-area").remove(),A.watchTransition(w,"line: areaPaths").attr("d",function(n){return d3.svg.area().interpolate(m).defined(p).x(function(e,n){return r.utils.NaNtoZero(t(c(e,n)))}).y0(function(t,n){return r.utils.NaNtoZero(e(d(t,n)))}).y1(function(t,n){return e(e.domain()[0]<=0?e.domain()[1]>=0?0:e.domain()[1]:e.domain()[0])}).apply(this,[n.values])});var D=E.selectAll("path.nv-line").data(function(t){return[t.values]});D.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(m).defined(p).x(function(t,e){return r.utils.NaNtoZero(b(c(t,e)))}).y(function(t,e){return r.utils.NaNtoZero(y(d(t,e)))})),D.watchTransition(w,"line: linePaths").attr("d",d3.svg.line().interpolate(m).defined(p).x(function(e,n){return r.utils.NaNtoZero(t(c(e,n)))}).y(function(t,n){return r.utils.NaNtoZero(e(d(t,n)))})),b=t.copy(),y=e.copy()}),w.renderEnd("line immediate"),k}return k.dispatch=v,k.scatter=n,n.dispatch.on("elementClick",function(){v.elementClick.apply(this,arguments)}),n.dispatch.on("elementMouseover",function(){v.elementMouseover.apply(this,arguments)}),n.dispatch.on("elementMouseout",function(){v.elementMouseout.apply(this,arguments)}),k.options=r.utils.optionsFunc.bind(k),k._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},defined:{get:function(){return p},set:function(t){p=t}},interpolate:{get:function(){return m},set:function(t){m=t}},clipEdge:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},duration:{get:function(){return g},set:function(t){w.reset(g=t),n.duration(g)}},isArea:{get:function(){return f},set:function(t){f=d3.functor(t)}},x:{get:function(){return c},set:function(t){c=t,n.x(t)}},y:{get:function(){return d},set:function(t){d=t,n.y(t)}},color:{get:function(){return u},set:function(t){u=r.utils.getColor(t),n.color(u)}}}),r.utils.inheritOptions(k,n),r.utils.initOptions(k),k},r.models.lineChart=function(){"use strict";var t,e,n=r.models.line(),i=r.models.axis(),o=r.models.axis(),a=r.models.legend(),s=r.interactiveGuideline(),l=r.models.tooltip(),u={top:30,right:20,bottom:50,left:60},c=r.utils.defaultColor(),d=null,p=null,f=!0,h=!0,m=!0,g=!1,v=!1,b=r.utils.state(),y=null,w=null,k=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),_=250;i.orient("bottom").tickPadding(7),o.orient(g?"right":"left"),l.valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return i.tickFormat()(t,e)});var x=r.utils.renderWatch(k,_),S=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},$=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function T(l){return x.reset(),x.models(n),h&&x.models(i),m&&x.models(o),l.each(function(l){var w=d3.select(this),x=this;r.utils.initSVG(w);var C,E=r.utils.availableWidth(d,w,u),A=r.utils.availableHeight(p,w,u);if(T.update=function(){0===_?w.call(T):w.transition().duration(_).call(T)},T.container=this,b.setter($(l),T.update).getter(S(l)).update(),b.disabled=l.map(function(t){return!!t.disabled}),!y)for(C in y={},b)y[C]=b[C]instanceof Array?b[C].slice(0):b[C];if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return r.utils.noData(T,w),T;w.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale();var D=w.selectAll("g.nv-wrap.nv-lineChart").data([l]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),O=D.select("g");P.append("rect").style("opacity",0),P.append("g").attr("class","nv-x nv-axis"),P.append("g").attr("class","nv-y nv-axis"),P.append("g").attr("class","nv-linesWrap"),P.append("g").attr("class","nv-legendWrap"),P.append("g").attr("class","nv-interactive"),O.select("rect").attr("width",E).attr("height",A>0?A:0),f&&(a.width(E),O.select(".nv-legendWrap").datum(l).call(a),u.top!=a.height()&&(u.top=a.height(),A=r.utils.availableHeight(p,w,u)),D.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")")),D.attr("transform","translate("+u.left+","+u.top+")"),g&&O.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)"),v&&(s.width(E).height(A).margin({left:u.left,top:u.top}).svgContainer(w).xScale(t),D.select(".nv-interactive").call(s)),n.width(E).height(A).color(l.map(function(t,e){return t.color||c(t,e)}).filter(function(t,e){return!l[e].disabled})),O.select(".nv-linesWrap").datum(l.filter(function(t){return!t.disabled})).call(n),h&&(i.scale(t)._ticks(r.utils.calcTicksX(E/100,l)).tickSize(-A,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),O.select(".nv-x.nv-axis").call(i)),m&&(o.scale(e)._ticks(r.utils.calcTicksY(A/36,l)).tickSize(-E,0),O.select(".nv-y.nv-axis").call(o)),a.dispatch.on("stateChange",function(t){for(var e in t)b[e]=t[e];k.stateChange(b),T.update()}),s.dispatch.on("elementMousemove",function(t){n.clearHighlights();var e,a,d,p=[];if(l.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(i,o){a=r.interactiveBisect(i.values,t.pointXValue,T.x());var s=i.values[a],l=T.y()(s,a);null!=l&&n.highlightPoint(o,a,!0),void 0!==s&&(void 0===e&&(e=s),void 0===d&&(d=T.xScale()(T.x()(s,a))),p.push({key:i.key,value:l,color:c(i,i.seriesIndex)}))}),p.length>2){var f=T.yScale().invert(t.mouseY),h=.03*Math.abs(T.yScale().domain()[0]-T.yScale().domain()[1]),m=r.nearestValueIndex(p.map(function(t){return t.value}),f,h);null!==m&&(p[m].highlight=!0)}var g=i.tickFormat()(T.x()(e,a));s.tooltip.position({left:t.mouseX+u.left,top:t.mouseY+u.top}).chartContainer(x.parentNode).valueFormatter(function(t,e){return null==t?"N/A":o.tickFormat()(t)}).data({value:g,index:a,series:p})(),s.renderGuideLine(d)}),s.dispatch.on("elementClick",function(t){var e,i=[];l.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(n){var o=r.interactiveBisect(n.values,t.pointXValue,T.x()),a=n.values[o];if(void 0!==a){void 0===e&&(e=T.xScale()(T.x()(a,o)));var s=T.yScale()(T.y()(a,o));i.push({point:a,pointIndex:o,pos:[e,s],seriesIndex:n.seriesIndex,series:n})}}),n.dispatch.elementClick(i)}),s.dispatch.on("elementMouseout",function(t){n.clearHighlights()}),k.on("changeState",function(t){void 0!==t.disabled&&l.length===t.disabled.length&&(l.forEach(function(e,n){e.disabled=t.disabled[n]}),b.disabled=t.disabled),T.update()})}),x.renderEnd("lineChart immediate"),T}return n.dispatch.on("elementMouseover.tooltip",function(t){l.data(t).position(t.pos).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0)}),T.dispatch=k,T.lines=n,T.legend=a,T.xAxis=i,T.yAxis=o,T.interactiveLayer=s,T.tooltip=l,T.dispatch=k,T.options=r.utils.optionsFunc.bind(T),T._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return f},set:function(t){f=t}},showXAxis:{get:function(){return h},set:function(t){h=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return y},set:function(t){y=t}},noData:{get:function(){return w},set:function(t){w=t}},tooltips:{get:function(){return l.enabled()},set:function(t){r.deprecated("tooltips","use chart.tooltip.enabled() instead"),l.enabled(!!t)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(t){r.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),l.contentGenerator(t)}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return _},set:function(t){x.reset(_=t),n.duration(_),i.duration(_),o.duration(_)}},color:{get:function(){return c},set:function(t){c=r.utils.getColor(t),a.color(c),n.color(c)}},rightAlignYAxis:{get:function(){return g},set:function(t){o.orient((g=t)?"right":"left")}},useInteractiveGuideline:{get:function(){return v},set:function(t){(v=t)&&(n.interactive(!1),n.useVoronoi(!1))}}}),r.utils.inheritOptions(T,n),r.utils.initOptions(T),T},r.models.linePlusBarChart=function(){"use strict";var t,e,n,i,o,a,s,l=r.models.line(),u=r.models.line(),c=r.models.historicalBar(),d=r.models.historicalBar(),p=r.models.axis(),f=r.models.axis(),h=r.models.axis(),m=r.models.axis(),g=r.models.axis(),v=r.models.axis(),b=r.models.legend(),y=d3.svg.brush(),w=r.models.tooltip(),k={top:30,right:30,bottom:30,left:60},_={top:0,right:30,bottom:20,left:60},x=null,S=null,$=function(t){return t.x},T=function(t){return t.y},C=r.utils.defaultColor(),E=!0,A=!0,D=!1,P=!0,O=50,M=null,R=null,j=d3.dispatch("brush","stateChange","changeState"),I=0,N=r.utils.state(),F=null,U=" (left axis)",L=" (right axis)";l.clipEdge(!0),u.interactive(!1),p.orient("bottom").tickPadding(5),h.orient("left"),m.orient("right"),f.orient("bottom").tickPadding(5),g.orient("left"),v.orient("right"),w.headerEnabled(!0).headerFormatter(function(t,e){return p.tickFormat()(t,e)});var V=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},B=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function H(w){return w.each(function(w){var R=d3.select(this);r.utils.initSVG(R);var q,z=r.utils.availableWidth(x,R,k),G=r.utils.availableHeight(S,R,k)-(A?O:0),W=O-_.top-_.bottom;if(H.update=function(){R.transition().duration(I).call(H)},H.container=this,N.setter(B(w),H.update).getter(V(w)).update(),N.disabled=w.map(function(t){return!!t.disabled}),!F)for(q in F={},N)F[q]=N[q]instanceof Array?N[q].slice(0):N[q];if(!(w&&w.length&&w.filter(function(t){return t.values.length}).length))return r.utils.noData(H,R),H;R.selectAll(".nv-noData").remove();var Y=w.filter(function(t){return!t.disabled&&t.bar}),K=w.filter(function(t){return!t.bar});e=c.xScale(),n=f.scale(),i=c.yScale(),o=l.yScale(),a=d.yScale(),s=u.yScale();var Z=w.filter(function(t){return!t.disabled&&t.bar}).map(function(t){return t.values.map(function(t,e){return{x:$(t,e),y:T(t,e)}})}),Q=w.filter(function(t){return!t.disabled&&!t.bar}).map(function(t){return t.values.map(function(t,e){return{x:$(t,e),y:T(t,e)}})});e.range([0,z]),n.domain(d3.extent(d3.merge(Z.concat(Q)),function(t){return t.x})).range([0,z]);var X=R.selectAll("g.nv-wrap.nv-linePlusBar").data([w]),J=X.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),tt=X.select("g");J.append("g").attr("class","nv-legendWrap");var et=J.append("g").attr("class","nv-focus");et.append("g").attr("class","nv-x nv-axis"),et.append("g").attr("class","nv-y1 nv-axis"),et.append("g").attr("class","nv-y2 nv-axis"),et.append("g").attr("class","nv-barsWrap"),et.append("g").attr("class","nv-linesWrap");var nt=J.append("g").attr("class","nv-context");if(nt.append("g").attr("class","nv-x nv-axis"),nt.append("g").attr("class","nv-y1 nv-axis"),nt.append("g").attr("class","nv-y2 nv-axis"),nt.append("g").attr("class","nv-barsWrap"),nt.append("g").attr("class","nv-linesWrap"),nt.append("g").attr("class","nv-brushBackground"),nt.append("g").attr("class","nv-x nv-brush"),E){var rt=b.align()?z/2:z,it=b.align()?rt:0;b.width(rt),tt.select(".nv-legendWrap").datum(w.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?U:L),t})).call(b),k.top!=b.height()&&(k.top=b.height(),G=r.utils.availableHeight(S,R,k)-O),tt.select(".nv-legendWrap").attr("transform","translate("+it+","+-k.top+")")}X.attr("transform","translate("+k.left+","+k.top+")"),tt.select(".nv-context").style("display",A?"initial":"none"),d.width(z).height(W).color(w.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!w[e].disabled&&w[e].bar})),u.width(z).height(W).color(w.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!w[e].disabled&&!w[e].bar}));var ot=tt.select(".nv-context .nv-barsWrap").datum(Y.length?Y:[{values:[]}]),at=tt.select(".nv-context .nv-linesWrap").datum(K[0].disabled?[{values:[]}]:K);tt.select(".nv-context").attr("transform","translate(0,"+(G+k.bottom+_.top)+")"),ot.transition().call(d),at.transition().call(u),P&&(f._ticks(r.utils.calcTicksX(z/100,w)).tickSize(-W,0),tt.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),tt.select(".nv-context .nv-x.nv-axis").transition().call(f)),D&&(g.scale(a)._ticks(W/36).tickSize(-z,0),v.scale(s)._ticks(W/36).tickSize(Y.length?0:-z,0),tt.select(".nv-context .nv-y3.nv-axis").style("opacity",Y.length?1:0).attr("transform","translate(0,"+n.range()[0]+")"),tt.select(".nv-context .nv-y2.nv-axis").style("opacity",K.length?1:0).attr("transform","translate("+n.range()[1]+",0)"),tt.select(".nv-context .nv-y1.nv-axis").transition().call(g),tt.select(".nv-context .nv-y2.nv-axis").transition().call(v)),y.x(n).on("brush",ct),M&&y.extent(M);var st=tt.select(".nv-brushBackground").selectAll("g").data([M||y.extent()]),lt=st.enter().append("g");lt.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",W),lt.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",W);var ut=tt.select(".nv-x.nv-brush").call(y);function ct(){M=y.empty()?null:y.extent(),t=y.empty()?n.domain():y.extent(),j.brush({extent:t,brush:y}),y.empty()||y.extent(M),st.data([y.empty()?n.domain():M]).each(function(t,e){var r=n(t[0])-n.range()[0],i=n.range()[1]-n(t[1]);d3.select(this).select(".left").attr("width",r<0?0:r),d3.select(this).select(".right").attr("x",n(t[1])).attr("width",i<0?0:i)}),c.width(z).height(G).color(w.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!w[e].disabled&&w[e].bar})),l.width(z).height(G).color(w.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!w[e].disabled&&!w[e].bar}));var a=tt.select(".nv-focus .nv-barsWrap").datum(Y.length?Y.map(function(e,n){return{key:e.key,values:e.values.filter(function(e,n){return c.x()(e,n)>=t[0]&&c.x()(e,n)<=t[1]})}}):[{values:[]}]),s=tt.select(".nv-focus .nv-linesWrap").datum(K[0].disabled?[{values:[]}]:K.map(function(e,n){return{area:e.area,fillOpacity:e.fillOpacity,key:e.key,values:e.values.filter(function(e,n){return l.x()(e,n)>=t[0]&&l.x()(e,n)<=t[1]})}}));e=Y.length?c.xScale():l.xScale(),p.scale(e)._ticks(r.utils.calcTicksX(z/100,w)).tickSize(-G,0),p.domain([Math.ceil(t[0]),Math.floor(t[1])]),tt.select(".nv-x.nv-axis").transition().duration(I).call(p),a.transition().duration(I).call(c),s.transition().duration(I).call(l),tt.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),h.scale(i)._ticks(r.utils.calcTicksY(G/36,w)).tickSize(-z,0),m.scale(o)._ticks(r.utils.calcTicksY(G/36,w)).tickSize(Y.length?0:-z,0),tt.select(".nv-focus .nv-y1.nv-axis").style("opacity",Y.length?1:0),tt.select(".nv-focus .nv-y2.nv-axis").style("opacity",K.length&&!K[0].disabled?1:0).attr("transform","translate("+e.range()[1]+",0)"),tt.select(".nv-focus .nv-y1.nv-axis").transition().duration(I).call(h),tt.select(".nv-focus .nv-y2.nv-axis").transition().duration(I).call(m)}ut.selectAll("rect").attr("height",W),ut.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,r=W/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}),b.dispatch.on("stateChange",function(t){for(var e in t)N[e]=t[e];j.stateChange(N),H.update()}),j.on("changeState",function(t){void 0!==t.disabled&&(w.forEach(function(e,n){e.disabled=t.disabled[n]}),N.disabled=t.disabled),H.update()}),ct()}),H}return l.dispatch.on("elementMouseover.tooltip",function(t){w.duration(100).valueFormatter(function(t,e){return m.tickFormat()(t,e)}).data(t).position(t.pos).hidden(!1)}),l.dispatch.on("elementMouseout.tooltip",function(t){w.hidden(!0)}),c.dispatch.on("elementMouseover.tooltip",function(t){t.value=H.x()(t.data),t.series={value:H.y()(t.data),color:t.color},w.duration(0).valueFormatter(function(t,e){return h.tickFormat()(t,e)}).data(t).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(t){w.hidden(!0)}),c.dispatch.on("elementMousemove.tooltip",function(t){w.position({top:d3.event.pageY,left:d3.event.pageX})()}),H.dispatch=j,H.legend=b,H.lines=l,H.lines2=u,H.bars=c,H.bars2=d,H.xAxis=p,H.x2Axis=f,H.y1Axis=h,H.y2Axis=m,H.y3Axis=g,H.y4Axis=v,H.tooltip=w,H.options=r.utils.optionsFunc.bind(H),H._options=Object.create({},{width:{get:function(){return x},set:function(t){x=t}},height:{get:function(){return S},set:function(t){S=t}},showLegend:{get:function(){return E},set:function(t){E=t}},brushExtent:{get:function(){return M},set:function(t){M=t}},noData:{get:function(){return R},set:function(t){R=t}},focusEnable:{get:function(){return A},set:function(t){A=t}},focusHeight:{get:function(){return O},set:function(t){O=t}},focusShowAxisX:{get:function(){return P},set:function(t){P=t}},focusShowAxisY:{get:function(){return D},set:function(t){D=t}},legendLeftAxisHint:{get:function(){return U},set:function(t){U=t}},legendRightAxisHint:{get:function(){return L},set:function(t){L=t}},tooltips:{get:function(){return w.enabled()},set:function(t){r.deprecated("tooltips","use chart.tooltip.enabled() instead"),w.enabled(!!t)}},tooltipContent:{get:function(){return w.contentGenerator()},set:function(t){r.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),w.contentGenerator(t)}},margin:{get:function(){return k},set:function(t){k.top=void 0!==t.top?t.top:k.top,k.right=void 0!==t.right?t.right:k.right,k.bottom=void 0!==t.bottom?t.bottom:k.bottom,k.left=void 0!==t.left?t.left:k.left}},duration:{get:function(){return I},set:function(t){I=t}},color:{get:function(){return C},set:function(t){C=r.utils.getColor(t),b.color(C)}},x:{get:function(){return $},set:function(t){$=t,l.x(t),u.x(t),c.x(t),d.x(t)}},y:{get:function(){return T},set:function(t){T=t,l.y(t),u.y(t),c.y(t),d.y(t)}}}),r.utils.inheritOptions(H,l),r.utils.initOptions(H),H},r.models.lineWithFocusChart=function(){"use strict";var t,e,n,i,o=r.models.line(),a=r.models.line(),s=r.models.axis(),l=r.models.axis(),u=r.models.axis(),c=r.models.axis(),d=r.models.legend(),p=d3.svg.brush(),f=r.models.tooltip(),h=r.interactiveGuideline(),m={top:30,right:30,bottom:30,left:60},g={top:0,right:30,bottom:20,left:60},v=r.utils.defaultColor(),b=null,y=null,w=50,k=!1,_=!0,x=null,S=null,$=d3.dispatch("brush","stateChange","changeState"),T=250,C=r.utils.state(),E=null;o.clipEdge(!0).duration(0),a.interactive(!1),s.orient("bottom").tickPadding(5),l.orient("left"),u.orient("bottom").tickPadding(5),c.orient("left"),f.valueFormatter(function(t,e){return l.tickFormat()(t,e)}).headerFormatter(function(t,e){return s.tickFormat()(t,e)});var A=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},D=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function P(f){return f.each(function(f){var S=d3.select(this),O=this;r.utils.initSVG(S);var M,R=r.utils.availableWidth(b,S,m),j=r.utils.availableHeight(y,S,m)-w,I=w-g.top-g.bottom;if(P.update=function(){S.transition().duration(T).call(P)},P.container=this,C.setter(D(f),P.update).getter(A(f)).update(),C.disabled=f.map(function(t){return!!t.disabled}),!E)for(M in E={},C)E[M]=C[M]instanceof Array?C[M].slice(0):C[M];if(!(f&&f.length&&f.filter(function(t){return t.values.length}).length))return r.utils.noData(P,S),P;S.selectAll(".nv-noData").remove(),t=o.xScale(),e=o.yScale(),n=a.xScale(),i=a.yScale();var N=S.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([f]),F=N.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),U=N.select("g");F.append("g").attr("class","nv-legendWrap");var L=F.append("g").attr("class","nv-focus");L.append("g").attr("class","nv-x nv-axis"),L.append("g").attr("class","nv-y nv-axis"),L.append("g").attr("class","nv-linesWrap"),L.append("g").attr("class","nv-interactive");var V=F.append("g").attr("class","nv-context");V.append("g").attr("class","nv-x nv-axis"),V.append("g").attr("class","nv-y nv-axis"),V.append("g").attr("class","nv-linesWrap"),V.append("g").attr("class","nv-brushBackground"),V.append("g").attr("class","nv-x nv-brush"),_&&(d.width(R),U.select(".nv-legendWrap").datum(f).call(d),m.top!=d.height()&&(m.top=d.height(),j=r.utils.availableHeight(y,S,m)-w),U.select(".nv-legendWrap").attr("transform","translate(0,"+-m.top+")")),N.attr("transform","translate("+m.left+","+m.top+")"),k&&(h.width(R).height(j).margin({left:m.left,top:m.top}).svgContainer(S).xScale(t),N.select(".nv-interactive").call(h)),o.width(R).height(j).color(f.map(function(t,e){return t.color||v(t,e)}).filter(function(t,e){return!f[e].disabled})),a.defined(o.defined()).width(R).height(I).color(f.map(function(t,e){return t.color||v(t,e)}).filter(function(t,e){return!f[e].disabled})),U.select(".nv-context").attr("transform","translate(0,"+(j+m.bottom+g.top)+")");var B=U.select(".nv-context .nv-linesWrap").datum(f.filter(function(t){return!t.disabled}));d3.transition(B).call(a),s.scale(t)._ticks(r.utils.calcTicksX(R/100,f)).tickSize(-j,0),l.scale(e)._ticks(r.utils.calcTicksY(j/36,f)).tickSize(-R,0),U.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+j+")"),p.x(n).on("brush",function(){G()}),x&&p.extent(x);var H=U.select(".nv-brushBackground").selectAll("g").data([x||p.extent()]),q=H.enter().append("g");q.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",I),q.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",I);var z=U.select(".nv-x.nv-brush").call(p);function G(){x=p.empty()?null:p.extent();var e=p.empty()?n.domain():p.extent();Math.abs(e[0]-e[1])<=1||($.brush({extent:e,brush:p}),p.empty()||p.extent(x),H.data([p.empty()?n.domain():x]).each(function(e,r){var i=n(e[0])-t.range()[0],o=R-n(e[1]);d3.select(this).select(".left").attr("width",i<0?0:i),d3.select(this).select(".right").attr("x",n(e[1])).attr("width",o<0?0:o)}),U.select(".nv-focus .nv-linesWrap").datum(f.filter(function(t){return!t.disabled}).map(function(t,n){return{key:t.key,area:t.area,values:t.values.filter(function(t,n){return o.x()(t,n)>=e[0]&&o.x()(t,n)<=e[1]})}})).transition().duration(T).call(o),U.select(".nv-focus .nv-x.nv-axis").transition().duration(T).call(s),U.select(".nv-focus .nv-y.nv-axis").transition().duration(T).call(l))}z.selectAll("rect").attr("height",I),z.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,r=I/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}),G(),u.scale(n)._ticks(r.utils.calcTicksX(R/100,f)).tickSize(-I,0),U.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d3.transition(U.select(".nv-context .nv-x.nv-axis")).call(u),c.scale(i)._ticks(r.utils.calcTicksY(I/36,f)).tickSize(-R,0),d3.transition(U.select(".nv-context .nv-y.nv-axis")).call(c),U.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d.dispatch.on("stateChange",function(t){for(var e in t)C[e]=t[e];$.stateChange(C),P.update()}),h.dispatch.on("elementMousemove",function(t){o.clearHighlights();var e,i,a,u=[];if(f.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(s,l){var c=p.empty()?n.domain():p.extent(),d=s.values.filter(function(t,e){return o.x()(t,e)>=c[0]&&o.x()(t,e)<=c[1]}),f=d[i=r.interactiveBisect(d,t.pointXValue,o.x())];null!=P.y()(f,i)&&o.highlightPoint(l,i,!0),void 0!==f&&(void 0===e&&(e=f),void 0===a&&(a=P.xScale()(P.x()(f,i))),u.push({key:s.key,value:P.y()(f,i),color:v(s,s.seriesIndex)}))}),u.length>2){var c=P.yScale().invert(t.mouseY),d=.03*Math.abs(P.yScale().domain()[0]-P.yScale().domain()[1]),g=r.nearestValueIndex(u.map(function(t){return t.value}),c,d);null!==g&&(u[g].highlight=!0)}var b=s.tickFormat()(P.x()(e,i));h.tooltip.position({left:t.mouseX+m.left,top:t.mouseY+m.top}).chartContainer(O.parentNode).valueFormatter(function(t,e){return null==t?"N/A":l.tickFormat()(t)}).data({value:b,index:i,series:u})(),h.renderGuideLine(a)}),h.dispatch.on("elementMouseout",function(t){o.clearHighlights()}),$.on("changeState",function(t){void 0!==t.disabled&&f.forEach(function(e,n){e.disabled=t.disabled[n]}),P.update()})}),P}return o.dispatch.on("elementMouseover.tooltip",function(t){f.data(t).position(t.pos).hidden(!1)}),o.dispatch.on("elementMouseout.tooltip",function(t){f.hidden(!0)}),P.dispatch=$,P.legend=d,P.lines=o,P.lines2=a,P.xAxis=s,P.yAxis=l,P.x2Axis=u,P.y2Axis=c,P.interactiveLayer=h,P.tooltip=f,P.options=r.utils.optionsFunc.bind(P),P._options=Object.create({},{width:{get:function(){return b},set:function(t){b=t}},height:{get:function(){return y},set:function(t){y=t}},focusHeight:{get:function(){return w},set:function(t){w=t}},showLegend:{get:function(){return _},set:function(t){_=t}},brushExtent:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return E},set:function(t){E=t}},noData:{get:function(){return S},set:function(t){S=t}},tooltips:{get:function(){return f.enabled()},set:function(t){r.deprecated("tooltips","use chart.tooltip.enabled() instead"),f.enabled(!!t)}},tooltipContent:{get:function(){return f.contentGenerator()},set:function(t){r.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),f.contentGenerator(t)}},margin:{get:function(){return m},set:function(t){m.top=void 0!==t.top?t.top:m.top,m.right=void 0!==t.right?t.right:m.right,m.bottom=void 0!==t.bottom?t.bottom:m.bottom,m.left=void 0!==t.left?t.left:m.left}},color:{get:function(){return v},set:function(t){v=r.utils.getColor(t),d.color(v)}},interpolate:{get:function(){return o.interpolate()},set:function(t){o.interpolate(t),a.interpolate(t)}},xTickFormat:{get:function(){return s.tickFormat()},set:function(t){s.tickFormat(t),u.tickFormat(t)}},yTickFormat:{get:function(){return l.tickFormat()},set:function(t){l.tickFormat(t),c.tickFormat(t)}},duration:{get:function(){return T},set:function(t){l.duration(T=t),c.duration(T),s.duration(T),u.duration(T)}},x:{get:function(){return o.x()},set:function(t){o.x(t),a.x(t)}},y:{get:function(){return o.y()},set:function(t){o.y(t),a.y(t)}},useInteractiveGuideline:{get:function(){return k},set:function(t){(k=t)&&(o.interactive(!1),o.useVoronoi(!1))}}}),r.utils.inheritOptions(P,o),r.utils.initOptions(P),P},r.models.multiBar=function(){"use strict";var t,e,n,i,o,a,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,d=d3.scale.ordinal(),p=d3.scale.linear(),f=Math.floor(1e4*Math.random()),h=null,m=function(t){return t.x},g=function(t){return t.y},v=[0],b=!0,y=!1,w="zero",k=r.utils.defaultColor(),_=!1,x=null,S=500,$=.1,T=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),C=r.utils.renderWatch(T,S),E=0;function A(D){return C.reset(),D.each(function(A){var D=u-l.left-l.right,P=c-l.top-l.bottom;h=d3.select(this),r.utils.initSVG(h);var O=0;if(_&&A.length&&(_=[{values:A[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),y){var M=d3.layout.stack().offset(w).values(function(t){return t.values}).y(g)(!A.length&&_?_:A);M.forEach(function(t,e){t.nonStackable?(A[e].nonStackableSeries=O++,M[e]=A[e]):e>0&&M[e-1].nonStackable&&M[e].values.map(function(t,n){t.y0-=M[e-1].values[n].y,t.y1=t.y0+t.y})}),A=M}A.forEach(function(t,e){t.values.forEach(function(n){n.series=e,n.key=t.key})}),y&&A[0].values.map(function(t,e){var n=0,r=0;A.map(function(t,i){if(!A[i].nonStackable){var o=t.values[e];o.size=Math.abs(o.y),o.y<0?(o.y1=r,r-=o.size):(o.y1=o.size+n,n+=o.size)}})});var R=e&&n?[]:A.map(function(t,e){return t.values.map(function(t,n){return{x:m(t,n),y:g(t,n),y0:t.y0,y1:t.y1,idx:e}})});d.domain(e||d3.merge(R).map(function(t){return t.x})).rangeBands(i||[0,D],$),p.domain(n||d3.extent(d3.merge(R).map(function(t){var e=t.y;return y&&!A[t.idx].nonStackable&&(e=t.y>0?t.y1:t.y1+t.y),e}).concat(v))).range(o||[P,0]),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]+.01*p.domain()[0],p.domain()[1]-.01*p.domain()[1]]):p.domain([-1,1])),a=a||d,s=s||p;var j=h.selectAll("g.nv-wrap.nv-multibar").data([A]),I=j.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),N=I.append("defs"),F=I.append("g"),U=j.select("g");F.append("g").attr("class","nv-groups"),j.attr("transform","translate("+l.left+","+l.top+")"),N.append("clipPath").attr("id","nv-edge-clip-"+f).append("rect"),j.select("#nv-edge-clip-"+f+" rect").attr("width",D).attr("height",P),U.attr("clip-path",b?"url(#nv-edge-clip-"+f+")":"");var L=j.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});L.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var V=C.transition(L.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,S)).attr("y",function(t,e,n){var r=s(0)||0;return y&&A[t.series]&&!A[t.series].nonStackable&&(r=s(t.y0)),r}).attr("height",0).remove();V.delay&&V.delay(function(t,e){return e*(S/(E+1))-e}),L.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return k(t,e)}).style("stroke",function(t,e){return k(t,e)}),L.style("stroke-opacity",1).style("fill-opacity",.75);var B=L.selectAll("rect.nv-bar").data(function(t){return _&&!A.length?_.values:t.values});B.exit().remove(),B.enter().append("rect").attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(t,e,n){return y&&!A[n].nonStackable?0:n*d.rangeBand()/A.length}).attr("y",function(t,e,n){return s(y&&!A[n].nonStackable?t.y0:0)||0}).attr("height",0).attr("width",function(t,e,n){return d.rangeBand()/(y&&!A[n].nonStackable?1:A.length)}).attr("transform",function(t,e){return"translate("+d(m(t,e))+",0)"}),B.style("fill",function(t,e,n){return k(t,n,e)}).style("stroke",function(t,e,n){return k(t,n,e)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),T.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),T.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){T.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){T.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,e){T.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),B.attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(t,e){return"translate("+d(m(t,e))+",0)"}),x&&(t||(t=A.map(function(){return!0})),B.style("fill",function(e,n,r){return d3.rgb(x(e,n)).darker(t.map(function(t,e){return e}).filter(function(e,n){return!t[n]})[r]).toString()}).style("stroke",function(e,n,r){return d3.rgb(x(e,n)).darker(t.map(function(t,e){return e}).filter(function(e,n){return!t[n]})[r]).toString()}));var H=B.watchTransition(C,"multibar",Math.min(250,S)).delay(function(t,e){return e*S/A[0].values.length});y?H.attr("y",function(t,e,n){return A[n].nonStackable?g(t,e)<0?p(0):p(0)-p(g(t,e))<-1?p(0)-1:p(g(t,e))||0:p(t.y1)}).attr("height",function(t,e,n){return A[n].nonStackable?Math.max(Math.abs(p(g(t,e))-p(0)),1)||0:Math.max(Math.abs(p(t.y+t.y0)-p(t.y0)),1)}).attr("x",function(t,e,n){var r=0;return A[n].nonStackable&&(r=t.series*d.rangeBand()/A.length,A.length!==O&&(r=A[n].nonStackableSeries*d.rangeBand()/(2*O))),r}).attr("width",function(t,e,n){if(A[n].nonStackable){var r=d.rangeBand()/O;return A.length!==O&&(r=d.rangeBand()/(2*O)),r}return d.rangeBand()}):H.attr("x",function(t,e){return t.series*d.rangeBand()/A.length}).attr("width",d.rangeBand()/A.length).attr("y",function(t,e){return g(t,e)<0?p(0):p(0)-p(g(t,e))<1?p(0)-1:p(g(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(p(g(t,e))-p(0)),1)||0}),a=d.copy(),s=p.copy(),A[0]&&A[0].values&&(E=A[0].values.length)}),C.renderEnd("multibar immediate"),A}return A.dispatch=T,A.options=r.utils.optionsFunc.bind(A),A._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return m},set:function(t){m=t}},y:{get:function(){return g},set:function(t){g=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return v},set:function(t){v=t}},stacked:{get:function(){return y},set:function(t){y=t}},stackOffset:{get:function(){return w},set:function(t){w=t}},clipEdge:{get:function(){return b},set:function(t){b=t}},disabled:{get:function(){return t},set:function(e){t=e}},id:{get:function(){return f},set:function(t){f=t}},hideable:{get:function(){return _},set:function(t){_=t}},groupSpacing:{get:function(){return $},set:function(t){$=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return S},set:function(t){C.reset(S=t)}},color:{get:function(){return k},set:function(t){k=r.utils.getColor(t)}},barColor:{get:function(){return x},set:function(t){x=t?r.utils.getColor(t):null}}}),r.utils.initOptions(A),A},r.models.multiBarChart=function(){"use strict";var t,e,n=r.models.multiBar(),i=r.models.axis(),o=r.models.axis(),a=r.models.legend(),s=r.models.legend(),l=r.models.tooltip(),u={top:30,right:20,bottom:50,left:60},c=null,d=null,p=r.utils.defaultColor(),f=!0,h={},m=!0,g=!0,v=!0,b=!1,y=!0,w=!1,k=0,_=r.utils.state(),x=null,S=null,$=d3.dispatch("stateChange","changeState","renderEnd"),T=function(){return f?180:0},C=250;_.stacked=!1,n.stacked(!1),i.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(t){return t}),o.orient(b?"right":"left").tickFormat(d3.format(",.1f")),l.duration(0).valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return i.tickFormat()(t,e)}),s.updateState(!1);var E=r.utils.renderWatch($),A=!1,D=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:A}}},P=function(t){return function(e){void 0!==e.stacked&&(A=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function O(l){return E.reset(),E.models(n),g&&E.models(i),v&&E.models(o),l.each(function(l){var S=d3.select(this);r.utils.initSVG(S);var E,M=r.utils.availableWidth(c,S,u),R=r.utils.availableHeight(d,S,u);if(O.update=function(){0===C?S.call(O):S.transition().duration(C).call(O)},O.container=this,_.setter(P(l),O.update).getter(D(l)).update(),_.disabled=l.map(function(t){return!!t.disabled}),!x)for(E in x={},_)x[E]=_[E]instanceof Array?_[E].slice(0):_[E];if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return r.utils.noData(O,S),O;S.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale();var j=S.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([l]),I=j.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),N=j.select("g");if(I.append("g").attr("class","nv-x nv-axis"),I.append("g").attr("class","nv-y nv-axis"),I.append("g").attr("class","nv-barsWrap"),I.append("g").attr("class","nv-legendWrap"),I.append("g").attr("class","nv-controlsWrap"),m&&(a.width(M-T()),N.select(".nv-legendWrap").datum(l).call(a),u.top!=a.height()&&(u.top=a.height(),R=r.utils.availableHeight(d,S,u)),N.select(".nv-legendWrap").attr("transform","translate("+T()+","+-u.top+")")),f){var F=[{key:h.grouped||"Grouped",disabled:n.stacked()},{key:h.stacked||"Stacked",disabled:!n.stacked()}];s.width(T()).color(["#444","#444","#444"]),N.select(".nv-controlsWrap").datum(F).attr("transform","translate(0,"+-u.top+")").call(s)}if(j.attr("transform","translate("+u.left+","+u.top+")"),b&&N.select(".nv-y.nv-axis").attr("transform","translate("+M+",0)"),n.disabled(l.map(function(t){return t.disabled})).width(M).height(R).color(l.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!l[e].disabled})),N.select(".nv-barsWrap").datum(l.filter(function(t){return!t.disabled})).call(n),g){i.scale(t)._ticks(r.utils.calcTicksX(M/100,l)).tickSize(-R,0),N.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),N.select(".nv-x.nv-axis").call(i);var U=N.select(".nv-x.nv-axis > g").selectAll("g");if(U.selectAll("line, text").style("opacity",1),w){var L=function(t,e){return"translate("+t+","+e+")"};U.selectAll("text").attr("transform",function(t,e,n){return L(0,n%2==0?5:17)});var V=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;N.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return L(0,0===e||V%2!=0?17:5)})}y&&U.filter(function(t,e){return e%Math.ceil(l[0].values.length/(M/100))!=0}).selectAll("text, line").style("opacity",0),k&&U.selectAll(".tick text").attr("transform","rotate("+k+" 0,0)").style("text-anchor",k>0?"start":"end"),N.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}v&&(o.scale(e)._ticks(r.utils.calcTicksY(R/36,l)).tickSize(-M,0),N.select(".nv-y.nv-axis").call(o)),a.dispatch.on("stateChange",function(t){for(var e in t)_[e]=t[e];$.stateChange(_),O.update()}),s.dispatch.on("legendClick",function(t,e){if(t.disabled){switch(F=F.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":case h.grouped:n.stacked(!1);break;case"Stacked":case h.stacked:n.stacked(!0)}_.stacked=n.stacked(),$.stateChange(_),O.update()}}),$.on("changeState",function(t){void 0!==t.disabled&&(l.forEach(function(e,n){e.disabled=t.disabled[n]}),_.disabled=t.disabled),void 0!==t.stacked&&(n.stacked(t.stacked),_.stacked=t.stacked,A=t.stacked),O.update()})}),E.renderEnd("multibarchart immediate"),O}return n.dispatch.on("elementMouseover.tooltip",function(t){t.value=O.x()(t.data),t.series={key:t.data.key,value:O.y()(t.data),color:t.color},l.data(t).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(t){l.position({top:d3.event.pageY,left:d3.event.pageX})()}),O.dispatch=$,O.multibar=n,O.legend=a,O.controls=s,O.xAxis=i,O.yAxis=o,O.state=_,O.tooltip=l,O.options=r.utils.optionsFunc.bind(O),O._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},showLegend:{get:function(){return m},set:function(t){m=t}},showControls:{get:function(){return f},set:function(t){f=t}},controlLabels:{get:function(){return h},set:function(t){h=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},defaultState:{get:function(){return x},set:function(t){x=t}},noData:{get:function(){return S},set:function(t){S=t}},reduceXTicks:{get:function(){return y},set:function(t){y=t}},rotateLabels:{get:function(){return k},set:function(t){k=t}},staggerLabels:{get:function(){return w},set:function(t){w=t}},tooltips:{get:function(){return l.enabled()},set:function(t){r.deprecated("tooltips","use chart.tooltip.enabled() instead"),l.enabled(!!t)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(t){r.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),l.contentGenerator(t)}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return C},set:function(t){n.duration(C=t),i.duration(C),o.duration(C),E.reset(C)}},color:{get:function(){return p},set:function(t){p=r.utils.getColor(t),a.color(p)}},rightAlignYAxis:{get:function(){return b},set:function(t){o.orient((b=t)?"right":"left")}},barColor:{get:function(){return n.barColor},set:function(t){n.barColor(t),a.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),r.utils.inheritOptions(O,n),r.utils.initOptions(O),O},r.models.multiBarHorizontal=function(){"use strict";var t,e,n,i,o,a,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,d=Math.floor(1e4*Math.random()),p=null,f=d3.scale.ordinal(),h=d3.scale.linear(),m=function(t){return t.x},g=function(t){return t.y},v=function(t){return t.yErr},b=[0],y=r.utils.defaultColor(),w=null,k=!1,_=!1,x=!1,S=60,$=.1,T=d3.format(",.2f"),C=250,E=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),A=r.utils.renderWatch(E,C);function D(d){return A.reset(),d.each(function(d){var C=u-l.left-l.right,D=c-l.top-l.bottom;p=d3.select(this),r.utils.initSVG(p),k&&(d=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(g)(d)),d.forEach(function(t,e){t.values.forEach(function(n){n.series=e,n.key=t.key})}),k&&d[0].values.map(function(t,e){var n=0,r=0;d.map(function(t){var i=t.values[e];i.size=Math.abs(i.y),i.y<0?(i.y1=r-i.size,r-=i.size):(i.y1=n,n+=i.size)})});var P=e&&n?[]:d.map(function(t){return t.values.map(function(t,e){return{x:m(t,e),y:g(t,e),y0:t.y0,y1:t.y1}})});f.domain(e||d3.merge(P).map(function(t){return t.x})).rangeBands(i||[0,D],$),h.domain(n||d3.extent(d3.merge(P).map(function(t){return k?t.y>0?t.y1+t.y:t.y1:t.y}).concat(b))),h.range(_&&!k?o||[h.domain()[0]<0?S:0,C-(h.domain()[1]>0?S:0)]:o||[0,C]),a=a||f,s=s||d3.scale.linear().domain(h.domain()).range([h(0),h(0)]);var O=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([d]),M=O.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),R=(M.append("defs"),M.append("g"));O.select("g"),R.append("g").attr("class","nv-groups"),O.attr("transform","translate("+l.left+","+l.top+")");var j=O.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});j.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),j.exit().watchTransition(A,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),j.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return y(t,e)}).style("stroke",function(t,e){return y(t,e)}),j.watchTransition(A,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",.75);var I=j.selectAll("g.nv-bar").data(function(t){return t.values});I.exit().remove();var N=I.enter().append("g").attr("transform",function(t,e,n){return"translate("+s(k?t.y0:0)+","+(k?0:n*f.rangeBand()/d.length+f(m(t,e)))+")"});N.append("rect").attr("width",0).attr("height",f.rangeBand()/(k?1:d.length)),I.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),E.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),E.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){E.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){E.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){E.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,e){E.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),v(d[0],0)&&(N.append("polyline"),I.select("polyline").attr("fill","none").attr("points",function(t,e){var n=v(t,e),r=.8*f.rangeBand()/(2*(k?1:d.length));return[[(n=(n=n.length?n:[-Math.abs(n),Math.abs(n)]).map(function(t){return h(t)-h(0)}))[0],-r],[n[0],r],[n[0],0],[n[1],0],[n[1],-r],[n[1],r]].map(function(t){return t.join(",")}).join(" ")}).attr("transform",function(t,e){var n=f.rangeBand()/(2*(k?1:d.length));return"translate("+(g(t,e)<0?0:h(g(t,e))-h(0))+", "+n+")"})),N.append("text"),_&&!k?(I.select("text").attr("text-anchor",function(t,e){return g(t,e)<0?"end":"start"}).attr("y",f.rangeBand()/(2*d.length)).attr("dy",".32em").text(function(t,e){var n=T(g(t,e)),r=v(t,e);return void 0===r?n:r.length?n+"+"+T(Math.abs(r[1]))+"-"+T(Math.abs(r[0])):n+"\xb1"+T(Math.abs(r))}),I.watchTransition(A,"multibarhorizontal: bars").select("text").attr("x",function(t,e){return g(t,e)<0?-4:h(g(t,e))-h(0)+4})):I.selectAll("text").text(""),x&&!k?(N.append("text").classed("nv-bar-label",!0),I.select("text.nv-bar-label").attr("text-anchor",function(t,e){return g(t,e)<0?"start":"end"}).attr("y",f.rangeBand()/(2*d.length)).attr("dy",".32em").text(function(t,e){return m(t,e)}),I.watchTransition(A,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(t,e){return g(t,e)<0?h(0)-h(g(t,e))+4:-4})):I.selectAll("text.nv-bar-label").text(""),I.attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}),w&&(t||(t=d.map(function(){return!0})),I.style("fill",function(e,n,r){return d3.rgb(w(e,n)).darker(t.map(function(t,e){return e}).filter(function(e,n){return!t[n]})[r]).toString()}).style("stroke",function(e,n,r){return d3.rgb(w(e,n)).darker(t.map(function(t,e){return e}).filter(function(e,n){return!t[n]})[r]).toString()})),k?I.watchTransition(A,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+h(t.y1)+","+f(m(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(h(g(t,e)+t.y0)-h(t.y0))}).attr("height",f.rangeBand()):I.watchTransition(A,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+(g(t,e)<0?h(g(t,e)):h(0))+","+(t.series*f.rangeBand()/d.length+f(m(t,e)))+")"}).select("rect").attr("height",f.rangeBand()/d.length).attr("width",function(t,e){return Math.max(Math.abs(h(g(t,e))-h(0)),1)}),a=f.copy(),s=h.copy()}),A.renderEnd("multibarHorizontal immediate"),D}return D.dispatch=E,D.options=r.utils.optionsFunc.bind(D),D._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return m},set:function(t){m=t}},y:{get:function(){return g},set:function(t){g=t}},yErr:{get:function(){return v},set:function(t){v=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return b},set:function(t){b=t}},stacked:{get:function(){return k},set:function(t){k=t}},showValues:{get:function(){return _},set:function(t){_=t}},disabled:{get:function(){return t},set:function(e){t=e}},id:{get:function(){return d},set:function(t){d=t}},valueFormat:{get:function(){return T},set:function(t){T=t}},valuePadding:{get:function(){return S},set:function(t){S=t}},groupSpacing:{get:function(){return $},set:function(t){$=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return C},set:function(t){A.reset(C=t)}},color:{get:function(){return y},set:function(t){y=r.utils.getColor(t)}},barColor:{get:function(){return w},set:function(t){w=t?r.utils.getColor(t):null}}}),r.utils.initOptions(D),D},r.models.multiBarHorizontalChart=function(){"use strict";var t,e,n=r.models.multiBarHorizontal(),i=r.models.axis(),o=r.models.axis(),a=r.models.legend().height(30),s=r.models.legend().height(30),l=r.models.tooltip(),u={top:30,right:20,bottom:50,left:60},c=null,d=null,p=r.utils.defaultColor(),f=!0,h={},m=!0,g=!0,v=!0,b=!1,y=r.utils.state(),w=null,k=null,_=d3.dispatch("stateChange","changeState","renderEnd"),x=function(){return f?180:0},S=250;y.stacked=!1,n.stacked(b),i.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(t){return t}),o.orient("bottom").tickFormat(d3.format(",.1f")),l.duration(0).valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return i.tickFormat()(t,e)}),s.updateState(!1);var $=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:b}}},T=function(t){return function(e){void 0!==e.stacked&&(b=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},C=r.utils.renderWatch(_,S);function E(l){return C.reset(),C.models(n),g&&C.models(i),v&&C.models(o),l.each(function(l){var k=d3.select(this);r.utils.initSVG(k);var C,A=r.utils.availableWidth(c,k,u),D=r.utils.availableHeight(d,k,u);if(E.update=function(){k.transition().duration(S).call(E)},E.container=this,b=n.stacked(),y.setter(T(l),E.update).getter($(l)).update(),y.disabled=l.map(function(t){return!!t.disabled}),!w)for(C in w={},y)w[C]=y[C]instanceof Array?y[C].slice(0):y[C];if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return r.utils.noData(E,k),E;k.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale();var P=k.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([l]),O=P.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),M=P.select("g");if(O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),O.append("g").attr("class","nv-barsWrap"),O.append("g").attr("class","nv-legendWrap"),O.append("g").attr("class","nv-controlsWrap"),m&&(a.width(A-x()),M.select(".nv-legendWrap").datum(l).call(a),u.top!=a.height()&&(u.top=a.height(),D=r.utils.availableHeight(d,k,u)),M.select(".nv-legendWrap").attr("transform","translate("+x()+","+-u.top+")")),f){var R=[{key:h.grouped||"Grouped",disabled:n.stacked()},{key:h.stacked||"Stacked",disabled:!n.stacked()}];s.width(x()).color(["#444","#444","#444"]),M.select(".nv-controlsWrap").datum(R).attr("transform","translate(0,"+-u.top+")").call(s)}P.attr("transform","translate("+u.left+","+u.top+")"),n.disabled(l.map(function(t){return t.disabled})).width(A).height(D).color(l.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!l[e].disabled})),M.select(".nv-barsWrap").datum(l.filter(function(t){return!t.disabled})).transition().call(n),g&&(i.scale(t)._ticks(r.utils.calcTicksY(D/24,l)).tickSize(-A,0),M.select(".nv-x.nv-axis").call(i),M.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text")),v&&(o.scale(e)._ticks(r.utils.calcTicksX(A/100,l)).tickSize(-D,0),M.select(".nv-y.nv-axis").attr("transform","translate(0,"+D+")"),M.select(".nv-y.nv-axis").call(o)),M.select(".nv-zeroLine line").attr("x1",e(0)).attr("x2",e(0)).attr("y1",0).attr("y2",-D),a.dispatch.on("stateChange",function(t){for(var e in t)y[e]=t[e];_.stateChange(y),E.update()}),s.dispatch.on("legendClick",function(t,e){if(t.disabled){switch(R=R.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":n.stacked(!1);break;case"Stacked":n.stacked(!0)}y.stacked=n.stacked(),_.stateChange(y),b=n.stacked(),E.update()}}),_.on("changeState",function(t){void 0!==t.disabled&&(l.forEach(function(e,n){e.disabled=t.disabled[n]}),y.disabled=t.disabled),void 0!==t.stacked&&(n.stacked(t.stacked),y.stacked=t.stacked,b=t.stacked),E.update()})}),C.renderEnd("multibar horizontal chart immediate"),E}return n.dispatch.on("elementMouseover.tooltip",function(t){t.value=E.x()(t.data),t.series={key:t.data.key,value:E.y()(t.data),color:t.color},l.data(t).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(t){l.position({top:d3.event.pageY,left:d3.event.pageX})()}),E.dispatch=_,E.multibar=n,E.legend=a,E.controls=s,E.xAxis=i,E.yAxis=o,E.state=y,E.tooltip=l,E.options=r.utils.optionsFunc.bind(E),E._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},showLegend:{get:function(){return m},set:function(t){m=t}},showControls:{get:function(){return f},set:function(t){f=t}},controlLabels:{get:function(){return h},set:function(t){h=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},defaultState:{get:function(){return w},set:function(t){w=t}},noData:{get:function(){return k},set:function(t){k=t}},tooltips:{get:function(){return l.enabled()},set:function(t){r.deprecated("tooltips","use chart.tooltip.enabled() instead"),l.enabled(!!t)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(t){r.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),l.contentGenerator(t)}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return S},set:function(t){C.reset(S=t),n.duration(S),i.duration(S),o.duration(S)}},color:{get:function(){return p},set:function(t){p=r.utils.getColor(t),a.color(p)}},barColor:{get:function(){return n.barColor},set:function(t){n.barColor(t),a.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),r.utils.inheritOptions(E,n),r.utils.initOptions(E),E},r.models.multiChart=function(){"use strict";var t,e,n={top:30,right:20,bottom:50,left:60},i=r.utils.defaultColor(),o=null,a=null,s=!0,l=null,u=function(t){return t.x},c=function(t){return t.y},d="monotone",p=!0,f=d3.scale.linear(),h=d3.scale.linear(),m=d3.scale.linear(),g=r.models.line().yScale(h),v=r.models.line().yScale(m),b=r.models.multiBar().stacked(!1).yScale(h),y=r.models.multiBar().stacked(!1).yScale(m),w=r.models.stackedArea().yScale(h),k=r.models.stackedArea().yScale(m),_=r.models.axis().scale(f).orient("bottom").tickPadding(5),x=r.models.axis().scale(h).orient("left"),S=r.models.axis().scale(m).orient("right"),$=r.models.legend().height(30),T=r.models.tooltip(),C=d3.dispatch();function E(l){return l.each(function(l){var u=d3.select(this);r.utils.initSVG(u),E.update=function(){u.transition().call(E)},E.container=this;var c=r.utils.availableWidth(o,u,n),p=r.utils.availableHeight(a,u,n),C=l.filter(function(t){return"line"==t.type&&1==t.yAxis}),A=l.filter(function(t){return"line"==t.type&&2==t.yAxis}),D=l.filter(function(t){return"bar"==t.type&&1==t.yAxis}),P=l.filter(function(t){return"bar"==t.type&&2==t.yAxis}),O=l.filter(function(t){return"area"==t.type&&1==t.yAxis}),M=l.filter(function(t){return"area"==t.type&&2==t.yAxis});if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return r.utils.noData(E,u),E;u.selectAll(".nv-noData").remove();var R=l.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:t.x,y:t.y}})}),j=l.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:t.x,y:t.y}})});f.domain(d3.extent(d3.merge(R.concat(j)),function(t){return t.x})).range([0,c]);var I=u.selectAll("g.wrap.multiChart").data([l]),N=I.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y1 nv-axis"),N.append("g").attr("class","nv-y2 nv-axis"),N.append("g").attr("class","lines1Wrap"),N.append("g").attr("class","lines2Wrap"),N.append("g").attr("class","bars1Wrap"),N.append("g").attr("class","bars2Wrap"),N.append("g").attr("class","stack1Wrap"),N.append("g").attr("class","stack2Wrap"),N.append("g").attr("class","legendWrap");var F=I.select("g"),U=l.map(function(t,e){return l[e].color||i(t,e)});if(s){var L=$.align()?c/2:c,V=$.align()?L:0;$.width(L),$.color(U),F.select(".legendWrap").datum(l.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":" (right axis)"),t})).call($),n.top!=$.height()&&(n.top=$.height(),p=r.utils.availableHeight(a,u,n)),F.select(".legendWrap").attr("transform","translate("+V+","+-n.top+")")}g.width(c).height(p).interpolate(d).color(U.filter(function(t,e){return!l[e].disabled&&1==l[e].yAxis&&"line"==l[e].type})),v.width(c).height(p).interpolate(d).color(U.filter(function(t,e){return!l[e].disabled&&2==l[e].yAxis&&"line"==l[e].type})),b.width(c).height(p).color(U.filter(function(t,e){return!l[e].disabled&&1==l[e].yAxis&&"bar"==l[e].type})),y.width(c).height(p).color(U.filter(function(t,e){return!l[e].disabled&&2==l[e].yAxis&&"bar"==l[e].type})),w.width(c).height(p).color(U.filter(function(t,e){return!l[e].disabled&&1==l[e].yAxis&&"area"==l[e].type})),k.width(c).height(p).color(U.filter(function(t,e){return!l[e].disabled&&2==l[e].yAxis&&"area"==l[e].type})),F.attr("transform","translate("+n.left+","+n.top+")");var B=F.select(".lines1Wrap").datum(C.filter(function(t){return!t.disabled})),H=F.select(".bars1Wrap").datum(D.filter(function(t){return!t.disabled})),q=F.select(".stack1Wrap").datum(O.filter(function(t){return!t.disabled})),z=F.select(".lines2Wrap").datum(A.filter(function(t){return!t.disabled})),G=F.select(".bars2Wrap").datum(P.filter(function(t){return!t.disabled})),W=F.select(".stack2Wrap").datum(M.filter(function(t){return!t.disabled})),Y=O.length?O.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[],K=M.length?M.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[];function Z(t){var e=2===l[t.seriesIndex].yAxis?S:x;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color},T.duration(100).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).position(t.pos).hidden(!1)}function Q(t){var e=2===l[t.seriesIndex].yAxis?S:x;t.point.x=w.x()(t.point),t.point.y=w.y()(t.point),T.duration(100).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).position(t.pos).hidden(!1)}function X(t){var e=2===l[t.data.series].yAxis?S:x;t.value=b.x()(t.data),t.series={value:b.y()(t.data),color:t.color},T.duration(0).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).hidden(!1)}h.domain(t||d3.extent(d3.merge(R).concat(Y),function(t){return t.y})).range([0,p]),m.domain(e||d3.extent(d3.merge(j).concat(K),function(t){return t.y})).range([0,p]),g.yDomain(h.domain()),b.yDomain(h.domain()),w.yDomain(h.domain()),v.yDomain(m.domain()),y.yDomain(m.domain()),k.yDomain(m.domain()),O.length&&d3.transition(q).call(w),M.length&&d3.transition(W).call(k),D.length&&d3.transition(H).call(b),P.length&&d3.transition(G).call(y),C.length&&d3.transition(B).call(g),A.length&&d3.transition(z).call(v),_._ticks(r.utils.calcTicksX(c/100,l)).tickSize(-p,0),F.select(".nv-x.nv-axis").attr("transform","translate(0,"+p+")"),d3.transition(F.select(".nv-x.nv-axis")).call(_),x._ticks(r.utils.calcTicksY(p/36,l)).tickSize(-c,0),d3.transition(F.select(".nv-y1.nv-axis")).call(x),S._ticks(r.utils.calcTicksY(p/36,l)).tickSize(-c,0),d3.transition(F.select(".nv-y2.nv-axis")).call(S),F.select(".nv-y1.nv-axis").classed("nv-disabled",!R.length).attr("transform","translate("+f.range()[0]+",0)"),F.select(".nv-y2.nv-axis").classed("nv-disabled",!j.length).attr("transform","translate("+f.range()[1]+",0)"),$.dispatch.on("stateChange",function(t){E.update()}),g.dispatch.on("elementMouseover.tooltip",Z),v.dispatch.on("elementMouseover.tooltip",Z),g.dispatch.on("elementMouseout.tooltip",function(t){T.hidden(!0)}),v.dispatch.on("elementMouseout.tooltip",function(t){T.hidden(!0)}),w.dispatch.on("elementMouseover.tooltip",Q),k.dispatch.on("elementMouseover.tooltip",Q),w.dispatch.on("elementMouseout.tooltip",function(t){T.hidden(!0)}),k.dispatch.on("elementMouseout.tooltip",function(t){T.hidden(!0)}),b.dispatch.on("elementMouseover.tooltip",X),y.dispatch.on("elementMouseover.tooltip",X),b.dispatch.on("elementMouseout.tooltip",function(t){T.hidden(!0)}),y.dispatch.on("elementMouseout.tooltip",function(t){T.hidden(!0)}),b.dispatch.on("elementMousemove.tooltip",function(t){T.position({top:d3.event.pageY,left:d3.event.pageX})()}),y.dispatch.on("elementMousemove.tooltip",function(t){T.position({top:d3.event.pageY,left:d3.event.pageX})()})}),E}return E.dispatch=C,E.lines1=g,E.lines2=v,E.bars1=b,E.bars2=y,E.stack1=w,E.stack2=k,E.xAxis=_,E.yAxis1=x,E.yAxis2=S,E.tooltip=T,E.options=r.utils.optionsFunc.bind(E),E._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},showLegend:{get:function(){return s},set:function(t){s=t}},yDomain1:{get:function(){return t},set:function(e){t=e}},yDomain2:{get:function(){return e},set:function(t){e=t}},noData:{get:function(){return l},set:function(t){l=t}},interpolate:{get:function(){return d},set:function(t){d=t}},tooltips:{get:function(){return T.enabled()},set:function(t){r.deprecated("tooltips","use chart.tooltip.enabled() instead"),T.enabled(!!t)}},tooltipContent:{get:function(){return T.contentGenerator()},set:function(t){r.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),T.contentGenerator(t)}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return i},set:function(t){i=r.utils.getColor(t)}},x:{get:function(){return u},set:function(t){u=t,g.x(t),v.x(t),b.x(t),y.x(t),w.x(t),k.x(t)}},y:{get:function(){return c},set:function(t){c=t,g.y(t),v.y(t),w.y(t),k.y(t),b.y(t),y.y(t)}},useVoronoi:{get:function(){return p},set:function(t){p=t,g.useVoronoi(t),v.useVoronoi(t),w.useVoronoi(t),k.useVoronoi(t)}}}),r.utils.initOptions(E),E},r.models.ohlcBar=function(){"use strict";var t,e,n,i,o={top:0,right:0,bottom:0,left:0},a=null,s=null,l=Math.floor(1e4*Math.random()),u=null,c=d3.scale.linear(),d=d3.scale.linear(),p=function(t){return t.x},f=function(t){return t.y},h=function(t){return t.open},m=function(t){return t.close},g=function(t){return t.high},v=function(t){return t.low},b=[],y=[],w=!1,k=!0,_=r.utils.defaultColor(),x=!1,S=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function $(x){return x.each(function(x){u=d3.select(this);var $=r.utils.availableWidth(a,u,o),T=r.utils.availableHeight(s,u,o);r.utils.initSVG(u);var C=$/x[0].values.length*.9;c.domain(t||d3.extent(x[0].values.map(p).concat(b))),c.range(w?n||[.5*$/x[0].values.length,$*(x[0].values.length-.5)/x[0].values.length]:n||[5+C/2,$-C/2-5]),d.domain(e||[d3.min(x[0].values.map(v).concat(y)),d3.max(x[0].values.map(g).concat(y))]).range(i||[T,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1]));var E=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([x[0].values]),A=E.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),D=A.append("defs"),P=A.append("g"),O=E.select("g");P.append("g").attr("class","nv-ticks"),E.attr("transform","translate("+o.left+","+o.top+")"),u.on("click",function(t,e){S.chartClick({data:t,index:e,pos:d3.event,id:l})}),D.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect"),E.select("#nv-chart-clip-path-"+l+" rect").attr("width",$).attr("height",T),O.attr("clip-path",k?"url(#nv-chart-clip-path-"+l+")":"");var M=E.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});M.exit().remove(),M.enter().append("path").attr("class",function(t,e,n){return(h(t,e)>m(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(t,e){return"m0,0l0,"+(d(h(t,e))-d(g(t,e)))+"l"+-C/2+",0l"+C/2+",0l0,"+(d(v(t,e))-d(h(t,e)))+"l0,"+(d(m(t,e))-d(v(t,e)))+"l"+C/2+",0l"+-C/2+",0z"}).attr("transform",function(t,e){return"translate("+c(p(t,e))+","+d(g(t,e))+")"}).attr("fill",function(t,e){return _[0]}).attr("stroke",function(t,e){return _[0]}).attr("x",0).attr("y",function(t,e){return d(Math.max(0,f(t,e)))}).attr("height",function(t,e){return Math.abs(d(f(t,e))-d(0))}),M.attr("class",function(t,e,n){return(h(t,e)>m(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(M).attr("transform",function(t,e){return"translate("+c(p(t,e))+","+d(g(t,e))+")"}).attr("d",function(t,e){var n=$/x[0].values.length*.9;return"m0,0l0,"+(d(h(t,e))-d(g(t,e)))+"l"+-n/2+",0l"+n/2+",0l0,"+(d(v(t,e))-d(h(t,e)))+"l0,"+(d(m(t,e))-d(v(t,e)))+"l"+n/2+",0l"+-n/2+",0z"})}),$}return $.highlightPoint=function(t,e){$.clearHighlights(),u.select(".nv-ohlcBar .nv-tick-0-"+t).classed("hover",e)},$.clearHighlights=function(){u.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},$.dispatch=S,$.options=r.utils.optionsFunc.bind($),$._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return t},set:function(e){t=e}},yDomain:{get:function(){return e},set:function(t){e=t}},xRange:{get:function(){return n},set:function(t){n=t}},yRange:{get:function(){return i},set:function(t){i=t}},forceX:{get:function(){return b},set:function(t){b=t}},forceY:{get:function(){return y},set:function(t){y=t}},padData:{get:function(){return w},set:function(t){w=t}},clipEdge:{get:function(){return k},set:function(t){k=t}},id:{get:function(){return l},set:function(t){l=t}},interactive:{get:function(){return x},set:function(t){x=t}},x:{get:function(){return p},set:function(t){p=t}},y:{get:function(){return f},set:function(t){f=t}},open:{get:function(){return h()},set:function(t){h=t}},close:{get:function(){return m()},set:function(t){m=t}},high:{get:function(){return g},set:function(t){g=t}},low:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return o},set:function(t){o.top=null!=t.top?t.top:o.top,o.right=null!=t.right?t.right:o.right,o.bottom=null!=t.bottom?t.bottom:o.bottom,o.left=null!=t.left?t.left:o.left}},color:{get:function(){return _},set:function(t){_=r.utils.getColor(t)}}}),r.utils.initOptions($),$},r.models.parallelCoordinates=function(){"use strict";var t={top:30,right:0,bottom:10,left:0},e=null,n=null,i=d3.scale.ordinal(),o={},a=[],s=[],l=r.utils.defaultColor(),u=[],c=[],d=[],p=1,f=d3.dispatch("brush","elementMouseover","elementMouseout");function h(m){return m.each(function(h){var m=d3.select(this),g=r.utils.availableWidth(e,m,t),v=r.utils.availableHeight(n,m,t);r.utils.initSVG(m),c=h,i.rangePoints([0,g],1).domain(a);var b={};a.forEach(function(t){var e=d3.extent(h,function(e){return+e[t]});return b[t]=!1,void 0===e[0]&&(b[t]=!0,e[0]=0,e[1]=0),e[0]===e[1]&&(e[0]=e[0]-1,e[1]=e[1]+1),o[t]=d3.scale.linear().domain(e).range([.9*(v-12),0]),o[t].brush=d3.svg.brush().y(o[t]).on("brush",j),"name"!=t});var y=m.selectAll("g.nv-wrap.nv-parallelCoordinates").data([h]),w=y.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),k=y.select("g");w.append("g").attr("class","nv-parallelCoordinates background"),w.append("g").attr("class","nv-parallelCoordinates foreground"),w.append("g").attr("class","nv-parallelCoordinates missingValuesline"),y.attr("transform","translate("+t.left+","+t.top+")");var _,x,S=d3.svg.line().interpolate("cardinal").tension(p),$=d3.svg.axis().orient("left"),T=d3.behavior.drag().on("dragstart",function(t,e){d[t]=this.parentNode.__origin__=i(t),D.attr("visibility","hidden")}).on("drag",function(t,e){d[t]=Math.min(g,Math.max(0,this.parentNode.__origin__+=d3.event.x)),P.attr("d",R),a.sort(function(t,e){return I(t)-I(e)}),i.domain(a),O.attr("transform",function(t){return"translate("+I(t)+")"})}).on("dragend",function(t,e){delete this.parentNode.__origin__,delete d[t],d3.select(this.parentNode).attr("transform","translate("+i(t)+")"),P.attr("d",R),D.attr("d",R).attr("visibility",null)}),C=i.range()[1]-i.range()[0],E=[],A=[0+C/2,v-12,g-C/2,v-12];(_=y.select(".missingValuesline").selectAll("line").data([A])).enter().append("line"),_.exit().remove(),_.attr("x1",function(t){return t[0]}).attr("y1",function(t){return t[1]}).attr("x2",function(t){return t[2]}).attr("y2",function(t){return t[3]}),(x=y.select(".missingValuesline").selectAll("text").data(["undefined values"])).append("text").data(["undefined values"]),x.enter().append("text"),x.exit().remove(),x.attr("y",v).attr("x",g-92-C/2).text(function(t){return t});var D=y.select(".background").selectAll("path").data(h);D.enter().append("path"),D.exit().remove(),D.attr("d",R);var P=y.select(".foreground").selectAll("path").data(h);P.enter().append("path"),P.exit().remove(),P.attr("d",R).attr("stroke",l),P.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),f.elementMouseover({label:t.name,data:t.data,index:e,pos:[d3.mouse(this.parentNode)[0],d3.mouse(this.parentNode)[1]]})}),P.on("mouseout",function(t,e){d3.select(this).classed("hover",!1),f.elementMouseout({label:t.name,data:t.data,index:e})});var O=k.selectAll(".dimension").data(a),M=O.enter().append("g").attr("class","nv-parallelCoordinates dimension");function R(t){return S(a.map(function(e){if(isNaN(t[e])||isNaN(parseFloat(t[e]))){var n=o[e].domain(),r=o[e].range(),a=n[0]-(n[1]-n[0])/9;if(E.indexOf(e)<0){var s=d3.scale.linear().domain([a,n[1]]).range([v-12,r[1]]);o[e].brush.y(s),E.push(e)}return[i(e),o[e](a)]}return E.length>0?(_.style("display","inline"),x.style("display","inline")):(_.style("display","none"),x.style("display","none")),[i(e),o[e](t[e])]}))}function j(){var t=a.filter(function(t){return!o[t].brush.empty()}),e=t.map(function(t){return o[t].brush.extent()});u=[],t.forEach(function(t,n){u[n]={dimension:t,extent:e[n]}}),c=[],P.style("display",function(n){var r=t.every(function(t,r){return!(!isNaN(n[t])||e[r][0]!=o[t].brush.y().domain()[0])||e[r][0]<=n[t]&&n[t]<=e[r][1]});return r&&c.push(n),r?null:"none"}),f.brush({filters:u,active:c})}function I(t){var e=d[t];return null==e?i(t):e}M.append("g").attr("class","nv-parallelCoordinates nv-axis"),M.append("g").attr("class","nv-parallelCoordinates-brush"),M.append("text").attr("class","nv-parallelCoordinates nv-label"),O.attr("transform",function(t){return"translate("+i(t)+",0)"}),O.exit().remove(),O.select(".nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").text(String).on("mouseover",function(t,e){f.elementMouseover({dim:t,pos:[d3.mouse(this.parentNode.parentNode)[0],d3.mouse(this.parentNode.parentNode)[1]]})}).on("mouseout",function(t,e){f.elementMouseout({dim:t})}).call(T),O.select(".nv-axis").each(function(t,e){d3.select(this).call($.scale(o[t]).tickFormat(d3.format(s[e])))}),O.select(".nv-parallelCoordinates-brush").each(function(t){d3.select(this).call(o[t].brush)}).selectAll("rect").attr("x",-8).attr("width",16)}),h}return h.dispatch=f,h.options=r.utils.optionsFunc.bind(h),h._options=Object.create({},{width:{get:function(){return e},set:function(t){e=t}},height:{get:function(){return n},set:function(t){n=t}},dimensionNames:{get:function(){return a},set:function(t){a=t}},dimensionFormats:{get:function(){return s},set:function(t){s=t}},lineTension:{get:function(){return p},set:function(t){p=t}},dimensions:{get:function(){return a},set:function(t){r.deprecated("dimensions","use dimensionNames instead"),a=t}},margin:{get:function(){return t},set:function(e){t.top=void 0!==e.top?e.top:t.top,t.right=void 0!==e.right?e.right:t.right,t.bottom=void 0!==e.bottom?e.bottom:t.bottom,t.left=void 0!==e.left?e.left:t.left}},color:{get:function(){return l},set:function(t){l=r.utils.getColor(t)}}}),r.utils.initOptions(h),h},r.models.pie=function(){"use strict";var t={top:0,right:0,bottom:0,left:0},e=500,n=500,i=function(t){return t.x},o=function(t){return t.y},a=Math.floor(1e4*Math.random()),s=null,l=r.utils.defaultColor(),u=d3.format(",.2f"),c=!0,d=!1,p="key",f=.02,h=!1,m=!1,g=!0,v=0,b=!1,y=!1,w=!1,k=!1,_=0,x=.5,S=[],$=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),T=[],C=[],E=r.utils.renderWatch($);function A(D){return E.reset(),D.each(function(A){var D=e-t.left-t.right,P=n-t.top-t.bottom,O=Math.min(D,P)/2,M=[],R=[];if(s=d3.select(this),0===S.length)for(var j=O-O/5,I=x*O,N=0;N<A[0].length;N++)M.push(j),R.push(I);else M=S.map(function(t){return(t.outer-t.outer/5)*O}),R=S.map(function(t){return(t.inner-t.inner/5)*O}),x=d3.min(S.map(function(t){return t.inner-t.inner/5}));r.utils.initSVG(s);var F=s.selectAll(".nv-wrap.nv-pie").data(A),U=F.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+a).append("g"),L=F.select("g"),V=U.append("g").attr("class","nv-pie");for(U.append("g").attr("class","nv-pieLabels"),F.attr("transform","translate("+t.left+","+t.top+")"),L.select(".nv-pie").attr("transform","translate("+D/2+","+P/2+")"),L.select(".nv-pieLabels").attr("transform","translate("+D/2+","+P/2+")"),s.on("click",function(t,e){$.chartClick({data:t,index:e,pos:d3.event,id:a})}),T=[],C=[],N=0;N<A[0].length;N++){var B=d3.svg.arc().outerRadius(M[N]),H=d3.svg.arc().outerRadius(M[N]+5);!1!==y&&(B.startAngle(y),H.startAngle(y)),!1!==k&&(B.endAngle(k),H.endAngle(k)),h&&(B.innerRadius(R[N]),H.innerRadius(R[N])),B.cornerRadius&&_&&(B.cornerRadius(_),H.cornerRadius(_)),T.push(B),C.push(H)}var q=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:o(t)});q.padAngle&&w&&q.padAngle(w),h&&m&&(V.append("text").attr("class","nv-pie-title"),F.select(".nv-pie-title").style("text-anchor","middle").text(function(t){return m}).style("font-size",Math.min(D,P)*x*2/(m.length+2)+"px").attr("dy","0.35em").attr("transform",function(t,e){return"translate(0, "+v+")"}));var z=F.select(".nv-pie").selectAll(".nv-slice").data(q),G=F.select(".nv-pieLabels").selectAll(".nv-label").data(q);z.exit().remove(),G.exit().remove();var W=z.enter().append("g");if(W.attr("class","nv-slice"),W.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),g&&d3.select(this).select("path").transition().duration(70).attr("d",C[e]),$.elementMouseover({data:t.data,index:e,color:d3.select(this).style("fill")})}),W.on("mouseout",function(t,e){d3.select(this).classed("hover",!1),g&&d3.select(this).select("path").transition().duration(50).attr("d",T[e]),$.elementMouseout({data:t.data,index:e})}),W.on("mousemove",function(t,e){$.elementMousemove({data:t.data,index:e})}),W.on("click",function(t,e){$.elementClick({data:t.data,index:e,color:d3.select(this).style("fill")})}),W.on("dblclick",function(t,e){$.elementDblClick({data:t.data,index:e,color:d3.select(this).style("fill")})}),z.attr("fill",function(t,e){return l(t.data,e)}),z.attr("stroke",function(t,e){return l(t.data,e)}),W.append("path").each(function(t){this._current=t}),z.select("path").transition().attr("d",function(t,e){return T[e](t)}).attrTween("d",function(t,e){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,h||(t.innerRadius=0);var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return T[e](n(t))}}),c){var Y=[];for(N=0;N<A[0].length;N++)Y.push(T[N]),d?h&&(Y[N]=d3.svg.arc().outerRadius(T[N].outerRadius()),!1!==y&&Y[N].startAngle(y),!1!==k&&Y[N].endAngle(k)):h||Y[N].innerRadius(0);G.enter().append("g").classed("nv-label",!0).each(function(t,e){var n=d3.select(this);n.attr("transform",function(t,e){if(b){t.outerRadius=M[e]+10,t.innerRadius=M[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+Y[e].centroid(t)+") rotate("+n+")"}return t.outerRadius=O+10,t.innerRadius=O+15,"translate("+Y[e].centroid(t)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",b?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var K={},Z=function(t){return 140*Math.floor(t[0]/140)+","+14*Math.floor(t[1]/14)};G.watchTransition(E,"pie labels").attr("transform",function(t,e){if(b){t.outerRadius=M[e]+10,t.innerRadius=M[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+Y[e].centroid(t)+") rotate("+n+")"}t.outerRadius=O+10,t.innerRadius=O+15;var r=Y[e].centroid(t);if(t.value){var i=Z(r);K[i]&&(r[1]-=14),K[Z(r)]=!0}return"translate("+r+")"}),G.select(".nv-label text").style("text-anchor",function(t,e){return b?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(t,e){var n=(t.endAngle-t.startAngle)/(2*Math.PI),r="";if(!t.value||n<f)return"";if("function"==typeof p)r=p(t,e,{key:i(t.data),value:o(t.data),percent:u(n)});else switch(p){case"key":r=i(t.data);break;case"value":r=u(o(t.data));break;case"percent":r=d3.format("%")(n)}return r})}}),E.renderEnd("pie immediate"),A}return A.dispatch=$,A.options=r.utils.optionsFunc.bind(A),A._options=Object.create({},{arcsRadius:{get:function(){return S},set:function(t){S=t}},width:{get:function(){return e},set:function(t){e=t}},height:{get:function(){return n},set:function(t){n=t}},showLabels:{get:function(){return c},set:function(t){c=t}},title:{get:function(){return m},set:function(t){m=t}},titleOffset:{get:function(){return v},set:function(t){v=t}},labelThreshold:{get:function(){return f},set:function(t){f=t}},valueFormat:{get:function(){return u},set:function(t){u=t}},x:{get:function(){return i},set:function(t){i=t}},id:{get:function(){return a},set:function(t){a=t}},endAngle:{get:function(){return k},set:function(t){k=t}},startAngle:{get:function(){return y},set:function(t){y=t}},padAngle:{get:function(){return w},set:function(t){w=t}},cornerRadius:{get:function(){return _},set:function(t){_=t}},donutRatio:{get:function(){return x},set:function(t){x=t}},labelsOutside:{get:function(){return d},set:function(t){d=t}},labelSunbeamLayout:{get:function(){return b},set:function(t){b=t}},donut:{get:function(){return h},set:function(t){h=t}},growOnHover:{get:function(){return g},set:function(t){g=t}},pieLabelsOutside:{get:function(){return d},set:function(t){d=t,r.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return d},set:function(t){d=t,r.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return u},set:function(t){u=t,r.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return t},set:function(e){t.top=void 0!==e.top?e.top:t.top,t.right=void 0!==e.right?e.right:t.right,t.bottom=void 0!==e.bottom?e.bottom:t.bottom,t.left=void 0!==e.left?e.left:t.left}},y:{get:function(){return o},set:function(t){o=d3.functor(t)}},color:{get:function(){return l},set:function(t){l=r.utils.getColor(t)}},labelType:{get:function(){return p},set:function(t){p=t||"key"}}}),r.utils.initOptions(A),A},r.models.pieChart=function(){"use strict";var t=r.models.pie(),e=r.models.legend(),n=r.models.tooltip(),i={top:30,right:20,bottom:20,left:20},o=null,a=null,s=!0,l="top",u=r.utils.defaultColor(),c=r.utils.state(),d=null,p=null,f=250,h=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd");n.headerEnabled(!1).duration(0).valueFormatter(function(e,n){return t.valueFormat()(e,n)});var m=r.utils.renderWatch(h),g=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},v=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function b(n){return m.reset(),m.models(t),n.each(function(n){var u=d3.select(this);r.utils.initSVG(u);var p,f=r.utils.availableWidth(o,u,i),m=r.utils.availableHeight(a,u,i);if(b.update=function(){u.transition().call(b)},b.container=this,c.setter(v(n),b.update).getter(g(n)).update(),c.disabled=n.map(function(t){return!!t.disabled}),!d)for(p in d={},c)d[p]=c[p]instanceof Array?c[p].slice(0):c[p];if(!n||!n.length)return r.utils.noData(b,u),b;u.selectAll(".nv-noData").remove();var y=u.selectAll("g.nv-wrap.nv-pieChart").data([n]),w=y.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),k=y.select("g");if(w.append("g").attr("class","nv-pieWrap"),w.append("g").attr("class","nv-legendWrap"),s)if("top"===l)e.width(f).key(t.x()),y.select(".nv-legendWrap").datum(n).call(e),i.top!=e.height()&&(i.top=e.height(),m=r.utils.availableHeight(a,u,i)),y.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")");else if("right"===l){var _=r.models.legend().width();f/2<_&&(_=f/2),e.height(m).key(t.x()),e.width(_),f-=e.width(),y.select(".nv-legendWrap").datum(n).call(e).attr("transform","translate("+f+",0)")}y.attr("transform","translate("+i.left+","+i.top+")"),t.width(f).height(m);var x=k.select(".nv-pieWrap").datum([n]);d3.transition(x).call(t),e.dispatch.on("stateChange",function(t){for(var e in t)c[e]=t[e];h.stateChange(c),b.update()}),h.on("changeState",function(t){void 0!==t.disabled&&(n.forEach(function(e,n){e.disabled=t.disabled[n]}),c.disabled=t.disabled),b.update()})}),m.renderEnd("pieChart immediate"),b}return t.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:b.x()(t.data),value:b.y()(t.data),color:t.color},n.data(t).hidden(!1)}),t.dispatch.on("elementMouseout.tooltip",function(t){n.hidden(!0)}),t.dispatch.on("elementMousemove.tooltip",function(t){n.position({top:d3.event.pageY,left:d3.event.pageX})()}),b.legend=e,b.dispatch=h,b.pie=t,b.tooltip=n,b.options=r.utils.optionsFunc.bind(b),b._options=Object.create({},{noData:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return s},set:function(t){s=t}},legendPosition:{get:function(){return l},set:function(t){l=t}},defaultState:{get:function(){return d},set:function(t){d=t}},tooltips:{get:function(){return n.enabled()},set:function(t){r.deprecated("tooltips","use chart.tooltip.enabled() instead"),n.enabled(!!t)}},tooltipContent:{get:function(){return n.contentGenerator()},set:function(t){r.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),n.contentGenerator(t)}},color:{get:function(){return u},set:function(n){e.color(u=n),t.color(u)}},duration:{get:function(){return f},set:function(t){m.reset(f=t)}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}}}),r.utils.inheritOptions(b,t),r.utils.initOptions(b),b},r.models.scatter=function(){"use strict";var t,e,n,i,o={top:0,right:0,bottom:0,left:0},a=null,s=null,l=r.utils.defaultColor(),u=Math.floor(1e5*Math.random()),c=null,d=d3.scale.linear(),p=d3.scale.linear(),f=d3.scale.linear(),h=function(t){return t.x},m=function(t){return t.y},g=function(t){return t.size||1},v=function(t){return t.shape||"circle"},b=[],y=[],w=[],k=!0,_=function(t){return!t.notActive},x=!1,S=.1,$=!1,T=!0,C=!1,E=function(){return 25},A=null,D=null,P=null,O=null,M=null,R=null,j=!1,I=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),N=!0,F=250,U=!1,L=r.utils.renderWatch(I,F),V=[16,256];function B(F){return L.reset(),F.each(function(F){c=d3.select(this);var B=r.utils.availableWidth(a,c,o),H=r.utils.availableHeight(s,c,o);r.utils.initSVG(c),F.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var q=A&&D&&M?[]:d3.merge(F.map(function(t){return t.values.map(function(t,e){return{x:h(t,e),y:m(t,e),size:g(t,e)}})}));d.domain(A||d3.extent(q.map(function(t){return t.x}).concat(b))),d.range(x&&F[0]?P||[(B*S+B)/(2*F[0].values.length),B-B*(1+S)/(2*F[0].values.length)]:P||[0,B]),p.domain(D||d3.extent(q.map(function(t){return t.y}).concat(y))).range(O||[H,0]),f.domain(M||d3.extent(q.map(function(t){return t.size}).concat(w))).range(R||V),j=d.domain()[0]===d.domain()[1]||p.domain()[0]===p.domain()[1],d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]):p.domain([-1,1])),isNaN(d.domain()[0])&&d.domain([-1,1]),isNaN(p.domain()[0])&&p.domain([-1,1]),t=t||d,e=e||p,n=n||f;var z=c.selectAll("g.nv-wrap.nv-scatter").data([F]),G=z.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+u),W=G.append("defs"),Y=G.append("g"),K=z.select("g");z.classed("nv-single-point",j),Y.append("g").attr("class","nv-groups"),Y.append("g").attr("class","nv-point-paths"),G.append("g").attr("class","nv-point-clips"),z.attr("transform","translate("+o.left+","+o.top+")"),W.append("clipPath").attr("id","nv-edge-clip-"+u).append("rect"),z.select("#nv-edge-clip-"+u+" rect").attr("width",B).attr("height",H>0?H:0),K.attr("clip-path",$?"url(#nv-edge-clip-"+u+")":""),U=!0;var Z=z.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});Z.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),Z.exit().remove(),Z.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),Z.watchTransition(L,"scatter: groups").style("fill",function(t,e){return l(t,e)}).style("stroke",function(t,e){return l(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5);var Q=Z.selectAll("path.nv-point").data(function(t){return t.values.map(function(t,e){return[t,e]}).filter(function(t,e){return _(t[0],e)})});Q.enter().append("path").style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("transform",function(n){return"translate("+t(h(n[0],n[1]))+","+e(m(n[0],n[1]))+")"}).attr("d",r.utils.symbol().type(function(t){return v(t[0])}).size(function(t){return f(g(t[0],t[1]))})),Q.exit().remove(),Z.exit().selectAll("path.nv-point").watchTransition(L,"scatter exit").attr("transform",function(t){return"translate("+d(h(t[0],t[1]))+","+p(m(t[0],t[1]))+")"}).remove(),Q.each(function(t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t[1],!0).classed("nv-noninteractive",!k).classed("hover",!1)}),Q.watchTransition(L,"scatter points").attr("transform",function(t){return"translate("+d(h(t[0],t[1]))+","+p(m(t[0],t[1]))+")"}).attr("d",r.utils.symbol().type(function(t){return v(t[0])}).size(function(t){return f(g(t[0],t[1]))})),clearTimeout(i),i=setTimeout(function(){if(U=!1,!k)return!1;if(!0===N){var t=d3.merge(F.map(function(t,e){return t.values.map(function(t,n){var r=h(t,n),i=m(t,n);return[d(r)+1e-4*Math.random(),p(i)+1e-4*Math.random(),e,n,t]}).filter(function(t,e){return _(t[4],e)})}));if(0==t.length)return!1;t.length<3&&(t.push([d.range()[0]-20,p.range()[0]-20,null,null]),t.push([d.range()[1]+20,p.range()[1]+20,null,null]),t.push([d.range()[0]-20,p.range()[0]+20,null,null]),t.push([d.range()[1]+20,p.range()[1]-20,null,null]));var e=d3.geom.polygon([[-10,-10],[-10,s+10],[a+10,s+10],[a+10,-10]]),n=d3.geom.voronoi(t).map(function(n,r){return{data:e.clip(n),series:t[r][2],point:t[r][3]}});z.select(".nv-point-paths").selectAll("path").remove();var r=z.select(".nv-point-paths").selectAll("path").data(n),i=r.enter().append("svg:path").attr("d",function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"}).attr("id",function(t,e){return"nv-path-"+e}).attr("clip-path",function(t,e){return"url(#nv-clip-"+e+")"});C&&i.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),T&&(z.select(".nv-point-clips").selectAll("clipPath").remove(),z.select(".nv-point-clips").selectAll("clipPath").data(t).enter().append("svg:clipPath").attr("id",function(t,e){return"nv-clip-"+e}).append("svg:circle").attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",E));var u=function(t,e){if(U)return 0;var n=F[t.series];if(void 0!==n){var r=n.values[t.point];r.color=l(n,t.series),r.x=h(r),r.y=m(r);var i=c.node().getBoundingClientRect(),a=window.pageYOffset||document.documentElement.scrollTop,s=window.pageXOffset||document.documentElement.scrollLeft;e({point:r,series:n,pos:{left:d(h(r,t.point))+i.left+s+o.left+10,top:p(m(r,t.point))+i.top+a+o.top+10},seriesIndex:t.series,pointIndex:t.point})}};r.on("click",function(t){u(t,I.elementClick)}).on("dblclick",function(t){u(t,I.elementDblClick)}).on("mouseover",function(t){u(t,I.elementMouseover)}).on("mouseout",function(t,e){u(t,I.elementMouseout)})}else z.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(t,e){if(U||!F[t.series])return 0;var n=F[t.series],r=n.values[e];I.elementClick({point:r,series:n,pos:[d(h(r,e))+o.left,p(m(r,e))+o.top],seriesIndex:t.series,pointIndex:e})}).on("dblclick",function(t,e){if(U||!F[t.series])return 0;var n=F[t.series],r=n.values[e];I.elementDblClick({point:r,series:n,pos:[d(h(r,e))+o.left,p(m(r,e))+o.top],seriesIndex:t.series,pointIndex:e})}).on("mouseover",function(t,e){if(U||!F[t.series])return 0;var n=F[t.series],r=n.values[e];I.elementMouseover({point:r,series:n,pos:[d(h(r,e))+o.left,p(m(r,e))+o.top],seriesIndex:t.series,pointIndex:e,color:l(t,e)})}).on("mouseout",function(t,e){if(U||!F[t.series])return 0;var n=F[t.series];I.elementMouseout({point:n.values[e],series:n,seriesIndex:t.series,pointIndex:e,color:l(t,e)})})},300),t=d.copy(),e=p.copy(),n=f.copy()}),L.renderEnd("scatter immediate"),B}return B.dispatch=I,B.options=r.utils.optionsFunc.bind(B),B._calls=new function(){this.clearHighlights=function(){return r.dom.write(function(){c.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(t,e,n){r.dom.write(function(){c.select(" .nv-series-"+t+" .nv-point-"+e).classed("hover",n)})}},I.on("elementMouseover.point",function(t){k&&B._calls.highlightPoint(t.seriesIndex,t.pointIndex,!0)}),I.on("elementMouseout.point",function(t){k&&B._calls.highlightPoint(t.seriesIndex,t.pointIndex,!1)}),B._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return p},set:function(t){p=t}},pointScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return A},set:function(t){A=t}},yDomain:{get:function(){return D},set:function(t){D=t}},pointDomain:{get:function(){return M},set:function(t){M=t}},xRange:{get:function(){return P},set:function(t){P=t}},yRange:{get:function(){return O},set:function(t){O=t}},pointRange:{get:function(){return R},set:function(t){R=t}},forceX:{get:function(){return b},set:function(t){b=t}},forceY:{get:function(){return y},set:function(t){y=t}},forcePoint:{get:function(){return w},set:function(t){w=t}},interactive:{get:function(){return k},set:function(t){k=t}},pointActive:{get:function(){return _},set:function(t){_=t}},padDataOuter:{get:function(){return S},set:function(t){S=t}},padData:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return $},set:function(t){$=t}},clipVoronoi:{get:function(){return T},set:function(t){T=t}},clipRadius:{get:function(){return E},set:function(t){E=t}},showVoronoi:{get:function(){return C},set:function(t){C=t}},id:{get:function(){return u},set:function(t){u=t}},x:{get:function(){return h},set:function(t){h=d3.functor(t)}},y:{get:function(){return m},set:function(t){m=d3.functor(t)}},pointSize:{get:function(){return g},set:function(t){g=d3.functor(t)}},pointShape:{get:function(){return v},set:function(t){v=d3.functor(t)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},duration:{get:function(){return F},set:function(t){L.reset(F=t)}},color:{get:function(){return l},set:function(t){l=r.utils.getColor(t)}},useVoronoi:{get:function(){return N},set:function(t){!1===(N=t)&&(T=!1)}}}),r.utils.initOptions(B),B},r.models.scatterChart=function(){"use strict";var t=r.models.scatter(),e=r.models.axis(),n=r.models.axis(),i=r.models.legend(),o=r.models.distribution(),a=r.models.distribution(),s=r.models.tooltip(),l={top:30,right:20,bottom:50,left:75},u=null,c=null,d=null,p=r.utils.defaultColor(),f=t.xScale(),h=t.yScale(),m=!1,g=!1,v=!0,b=!0,y=!0,w=!1,k=r.utils.state(),_=null,x=d3.dispatch("stateChange","changeState","renderEnd"),S=null,$=250;t.xScale(f).yScale(h),e.orient("bottom").tickPadding(10),n.orient(w?"right":"left").tickPadding(10),o.axis("x"),a.axis("y"),s.headerFormatter(function(t,n){return e.tickFormat()(t,n)}).valueFormatter(function(t,e){return n.tickFormat()(t,e)});var T=r.utils.renderWatch(x,$),C=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},E=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function A(S){return T.reset(),T.models(t),b&&T.models(e),y&&T.models(n),m&&T.models(o),g&&T.models(a),S.each(function(S){d=d3.select(this),r.utils.initSVG(d);var D,P=r.utils.availableWidth(u,d,l),O=r.utils.availableHeight(c,d,l);if(A.update=function(){0===$?d.call(A):d.transition().duration($).call(A)},A.container=this,k.setter(E(S),A.update).getter(C(S)).update(),k.disabled=S.map(function(t){return!!t.disabled}),!_)for(D in _={},k)_[D]=k[D]instanceof Array?k[D].slice(0):k[D];if(!(S&&S.length&&S.filter(function(t){return t.values.length}).length))return r.utils.noData(A,d),T.renderEnd("scatter immediate"),A;d.selectAll(".nv-noData").remove(),f=t.xScale(),h=t.yScale();var M=d.selectAll("g.nv-wrap.nv-scatterChart").data([S]),R=M.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+t.id()).append("g"),j=M.select("g");R.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-scatterWrap"),R.append("g").attr("class","nv-regressionLinesWrap"),R.append("g").attr("class","nv-distWrap"),R.append("g").attr("class","nv-legendWrap"),w&&j.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)"),v&&(i.width(P),M.select(".nv-legendWrap").datum(S).call(i),l.top!=i.height()&&(l.top=i.height(),O=r.utils.availableHeight(c,d,l)),M.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")),M.attr("transform","translate("+l.left+","+l.top+")"),t.width(P).height(O).color(S.map(function(t,e){return t.color=t.color||p(t,e),t.color}).filter(function(t,e){return!S[e].disabled})),M.select(".nv-scatterWrap").datum(S.filter(function(t){return!t.disabled})).call(t),M.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+t.id()+")");var I=M.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});I.enter().append("g").attr("class","nv-regLines");var N=I.selectAll(".nv-regLine").data(function(t){return[t]});N.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),N.filter(function(t){return t.intercept&&t.slope}).watchTransition(T,"scatterPlusLineChart: regline").attr("x1",f.range()[0]).attr("x2",f.range()[1]).attr("y1",function(t,e){return h(f.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t,e){return h(f.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return p(t,n)}).style("stroke-opacity",function(t,e){return t.disabled||void 0===t.slope||void 0===t.intercept?0:1}),b&&(e.scale(f)._ticks(r.utils.calcTicksX(P/100,S)).tickSize(-O,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+h.range()[0]+")").call(e)),y&&(n.scale(h)._ticks(r.utils.calcTicksY(O/36,S)).tickSize(-P,0),j.select(".nv-y.nv-axis").call(n)),m&&(o.getData(t.x()).scale(f).width(P).color(S.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!S[e].disabled})),R.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),j.select(".nv-distributionX").attr("transform","translate(0,"+h.range()[0]+")").datum(S.filter(function(t){return!t.disabled})).call(o)),g&&(a.getData(t.y()).scale(h).width(O).color(S.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!S[e].disabled})),R.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),j.select(".nv-distributionY").attr("transform","translate("+(w?P:-a.size())+",0)").datum(S.filter(function(t){return!t.disabled})).call(a)),i.dispatch.on("stateChange",function(t){for(var e in t)k[e]=t[e];x.stateChange(k),A.update()}),x.on("changeState",function(t){void 0!==t.disabled&&(S.forEach(function(e,n){e.disabled=t.disabled[n]}),k.disabled=t.disabled),A.update()}),t.dispatch.on("elementMouseout.tooltip",function(e){s.hidden(!0),d.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",0),d.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",a.size())}),t.dispatch.on("elementMouseover.tooltip",function(t){d.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.pos.top-O-l.top),d.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos.left+o.size()-l.left),s.position(t.pos).data(t).hidden(!1)}),f.copy(),h.copy()}),T.renderEnd("scatter with line immediate"),A}return A.dispatch=x,A.scatter=t,A.legend=i,A.xAxis=e,A.yAxis=n,A.distX=o,A.distY=a,A.tooltip=s,A.options=r.utils.optionsFunc.bind(A),A._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},container:{get:function(){return d},set:function(t){d=t}},showDistX:{get:function(){return m},set:function(t){m=t}},showDistY:{get:function(){return g},set:function(t){g=t}},showLegend:{get:function(){return v},set:function(t){v=t}},showXAxis:{get:function(){return b},set:function(t){b=t}},showYAxis:{get:function(){return y},set:function(t){y=t}},defaultState:{get:function(){return _},set:function(t){_=t}},noData:{get:function(){return S},set:function(t){S=t}},duration:{get:function(){return $},set:function(t){$=t}},tooltips:{get:function(){return s.enabled()},set:function(t){r.deprecated("tooltips","use chart.tooltip.enabled() instead"),s.enabled(!!t)}},tooltipContent:{get:function(){return s.contentGenerator()},set:function(t){r.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),s.contentGenerator(t)}},tooltipXContent:{get:function(){return s.contentGenerator()},set:function(t){r.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},tooltipYContent:{get:function(){return s.contentGenerator()},set:function(t){r.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},rightAlignYAxis:{get:function(){return w},set:function(t){w=t,n.orient(t?"right":"left")}},color:{get:function(){return p},set:function(t){p=r.utils.getColor(t),i.color(p),o.color(p),a.color(p)}}}),r.utils.inheritOptions(A,t),r.utils.initOptions(A),A},r.models.sparkline=function(){"use strict";var t,e,n,i,o={top:2,right:0,bottom:2,left:0},a=400,s=32,l=null,u=!0,c=d3.scale.linear(),d=d3.scale.linear(),p=function(t){return t.x},f=function(t){return t.y},h=r.utils.getColor(["#000"]);function m(u){return u.each(function(u){var m=a-o.left-o.right,g=s-o.top-o.bottom;l=d3.select(this),r.utils.initSVG(l),c.domain(t||d3.extent(u,p)).range(n||[0,m]),d.domain(e||d3.extent(u,f)).range(i||[g,0]);var v=l.selectAll("g.nv-wrap.nv-sparkline").data([u]);v.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g"),v.select("g"),v.attr("transform","translate("+o.left+","+o.top+")");var b=v.selectAll("path").data(function(t){return[t]});b.enter().append("path"),b.exit().remove(),b.style("stroke",function(t,e){return t.color||h(t,e)}).attr("d",d3.svg.line().x(function(t,e){return c(p(t,e))}).y(function(t,e){return d(f(t,e))}));var y=v.selectAll("circle.nv-point").data(function(t){var e=t.map(function(t,e){return f(t,e)});function n(e){if(-1!=e){var n=t[e];return n.pointIndex=e,n}return null}var r=n(e.lastIndexOf(d.domain()[1]));return[n(e.indexOf(d.domain()[0])),r,n(e.length-1)].filter(function(t){return null!=t})});y.enter().append("circle"),y.exit().remove(),y.attr("cx",function(t,e){return c(p(t,t.pointIndex))}).attr("cy",function(t,e){return d(f(t,t.pointIndex))}).attr("r",2).attr("class",function(t,e){return p(t,t.pointIndex)==c.domain()[1]?"nv-point nv-currentValue":f(t,t.pointIndex)==d.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),m}return m.options=r.utils.optionsFunc.bind(m),m._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},xDomain:{get:function(){return t},set:function(e){t=e}},yDomain:{get:function(){return e},set:function(t){e=t}},xRange:{get:function(){return n},set:function(t){n=t}},yRange:{get:function(){return i},set:function(t){i=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return d},set:function(t){d=t}},animate:{get:function(){return u},set:function(t){u=t}},x:{get:function(){return p},set:function(t){p=d3.functor(t)}},y:{get:function(){return f},set:function(t){f=d3.functor(t)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return h},set:function(t){h=r.utils.getColor(t)}}}),r.utils.initOptions(m),m},r.models.sparklinePlus=function(){"use strict";var t,e,n=r.models.sparkline(),i={top:15,right:100,bottom:10,left:50},o=null,a=null,s=[],l=!1,u=d3.format(",r"),c=d3.format(",.2f"),d=!0,p=!0,f=!1,h=null;function m(h){return h.each(function(h){var g=d3.select(this);r.utils.initSVG(g);var v=r.utils.availableWidth(o,g,i),b=r.utils.availableHeight(a,g,i);if(m.update=function(){g.call(m)},m.container=this,!h||!h.length)return r.utils.noData(m,g),m;g.selectAll(".nv-noData").remove();var y=n.y()(h[h.length-1],h.length-1);t=n.xScale(),e=n.yScale();var w=g.selectAll("g.nv-wrap.nv-sparklineplus").data([h]),k=w.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),_=w.select("g");k.append("g").attr("class","nv-sparklineWrap"),k.append("g").attr("class","nv-valueWrap"),k.append("g").attr("class","nv-hoverArea"),w.attr("transform","translate("+i.left+","+i.top+")");var x=_.select(".nv-sparklineWrap");if(n.width(v).height(b),x.call(n),d){var S=_.select(".nv-valueWrap").selectAll(".nv-currentValue").data([y]);S.enter().append("text").attr("class","nv-currentValue").attr("dx",f?-8:8).attr("dy",".9em").style("text-anchor",f?"end":"start"),S.attr("x",v+(f?i.right:0)).attr("y",p?function(t){return e(t)}:0).style("fill",n.color()(h[h.length-1],h.length-1)).text(c(y))}function $(){if(!l){var e=_.selectAll(".nv-hoverValue").data(s),r=e.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);e.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),e.attr("transform",function(e){return"translate("+t(n.x()(h[e],e))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),s.length&&(r.append("line").attr("x1",0).attr("y1",-i.top).attr("x2",0).attr("y2",b),r.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-i.top).attr("text-anchor","end").attr("dy",".9em"),_.select(".nv-hoverValue .nv-xValue").text(u(n.x()(h[s[0]],s[0]))),r.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-i.top).attr("text-anchor","start").attr("dy",".9em"),_.select(".nv-hoverValue .nv-yValue").text(c(n.y()(h[s[0]],s[0]))))}}k.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!l){var e=d3.mouse(this)[0]-i.left;s=[function(t,e){for(var r=Math.abs(n.x()(t[0],0)-e),i=0,o=0;o<t.length;o++)Math.abs(n.x()(t[o],o)-e)<r&&(r=Math.abs(n.x()(t[o],o)-e),i=o);return i}(h,Math.round(t.invert(e)))],$()}}).on("click",function(){l=!l}).on("mouseout",function(){s=[],$()}),_.select(".nv-hoverArea rect").attr("transform",function(t){return"translate("+-i.left+","+-i.top+")"}).attr("width",v+i.left+i.right).attr("height",b+i.top)}),m}return m.sparkline=n,m.options=r.utils.optionsFunc.bind(m),m._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},xTickFormat:{get:function(){return u},set:function(t){u=t}},yTickFormat:{get:function(){return c},set:function(t){c=t}},showLastValue:{get:function(){return d},set:function(t){d=t}},alignValue:{get:function(){return p},set:function(t){p=t}},rightAlignValue:{get:function(){return f},set:function(t){f=t}},noData:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}}}),r.utils.inheritOptions(m,n),r.utils.initOptions(m),m},r.models.stackedArea=function(){"use strict";var t,e,n={top:0,right:0,bottom:0,left:0},i=960,o=500,a=r.utils.defaultColor(),s=Math.floor(1e5*Math.random()),l=null,u=function(t){return t.x},c=function(t){return t.y},d="stack",p="zero",f="default",h="linear",m=!1,g=r.models.scatter(),v=250,b=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");g.pointSize(2.2).pointDomain([2.2,2.2]);var y=r.utils.renderWatch(b,v);function w(d){return y.reset(),y.models(g),d.each(function(d){var v=i-n.left-n.right,k=o-n.top-n.bottom;l=d3.select(this),r.utils.initSVG(l),t=g.xScale(),e=g.yScale();var _=d;d.forEach(function(t,e){t.seriesIndex=e,t.values=t.values.map(function(t,n){return t.index=n,t.seriesIndex=e,t})});var x=d.filter(function(t){return!t.disabled});d=d3.layout.stack().order(f).offset(p).values(function(t){return t.values}).x(u).y(c).out(function(t,e,n){t.display={y:n,y0:e}})(x);var S=l.selectAll("g.nv-wrap.nv-stackedarea").data([d]),$=S.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),T=$.append("defs"),C=$.append("g"),E=S.select("g");C.append("g").attr("class","nv-areaWrap"),C.append("g").attr("class","nv-scatterWrap"),S.attr("transform","translate("+n.left+","+n.top+")"),0==g.forceY().length&&g.forceY().push(0),g.width(v).height(k).x(u).y(function(t){return t.display.y+t.display.y0}).forceY([0]).color(d.map(function(t,e){return t.color||a(t,t.seriesIndex)})),E.select(".nv-scatterWrap").datum(d).call(g),T.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect"),S.select("#nv-edge-clip-"+s+" rect").attr("width",v).attr("height",k),E.attr("clip-path",m?"url(#nv-edge-clip-"+s+")":"");var A=d3.svg.area().x(function(e,n){return t(u(e,n))}).y0(function(t){return e(t.display.y0)}).y1(function(t){return e(t.display.y+t.display.y0)}).interpolate(h),D=d3.svg.area().x(function(e,n){return t(u(e,n))}).y0(function(t){return e(t.display.y0)}).y1(function(t){return e(t.display.y0)}),P=E.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});P.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t,e){return D(t.values,t.seriesIndex)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),b.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),b.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("click",function(t,e){d3.select(this).classed("hover",!1),b.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}),P.exit().remove(),P.style("fill",function(t,e){return t.color||a(t,t.seriesIndex)}).style("stroke",function(t,e){return t.color||a(t,t.seriesIndex)}),P.watchTransition(y,"stackedArea path").attr("d",function(t,e){return A(t.values,e)}),g.dispatch.on("elementMouseover.area",function(t){E.select(".nv-chart-"+s+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),g.dispatch.on("elementMouseout.area",function(t){E.select(".nv-chart-"+s+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),w.d3_stackedOffset_stackPercent=function(t){var e,n,r,i=t.length,o=t[0].length,a=[];for(n=0;n<o;++n){for(e=0,r=0;e<_.length;e++)r+=c(_[e].values[n]);if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=0}for(n=0;n<o;++n)a[n]=0;return a}}),y.renderEnd("stackedArea immediate"),w}return w.dispatch=b,w.scatter=g,g.dispatch.on("elementClick",function(){b.elementClick.apply(this,arguments)}),g.dispatch.on("elementMouseover",function(){b.elementMouseover.apply(this,arguments)}),g.dispatch.on("elementMouseout",function(){b.elementMouseout.apply(this,arguments)}),w.interpolate=function(t){return arguments.length?(h=t,w):h},w.duration=function(t){return arguments.length?(y.reset(v=t),g.duration(v),w):v},w.dispatch=b,w.scatter=g,w.options=r.utils.optionsFunc.bind(w),w._options=Object.create({},{width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return o},set:function(t){o=t}},clipEdge:{get:function(){return m},set:function(t){m=t}},offset:{get:function(){return p},set:function(t){p=t}},order:{get:function(){return f},set:function(t){f=t}},interpolate:{get:function(){return h},set:function(t){h=t}},x:{get:function(){return u},set:function(t){u=d3.functor(t)}},y:{get:function(){return c},set:function(t){c=d3.functor(t)}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return a},set:function(t){a=r.utils.getColor(t)}},style:{get:function(){return d},set:function(t){switch(d=t){case"stack":w.offset("zero"),w.order("default");break;case"stream":w.offset("wiggle"),w.order("inside-out");break;case"stream-center":w.offset("silhouette"),w.order("inside-out");break;case"expand":w.offset("expand"),w.order("default");break;case"stack_percent":w.offset(w.d3_stackedOffset_stackPercent),w.order("default")}}},duration:{get:function(){return v},set:function(t){y.reset(v=t),g.duration(v)}}}),r.utils.inheritOptions(w,g),r.utils.initOptions(w),w},r.models.stackedAreaChart=function(){"use strict";var t,e,n=r.models.stackedArea(),i=r.models.axis(),o=r.models.axis(),a=r.models.legend(),s=r.models.legend(),l=r.interactiveGuideline(),u=r.models.tooltip(),c={top:30,right:25,bottom:50,left:60},d=null,p=null,f=r.utils.defaultColor(),h=!0,m=!0,g=!0,v=!0,b=!1,y=!1,w=r.utils.state(),k=null,_=null,x=d3.dispatch("stateChange","changeState","renderEnd"),S=250,$=["Stacked","Stream","Expanded"],T={},C=250;w.style=n.style(),i.orient("bottom").tickPadding(7),o.orient(b?"right":"left"),u.headerFormatter(function(t,e){return i.tickFormat()(t,e)}).valueFormatter(function(t,e){return o.tickFormat()(t,e)}),l.tooltip.headerFormatter(function(t,e){return i.tickFormat()(t,e)}).valueFormatter(function(t,e){return o.tickFormat()(t,e)});var E=null,A=null;s.updateState(!1);var D=r.utils.renderWatch(x),P=(n.style(),function(t){return function(){return{active:t.map(function(t){return!t.disabled}),style:n.style()}}}),O=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},M=d3.format("%");function R(u){return D.reset(),D.models(n),g&&D.models(i),v&&D.models(o),u.each(function(u){var _=d3.select(this),D=this;r.utils.initSVG(_);var j,I=r.utils.availableWidth(d,_,c),N=r.utils.availableHeight(p,_,c);if(R.update=function(){_.transition().duration(C).call(R)},R.container=this,w.setter(O(u),R.update).getter(P(u)).update(),w.disabled=u.map(function(t){return!!t.disabled}),!k)for(j in k={},w)k[j]=w[j]instanceof Array?w[j].slice(0):w[j];if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return r.utils.noData(R,_),R;_.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale();var F=_.selectAll("g.nv-wrap.nv-stackedAreaChart").data([u]),U=F.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),L=F.select("g");if(U.append("rect").style("opacity",0),U.append("g").attr("class","nv-x nv-axis"),U.append("g").attr("class","nv-y nv-axis"),U.append("g").attr("class","nv-stackedWrap"),U.append("g").attr("class","nv-legendWrap"),U.append("g").attr("class","nv-controlsWrap"),U.append("g").attr("class","nv-interactive"),L.select("rect").attr("width",I).attr("height",N),m){var V=h?I-S:I;a.width(V),L.select(".nv-legendWrap").datum(u).call(a),c.top!=a.height()&&(c.top=a.height(),N=r.utils.availableHeight(p,_,c)),L.select(".nv-legendWrap").attr("transform","translate("+(I-V)+","+-c.top+")")}if(h){var B=[{key:T.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=n.style(),style:"stack"},{key:T.stream||"Stream",metaKey:"Stream",disabled:"stream"!=n.style(),style:"stream"},{key:T.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=n.style(),style:"expand"},{key:T.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=n.style(),style:"stack_percent"}];S=$.length/3*260,B=B.filter(function(t){return-1!==$.indexOf(t.metaKey)}),s.width(S).color(["#444","#444","#444"]),L.select(".nv-controlsWrap").datum(B).call(s),c.top!=Math.max(s.height(),a.height())&&(c.top=Math.max(s.height(),a.height()),N=r.utils.availableHeight(p,_,c)),L.select(".nv-controlsWrap").attr("transform","translate(0,"+-c.top+")")}if(F.attr("transform","translate("+c.left+","+c.top+")"),b&&L.select(".nv-y.nv-axis").attr("transform","translate("+I+",0)"),y&&(l.width(I).height(N).margin({left:c.left,top:c.top}).svgContainer(_).xScale(t),F.select(".nv-interactive").call(l)),n.width(I).height(N),L.select(".nv-stackedWrap").datum(u).transition().call(n),g&&(i.scale(t)._ticks(r.utils.calcTicksX(I/100,u)).tickSize(-N,0),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+N+")"),L.select(".nv-x.nv-axis").transition().duration(0).call(i)),v){var H;if(H="wiggle"===n.offset()?0:r.utils.calcTicksY(N/36,u),o.scale(e)._ticks(H).tickSize(-I,0),"expand"===n.style()||"stack_percent"===n.style()){var q=o.tickFormat();E&&q===M||(E=q),o.tickFormat(M)}else E&&(o.tickFormat(E),E=null);L.select(".nv-y.nv-axis").transition().duration(0).call(o)}n.dispatch.on("areaClick.toggle",function(t){1===u.filter(function(t){return!t.disabled}).length?u.forEach(function(t){t.disabled=!1}):u.forEach(function(e,n){e.disabled=n!=t.seriesIndex}),w.disabled=u.map(function(t){return!!t.disabled}),x.stateChange(w),R.update()}),a.dispatch.on("stateChange",function(t){for(var e in t)w[e]=t[e];x.stateChange(w),R.update()}),s.dispatch.on("legendClick",function(t,e){t.disabled&&(B=B.map(function(t){return t.disabled=!0,t}),t.disabled=!1,n.style(t.style),w.style=n.style(),x.stateChange(w),R.update())}),l.dispatch.on("elementMousemove",function(t){n.clearHighlights();var e,o,a,s=[];if(u.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(i,l){o=r.interactiveBisect(i.values,t.pointXValue,R.x());var u=i.values[o];if(null!=R.y()(u,o)&&n.highlightPoint(l,o,!0),void 0!==u){void 0===e&&(e=u),void 0===a&&(a=R.xScale()(R.x()(u,o)));var c="expand"==n.style()?u.display.y:R.y()(u,o);s.push({key:i.key,value:c,color:f(i,i.seriesIndex),stackedValue:u.display})}}),s.reverse(),s.length>2){var d=R.yScale().invert(t.mouseY),p=null;s.forEach(function(t,e){d=Math.abs(d);var n=Math.abs(t.stackedValue.y0),r=Math.abs(t.stackedValue.y);d>=n&&d<=r+n&&(p=e)}),null!=p&&(s[p].highlight=!0)}var h=i.tickFormat()(R.x()(e,o)),m=l.tooltip.valueFormatter();"expand"===n.style()||"stack_percent"===n.style()?(A||(A=m),m=d3.format(".1%")):A&&(m=A,A=null),l.tooltip.position({left:a+c.left,top:t.mouseY+c.top}).chartContainer(D.parentNode).valueFormatter(m).data({value:h,series:s})(),l.renderGuideLine(a)}),l.dispatch.on("elementMouseout",function(t){n.clearHighlights()}),x.on("changeState",function(t){void 0!==t.disabled&&u.length===t.disabled.length&&(u.forEach(function(e,n){e.disabled=t.disabled[n]}),w.disabled=t.disabled),void 0!==t.style&&n.style(t.style),R.update()})}),D.renderEnd("stacked Area chart immediate"),R}return n.dispatch.on("elementMouseover.tooltip",function(t){t.point.x=n.x()(t.point),t.point.y=n.y()(t.point),u.data(t).position(t.pos).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(t){u.hidden(!0)}),R.dispatch=x,R.stacked=n,R.legend=a,R.controls=s,R.xAxis=i,R.yAxis=o,R.interactiveLayer=l,R.tooltip=u,R.dispatch=x,R.options=r.utils.optionsFunc.bind(R),R._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},defaultState:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return _},set:function(t){_=t}},showControls:{get:function(){return h},set:function(t){h=t}},controlLabels:{get:function(){return T},set:function(t){T=t}},controlOptions:{get:function(){return $},set:function(t){$=t}},tooltips:{get:function(){return u.enabled()},set:function(t){r.deprecated("tooltips","use chart.tooltip.enabled() instead"),u.enabled(!!t)}},tooltipContent:{get:function(){return u.contentGenerator()},set:function(t){r.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),u.contentGenerator(t)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return C},set:function(t){D.reset(C=t),n.duration(C),i.duration(C),o.duration(C)}},color:{get:function(){return f},set:function(t){f=r.utils.getColor(t),a.color(f),n.color(f)}},rightAlignYAxis:{get:function(){return b},set:function(t){o.orient((b=t)?"right":"left")}},useInteractiveGuideline:{get:function(){return y},set:function(t){y=!!t,R.interactive(!t),R.useVoronoi(!t),n.scatter.interactive(!t)}}}),r.utils.inheritOptions(R,n),r.utils.initOptions(R),R},r.models.sunburst=function(){"use strict";var t,e,n,i={top:0,right:0,bottom:0,left:0},o=null,a=null,s="count",l={count:function(t){return 1},size:function(t){return t.size}},u=Math.floor(1e4*Math.random()),c=null,d=r.utils.defaultColor(),p=500,f=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),h=d3.scale.linear().range([0,2*Math.PI]),m=d3.scale.sqrt(),g=d3.layout.partition().sort(null).value(function(t){return 1}),v=d3.svg.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,h(t.x)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,h(t.x+t.dx)))}).innerRadius(function(t){return Math.max(0,m(t.y))}).outerRadius(function(t){return Math.max(0,m(t.y+t.dy))}),b=r.utils.renderWatch(f);function y(w){return b.reset(),w.each(function(b){c=d3.select(this);var y,w=r.utils.availableWidth(o,c,i),k=r.utils.availableHeight(a,c,i),_=Math.min(w,k)/2;r.utils.initSVG(c);var x=c.selectAll(".nv-wrap.nv-sunburst").data(b),S=x.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+u).selectAll("nv-sunburst");function $(t){t.x0=t.x,t.dx0=t.dx}function T(t){var e=d3.interpolate(h.domain(),[t.x,t.x+t.dx]),n=d3.interpolate(m.domain(),[t.y,1]),r=d3.interpolate(m.range(),[t.y?20:0,_]);return function(t,i){return i?function(e){return v(t)}:function(i){return h.domain(e(i)),m.domain(n(i)).range(r(i)),v(t)}}}x.attr("transform","translate("+w/2+","+k/2+")"),c.on("click",function(t,e){f.chartClick({data:t,index:e,pos:d3.event,id:u})}),m.range([0,_]),t=t||b,n=b[0],g.value(l[s]||l.count),y=S.data(g.nodes).enter().append("path").attr("d",v).style("fill",function(t){return d((t.children?t:t.parent).name)}).style("stroke","#FFF").on("click",function(n){e!==t&&t!==n&&(e=t),t=n,y.transition().duration(p).attrTween("d",T(n))}).each($).on("dblclick",function(t){e.parent==t&&y.transition().duration(p).attrTween("d",T(n))}).each($).on("mouseover",function(t,e){d3.select(this).classed("hover",!0).style("opacity",.8),f.elementMouseover({data:t,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1).style("opacity",1),f.elementMouseout({data:t})}).on("mousemove",function(t,e){f.elementMousemove({data:t})})}),b.renderEnd("sunburst immediate"),y}return y.dispatch=f,y.options=r.utils.optionsFunc.bind(y),y._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},mode:{get:function(){return s},set:function(t){s=t}},id:{get:function(){return u},set:function(t){u=t}},duration:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return i},set:function(t){i.top=null!=t.top?t.top:i.top,i.right=null!=t.right?t.right:i.right,i.bottom=null!=t.bottom?t.bottom:i.bottom,i.left=null!=t.left?t.left:i.left}},color:{get:function(){return d},set:function(t){d=r.utils.getColor(t)}}}),r.utils.initOptions(y),y},r.models.sunburstChart=function(){"use strict";var t=r.models.sunburst(),e=r.models.tooltip(),n={top:30,right:20,bottom:20,left:20},i=null,o=null,a=r.utils.defaultColor(),s=(Math.round(1e5*Math.random()),null),l=null,u=250,c=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),d=r.utils.renderWatch(c);function p(e){return d.reset(),d.models(t),e.each(function(e){var a=d3.select(this);r.utils.initSVG(a);var s=r.utils.availableWidth(i,a,n),l=r.utils.availableHeight(o,a,n);if(p.update=function(){0===u?a.call(p):a.transition().duration(u).call(p)},p.container=this,!e||!e.length)return r.utils.noData(p,a),p;a.selectAll(".nv-noData").remove();var c=a.selectAll("g.nv-wrap.nv-sunburstChart").data(e),d=c.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburstChart").append("g"),f=c.select("g");d.append("g").attr("class","nv-sunburstWrap"),c.attr("transform","translate("+n.left+","+n.top+")"),t.width(s).height(l);var h=f.select(".nv-sunburstWrap").datum(e);d3.transition(h).call(t)}),d.renderEnd("sunburstChart immediate"),p}return e.headerEnabled(!1).duration(0).valueFormatter(function(t,e){return t}),t.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.data.name,value:t.data.size,color:t.color},e.data(t).hidden(!1)}),t.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),t.dispatch.on("elementMousemove.tooltip",function(t){e.position({top:d3.event.pageY,left:d3.event.pageX})()}),p.dispatch=c,p.sunburst=t,p.tooltip=e,p.options=r.utils.optionsFunc.bind(p),p._options=Object.create({},{noData:{get:function(){return l},set:function(t){l=t}},defaultState:{get:function(){return s},set:function(t){s=t}},color:{get:function(){return a},set:function(e){t.color(a=e)}},duration:{get:function(){return u},set:function(e){d.reset(u=e),t.duration(u)}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}}}),r.utils.inheritOptions(p,t),r.utils.initOptions(p),p},r.version="1.8.1"},"SI+0":function(t,e){angular.module("doubtfire.errors.states",["doubtfire.errors.states.not-found","doubtfire.errors.states.timeout","doubtfire.errors.states.unauthorised"])},SIT7:function(t,e){angular.module("doubtfire.common.header.unit-dropdown",[]).directive("unitDropdown",function(){return{restrict:"E",replace:!0,templateUrl:"common/header/unit-dropdown/unit-dropdown.tpl.html",controller:function(t,e,n,r){return t.showDate=r.showDate,t.isUniqueUnitRole=function(e){return 1===_.filter(t.unitRoles,{unit_id:e.unit_id}).length||"Tutor"===e.role},e.getUnitRoles(function(e){return t.unitRoles=e}),n.getProjects(!1,function(e){return t.projects=e})}}})},SJO3:function(t,e){angular.module("doubtfire.units.modals.unit-student-enrolment-modal",[]).factory("UnitStudentEnrolmentModal",function(t){var e;return(e={}).show=function(e){return t.open({controller:"UnitStudentEnrolmentModalCtrl",templateUrl:"units/modals/unit-student-enrolment-modal/unit-student-enrolment-modal.tpl.html",resolve:{unit:function(){return e}}})},e}).controller("UnitStudentEnrolmentModalCtrl",function(t,e,n,r,i){return t.unit=r,t.projects=r.students,t.enrolStudent=function(t,o){return n.create({unit_id:r.id,student_num:t,tutorial_id:o?o.id:null},function(t){return r.studentEnrolled(t.project_id)?(i.add("danger","Student is already enrolled",2e3),e.close()):(r.addStudent(t),i.add("success","Student enrolled",2e3),e.close())},function(t){return i.add("danger","Error enrolling student: "+t.data.error,6e3)})}})},SP6l:function(t,e){angular.module("doubtfire.admin.states.teachingperiods.edit",["doubtfire.teaching-periods.states.edit.directives"]).config(function(t,e){return e.state("admin/teachingperiods/edit",{url:"/admin/teaching-periods/:teachingPeriodId",views:{main:{controller:"EditTeachingPeriodStateCtrl",templateUrl:"admin/states/teaching-periods/teaching-period-edit/edit-teaching-period.tpl.html"}},data:{pageTitle:"_Teaching-Period Administration_",roleWhitelist:["Admin"]}})}).controller("EditTeachingPeriodStateCtrl",function(t,e,n,r,i){return i.event("Edit Teaching Period View","Started Edit Teaching Period View"),n.get(Number(e.params.teachingPeriodId),function(e){return t.teachingPeriod=e,t.newTeachingPeriod=-1===t.teachingPeriod.id},function(t){var e;return r.add("danger","Failed to load teaching period. "+(null!=t&&null!=(e=t.data)?e.error:void 0),6e3)}),t.tabs={editorTab:{title:"Teaching Period Details Editor",seq:0},breaksTab:{title:"Teaching Period Breaks",seq:1},unitsTab:{title:"Rollover Teaching Period",seq:2}},t.setActiveTab=function(e){var n,r;if(e!==t.activeTab)return null!=(r=t.activeTab)&&(r.active=!1),"function"==typeof(n=t.activeTab).deselect&&n.deselect(),t.activeTab=e,t.activeTab.active=!0},t.activeTab=t.tabs.editorTab})},"SV+T":function(t,e){angular.module("doubtfire.projects.states.groups",[]).config(function(t){return t.state("projects/groups",{parent:"projects/index",url:"/groups",controller:"ProjectsGroupsStateCtrl",templateUrl:"projects/states/groups/groups.tpl.html",data:{task:"Groups List",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin","Student"]}})}).controller("ProjectsGroupsStateCtrl",function(t){})},SoBS:function(t,e){angular.module("doubtfire.visualisations.alignment-bullet-chart",[]).directive("alignmentBulletChart",function(){return{replace:!0,restrict:"E",templateUrl:"visualisations/visualisation.tpl.html",scope:{project:"=",unit:"=",ilo:"=",targets:"=",currentProgress:"=",classStats:"=",showLegend:"=?"},controller:function(t,e,n){var r,i,o,a,s;return t.showLegend=null==t.showLegend||t.showLegend,null==nv.models.iloBullet&&(nv.models.iloBullet=function(){var n,r,i,o,a,s,l,u,c,d,p,f,h,m,g,v;return n=function(r){return r.each(function(n,r){var p,g,b,y,w,k,_,x,S,$,T,C,E,A,D,P,O,M,R,j,I;g=v-(t.legend?s.left:0)-(t.legend?s.right:0),p=a-s.top-s.bottom,b=d3.select(this),nv.utils.initSVG(b),O=h.call(this,n,r).slice().reverse(),S=u.call(this,n,r).slice().sort(d3.descending),T=d.call(this,n,r),D=f.call(this,n,r).slice().reverse(),x=l.call(this,n,r).slice(),$=c.call(this,n,r).slice(),j=d3.scale.linear().domain(d3.extent(d3.merge([o,O]))).range(m?[g,0]:[0,g]),this.__chart__||d3.scale.linear().domain([0,1/0]).range(j.range()),this.__chart__=j,A=O[0],E=O[1],C=O[2],P=O[3],w=(R=b.selectAll("g.nv-wrap.nv-bullet").data([n])).enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),y=R.select("g"),w.append("rect").attr("class","nv-range nv-rangeHD").style("fill-opacity","0.2").style("fill",e.gradeColors.HD),w.append("rect").attr("class","nv-range nv-rangeD").style("fill-opacity","0.2").style("fill",e.gradeColors.D),w.append("rect").attr("class","nv-range nv-rangeC").style("fill-opacity","0.2").style("fill",e.gradeColors.C),w.append("rect").attr("class","nv-range nv-rangeP").style("fill-opacity","0.2").style("fill",e.gradeColors.P),w.append("rect").attr("class","nv-measure"),w.append("rect").attr("class","nv-median").style("fill-opacity","1.0").style("fill","#ffffff"),R.attr("transform","translate("+s.left+","+s.top+")"),M=function(t){return Math.abs(j(t)-j(0))},I=function(t){return j(t>0?t:0)},y.select("rect.nv-rangeHD").attr("height",p).attr("width",M(A-E)).attr("x",I(E)).datum(A),y.select("rect.nv-rangeD").attr("height",p).attr("width",M(E-C)).attr("x",I(C)).datum(E),y.select("rect.nv-rangeC").attr("height",p).attr("width",M(C-P)).attr("x",I(P)).datum(C),y.select("rect.nv-rangeP").attr("height",p).attr("width",M(P)).attr("x",I(0)).datum(P),null!=T&&(y.select("rect.nv-median").style("fill","#373737").style("fill-opacity",.6).attr("height",p).attr("y",0).attr("width",2).attr("x",I(T.median)).on("mouseover",function(){i.elementMouseover({value:T.median,label:"The average student is here",color:d3.select(this).style("fill")})}).on("mousemove",function(){i.elementMousemove({value:T.median,label:"Class Median",color:d3.select(this).style("fill")})}).on("mouseout",function(){i.elementMouseout({value:T.median,label:"Class Median",color:d3.select(this).style("fill")})}),y.select("rect.nv-measure").style("fill","#373737").style("fill-opacity",.6).attr("height",2*p/3).attr("y",p/6).attr("width",I(T.upper)-I(T.lower)).attr("x",I(T.lower)).on("mouseover",function(){i.elementMouseover({value:T[0],label:$[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){i.elementMousemove({value:T[0],label:$[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){i.elementMouseout({value:T[0],label:$[0]||"Current",color:d3.select(this).style("fill")})})),k=p/6,_=S.map(function(t,e){return{value:t,label:x[e]}}),w.selectAll("path.nv-markerTriangle").data(_).enter().append("path").attr("class","nv-markerTriangle").attr("d",function(t,e){return e%2==0?"M0,"+k+"L"+k+","+-k+" "+-k+","+-k+"Z":"M0,"+-k+"L"+-k+",0L0,"+k+"L"+k+",0Z"}).on("mouseover",function(t){i.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[j(t.value),p/2]})}).on("mousemove",function(t){i.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){i.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}),y.selectAll("path.nv-markerTriangle").data(_).attr("transform",function(t){return"translate("+j(t.value)+","+p/2+")"}),R.selectAll(".nv-range").on("mouseover",function(t,e){i.elementMouseover({value:t,label:D[e]||(e?1===e?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})}).on("mousemove",function(){i.elementMousemove({value:T[0],label:$[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){i.elementMouseout({value:t,label:D[e]||(e?1===e?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})})}),n},s={top:0,right:0,bottom:0,left:0},p="left",m=!1,h=function(t){return t.ranges},u=function(t){return t.markers?t.markers:[]},d=function(t){return t.measures},f=function(t){return t.rangeLabels?t.rangeLabels:[]},l=function(t){return t.markerLabels?t.markerLabels:[]},c=function(t){return t.measureLabels?t.measureLabels:[]},o=[0],v=380,a=30,g=null,r=nv.utils.getColor(["#1f77b4"]),i=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),n.dispatch=i,n.options=nv.utils.optionsFunc.bind(n),n._options=Object.create({},{ranges:{get:function(){return h},set:function(t){h=t}},markers:{get:function(){return u},set:function(t){u=t}},measures:{get:function(){return d},set:function(t){d=t}},forceX:{get:function(){return o},set:function(t){o=t}},width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return a},set:function(t){a=t}},tickFormat:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},orient:{get:function(){return p},set:function(t){m="right"===(p=t)||"bottom"===p}},color:{get:function(){return r},set:function(t){r=nv.utils.getColor(t)}}}),nv.utils.initOptions(n),n},nv.models.iloChart=function(){var e,n,r,i,o,a,s,l,u,c,d,p,f,h,m,g;return e=nv.models.iloBullet(),m=nv.models.tooltip(),u="left",p=!1,o=t.legend?{top:5,right:40,bottom:5,left:120}:{top:5,right:5,bottom:5,left:5},d=function(t){return t.ranges},c=function(t){return t.rangeLabels},a=function(t){return t.markers?t.markers:[]},s=function(t){return t.measures},g=null,i=55,f=null,h=null,l=null,r=d3.dispatch,m.duration(0).headerEnabled(!1),n=function(r){return r.each(function(l,u){var c,f,h,m,v,b,y,w,k,_,x,S;return m=d3.select(this),nv.utils.initSVG(m),f=nv.utils.availableWidth(g,m,o),c=i-o.top-o.bottom,n.update=function(){return n(r)},n.container=this,l&&d.call(this,l,u)?(m.selectAll(".nv-noData").remove(),k=d.call(this,l,u).slice().sort(d3.descending),y=a.call(this,l,u).slice().sort(d3.descending),w=s.call(this,l,u),b=(x=m.selectAll("g.nv-wrap.nv-bulletChart").data([l])).enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),v=x.select("g"),b.append("g").attr("class","nv-bulletWrap"),t.legend&&b.append("g").attr("class","nv-titles"),x.attr("transform","translate("+(t.legend?o.left:10)+","+o.top+")"),S=d3.scale.linear().domain([0,Math.max(k[0],y[0]||0,w[0])]).range(p?[f,0]:[0,f]),this.__chart__||d3.scale.linear().domain([0,1/0]).range(S.range()),this.__chart__=S,t.legend&&((_=b.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(i-o.top-o.bottom)/2+")")).append("text").attr("class","nv-title").text(function(t){return t.title}),_.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle})),e.width(f).height(c),h=v.select(".nv-bulletWrap"),d3.transition(h).call(e)):(nv.utils.noData(n,m),n)}),d3.timer.flush(),n},e.dispatch.on("elementMouseover.tooltip",function(t){return t.series={key:t.label,color:t.color},m.data(t).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(t){return m.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(t){return m.position({top:d3.event.pageY,left:d3.event.pageX})(),m()}),n.bullet=e,n.dispatch=r,n.tooltip=m,n.options=nv.utils.optionsFunc.bind(n),n._options=Object.create({},{ranges:{get:function(){return d},set:function(t){return d=t}},rangeLabels:{get:function(){return c},set:function(t){return c=t}},markers:{get:function(){return a},set:function(t){return a=t}},measures:{get:function(){return s},set:function(t){return s=t}},width:{get:function(){return g},set:function(t){return g=t}},height:{get:function(){return i},set:function(t){return i=t}},tickFormat:{get:function(){return f},set:function(t){return f=t}},ticks:{get:function(){return h},set:function(t){return h=t}},noData:{get:function(){return l},set:function(t){return l=t}},margin:{get:function(){return o},set:function(t){return o.top=null!=t.top?t.top:o.top,o.right=null!=t.right?t.right:o.right,o.bottom=null!=t.bottom?t.bottom:o.bottom,o.left=null!=t.left?t.left:o.left}},orient:{get:function(){return u},set:function(t){return p="right"===(u=t)||"bottom"===u}}}),nv.utils.inheritOptions(n,e),nv.utils.initOptions(n),n}),r=n("iloChart","ILO Alignment Bullet Chart",{height:60,duration:500},{}),t.options=r[0],t.config=r[1],t.data={title:t.ilo.abbreviation,subtitle:t.ilo.name,ranges:[a=t.targets[t.ilo.id][0],i=a+t.targets[t.ilo.id][1],o=i+t.targets[t.ilo.id][2],o+t.targets[t.ilo.id][3]],rangeLabels:["Pass","Credit","Distinction","High Distinction"],measures:{},measureLabels:["Most of the class are in this area"],markers:[],markerLabels:["Your Suggested Progress - Staff Suggestion","Your Current Progress - Self Reflection"]},null!=t.classStats&&null!=t.classStats.title&&(t.data.measureLabels[0]=t.classStats.title),(s=function(){return null!=t.currentProgress&&_.each(t.currentProgress,function(e,n){if(t.data.markers[n]=t.currentProgress[n][t.ilo.id],null!=t.currentProgress[n].title)return t.data.markerLabels[n]=t.currentProgress[n].title}),t.data.measures=null!=t.classStats&&null!=t.classStats[t.ilo.id]?t.classStats[t.ilo.id]:0})(),t.$on("ProgressUpdated",function(){if(s(),t.api)return t.api.update()})}}})},Sp9U:function(t,e){angular.module("doubtfire.common.services.alerts",[]).factory("alertService",function(t,e,n){var r;return t.alerts=[],(r={}).add=function(i,o,a){var s,l;if(l=function(){return r.closeAlert(this)},s={type:i,msg:n.trustAsHtml(o),close:l},t.alerts.unshift(s),_.isNumber(a)&&a>0)return e(l,a)},r.closeAlert=function(e){return this.closeAlertIdx(t.alerts.indexOf(e))},r.closeAlertIdx=function(e){return t.alerts.splice(e,1)},r.clearAll=function(){return t.alerts=[]},r})},TFDp:function(t,e){angular.module("doubtfire.api.models.intended-learning-outcome",[]).factory("IntendedLearningOutcome",function(t,e,n){var r;return(r=t("/units/:unit_id/outcomes/:id",{id:"@id",unit_id:"@unit_id"})).getOutcomeBatchUploadUrl=function(t){return e.API_URL+"/units/"+t.id+"/outcomes/csv?auth_token="+n.authenticationToken},r})},TOql:function(t,e){angular.module("doubtfire.units.states.portfolios",[]).config(function(t){return t.state("units/students/portfolios",{parent:"units/index",url:"/students/portfolios",templateUrl:"units/states/portfolios/portfolios.tpl.html",controller:"UnitPortfoliosStateCtrl",data:{task:"Student Portfolios",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin"]}})}).controller("UnitPortfoliosStateCtrl",function(t,e,n,r,i,o,a,s,l){var u;return t.portfolioDownloadUrl=e.getPortfoliosUrl(t.unit),t.gradeDownloadUrl=e.getGradesUrl(t.unit),t.studentFilter="allStudents",t.portfolioFilter="withPortfolio",t.statusClass=l.statusClass,t.statusText=l.statusText,u=s.refreshAll,t.setActiveTab=function(e){var n;if(e!==t.activeTab)return null!=(n=t.activeTab)&&(n.active=!1),t.activeTab=e,t.activeTab.active=!0,t.activeTab===t.tabs.viewProgress?u():void 0},t.tabs={selectStudent:{title:"Select Student",subtitle:"Select the student to assess",seq:0},viewProgress:{title:"View Progress",subtitle:"See the progress of the student",seq:1},viewPortfolio:{title:"View Portfolio",subtitle:"See the portfolio of the student",seq:2},assessPortfolio:{title:"Assess Portfolio",subtitle:"Enter a grade for the student",seq:3}},t.setActiveTab(t.tabs.selectStudent),t.grades=r.grades,t.unitService=o,t.tutorName=a.profile.name,t.search="",t.currentPage=1,t.maxSize=5,t.pageSize=5,t.filterOptions={selectedGrade:-1},t.grades=r.grades,t.gradeAcronyms=r.gradeAcronyms,t.selectedStudent=null,t.gradeResults=[{name:"Fail",scores:[0,10,20,30,40,44]},{name:"Pass",scores:[50,53,55,57]},{name:"Credit",scores:[60,63,65,67]},{name:"Distinction",scores:[70,73,75,77]},{name:"High Distinction",scores:[80,83,85,87]},{name:"High Distinction",scores:[90,93,95,97,100]}],t.editingRationale=!1,t.toggleEditRationale=function(){return t.editingRationale=!t.editingRationale},n.watchEvent(t,"studentFilter","Teacher View - Grading Tab"),n.watchEvent(t,"sortOrder","Teacher View - Grading Tab"),n.watchEvent(t,"currentPage","Teacher View - Grading Tab","Selected Page"),t.selectStudent=function(e){return t.selectedStudent=e,t.project=null,i.getProject(e,t.unit,function(e){return t.project=e}),n.event("Teacher View - Grading Tab","Selected Student")}})},"Tq/7":function(t,e){angular.module("doubtfire.units.states.edit.directives.unit-students-editor",[]).directive("unitStudentsEditor",function(){return{replace:!0,restrict:"E",templateUrl:"units/states/edit/directives/unit-students-editor/unit-students-editor.tpl.html",controller:function(t,e,n,r,i,o){var a,s,l;return t.activeBatchStudentType="enrol",t.showEnrolModal=function(){return i.show(t.unit)},t.switchToTutorial=function(t,e){return t.switchToTutorial(e)},s=function(e){if(r.show("Enrol Student CSV Results",e),e.success.length>0)return t.unit.refreshStudents()},l=function(e){return r.show("Withdraw Student CSV Results",e),e.success.length>0?(o.add("success","Withdrew "+e.success.length+" students.",2e3),t.unit.refreshStudents()):o.add("info","No students need to be withdrawn.",4e3)},t.batchStudentTypes={enrol:{batchUrl:function(){return e.enrolStudentsCSVUrl(t.unit)},batchFiles:{file:{name:"Enrol CSV Data",type:"csv"}},onSuccess:s},withdraw:{batchUrl:function(){return e.withdrawStudentsCSVUrl(t.unit)},batchFiles:{file:{name:"Withdraw CSV Data",type:"csv"}},onSuccess:l}},a=function(t,e){return n.update({id:t.project_id,enrolled:e},function(n){return e===n.enrolled?o.add("success","Enrolment changed.",2e3):o.add("danger","Enrolment change failed.",5e3),t.enrolled=n.enrolled},function(t){return o.add("danger",t.data.error,5e3)})},t.withdraw=function(t){return a(t,!1)},t.enrol=function(t){return a(t,!0)},t.currentPage=1,t.maxSize=5,t.pageSize=15}}})},U6v0:function(t,e){},Ubv5:function(t,e){!function(t,e,n){"use strict";e.module("angulartics.google.analytics",["angulartics"]).config(["$analyticsProvider",function(n){function r(e){if(t.ga)for(var n=1;n<=200;n++)e["dimension"+n.toString()]&&ga("set","dimension"+n.toString(),e["dimension"+n.toString()]),e["metric"+n.toString()]&&ga("set","metric"+n.toString(),e["metric"+n.toString()])}n.settings.pageTracking.trackRelativePath=!0,n.settings.ga={additionalAccountNames:void 0,userId:null},n.registerPageTrack(function(r){t._gaq&&(_gaq.push(["_trackPageview",r]),e.forEach(n.settings.ga.additionalAccountNames,function(t){_gaq.push([t+"._trackPageview",r])})),t.ga&&(n.settings.ga.userId&&ga("set","&uid",n.settings.ga.userId),ga("send","pageview",r),e.forEach(n.settings.ga.additionalAccountNames,function(t){ga(t+".send","pageview",r)}))}),n.registerEventTrack(function(i,o){if(o&&o.category||((o=o||{}).category="Event"),o.value){var a=parseInt(o.value,10);o.value=isNaN(a)?0:a}if(t.ga){var s={eventCategory:o.category,eventAction:i,eventLabel:o.label,eventValue:o.value,nonInteraction:o.noninteraction,page:o.page||t.location.hash.substring(1)||t.location.pathname,userId:n.settings.ga.userId};r(o),n.settings.ga.transport?ga("send","event",s,{transport:n.settings.ga.transport}):ga("send","event",s),e.forEach(n.settings.ga.additionalAccountNames,function(t){ga(t+".send","event",s)})}else t._gaq&&_gaq.push(["_trackEvent",o.category,i,o.label,o.value,o.noninteraction])}),n.registerExceptionTrack(function(t){t&&t.appId&&t.appName&&t.appVersion?(void 0===t.fatal&&(console.log('No "fatal" provided, sending with fatal=true'),t.exFatal=!0),t.exDescription=t.description,ga("send","exception",t)):console.error("Must be setted appId, appName and appVersion.")}),n.registerSetUsername(function(t){n.settings.ga.userId=t}),n.registerSetUserProperties(function(t){r(t)}),n.registerUserTimings(function(e){e&&e.timingCategory&&e.timingVar&&e.timingValue?t.ga&&ga("send","timing",e):console.error("Properties timingCategory, timingVar, and timingValue are required to be set.")})}])}(window,window.angular)},UftQ:function(t,e){angular.module("doubtfire.api",["doubtfire.api.resource-plus","doubtfire.api.models"])},Ujk7:function(t,e){angular.module("doubtfire.units.states.analytics.directives.unit-achievement-stats",[]).directive("unitAchievementStats",function(){return{replace:!0,restrict:"E",templateUrl:"units/states/analytics/directives/unit-achievement-stats/unit-achievement-stats.tpl.html",scope:{unit:"="},controller:function(t,e){var n,r;return null==(null!=(r=t.unit.analytics)?r.learningProgressClassDetails:void 0)?e.learningProgressClassDetails.get({id:t.unit.id},function(e){return t.unit.analytics.learningProgressClassDetails=e,t.data=e.all}):t.data=t.unit.analytics.learningProgressClassDetails.all,t.depth=0,t.switchToTutorial=function(e){var r,i;if(null!=(null!=(i=t.unit.analytics)?i.learningProgressClassDetails:void 0))return t.dataModel.selectedTutorial=e,e===n?(delete(r=_.clone(t.unit.analytics.learningProgressClassDetails)).all,delete r.$promise,delete r.$resolved,t.data=r,t.depth=1):(t.data=t.unit.analytics.learningProgressClassDetails[e.id],t.depth=0),t.data=_.chain(t.data).map(function(t,e){return delete t.students,[e,t]}).fromPairs().value()},t.drillDown=function(){return t.dataModel.selectedType="tutorial",t.switchToTutorial(n)},t.dataModel={selectedType:"unit",selectedTutorial:n,pct:!0},t.tutorialsForSelector=[n={id:-1,abbreviation:"Overview",tutor_name:"All Tutorials"}].concat(t.unit.tutorials),t.$watch("dataModel.selectedType",function(e){var r;if(null!=(null!=(r=t.unit.analytics)?r.learningProgressClassDetails:void 0))return"tutorial"===e?t.switchToTutorial(n):(t.depth=0,t.data=t.unit.analytics.learningProgressClassDetails.all)}),t.$watch("dataModel.selectedTutorial",t.switchToTutorial)}}})},Um6K:function(t,e){angular.module("doubtfire.visualisations.achievement-box-plot",[]).directive("achievementBoxPlot",function(){return{replace:!0,restrict:"E",templateUrl:"visualisations/visualisation.tpl.html",scope:{rawData:"=data",type:"=",unit:"=",pctHolder:"=",height:"=?",showLegend:"=?"},controller:function(t,e,n,r){var i,o,a,s,l;return t.showLegend=null==t.showLegend||t.showLegend,t.height=null==t.height?600:t.height,o=r.calculateTargets(t.unit,t.unit,r.unitTaskStatusFactor()),i=_.mapValues(o,function(t,e){return _.reduce(t,function(t,e){return t+e},0)}),a=_.max(_.values(i)),l=function(n){var r;return t.options.chart.yDomain=(r=null!=t.pctHolder&&t.pctHolder.pct)?[0,1]:[0,a],t.data=_.map(n,function(e,n){var o;return null!=(o=i[n])&&0!==o&&r||(o=1),{label:_.find(t.unit.ilos,{id:+n}).abbreviation,values:{Q1:e.lower/o,Q2:e.median/o,Q3:e.upper/o,whisker_low:e.min/o,whisker_high:e.max/o}}}),e(function(){var e;if(null!=(null!=(e=t.api)?e.refresh:void 0))return t.api.refresh()})},s=n("boxPlotChart","ILO Achievement Box Plot",{x:function(t){return t.label},height:t.height,showXAxis:t.showLegend,margin:{top:20,right:10,bottom:t.showLegend?60:20,left:t.showLegend?80:40},yAxis:{axisLabel:t.showLegend?"ILO Achievement":void 0},tooltip:{enabled:t.showLegend},maxBoxWidth:75,yDomain:[0,1]},{},"Achievement Box Plot"),t.options=s[0],t.config=s[1],t.$watch("pctHolder.pct",function(e,n){if(e!==n)return l(t.rawData)}),l(t.rawData)}}})},V1RV:function(t,e){angular.module("doubtfire.teaching-periods.states.edit.directives.teaching-period-details-editor",[]).directive("teachingPeriodDetailsEditor",function(){return{replace:!0,restrict:"E",templateUrl:"admin/states/teaching-periods/teaching-period-edit/directives/teaching-period-details-editor/teaching-period-details-editor.tpl.html",controller:function(t,e,n,r,i){return t.calOptions={startOpened:!1,endOpened:!1,activeUntilOpened:!1},i.query(),t.externalName=n.ExternalName,t.open=function(e,n){return e.preventDefault(),e.stopPropagation(),"start"===n?(t.calOptions.startOpened=!t.calOptions.startOpened,t.calOptions.endOpened=!1,t.calOptions.activeUntilOpened=!1):"end"===n?(t.calOptions.startOpened=!1,t.calOptions.endOpened=!t.calOptions.endOpened,t.calOptions.activeUntilOpened=!1):(t.calOptions.startOpened=!1,t.calOptions.endOpened=!1,t.calOptions.activeUntilOpened=!t.calOptions.activeUntilOpened)},t.dateOptions={formatYear:"yy",startingDay:1},t.saveTeachingPeriod=function(){var e;return t.teachingPeriod.start_date&&t.teachingPeriod.start_date.getMonth&&(t.teachingPeriod.start_date=t.teachingPeriod.start_date.getFullYear()+"-"+(t.teachingPeriod.start_date.getMonth()+1)+"-"+t.teachingPeriod.start_date.getDate()),t.teachingPeriod.end_date&&t.teachingPeriod.end_date.getMonth&&(t.teachingPeriod.end_date=t.teachingPeriod.end_date.getFullYear()+"-"+(t.teachingPeriod.end_date.getMonth()+1)+"-"+t.teachingPeriod.end_date.getDate()),t.teachingPeriod.active_until&&t.teachingPeriod.active_until.getMonth&&(t.teachingPeriod.active_until=t.teachingPeriod.active_until.getFullYear()+"-"+(t.teachingPeriod.active_until.getMonth()+1)+"-"+t.teachingPeriod.active_until.getDate()),e={period:t.teachingPeriod.period,year:t.teachingPeriod.year,start_date:t.teachingPeriod.start_date,end_date:t.teachingPeriod.end_date,active_until:t.teachingPeriod.active_until},-1===t.teachingPeriod.id?i.create({teaching_period:e},function(e){return t.teachingperiods.loadedPeriods.push(e),r.add("success","Teaching Period created.",2e3)},function(t){return r.add("danger",t.data.error,6e3)}):i.update({id:t.teachingPeriod.id,teaching_period:e}).$promise.then(function(t){return r.add("success","Teaching Period updated.",2e3)},function(t){return r.add("danger","Failed to update teaching period. "+t.data.error,6e3)})}}}})},VF48:function(t,e){angular.module("doubtfire.admin.modals.teaching-period-settings-modal",[]).factory("TeachingPeriodSettingsModal",function(t){var e;return(e={}).show=function(e){return t.open({templateUrl:"admin/modals/teaching-period-settings-modal/teaching-period-settings-modal.tpl.html",controller:"TeachingPeriodSettingsModal",resolve:{teachingperiod:function(){return e}}})},e}).controller("TeachingPeriodSettingsModal",function(t,e,n,r,i,o,a,s,l){var u,c;return t.teachingperiod=s||{},t.isNew=void 0===(null!=s?s.id:void 0),t.calOptions={startOpened:!1,endOpened:!1,activeUntilOpened:!1},t.externalName=n.ExternalName,t.isNew&&(t.teachingperiods=a.query()),t.currentUser=o,t.modalState={},t.open=function(e,n){return e.preventDefault(),e.stopPropagation(),"start"===n?(t.calOptions.startOpened=!t.calOptions.startOpened,t.calOptions.endOpened=!1,t.calOptions.activeUntilOpened=!1):"end"===n?(t.calOptions.startOpened=!1,t.calOptions.endOpened=!t.calOptions.endOpened,t.calOptions.activeUntilOpened=!1):(t.calOptions.startOpened=!1,t.calOptions.endOpened=!1,t.calOptions.activeUntilOpened=!t.calOptions.activeUntilOpened)},t.dateOptions={formatYear:"yy",startingDay:1},u=function(){return a.create({teaching_period:t.teachingperiod}).$promise.then(function(n){if(e.close(n),t.teachingperiods)return t.teachingperiods.loadedPeriods.push(n),r.add("success","Teaching Period created.",2e3)},function(t){if(null!=t.data.error)return r.add("danger","Error: "+t.data.error,6e3)})},c=function(){return a.update({id:t.teachingperiod.id,teaching_period:t.teachingperiod}).$promise.then(function(t){return e.close(t),r.add("success","Teaching Period updated.",2e3)},function(t){if(null!=t.data.error)return r.add("danger","Error: "+t.data.error,6e3)})},t.saveTeachingPeriod=function(){return t.teachingperiod.start_date&&t.teachingperiod.start_date.getMonth&&(t.teachingperiod.start_date=t.teachingperiod.start_date.getFullYear()+"-"+(t.teachingperiod.start_date.getMonth()+1)+"-"+t.teachingperiod.start_date.getDate()),t.teachingperiod.end_date&&t.teachingperiod.end_date.getMonth&&(t.teachingperiod.end_date=t.teachingperiod.end_date.getFullYear()+"-"+(t.teachingperiod.end_date.getMonth()+1)+"-"+t.teachingperiod.end_date.getDate()),t.teachingperiod.active_until&&t.teachingperiod.active_until.getMonth&&(t.teachingperiod.active_until=t.teachingperiod.active_until.getFullYear()+"-"+(t.teachingperiod.active_until.getMonth()+1)+"-"+t.teachingperiod.active_until.getDate()),t.isNew?u():c()}})},Vjir:function(t,e){angular.module("doubtfire.teaching-periods.states.edit.directives.teaching-period-breaks",[]).directive("teachingPeriodBreaks",function(){return{replace:!0,restrict:"E",templateUrl:"admin/states/teaching-periods/teaching-period-edit/directives/teaching-period-breaks/teaching-period-breaks.tpl.html",controller:function(t,e,n,r){return t.sortOrder="start_date",t.reverse=!0,t.addBreak=function(t){return r.show(t)}}}})},W9kW:function(t,e){angular.module("doubtfire.projects.states.dashboard.directives.student-task-list",[]).directive("studentTaskList",function(){return{restrict:"E",templateUrl:"projects/states/dashboard/directives/student-task-list/student-task-list.tpl.html",scope:{project:"=",refreshTasks:"=?",taskData:"="},controller:function(t,e,n,r){var i,o;if(null==t.taskData)throw Error("Invalid taskData provided. Must wrap the selectedTask and selectedTaskAbbr");return t.filteredTasks=[],t.filters={taskName:null},(i=function(){var e;return e=n("tasksWithName")(t.project.activeTasks(),t.filters.taskName),e=n("orderBy")(e,"definition.seq"),t.filteredTasks=e})(),t.refreshTasks=i,t.gradeNames=r.grades,t.taskNameChanged=i,t.setSelectedTask=function(e){var n;if(t.isSelectedTask(e)&&(e=null),t.taskData.selectedTask=e,"function"==typeof(n=t.taskData).onSelectedTaskChange&&n.onSelectedTaskChange(e),null!=e)return o(e)},o=function(t){var e,n;if(null!=(n=document.querySelector("student-task-list #"+t.taskKeyToIdString()))&&null!=(e=null!=n.scrollIntoViewIfNeeded?"scrollIntoViewIfNeeded":null!=n.scrollIntoView?"scrollIntoView":void 0))return n[e]({behavior:"smooth",block:"top"})},e(function(){if(null!=t.taskData.selectedTask)return o(t.taskData.selectedTask)}),t.isSelectedTask=function(e){var n,r;return e.definition.id===(null!=(n=t.taskData)&&null!=(r=n.selectedTask)?r.definition.id:void 0)}}}})},WFko:function(t,e){angular.module("doubtfire.projects.states.portfolio.directives.portfolio-review-step",[]).directive("portfolioReviewStep",function(){return{restrict:"E",replace:!0,templateUrl:"projects/states/portfolio/directives/portfolio-review-step/portfolio-review-step.tpl.html",controller:function(t,e,n,r,i){return t.externalName=r.ExternalName,t.$watch("project.portfolio_available",function(){return t.hasLSR=t.projectHasLearningSummaryReport(),t.hasTasksSelected=t.selectedTasks().length>0,t.portfolioIsCompiling=t.project.compile_portfolio,t.canCompilePortfolio=!t.portfolioIsCompiling&&t.hasTasksSelected&&t.hasLSR&&!t.project.portfolio_available}),t.toggleCompileProject=function(){return t.project.compile_portfolio=!t.project.compile_portfolio,n.update({id:t.project.project_id,compile_portfolio:t.project.compile_portfolio},function(e){return t.portfolioIsCompiling=!0,t.canCompilePortfolio=!1})},t.deletePortfolio=function(){return i.show("Delete Portfolio?","Are you sure you want to delete your portfolio? You will need to recreate your porfolio again if you do so.",function(){return t.portfolioSubmission.delete({id:t.project.project_id},function(n){return t.project.portfolio_available=!1,e.add("info","Portfolio has been deleted!",5e3)})})}}}})},Whmr:function(t,e){angular.module("doubtfire.projects.project-progress-dashboard",[]).directive("projectProgressDashboard",function(){return{restrict:"E",templateUrl:"projects/project-progress-dashboard/project-progress-dashboard.tpl.html",controller:function(t,e,n,r,i,o,a,s,l,u,c,d,p,f){var h;return null!=r.projectId?t.studentProjectId=r.projectId:null!=t.project&&(t.studentProjectId=t.project.project_id),t.grades=u.grades,t.gradeAcronyms=u.gradeAcronyms,t.currentVisualisation="burndown",t.taskDetailsSelector={viewAll:!0},t.chooseGrade=function(e){return i.update({id:t.project.project_id,target_grade:e},function(r){return t.project.target_grade=r.target_grade,t.project.burndown_chart_data=r.burndown_chart_data,t.project.updateTaskStats(r.stats),p.event("Student Project View - Progress Tab","Grade Changed",t.grades[e]),n.$broadcast("TargetGradeUpdated")})},t.taskCount=function(){return t.unit.task_definitions.length},t.taskStats={},h=function(){return t.taskStats.numberOfTasksCompleted=d.tasksByStatus(t.project,c.acronymKey.COM).length,t.taskStats.numberOfTasksRemaining=d.tasksInTargetGrade(t.project).length-t.taskStats.numberOfTasksCompleted},t.$watch("taskDetailsSelector.viewAll",function(){if(!t.taskDetailsSelector.viewAll)return p.event("Student Project View","Showed Top Tasks")}),t.$on("TaskStatusUpdated",function(){return h()}),t.$on("TargetGradeUpdated",function(){return h()}),h()}}})},WrKa:function(t,e){angular.module("doubtfire.visualisations.progress-burndown-chart",[]).directive("progressBurndownChart",function(){return{restrict:"E",templateUrl:"visualisations/visualisation.tpl.html",scope:{project:"=",unit:"="},controller:function(t,e,n){var r,i,o,a,s;return o=n.listenTo(t),t.data=[],o.push(t.$watch("project.burndown_chart_data",function(e){var n,r;if(null!=e)return r={key:"NOW",values:[[n=+(new Date).getTime()/1e3,0],[n,1]],color:"#CACACA",classed:"dashed"},_.find(e,{key:"NOW"})||e.push(r),t.data.length=0,_.extend(t.data,e),null!=t.api&&t.api.refresh(),null})),a=e("lineChart","Student Progress Burndown Chart",{useInteractiveGuideline:!0,interactiveLayer:{tooltip:{contentGenerator:function(t){var e,n,r;return r=t.series,n="<table class='col-sm-6'><thead><tr><td colspan='3'><strong class='x-value'>"+t.value+"</strong></td></tr></thead><tbody>",(n+=function(){var t,n,i;for(i=[],t=0,n=r.length;t<n;t++)"NOW"!==(e=r[t]).key&&i.push("<tr><td class='legend-color-guide'><div style='background-color: "+e.color+";'></div></td><td class='key'>"+e.key+"</td><td class='value'>"+d3.format(",%")(e.value)+"</td></tr><tr>");return i}().join(""))+"</tbody></table>"}}},height:440,margin:{left:75,right:50},xAxis:{axisLabel:"Time",tickFormat:function(t){return d3.time.format("%b %d")(new Date(1e3*t))},ticks:8},yAxis:{axisLabel:"Tasks Remaining",tickFormat:function(t){return d3.format(",%")(t)}},color:r=function(t,e){return 0===e?"#AAAAAA":1===e?"#777777":2===e?"#0079d8":"#E01B5D"},legendColor:r,x:function(t){return t[0]},y:function(t){return t[1]<0?0:t[1]},yDomain:[0,1],xDomain:[(s=function(t){return+t/1e3})((i={start:moment(t.unit.start_date),end:moment(t.unit.end_date).add(2,"weeks")}).start),s(i.end)]},{}),t.options=a[0],t.config=a[1],a}}})},XpQh:function(t,e){angular.module("doubtfire.projects.states.portfolio.directives.portfolio-learning-summary-report-step",[]).directive("portfolioLearningSummaryReportStep",function(){return{restrict:"E",replace:!0,templateUrl:"projects/states/portfolio/directives/portfolio-learning-summary-report-step/portfolio-learning-summary-report-step.tpl.html",controller:function(t){return t.forceLSRSubmit=!1}}})},"XvB+":function(t,e){angular.module("doubtfire.units.states.students",[]).config(function(t){return t.state("units/students/list",{parent:"units/index",url:"/students",templateUrl:"units/states/students-list/students-list.tpl.html",controller:"UnitStudentsStateCtrl",data:{task:"Student List",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin"]}})}).controller("UnitStudentsStateCtrl",function(t,e,n,r,i,o,a,s,l,u,c,d,p){var f;return f=function(){var e,r;return e=n("showStudents")(t.unit.students,t.staffFilter,t.tutorName),(null!=(r=t.searchText)?r.trim().length:void 0)>0&&(e=n("projectFilter")(e,t.searchText)),t.filteredStudents=n("paginateAndSort")(e,t.pagination,t.tableSort)},t.pagination={currentPage:1,maxSize:15,pageSize:15,totalSize:null,show:!1,onChange:f},t.tableSort={order:"name",reverse:!1},t.staffFilter={Convenor:"all",Tutor:"mine"}[t.unitRole.role],t.tutorName=a.profile.name,f(),t.sortTableBy=function(e){return"flags"===e?(t.showSearchOptions=!0,r(function(){return document.querySelector("#students-list .panel-body.search-options .form-group.flag-sort button:first-child").focus()},500),void(t.tableSort.order===e&&(t.tableSort.reverse=!t.tableSort.reverse))):(t.tableSort.order=e,t.tableSort.reverse=!t.tableSort.reverse,f())},t.staffFilterChanged=function(e){return t.staffFilter=e,f()},t.searchTextChanged=f,t.unitTypeAheadData=s.unitTypeAheadData,t.switchToTutorial=function(t,e){return t.switchToTutorial(e)},t.getCSVHeader=function(){var t;return t=["student_code","name","email","portfolio","lab"],angular.forEach(u.statusKeys,function(e){return t.push(e)}),t},t.getCSVData=function(){var e,r;return d.event("Teacher View - Students Tab","Export CSV data"),e=n("filter")(n("showStudents")(t.unit.students,t.staffFilter,t.tutorName),t.searchText),r=[],angular.forEach(e,function(t){var e;return(e={}).student_code=t.student_id,e.name=t.name,e.email=t.student_email,e.portfolio=t.portfolio_status,e.lab=t.tutorial?t.tutorial.abbreviation:"",r.push(e)}),r},t.statusClass=u.statusClass,t.statusText=u.statusText,t.viewStudent=function(t){return d.event("Teacher View - Students Tab","Viewed Student"),t.viewProject(!0)},t.sortTableByFlag=function(e){return t.tableSort.order===e?t.tableSort.reverse=!t.tableSort.reverse:t.tableSort.order=e},t.showEnrolModal=function(){return d.event("Teacher View - Students Tab","Enrol Student"),o.show(t.unit)}})},XvXa:function(t,e){angular.module("doubtfire.units.states.tasks",["doubtfire.units.states.tasks.inbox","doubtfire.units.states.tasks.feedback","doubtfire.units.states.tasks.definition","doubtfire.units.states.tasks.offline","doubtfire.units.states.tasks.viewer"]).config(function(t){return t.state("units/tasks",{abstract:!0,parent:"units/index",url:"/tasks",controller:"UnitsTasksStateCtrl",template:"<ui-view/>",data:{pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin"]}})}).controller("UnitsTasksStateCtrl",function(t,e,n,r,i){var o,a,s,l;return o=r.listenTo(t),t.taskData={taskKey:null,source:null,selectedTask:null,onSelectedTaskChange:function(e){var n;return n=null!=e?e.taskKey():void 0,t.taskData.taskKey=n,a(e)}},a=function(t){return e.go(e.$current,{taskKey:null!=t?t.taskKeyToUrlString():void 0},{notify:!1})},s=function(e){return t.taskData.taskKey=n.taskKeyFromString(e)},l=i.params().taskKey,s(l),o.push(t.$on("$stateChangeStart",function(t,e,n,r,i){if(s(n.taskKey),r===e&&i.unitId===n.unitId)return t.preventDefault()}))})},"XyS+":function(t,e){var n=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("doubtfire.tasks.task-sheet-viewer",[]).directive("taskSheetViewer",function(){return{replace:!0,restrict:"E",templateUrl:"tasks/task-sheet-viewer/task-sheet-viewer.tpl.html",scope:{task:"=",unit:"=",project:"="},controller:function(t,e,r,i,o,a,s,l){var u,c;return t.showTaskSheet=!1,t.gradeName=s.grades,u=function(){var e,r;return t.assessmentPanels={feedback:{show:(e=t.task.status,n.call(a.switchableStates.tutor,e)>=0),active:!0},graded:{show:t.task.definition.is_graded,active:_.isNumber(t.task.grade)},quality:{show:null!=t.qualityPoints.max&&t.qualityPoints.max>0,active:t.qualityPoints.assigned>0||(r=t.task.status,n.call(a.markedStatuses,r)>=0)}},t.showAssessmentPanel=_.chain(t.assessmentPanels).map("show").compact().value().length>0},c=function(){return t.qualityPoints={max:t.task.definition.max_quality_pts,assigned:t.task.quality_pts}},t.$watch("task",function(e){if(null!=e)return c(),u(),t.hasPDF=e.definition.has_task_sheet,t.hasResources=e.definition.has_task_resources,t.taskPDFUrl=o.getTaskPDFUrl(t.unit,e.definition),t.resourceUrl=o.getTaskResourcesUrl(t.unit,e.definition)}),t.$watch("task.status",function(e){return t.activeStatusData=a.statusData(e),u()}),t.$watch("task.grade",function(t){return u()}),t.$watch("task.quality_pts",function(){return c(),u()}),t.$watch("task.definition.max_quality_pts",function(e,n){if(e!==n)return t.assessmentPanels.quality.show=!1,r(function(){return t.assessmentPanels.quality.show=!0})}),t.$watch("task.task_definition_id",function(n){return t.alignments=e("taskDefinitionFilter")(t.unit.task_outcome_alignments,n)}),t.downloadEvent=function(t){return l.event("Task Sheet","Downloaded Task "+t)},t.toggleTaskSheet=function(){return l.event("Task Sheet",(t.showTaskSheet?"Hid":"Showed")+" Task Sheet PDF Viewer"),t.showTaskSheet=!t.showTaskSheet}}}})},YHAa:function(t,e){var n=[];onmessage=function(t){"encode"===t.data[0]?function(t){for(var e=t.length,r=new Uint8Array(2*e),i=0;i<e;i++){var o=2*i,a=t[i];a>1?a=1:a<-1&&(a=-1),r[o]=a*=32768,r[o+1]=a>>8}n.push(r)}(t.data[1]):"dump"===t.data[0]?function(t){var e=n.length?n[0].length:0,r=n.length*e,i=new Uint8Array(44+r),o=new DataView(i.buffer);o.setUint32(0,1380533830,!1),o.setUint32(4,36+r,!0),o.setUint32(8,1463899717,!1),o.setUint32(12,1718449184,!1),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,1,!0),o.setUint32(24,t,!0),o.setUint32(28,2*t,!0),o.setUint16(32,2,!0),o.setUint16(34,16,!0),o.setUint32(36,1684108385,!1),o.setUint32(40,r,!0);for(var a=0;a<n.length;a++)i.set(n[a],a*e+44);n=[];var s=[i.buffer];postMessage(s,[s[0]])}(t.data[1]):"close"===t.data[0]&&self.close()}},YTnw:function(t,e){angular.module("doubtfire.projects.project-lab-list",[]).directive("projectLabList",function(){return{restrict:"E",templateUrl:"projects/project-lab-list/project-lab-list.tpl.html",controller:function(t,e,n,r,i,o,a){return t.sortOrder="abbreviation",t.setTutorial=function(e){return r.update({id:t.project.project_id,tutorial_id:e},function(n){return t.project.tutorial_id=n.tutorial_id,t.project.tutorial=t.unit.tutorialFromId(t.project.tutorial_id),a.event("Student Project View - Tutorials Tab",-1!==e?"Changed tutorial":"Withdrew from all tutorials"),o.updateGroups(t.project)},function(t){return i.add("danger",t.data.error,6e3)})}}}})},Ygc7:function(t,e){angular.module("doubtfire.tasks.task-ilo-alignment.task-ilo-alignment-rater",[]).directive("taskIloAlignmentRater",function(){return{replace:!0,restrict:"E",templateUrl:"tasks/task-ilo-alignment/task-ilo-alignment-rater/task-ilo-alignment-rater.tpl.html",scope:{readonly:"=?",ngModel:"=",unit:"=",onRatingChanged:"=?",tooltips:"=?",colorful:"=?",selectedTooltip:"=?",showTooltips:"=?",hideLabels:"=?",compact:"=?",label:"=?",showZeroRating:"=?"},controller:function(t,e){var n,r,i,o;for(t.max=5,null==t.hideLabels&&(t.hideLabels=!1),null==t.showZeroRating&&(t.showZeroRating=!1),t.compact&&(t.readonly=!0),t.tooltips=e.alignmentLabels,t.setHoverValue=function(e){return t.readonly&&!t.showTooltips?t.ngModel:(t.hoveringOver=e,t.label=t.tooltips[e])},n=0,r=(o=["tooltips","colorful","selectedTooltip"]).length;n<r;n++)t[i=o[n]]=null==t[i]||t[i];if(t.showTooltips=null!=t.showTooltips&&t.showTooltips,null!=t.onRatingChanged)return t.$watch("ngModel.rating",function(e,n){if(null!=e&&e!==n)return t.onRatingChanged(t.ngModel)})}}})},YzF7:function(t,e){angular.module("doubtfire.common.services.recorder-service",[]).factory("recorderService",function(t,e,n){return function(){function t(){window.AudioContext=window.AudioContext||window.webkitAudioContext,this.em=document.createDocumentFragment(),this.state="inactive",this.audioCtx={},this.chunks=[],this.chunkType="",this.usingMediaRecorder=window.MediaRecorder||!1,this.encoderMimeType="audio/wav",this.config={broadcastAudioProcessEvents:!1,createAnalyserNode:!0,createDynamicsCompressorNode:!1,forceScriptProcessor:!1,manualEncoderId:"wav",micGain:1,processorBufferSize:2048,stopTracksAndCloseCtxWhenFinished:!0,userMediaConstraints:{audio:!0}}}return t.prototype.startRecording=function(){var t;if("inactive"===this.state){if(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return this.audioCtx=new AudioContext,this.micGainNode=this.audioCtx.createGain(),this.outputGainNode=this.audioCtx.createGain(),this.config.createDynamicsCompressorNode&&(this.dynamicsCompressorNode=audioCtx.createDynamicsCompressor()),this.config.createAnalyserNode&&(this.analyserNode=this.audioCtx.createAnalyser()),(this.config.forceScriptProcessor||this.config.broadcastAudioProcessEvents||!this.usingMediaRecorder)&&(this.processorNode=this.audioCtx.createScriptProcessor(this.config.processorBufferSize,1,1)),this.destinationNode=this.audioCtx.createMediaStreamDestination?this.audioCtx.createMediaStreamDestination():this.audioCtx.destination,this.usingMediaRecorder||(this.encoderWorker=new Worker("/assets/wav-worker.js"),this.encoderMimeType="audio/wav",t=this,this.encoderWorker.addEventListener("message",function(e){var n;return(n=new Event("dataavailable")).data="ogg"===t.config.manualEncoderId?e.data:new Blob(e.data,{type:t.encoderMimeType}),t._onDataAvailable(n)})),t=this,navigator.mediaDevices.getUserMedia(this.config.userMediaConstraints).then(function(e){return t._startRecordingWithStream(e)}).catch(function(t){console.log("Error with getUserMedia: "+t.message),console.log(t)});console.error("Missing support for navigator.mediaDevices.getUserMedia")}},t.prototype.setMicGain=function(t){this.config.micGain=t,this.audioCtx&&this.micGainNode&&this.micGainNode.gain.setValueAtTime(t,this.audioCtx.currentTime)},t.prototype._startRecordingWithStream=function(t){var e,n;this.micAudioStream=t,this.inputStreamNode=this.audioCtx.createMediaStreamSource(this.micAudioStream),this.audioCtx=this.inputStreamNode.context,this.onGraphSetupWithInputStream&&this.onGraphSetupWithInputStream(this.inputStreamNode),this.inputStreamNode.connect(this.micGainNode),this.micGainNode.gain.setValueAtTime(this.config.micGain,this.audioCtx.currentTime),e=this.micGainNode,this.dynamicsCompressorNode&&(this.micGainNode.connect(this.dynamicsCompressorNode),e=this.dynamicsCompressorNode),this.state="recording",this.processorNode?(e.connect(this.processorNode),this.processorNode.connect(this.outputGainNode),n=this,this.processorNode.onaudioprocess=function(t){return n._onAudioProcess(t)}):e.connect(this.outputGainNode),this.analyserNode&&e.connect(this.analyserNode),this.outputGainNode.connect(this.destinationNode),this.usingMediaRecorder?(this.mediaRecorder=new MediaRecorder(this.destinationNode.stream),n=this,this.mediaRecorder.addEventListener("dataavailable",function(t){return n._onDataAvailable(t)}),this.mediaRecorder.addEventListener("error",function(t){return this._onError(t)}),this.mediaRecorder.start()):this.outputGainNode.gain.setValueAtTime(0,this.audioCtx.currentTime)},t.prototype._onAudioProcess=function(t){this.config.broadcastAudioProcessEvents&&this.em.dispatchEvent(new CustomEvent("onaudioprocess",{detail:{inputBuffer:t.inputBuffer,outputBuffer:t.outputBuffer}})),this.usingMediaRecorder||"recording"===this.state&&this.encoderWorker.postMessage(this.config.broadcastAudioProcessEvents?["encode",t.outputBuffer.getChannelData(0)]:["encode",t.inputBuffer.getChannelData(0)])},t.prototype.stopRecording=function(){"inactive"!==this.state&&(this.usingMediaRecorder?(this.state="inactive",this.mediaRecorder.stop()):(this.state="inactive",this.encoderWorker.postMessage(["dump",this.audioCtx.sampleRate]),clearInterval(this.slicing)))},t.prototype._onDataAvailable=function(t){var e,n,r;this.chunks.push(t.data),this.chunkType=t.data.type,"inactive"===this.state&&(e=new Blob(this.chunks,{type:this.chunkType}),n=URL.createObjectURL(e),r={ts:(new Date).getTime(),blobUrl:n,mimeType:e.type,size:e.size,blob:e},this.chunks=[],this.chunkType=null,this.destinationNode&&(this.destinationNode.disconnect(),this.destinationNode=null),this.outputGainNode&&(this.outputGainNode.disconnect(),this.outputGainNode=null),this.analyserNode&&(this.analyserNode.disconnect(),this.analyserNode=null),this.processorNode&&(this.processorNode.disconnect(),this.processorNode=null),this.encoderWorker&&(this.encoderWorker.postMessage(["close"]),this.encoderWorker=null),this.dynamicsCompressorNode&&(this.dynamicsCompressorNode.disconnect(),this.dynamicsCompressorNode=null),this.micGainNode&&(this.micGainNode.disconnect(),this.micGainNode=null),this.inputStreamNode&&(this.inputStreamNode.disconnect(),this.inputStreamNode=null),this.config.stopTracksAndCloseCtxWhenFinished&&(this.micAudioStream.getTracks().forEach(function(t){return t.stop()}),this.micAudioStream=null,this.audioCtx.close(),this.audioCtx=null),this.em.dispatchEvent(new CustomEvent("recording",{detail:{recording:r}})))},t.prototype._onError=function(t){console.log("error",t),this.em.dispatchEvent(new Event("error"))},t}()})},Z94s:function(t,e){angular.module("doubtfire.projects.states.portfolio.directives.portfolio-grade-select-step",[]).directive("portfolioGradeSelectStep",function(){return{restrict:"E",replace:!0,templateUrl:"projects/states/portfolio/directives/portfolio-grade-select-step/portfolio-grade-select-step.tpl.html",controller:function(t,e,n,r){return t.grades=r.grades,t.agreedToAssessmentCriteria=t.projectHasLearningSummaryReport(),t.chooseGrade=function(n){return e.update({id:t.project.project_id,target_grade:n},function(e){return t.project.target_grade=e.target_grade,t.project.burndown_chart_data=e.burndown_chart_data})}}}})},ZenS:function(t,e){angular.module("doubtfire.visualisations.student-task-status-pie-chart",[]).directive("studentTaskStatusPieChart",function(){return{replace:!0,restrict:"E",templateUrl:"visualisations/visualisation.tpl.html",scope:{project:"=",updateData:"=?"},controller:function(t,e,n,r){var i,o;return i=e.statusColors,t.data=[],t.updateData=function(){if(t.data.length=0,_.each(e.statusLabels,function(e,r){var i;return i=n.tasksByStatus(t.project,r).length,t.data.push({key:e,y:i,status_key:r})}),t.api)return t.api.update()},t.$on("TaskStatusUpdated",t.updateData),t.updateData(),o=r("pieChart","Student Task Status Pie Chart",{color:function(t,e){return i[t.status_key]},x:function(t){return t.key},y:function(t){return t.y},showLabels:!1,tooltip:{valueFormatter:function(e){var n;return(n=e.toFixed())+" "+("1"===n?"task":"tasks")+" ("+Math.round(e/t.project.target_tasks().length*100)+"%)"},keyFormatter:function(t){return t}}},{}),t.options=o[0],t.config=o[1],o}}})},a3wL:function(t,e){angular.module("doubtfire.common.audio-player",[]).directive("audioPlayer",function(){return{restrict:"E",replace:!0,templateUrl:"common/audio-player/audio-player.tpl.html",controller:function(t,e,n,r,i){var o;return t.isLoaded=!1,t.isPlaying=!1,t.audioProgress=0,t.max=1,t.currentTime=0,o=document.createElement("AUDIO"),t.playAudio=function(){t.isLoaded||(t.isLoaded=!0,o.src=e.generateCommentsAttachmentUrl(t.project,t.task,t.$parent.comment)),o.paused?(o.play(),t.isPlaying=!0):(o.pause(),o.currentTime=0,t.isPlaying=!1)},o.ontimeupdate=function(){var e;e=o.currentTime/o.duration,t.audioProgress=isNaN(e)?0:e,t.$apply()},o.onended=function(){t.isPlaying=!1,t.$apply()}}}})},b7QK:function(t,e){angular.module("doubtfire.api.models.tutor",[]).factory("Tutor",function(t){return t("/users/tutors")})},bJ4r:function(t,e){angular.module("doubtfire.config",["doubtfire.config.vendor-dependencies","doubtfire.config.local-storage","doubtfire.config.routing","doubtfire.config.analytics","doubtfire.config.runtime","doubtfire.config.root-controller","doubtfire.config.debug","doubtfire.config.privacy-policy"])},bSyc:function(t,e){angular.module("doubtfire.units.states.all.directives.all-units-list",[]).config(function(t){return t.state("view-all-units",{url:"/view-all-units",views:{main:{controller:"AllUnitsList",templateUrl:"units/states/all/directives/all-units-list/all-units-list.tpl.html"}},data:{pageTitle:"_All-Units_",roleWhitelist:["Tutor","Convenor","Admin"]}})}).controller("AllUnitsList",function(t,e,n,r,i,o,a,s,l,u,c){var d,p;return u.event("view-all-units","viewed all-units list"),t.externalName=o.ExternalName,t.sortOrder="start_date",t.reverse=!0,t.currentPage=1,t.maxSize=5,t.pageSize=15,p=n(function(){return t.showSpinner=!0},2e3),l.getUnitRoles(function(e){return t.unitRoles=e,t.showSpinner=!1,t.dataLoaded=!0,n.cancel(p)}),d=function(){if(null!=t.unitRoles)return t.notEnrolled=function(){return 0===t.unitRoles.length&&"Tutor"===s.role}},t.$watch("unitRoles",d),"Student"!==s.role&&i.query(function(e){return t.units=e}),t.unit=function(e){return _.find(t.units,{id:e})},t.currentUser=s})},bitr:function(t,e){angular.module("doubtfire.tasks.task-feedback-assessor",[]).directive("taskFeedbackAssessor",function(){return{replace:!0,restrict:"E",templateUrl:"tasks/task-feedback-assessor/task-feedback-assessor.tpl.html",scope:{task:"=task",unit:"=unit",assessingUnitRole:"=assessingUnitRole",unitRole:"=unitRole",onStatusUpdate:"=onStatusUpdate",viewOptions:"="},controller:function(t,e){if(t.comment={text:""},t.triggerTransition=function(n){return t.comment.text.length>0&&e.addComment(t.task,t.comment.text,function(e){return t.comment.text=""}),e.updateTaskStatus(t.unit,t.task.project(),t.task,n)},null!=t.onStatusUpdate&&_.isFunction(t.onStatusUpdate))return t.$on("TaskStatusUpdated",function(e,n){return t.onStatusUpdate(n.status)})}}})},bjKH:function(t,e){angular.module("doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-plagiarism-card",[]).directive("taskPlagiarismCard",function(){return{restrict:"E",templateUrl:"projects/states/dashboard/directives/task-dashboard/directives/task-plagiarism-card/task-plagiarism-card.tpl.html",scope:{task:"="},controller:function(t,e){return t.viewReport=function(){return e.show(t.task)}}}})},"c+Mi":function(t,e){angular.module("doubtfire.teaching-periods.states.edit.directives.teaching-period-units",[]).directive("teachingPeriodUnits",function(){return{replace:!0,restrict:"E",templateUrl:"admin/states/teaching-periods/teaching-period-edit/directives/teaching-period-units/teaching-period-units.tpl.html",controller:function(t,e,n,r){return t.sortOrder="start_date",t.reverse=!0,t.currentPage=1,t.maxSize=5,t.pageSize=15,t.rolloverTeachingPeriodModal=function(t){return r.show(null!=t?t:{})}}}})},c8R8:function(t,e){angular.module("doubtfire.common.modals.comments-modal",[]).factory("CommentsModal",function(t){var e;return(e={}).show=function(){return t.open({templateUrl:"common/modals/comments-modal/comments-modal.tpl.html",controller:"CommentsModalCtrl",size:"lg"})},e}).controller("CommentsModalCtrl",function(t,e,n){return t.commentResourceUrl=n.commentResourceUrl,t.commentType=n.commentType,t.close=function(){return e.dismiss()}})},cIgU:function(t,e){var n=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("doubtfire.tasks.task-submission-wizard",[]).directive("taskSubmissionWizard",function(){return{restrict:"E",replace:!0,scope:{task:"=",project:"=",unit:"=",assessingUnitRole:"=?"},templateUrl:"tasks/task-submission-wizard/task-submission-wizard.tpl.html",controller:function(t,e,r,i,o,a,s,l){var u,c,d,p,f,h,m;return u=["ready_to_mark","need_help"],c=["ready_to_mark","need_help","reupload_evidence"],t.states={initial:"initial",uploadFiles:"uploadFiles",groupMemberContribution:"groupMemberContribution"},m=function(e){if(e.definition.upload_requirements.length>0&&null!=t.uploadType&&n.call(u,t.uploadType)>=0&&null!=t.oldStatus&&t.oldStatus!==e.status)return null!=t.oldStatus&&(e.status=t.oldStatus),o.add("info","No file(s) uploaded. Status reverted.",4e3)},t.$watch("task",function(e,i){var o,l,c,d;for(t.state=t.states.initial,m(i),t.oldStatus=angular.copy(t.task.status),t.uploadType=n.call(u,e.status)>=0?e.status:void 0,t.files={},o=0,l=(c=e.definition.upload_requirements).length;o<l;o++)t.files[(d=c[o]).key]={name:d.name,type:d.type};return t.url=r.generateSubmissionUrl(t.project,t.task),t.numberOfFiles=e.definition.upload_requirements.length,t.isGroupTask=s.isGroupTask(t.task),t.inGroupForTask=null!=a.getGroupForTask(t.project,t.task)}),t.$watch("task.status",function(e){var r;if(e!==t.uploadType)return r=n.call(u,e)>=0?e:void 0,t.setUploadType(r)}),t.isUploading=null,t.helpLabel="",t.setHelpLabel=function(e){return null==e&&(e=""),t.helpLabel=e},t.uploadTypes={ready_to_mark:{icon:i.statusIcons.ready_to_mark,text:i.statusLabels.ready_to_mark,class:"ready-to-mark",hide:"demonstrate"===(d=t.task.status)||"discuss"===d||"do_not_resubmit"===d||"complete"===d||"fail"===d},need_help:{icon:i.statusIcons.need_help,text:i.statusLabels.need_help,class:"need-help",hide:"demonstrate"===(p=t.task.status)||"discuss"===p||"do_not_resubmit"===p||"complete"===p||"fail"===p},reupload_evidence:{icon:"fa fa-recycle",text:"new evidence for portfolio",class:"btn-info",hide:"demonstrate"!==(f=t.task.status)&&"discuss"!==f&&"do_not_resubmit"!==f&&"complete"!==f&&"fail"!==f}},t.setUploadType=function(e){if(t.uploadType=e,n.call(u,e)>=0&&(t.task.status=e),n.call(c,e)>=0)return t.state=t.isGroupTask&&t.state!==t.states.uploadFiles?t.states.groupMemberContribution:t.states.uploadFiles},t.onSuccess=function(n){return e(function(){return i.processTaskStatusChange(t.unit,t.project,t.task,n.status,n),t.oldStatus=angular.copy(t.task.status)},1500),l.event("Task Submit Form","Updated Status as "+(null!=t.assessingUnitRole?t.assessingUnitRole.role:"Student"),i.statusLabels[t.task.status]),l.event("Task Submit Form","Files Uploaded",void 0,t.numberOfFiles)},t.onComplete=function(){return t.state=t.states.initial},t.$on("$destroy",function(){return m(t.task)}),t.recreateTask=function(){return i.recreatePDF(t.task,null)},t.allowRegeneratePdf=("demonstrate"===(h=t.task.status)||"ready_to_mark"===h||"discuss"===h||"complete"===h)&&t.task.has_pdf,t.team={members:[]},t.payload={},t.mapTeamToPayload=function(){var e;return e=s.groupContributionSum(t.team.members),_.map(t.team.members,function(t){return{project_id:t.project_id,pct:(100*t.rating/e).toFixed(0),pts:t.rating}})},t.onBeforeUpload=function(){if(t.payload.contributions=s.isGroupTask(t.task)?t.mapTeamToPayload():{},"need_help"===t.uploadType)return t.payload.trigger="need_help"},t.setState=function(e){return t.state=e}}}})},cMLu:function(t,e){angular.module("doubtfire.common.status-icon",[]).directive("statusIcon",function(){return{restrict:"E",templateUrl:"common/status-icon/status-icon.tpl.html",scope:{status:"=",showTooltip:"@"},controller:function(t,e){return null==t.showTooltip&&(t.showTooltip=!0),t.statusIcon=function(t){return e.statusIcons[t]},t.statusLabel=function(t){return e.statusLabels[t]},t.statusClass=function(t){return e.statusClass(t)}}}})},cbZt:function(t,e){angular.module("doubtfire.tasks.task-plagiarism-file-viewer",[]).directive("taskPlagiarismFileViewer",function(t,e){return{replace:!0,restrict:"E",templateUrl:"tasks/task-plagiarism-file-viewer/task-plagiarism-file-viewer.tpl.html",scope:{task:"=task",match:"=match",matchIdx:"=matchIdx",other:"=other",assessingUnitRole:"="},controller:function(n){var r;return n.canDismiss=!!_.isString(null!=(r=n.assessingUnitRole)?r.role:void 0)&&_.includes(["Tutor","Convenor"],n.assessingUnitRole.role),n.dismiss_similarity=function(r){return t.put(n.task,n.matchIdx,n.other,r,function(t){return e.add("success","Similarity dismiss status changed.",4e3),n.match.dismissed=r},function(t){return e.add("danger","Failed to change status. "+(t.data||t.statusText))})}}}})},crnd:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="crnd"},cvho:function(t,e){angular.module("doubtfire.tasks.modals.plagiarism-report-modal",[]).factory("PlagiarismReportModal",function(t,e){var n;return(n={}).show=function(e){return t.open({templateUrl:"tasks/modals/plagiarism-report-modal/plagiarism-report-modal.tpl.html",controller:"PlagiarismReportModalCtrl",size:"lg",resolve:{task:function(){return e}}})},n}).controller("PlagiarismReportModalCtrl",function(t,e){return t.task=e})},d09A:function(t,e){angular.module("doubtfire.common.services.group-service",[]).factory("groupService",function(t,e,n){var r;return(r={}).groupContributionSum=function(t,e,n){return _.reduce(t,function(t,r){return e===r?t+n:t+r.rating},0)},r.isGroupTask=function(t){return null!=t.definition.group_set},r.groupSetName=function(t,e){var n;return(null!=(n=e.findGroupSet(t))?n.name:void 0)||"Individual Work"},r.mapFuncsToGroup=function(t,e,n,i){return(t=n.mapGroupToUnit(t)).groupSet=function(){return i},t.addMember=function(e,n,i){return r.addMemberToGroup(t,e,n,i)},t.removeMember=function(e,n,i){return r.removeMemberFromGroup(t,e,n,i)},t.getMembers=function(e,n){return r.getGroupMembersForGroup(t,e,n)},t},r.getGroups=function(e,i,o,a){var s;if(null==i)throw Error("No group set ID specified to unit.getGroups");return null!=(null!=(s=e.findGroupSet(i))?s.groups:void 0)?"function"==typeof o?o(s.groups):void 0:t.query({unit_id:e.id,group_set_id:i},function(t){return s.groups=_.map(t,function(t,n){return r.mapFuncsToGroup(t,n,e,s)}),"function"==typeof o?o(s.groups):void 0},function(t){var e;return n.add("danger",(null!=(e=t.data)?e.error:void 0)||"Unknown Error",6e3),"function"==typeof a?a(t):void 0})},r.addGroup=function(e,i,o,a,s){if(null==e&&null==i)throw Error("Cannot create new group without unit, groupset or tutorialID");return t.create({unit_id:e.id,group_set_id:i.id,group:{name:o,tutorial_id:a}},function(t){var o;return o=r.mapFuncsToGroup(t,i.groups.length,e,i),i.groups.push(o),n.add("success",o.name+" was created!",3e3),"function"==typeof s?s(o):void 0},function(t){var e;return n.add("danger",(null!=(e=t.data)?e.error:void 0)||"Unknown Error",6e3),"function"==typeof onFailure?onFailure(t):void 0})},r.updateGroup=function(e,r,i){return t.update({unit_id:e.unit().id,group_set_id:e.groupSet().id,id:e.id,group:{name:e.name,tutorial_id:e.tutorial_id}},function(t){return n.add("info",e.name+" was updated",3e3),"function"==typeof r?r(t):void 0},function(t){var e;return n.add("danger",(null!=(e=t.data)?e.error:void 0)||"Unknown Error",6e3),"function"==typeof i?i(t):void 0})},r.deleteGroup=function(e,r,i,o,a){if(r.group_set_id!==i.id)throw Error("Cannot delete group -- group's group_set_id does not match groupSet specified");return t.delete({unit_id:r.unit().id,group_set_id:r.groupSet().id,id:r.id,group:{name:r.name,tutorial_id:r.tutorial_id}},function(t){return i.groups=_.without(i.groups,r),n.add("info",r.name+" was deleted",3e3),"function"==typeof o?o(e.groups):void 0},function(t){var e;return n.add("danger",(null!=(e=t.data)?e.error:void 0)||"Unknown Error",3e3),"function"==typeof a?a(t):void 0})},r.getGroupMembersForGroup=function(t,n,r){return null!=t.members?"function"==typeof n?n(t.members):void 0:e.query({unit_id:t.unit().id,group_set_id:t.groupSet().id,group_id:t.id},function(e){return t.members=e,"function"==typeof n?n(t.members):void 0},function(e){return"function"==typeof r?r(t.members):void 0})},r.addMemberToGroup=function(t,r,i,o){if(null!=r)return e.create({unit_id:t.unit().id,group_set_id:t.groupSet().id,group_id:t.id,project_id:r.project_id},function(e){var a;return null!=(a=r.groups)&&a.push(t),null!=t.members?(t.members.push(e),n.add("info",e.student_name+" was added to '"+t.name+"'",3e3),"function"==typeof i?i(t.members):void 0):t.getMembers(function(){return n.add("info",e.student_name+" was added to '"+t.name+"'",3e3),"function"==typeof i?i():void 0},o)},function(t){var e;return n.add("danger",(null!=(e=t.data)?e.error:void 0)||"Unknown Error",6e3),"function"==typeof o?o(t):void 0});n.add("danger","The student you are trying to add to the group could not be found.",6e3)},r.removeMemberFromGroup=function(t,r,i,o){return e.delete({unit_id:t.unit().id,group_set_id:t.groupSet().id,group_id:t.id,id:r.project_id},function(e){return null!=t.members?(t.members=_.without(t.members,r),n.add("info",r.student_name+" was removed from '"+t.name+"'",3e3),"function"==typeof i?i(t.members):void 0):t.getMembers(function(){return n.add("info",r.student_name+" was removed from '"+t.name+"'",3e3),"function"==typeof i?i():void 0},o)},function(t){var e;return n.add("danger",(null!=(e=t.data)?e.error:void 0)||"Unknown Error",6e3),"function"==typeof o?o(t):void 0})},r})},d6lO:function(t,e){angular.module("doubtfire.common.modals.csv-result-modal",[]).factory("CsvResultModal",function(t,e){var n;return(n={}).show=function(n,r){return 0===r.errors.length?e.add("success","Data uploaded. Success with "+r.success.length+" items.",2e3):r.success.length>0?e.add("warning","Data uploaded, success with "+r.success.length+" items, but "+r.errors.length+" errors.",6e3):e.add("danger","Data uploaded but "+r.errors.length+" errors",6e3),t.open({templateUrl:"common/modals/csv-result-modal/csv-result-modal.tpl.html",controller:"CsvResultModalCtrl",resolve:{title:function(){return n},response:function(){return r}}})},n}).controller("CsvResultModalCtrl",function(t,e,n,r){return t.title=n,t.response=r,t.currentPage=1,t.maxSize=5,t.pageSize=5,t.activeCsvResponseSelection=r.errors.length>0?"errors":r.success.length>0?"success":"ignored",t.itemData=function(e){return t.response[e]},t.close=function(){return e.dismiss()}})},dC4b:function(t,e){angular.module("doubtfire.projects.states.dashboard",["doubtfire.projects.states.dashboard.directives"]).config(function(t){return t.state("projects/dashboard",{parent:"projects/index",url:"/dashboard/:taskAbbr?tutor",controller:"ProjectsDashboardStateCtrl",templateUrl:"projects/states/dashboard/dashboard.tpl.html",data:{task:"Dashboard",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin","Student"]}})}).controller("ProjectsDashboardStateCtrl",function(t,e,n,r,i,o,a,s,l){var u,c,d;return u=l.listenTo(t),t.taskData={selectedTask:null,onSelectedTaskChange:function(t){return d(t)}},d=function(t){var e;return e=_.isString(t)?t:null!=t?t.definition.abbreviation:void 0,r.go(r.$current,{taskAbbr:e=e||""},{notify:!1})},null==(c=function(e){return null==e&&(t.taskData.selectedTask=null),t.taskData.selectedTask=_.find(t.project.activeTasks(),function(t){return t.definition.abbreviation.toLowerCase()===(null!=e?e.toLowerCase():void 0)})})(i.taskAbbr)&&d(null),u.push(t.$on("$stateChangeStart",function(t,e,n,r,i){var o,a;if(a=null!=(o=c(n.taskAbbr))?o.definition.abbreviation:void 0,r===e&&i.projectId===n.projectId)return t.preventDefault(),d(a)})),u.push(t.$on("TaskSubmissionUploadComplete",function(e){return t.taskData.selectedTask=null}))})},dSw6:function(t,e){angular.module("doubtfire.visualisations.alignment-bar-chart",[]).directive("alignmentBarChart",function(){return{replace:!0,restrict:"E",templateUrl:"visualisations/visualisation.tpl.html",scope:{project:"=",unit:"=",source:"=",taskStatusFactor:"="},controller:function(t,e,n,r,i,o){var a;return a=e("multiBarChart","ILO Alignment Bar Chart",{clipEdge:!0,stacked:!1,height:200,duration:500,color:function(t){return r.gradeColors[r.gradeAcronyms[t.key]]},x:function(t){return t.label},y:function(t){return t.value},forceY:0,showYAxis:!1},{}),t.options=a[0],t.config=a[1],t.data=[],t.calculateAlignmentVisualisation=function(e,n){if(_.extend(t.data,o.targetsByGrade(t.unit,e)),null!=t.api)return t.api.update()},t.calculateAlignmentVisualisation(t.source,t.taskStatusFactor),t.$on("UpdateAlignmentChart",function(){return t.calculateAlignmentVisualisation(t.source,t.taskStatusFactor)})}}})},"dZB/":function(t,e){angular.module("doubtfire.admin.states.teachingperiods",["doubtfire.admin.states.teachingperiods.edit"]).config(function(t){return t.state("admin/teachingperiods",{url:"/admin/teaching-periods",views:{main:{controller:"AdministerTeachingPeriodsState",templateUrl:"admin/states/teaching-periods/teaching-period-list/teaching-period-list.tpl.html"}},data:{pageTitle:"_Teaching-Period Administration_",roleWhitelist:["Admin"]}})}).controller("AdministerTeachingPeriodsState",function(t,e,n,r,i,o,a,s){return t.teachingPeriods=a.query(),t.sortOrder="start_date",t.reverse=!0,t.currentPage=1,t.maxSize=5,t.pageSize=15,t.externalName=r.ExternalName,t.showTeachingPeriodModal=function(t){return s.show(null!=t?t:{})}})},dcMl:function(t,e){angular.module("doubtfire.sessions.auth.roles.if-role",[]).directive("ifRole",function(t){return{restrict:"A",link:function(e,n,r){var i;if(i=_.words(r.ifRole),!t.isAuthorised(i))return n.remove()}}})},dfRj:function(t,e){angular.module("doubtfire.units.states.tasks.viewer.directives.task-details-view",[]).directive("taskDetailsView",function(){return{restrict:"E",templateUrl:"units/states/tasks/viewer/directives/task-details-view/task-details-view.tpl.html",scope:{taskDef:"=",unit:"="},controller:function(t,e,n){}}})},e0Io:function(t,e){angular.module("doubtfire.visualisations.target-grade-pie-chart",[]).directive("targetGradePieChart",function(){return{replace:!0,restrict:"E",templateUrl:"visualisations/visualisation.tpl.html",scope:{rawData:"=data",showLegend:"=?",height:"=?"},controller:function(t,e,n,r,i){var o,a,s,l;return o=n.gradeColors,(s=function(r){return t.data=_.map(r,function(e,i){return t.total=_.chain(r).values().reduce(function(t,e){return t+e},0).value(),{key:n.grades[i],y:e,status_key:i}}),e(function(){var e;if(null!=(null!=(e=t.api)?e.refresh:void 0))return t.api.refresh()})})(t.rawData),t.$watch("rawData",s),a=i("pieChart","Target Grade Summary Chart",{color:function(t,e){return o[t.status_key]},x:function(t){return t.key},y:function(t){return t.y},showLabels:!1,margin:l={top:0,right:0,bottom:0,left:0},legend:{padding:64,margin:l},height:t.height,showLegend:t.showLegend,tooltip:{valueFormatter:function(e){return Math.round(e/t.total*100)+"%"},keyFormatter:function(t){return t}}},{}),t.options=a[0],t.config=a[1],a}}})},e4O7:function(t,e,n){var r,i;"undefined"==typeof angular||angular,r=[n("KHwQ")],void 0===(i=(function(t){return function(t){var e=t.module("angularFileUpload",[]);return e.value("fileUploaderOptions",{url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}).factory("FileUploader",["fileUploaderOptions","$rootScope","$http","$window","$compile",function(e,n,r,i,o){function a(n){var r=t.copy(e);t.extend(this,r,n,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}function s(e){var n=t.isElement(e)?e.value:e;this["_createFrom"+(t.isString(n)?"FakePath":"Object")](n)}function l(e,n,r){var i=t.isElement(n),o=i?t.element(n):null,s=i?null:n;t.extend(this,{url:e.url,alias:e.alias,headers:t.copy(e.headers),formData:t.copy(e.formData),removeAfterUpload:e.removeAfterUpload,withCredentials:e.withCredentials,method:e.method},r,{uploader:e,file:new a.FileLikeObject(n),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:s,_input:o}),o&&this._replaceNode(o)}function u(e){t.extend(this,e),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}function c(t){c.super_.apply(this,arguments),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}function d(t){d.super_.apply(this,arguments)}function p(t){p.super_.apply(this,arguments)}return a.prototype.isHTML5=!(!i.File||!i.FormData),a.prototype.addToQueue=function(e,n,r){var i=this.isArrayLikeObject(e)?e:[e],o=this._getFilters(r),s=this.queue.length,l=[];t.forEach(i,function(t){var e=new a.FileLikeObject(t);if(this._isValidFile(e,o,n)){var r=new a.FileItem(this,t,n);l.push(r),this.queue.push(r),this._onAfterAddingFile(r)}else this._onWhenAddingFileFailed(e,this.filters[this._failFilterIndex],n)},this),this.queue.length!==s&&(this._onAfterAddingAll(l),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()},a.prototype.removeFromQueue=function(t){var e=this.getIndexOfItem(t),n=this.queue[e];n.isUploading&&n.cancel(),this.queue.splice(e,1),n._destroy(),this.progress=this._getTotalProgress()},a.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},a.prototype.uploadItem=function(t){var e=this.getIndexOfItem(t),n=this.queue[e],r=this.isHTML5?"_xhrTransport":"_iframeTransport";n._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[r](n))},a.prototype.cancelItem=function(t){var e=this.getIndexOfItem(t),n=this.queue[e];n&&n.isUploading&&n[this.isHTML5?"_xhr":"_form"].abort()},a.prototype.uploadAll=function(){var e=this.getNotUploadedItems().filter(function(t){return!t.isUploading});e.length&&(t.forEach(e,function(t){t._prepareToUploading()}),e[0].upload())},a.prototype.cancelAll=function(){var e=this.getNotUploadedItems();t.forEach(e,function(t){t.cancel()})},a.prototype.isFile=function(t){var e=i.File;return e&&t instanceof e},a.prototype.isFileLikeObject=function(t){return t instanceof a.FileLikeObject},a.prototype.isArrayLikeObject=function(e){return t.isObject(e)&&"length"in e},a.prototype.getIndexOfItem=function(e){return t.isNumber(e)?e:this.queue.indexOf(e)},a.prototype.getNotUploadedItems=function(){return this.queue.filter(function(t){return!t.isUploaded})},a.prototype.getReadyItems=function(){return this.queue.filter(function(t){return t.isReady&&!t.isUploading}).sort(function(t,e){return t.index-e.index})},a.prototype.destroy=function(){t.forEach(this._directives,function(e){t.forEach(this._directives[e],function(t){t.destroy()},this)},this)},a.prototype.onAfterAddingAll=function(t){},a.prototype.onAfterAddingFile=function(t){},a.prototype.onWhenAddingFileFailed=function(t,e,n){},a.prototype.onBeforeUploadItem=function(t){},a.prototype.onProgressItem=function(t,e){},a.prototype.onProgressAll=function(t){},a.prototype.onSuccessItem=function(t,e,n,r){},a.prototype.onErrorItem=function(t,e,n,r){},a.prototype.onCancelItem=function(t,e,n,r){},a.prototype.onCompleteItem=function(t,e,n,r){},a.prototype.onCompleteAll=function(){},a.prototype._getTotalProgress=function(t){if(this.removeAfterUpload)return t||0;var e=this.getNotUploadedItems().length,n=100/this.queue.length;return Math.round((e?this.queue.length-e:this.queue.length)*n+(t||0)*n/100)},a.prototype._getFilters=function(e){if(t.isUndefined(e))return this.filters;if(t.isArray(e))return e;var n=e.split(/\s*,/);return this.filters.filter(function(t){return-1!==n.indexOf(t.name)},this)},a.prototype._render=function(){n.$$phase||n.$apply()},a.prototype._folderFilter=function(t){return!(!t.size&&!t.type)},a.prototype._queueLimitFilter=function(){return this.queue.length<this.queueLimit},a.prototype._isValidFile=function(t,e,n){return this._failFilterIndex=-1,!e.length||e.every(function(e){return this._failFilterIndex++,e.fn.call(this,t,n)},this)},a.prototype._isSuccessCode=function(t){return t>=200&&t<300||304===t},a.prototype._transformResponse=function(e){return t.forEach(r.defaults.transformResponse,function(t){e=t(e)}),e},a.prototype._parseHeaders=function(e){var n,r,i,o={};if(!e)return o;function a(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}return t.forEach(e.split("\n"),function(t){var e;i=t.indexOf(":"),e=a(t.substr(0,i)),n=e.toLowerCase(),r=a(t.substr(i+1)),n&&(o[n]=o[n]?o[n]+", "+r:r)}),o},a.prototype._xhrTransport=function(e){var n=e._xhr=new XMLHttpRequest,r=new FormData,i=this;i._onBeforeUploadItem(e),t.forEach(e.formData,function(e){t.forEach(e,function(t,e){r.append(e,t)})}),r.append(e.alias,e._file,e.file.name),n.upload.onprogress=function(t){var n=Math.round(t.lengthComputable?100*t.loaded/t.total:0);i._onProgressItem(e,n)},n.onload=function(){var t=i._parseHeaders(n.getAllResponseHeaders()),r=i._transformResponse(n.response),o=i._isSuccessCode(n.status)?"Success":"Error";i["_on"+o+"Item"](e,r,n.status,t),i._onCompleteItem(e,r,n.status,t)},n.onerror=function(){var t=i._parseHeaders(n.getAllResponseHeaders()),r=i._transformResponse(n.response);i._onErrorItem(e,r,n.status,t),i._onCompleteItem(e,r,n.status,t)},n.onabort=function(){var t=i._parseHeaders(n.getAllResponseHeaders()),r=i._transformResponse(n.response);i._onCancelItem(e,r,n.status,t),i._onCompleteItem(e,r,n.status,t)},n.open(e.method,e.url,!0),n.withCredentials=e.withCredentials,t.forEach(e.headers,function(t,e){n.setRequestHeader(e,t)}),n.send(r),this._render()},a.prototype._iframeTransport=function(e){var n=t.element('<form style="display: none;" />'),r=t.element('<iframe name="iframeTransport'+Date.now()+'">'),i=e._input,o=this;e._form&&e._form.replaceWith(i),e._form=n,o._onBeforeUploadItem(e),i.prop("name",e.alias),t.forEach(e.formData,function(e){t.forEach(e,function(e,r){n.append(t.element('<input type="hidden" name="'+r+'" value="'+e+'" />'))})}),n.prop({action:e.url,method:"POST",target:r.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),r.bind("load",function(){try{var t=r[0].contentDocument.body.innerHTML}catch(s){}var n={response:t,status:200,dummy:!0},i=o._transformResponse(n.response),a={};o._onSuccessItem(e,i,n.status,a),o._onCompleteItem(e,i,n.status,a)}),n.abort=function(){var t={};r.unbind("load").prop("src","javascript:false;"),n.replaceWith(i),o._onCancelItem(e,void 0,0,t),o._onCompleteItem(e,void 0,0,t)},i.after(n),n.append(i).append(r),n[0].submit(),this._render()},a.prototype._onWhenAddingFileFailed=function(t,e,n){this.onWhenAddingFileFailed(t,e,n)},a.prototype._onAfterAddingFile=function(t){this.onAfterAddingFile(t)},a.prototype._onAfterAddingAll=function(t){this.onAfterAddingAll(t)},a.prototype._onBeforeUploadItem=function(t){t._onBeforeUpload(),this.onBeforeUploadItem(t)},a.prototype._onProgressItem=function(t,e){var n=this._getTotalProgress(e);this.progress=n,t._onProgress(e),this.onProgressItem(t,e),this.onProgressAll(n),this._render()},a.prototype._onSuccessItem=function(t,e,n,r){t._onSuccess(e,n,r),this.onSuccessItem(t,e,n,r)},a.prototype._onErrorItem=function(t,e,n,r){t._onError(e,n,r),this.onErrorItem(t,e,n,r)},a.prototype._onCancelItem=function(t,e,n,r){t._onCancel(e,n,r),this.onCancelItem(t,e,n,r)},a.prototype._onCompleteItem=function(e,n,r,i){e._onComplete(n,r,i),this.onCompleteItem(e,n,r,i);var o=this.getReadyItems()[0];this.isUploading=!1,t.isDefined(o)?o.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),this._render())},a.isFile=a.prototype.isFile,a.isFileLikeObject=a.prototype.isFileLikeObject,a.isArrayLikeObject=a.prototype.isArrayLikeObject,a.isHTML5=a.prototype.isHTML5,a.inherit=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.super_=e},a.FileLikeObject=s,a.FileItem=l,a.FileDirective=u,a.FileSelect=c,a.FileDrop=d,a.FileOver=p,s.prototype._createFromFakePath=function(t){this.lastModifiedDate=null,this.size=null,this.type="like/"+t.slice(t.lastIndexOf(".")+1).toLowerCase(),this.name=t.slice(t.lastIndexOf("/")+t.lastIndexOf("\\")+2)},s.prototype._createFromObject=function(e){this.lastModifiedDate=t.copy(e.lastModifiedDate),this.size=e.size,this.type=e.type,this.name=e.name},l.prototype.upload=function(){this.uploader.uploadItem(this)},l.prototype.cancel=function(){this.uploader.cancelItem(this)},l.prototype.remove=function(){this.uploader.removeFromQueue(this)},l.prototype.onBeforeUpload=function(){},l.prototype.onProgress=function(t){},l.prototype.onSuccess=function(t,e,n){},l.prototype.onError=function(t,e,n){},l.prototype.onCancel=function(t,e,n){},l.prototype.onComplete=function(t,e,n){},l.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},l.prototype._onProgress=function(t){this.progress=t,this.onProgress(t)},l.prototype._onSuccess=function(t,e,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(t,e,n)},l.prototype._onError=function(t,e,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(t,e,n)},l.prototype._onCancel=function(t,e,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(t,e,n)},l.prototype._onComplete=function(t,e,n){this.onComplete(t,e,n),this.removeAfterUpload&&this.remove()},l.prototype._destroy=function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input},l.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},l.prototype._replaceNode=function(t){var e=o(t.clone())(t.scope());e.prop("value",null),t.css("display","none"),t.after(e)},u.prototype.events={},u.prototype.bind=function(){for(var t in this.events)this.element.bind(t,this[this.events[t]])},u.prototype.unbind=function(){for(var t in this.events)this.element.unbind(t,this.events[t])},u.prototype.destroy=function(){var t=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(t,1),this.unbind()},u.prototype._saveLinks=function(){for(var t in this.events){var e=this.events[t];this[e]=this[e].bind(this)}},a.inherit(c,u),c.prototype.events={$destroy:"destroy",change:"onChange"},c.prototype.prop="select",c.prototype.getOptions=function(){},c.prototype.getFilters=function(){},c.prototype.isEmptyAfterSelection=function(){return!!this.element.attr("multiple")},c.prototype.onChange=function(){var t=this.uploader.isHTML5?this.element[0].files:this.element[0],e=this.getOptions(),n=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(t,e,n),this.isEmptyAfterSelection()&&this.element.prop("value",null)},a.inherit(d,u),d.prototype.events={$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},d.prototype.prop="drop",d.prototype.getOptions=function(){},d.prototype.getFilters=function(){},d.prototype.onDrop=function(e){var n=this._getTransfer(e);if(n){var r=this.getOptions(),i=this.getFilters();this._preventAndStop(e),t.forEach(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(n.files,r,i)}},d.prototype.onDragOver=function(e){var n=this._getTransfer(e);this._haveFiles(n.types)&&(n.dropEffect="copy",this._preventAndStop(e),t.forEach(this.uploader._directives.over,this._addOverClass,this))},d.prototype.onDragLeave=function(e){e.target===this.element[0]&&(this._preventAndStop(e),t.forEach(this.uploader._directives.over,this._removeOverClass,this))},d.prototype._getTransfer=function(t){return t.dataTransfer?t.dataTransfer:t.originalEvent.dataTransfer},d.prototype._preventAndStop=function(t){t.preventDefault(),t.stopPropagation()},d.prototype._haveFiles=function(t){return!!t&&(t.indexOf?-1!==t.indexOf("Files"):!!t.contains&&t.contains("Files"))},d.prototype._addOverClass=function(t){t.addOverClass()},d.prototype._removeOverClass=function(t){t.removeOverClass()},a.inherit(p,u),p.prototype.events={$destroy:"destroy"},p.prototype.prop="over",p.prototype.overClass="nv-file-over",p.prototype.addOverClass=function(){this.element.addClass(this.getOverClass())},p.prototype.removeOverClass=function(){this.element.removeClass(this.getOverClass())},p.prototype.getOverClass=function(){return this.overClass},a}]).directive("nvFileSelect",["$parse","FileUploader",function(t,e){return{link:function(n,r,i){var o=n.$eval(i.uploader);if(!(o instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');var a=new e.FileSelect({uploader:o,element:r});a.getOptions=t(i.options).bind(a,n),a.getFilters=function(){return i.filters}}}}]).directive("nvFileDrop",["$parse","FileUploader",function(t,e){return{link:function(n,r,i){var o=n.$eval(i.uploader);if(!(o instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');if(o.isHTML5){var a=new e.FileDrop({uploader:o,element:r});a.getOptions=t(i.options).bind(a,n),a.getFilters=function(){return i.filters}}}}}]).directive("nvFileOver",["FileUploader",function(t){return{link:function(e,n,r){var i=e.$eval(r.uploader);if(!(i instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');new t.FileOver({uploader:i,element:n}).getOverClass=function(){return r.overClass||this.overClass}}}}]),e}(t)}).apply(e,r))||(t.exports=i)},eGvP:function(t,e){var n=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("doubtfire.common.services.tasks",[]).factory("taskService",function(t,e,r,i,o,a,s,l,u,c,d,p,f,h,m,g){var v,b;return(b={}).statusKeys=["not_started","do_not_resubmit","redo","need_help","working_on_it","fix_and_resubmit","ready_to_mark","discuss","demonstrate","complete","fail","time_exceeded"],b.validTopTask=["not_started","redo","need_help","working_on_it","fix_and_resubmit","demonstrate","discuss"],b.toBeWorkedOn=["not_started","redo","need_help","working_on_it"],b.statusToDiscuss=["need_help","demonstrate","discuss"],b.submittedStatuses=["do_not_resubmit","ready_to_mark","discuss","demonstrate","complete","fail","time_exceeded"],b.overdueStates=["not_started","do_not_resubmit","redo","need_help","working_on_it","fix_and_resubmit","time_exceeded","discuss","demonstrate","ready_to_mark"],b.finalStatuses=["complete","fail","do_not_resubmit"],b.gradeableStatuses=["discuss","demonstrate","complete"],b.discussionStatuses=["discuss","demonstrate"],b.terminalStatuses=["do_not_resubmit","time_exceeded","complete","fail"],b.pdfRegeneratableStatuses=["demonstrate","ready_to_mark","discuss","complete","time_exceeded","fail","fix_and_resubmit","do_not_resubmit","redo"],b.submittableStatuses=["ready_to_mark","need_help"],b.markedStatuses=["redo","fail","fix_and_resubmit","do_not_resubmit","discuss","demonstrate","complete"],b.acronymKey={RTM:"ready_to_mark",NOS:"not_started",WRK:"working_on_it",HLP:"need_help",RDO:"redo",DNR:"do_not_resubmit",FIX:"fix_and_resubmit",DIS:"discuss",DEM:"demonstrate",COM:"complete",FAL:"fail",TIE:"time_exceeded"},b.learningWeight={fail:0,not_started:0,working_on_it:0,need_help:0,redo:.1,do_not_resubmit:.1,fix_and_resubmit:.3,ready_to_mark:.5,discuss:.8,demonstrate:.8,complete:1,time_exceeded:.3},b.statusAcronym={ready_to_mark:"RTM",not_started:"NOS",working_on_it:"WRK",need_help:"HLP",redo:"RDO",do_not_resubmit:"DNR",fix_and_resubmit:"FIX",discuss:"DIS",demonstrate:"DEM",complete:"COM",fail:"FAL",time_exceeded:"TIE"},b.statusLabels={ready_to_mark:"Ready for Feedback",not_started:"Not Started",working_on_it:"Working On It",need_help:"Need Help",redo:"Redo",do_not_resubmit:"Feedback Exceeded",fix_and_resubmit:"Resubmit",discuss:"Discuss",demonstrate:"Demonstrate",complete:"Complete",fail:"Fail",time_exceeded:"Time Exceeded"},b.statusIcons={ready_to_mark:"fa fa-thumbs-o-up",not_started:"fa fa-pause",working_on_it:"fa fa-bolt",need_help:"fa fa-question-circle",redo:"fa fa-refresh",do_not_resubmit:"fa fa-low-vision",fix_and_resubmit:"fa fa-wrench",discuss:"fa fa-commenting",demonstrate:"fa fa-commenting",complete:"fa fa-check",fail:"fa fa-times",time_exceeded:"fa fa-clock-o"},b.statusColors={ready_to_mark:"#0079D8",not_started:"#CCCCCC",working_on_it:"#EB8F06",need_help:"#a48fce",fix_and_resubmit:"#f2d85c",do_not_resubmit:"#d46b54",redo:"#804000",discuss:"#31b0d5",demonstrate:"#428bca",complete:"#5BB75B",fail:"#d93713",time_exceeded:"#d93713"},b.statusSeq={not_started:1,fail:2,do_not_resubmit:3,time_exceeded:4,redo:5,need_help:6,working_on_it:7,ready_to_mark:8,fix_and_resubmit:9,discuss:10,demonstrate:11,complete:12},b.helpDescriptions={ready_to_mark:{detail:"Submitted this task for feedback",reason:"You have finished working on the task and have uploaded it for your tutor to assess.",action:"No further action is required. Your tutor will change this task status once they have assessed it."},not_started:{detail:"Task not started",reason:"You have not yet started the Task.",action:"Depending on when the target date is, you should start this task soon."},working_on_it:{detail:"Working on the task",reason:"You are working on the task, but it is not yet ready to assess.",action:"Finish working on this task and then set it to ready for feedback."},need_help:{detail:"Need help for the task",reason:"You are working on the task but would like some help to get it complete.",action:"Upload the task with what you have completed so far and add a comment on what you would like help on."},redo:{detail:"Start this task from scratch",reason:"You appeared to have misunderstood what is required for this task, many deliverables were missing or the marking criteria was largely not met.",action:"You should reconsider your approach to this task. Review the task resources and task guide instructions. Check the deliverables carefully. Consider getting help from your tutor and/or lecturer."},do_not_resubmit:{detail:"Feedback will no longer be given",reason:"This work is not complete to an acceptable standard and your tutor will not reassess it again.",action:"It is now your responsibility to ensure this task is at an adequate standard in your portfolio. You should fix your work according to your tutor's prior feedback and include a corrected version in your portfolio."},fix_and_resubmit:{detail:"Your submission requires some more work",reason:"It looks like your work is on the right track, but it does require some extra work to achieve the required standard.",action:"Review your submission and the feedback from your tutor. Fix the issues identified, and resubmit it to be reassessed. Make sure to check your submission thoroughly, and note any limit on the number of times each task can be reassessed."},discuss:{detail:"You're almost complete!",reason:"Your work looks good and your tutor believes it is complete.",action:"To mark as complete, attend class and discuss it with your tutor."},demonstrate:{detail:"You're almost complete!",reason:"Your work looks good and your tutor believes it is complete.",action:"To mark as complete, attend class and demonstrate how your submission works to your tutor."},complete:{detail:"You are finished with this task \ud83c\udf89",reason:"Your tutor is happy with your work and it has been discussed with them.",action:"No further action required. Move onto the next task, or go party if everything is done."},fail:{detail:"You have failed this task",reason:"You have not successfully demonstrated the required learning for this task. This may be due to plagiarism detection or assessment under testing conditions.",action:"You should discuss this with your tutor and/or the convenor."},time_exceeded:{detail:"Time limit exceeded",reason:"This work was submitted after the deadline, having missed both the target date and deadline.",action:"Work submitted after the feedback deadline will not be checked by tutors prior to the portfolio assessment. You will need to ensure this task is at an adequate standard in your portfolio."}},b.switchableStates={student:["not_started","working_on_it","need_help","ready_to_mark"],tutor:["complete","discuss","demonstrate","fix_and_resubmit","redo","do_not_resubmit","fail"]},b.rejectFutureStates={not_started:[],working_on_it:[],need_help:[],ready_to_mark:[],complete:["ready_to_mark","not_started","working_on_it","need_help"],discuss:["ready_to_mark","not_started","working_on_it","need_help"],demonstrate:["ready_to_mark","not_started","working_on_it","need_help"],fix_and_resubmit:[],redo:[],do_not_resubmit:["ready_to_mark","not_started","working_on_it","need_help"],time_exceeded:["ready_to_mark","not_started","working_on_it","need_help"],fail:["ready_to_mark","not_started","working_on_it","need_help"]},b.statusClass=function(t){return _.trim(_.kebabCase(t))},b.statusText=function(t){return b.statusLabels[t]},b.helpDescription=function(t){return b.helpDescriptions[t]},b.taskDefinitionFn=function(t){return function(e){return t.taskDef(e.task_definition_id)}},b.statusData=function(t){var e;return{status:e=null!=t.status?t.status:t,icon:b.statusIcons[e],label:b.statusLabels[e],class:b.statusClass(e),help:b.helpDescription(e)}},b.isGroupTask=function(t){return g.isGroupTask(t)},b.staffAlignmentsForTask=function(t){return t.unit().staffAlignmentsForTaskDefinition(t.definition)},b.daysUntilTargetDate=function(t){return moment(t.targetDate()).diff(moment(),"days")},b.daysUntilDueDate=function(t){return moment(t.definition.localDueDate()).diff(moment(),"days")},b.daysPastTargetDate=function(t){return moment().diff(moment(t.targetDate()),"days")},b.daysPastDueDate=function(t){return moment().diff(moment(t.definition.localDueDate()),"days")},b.timePastTargetDate=function(t){return moment().diff(moment(t.targetDate()))},b.timePastDueDate=function(t){return moment().diff(moment(t.definition.localDueDate()))},b.triggerTransition=function(t,e,n){if(!_.includes(b.statusKeys,e))throw Error("Not a valid status key");if(t.status!==e)return _.includes(["ready_to_mark","need_help"],e)&&t.requiresFileUpload()?b.presentTaskSubmissionModal(t,e):(b.updateTaskStatus(t.unit(),t.project(),t,e),u.event("Task Service","Updated Status as "+(null!=n?n.role:"Student"),b.statusLabels[e]))},b.presentTaskSubmissionModal=function(t,e,n){var r,i;if(i=t.status,t.status=e,null!=(r=h.show(t,n)))return r.result.then(function(t){return null},function(e){return t.status=i,o.add("info","Submission cancelled. Status was reverted.",6e3)});t.status=i},v=function(t,e,n){return null==n&&(n=null),i.delete({id:t.id}).$promise.then(function(r){return e.task_definitions=_.without(e.task_definitions,t),o.add("success","Task Deleted",2e3),"function"==typeof n&&n(r),u.event("Task Service","Deleted Task Definition")},function(t){return o.add("danger",null!=t.data.error?"Error: "+t.data.error:"Unexpected error connecting to Doubtfire.",6e3),u.event("Task Service","Failed to Delete Task Definition")})},b.deleteTask=function(t,e,n){return null==n&&(n=null),p.show("Delete Task "+t.abbreviation,"Are you sure you want to delete this task? This action is final and will delete student work associated with this task.",function(){var n;return n=v(t,e,null),f.show("Deleting Task "+t.abbreviation,"Please wait while student projects are updated.",n)})},b.plagiarismDetected=function(t){return t.similar_to_count-t.similar_to_dismissed_count>0},b.indexOf=function(t){return _.indexOf(b.statusKeys,t)},b.allStatusData=function(){var t;return t=[],angular.forEach(b.statusKeys,function(e){return t.push({icon:b.statusIcons[e],label:b.statusLabels[e],class:b.statusClass(e)})}),t},b.processTaskStatusChange=function(t,e,n,r,i){return n.id=i.id,n.times_assessed=i.times_assessed,n.submisson_date=i.submisson_date,n.updateTaskStatus(i.status,i.new_stats),n.processing_pdf=i.processing_pdf,n.due_date=i.due_date,n.extensions=i.extensions,n.grade=i.grade,i.status!==r?o.add("info","Status change was not changed.",4e3):("function"==typeof e.updateBurndownChart&&e.updateBurndownChart(),o.add("success","Status saved.",2e3),null!=i.other_projects?_.each(i.other_projects,function(e){var r,o;if(null!=t.students&&(o=t.findStudent(e.id)),null!=o&&(n.updateTaskStatus(i.status,e.new_stats),null!=(r=o.findTaskForDefinition(n.definition.id))))return r.grade=i.grade,r.status=i.status}):void 0)},b.updateTaskStatus=function(t,e,i,a,s,l){var p,f,h;return p=i.status,h=function(){return r.update({project_id:e.project_id,task_definition_id:i.definition.id,trigger:a,grade:i.grade,quality_pts:i.quality_pts},function(n){return b.processTaskStatusChange(t,e,i,a,n),u.event("Task Service","Updated Task Status",a),u.event("Task Service","Updated Task Grade",d.grades[n.grade]),"function"==typeof s?s():void 0},function(t){return i.status=p,o.add("danger",t.data.error,6e3),u.event("Task Service","Failed to Update Task Status",a),"function"==typeof l?l():void 0})},(i.definition.is_graded||i.definition.max_quality_pts>0)&&n.call(b.gradeableStatuses,a)>=0?null!=(f=c.show(i))?f.result.then(function(t){return i.grade=t.selectedGrade,i.quality_pts=t.qualityPts,h()},function(){return i.status=p,o.add("info","No grade was specified to a graded task - status reverted",6e3)}):void 0:h()},b.recreateSubmissionPdf=function(e,n,r){return t.update({task_definition_id:e.definition.id,project_id:e.project().project_id},function(t){return"false"===t.result?(o.add("danger","Request failed, cannot recreate PDF at this time.",2e3),u.event("Task Service","Failed to Recreate PDF")):(e.processing_pdf=!0,o.add("info","Task PDF will be recreated.",2e3),u.event("Task Service","Recreated PDF"),"function"==typeof n?n():void 0)},function(t){return o.add("danger","Request failed, cannot recreate PDF at this time.",2e3),u.event("Task Service","Failed to Recreate PDF"),"function"==typeof r?r():void 0})},b.taskIsGraded=function(t){return null!=t&&t.definition.is_graded&&null!=t.grade},b.taskKeyFromString=function(t){var e,n,r;if(!(r=null!=t?t.split("/"):void 0)||(e=_.first(r),n=_.last(r),_.isString(e)&&_.isString(n)))return{studentId:e,taskDefAbbr:n}},b.taskKeyToUrlString=function(t){var e;return(e=t.taskKey()).studentId+"/"+e.taskDefAbbr},b.taskKeyToIdString=function(t){var e;return("task-key-"+(e=t.taskKey()).studentId+"-"+e.taskDefAbbr).replace(/[.#]/g,"-")},b.taskKey=function(t){return{studentId:t.project().student_id,taskDefAbbr:t.definition.abbreviation}},b.hasTaskKey=function(t,e){return _.isEqual(null!=t?t.taskKey():void 0,e)},b.mapComment=function(t){var e;return e=t.author.name.split(" "),t.initials=(""+e[0][0]+e[1][0]).toUpperCase(),t.author_is_me=t.author.id===m.profile.id,t},b.addComment=function(t,n,r,i,o){return e.create({project_id:t.project().project_id,task_definition_id:t.task_definition_id,comment:n,type:r},function(e){return null==t.comments&&(t.comments=[]),t.comments.unshift(b.mapComment(e)),null!=i&&_.isFunction(i)&&i(e),u.event("View Task Comments","Added new comment")},function(t){if(null!=o&&_.isFunction(o))return o(t)})},b.scrollDown=function(){return l(function(){var t,e;return t=document.querySelector("task-comments-viewer .panel-body"),(e=angular.element(t))[0].scrollTop=e[0].scrollHeight})},b.addMediaComment=function(t,n,r,i){var o;return(o=new FormData).append("project_id",t.project().project_id),o.append("task_definition_id",t.task_definition_id),o.append("attachment",n),e.create_media({project_id:t.project().project_id,task_definition_id:t.task_definition_id},o,function(e){return null==t.comments&&(t.comments=[]),t.comments.unshift(b.mapComment(e)),r(e)},function(t){return i(t)})},b.applyForExtension=function(t,e,n){var i;return i=function(n){return t.due_date=n.data.due_date,t.extensions=n.data.extensions,t.project().updateBurndownChart(),e(n)},r.applyForExtension(t,i,n)},b})},eLmm:function(t,e){angular.module("doubtfire.home.states",["doubtfire.home.states.home","doubtfire.home.states.new-user-wizard"])},eOMg:function(t,e){angular.module("doubtfire.sessions",["doubtfire.sessions.auth","doubtfire.sessions.cookies","doubtfire.sessions.current-user","doubtfire.sessions.states"])},eVRO:function(t,e){angular.module("doubtfire.common.modals.confirmation-modal",[]).factory("ConfirmationModal",function(t){var e;return(e={}).show=function(e,n,r){return t.open({templateUrl:"common/modals/confirmation-modal/confirmation-modal.tpl.html",controller:"ConfirmationModalCtrl",resolve:{title:function(){return e},message:function(){return n},action:function(){return r}}})},e}).controller("ConfirmationModalCtrl",function(t,e,n,r,i,o){return t.title=n,t.message=r,t.confirmAction=function(){return i(),e.dismiss()},t.cancelAction=function(){return o.add("info",n+" action cancelled",3e3),e.dismiss()}})},"ej+f":function(t,e){angular.module("doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-due-card",[]).directive("taskDueCard",function(){return{restrict:"E",templateUrl:"projects/states/dashboard/directives/task-dashboard/directives/task-due-card/task-due-card.tpl.html",scope:{task:"="},controller:function(t,e){return t.applyForExtension=function(){return t.task.applyForExtension(function(t){return e.add("success","Extension granted",2e3)},function(t){return e.add("danger","Extension failed - "+t.data.error,6e3)})}}}})},ejcT:function(t,e){angular.module("doubtfire.common.services.grades",[]).factory("gradeService",function(){var t;return(t={}).gradeValues=[0,1,2,3],t.allGradeValues=[-1,0,1,2,3],t.grades=["Pass","Credit","Distinction","High Distinction"],t.grades[-1]="Fail",t.gradeNumbers={F:-1,P:0,C:1,D:2,HD:3},t.gradeAcronyms={Fail:"F",Pass:"P",Credit:"C",Distinction:"D","High Distinction":"HD",0:"P",1:"C",2:"D",3:"HD"},t.gradeAcronyms[-1]="F",t.gradeColors={F:"#808080",0:"#FF0000",P:"#FF0000",1:"#FF8000",C:"#FF8000",2:"#0080FF",D:"#0080FF",3:"#80FF00",HD:"#80FF00"},t.gradeColors[-1]="#808080",t.gradeFor=function(e){return t.gradeNumbers[e.target_grade]},t})},exXu:function(t,e){angular.module("doubtfire.sessions.current-user",[]).constant("currentUser",{id:0,role:"anon",profile:{name:"Anonymous",nickname:"anon"}})},f3wz:function(t,e){angular.module("doubtfire.errors",["doubtfire.errors.states"])},fkHl:function(t,e){angular.module("doubtfire.admin.modals",["doubtfire.admin.modals.create-unit-modal","doubtfire.admin.modals.teaching-period-settings-modal","doubtfire.admin.modals.user-notification-settings-modal","doubtfire.admin.modals.user-settings-modal","doubtfire.admin.modals.rollover-teaching-period-modal","doubtfire.admin.modals.create-break-modal"])},fsPY:function(t,e){angular.module("doubtfire.tasks.project-tasks-list",[]).directive("projectTasksList",function(){return{replace:!0,restrict:"E",templateUrl:"tasks/project-tasks-list/project-tasks-list.tpl.html",scope:{unit:"=",project:"=",onSelect:"=",inMenu:"@"},controller:function(t,e,n,r,i,o){return i.event("Student Project View","Showed Task Button List"),t.statusClass=n.statusClass,t.statusText=n.statusText,t.taskDefinition=n.taskDefinitionFn(t.unit),t.taskDisabled=function(e){return t.taskDefinition(e).target_grade>t.project.target_grade},t.groupSetName=function(e){return r.groupSetName(e,t.unit)},t.hideGroupSetName=0===t.unit.group_sets.length,t.taskText=function(t){var e;return e=t.definition.abbreviation,t.definition.is_graded&&(e+=null!=t.grade?" ("+o.gradeAcronyms[t.grade]+")":" (?)"),t.definition.max_quality_pts>0&&(e+=null!=t.quality_pts?" ("+t.quality_pts+"/"+t.definition.max_quality_pts+")":" (?/"+t.definition.max_quality_pts+")"),e}}}})},g40n:function(t,e){angular.module("doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-submission-card",[]).directive("taskSubmissionCard",function(){return{restrict:"E",templateUrl:"projects/states/dashboard/directives/task-dashboard/directives/task-submission-card/task-submission-card.tpl.html",scope:{task:"="},controller:function(t,e,n,r,i){var o,a;return o=e.listenTo(t),a=function(){return t.task.getSubmissionDetails(function(){return t.canReuploadEvidence=t.task.canReuploadEvidence(),t.canRegeneratePdf=_.includes(r.pdfRegeneratableStatuses,t.task.status)&&t.task.has_pdf,t.submission={isProcessing:t.task.processing_pdf,isUploaded:t.task.has_pdf},t.urls={pdf:n.getTaskUrl(t.task,!0),files:n.getTaskFilesUrl(t.task)}})},o.push(t.$watch("task.id",function(){if(null!=t.task)return a()})),t.uploadAlternateFiles=function(){return r.presentTaskSubmissionModal(t.task,t.task.status,!0)},t.regeneratePdf=function(){return t.task.recreateSubmissionPdf()}}}})},g96Y:function(t,e){angular.module("doubtfire.tasks.task-ilo-alignment.modals.task-ilo-alignment-modal",[]).factory("TaskILOAlignmentModal",function(t){var e;return(e={}).show=function(e,n,r,i,o,a){return t.open({controller:"TaskILOAlignmentModalCtrl",templateUrl:"tasks/task-ilo-alignment/modals/task-ilo-alignment-modal/task-ilo-alignment-modal.tpl.html",resolve:{task:function(){return e},ilo:function(){return n},alignment:function(){return r},unit:function(){return i},project:function(){return o},source:function(){return a}}})},e}).controller("TaskILOAlignmentModalCtrl",function(t,e,n,r,i,o,a,s,l,u,c,d){var p,f,h;return t.source=d,t.unit=u,t.task=a,t.ilo=s,t.alignment=l,t.project=c,t.project&&(h=function(e){return e.task_id=o.taskFromTaskDefId(t.project,e.task_definition_id).id}),t.editingRationale=!1,t.toggleEditRationale=function(){return t.editingRationale&&f(),t.editingRationale=!t.editingRationale},t.removeAlignmentItem=function(){var n;return n=_.extend({unit_id:t.unit.id},t.alignment),r.delete(n,function(r){var i;return i=t.source.task_outcome_alignments.indexOf(_.find(t.source.task_outcome_alignments,{id:t.alignment.id})),t.source.task_outcome_alignments.splice(i,1),t.alignment=void 0,e.$broadcast("UpdateAlignmentChart",n,{remove:!0})},function(t){if(null!=t.data.error)return i.add("danger","Error: "+t.data.error,6e3)})},f=function(){var n;return n=_.extend({unit_id:t.unit.id},t.alignment),r.update(n,function(t){return i.add("success","Task - Outcome alignment rating saved",2e3),e.$broadcast("UpdateAlignmentChart",t,{updated:!0})},function(t){if(null!=t.data.error)return i.add("danger","Error: "+t.data.error,6e3)})},p=function(){var n;return t.alignment=n={unit_id:t.unit.id,learning_outcome_id:t.ilo.id,task_definition_id:t.task.definition.id,rating:t.alignment.rating,description:null},t.project&&(n.project_id=t.project.project_id,h(n)),r.create(n,function(n){return t.alignment.id=n.id,t.source.task_outcome_alignments.push(t.alignment),e.$broadcast("UpdateAlignmentChart",n,{created:!0})},function(t){if(null!=t.data.error)return i.add("danger","Error: "+t.data.error,6e3)})},t.updateRating=function(e){return null==t.alignment.id?p():f(e)},t.closeModal=function(){return t.editingRationale&&t.updateRating(t.alignment),n.close(t.alignment)}})},gJle:function(t,e){angular.module("doubtfire.common.services.listener",[]).factory("listenerService",function(){var t,e;return e={},(t={}).listenTo=function(t){var n;return null==e[n=t.$id]&&(e[n]=[]),t.$on("$destroy",function(){return _.each(e[t.$id],function(t){return t()})}),e[t.$id]},t})},gWJd:function(t,e){angular.module("doubtfire.api.models.task-alignment",[]).factory("TaskAlignment",function(t,e,n,r){var i;return(i={}).taskAlignmentCSVUploadUrl=function(t,r){return null!=r?e.API_URL+"/units/"+t.id+"/learning_alignments/csv.json?project_id="+r+"&auth_token="+n.authenticationToken:e.API_URL+"/units/"+t.id+"/learning_alignments/csv.json?auth_token="+n.authenticationToken},i.downloadCSV=function(t,i){return r.open(null!=i?e.API_URL+"/units/"+t.id+"/learning_alignments/csv.json?project_id="+i+"&auth_token="+n.authenticationToken:e.API_URL+"/units/"+t.id+"/learning_alignments/csv.json?auth_token="+n.authenticationToken,"_blank")},i})},ggdv:function(t,e){angular.module("doubtfire.api.models.group",[]).factory("Group",function(t){return t("/units/:unit_id/group_sets/:group_set_id/groups/:id",{id:"@id",group_set_id:"@group_set_id",unit_id:"@unit_id"})})},gwZl:function(t,e){angular.module("doubtfire.admin.states.users",[]).config(function(t){return t.state("admin/users",{url:"/admin/users",views:{main:{controller:"AdministerUsersCtrl",templateUrl:"admin/states/users/users.tpl.html"}},data:{pageTitle:"_Users Administration_",roleWhitelist:["Admin","Convenor"]}})}).controller("AdministerUsersCtrl",function(t,e,n,r,i,o,a){return t.file_data={onBatchUserSuccess:function(e){return o.show("User CSV import results",e),t.users=n.query()},batchUserUrl:n.csvUrl(),batchUserFiles:{file:{name:"CSV File",type:"csv"}}},t.users=n.query(),t.sortOrder="id",t.currentPage=1,t.maxSize=5,t.pageSize=15,t.externalName=r.ExternalName,t.showUserModal=function(t){var e;return e=null!=t?t:new n({}),a.show(e)}})},"hrW+":function(t,e){angular.module("doubtfire.projects.states.feedback",[]).config(function(t){return t.state("projects#feedback",{url:":viewing/:showTaskId",parent:"projects#show"})})},i3xR:function(t,e){angular.module("doubtfire.projects.states.outcomes",[]).config(function(t){return t.state("projects/outcomes",{parent:"projects/index",url:"/outcomes",controller:"LearningOutcomesStateCtrl",templateUrl:"projects/states/outcomes/outcomes.tpl.html",data:{task:"Learning Outcomes",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin","Student"]}})}).controller("LearningOutcomesStateCtrl",function(t,e,n,r,i,o,a,s){var l;return t.poaView={activeTab:"list"},t.targets=r.calculateTargets(t.unit,t.unit,r.unitTaskStatusFactor()),t.currentProgress=r.calculateProgress(t.unit,t.project),t.refreshCharts=s.refreshAll,l=function(){return t.currentProgress.length=0,t.currentProgress=_.extend(t.currentProgress,r.calculateProgress(t.unit,t.project))},t.$watch("project",function(){return l(),e.$broadcast("ProgressUpdated")}),t.$watch("project.tasks",function(){return l(),e.$broadcast("ProgressUpdated")}),t.selectTab=function(e){return"progress"===e&&null==t.classStats&&i.learningProgressClassStats.get({id:t.unit.id},function(e){return t.classStats=e},function(e){return o.add("danger",null!=e.data.error?"Error: "+e.data.error:"Failed to get unit progress class statistics",6e3),t.classStats={}}),t.poaView.activeTab=e,a.event("Stuent Feedback View - Learning Outcomes Tab","Switched Tab","progress"===e?"View Learning Progress Tab":"Reflect on Learning Tab"),t.refreshCharts()},t.selectTab("progress"),t.$on("UpdateAlignmentChart",function(){return l(),e.$broadcast("ProgressUpdated")})})},"igl/":function(t,e){angular.module("doubtfire.units.states.analytics.directives.task-completion-stats",[]).directive("taskCompletionStats",function(){return{restrict:"E",templateUrl:"units/states/analytics/directives/task-completion-stats/task-completion-stats.tpl.html",scope:{unit:"="},controller:function(t,e){var n,r;return null==(null!=(r=t.unit.analytics)?r.taskCompletionStats:void 0)?e.taskCompletionStats.get({id:t.unit.id},function(e){return t.unit.analytics.taskCompletionStats=e,t.data=e.unit}):t.data=t.unit.analytics.taskCompletionStats.unit,t.tutorialsForSelector=[n={id:-1,abbreviation:"Overview",tutor_name:"All Tutorials"}].concat(t.unit.tutorials),t.switchToTutorial=function(e){var r;if(null!=(null!=(r=t.unit.analytics)?r.taskCompletionStats:void 0))return t.dataModel.selectedTutorial=e,e===n?(t.data=t.unit.analytics.taskCompletionStats.tutorial,t.depth=1):(t.data=t.unit.analytics.taskCompletionStats.tutorial[e.id],t.depth=0)},t.drillDown=function(){return t.dataModel.selectedType="tutorial",t.switchToTutorial(n)},t.dataModel={selectedType:"unit",selectedTutorial:n},t.depth=0,t.$watch("dataModel.selectedType",function(e){var r;return null!=(null!=(r=t.unit.analytics)?r.taskCompletionStats:void 0)&&(t.data=t.unit.analytics.taskCompletionStats[e]),"tutorial"===e?t.switchToTutorial(n):t.depth=0}),t.$watch("dataModel.selectedTutorial",t.switchToTutorial)}}})},ixBm:function(t,e){angular.module("doubtfire.sessions.states.sign-in",[]).config(function(t){return t.state("sign_in",{url:"/sign_in?dest&params&authToken",views:{main:{controller:"SignInCtrl",templateUrl:"sessions/states/sign-in/sign-in.tpl.html"}},data:{pageTitle:"_Sign In_"}})}).controller("SignInCtrl",function(t,e,n,r,i,o,a,s,l,u,c,d,p,f,h){var m,g;return t.isIE="Microsoft Internet Explorer"===window.navigator.appName&&(!(null!=(g=new RegExp(" MSIE ([0-9].[0-9]);").exec(window.navigator.userAgent))&&g.length>1)||parseInt(g[1].replace(".0","")))<11,t.session={remember_me:!0},t.externalName=r.ExternalName,t.api=r.API_URL,m=o(function(){return t.waitingAWhile=!0},1500),a.get(r.API_URL+"/auth/method").then(function(e){return t.aafLogin=e.data.redirect_to||!1,t.aafLogin?n.authToken?t.signIn({auth_token:n.authToken}):window.location.assign(t.aafLogin):(t.authMethodLoaded=!0,o.cancel(m))},function(e){return t.authMethodFailed=!0,t.error=e,o.cancel(m)}),angular.element(document).ready(function(){var t,e,n,i,o;if("Doubtfire"===r.ExternalName.value)return 1===(o=new Date).getDate()&&3===o.getMonth()&&null!=(i=null!=(e=document.querySelector("#sign-in h1.logo"))?e.querySelector("i"):void 0)&&null!=e?((t=document.createElement("A")).href="http://www.imdb.com/title/tt0107614/",t.title="Mrs. Doubtfire (1993)",(n=document.createElement("P")).appendChild(document.createTextNode("Happy April Fools Day! \ud83c\udf89")),e.classList.add("aprilfools"),e.appendChild(t),e.appendChild(n),i.style.backgroundImage='url("/assets/images/mrsdoubtfire.png")',i.style.backgroundColor="inherit"):void 0}),t.openAboutModal=function(){return h.show()},u.isAuthenticated()?e.go("home"):t.signIn=function(n){var a;return t.signingIn=!0,a=function(){return null==n&&(n={username:t.session.username,password:t.session.password,remember:t.session.remember_me}),u.signIn(r.API_URL+"/auth",n,function(n){return t.session.remember_me?(d.set(i,l),d.set(p,!0),d.set(f,(new Date).getTime())):(d.remove(i),d.set(p,!1),d.remove(f)),c.clearAll(),e.go("home",{})},function(e){return t.session.password="",t.signingIn=!1,e.error?(t.invalidCredentials=!0,o(function(){return t.invalidCredentials=!1},300),c.add("warning","Login failed: "+e.error,6e3)):c.add("danger","Login failed: Unable to connect to server",6e3)})},o(a,100)}})},jeRM:function(t,e){angular.module("doubtfire.units.states.plagiarism",["doubtfire.units.states.plagiarism.directives"]).config(function(t){return t.state("units/students/plagiarism",{parent:"units/index",url:"/students/plagiarism",templateUrl:"units/states/plagiarism/plagiarism.tpl.html",controller:"UnitPlagiarismStateCtrl",data:{task:"Student Plagiarism",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin"]}})}).controller("UnitPlagiarismStateCtrl",function(t){})},jm96:function(t,e){angular.module("doubtfire.units.states.rollover",["doubtfire.units.states.rollover.directives"]).config(function(t){return t.state("units/rollover",{parent:"units/index",url:"/rollover",controller:"RolloverUnitState",templateUrl:"units/states/rollover/rollover.tpl.html",data:{task:"Unit Rollover",pageTitle:"_Unit Rollover_",roleWhitelist:["Convenor","Admin"]}})}).controller("RolloverUnitState",function(t,e,n,r,i,o,a){return a.event("Unit Rollover View","Started Unit Rollover View"),i.getUnit(e.params.unitId,function(e){return t.unit=e})})},kvyo:function(t,e){var n,r,i,o,a,s,l,u,c;window,n=window.angular,r=n.isDefined,i=n.isUndefined,o=n.isNumber,a=n.isObject,s=n.isArray,l=n.isString,u=n.extend,c=n.toJson,n.module("LocalStorageModule",[]).provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/",secure:!1},this.defaultToCookie=!0,this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(t){return this.prefix=t,this},this.setStorageType=function(t){return this.storageType=t,this},this.setDefaultToCookie=function(t){return this.defaultToCookie=!!t,this},this.setStorageCookie=function(t,e,n){return this.cookie.expiry=t,this.cookie.path=e,this.cookie.secure=n,this},this.setStorageCookieDomain=function(t){return this.cookie.domain=t,this},this.setNotify=function(t,e){return this.notify={setItem:t,removeItem:e},this},this.$get=["$rootScope","$window","$document","$parse","$timeout",function(t,e,n,d,p){var f,h=this,m=h.prefix,g=h.cookie,v=h.notify,b=h.storageType;n?n[0]&&(n=n[0]):n=document,"."!==m.substr(-1)&&(m=m?m+".":"");var y=function(t){return m+t},w=function(t){return t.replace(new RegExp("^"+m,"g"),"")},k=function(t){return 0===t.indexOf(m)},_=function(){try{var n=b in e&&null!==e[b],r=y("__"+Math.round(1e7*Math.random()));return n&&((f=e[b]).setItem(r,""),f.removeItem(r)),n}catch(i){return h.defaultToCookie&&(b="cookie"),t.$broadcast("LocalStorageModule.notification.error",i.message),!1}},x=_(),S=function(e,n,r){var o=O();try{if(M(r),n=i(n)?null:c(n),!x&&h.defaultToCookie||"cookie"===h.storageType)return x||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),v.setItem&&t.$broadcast("LocalStorageModule.notification.setitem",{key:e,newvalue:n,storageType:"cookie"}),E(e,n);try{f&&f.setItem(y(e),n),v.setItem&&t.$broadcast("LocalStorageModule.notification.setitem",{key:e,newvalue:n,storageType:h.storageType})}catch(a){return t.$broadcast("LocalStorageModule.notification.error",a.message),E(e,n)}return!0}finally{M(o)}},$=function(e,n){var r=O();try{if(M(n),!x&&h.defaultToCookie||"cookie"===h.storageType)return x||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),A(e);var i=f?f.getItem(y(e)):null;if(!i||"null"===i)return null;try{return JSON.parse(i)}catch(o){return i}}finally{M(r)}},T=function(){var e=O();try{var n,r,i=0;for(arguments.length>=1&&("localStorage"===arguments[arguments.length-1]||"sessionStorage"===arguments[arguments.length-1])&&(i=1,M(arguments[arguments.length-1])),n=0;n<arguments.length-i;n++)if(r=arguments[n],!x&&h.defaultToCookie||"cookie"===h.storageType)x||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),v.removeItem&&t.$broadcast("LocalStorageModule.notification.removeitem",{key:r,storageType:"cookie"}),D(r);else try{f.removeItem(y(r)),v.removeItem&&t.$broadcast("LocalStorageModule.notification.removeitem",{key:r,storageType:h.storageType})}catch(o){t.$broadcast("LocalStorageModule.notification.error",o.message),D(r)}}finally{M(e)}},C=function(){try{return e.navigator.cookieEnabled||"cookie"in n&&(n.cookie.length>0||(n.cookie="test").indexOf.call(n.cookie,"test")>-1)}catch(r){return t.$broadcast("LocalStorageModule.notification.error",r.message),!1}}(),E=function(e,r,l,u){if(i(r))return!1;if((s(r)||a(r))&&(r=c(r)),!C)return t.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var d="",p=new Date,f="";if(null===r?(p.setTime(p.getTime()+-864e5),d="; expires="+p.toGMTString(),r=""):o(l)&&0!==l?(p.setTime(p.getTime()+24*l*60*60*1e3),d="; expires="+p.toGMTString()):0!==g.expiry&&(p.setTime(p.getTime()+24*g.expiry*60*60*1e3),d="; expires="+p.toGMTString()),e){var h="; path="+g.path;g.domain&&(f="; domain="+g.domain),"boolean"==typeof u?!0===u&&(f+="; secure"):!0===g.secure&&(f+="; secure"),n.cookie=y(e)+"="+encodeURIComponent(r)+d+h+f}}catch(m){return t.$broadcast("LocalStorageModule.notification.error",m.message),!1}return!0},A=function(e){if(!C)return t.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var r=n.cookie&&n.cookie.split(";")||[],i=0;i<r.length;i++){for(var o=r[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(y(e)+"=")){var a=decodeURIComponent(o.substring(m.length+e.length+1,o.length));try{var s=JSON.parse(a);return"number"==typeof s?a:s}catch(l){return a}}}return null},D=function(t){E(t,null)},P=function(){for(var t=null,e=m.length,r=n.cookie.split(";"),i=0;i<r.length;i++){for(t=r[i];" "===t.charAt(0);)t=t.substring(1,t.length);var o=t.substring(e,t.indexOf("="));D(o)}},O=function(){return b},M=function(t){return t&&b!==t&&(b=t,x=_()),x};function R(n){if(n||(n=e.event),v.setItem&&l(n.key)&&k(n.key)){var r=w(n.key);p(function(){t.$broadcast("LocalStorageModule.notification.changed",{key:r,newvalue:n.newValue,storageType:h.storageType})})}}return x&&(e.addEventListener?(e.addEventListener("storage",R,!1),t.$on("$destroy",function(){e.removeEventListener("storage",R)})):e.attachEvent&&(e.attachEvent("onstorage",R),t.$on("$destroy",function(){e.detachEvent("onstorage",R)}))),{isSupported:x,getStorageType:O,setStorageType:M,setPrefix:function(t){m=t},set:S,add:S,get:$,keys:function(e){var n=O();try{if(M(e),!x)return t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),[];var r=m.length,i=[];for(var o in f)if(o.substr(0,r)===m)try{i.push(o.substr(r))}catch(a){return t.$broadcast("LocalStorageModule.notification.error",a.Description),[]}return i}finally{M(n)}},remove:T,clearAll:function(e,n){var r=O();try{M(n);var i=m?new RegExp("^"+m):new RegExp,o=e?new RegExp(e):new RegExp;if(!x&&h.defaultToCookie||"cookie"===h.storageType)return x||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),P();if(!x&&!h.defaultToCookie)return!1;var a=m.length;for(var s in f)if(i.test(s)&&o.test(s.substr(a)))try{T(s.substr(a))}catch(l){return t.$broadcast("LocalStorageModule.notification.error",l.message),P()}return!0}finally{M(r)}},bind:function(t,e,n,i,o){var s=$(i=i||e,o);return null===s&&r(n)?s=n:a(s)&&a(n)&&(s=u(s,n)),d(e).assign(t,s),t.$watch(e,function(t){S(i,t,o)},a(t[e]))},deriveKey:y,underiveKey:w,length:function(t){var n=O();try{M(t);for(var r=0,i=e[b],o=0;o<i.length;o++)0===i.key(o).indexOf(m)&&r++;return r}finally{M(n)}},defaultToCookie:this.defaultToCookie,cookie:{isSupported:C,set:E,add:E,get:A,remove:D,clearAll:P}}}]})},l9Zy:function(t,e){angular.module("doubtfire.config.root-controller",[]).controller("AppCtrl",function(t){return t.query()})},lZfr:function(t,e){angular.module("doubtfire.projects.states.all",["doubtfire.projects.states.all.directives"])},ltUq:function(t,e){angular.module("doubtfire.visualisations.achievement-custom-bar-chart",[]).directive("achievementCustomBarChart",function(){return{replace:!0,restrict:"E",templateUrl:"visualisations/visualisation.tpl.html",scope:{project:"=",unit:"="},controller:function(t,e,n,r){var i,o,a,s,l;return t.showLegend=null==t.showLegend||t.showLegend,null==nv.models.achievementBar&&(nv.models.achievementBar=function(){var t,e,n,i,o,a,s,u,c,d,p,f,h,m,g,v,b,y,w,k,x;return t=function(i){return f.reset(),i.each(function(t){var i,c,S,$,T,C,E,A,D,P,O,M,R,j;c=g-d.left-d.right,i=u-d.top-d.bottom,A=d3.select(this),nv.utils.initSVG(A),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})}),O=b&&k?[]:t.map(function(t){return t.values.map(function(t,e){return{x:a(t,e),y:s(t,e),y0:t.y0}})}),v.domain(b||d3.merge(O).map(function(t){return t.x})).rangeBands(y||[0,c],.1),w.domain(k||d3.extent(d3.merge(O).map(function(t){return t.y}).concat(o))),w.range(h?x||[i-(w.domain()[0]<0?12:0),w.domain()[1]>0?12:0]:x||[i,0]),R=R||v,j=j||w.copy().range([w(0),w(0)]),D=(M=A.selectAll("g.nv-wrap.nv-discretebar").data([t])).enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g"),M.select("g"),D.append("g").attr("class","nv-groups"),M.attr("transform","translate("+d.left+","+d.top+")"),(P=M.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key})).enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),P.exit().watchTransition(f,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),P.attr("class",function(t,e){return"nv-group nv-series-"+e}),P.watchTransition(f,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75),null!=l&&_.size(l)>0&&((S=P.selectAll("g.nv-backBarSeries").data(function(t){return t.values})).exit().remove(),S.enter().append("g").attr("transform",function(t,e){return"translate("+v(a(t,e))+.05*v.rangeBand()+", "+w(0)+")"}),S.attr("class",function(t,e){return"nv-backBarSeries nv-backSeries-"+e}).classed("hover",function(t){return t.hover}),($=S.selectAll("g.nv-backBar").data(function(t,e){return _.map(_.values(t.targets),function(e){return{value:e,key:t.label}})})).exit().remove(),(T=$.enter().append("g")).append("rect").attr("height",10).attr("width",.9*v.rangeBand()/t.length),T.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),n.elementMouseover({data:r.grades[e],index:e,color:t.value.color})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),n.elementMouseout({data:r.grades[e],index:e,color:t.value.color})}).on("mousemove",function(t,e){n.elementMousemove({data:r.grades[e],index:e,color:t.value.color})}).on("click",function(t,e){n.elementClick({data:r.grades[e],index:e,color:t.value.color,event:d3.event,element:this}),d3.event.stopPropagation()}).on("dblclick",function(t,e){n.elementDblClick({data:r.grades[e],index:e,color:t.value.color}),d3.event.stopPropagation()}),$.attr("class",function(t,e,n){return t.value.height<0?"nv-backBar negative":"nv-backBar positive"}).select("rect").attr("class",p).style("fill-opacity","0.2").style("fill",function(t){return t.value.color}).watchTransition(f,"discreteBar: backBars rect").attr("width",.9*v.rangeBand()/t.length),$.watchTransition(f,"discreteBar: backBars").attr("transform",function(t,e,n){return"translate("+(v(t.key)+.05*v.rangeBand())+", "+w(t.value.height+t.value.offset)+")"}).select("rect").attr("height",function(t,e,n){return Math.max(Math.abs(w(t.value.height)-w(0)),1)})),(C=P.selectAll("g.nv-bar").data(function(t){return t.values})).exit().remove(),(E=C.enter().append("g").attr("transform",function(t,e,n){return"translate("+v(a(t,e))+.25*v.rangeBand()+", "+w(0)+")"}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),n.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),n.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){n.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){n.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}).on("dblclick",function(t,e){n.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()})).append("rect").attr("height",0).attr("width",.5*v.rangeBand()/t.length),h?(E.append("text").attr("text-anchor","middle"),C.select("text").text(function(t,e){return m(s(t,e))}).watchTransition(f,"discreteBar: bars text").attr("x",.5*v.rangeBand()/2).attr("y",function(t,e){return s(t,e)<0?w(s(t,e))-w(0)+12:-4})):C.selectAll("text").remove(),C.attr("class",function(t,e){return s(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,n){return t.color||e(t,n)}).style("stroke",function(t,n){return t.color||e(t,n)}).select("rect").attr("class",p).watchTransition(f,"discreteBar: bars rect").attr("width",.5*v.rangeBand()/t.length),C.watchTransition(f,"discreteBar: bars").attr("transform",function(t,e){return"translate("+(v(a(t,e))+.25*v.rangeBand())+", "+(s(t,e)<0?w(0):w(0)-w(s(t,e))<1?w(0)-1:w(s(t,e)))+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(w(s(t,e))-w(0)),1)}),R=v.copy(),j=w.copy()}),f.renderEnd("achievementBar immediate"),t},d={top:0,right:0,bottom:0,left:0},g=960,u=500,c=Math.floor(1e4*Math.random()),v=d3.scale.ordinal(),w=d3.scale.linear(),a=function(t){return t.x},s=function(t){return t.y},o=[0],e=nv.utils.defaultColor(),h=!1,m=d3.format(",.2f"),b=void 0,k=void 0,y=void 0,x=void 0,n=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),p="discreteBar",i=250,f=nv.utils.renderWatch(n,i),t.dispatch=n,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return g},set:function(t){g=t}},height:{get:function(){return u},set:function(t){u=t}},forceY:{get:function(){return o},set:function(t){o=t}},showValues:{get:function(){return h},set:function(t){h=t}},x:{get:function(){return a},set:function(t){a=t}},y:{get:function(){return s},set:function(t){s=t}},xScale:{get:function(){return v},set:function(t){v=t}},yScale:{get:function(){return w},set:function(t){w=t}},xDomain:{get:function(){return b},set:function(t){b=t}},yDomain:{get:function(){return k},set:function(t){k=t}},xRange:{get:function(){return y},set:function(t){y=t}},yRange:{get:function(){return x},set:function(t){x=t}},valueFormat:{get:function(){return m},set:function(t){m=t}},id:{get:function(){return c},set:function(t){c=t}},rectClass:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return d},set:function(t){d.top=void 0!==t.top?t.top:d.top,d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},color:{get:function(){return e},set:function(t){e=nv.utils.getColor(t)}},duration:{get:function(){return i},set:function(t){f.reset(i=t)}}}),nv.utils.initOptions(t),t},nv.models.achievementBarChart=function(){var t,e,n,r,i,o,a,s,l,u,c,d,p,f,h,m,g,v,b,y,w;return e=function(n){return u.reset(),u.models(t),f&&u.models(y),h&&u.models(w),n.each(function(n){var l,u,g,k,_,x,S,$,T,C;if(g=d3.select(this),nv.utils.initSVG(g),u=nv.utils.availableWidth(v,g,s),l=nv.utils.availableHeight(o,g,s),e.update=function(){r.beforeUpdate(),g.transition().duration(i).call(e)},e.container=this,!n||!n.length||n.filter(function(t){return t.values.length}).length<=0)return nv.utils.noData(e,g),e;g.selectAll(".nv-noData").remove(),$=t.xScale(),C=t.yScale().clamp(!0),k=(x=(S=g.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([n])).enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g")).append("defs"),_=S.select("g"),x.append("g").attr("class","nv-x nv-axis"),x.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),x.append("g").attr("class","nv-barsWrap"),x.append("g").attr("class","nv-legendWrap"),_.attr("transform","translate("+s.left+","+s.top+")"),p&&(a.width(u),_.select(".nv-legendWrap").datum(n).call(a),s.top!==a.height()&&(s.top=a.height(),l=nv.utils.availableHeight(o,g,s)),S.select(".nv-legendWrap").attr("transform","translate(0,"+-s.top+")")),c&&_.select(".nv-y.nv-axis").attr("transform","translate("+u+",0)"),c&&_.select(".nv-y.nv-axis").attr("transform","translate("+u+",0)"),t.width(u).height(l),_.select(".nv-barsWrap").datum(n.filter(function(t){return!t.disabled})).transition().call(t),k.append("clipPath").attr("id","nv-x-label-clip-"+t.id()).append("rect"),_.select("#nv-x-label-clip-"+t.id()+" rect").attr("width",$.rangeBand()*(m?2:1)).attr("height",16).attr("x",-$.rangeBand()/(m?1:2)),f&&(y.scale($)._ticks(nv.utils.calcTicksX(u/100,n)).tickSize(-l,0),_.select(".nv-x.nv-axis").attr("transform","translate(0,"+(C.range()[0]+(t.showValues()&&C.domain()[0]<0?16:0))+")"),_.select(".nv-x.nv-axis").call(y),T=_.select(".nv-x.nv-axis").selectAll("g"),m&&T.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"}),d&&T.selectAll(".tick text").attr("transform","rotate("+d+" 0,0)").style("text-anchor",d>0?"start":"end"),b&&_.selectAll(".tick text").call(nv.utils.wrapTicks,e.xAxis.rangeBand())),h&&(w.scale(C)._ticks(nv.utils.calcTicksY(l/36,n)).tickSize(-u,0),_.select(".nv-y.nv-axis").call(w)),_.select(".nv-zeroLine line").attr("x1",0).attr("x2",c?-u:u).attr("y1",C(0)).attr("y2",C(0))}),u.renderEnd("achievementBar chart immediate"),e},t=nv.models.achievementBar(),y=nv.models.axis(),w=nv.models.axis(),a=nv.models.legend(),g=nv.models.tooltip(),s={top:15,right:10,bottom:50,left:60},v=null,o=null,n=nv.utils.getColor(),p=!1,f=!0,h=!0,c=!1,m=!1,b=!1,d=0,l=null,r=d3.dispatch("beforeUpdate","renderEnd"),i=250,y.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),w.orient(c?"right":"left").tickFormat(d3.format(",.1f")),g.duration(0).headerEnabled(!1).keyFormatter(function(t,e){return y.tickFormat()(t,e)}),u=nv.utils.renderWatch(r,i),t.dispatch.on("elementMouseover.tooltip",function(t){var n;n=e.x()(t.data),t.series={key:n=null==n?t.data+" task range":"Your progress with "+n,color:t.color},g.data(t).hidden(!1)}),t.dispatch.on("elementMouseout.tooltip",function(t){g.hidden(!0)}),t.dispatch.on("elementMousemove.tooltip",function(t){g.position({top:d3.event.pageY,left:d3.event.pageX})(),g()}),e.dispatch=r,e.achievementbar=t,e.legend=a,e.xAxis=y,e.yAxis=w,e.tooltip=g,e.options=nv.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return o},set:function(t){o=t}},showLegend:{get:function(){return p},set:function(t){p=t}},staggerLabels:{get:function(){return m},set:function(t){m=t}},rotateLabels:{get:function(){return d},set:function(t){d=t}},wrapLabels:{get:function(){return b},set:function(t){b=!!t}},showXAxis:{get:function(){return f},set:function(t){f=t}},showYAxis:{get:function(){return h},set:function(t){h=t}},noData:{get:function(){return l},set:function(t){l=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},duration:{get:function(){return i},set:function(e){u.reset(i=e),t.duration(i),y.duration(i),w.duration(i)}},color:{get:function(){return n},set:function(e){n=nv.utils.getColor(e),t.color(n),a.color(n)}},rightAlignYAxis:{get:function(){return c},set:function(t){c=t,w.orient(t?"right":"left")}}}),nv.utils.inheritOptions(e,t),nv.utils.initOptions(e),e}),l=n.calculateTargets(t.unit,t.unit,n.unitTaskStatusFactor()),o=n.calculateProgress(t.unit,t.project),i={key:"Learning Achievement",values:[]},a=0,_.each(t.unit.ilos,function(t){var e;return(e={})[0]={offset:0,height:l[t.id][0],color:r.gradeColors.P},e[1]={offset:e[0].offset+e[0].height,height:l[t.id][1],color:r.gradeColors.C},e[2]={offset:e[1].offset+e[1].height,height:l[t.id][2],color:r.gradeColors.D},e[3]={offset:e[2].offset+e[2].height,height:l[t.id][3],color:r.gradeColors.HD},e[3].offset+e[3].height>a&&(a=e[3].offset+e[3].height),i.values.push({label:t.name,value:o[0][t.id],targets:e})}),s=e("achievementBarChart","ILO Achievement Bar Chart",{height:600,duration:500,yDomain:[0,a],showValues:!1,showYAxis:!1,showLegend:!1,x:function(t){return t.label},y:function(t){return t.value},color:function(t){return"#373737"}},{}),t.options=s[0],t.config=s[1],t.data=[i]}}})},"m/Qy":function(t,e){angular.module("doubtfire.groups.group-member-contribution-assigner",[]).directive("groupMemberContributionAssigner",function(){return{restrict:"E",templateUrl:"groups/group-member-contribution-assigner/group-member-contribution-assigner.tpl.html",replace:!0,scope:{task:"=",project:"=",team:"="},controller:function(t,e,n,r,i){var o;return t.selectedGroupSet=t.task.definition.group_set,t.selectedGroup=n.getGroupForTask(t.project,t.task),t.memberSortOrder="student_name",t.numStars=5,t.initialStars=3,t.percentages={danger:0,warning:25,info:50,success:100},t.checkClearRating=function(t){return 1===t.confRating&&1===t.overStar&&0===t.rating?t.rating=t.percent=0:1===t.confRating&&1===t.overStar&&0===t.rating&&(t.rating=1),t.confRating=t.rating},o=function(e,n){return(n/r.groupContributionSum(t.team.members,e,n)*100).toFixed()},t.hoveringOver=function(t,e){return t.overStar=e,t.percent=o(t,e)},t.gradeFor=e.gradeFor,t.selectedGroup&&t.selectedGroupSet?i.query({unit_id:t.project.unit_id,group_set_id:t.selectedGroupSet.id,group_id:t.selectedGroup.id},function(e){return t.team.members=_.map(e,function(e){return e.rating=e.confRating=t.initialStars,e.percent=o(e,e.rating),e}),t.percentages.warning=+(25/e.length).toFixed(),t.percentages.info=+(50/e.length).toFixed(),t.percentages.success=+(95/e.length).toFixed()}):t.team.members=[],t.percentClass=function(e){return e>=t.percentages.success?"label-success":t.percentages.info<=e&&e<t.percentages.success?"label-info":t.percentages.warning<=e&&e<t.percentages.info?"label-warning":t.percentages.danger<=e&&e<t.percentages.warning?"label-danger":void 0}}}})},mHeX:function(t,e){angular.module("doubtfire.api.models.learning-alignments",[]).factory("LearningAlignments",function(t){return t("/units/:unit_id/learning_alignments/:id",{id:"@id",unit_id:"@unit_id"})})},mL5s:function(t,e){angular.module("doubtfire.projects.states.dashboard.directives.progress-dashboard",[]).directive("progressDashboard",function(){return{restrict:"E",templateUrl:"projects/states/dashboard/directives/progress-dashboard/progress-dashboard.tpl.html",scope:{project:"=",onUpdateTargetGrade:"="},controller:function(t,e,n,r,i,o,a){var s;return t.tutor=e.tutor,(s=function(){var e;return e=n.tasksByStatus(t.project,r.acronymKey.COM).length,t.numberOfTasks={completed:e,remaining:n.tasksInTargetGrade(t.project).length-e}})(),t.grades={names:i.grades,values:i.gradeValues},t.updateTargetGrade=function(e){return n.updateProject(t.project.project_id,{target_grade:e},function(n){return t.project.burndown_chart_data=n.burndown_chart_data,t.project.updateTaskStats(n.stats),s(),"function"==typeof t.renderTaskStatusPieChart&&t.renderTaskStatusPieChart(),"function"==typeof t.onUpdateTargetGrade&&t.onUpdateTargetGrade(),o.event("Student Project View - Progress Dashboard","Grade Changed",t.grades.names[e]),a.add("info","Updated target grade successfully",2e3)},function(t){return a.add("danger","Failed to update target grade",4e3)})}}}})},myRX:function(t,e){angular.module("doubtfire.common.services",["doubtfire.common.services.alerts","doubtfire.common.services.grades","doubtfire.common.services.header","doubtfire.common.services.projects","doubtfire.common.services.tasks","doubtfire.common.services.units","doubtfire.common.services.group-service","doubtfire.common.services.outcome-service","doubtfire.common.services.analytics","doubtfire.common.services.dates","doubtfire.common.services.listener","doubtfire.common.services.comments","doubtfire.common.services.recorder-service"])},n8sD:function(t,e){angular.module("doubtfire.sessions.auth.http-auth-injector",[]).config(function(t){return t.interceptors.push(function(t,e,n,r){return{request:function(e){return _.startsWith(e.url,n.API_URL)&&null!=r.authenticationToken&&(_.has(e,"params")||(e.params={}),e.params.auth_token=r.authenticationToken),e||t.when(e)},responseError:function(r){return r.config&&r.config.url&&_.startsWith(r.config.url,n.API_URL)&&(419===r.status?e.$broadcast("tokenTimeout"):401===r.status&&e.$broadcast("unauthorisedRequestIntercepted")),t.reject(r)}}})})},nucG:function(t,e){angular.module("doubtfire.common.grade-icon",[]).directive("gradeIcon",function(){return{restrict:"E",replace:!0,templateUrl:"common/grade-icon/grade-icon.tpl.html",scope:{inputGrade:"=?grade",colorful:"=?"},controller:function(t,e){return t.$watch("inputGrade",function(n){return t.grade=_.isString(t.inputGrade)?e.grades.indexOf(t.inputGrade):t.inputGrade,t.gradeText=function(n){if(null!=t.grade)return e.grades[t.grade]||"Grade"},t.gradeLetter=function(n){return e.gradeAcronyms[t.gradeText(n)]||"G"}})}}})},o7Mz:function(t,e){angular.module("doubtfire.config.vendor-dependencies",["ngCookies","ngCsv","ngSanitize","templates-app","ui.router","ui.router.upgrade","ui.bootstrap","ui.codemirror","angularFileUpload","angular.filter","localization","markdown","nvd3","xeditable","LocalStorageModule","angular-md5","angulartics","angulartics.google.analytics"])},oD68:function(t,e){angular.module("doubtfire.api.models.tutorial",[]).factory("Tutorial",function(t){return t("/tutorials/:id",{id:"@id"})})},oFp8:function(t,e){angular.module("doubtfire.visualisations.summary-task-status-scatter",[]).directive("summaryTaskStatusScatter",function(){return{replace:!0,restrict:"E",templateUrl:"visualisations/visualisation.tpl.html",scope:{data:"=",unit:"="},controller:function(t,e,n){var r;return r=n("scatterChart","Task Status Summary Scatter Chart",{xAxis:{axisLabel:"Statuses",tickFormat:function(t){var n;return n=Math.floor(t),e.statusAcronym[e.statusKeys[n]]}},yAxis:{axisLabel:"Task",tickFormat:function(e){return t.unit.task_definitions[e]?t.unit.task_definitions[e].abbreviation:""}},showDistX:!0,showDistY:!0},{}),t.options=r[0],t.config=r[1],r}}})},oY7l:function(t,e){angular.module("doubtfire.errors.states.not-found",[]).config(function(t){return t.state("not_found",{url:"/not_found",views:{main:{controller:"NotFoundCtrl",templateUrl:"errors/states/not-found/not-found.tpl.html"}},data:{pageTitle:"_Not Found_"}})}).controller("NotFoundCtrl",function(t){})},ocCN:function(t,e){angular.module("doubtfire.units.states.analytics.directives.unit-target-grade-stats",[]).directive("unitTargetGradeStats",function(){return{replace:!0,restrict:"E",templateUrl:"units/states/analytics/directives/unit-target-grade-stats/unit-target-grade-stats.tpl.html",scope:{unit:"="},controller:function(t,e,n,r){return t.overviewSelectors={tutorial:{text:"Overview of tutorials",abbreviation:"ZZZ",id:-1}},t.tutorialsForSelector=[],_.each(t.unit.tutorials,function(e){return t.tutorialsForSelector.push({text:e.abbreviation+" - "+e.tutor_name,id:e.id,meeting_time:e.meeting_time,tutor_name:e.tutor_name,abbreviation:e.abbreviation})}),t.tutorialsForSelector.push(t.overviewSelectors.tutorial),t.switchToTutorial=function(e){return t.dataModel.selectedType="tutorial",t.dataModel.selectedTask=null,t.dataModel.selectedTutorial=e,t.depth=0},t.dataModel={},null==t.unit.analytics.targetGradeStats?n.targetGradeStats.query({id:t.unit.id},function(e){return delete e.$promise,delete e.$resolved,t.unit.analytics.targetGradeStats=e,t.dataModel.selectedType="unit"}):t.dataModel.selectedType="unit",t.$watch("dataModel.selectedType",function(e){if(t.dataModel.selectedTutorial=null,t.dataModel.selectedTask=null,t.depth=0,null!=e)switch(e){case"unit":return t.data=t.reduceDataToOverall();case"tutorial":return t.dataModel.selectedTutorial=t.overviewSelectors.tutorial}}),t.$watch("dataModel.selectedTutorial",function(n){if(null!=n)return n.id>=0?(t.depth=0,t.data=t.reduceDataToTutorialWithId(n)):(t.depth=1,t.data=t.reduceDataToTutorial(),t.overviewKeys=_.map(t.unit.tutorials,function(n){return{subtitle:n.tutor_name+" at "+e("date")(n.meeting_time,"shortTime"),title:n.abbreviation,data:t.data[n.id],show:_.keys(t.data[n.id]).length>0,tutorial:n}}))}),t.resetToOverview=function(){switch(t.dataModel.selectedType){case"unit":return;case"tutorial":t.dataModel.selectedTutorial=t.overviewSelectors.tutorial}return drillDown()},t.drillDown=function(){switch(t.dataModel.selectedType){case"unit":return t.dataModel.selectedType="tutorial";case"tutorial":return t.resetToOverview()}},t.reduceDataToOverall=function(){return _.chain(t.unit.analytics.targetGradeStats).groupBy("grade").map(function(t,e){return[e,_.chain(t).map(function(t){return t.num}).reduce(function(t,e){return e+t},0).value()]}).fromPairs().value()},t.reduceDataToTutorial=function(){return _.chain(t.unit.analytics.targetGradeStats).groupBy("tutorial_id").map(function(t,e){return[e,_.chain(t).map(function(t){return[t.grade,t.num]}).fromPairs().value()]}).fromPairs().value()},t.reduceDataToTutorialWithId=function(e){return t.reduceDataToTutorial()[e.id]}}}})},pNnN:function(t,e){angular.module("doubtfire.teaching-periods.states.edit.directives",["doubtfire.teaching-periods.states.edit.directives.teaching-period-details-editor","doubtfire.teaching-periods.states.edit.directives.teaching-period-breaks","doubtfire.teaching-periods.states.edit.directives.teaching-period-units"])},pckz:function(t,e){angular.module("doubtfire.common.user-icon",[]).directive("userIcon",function(){return{restrict:"E",replace:!0,scope:{user:"=?",size:"=?",email:"=?"},templateUrl:"common/user-icon/user-icon.tpl.html",controller:function(t,e,n,r){return null==t.user&&(t.user=n.profile),null==t.size&&(t.size=100),null==t.email&&(t.email=t.user.email),t.userBackgroundStyle=function(e){return"background-image: url('https://www.gravatar.com/avatar/"+r.createHash(e?e.trim().toLowerCase():"")+".png?default=blank&size="+t.size+"')"},t.initials=(i=t.user&&t.user.name?t.user.name.split(" "):"  ").length>1?(""+i[0][0]+i[1][0]).toUpperCase():"  ";var i}}})},pojS:function(t,e){angular.module("doubtfire.units.states.edit.directives",["doubtfire.units.states.edit.directives.unit-details-editor","doubtfire.units.states.edit.directives.unit-group-set-editor","doubtfire.units.states.edit.directives.unit-ilo-editor","doubtfire.units.states.edit.directives.unit-staff-editor","doubtfire.units.states.edit.directives.unit-students-editor","doubtfire.units.states.edit.directives.unit-tasks-editor","doubtfire.units.states.edit.directives.unit-tutorials-editor"])},"q7L+":function(t,e){angular.module("doubtfire.units.states.rollover.directives",["doubtfire.units.states.rollover.directives.unit-dates-selector"])},qHRh:function(t,e){angular.module("doubtfire.visualisations.task-status-pie-chart",[]).directive("taskStatusPieChart",function(){return{restrict:"E",templateUrl:"visualisations/visualisation.tpl.html",scope:{rawData:"=data",showLegend:"=?",height:"=?"},controller:function(t,e,n,r,i){var o,a,s,l;return o=n.statusColors,(s=function(r){return t.total=_.chain(r).values().reduce(function(t,e){return t+e},0).value(),t.data=_.map(r,function(t,e){return{key:n.statusLabels[e],y:t,status_key:e}}),e(function(){var e;if(null!=(null!=(e=t.api)?e.refresh:void 0))return t.api.refresh()})})(t.rawData),t.$watch("rawData",s),a=i("pieChart","Task Status Summary Pie Chart",{color:function(t,e){return o[t.status_key]},x:function(t){return t.key},y:function(t){return t.y},showLabels:!1,margin:l={top:0,right:0,bottom:0,left:0},height:t.height,legend:{padding:64,margin:l},showLegend:t.showLegend,tooltip:{valueFormatter:function(e){return Math.round(e/t.total*100)+"%"},keyFormatter:function(t){return t}}},{}),t.options=a[0],t.config=a[1],a}}})},"qJ/I":function(t,e){angular.module("doubtfire.groups.tutor-group-manager",[]).directive("tutorGroupManager",function(){return{restrict:"E",templateUrl:"groups/tutor-group-manager/tutor-group-manager.tpl.html",controller:function(t){}}})},qNE9:function(t,e){angular.module("doubtfire.config.local-storage",[]).config(function(t){return t.setPrefix("doubtfire")})},qR0b:function(t,e){angular.module("doubtfire.projects.states.all.directives",["doubtfire.projects.states.all.directives.all-projects-list"])},qUxc:function(t,e){angular.module("doubtfire.common.content-editable",[]).directive("contenteditable",function(){return{restrict:"A",require:"ngModel",link:function(t,e,n,r){var i;i=function(){r.$setViewValue(e[0].innerText)},r.$render=function(){e.html(r.$viewValue||"")},e.bind("blur keyup change",function(){t.$apply(i)})}}})},qayQ:function(t,e){angular.module("doubtfire.units.states.edit.directives.unit-tasks-editor",[]).directive("unitTasksEditor",function(){return{replace:!0,restrict:"E",templateUrl:"units/states/edit/directives/unit-tasks-editor/unit-tasks-editor.tpl.html",controller:function(t,e,n,r,i,o,a,s,l,u,c){var d;return t.grades=i.grades,t.taskAdminPager={currentPage:1,maxSize:5,pageSize:5,search:"",sortOrder:"seq",reverse:!1},t.taskAdminData={selectedTask:null,isNew:!1},t.editTask=function(e){return t.taskAdminData.selectedTask=e,t.taskAdminData.isNew=!1},d=function(){var e,n,r;return 0===(r=t.unit).task_definitions.length?"1.1P":null!=(n=/(.*)(\d+)(\D*)/.exec(e=r.task_definitions[r.task_definitions.length-1].abbreviation))?""+n[1]+(parseInt(n[2])+1)+n[3]:e+"1"},t.deleteTask=function(e){return a.deleteTask(e,t.unit,null)},t.createTask=function(){var e,n;return n={name:"Task "+(e=d()),abbreviation:e,description:"New Description",start_date:new Date,target_date:new Date,upload_requirements:[],plagiarism_checks:[],weight:4,target_grade:0,restrict_status_updates:!1,plagiarism_warn_pct:80,is_graded:!1,max_quality_pts:0},t.taskAdminData.selectedTask=n,t.taskAdminData.isNew=!0},t.$watch("unit.task_definitions.length",function(e,n){if(e!==n)return t.unit.task_definitions.length>0?t.editTask(e<n?_.first(t.unit.task_definitions):_.last(t.unit.task_definitions)):t.taskAdminData.selectedTask=null}),t.taskFiles={file:{name:"Task PDFs",type:"zip"}},t.taskUploadUrl=r.taskUploadUrl(t.unit),t.onTaskPDFSuccess=function(e){if(l.show("Task File Import Results",e),e.success.length>0)return t.unit.refresh()},t.batchFiles={file:{name:"CSV Data",type:"csv"}},t.batchTaskUrl=function(){return n.getTaskDefinitionBatchUploadUrl(t.unit)},t.allResourceUrl=function(){return r.allResourcesDownloadUrl(t.unit)},t.onBatchTaskSuccess=function(e){if(l.show("Task CSV Upload Results",e),e.success.length>0)return t.unit.refresh()},t.groupSetName=function(e){return s.groupSetName(e,t.unit)}}}})},rB0A:function(t,e){angular.module("doubtfire.api.models.convenor",[]).factory("Convenor",function(t){return t("/users/convenors")})},rfju:function(t,e){angular.module("doubtfire.sessions.cookies",[]).constant("usernameCookie","doubtfire_user").constant("rememberDoubtfireCredentialsCookie","remember_doubtfire_credentials_token").constant("doubtfireLoginTimeCookie","doubtfire_login_time")},rgoI:function(t,e){angular.module("doubtfire.config.privacy-policy",[]).factory("PrivacyPolicy",function(t,e){var n;return n={privacy:"",plagiarism:"",loaded:!1},t.get(e.API_URL+"/settings/privacy").then(function(t){return n.privacy=t.data.privacy,n.plagiarism=t.data.plagiarism,n.loaded=!0}),n})},rr7S:function(t,e,n){"use strict";angular.module("markdown",[]).provider("markdown",[function(){var t={};return{config:function(e){t=e},$get:function(){return new window.showdown.Converter(t)}}}]).filter("markdown",["markdown",function(t){return function(e){return t.makeHtml(e||"")}}])},s10c:function(t,e){},tLt2:function(t,e){angular.module("doubtfire.projects.states.portfolio.directives.portfolio-add-extra-files-step",[]).directive("portfolioAddExtraFilesStep",function(){return{restrict:"E",replace:!0,templateUrl:"projects/states/portfolio/directives/portfolio-add-extra-files-step/portfolio-add-extra-files-step.tpl.html",controller:function(t,e){return t.uploadType="document",t.$watch("uploadType",function(e){if(null!=e)return t.uploadFileData=t.portfolioSubmission.otherFileFileUploadData(e)})}}})},tnxp:function(t,e){angular.module("doubtfire.config.runtime",[]).run(function(t,e,n,r,i,o,a){var s,l,u,c;return o.theme="bs3",a.bs3.inputClass="input-sm",a.bs3.buttonsClass="btn-sm",c=function(t,e){var n,r,i,o;for(r in i=[],t)n=e?e+"["+r+"]":r,i.push("object"==typeof(o=t[r])?c(o,n):encodeURIComponent(n)+"="+encodeURIComponent(o));return i.join("&")},u=function(t,n){return i.isAuthenticated()?e.go("unauthorised"):"sign_in"!==e.current.name?e.go("sign_in",{dest:t.name,params:c(n)}):void 0},s=function(){if("timeout"!==e.current.name)return e.go("timeout",{dest:e.current.name,params:c(e.params)})},l=function(){return u(e.current,e.params)},t.$on("$stateChangeStart",function(t,e,n){if(!i.isAuthorised(e.data.roleWhitelist))return t.preventDefault(),u(e,n)}),t.$on("unauthorisedRequestIntercepted",l),t.$on("tokenTimeout",s)})},uH0l:function(t,e){angular.module("doubtfire.admin.modals.user-settings-modal",[]).factory("UserSettingsModal",function(t){var e;return(e={}).show=function(e){return t.open({templateUrl:"admin/modals/user-settings-modal/user-settings-modal.tpl.html",controller:"UserSettingsModalCtrl",resolve:{user:function(){return e}}})},e}).controller("UserSettingsModalCtrl",function(t,e,n,r,i,o,a,s,l){var u,c;return t.user=s||new a({}),t.isNew=void 0===(null!=s?s.id:void 0),t.externalName=n.ExternalName,t.isNew&&(t.users=a.query()),t.currentUser=o,t.modalState={},u=function(){return a.create({user:t.user}).$promise.then(function(n){if(e.close(n),t.users)return t.users.push(n)},function(t){if(null!=t.data.error)return r.add("danger","Error: "+t.data.error,6e3)})},c=function(){return a.update({id:t.user.id,user:t.user}).$promise.then(function(n){if(e.close(n),s.name=s.first_name+" "+s.last_name,s===o.profile&&(l.saveCurrentUser(),t.user.opt_in_to_research))return i.event("Doubtfire Analytics","User opted in research")},function(t){if(null!=t.data.error)return r.add("danger","Error: "+t.data.error,6e3)})},t.saveUser=function(){return t.isNew?u():c()}})},uKhs:function(t,e){angular.module("doubtfire.api.models.task-comment",[]).factory("TaskComment",function(t){return t("/projects/:project_id/task_def_id/:task_definition_id/comments/:id",{id:"@id",project_id:"@project_id",task_definition_id:"@task_definition_id"},{create_media:{method:"POST",headers:{"Content-Type":void 0}}})})},uPfk:function(t,e){angular.module("doubtfire.tasks.task-definition-editor",[]).directive("taskDefinitionEditor",function(){return{replace:!0,restrict:"E",templateUrl:"tasks/task-definition-editor/task-definition-editor.tpl.html",scope:{unit:"=",task:"=",isNew:"="},controller:function(t,e,n,r,i,o,a,s,l,u){var c;return t.grades=i.grades,t.targetPicker={open:!1},t.duePicker={open:!1},t.startPicker={open:!1},t.externalName=n.ExternalName,t.taskAdmin={tabsData:{taskSheet:{title:"Task Description",subtitle:"Provide the descriptive details for this task",icon:"fa-info",seq:0,active:!1},fileUpload:{title:"Submission Details",subtitle:"Indicate what files students need to submit for this task",icon:"fa-upload",seq:1,active:!1},taskResources:{title:"Task Resources",subtitle:"Upload the task sheet and other resources for this task",icon:"fa-file-o",seq:2,active:!1},plagiarismChecks:{title:"Plagiarism Detection",subtitle:"Add plagiarism checks for this task",icon:"fa-eye",seq:4,active:!1}}},t.taskSheet={file:{name:"Task Sheet",type:"document"}},t.taskSheetUploadUrl=function(){return s.taskSheetUploadUrl(t.unit,t.task)},t.onTaskSheetSuccess=function(e){return a.add("success","Task sheet uploaded",2e3),t.task.has_task_sheet=!0},t.taskPDFUrl=function(){return l.getTaskPDFUrl(t.unit,t.task)+"&as_attachment=true"},t.removeTaskSheet=function(e){return o.taskSheet.delete({unit_id:t.unit.id,task_def_id:e.id},function(t){return e.has_task_sheet=!1,a.add("success","Deleted task sheet",2e3)},function(t){var e;return a.add("danger","Delete failed, "+(null!=(e=t.data)?e.message:void 0),6e3)})},t.removeTaskResources=function(e){return o.taskResources.delete({unit_id:t.unit.id,task_def_id:e.id},function(t){return e.has_task_resources=!1,a.add("success","Deleted task resources",2e3)},function(t){var e;return a.add("danger","Delete failed, "+(null!=(e=t.data)?e.message:void 0),6e3)})},t.taskResources={file:{name:"Task Resources",type:"zip"}},t.taskResourcesUploadUrl=function(){return s.taskResourcesUploadUrl(t.unit,t.task)},t.onTaskResourcesSuccess=function(e){return a.add("success","Task sheet uploaded",2e3),t.task.has_task_resources=!0},t.resourceUrl=function(){return l.getTaskResourcesUrl(t.unit,t.task)},t.setActiveTab=function(e){if(e!==t.activeTab)return null!=t.activeTab&&(t.activeTab.active=!1),t.activeTab=e,t.activeTab.active=!0},t.isActiveTab=function(e){return e===t.activeTab},t.setActiveTab(t.taskAdmin.tabsData.taskSheet),t.open=function(e,n){return e.preventDefault(),e.stopPropagation(),n.open||(t.targetPicker.open=!1,t.duePicker.open=!1,t.startPicker.open=!1),n.open=!n.open},t.addUpReq=function(){return t.task.upload_requirements.push({key:"file"+(t.task.upload_requirements.length+1-1),name:"",type:"code",language:"Pascal"})},t.removeUpReq=function(e){return t.task.upload_requirements=t.task.upload_requirements.filter(function(t){return t.key!==e.key})},t.addCheck=function(){return t.task.plagiarism_checks.push({key:"check"+(t.task.plagiarism_checks.length+1-1),pattern:"",type:""})},t.removeCheck=function(e){return t.task.plagiarism_checks=t.task.plagiarism_checks.filter(function(t){return t.key!==e.key})},t.allowedQualityPoints=[0,1,2,3,4,5,6,7,8,9,10],c=function(t,e){if(_.extend(t,e),e.weighting)return t.weight=e.weighting},t.deleteTask=function(){return r.deleteTask(t.task,t.unit,null)},t.saveTask=function(){var e,n,r,i;return r={},_.extend(r,t.task),r.weighting=t.task.weight,r.unit_id=t.unit.id,r.upload_requirements=JSON.stringify(t.task.upload_requirements),r.plagiarism_checks=JSON.stringify(t.task.plagiarism_checks),r.group_set_id=r.group_set?r.group_set.id:-1,Date.parse(r.start_date)>Date.parse(r.target_date)||Date.parse(r.target_date)>Date.parse(r.due_date)?a.add("danger","Invalid task dates, unit not saved. Ensure start date is before due date, and due date is before deadline.",5e3):(r.target_date&&r.target_date.getMonth&&(r.target_date=(i=r.target_date).getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()),r.start_date&&r.start_date.getMonth&&(r.start_date=(i=r.start_date).getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()),r.due_date&&r.due_date.getMonth&&(r.due_date=(e=r.due_date).getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()),t.isNew?(n=o.create({task_def:r}).$promise,u.show("Task Definition Creation","Please wait while student projects are updated.",n),n.then(function(e){return t.unit.task_definitions.push(e),a.add("success",e.name+" Added",2e3)},function(t){if(null!=t.data.error)return a.add("danger","Error: "+t.data.error,6e3)})):o.update({id:r.id,task_def:r}).$promise.then(function(e){return c(t.task,e),a.add("success",e.name+" Updated",2e3)},function(t){if(null!=t.data.error)return a.add("danger","Error: "+t.data.error,6e3)}))}}}})},uVLc:function(t,e){!function(t,e,n){"use strict";var r=e.isDefined,i=e.isUndefined,o=e.isFunction,a=e.isString,s=e.isNumber,l=e.isObject,u=e.isArray,c=e.forEach,d=e.extend,p=e.copy,f=e.equals;function h(t){return u(t)?t:Object.keys(t).map(function(e){return t[e]})}function m(t){return null===t}function g(t,e){return-1==Object.keys(t).map(function(r){return e[r]!==n&&e[r]==t[r]}).indexOf(!1)}function v(t,e){function n(t,e,n){for(var r=0;e+r<=t.length;){if(t.charAt(e+r)==n)return r;r++}return-1}for(var r=0,i=0;i<=e.length;i++){var o=n(t,r,e.charAt(i));if(-1==o)return!1;r+=o+1}return!0}function b(t,e,n){var i=0;return t.filter(function(t){var o=r(n)?i<e&&n(t):i<e;return i=o?i+1:i,o})}function y(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function w(t){return t&&t.$evalAsync&&t.$watch}function k(){return function(t,e){return t>e}}function _(){return function(t,e){return t>=e}}function x(){return function(t,e){return t<e}}function S(){return function(t,e){return t<=e}}function $(){return function(t,e){return t==e}}function T(){return function(t,e){return t!=e}}function C(){return function(t,e){return t===e}}function E(){return function(t,e){return t!==e}}function A(t){return function(e,n){return e=l(e)?h(e):e,!(!u(e)||i(n))&&e.some(function(e){return a(n)&&l(e)||o(n)?t(n)(e):e===n})}}function D(t){return function(e,n){if(e=l(e)?h(e):e,!u(e))return e;var r=[],o=t(n);return i(n)?e.filter(function(t,e,n){return n.indexOf(t)===e}):e.filter(function(t){var e,n,a=o(t);return e=r,!(!i(n=a)&&e.some(function(t){return f(t,n)})||(r.push(a),0))})}}function P(){return function(t){return a(t)?t.split(" ").map(function(t){return t.charAt(0).toUpperCase()+t.substring(1)}).join(" "):t}}String.prototype.contains||(String.prototype.contains=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),e.module("a8m.angular",[]).filter("isUndefined",function(){return function(t){return e.isUndefined(t)}}).filter("isDefined",function(){return function(t){return e.isDefined(t)}}).filter("isFunction",function(){return function(t){return e.isFunction(t)}}).filter("isString",function(){return function(t){return e.isString(t)}}).filter("isNumber",function(){return function(t){return e.isNumber(t)}}).filter("isArray",function(){return function(t){return e.isArray(t)}}).filter("isObject",function(){return function(t){return e.isObject(t)}}).filter("isEqual",function(){return function(t,n){return e.equals(t,n)}}),e.module("a8m.conditions",[]).filter({isGreaterThan:k,">":k,isGreaterThanOrEqualTo:_,">=":_,isLessThan:x,"<":x,isLessThanOrEqualTo:S,"<=":S,isEqualTo:$,"==":$,isNotEqualTo:T,"!=":T,isIdenticalTo:C,"===":C,isNotIdenticalTo:E,"!==":E}),e.module("a8m.is-null",[]).filter("isNull",function(){return function(t){return m(t)}}),e.module("a8m.after-where",[]).filter("afterWhere",function(){return function(t,e){if(t=l(t)?h(t):t,!u(t)||i(e))return t;var n=t.map(function(t){return g(e,t)}).indexOf(!0);return t.slice(-1===n?0:n)}}),e.module("a8m.after",[]).filter("after",function(){return function(t,e){return t=l(t)?h(t):t,u(t)?t.slice(e):t}}),e.module("a8m.before-where",[]).filter("beforeWhere",function(){return function(t,e){if(t=l(t)?h(t):t,!u(t)||i(e))return t;var n=t.map(function(t){return g(e,t)}).indexOf(!0);return t.slice(0,-1===n?t.length:++n)}}),e.module("a8m.before",[]).filter("before",function(){return function(t,e){return t=l(t)?h(t):t,u(t)?t.slice(0,e?--e:e):t}}),e.module("a8m.chunk-by",["a8m.filter-watcher"]).filter("chunkBy",["filterWatcher",function(t){return function(e,n,r){return t.isMemoized("chunkBy",arguments)||t.memoize("chunkBy",arguments,this,function(t,e,n){return u(t)?t.map(function(t,r,o){return t=o.slice(r*=e,r+e),!i(n)&&t.length<e?t.concat(function(t,e){for(var n=[];t--;)n[t]=e;return n}(e-t.length,n)):t}).slice(0,Math.ceil(t.length/e)):t}(e,n,r))}}]),e.module("a8m.concat",[]).filter("concat",[function(){return function(t,e){if(i(e))return t;if(u(t))return l(e)?t.concat(h(e)):t.concat(e);if(l(t)){var n=h(t);return l(e)?n.concat(h(e)):n.concat(e)}return t}}]),e.module("a8m.contains",[]).filter({contains:["$parse",A],some:["$parse",A]}),e.module("a8m.count-by",[]).filter("countBy",["$parse",function(t){return function(e,n){var r,o={},a=t(n);return e=l(e)?h(e):e,!u(e)||i(n)?e:(e.forEach(function(t){r=a(t),o[r]||(o[r]=0),o[r]++}),o)}}]),e.module("a8m.defaults",[]).filter("defaults",["$parse",function(t){return function(e,n){if(e=l(e)?h(e):e,!u(e)||!l(n))return e;var r=function t(e,n,r){return n=n||[],Object.keys(e).forEach(function(i){l(e[i])&&!u(e[i])?t(e[i],n,(r?r+"."+i:r)||i):n.push(r?r+"."+i:i)}),n}(n);return e.forEach(function(e){r.forEach(function(r){var o=t(r),a=o.assign;i(o(e))&&a(e,o(n))})}),e}}]),e.module("a8m.every",[]).filter("every",["$parse",function(t){return function(e,n){return e=l(e)?h(e):e,!(u(e)&&!i(n))||e.every(function(e){return l(e)||o(n)?t(n)(e):e===n})}}]),e.module("a8m.filter-by",[]).filter("filterBy",["$parse",function(t){return function(e,r,o,c){var d;return o=a(o)||s(o)?String(o).toLowerCase():n,e=l(e)?h(e):e,!u(e)||i(o)?e:e.filter(function(e){return r.some(function(n){if(~n.indexOf("+")){var r=n.replace(/\s+/g,"").split("+");d=r.map(function(n){return t(n)(e)}).join(" ")}else d=t(n)(e);return!(!a(d)&&!s(d))&&(d=String(d).toLowerCase(),c?d===o:d.contains(o))})})}}]),e.module("a8m.first",[]).filter("first",["$parse",function(t){return function(e){var r,i,o;return e=l(e)?h(e):e,u(e)?(o=Array.prototype.slice.call(arguments,1),r=s(o[0])?o[0]:1,i=s(o[0])?s(o[1])?n:o[1]:o[0],o.length?b(e,r,i?t(i):i):e[0]):e}}]),e.module("a8m.flatten",[]).filter("flatten",function(){return function(t,e){return e=e||!1,t=l(t)?h(t):t,u(t)?e?[].concat.apply([],t):function t(e,n){return(n=n||0)>=e.length?e:u(e[n])?t(e.slice(0,n).concat(e[n],e.slice(n+1)),n):t(e,n+1)}(t,0):t}}),e.module("a8m.fuzzy-by",[]).filter("fuzzyBy",["$parse",function(t){return function(e,n,r,o){var s,c,d=o||!1;return e=l(e)?h(e):e,!u(e)||i(n)||i(r)?e:(c=t(n),e.filter(function(t){return s=c(t),!!a(s)&&(s=d?s:s.toLowerCase(),r=d?r:r.toLowerCase(),!1!==v(s,r))}))}}]),e.module("a8m.fuzzy",[]).filter("fuzzy",function(){return function(t,e,n){var r=n||!1;return t=l(t)?h(t):t,!u(t)||i(e)?t:(e=r?e:e.toLowerCase(),t.filter(function(t){return a(t)?!1!==v(t=r?t:t.toLowerCase(),e):!!l(t)&&function(t,e){var n,i;return 0<Object.keys(t).filter(function(o){return n=t[o],!!i||!!a(n)&&(n=r?n:n.toLowerCase(),i=!1!==v(n,e))}).length}(t,e)}))}}),e.module("a8m.group-by",["a8m.filter-watcher"]).filter("groupBy",["$parse","filterWatcher",function(t,e){return function(n,r){return!l(n)||i(r)?n:e.isMemoized("groupBy",arguments)||e.memoize("groupBy",arguments,this,function(t,e){var n,r={};return c(t,function(t){n=e(t),r[n]||(r[n]=[]),r[n].push(t)}),r}(n,t(r)))}}]),e.module("a8m.is-empty",[]).filter("isEmpty",function(){return function(t){return l(t)?!h(t).length:!t.length}}),e.module("a8m.join",[]).filter("join",function(){return function(t,e){return i(t)||!u(t)?t:(i(e)&&(e=" "),t.join(e))}}),e.module("a8m.last",[]).filter("last",["$parse",function(t){return function(e){var r,i,o,a=p(e);return a=l(a)?h(a):a,u(a)?(o=Array.prototype.slice.call(arguments,1),r=s(o[0])?o[0]:1,i=s(o[0])?s(o[1])?n:o[1]:o[0],o.length?b(a.reverse(),r,i?t(i):i).reverse():a[a.length-1]):a}}]),e.module("a8m.map",[]).filter("map",["$parse",function(t){return function(e,n){return e=l(e)?h(e):e,!u(e)||i(n)?e:e.map(function(e){return t(n)(e)})}}]),e.module("a8m.omit",[]).filter("omit",["$parse",function(t){return function(e,n){return e=l(e)?h(e):e,!u(e)||i(n)?e:e.filter(function(e){return!t(n)(e)})}}]),e.module("a8m.pick",[]).filter("pick",["$parse",function(t){return function(e,n){return e=l(e)?h(e):e,!u(e)||i(n)?e:e.filter(function(e){return t(n)(e)})}}]),e.module("a8m.range",[]).filter("range",function(){return function(t,e,n,r,i){n=n||0,r=r||1;for(var a=0;a<parseInt(e);a++){var s=n+a*r;t.push(o(i)?i(s):s)}return t}}),e.module("a8m.remove-with",[]).filter("removeWith",function(){return function(t,e){return i(e)?t:(t=l(t)?h(t):t).filter(function(t){return!g(e,t)})}}),e.module("a8m.remove",[]).filter("remove",function(){return function(t){t=l(t)?h(t):t;var e=Array.prototype.slice.call(arguments,1);return u(t)?t.filter(function(t){return!e.some(function(e){return f(e,t)})}):t}}),e.module("a8m.reverse",[]).filter("reverse",[function(){return function(t){return t=l(t)?h(t):t,a(t)?t.split("").reverse().join(""):u(t)?t.slice().reverse():t}}]),e.module("a8m.search-field",[]).filter("searchField",["$parse",function(t){return function(e){var n;e=l(e)?h(e):e;var r=Array.prototype.slice.call(arguments,1);return u(e)&&r.length?e.map(function(e){return n=r.map(function(n){return t(n)(e)}).join(" "),d(e,{searchField:n})}):e}}]),e.module("a8m.to-array",[]).filter("toArray",function(){return function(t,e){return l(t)?e?Object.keys(t).map(function(e){return d(t[e],{$key:e})}):h(t):t}}),e.module("a8m.unique",[]).filter({unique:["$parse",D],uniq:["$parse",D]}),e.module("a8m.where",[]).filter("where",function(){return function(t,e){return i(e)?t:(t=l(t)?h(t):t).filter(function(t){return g(e,t)})}}),e.module("a8m.xor",[]).filter("xor",["$parse",function(t){return function(e,n,r){return r=r||!1,e=l(e)?h(e):e,n=l(n)?h(n):n,u(e)&&u(n)?e.concat(n).filter(function(t){return!(i(t,e)&&i(t,n))}):e;function i(e,n){var i=t(r);return n.some(function(t){return r?f(i(t),i(e)):f(t,e)})}}}]),e.module("a8m.math.abs",[]).filter("abs",function(){return function(t){return Math.abs(t)}}),e.module("a8m.math.byteFmt",[]).filter("byteFmt",function(){var t=[{str:"B",val:1024}];return["KB","MB","GB","TB","PB","EB","ZB","YB"].forEach(function(e,n){t.push({str:e,val:1024*t[n].val})}),function(e,n){if(s(n)&&isFinite(n)&&n%1==0&&n>=0&&s(e)&&isFinite(e)){for(var r=0;r<t.length-1&&e>=t[r].val;)r++;return y(e/=r>0?t[r-1].val:1,n)+" "+t[r].str}return"NaN"}}),e.module("a8m.math.degrees",[]).filter("degrees",function(){return function(t,e){if(s(e)&&isFinite(e)&&e%1==0&&e>=0&&s(t)&&isFinite(t)){var n=180*t/Math.PI;return Math.round(n*Math.pow(10,e))/Math.pow(10,e)}return"NaN"}}),e.module("a8m.math.kbFmt",[]).filter("kbFmt",function(){var t=[{str:"KB",val:1024}];return["MB","GB","TB","PB","EB","ZB","YB"].forEach(function(e,n){t.push({str:e,val:1024*t[n].val})}),function(e,n){if(s(n)&&isFinite(n)&&n%1==0&&n>=0&&s(e)&&isFinite(e)){for(var r=0;r<t.length-1&&e>=t[r].val;)r++;return y(e/=r>0?t[r-1].val:1,n)+" "+t[r].str}return"NaN"}}),e.module("a8m.math.max",[]).filter("max",["$parse",function(t){return function(e,n){return u(e)?i(n)?Math.max.apply(Math,e):e[(r=e,o=n,a=r.map(function(e){return t(o)(e)}),a.indexOf(Math.max.apply(Math,a)))]:e;var r,o,a}}]),e.module("a8m.math.min",[]).filter("min",["$parse",function(t){return function(e,n){return u(e)?i(n)?Math.min.apply(Math,e):e[(r=e,o=n,a=r.map(function(e){return t(o)(e)}),a.indexOf(Math.min.apply(Math,a)))]:e;var r,o,a}}]),e.module("a8m.math.percent",[]).filter("percent",function(){return function(t,e,n){var r=a(t)?Number(t):t;return e=e||100,n=n||!1,!s(r)||isNaN(r)?t:n?Math.round(r/e*100):r/e*100}}),e.module("a8m.math.radians",[]).filter("radians",function(){return function(t,e){return s(e)&&isFinite(e)&&e%1==0&&e>=0&&s(t)&&isFinite(t)?Math.round(3.14159265359*t/180*Math.pow(10,e))/Math.pow(10,e):"NaN"}}),e.module("a8m.math.radix",[]).filter("radix",function(){return function(t,e){return s(t)&&/^[2-9]$|^[1-2]\d$|^3[0-6]$/.test(e)?t.toString(e).toUpperCase():t}}),e.module("a8m.math.shortFmt",[]).filter("shortFmt",function(){return function(t,e){return s(e)&&isFinite(e)&&e%1==0&&e>=0&&s(t)&&isFinite(t)?t<1e3?""+t:t<1e6?y(t/1e3,e)+" K":t<1e9?y(t/1e6,e)+" M":y(t/1e9,e)+" B":"NaN"}}),e.module("a8m.math.sum",[]).filter("sum",function(){return function(t,e){return u(t)?t.reduce(function(t,e){return t+e},e||0):t}}),e.module("a8m.ends-with",[]).filter("endsWith",function(){return function(t,e,n){var r,o=n||!1;return!a(t)||i(e)?t:(r=(t=o?t:t.toLowerCase()).length-e.length,-1!==t.indexOf(o?e:e.toLowerCase(),r))}}),e.module("a8m.latinize",[]).filter("latinize",[function(){for(var t=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"OE",letters:"\x8c\u0152"},{base:"oe",letters:"\x9c\u0153"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],e={},n=0;n<t.length;n++)for(var r=t[n].letters.split(""),i=0;i<r.length;i++)e[r[i]]=t[n].base;return function(t){return a(t)?t.replace(/[^\u0000-\u007E]/g,function(t){return e[t]||t}):t}}]),e.module("a8m.ltrim",[]).filter("ltrim",function(){return function(t,e){var n=e||"\\s";return a(t)?t.replace(new RegExp("^"+n+"+"),""):t}}),e.module("a8m.match",[]).filter("match",function(){return function(t,e,n){var r=new RegExp(e,n);return a(t)?t.match(r):null}}),e.module("a8m.phoneUS",[]).filter("phoneUS",function(){return function(t){return"("+(t+="").slice(0,3)+") "+t.slice(3,6)+"-"+t.slice(6)}}),e.module("a8m.repeat",[]).filter("repeat",[function(){return function(t,e,n){var r=~~e;return a(t)&&r?function t(e,n,r){return n?e+r+t(e,--n,r):e}(t,--e,n||""):t}}]),e.module("a8m.rtrim",[]).filter("rtrim",function(){return function(t,e){var n=e||"\\s";return a(t)?t.replace(new RegExp(n+"+$"),""):t}}),e.module("a8m.slugify",[]).filter("slugify",[function(){return function(t,e){var n=i(e)?"-":e;return a(t)?t.toLowerCase().replace(/\s+/g,n):t}}]),e.module("a8m.split",[]).filter("split",function(){return function(t,e,n){var r,o,s,l;return i(t)||!a(t)?null:(i(e)&&(e=""),isNaN(n)&&(n=0),r=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"g"),m(o=t.match(r))||n>=o.length?[t]:0===n?t.split(e):(l=(s=t.split(e)).splice(0,n+1),s.unshift(l.join(e)),s))}}),e.module("a8m.starts-with",[]).filter("startsWith",function(){return function(t,e,n){var r=n||!1;return!a(t)||i(e)?t:!(t=r?t:t.toLowerCase()).indexOf(r?e:e.toLowerCase())}}),e.module("a8m.stringular",[]).filter("stringular",function(){return function(t){var e=Array.prototype.slice.call(arguments,1);return t.replace(/{(\d+)}/g,function(t,n){return i(e[n])?t:e[n]})}}),e.module("a8m.strip-tags",[]).filter("stripTags",function(){return function(t){return a(t)?t.replace(/<\S[^><]*>/g,""):t}}),e.module("a8m.test",[]).filter("test",function(){return function(t,e,n){var r=new RegExp(e,n);return a(t)?r.test(t):t}}),e.module("a8m.trim",[]).filter("trim",function(){return function(t,e){var n=e||"\\s";return a(t)?t.replace(new RegExp("^"+n+"+|"+n+"+$","g"),""):t}}),e.module("a8m.truncate",[]).filter("truncate",function(){return function(t,e,n,r){return e=i(e)?t.length:e,r=r||!1,n=n||"",!a(t)||t.length<=e?t:t.substring(0,r?-1===t.indexOf(" ",e)?t.length:t.indexOf(" ",e):e)+n}}),e.module("a8m.ucfirst",[]).filter({ucfirst:P,titleize:P}),e.module("a8m.uri-component-encode",[]).filter("uriComponentEncode",["$window",function(t){return function(e){return a(e)?t.encodeURIComponent(e):e}}]),e.module("a8m.uri-encode",[]).filter("uriEncode",["$window",function(t){return function(e){return a(e)?t.encodeURI(e):e}}]),e.module("a8m.wrap",[]).filter("wrap",function(){return function(t,e,n){return a(t)&&r(e)?[e,t,n||e].join(""):t}}),e.module("a8m.filter-watcher",[]).provider("filterWatcher",function(){this.$get=["$window","$rootScope",function(t,e){var n={},r={},o=t.setTimeout;function a(e,n){return[e,JSON.stringify(n,(r=[],function(e,n){if(l(n)&&!m(n)){if(~r.indexOf(n))return"[Circular]";r.push(n)}return t==n?"$WINDOW":t.document==n?"$DOCUMENT":w(n)?"$SCOPE":n}))].join("#").replace(/"/g,"");var r}function s(t){var e=t.targetScope.$id;c(r[e],function(t){delete n[t]}),delete r[e]}return{isMemoized:function(t,e){var r=a(t,e);return n[r]},memoize:function(t,l,u,c){var d=a(t,l);return n[d]=c,w(u)?function(t,e){var n=t.$id;i(r[n])&&(t.$on("$destroy",s),r[n]=[]),r[n].push(e)}(u,d):o(function(){e.$$phase||(n={})},2e3),c}}}]}),e.module("angular.filter",["a8m.ucfirst","a8m.uri-encode","a8m.uri-component-encode","a8m.slugify","a8m.latinize","a8m.strip-tags","a8m.stringular","a8m.truncate","a8m.starts-with","a8m.ends-with","a8m.wrap","a8m.trim","a8m.ltrim","a8m.rtrim","a8m.repeat","a8m.test","a8m.match","a8m.split","a8m.phoneUS","a8m.to-array","a8m.concat","a8m.contains","a8m.unique","a8m.is-empty","a8m.after","a8m.after-where","a8m.before","a8m.before-where","a8m.defaults","a8m.where","a8m.reverse","a8m.remove","a8m.remove-with","a8m.group-by","a8m.count-by","a8m.chunk-by","a8m.search-field","a8m.fuzzy-by","a8m.fuzzy","a8m.omit","a8m.pick","a8m.every","a8m.filter-by","a8m.xor","a8m.map","a8m.first","a8m.last","a8m.flatten","a8m.join","a8m.range","a8m.math.max","a8m.math.min","a8m.math.abs","a8m.math.percent","a8m.math.radix","a8m.math.sum","a8m.math.degrees","a8m.math.radians","a8m.math.byteFmt","a8m.math.kbFmt","a8m.math.shortFmt","a8m.angular","a8m.conditions","a8m.is-null","a8m.filter-watcher"])}(window,window.angular)},uZjq:function(t,e){angular.module("doubtfire.admin",["doubtfire.admin.modals","doubtfire.admin.states"])},ulcU:function(t,e){angular.module("doubtfire.units.states.edit.directives.unit-tutorials-editor",[]).directive("unitTutorialsEditor",function(){return{replace:!0,restrict:"E",templateUrl:"units/states/edit/directives/unit-tutorials-editor/unit-tutorials-editor.tpl.html",controller:function(t,e,n,r,i,o,a,s){return t.editTutorial=function(e){return a.show(t.unit,e)},t.deleteTutorial=function(e){return o.delete({id:e.id},function(n){return t.unit.tutorials=_.without(t.unit.tutorials,e),s.add("info","Tutorial "+e.abbreviation+" was deleted successfully")},function(t){return s.add("danger",t.data.error)})},t.createTutorial=function(){return a.show(t.unit)}}}})},unhN:function(t,e){angular.module("doubtfire.units.states.tasks.viewer.directives",["doubtfire.units.states.tasks.viewer.directives.unit-task-list","doubtfire.units.states.tasks.viewer.directives.task-sheet-view","doubtfire.units.states.tasks.viewer.directives.task-details-view"])},ut43:function(t,e){angular.module("doubtfire.admin.modals.create-unit-modal",[]).factory("CreateUnitModal",function(t){var e;return(e={}).show=function(e){return t.open({controller:"CreateUnitModalCtrl",templateUrl:"admin/modals/create-unit-modal/create-unit-modal.tpl.html",resolve:{units:function(){return e}}})},e}).controller("CreateUnitModalCtrl",function(t,e,n,r,i,o,a){return a.event("Unit Admin","Started to Create Unit"),t.units=i,t.unit={code:null,name:null},t.saveUnit=function(){return o.create({unit:t.unit},function(n){return r.add("success","Unit created.",2e3),e.close(),t.units.push(n),a.event("Unit Admin","Saved New Unit")},function(t){return r.add("danger","Error creating unit - "+t.data.error)})},t.externalName=n.ExternalName})},vLjA:function(t,e){angular.module("doubtfire.projects.states.portfolio.directives",["doubtfire.projects.states.portfolio.directives.portfolio-add-extra-files-step","doubtfire.projects.states.portfolio.directives.portfolio-grade-select-step","doubtfire.projects.states.portfolio.directives.portfolio-learning-summary-report-step","doubtfire.projects.states.portfolio.directives.portfolio-review-step","doubtfire.projects.states.portfolio.directives.portfolio-tasks-step","doubtfire.projects.states.portfolio.directives.portfolio-welcome-step"])},vRFE:function(t,e){angular.module("templates-app",["admin/modals/create-break-modal/create-break-modal.tpl.html","admin/modals/create-unit-modal/create-unit-modal.tpl.html","admin/modals/rollover-teaching-period-modal/rollover-teaching-period-modal.tpl.html","admin/modals/teaching-period-settings-modal/teaching-period-settings-modal.tpl.html","admin/modals/user-notification-settings-modal/user-notification-settings-modal.tpl.html","admin/modals/user-settings-modal/user-settings-modal.tpl.html","admin/states/teaching-periods/teaching-period-edit/directives/teaching-period-breaks/teaching-period-breaks.tpl.html","admin/states/teaching-periods/teaching-period-edit/directives/teaching-period-details-editor/teaching-period-details-editor.tpl.html","admin/states/teaching-periods/teaching-period-edit/directives/teaching-period-units/teaching-period-units.tpl.html","admin/states/teaching-periods/teaching-period-edit/edit-teaching-period.tpl.html","admin/states/teaching-periods/teaching-period-list/teaching-period-list.tpl.html","admin/states/units/units.tpl.html","admin/states/users/users.tpl.html","common/alert-list/alert-list.tpl.html","common/audio-player/audio-player.tpl.html","common/audio-recorder/audio-recorder.tpl.html","common/file-uploader/file-uploader.tpl.html","common/grade-icon/grade-icon.tpl.html","common/header/header.tpl.html","common/header/unit-dropdown/unit-dropdown.tpl.html","common/modals/about-doubtfire-modal/about-doubtfire-modal-content.tpl.html","common/modals/comments-modal/comments-modal.tpl.html","common/modals/confirmation-modal/confirmation-modal.tpl.html","common/modals/csv-result-modal/csv-result-modal.tpl.html","common/modals/progress-modal/progress-modal.tpl.html","common/pdf-panel-viewer/pdf-panel-viewer.tpl.html","common/pdf-viewer/pdf-viewer.tpl.html","common/status-icon/status-icon.tpl.html","common/user-icon/user-icon.tpl.html","errors/states/not-found/not-found.tpl.html","errors/states/timeout/timeout.tpl.html","errors/states/unauthorised/unauthorised.tpl.html","groups/group-member-contribution-assigner/group-member-contribution-assigner.tpl.html","groups/group-member-list/group-member-list.tpl.html","groups/group-selector/group-selector.tpl.html","groups/group-set-manager/group-set-manager.tpl.html","groups/group-set-selector/group-set-selector.tpl.html","groups/student-group-manager/student-group-manager.tpl.html","groups/tutor-group-manager/tutor-group-manager.tpl.html","home/states/home/home.tpl.html","home/states/new-user-wizard/new-user-wizard.tpl.html","projects/project-lab-list/project-lab-list.tpl.html","projects/project-outcome-alignment/project-outcome-alignment.tpl.html","projects/project-progress-dashboard/project-progress-dashboard.tpl.html","projects/states/all/directives/all-projects-list/all-projects-list.tpl.html","projects/states/dashboard/dashboard.tpl.html","projects/states/dashboard/directives/progress-dashboard/progress-dashboard.tpl.html","projects/states/dashboard/directives/student-task-list/student-task-list.tpl.html","projects/states/dashboard/directives/task-dashboard/directives/task-assessment-card/task-assessment-card.tpl.html","projects/states/dashboard/directives/task-dashboard/directives/task-description-card/task-description-card.tpl.html","projects/states/dashboard/directives/task-dashboard/directives/task-due-card/task-due-card.tpl.html","projects/states/dashboard/directives/task-dashboard/directives/task-outcomes-card/task-outcomes-card.tpl.html","projects/states/dashboard/directives/task-dashboard/directives/task-plagiarism-card/task-plagiarism-card.tpl.html","projects/states/dashboard/directives/task-dashboard/directives/task-status-card/task-status-card.tpl.html","projects/states/dashboard/directives/task-dashboard/directives/task-submission-card/task-submission-card.tpl.html","projects/states/dashboard/directives/task-dashboard/task-dashboard.tpl.html","projects/states/groups/groups.tpl.html","projects/states/outcomes/outcomes.tpl.html","projects/states/portfolio/directives/portfolio-add-extra-files-step/portfolio-add-extra-files-step.tpl.html","projects/states/portfolio/directives/portfolio-grade-select-step/portfolio-grade-select-step.tpl.html","projects/states/portfolio/directives/portfolio-learning-summary-report-step/portfolio-learning-summary-report-step.tpl.html","projects/states/portfolio/directives/portfolio-review-step/portfolio-review-step.tpl.html","projects/states/portfolio/directives/portfolio-tasks-step/portfolio-tasks-step.tpl.html","projects/states/portfolio/directives/portfolio-welcome-step/portfolio-welcome-step.tpl.html","projects/states/portfolio/portfolio.tpl.html","projects/states/tutorials/tutorials.tpl.html","sessions/states/sign-in/sign-in.tpl.html","sessions/states/sign-out/sign-out.tpl.html","tasks/modals/grade-task-modal/grade-task-modal.tpl.html","tasks/modals/plagiarism-report-modal/plagiarism-report-modal.tpl.html","tasks/modals/upload-submission-modal/upload-submission-modal.tpl.html","tasks/project-tasks-list/project-tasks-list.tpl.html","tasks/project-top-tasks-list/project-top-tasks-list.tpl.html","tasks/task-comment-composer/task-comment-composer.tpl.html","tasks/task-comments-viewer/task-comments-viewer.tpl.html","tasks/task-definition-editor/task-definition-editor.tpl.html","tasks/task-definition-selector/task-definition-selector.tpl.html","tasks/task-feedback-assessor/task-feedback-assessor.tpl.html","tasks/task-ilo-alignment/modals/task-ilo-alignment-modal/task-ilo-alignment-modal.tpl.html","tasks/task-ilo-alignment/task-ilo-alignment-editor/task-ilo-alignment-editor.tpl.html","tasks/task-ilo-alignment/task-ilo-alignment-rater/task-ilo-alignment-rater.tpl.html","tasks/task-ilo-alignment/task-ilo-alignment-viewer/task-ilo-alignment-viewer.tpl.html","tasks/task-plagiarism-file-viewer/task-plagiarism-file-viewer.tpl.html","tasks/task-plagiarism-report-viewer/task-plagiarism-report-viewer.tpl.html","tasks/task-sheet-viewer/task-sheet-viewer.tpl.html","tasks/task-status-selector/task-status-selector.tpl.html","tasks/task-submission-viewer/task-submission-viewer.tpl.html","tasks/task-submission-wizard/task-submission-wizard.tpl.html","tasks/task-viewer/task-viewer.tpl.html","units/modals/unit-ilo-edit-modal/unit-ilo-edit-modal.tpl.html","units/modals/unit-student-enrolment-modal/unit-student-enrolment-modal.tpl.html","units/modals/unit-tutorial-edit-modal/unit-tutorial-edit-modal.tpl.html","units/states/all/directives/all-units-list/all-units-list.tpl.html","units/states/analytics/analytics.tpl.html","units/states/analytics/directives/task-completion-stats/task-completion-stats.tpl.html","units/states/analytics/directives/task-status-stats/task-status-stats.tpl.html","units/states/analytics/directives/task-summary-stats/task-summary-stats.tpl.html","units/states/analytics/directives/unit-achievement-stats/unit-achievement-stats.tpl.html","units/states/analytics/directives/unit-stats-download/unit-stats-download.tpl.html","units/states/analytics/directives/unit-target-grade-stats/unit-target-grade-stats.tpl.html","units/states/edit/directives/unit-details-editor/unit-details-editor.tpl.html","units/states/edit/directives/unit-group-set-editor/unit-group-set-editor.tpl.html","units/states/edit/directives/unit-ilo-editor/unit-ilo-editor.tpl.html","units/states/edit/directives/unit-staff-editor/unit-staff-editor.tpl.html","units/states/edit/directives/unit-students-editor/unit-students-editor.tpl.html","units/states/edit/directives/unit-tasks-editor/unit-tasks-editor.tpl.html","units/states/edit/directives/unit-tutorials-editor/unit-tutorials-editor.tpl.html","units/states/edit/edit.tpl.html","units/states/groups/groups.tpl.html","units/states/index/index.tpl.html","units/states/plagiarism/directives/unit-student-plagiarism-list/unit-student-plagiarism-list.tpl.html","units/states/plagiarism/plagiarism.tpl.html","units/states/portfolios/portfolios.tpl.html","units/states/rollover/directives/unit-dates-selector/unit-dates-selector.tpl.html","units/states/rollover/rollover.tpl.html","units/states/students-list/students-list.tpl.html","units/states/tasks/inbox/directives/staff-task-list/staff-task-list.tpl.html","units/states/tasks/inbox/inbox.tpl.html","units/states/tasks/offline/offline.tpl.html","units/states/tasks/viewer/directives/task-details-view/task-details-view.tpl.html","units/states/tasks/viewer/directives/task-sheet-view/task-sheet-view.tpl.html","units/states/tasks/viewer/directives/unit-task-list/unit-task-list.tpl.html","units/states/tasks/viewer/viewer.tpl.html","visualisations/visualisation.tpl.html"]),angular.module("admin/modals/create-break-modal/create-break-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("admin/modals/create-break-modal/create-break-modal.tpl.html",'<div class="create-break-modal">\n  <form class="form-horizontal" ng-submit="addBreak()" role="form">\n    <div class="modal-header">\n      <h3>Add Break</h3>\n    </div>\n    <div class="modal-body">\n      <div class="form-group">\n        <label tooltip="Date for the start of break in the teaching period." class="col-sm-3 control-label" for="startdate">Start Date</label>\n        <div class="col-sm-9">\n          <div class="col-sm-4 input-group">\n            <input datepicker-popup="yyyy-MM-dd" is-open="calOptions.startOpened" type="text" class="form-control" id="startdate" ng-model="break.start_date" ng-required="true" placeholder="yyyy-mm-dd" close-text="Close" />\n            <span class="input-group-btn">\n              <button class="btn btn-default" type="button" ng-click="open($event,\'start\')">\n                <i class="fa fa-calendar"></i>\n              </button>\n            </span>\n          </div>\n        </div>\n      </div>\n      <div class="form-group" required>\n        <label class="col-sm-3 control-label">Number of Weeks</label>\n        <div class="col-sm-7">\n          <input type="text" class="form-control" ng-model="break.number_of_weeks"/>\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer text-right">\n      <input type="submit" class="btn btn-primary" value="Add Break"/>\n    </div>\n  </form>\n</div>\n')}]),angular.module("admin/modals/create-unit-modal/create-unit-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("admin/modals/create-unit-modal/create-unit-modal.tpl.html",'<div class="create-unit-modal">\n  <form class="form-horizontal" ng-submit="saveUnit()" role="form">\n    <div class="modal-header">\n      <h3>Create Unit</h3>\n    </div>\n    <div class="modal-body">\n      <div class="form-group" required>\n        <label class="col-sm-3 control-label">Name</label>\n        <div class="col-sm-7">\n          <input type="text" class="form-control" ng-model="unit.name" placeholder="Introduction to {{externalName.value}}"/>\n        </div>\n      </div>\n      <div class="form-group" required>\n        <label class="col-sm-3 control-label">Code</label>\n        <div class="col-sm-7">\n          <input type="text" class="form-control" ng-model="unit.code" placeholder="COS123456"/>\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer text-right">\n      <input type="submit" class="btn btn-primary" value="Create" ng-disabled="unit.name == null || unit.code == null"/>\n    </div>\n  </form>\n</div>\n')}]),angular.module("admin/modals/rollover-teaching-period-modal/rollover-teaching-period-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("admin/modals/rollover-teaching-period-modal/rollover-teaching-period-modal.tpl.html",'<div>\n  <form class="form-horizontal" ng-submit="rollover()" role="form">\n    <div class="modal-header">\n      <h3>Rollover Teaching Period</h3>\n    </div>\n    <div class="form-group">\n      <label class="col-sm-3 control-label">Rollover From: </label>\n      <div class="col-sm-7">\n        <input type="input" class="form-control" placeholder="Name" value="{{teachingperiod.name()}}" ng-disabled="true">\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-sm-3 control-label" for="teachingperiod">Rollover To:</label>\n      <div class="col-sm-7">\n        <select class="form-control" ng-model="rolloverTo" ng-required="true">\n          <option ng-value="tp.id" value="{{tp.id}}" ng-repeat="tp in teachingPeriods.loadedPeriods">{{tp.period}}-{{tp.year}} </option>\n        </select>\n      </div>\n    </div>\n    <div class="modal-footer text-right">\n      <input type="submit" class="btn btn-primary" value="Rollover" />\n    </div>\n  </form>>\n</div>')}]),angular.module("admin/modals/teaching-period-settings-modal/teaching-period-settings-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("admin/modals/teaching-period-settings-modal/teaching-period-settings-modal.tpl.html",'<div>\n    <form class="form-horizontal" ng-submit="saveTeachingPeriod()" role="form">\n      <div class="modal-header">\n        <h3>{{isNew ? "Create Teaching Period" : "Edit Teaching Period"}}</h3>\n      </div>\n\n      <div class="form-group" ng-required="isNew">\n        <label class="col-sm-3 control-label">Name</label>\n        <div class="col-sm-7">\n          <input type="input" class="form-control" placeholder="Name" ng-model="teachingperiod.period">\n        </div>\n      </div>\n\n      <div class="form-group" ng-required="isNew">\n        <label class="col-sm-3 control-label">Year</label>\n        <div class="col-sm-7">\n          <input type="input" class="form-control" placeholder="Year" ng-model="teachingperiod.year">\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label tooltip="Date for the start of teaching in the unit." class="col-sm-3 control-label" for="startdate">Start Date</label>\n        <div class="col-sm-9">\n          <div class="col-sm-4 input-group">\n            <input datepicker-popup="yyyy-MM-dd" is-open="calOptions.startOpened" type="text" class="form-control" id="startdate" ng-model="teachingperiod.start_date" ng-required="true" placeholder="yyyy-MM-dd" close-text="Close" />\n            <span class="input-group-btn">\n              <button class="btn btn-default" type="button" ng-click="open($event,\'start\')">\n                <i class="fa fa-calendar"></i>\n              </button>\n            </span>\n          </div>\n        </div>\n      </div>\x3c!--/start-date--\x3e\n\n      <div class="form-group">\n        <label class="col-sm-3 control-label" for="enddate">End Date</label>\n        <div class="col-sm-9">\n          <div class="col-sm-4 input-group">\n            <input datepicker-popup="{{format}}" id="enddate" type="text" class="form-control" ng-model="teachingperiod.end_date" is-open="calOptions.endOpened" ng-required="true" close-text="Close" />\n            <span class="input-group-btn">\n              <button class="btn btn-default" type="button" ng-click="open($event,\'end\')">\n                <i class="fa fa-calendar"></i>\n              </button>\n            </span>\n          </div>\n        </div>\n      </div>\x3c!--/end-date--\x3e\n\n      <div class="form-group">\n        <label class="col-sm-3 control-label" for="activeuntil">Active Until</label>\n        <div class="col-sm-9">\n          <div class="col-sm-4 input-group">\n            <input datepicker-popup="{{format}}" id="activeuntil" type="text" class="form-control" ng-model="teachingperiod.active_until" is-open="calOptions.activeUntilOpened" ng-required="true" close-text="Close" />\n            <span class="input-group-btn">\n              <button class="btn btn-default" type="button" ng-click="open($event,\'active\')">\n                <i class="fa fa-calendar"></i>\n              </button>\n            </span>\n          </div>\n        </div>\n      </div>\x3c!--/active-until-date--\x3e\n\n      <div class="modal-footer text-right">\n        <input type="submit" class="btn btn-primary" value="{{isNew ? \'Add\' : \'Save\'}}" />\n      </div>\n    </form>>\n</div>')}]),angular.module("admin/modals/user-notification-settings-modal/user-notification-settings-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("admin/modals/user-notification-settings-modal/user-notification-settings-modal.tpl.html",'<div>\n  <form class="form-horizontal" ng-submit="saveNotifications()" role="form">\n    <div class="modal-header">\n      <h3>Notification Settings</h3>\n    </div>\n    <div class="modal-body">\n      <div class="form-group">\n        <label class="col-sm-6 control-label">Task Notifications</label>\n        <div class="btn-group">\n          <label class="btn btn-default" ng-model="user.receive_task_notifications" btn-radio="true">\n            <i class="glyphicon glyphicon-ok"></i>\n          </label>\n          <label class="btn btn-default" ng-model="user.receive_task_notifications" btn-radio="false">\n            <i class="glyphicon glyphicon-remove"></i>\n          </label>\n        </div>\n      </div>\n      <div class="form-group">\n        <label class="col-sm-6 control-label">Feedback Notifications</label>\n        <div class="btn-group">\n          <label class="btn btn-default" ng-model="user.receive_feedback_notifications" btn-radio="true">\n            <i class="glyphicon glyphicon-ok"></i>\n          </label>\n          <label class="btn btn-default" ng-model="user.receive_feedback_notifications" btn-radio="false">\n            <i class="glyphicon glyphicon-remove"></i>\n          </label>\n        </div>\n      </div>\n      <div class="form-group">\n        <label class="col-sm-6 control-label">Portfolio Notifications</label>\n        <div class="btn-group">\n          <label class="btn btn-default" ng-model="user.receive_portfolio_notifications" btn-radio="true">\n            <i class="glyphicon glyphicon-ok"></i>\n          </label>\n          <label class="btn btn-default" ng-model="user.receive_portfolio_notifications" btn-radio="false">\n            <i class="glyphicon glyphicon-remove"></i>\n          </label>\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer text-right">\n      <input type="submit" class="btn btn-primary" value="Save" />\n    </div>\n  </form>\n</div>\n')}]),angular.module("admin/modals/user-settings-modal/user-settings-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("admin/modals/user-settings-modal/user-settings-modal.tpl.html",'<div>\n  <form class="form-horizontal" ng-submit="saveUser()" role="form">\n    <div class="modal-header">\n      <h3>{{isNew ? "Create User" : "Edit User"}}</h3>\n    </div>\n    <div class="modal-body">\n      <div class="form-group" ng-if="!isNew">\n        <label class="col-sm-3 control-label">Username</label>\n        <div class="col-sm-7">\n          <p class="form-control-static">{{user.username}}</p>\n        </div>\n      </div>\n      <div class="form-group" ng-if="isNew">\n        <label class="col-sm-3 control-label" ng-required="isNew">Username</label>\n        <div class="col-sm-7">\n          <input type="input" class="form-control" placeholder="1744070" ng-model="user.username">\n        </div>\n      </div>\n      <div class="form-group" ng-required="isNew">\n        <label class="col-sm-3 control-label">First Name</label>\n        <div class="col-sm-7">\n          <input type="input" class="form-control" placeholder="Name" ng-model="user.first_name">\n        </div>\n      </div>\n      <div class="form-group" ng-required="isNew">\n        <label class="col-sm-3 control-label">Last Name</label>\n        <div class="col-sm-7">\n          <input type="input" class="form-control" placeholder="Surname" ng-model="user.last_name">\n        </div>\n      </div>\n      <div class="form-group" ng-required="isNew">\n        <label class="col-sm-3 control-label">Preferred Name</label>\n        <div class="col-sm-7">\n          <input type="input" class="form-control" placeholder="Name" ng-model="user.nickname">\n        </div>\n      </div>\n      <div class="form-group" ng-required="isNew">\n        <label class="col-sm-3 control-label">Email</label>\n        <div class="col-sm-7">\n          <input type="email" class="form-control" placeholder="name@university.edu" ng-model="user.email">\n        </div>\n      </div>\n      <hr>\n      <div class="form-group" ng-show="user.system_role == \'Student\'">\n        <label class="col-sm-3 control-label">Student ID</label>\n        <div class="col-sm-7">\n          <input type="input" class="form-control" placeholder="1744070" ng-model="user.student_id">\n          <p class="help-block">\n            Please ensure your institution\'s student identification number matches this value\n          </p>\n        </div>\n      </div>\n      <div class="form-group">\n        <label class="col-sm-3 control-label">Avatar</label>\n        <div class="col-sm-7">\n          <user-icon size="50" user="user" email="user.email" style="max-width: 50px; max-height: 50px; font-size: 18px;"></user-icon>\n          <a href="http://en.gravatar.com/support/activating-your-account/" target="_blank" class="btn btn-sm btn-default pull-right"> Change Avatar </a>\n          <p class="help-block">\n            Sign up to <a href="http://en.gravatar.com/support/activating-your-account/" target="_blank">Gravatar</a> and associate your email above to your account to give yourself an avatar\n          </p>\n        </div>\n      </div>\n      <div class="form-group" if-role="Admin Convenor" ng-required="isNew">\n        <label class="col-sm-3 control-label">System Role</label>\n        <div class="col-sm-7">\n          <label class="radio-inline" if-role="Admin">\n            <input type="radio" ng-disabled="user.id == currentUser.id" name="sysRole" if-role="Admin" ng-model="user.system_role" value="Admin">Administrator\n          </label>\n          <label class="radio-inline">\n            <input type="radio" ng-disabled="user.id == currentUser.id" name="sysRole" if-role="Admin Convenor" ng-model="user.system_role" value="Convenor">Convenor\n          </label>\n          <label class="radio-inline">\n            <input type="radio" ng-disabled="user.id == currentUser.id" name="sysRole" if-role="Admin Convenor" ng-model="user.system_role" value="Tutor">Tutor\n          </label>\n          <label class="radio-inline">\n            <input type="radio" ng-disabled="user.id == currentUser.id" name="sysRole" if-role="Admin Convenor" ng-model="user.system_role" value="Student">Student\n          </label>\n          <p ng-show="user.id == currentUser.id" class="help-block text-center">You cannot modify your own permissions</p>\n        </div>\n      </div>\n      <div ng-if="!isNew && user.id == currentUser.id">\n        <hr>\n        <div class="form-group">\n          <label class="col-sm-3 control-label">Allow Analytics</label>\n          <div class="col-sm-7">\n            <div class="btn-group">\n              <label class="btn btn-default" ng-model="user.opt_in_to_research" btn-radio="true">\n                <i class="fa fa-check"></i>\n              </label>\n              <label class="btn btn-default" ng-model="user.opt_in_to_research" btn-radio="false">\n                <i class="fa fa-close"></i>\n              </label>\n            </div>\n            <p class="help-block">Allow us to anonymously gather your usage to improve {{externalName.value}}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer text-right">\n      <input type="submit" class="btn btn-primary" value="{{isNew ? \'Add\' : \'Save\'}}" />\n    </div>\n  </form>\n</div>\n')}]),angular.module("admin/states/teaching-periods/teaching-period-edit/directives/teaching-period-breaks/teaching-period-breaks.tpl.html",[]).run(["$templateCache",function(t){t.put("admin/states/teaching-periods/teaching-period-edit/directives/teaching-period-breaks/teaching-period-breaks.tpl.html",'<div class="container">\n  <div class="panel panel-primary">\n    <div class="panel-heading clearfix">\n      <div class="pull-left">\n        <h4 class="panel-title">Breaks</h4>\n        Breaks in {{teachingPeriod.name()}}\n      </div>\n    </div>\n    <div class="panel-body">\n      <div class="callout callout-info" ng-hide="teachingPeriod.breaks.length > 0">No breaks have been registered with {{teachingPeriod.name()}} yet</div>\n      <table ng-show="teachingPeriod.breaks.length > 0" class="table table-hover table-pointer">\n        <thead>\n          <tr>\n            <th><a ng-click="sortOrder=\'start_date\'; reverse=!reverse">Start Date <i ng-show="sortOrder==\'start_date\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'duration\'; reverse=!reverse">Duration <i ng-show="sortOrder==\'duration\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="break in teachingPeriod.breaks | orderBy:sortOrder:reverse">\n            <td>{{break.start_date | date: \'EEE d MMM\' : \'+0000\'}}</td>\n            <td>{{break.number_of_weeks}} week</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="panel-footer clearfix">\n      <button class="btn btn-success pull-right" ng-click="addBreak(teachingPeriod)">\n        <i class="fa fa-university"></i>\n        <i class="fa fa-plus"></i>\n        Add Break\n      </button>\n    </div>\n  </div>\n</div>\n')}]),angular.module("admin/states/teaching-periods/teaching-period-edit/directives/teaching-period-details-editor/teaching-period-details-editor.tpl.html",[]).run(["$templateCache",function(t){t.put("admin/states/teaching-periods/teaching-period-edit/directives/teaching-period-details-editor/teaching-period-details-editor.tpl.html",'<div class="teaching-period-details-editor">\n  <div class="panel panel-primary">\n    <div class="panel-heading" ng-if="teachingPeriod.id == -1">\n      <h3 class="panel-title">Create Teaching Period</h3>\n      Create a new teaching period with all overview teaching period details here.\n    </div>\n    <div class="panel-heading" ng-if="teachingPeriod.id != -1">\n      <h3 class="panel-title">Update Teaching Period</h3>\n      Update overview details of the teaching period below.\n    </div>\n    <form class="form-horizontal" role="form" name="teachingPeriodForm" ng-submit="saveTeachingPeriod()">\n      <div class="panel-body">\n        <div class="form-group">\n          <label class="col-sm-2 control-label" for="name">Name</label>\n          <div class="col-sm-9">\n            <input id="name" type="text" class="form-control" ng-model="teachingPeriod.period">\n          </div>\n        </div>\x3c!--/name-date--\x3e\n\n        <div class="form-group">\n          <label class="col-sm-2 control-label" for="name">Year</label>\n          <div class="col-sm-9">\n            <input id="name" type="text" class="form-control" ng-model="teachingPeriod.year">\n          </div>\n        </div>\x3c!--/year-date--\x3e\n\n        <div class="form-group">\n          <label tooltip="Date for the start of teaching in the unit." class="col-sm-2 control-label" for="startdate">Start Date</label>\n          <div class="col-sm-9">\n            <div class="col-sm-4 input-group">\n              <input datepicker-popup="yyyy-MM-dd" is-open="calOptions.startOpened" type="text" class="form-control" id="startdate" ng-model="teachingPeriod.start_date" ng-required="true" placeholder="yyyy-MM-dd" close-text="Close" />\n              <span class="input-group-btn">\n                <button class="btn btn-default" type="button" ng-click="open($event,\'start\')">\n                  <i class="fa fa-calendar"></i>\n                </button>\n              </span>\n            </div>\n          </div>\n        </div>\x3c!--/start-date--\x3e\n\n        <div class="form-group">\n          <label class="col-sm-2 control-label" for="enddate">End Date</label>\n          <div class="col-sm-9">\n            <div class="col-sm-4 input-group">\n              <input datepicker-popup="{{format}}" id="enddate" type="text" class="form-control" ng-model="teachingPeriod.end_date" is-open="calOptions.endOpened" ng-required="true" close-text="Close" />\n              <span class="input-group-btn">\n                <button class="btn btn-default" type="button" ng-click="open($event,\'end\')">\n                  <i class="fa fa-calendar"></i>\n                </button>\n              </span>\n            </div>\n          </div>\n        </div>\x3c!--/end-date--\x3e\n\n        <div class="form-group">\n          <label class="col-sm-2 control-label" for="activeuntil">Active Until</label>\n          <div class="col-sm-9">\n            <div class="col-sm-4 input-group">\n              <input datepicker-popup="{{format}}" id="activeuntil" type="text" class="form-control" ng-model="teachingPeriod.active_until" is-open="calOptions.activeUntilOpened" ng-required="true" close-text="Close" />\n              <span class="input-group-btn">\n                <button class="btn btn-default" type="button" ng-click="open($event,\'active\')">\n                  <i class="fa fa-calendar"></i>\n                </button>\n              </span>\n            </div>\n          </div>\n        </div>\x3c!--/active-until-date--\x3e\n      </div>\n      <div class="panel-footer text-right">\n        <input type="submit" value="{{ teachingPeriod.id == -1 ? \'Create\' : \'Update\' }}" class="btn btn-success" ng-disabled="teachingPeriodForm.$pristine" />\n      </div>\n    </form>\n  </div>\n</div>\n')}]),angular.module("admin/states/teaching-periods/teaching-period-edit/directives/teaching-period-units/teaching-period-units.tpl.html",[]).run(["$templateCache",function(t){t.put("admin/states/teaching-periods/teaching-period-edit/directives/teaching-period-units/teaching-period-units.tpl.html",'<div class="container">\n  <div class="panel panel-primary">\n    <div class="panel-heading clearfix">\n      <div class="pull-left">\n        <h4 class="panel-title">Units</h4>\n        Units registered with {{teachingPeriod.name()}}\n      </div>\n      <form role="search" class="pull-right form-horizontal">\n        <input id="searchbar" class="input-md form-control" placeholder="Search for units..." type="search" ng-model="search" autocomplete="off" typeahead="unit.name for unit in teachingPeriod.units | filter:$viewValue | limitTo:8" />\n      </form>\n    </div>\n    <div class="panel-body">\n      <div class="callout callout-info" ng-hide="teachingPeriod.units.length > 0">No units have been registered with {{teachingPeriod.name()}} yet</div>\n      <table ng-show="teachingPeriod.units.length > 0" class="table table-hover table-pointer">\n        <thead>\n          <tr>\n            <th><a ng-click="sortOrder=\'code\'; reverse=!reverse">Unit Code <i ng-show="sortOrder==\'code\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'name\'; reverse=!reverse">Name <i ng-show="sortOrder==\'name\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'teachingPeriodName\'; reverse=!reverse">Teaching Period <i ng-show="sortOrder==\'teachingPeriodName\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'active\'; reverse=!reverse">Active <i ng-show="sortOrder==\'active\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="unit in filteredUnits = (teachingPeriod.units | filter:search) | orderBy:sortOrder:reverse | startFrom:(currentPage - 1) * pageSize | limitTo: pageSize" ui-sref="units/admin({unitId: unit.id})" >\n            <td>\n              <label class="label label-info">\n                {{unit.code}}\n              </label>\n            </td>\n            <td>{{unit.name}}</td>\n            <td>{{teachingPeriod.name()}}</td>\n            <td>\n              <i ng-if="teachingPeriod.active && unit.active" class="fa fa-check"></i>\n              <i ng-if="!teachingPeriod.active || !unit.active" class="fa fa-times"></i>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="panel-footer clearfix">\n      <pagination ng-show="filteredUnits.length > pageSize" total-items="filteredUnits.length" ng-model="currentPage" items-per-page="pageSize" max-size="maxSize" class="pagination-sm pull-left" boundary-links="true" rotate="false"></pagination>\n      <button class="btn btn-success pull-right" ng-click="rolloverTeachingPeriodModal(teachingPeriod)">\n        <i class="fa fa-university"></i>\n        <i class="fa fa-plus"></i>\n        Rollover Teaching Period\n      </button>\n    </div>\n  </div>\n</div>\n')}]),angular.module("admin/states/teaching-periods/teaching-period-edit/edit-teaching-period.tpl.html",[]).run(["$templateCache",function(t){t.put("admin/states/teaching-periods/teaching-period-edit/edit-teaching-period.tpl.html",'<div class="container">\n  <tabset class="tabset-icon">\n    <tab ng-repeat="tab in tabs | toArray | orderBy: \'seq\'" active="tab.active" ng-click="setActiveTab(tab)">\n      <tab-heading>{{tab.title}}</tab-heading>\n    </tab>\n  </tabset>\x3c!--/tabs--\x3e\n  <teaching-period-details-editor teachingperiod="teachingPeriod" ng-if="activeTab === tabs.editorTab"></teaching-period-details-editor>\n  <teaching-period-breaks teachingperiod="teachingPeriod" ng-if="activeTab === tabs.breaksTab"></teaching-period-breaks>\n  <teaching-period-units teachingperiod="teachingPeriod" ng-if="activeTab === tabs.unitsTab"></teaching-period-units>\n</div>\n')}]),angular.module("admin/states/teaching-periods/teaching-period-list/teaching-period-list.tpl.html",[]).run(["$templateCache",function(t){t.put("admin/states/teaching-periods/teaching-period-list/teaching-period-list.tpl.html",'<div class="container">\n  <div class="panel panel-primary">\n    <div class="panel-heading clearfix">\n      <div class="pull-left">\n        <h4 class="panel-title">Teaching Periods</h4>\n        Modify Teaching Periods registered with {{externalName.value}}\n      </div>\n      <form role="search" class="pull-right form-horizontal">\n        <input id="searchbar" class="input-md form-control" placeholder="Search for teaching periods..." type="search" ng-model="search.$" typeahead="teachingperiod.period for teachingperiod in teachingPeriods.loadedPeriods | filter:$viewValue | limitTo:8" />\n      </form>\n    </div>\n    <div class="panel-body">\n      <div class="callout callout-info" ng-hide="teachingPeriods.loadedPeriods.length > 0">No teaching periods have been registered with {{externalName.value}} yet</div>\n        <table ng-show="teachingPeriods.loadedPeriods.length > 0" class="table table-hover table-pointer">\n          <thead>\n            <tr>\n              <th><a ng-click="sortOrder=\'teachingperiod.name()\'; reverse=!reverse">Name <i ng-show="sortOrder==\'period\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n              <th><a ng-click="sortOrder=\'start_date\'; reverse=!reverse">Start Date <i ng-show="sortOrder==\'start_date\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n              <th><a ng-click="sortOrder=\'end_date\'; reverse=!reverse">End Date <i ng-show="sortOrder==\'end_date\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n              <th><a ng-click="sortOrder=\'active_until\'; reverse=!reverse">Active Until <i ng-show="sortOrder==\'active_until\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr ng-repeat="teachingperiod in filteredTeachingPeriods = (teachingPeriods.loadedPeriods | filter:search) | orderBy:sortOrder:reverse | startFrom:(currentPage - 1) * pageSize | limitTo: pageSize" ui-sref="admin/teachingperiods/edit({teachingPeriodId: teachingperiod.id})" >\n              <td>{{teachingperiod.name()}}</td>\n              <td>{{teachingperiod.start_date | date: \'EEE d MMM\' : \'+0000\'}}</td>\n              <td>{{teachingperiod.end_date | date: \'EEE d MMM\' : \'+0000\'}}</td>\n              <td>{{teachingperiod.active_until | date: \'EEE d MMM\' : \'+0000\'}}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="panel-footer clearfix">\n        <a href class="btn btn-success pull-right" ng-click="showTeachingPeriodModal()">\n          <i class="fa fa-calendar"></i>\n          <i class="fa fa-plus"></i>\n          Add New Teaching Period\n        </a>\n        <pagination ng-show="filteredTeachingPeriods.length > pageSize" total-items="filteredTeachingPeriods.length" ng-model="currentPage" items-per-page="pageSize" max-size="maxSize" class="pagination-sm pull-left" boundary-links="true" rotate="false"></pagination>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("admin/states/units/units.tpl.html",[]).run(["$templateCache",function(t){t.put("admin/states/units/units.tpl.html",'<div class="container">\n  <div class="panel panel-primary">\n    <div class="panel-heading clearfix">\n      <div class="pull-left">\n        <h4 class="panel-title">Units</h4>\n        Modify units registered with {{externalName.value}}\n      </div>\n      <form role="search" class="pull-right form-horizontal">\n        <input id="searchbar" class="input-md form-control" placeholder="Search for units..." type="search" ng-model="search" autocomplete="off" typeahead="unit.name for unit in units | filter:$viewValue | limitTo:8" />\n        <p ng-show="filteredUnits.length < students.length && filteredUnits.length != 0">Showing {{filteredUnits.length}} of {{users.length}} users.</p>\n        <p ng-show="filteredUnits.length < students.length && filteredUnits.length == 0">No students found.</p>\n      </form>\n    </div>\n    <div class="panel-body">\n      <div class="callout callout-info" ng-hide="units.length > 0">No units have been registered with {{externalName.value}} yet</div>\n      <table ng-show="units.length > 0" class="table table-hover table-pointer">\n        <thead>\n          <tr>\n            <th><a ng-click="sortOrder=\'code\'; reverse=!reverse">Unit Code <i ng-show="sortOrder==\'code\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'name\'; reverse=!reverse">Name <i ng-show="sortOrder==\'name\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'unitRole\'; reverse=!reverse">Unit Role <i ng-show="sortOrder==\'unitRole\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'teachingPeriod.name()\'; reverse=!reverse">Teaching Period<i ng-show="sortOrder==\'teachingPeriod.name()\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'start_date\'; reverse=!reverse">Start Date <i ng-show="sortOrder==\'start_date\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'end_date\'; reverse=!reverse">End Date <i ng-show="sortOrder==\'end_date\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'active\'; reverse=!reverse">Active <i ng-show="sortOrder==\'active\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="unit in filteredUnits = (units | filter:search) | orderBy:sortOrder:reverse | startFrom:(currentPage - 1) * pageSize | limitTo: pageSize" ui-sref="units/admin({unitId: unit.id})" >\n            <td>\n              <label class="label label-info">\n                {{unit.code}}\n              </label>\n            </td>\n            <td>{{unit.name}}</td>\n            <td>{{(unit.unitRole.role | ucfirst) || "N/A"}}</td>\n            <td ng-if="unit.teachingPeriod">{{unit.teachingPeriod.name()}}</td>\n            <td ng-if="!unit.teachingPeriod">Custom</td>\n            <td>{{unit.start_date | date : \'EEE d MMM\' : \'+0000\'}}</td>\n            <td>{{unit.end_date | date : \'EEE d MMM\' : \'+0000\'}}</td>\n            <td ng-if="unit.teachingPeriod">\n              <i ng-if="unit.teachingPeriod.active() && unit.active" class="fa fa-check"></i>\n              <i ng-if="!unit.teachingPeriod.active() || !unit.active" class="fa fa-times"></i>\n            </td>\n            <td ng-if="!unit.teachingPeriod">\n              <i ng-if="unit.active" class="fa fa-check"></i>\n              <i ng-if="!unit.active" class="fa fa-times"></i>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="panel-footer clearfix">\n      <pagination ng-show="filteredUnits.length > pageSize" total-items="filteredUnits.length" ng-model="currentPage" items-per-page="pageSize" max-size="maxSize" class="pagination-sm pull-left" boundary-links="true" rotate="false"></pagination>\n      <button class="btn btn-success pull-right" ng-click="createUnit()">\n        <i class="fa fa-university"></i>\n        <i class="fa fa-plus"></i>\n        Create Unit\n      </button>\n    </div>\n  </div>\n</div>\n')}]),angular.module("admin/states/users/users.tpl.html",[]).run(["$templateCache",function(t){t.put("admin/states/users/users.tpl.html",'<div ng-show="users == null" class="large-notice-block">\n  <i class="fa fa-2x fa-spinner fa-pulse"></i>\n  <p>Loading...</p>\n</div>\x3c!--/loading--\x3e\n<div ng-if="users != null">\n  <h2>\n    {{externalName.value}} Users\n    <p class="lead">Users Administration View</p>\n  </h2>\n  <div class="col-sm-9">\n    <div class="panel panel-primary">\n      <div class="panel-heading clearfix">\n        <div class="pull-left">\n          <h4 class="panel-title">\n            {{externalName.value}} Users\n          </h4>\n          Modify users registered with {{externalName.value}}\n        </div>\n        <form role="search" class="pull-right form-horizontal">\n          <input id="searchbar" class="input-md form-control" placeholder="Search for users..." type="search" ng-model="search" autocomplete="off" typeahead="user.name for user in users | filter:$viewValue | limitTo:8" />\n          <p ng-show="filteredUsers.length < students.length && filteredUsers.length != 0">Showing {{filteredUsers.length}} of {{users.length}} users.</p>\n          <p ng-show="filteredUsers.length < students.length && filteredUsers.length == 0">No students found.</p>\n        </form>\n      </div>\n      <div class="panel-body">\n        <div class="callout callout-info" ng-hide="users.length > 0">No users have been registered with {{externalName.value}} yet</div>\n        <table class="table table-condensed table-hover">\n          <thead>\n            <tr>\n              <th><a ng-click="sortOrder=\'id\'; reverse=!reverse">User ID</a></th>\n              <th><a ng-click="sortOrder=\'first_name\'; reverse=!reverse">First Name</a></th>\n              <th><a ng-click="sortOrder=\'last_name\'; reverse=!reverse">Last Name</a></th>\n              <th>Username</th>\n              <th>Email</th>\n              <th><a ng-click="sortOrder=\'system_role\'; reverse=!reverse">System Role</a></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr class="pointer" ng-repeat="user in filteredUsers = (users | filter:search) | orderBy:sortOrder:reverse | startFrom:(currentPage - 1) * pageSize | limitTo: pageSize" ng-click="showUserModal(user)">\n              <td>{{user.id}}</td>\n              <td>{{user.first_name}}</td>\n              <td>{{user.last_name}}</td>\n              <td>{{user.username}}</td>\n              <td><a href="mailto:{{user.email}}">{{user.email}}</a></td>\n              <td>\n                {{user.system_role}}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="panel-footer clearfix">\n        <a href class="btn btn-success pull-right" ng-click="showUserModal()">\n          <i class="fa fa-user"></i>\n          <i class="fa fa-plus"></i>\n           Add New User\n        </a>\n        <pagination total-items="filteredUsers.length" ng-model="currentPage" items-per-page="pageSize" max-size="maxSize" class="pagination-sm pull-left" boundary-links="true" rotate="false"></pagination>\n      </div>\n    </div>\n  </div>\n  <div class="col-sm-3">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h4 class="panel-title">Batch Import Users</h4>\n        Import users using a CSV containing: email, first_name, last_name, username, nickname, role\n      </div>\n      <div class="panel-body">\n        <file-uploader\n          url="file_data.batchUserUrl"\n          files="file_data.batchUserFiles"\n          on-success="file_data.onBatchUserSuccess"></file-uploader>\n      </div>\n      <div class="panel-heading">\n        <h4 class="panel-title">Batch Export Users</h4>\n        Download a CSV of all users registered with {{externalName.value}}.\n      </div>\n      <div class="panel-body text-center">\n        <a href="batchUserUrl" class="btn btn-primary btn-download">\n          <i class="fa fa-download"></i> Download\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("common/alert-list/alert-list.tpl.html",[]).run(["$templateCache",function(t){t.put("common/alert-list/alert-list.tpl.html",'<div class="alert-top">\n  <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="alert.close()">\n    <div class="alert-wrapper">\n      <i class="fa fa-3x"></i>\n      <div class="alert-content">\n        <div ng-bind-html="alert.msg"></div>\n      </div>\n    </div>\n  </alert>\n</div>\n')}]),angular.module("common/audio-player/audio-player.tpl.html",[]).run(["$templateCache",function(t){t.put("common/audio-player/audio-player.tpl.html",'<div class="audio-comment-container">\n  <button class="play-button" ng-click="playAudio()">\n    <i id="playButton" class="play-button fa" ng-class="isPlaying ? \'fa-stop-circle\' : \'fa-play-circle\'"></i>\n  </button>\n  <progressbar class="progress-bar-container" max="max" value="audioProgress"></progressbar>\n</div>')}]),angular.module("common/audio-recorder/audio-recorder.tpl.html",[]).run(["$templateCache",function(t){t.put("common/audio-recorder/audio-recorder.tpl.html",'<div class="audio-recorder">\n  <p ng-hide="canRecord">Audio recording\n    <br> only supported in Chrome and Firefox.</p>\n  <div ng-show="canRecord">\n    <button type="button" id=\'btnRecord\' ng-click="recordingToggle()" class="btn-circle-xl">\n      <p ng-show="!isRecording"> record</p>\n      <i ng-show="isRecording" class="fa fa-square"></i>\n    </button>\n\n    <div id="button-wrapper">\n      <button type="button" id=\'btnSend\' ng-click="sendRecording()" ng-disabled="!recordingAvailable" class="btn-circle">\n        <i class="fa fa-paper-plane"></i>\n      </button>\n      <button type="button" id=\'btnPlay\' ng-disabled="!recordingAvailable" ng-click="playStop()" class="btn-circle">\n        <i class="fa fa-play"></i>\n      </button>\n    </div>\n\n    <audio id=\'audioPlayer\'></audio>\n    <canvas class="audio-visualiser" id="audio-recorder-visualiser"></canvas>\n  </div>\n</div>')}]),angular.module("common/file-uploader/file-uploader.tpl.html",[]).run(["$templateCache",function(t){t.put("common/file-uploader/file-uploader.tpl.html",'<div class="file-uploader" ng-class="{ \'is-uploading\': isUploading }">\n  <div ng-hide="showUploader">\n    <button class="btn btn-success form-control" ng-click="showUploader = true">\n      <i class="fa fa-upload"></i> Begin Upload\n    </button>\n  </div>\x3c!--begin-upload-button--\x3e\n  <div collapse="!showUploader" ng-if="uploadingInfo == null" class="file-drop-area">\n    <div ng-repeat="upload in shownUploadZones">\n      <h5 class="text-muted" ng-show="!singleDropZone && showName">\n        {{uploadZones.length == 1 ? \'\' : $index + 1 + \' -\'}} {{upload.display.name}}\n      </h5>\n      <h5 class="text-muted" ng-show="singleDropZone && showName">\n        Select {{upload.display.name}}\n      </h5>\n      <div ngf-select ngf-drop\n        ng-show="upload.model == null || upload.model.length == 0"\n        class="drop well {{upload.display.error ? \'file-rejected\' : \'\'}}"\n        ng-model="upload.model"\n        ng-model-rejected="upload.rejects"\n        ngf-change="modelChanged($files, upload)"\n        ngf-accept="{{upload.accept}}"\n        ngf-drag-over-class="{accept:\'file-over\', reject:\'file-over\', delay:100}"\n        ngf-drop-available="dropSupported">\n        <p class="fa {{upload.display.icon}} fa-3x"></p>\n        <p ng-show="upload.display.error">\n          Invalid file provided\n          <small> Accepted files: <code>{{upload.accept.split(\',\').join(\', \')}}</code> </small>\n        </p>\n        <p ng-show="dropSupported" ng-hide="upload.display.error">\n          Drop {{upload.display.type}} file here\n          <small> or click to select one </small>\n        </p>\n        <p ng-hide="dropSupported || upload.display.error">\n          Click to select {{upload.display.type}} file\n        </p>\n      </div>\x3c!--/drop-zone--\x3e\n      <div ng-show="!singleDropZone && upload.model.length > 0" class="selected-files">\n        <span class="selected-file">\n          <i class="file-type fa {{upload.display.icon}}"></i>\n          {{upload.model[0].name}}\n        </span>\n        <a class="clear-upload text-muted" ng-click="clearEnqueuedUpload(upload)">\n          <i class="fa fa-times"></i>\n        </a>\n      </div>\x3c!--/selected-file--\x3e\n    </div>\x3c!--/drop-zones--\x3e\n    <div ng-show="singleDropZone">\n      <h5 class="text-muted">Upload Summary</h5>\n      <div class="selected-files list-group">\n        <div class="selected-file list-group-item clearfix" ng-class="{highlight: upload.model.length > 0}" ng-repeat="upload in uploadZones">\n          <div class="pull-left">\n            <i class="file-type fa {{upload.display.icon}}"></i>\n            <strong>{{upload.display.name}}</strong>\n          </div>\n          <div class="pull-right text-right">\n            <em ng-show="upload.model.length > 0">{{upload.model[0].name}}</em>\n            <em ng-hide="upload.model.length > 0" class="text-muted">File Pending</em>\n            <a class="clear-upload text-muted" ng-click="clearEnqueuedUpload(upload)" ng-show="upload.model.length > 0">\n              <i class="fa fa-times"></i>\n            </a>\n          </div>\n        </div>\x3c!--/selected-file--\x3e\n      </div>\n    </div>\x3c!--/upload-summary--\x3e\n  </div>\x3c!--/file-drop-area--\x3e\n  <div ng-show="showUploader && !isUploading" class="upload-commit-actions">\n    <button\n      ng-show="showUploadButton && readyToUpload() && uploadingInfo == null"\n      ng-click="initiateUpload()"\n      class="btn btn-primary btn-upload">\n      <i class="fa fa-upload"></i> Start Upload\n    </button>\x3c!--/upload-button--\x3e\n    <button ng-show="asButton" ng-click="resetUploader()" class="btn btn-danger btn-cancel">\n      <i class="fa fa-times"></i> Cancel Upload\n    </button>\x3c!--/cancel-button--\x3e\n  </div>\n  <div ng-show="showUploader && readyToUpload()" class="upload-area text-center clearfix">\n    <div ng-hide="uploadingInfo == null || uploadingInfo.complete" class="progress-area">\n      <div class="icons">\n        <i ng-repeat="upload in uploadZones" class="fa {{upload.display.icon}}"></i>\n        <i class="fa fa-arrow-right"></i>\n        <i class="logo"></i>\n      </div>\n      <progressbar class="progress-striped active" value="uploadingInfo.progress"></progressbar>\n    </div>\x3c!--/progress-area--\x3e\n    <div ng-if="uploadingInfo.complete" class="result-area">\n      <p class="result-text">\n        <i class="fa {{uploadingInfo.success === true ? \'fa-check-circle text-success\' : \'fa-times-circle text-danger\'}} fa-2x"></i>\n        <strong>File Upload {{uploadingInfo.success === true ? \'Successful\' : \'Failed\'}}</strong>\n      </p>\n      <div class="error-message-area" ng-hide="uploadingInfo.success === true">\n        <hr>\n        <p>\n          <strong>Error Message: </strong>\n          {{uploadingInfo.error}}\n        </p>\n        <p class="retry-options">\n          <a ng-click="initiateUpload()">Retry Upload</a>\n          <a ng-click="onClickFailureCancel()">Cancel</a>\n        </p>\x3c!--/error-message-area--\x3e\n      </div>\n    </div>\x3c!--/result-area--\x3e\n  </div>\x3c!--/upload-area--\x3e\n</div>\n')}]),angular.module("common/grade-icon/grade-icon.tpl.html",[]).run(["$templateCache",function(t){t.put("common/grade-icon/grade-icon.tpl.html",'<div class="grade-icon">\n  <span\n    class="grade-icon"\n'+"    ng-class=\"{colorful: colorful, 'grade-0': grade == 0, 'grade-1': grade == 1, 'grade-2': grade == 2, 'grade-3': grade == 3}\"\n    tooltip=\"{{gradeText(grade)}}\">\n    {{gradeLetter(grade)}}\n  </span>\n</div>\n")}]),angular.module("common/header/header.tpl.html",[]).run(["$templateCache",function(t){t.put("common/header/header.tpl.html",'<nav class="navbar navbar-default" role="navigation">\n  \x3c!-- Brand and toggle get grouped for better mobile display --\x3e\n  <div class="navbar-header">\n      <button type="button" class="navbar-toggle" ng-init="navCollapsed = true" ng-click="navCollapsed = !navCollapsed">\n        <span class="sr-only">Toggle navigation</span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n  </div>\n  \x3c!-- Collect the nav links, forms, and other content for toggling --\x3e\n  <div class="collapse navbar-collapse" ng-class="!navCollapsed && \'in\'" ng-show="!navCollapsed">\n    <ul class="nav navbar-nav navbar-left">\n      <ul class="breadcrumb">\n        <li>\n          <a class="home" ui-sref="home">\n            <i class="logo"></i>\n          </a>\n        </li>\x3c!--/home--\x3e\n        <li>\n          <div class="btn-group" dropdown>\n            <button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle>\n              <label class="label label-unit" ng-if="unit">\n                <span ng-bind="unit.code"></span>\n              </label>\n              <span class="unit-name" ng-bind="unit.name" ng-if="unit"></span>\n              <span class="unit-name" ng-if="!unit">Select Unit</span>\n              <span class="caret"></span>\n            </button>\n            <unit-dropdown></unit-dropdown>\n          </div>\n        </li>\x3c!--/selected-unit--\x3e\n        <li ng-if="task && tutor">\n          <div class="btn-group" dropdown>\n            <button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle>\n              <span>Staff Tasks</span>\n              <span class="caret"></span>\n            </button>\n            <ul class="dropdown-menu dropdown-tasks" dropdown-menu>\n              <li>\n                <a ui-sref="units/tasks/inbox({unitId: project.unit_id})">Task Inbox</a>\n              </li>\n              <li>\n                <a ui-sref="units/tasks/feedback({unitId: project.unit_id})">Give Student Feedback</a>\n              </li>\n              <li>\n                <a ui-sref="units/tasks/definition({unitId: project.unit_id})">Mark By Definition</a>\n              </li>\n              <li>\n                <a ui-sref="units/tasks/offline({unitId: project.unit_id})">Mark Tasks Offline</a>\n              </li>\n              <li>\n                <a ui-sref="units/tasks/viewer({unitId: project.unit_id})">Task List</a>\n              </li>\n              <li class="divider"></li>\x3c!--/task-related--\x3e\n              <li>\n                <a ui-sref="units/students/list({unitId: project.unit_id})">Student List</a>\n              </li>\n              <li>\n                <a ui-sref="units/students/groups({unitId: project.unit_id})">Student Groups</a>\n              </li>\n              <li>\n                <a ui-sref="units/students/plagiarism({unitId: project.unit_id})">Student Plagiarism</a>\n              </li>\n              <li>\n                <a ui-sref="units/students/portfolios({unitId: project.unit_id})">Student Portfolios</a>\n              </li>\n              <li class="divider"></li>\x3c!--/student-related--\x3e\n              <li>\n                <a ui-sref="units/analytics({unitId: project.unit_id})">Unit Analytics</a>\n              </li>\n            </ul>\x3c!--/teaching-tasks--\x3e\n          <div>\n        </li>\n        <li ng-if="task" ng-if="tutor">\n          <div class="btn-group" dropdown>\n            <button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle>\n              <span ng-bind="task"></span>\n              <span class="caret"></span>\n            </button>\n            <ul class="dropdown-menu dropdown-tasks" dropdown-menu ng-if="project">\n              <li>\n                <a ui-sref="projects/dashboard({projectId: project.project_id, taskAbbr:\'\'})">Dashboard</a>\n              </li>\n              <li class="divider"></li>\n              <li>\n                <a ui-sref="projects/outcomes({projectId: project.project_id})">Learning Outcomes</a>\n              </li>\n              <li>\n                <a ui-sref="projects/portfolio({projectId: project.project_id})">Portfolio Creation</a>\n              </li>\n              <li class="divider"></li>\n              <li>\n                <a ui-sref="projects/groups({projectId: project.project_id})">Groups List</a>\n              </li>\n              <li>\n                <a ui-sref="projects/tutorials({projectId: project.project_id})">Tutorial List</a>\n              </li>\n            </ul>\x3c!--/student-tasks--\x3e\n            <ul class="dropdown-menu dropdown-tasks" dropdown-menu ng-if="unitRole">\n              <li>\n                <a ui-sref="units/tasks/inbox({unitId: unitRole.unit_id})" ng-if="unitRole.role != \'Admin\'">Task Inbox</a>\n              </li>\n              <li>\n                <a ui-sref="units/tasks/feedback({unitId: unitRole.unit_id})" ng-if="unitRole.role != \'Admin\'">Give Student Feedback</a>\n              </li>\n              <li>\n                <a ui-sref="units/tasks/definition({unitId: unitRole.unit_id})" ng-if="unitRole.role != \'Admin\'">Mark By Definition</a>\n              </li>\n              <li>\n                <a ui-sref="units/tasks/offline({unitId: unitRole.unit_id})" ng-if="unitRole.role != \'Admin\'">Mark Tasks Offline</a>\n              </li>\n              <li>\n                <a ui-sref="units/tasks/viewer({unitId: unitRole.unit_id})" ng-if="unitRole.role != \'Admin\'">Task List</a>\n              </li>\n              <li class="divider" ng-if="unitRole.role != \'Admin\'"></li>\x3c!--/task-related--\x3e\n              <li>\n                <a ui-sref="units/students/list({unitId: unitRole.unit_id})" ng-if="unitRole.role != \'Admin\'">Student List</a>\n              </li>\n              <li>\n                <a ui-sref="units/students/groups({unitId: unitRole.unit_id})" ng-if="unitRole.role != \'Admin\'">Student Groups</a>\n              </li>\n              <li>\n                <a ui-sref="units/students/plagiarism({unitId: unitRole.unit_id})" ng-if="unitRole.role != \'Admin\'">Student Plagiarism</a>\n              </li>\n              <li>\n                <a ui-sref="units/students/portfolios({unitId: unitRole.unit_id})" ng-if="unitRole.role != \'Admin\'">Student Portfolios</a>\n              </li>\n              <li class="divider" ng-if="unitRole.role != \'Admin\'"></li>\x3c!--/student-related--\x3e\n              <li>\n                <a ui-sref="units/analytics({unitId: unitRole.unit_id})" ng-if="unitRole.role != \'Admin\'">Unit Analytics</a>\n              </li>\n              <li ng-if="unitRole.role == \'Convenor\' || unitRole.role == \'Admin\'">\n                <a ui-sref="units/admin({unitId: unitRole.unit_id})">Unit Administration</a>\n              </li>\n            </ul>\x3c!--/teaching-tasks--\x3e\n          </div>\n        </li>\x3c!--/task-dropdown--\x3e\n      </ul>\x3c!--breadcrumbs--\x3e\n    </ul>\x3c!--/nav-left--\x3e\n    <ul class="nav navbar-nav navbar-right">\n      <li class="dropdown" dropdown if-role="Admin Convenor">\n        <a class="dropdown-toggle" dropdown-toggle><span class="glyphicon glyphicon-wrench"></span> Administration<b class="caret"></b></a>\n        <ul class="dropdown-menu">\n          <li><a ui-sref="admin/teachingperiods" if-role="Admin">Manage Teaching Periods</a></li>\n          <li><a ui-sref="admin/units">Manage Units</a></li>\n          <li><a ui-sref="admin/users">Manage Users</a></li>\n        </ul>\n      </li>\x3c!--/administration--\x3e\n      <li class="dropdown" dropdown>\n        <a class="dropdown-toggle dropdown-user" dropdown-toggle>\n          <user-icon size="25"></user-icon>\n          {{currentUser.name}} {{currentUser.nickname ? \'(\' + currentUser.nickname + \')\' : \'\'}}\n          <i class="caret"></i>\n        </a>\n        <ul class="dropdown-menu">\n          <li><a ng-click="openUserSettings()">Profile</a></li>\n          <li><a ng-click="openNotificationSettings()">Notifications</a></li>\n          <li class="divider"></li>\n          <li><a ng-click="openAboutModal()">About</a></li>\n          <li class="divider"></li>\n          <li><a ui-sref="sign_out">Sign Out</a></li>\n        </ul>\n      </li>\x3c!--/current-user--\x3e\n    </ul>\x3c!--/navbar-right--\x3e\n  </div>\x3c!--/navbar-collapse--\x3e\n</nav>\n')}]),angular.module("common/header/unit-dropdown/unit-dropdown.tpl.html",[]).run(["$templateCache",function(t){t.put("common/header/unit-dropdown/unit-dropdown.tpl.html",'<ul class="dropdown-menu dropdown-units" dropdown-menu>\n  <li ng-hide="filteredUnitRoles.length == 0" class="dropdown-header">Units You Teach {{filteredUnitRoles.length}}</li>\n  <li ng-repeat="unitRole in filteredUnitRoles = (unitRoles | isActiveUnitRole) | filter:isUniqueUnitRole " ng-if="unitRole.teachingPeriod() && unitRole.teachingPeriod().active()">\n    <a ui-sref="units/tasks/inbox({ unitId: unitRole.unit_id })">\n        <small class="unit-info">\n          <label class="label label-unit small">{{unitRole.unit_code}}</label>\n          <small class="text-muted">{{showDate(unitRole.start_date)}}</small>\n        </small>\n        <span class="unit-name">{{unitRole.unit_name}}</span>\n    </a>\n  </li>\n  <li ng-repeat="unitRole in filteredUnitRoles = (unitRoles | isActiveUnitRole) | filter:isUniqueUnitRole " ng-if="!unitRole.teachingPeriod()">\n    <a ui-sref="units/tasks/inbox({ unitId: unitRole.unit_id })">\n        <small class="unit-info">\n          <label class="label label-unit small">{{unitRole.unit_code}}</label>\n          <small class="text-muted">{{showDate(unitRole.start_date)}}</small>\n        </small>\n        <span class="unit-name">{{unitRole.unit_name}}</span>\n    </a>\n  </li>\n  <li ng-hide="filteredUnitRoles.length == 0 || projects.length == 0" class="divider"></li>\n  <li ng-hide="projects.length == 0" class="dropdown-header" ng-hide="{{projects.length}}">Units You Study</li>\n  <li ng-repeat="project in projects" ng-if="project.teachingPeriod() && project.teachingPeriod().active()">\n    <a ui-sref="projects/dashboard({ projectId: project.project_id, taskAbbr:\'\' })">\n      <small class="unit-info">\n        <label class="label label-unit small">{{project.unit_code}}</label>\n        <small class="text-muted">{{showDate(project.start_date)}}</small>\n      </small>\n      <span class="unit-name">{{project.unit_name}}</span>\n    </a>\n  </li>\n  <li ng-repeat="project in projects" ng-if="!project.teachingPeriod()">\n    <a ui-sref="projects/dashboard({ projectId: project.project_id, taskAbbr:\'\' })">\n      <small class="unit-info">\n        <label class="label label-unit small">{{project.unit_code}}</label>\n        <small class="text-muted">{{showDate(project.start_date)}}</small>\n      </small>\n      <span class="unit-name">{{project.unit_name}}</span>\n    </a>\n  </li>\n</ul>\n')}]),angular.module("common/modals/about-doubtfire-modal/about-doubtfire-modal-content.tpl.html",[]).run(["$templateCache",function(t){t.put("common/modals/about-doubtfire-modal/about-doubtfire-modal-content.tpl.html",'<mat-dialog-content class="mat-typography">\n  <div class="modal-header">\n    <i class="logo"></i>\n    <h1 class="full logo">\n      {{data.externalName}}\n      <small [hidden]="data.externalName == \'Doubtfire\'">\n        Powered By Doubtfire\n      </small>\n      <small [hidden]="data.externalName != \'Doubtfire\'">\n        Version 5\n      </small>\n    </h1>\n  </div>\n  <div class="modal-body">\n    <h2>Main Contributors</h2>\n    <ul>\n      <li *ngFor="let person of data.contributors">\n        <a target="_blank" [href]="person.html_url">\n          <img [src]="person.avatar_url">\n          <div class="name">{{person.name}}</div>\n          <div class="handler">@{{person.login}}</div>\n        </a>\n      </li>\n    </ul>\n    <p class="text-muted text-center">\n      &copy; 2012&ndash;2018. Made in Melbourne.\n    </p>\n    <p class="text-muted text-center logo-smallprint">\n      Doubtfire is an <a href="http://github.com/doubtfire-lms">Open Source</a> project licensed under <strong>GNU\n        Affero General Public License (AGPL) v3.0</strong>. Star us on <a\n        href="http://github.com/doubtfire-lms/doubtfire-web">GitHub</a>!\n      <br>\n      The Doubtfire Logo adapted under Creative Commons from "Progress" by Creative Stall from the <a\n        href="https://thenounproject.com/search/?q=progress&i=175994">Noun Project</a>.\n    </p>\n  </div>\n</mat-dialog-content>\n<mat-dialog-actions align="end">\n  <button mat-stroked-button mat-dialog-close>Close</button>\n</mat-dialog-actions>\n')}]),angular.module("common/modals/comments-modal/comments-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("common/modals/comments-modal/comments-modal.tpl.html",'<div class="modal-comment">\n  <div class="modal-body">\n    <div ng-if="commentType == \'image\'">\n      <a href="{{commentResourceUrl}}" target="_blank">\n        <img class="image-comment" ng-src="{{commentResourceUrl}}"></img>\n      </a>\n    </div>\n    <div ng-if="commentType == \'pdf\'">\n      <iframe class="pdf-comment" ng-src="{{commentResourceUrl}}" type="application/pdf" />\n    </div>\n  </div>\n</div>\n')}]),angular.module("common/modals/confirmation-modal/confirmation-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("common/modals/confirmation-modal/confirmation-modal.tpl.html",'<div class="confirmation-modal">\n  <div class="modal-header clearfix">\n    <h3 class="modal-title">\n      <i class="fa fa-question-circle fa-2x pull-left"></i>\n      <div>{{title}}</div>\n      <small>Please confirm that you want to perform this action.</small>\n    </h3>\n  </div>\n  <div class="modal-body">\n    {{message}}\n  </div>\n  <div class="modal-footer clearfix">\n    <div class="btn-group">\n      <label class="btn btn-success" ng-click="confirmAction()">\n        <i class="fa fa-check"></i> Confirm\n      </label>\n      <label class="btn btn-danger" ng-click="cancelAction()">\n        <i class="fa fa-times"></i> Cancel\n      </label>\n    </div>\n  </div>\n</div>\n')}]),angular.module("common/modals/csv-result-modal/csv-result-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("common/modals/csv-result-modal/csv-result-modal.tpl.html",'<div class="csv-result-modal">\n  <div class="modal-header clearfix">\n    <h3 class="modal-title">\n      <i class="fa fa-file-excel-o fa-2x pull-left"></i>\n      {{title}}\n      <small>Response details</small>\n    </h3>\n  </div>\n  <div class="modal-body clearfix">\n    <p class="btn-group col-sm-8 col-sm-offset-2">\n        <button class="btn btn-default col-sm-4" ng-class="{ \'btn-success\': activeCsvResponseSelection == \'success\' }" ng-model="activeCsvResponseSelection" btn-radio="\'success\'">\n          Success <span class="badge pull-right">{{response.success.length}}</span>\n        </button>\n        <button class="btn btn-default col-sm-4" ng-class="{ \'btn-danger\': activeCsvResponseSelection == \'errors\' }" ng-model="activeCsvResponseSelection" btn-radio="\'errors\'">\n          Errors <span class="badge pull-right">{{response.errors.length}}</span>\n        </button>\n        <button class="btn btn-default col-sm-4" ng-class="{ \'btn-warning\': activeCsvResponseSelection == \'ignored\' }" ng-model="activeCsvResponseSelection" btn-radio="\'ignored\'">\n          Ignored <span class="badge pull-right">{{response.ignored.length}}</span>\n        </button>\n    </p>\n    <div ng-hide="response[activeCsvResponseSelection].length > 0" class="callout callout-info col-sm-12">\n      No data to show\n    </div>\n    <table ng-show="response[activeCsvResponseSelection].length > 0" class="table table-condensed table-hover">\n      <thead>\n          <tr>\n              <th class="message">\n                  Message\n              </th>\n              <th class="data">\n                  Data\n              </th>\n          </tr>\n      </thead>\n      <tbody>\n          <tr ng-repeat="item in response[activeCsvResponseSelection] | startFrom:(currentPage - 1) * pageSize | limitTo: pageSize">\n              <td>\n                {{item.message}}\n              </td>\n              <td class="csv-row">\n                {{item.row}}\n              </td>\n          </tr>\n      </tbody>\n  </table>\x3c!--/enrolment-table--\x3e\n  </div>\n  <div class="modal-footer clearfix">\n    <pagination ng-show="response[activeCsvResponseSelection].length > pageSize" total-items="response[activeCsvResponseSelection].length" ng-model="currentPage" items-per-page="pageSize" max-size="maxSize" class="pagination-sm pull-left" boundary-links="true" rotate="false"></pagination>\n    <button class="btn btn-primary pull-right" ng-click="close()">Done</button>\n  </div>\n</div>')}]),angular.module("common/modals/progress-modal/progress-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("common/modals/progress-modal/progress-modal.tpl.html",'<div class="progress-modal">\n  <div class="modal-header clearfix">\n    <h3 class="modal-title">\n      <i class="fa fa-spinner fa-2x pull-left"></i>\n      <div>{{title}}</div>\n      <small>{{message}}</small>\n    </h3>\n  </div>\n  <div class="modal-body">\n    <div class="large-notice-block">\n      <i class="fa fa-3x fa-spinner fa-pulse"></i>\n      <p>Processing...</p>\n    </div>\n  </div>\n  <div class="modal-footer clearfix">\n    <p class="help-block col-sm-6 col-sm-offset-3 text-center">\n      You can close this modal and you will be alerted when processing has finished\n    </p>\n    <button class="btn btn-primary pull-right" ng-click="close()">\n      <i class="fa fa-check"></i>\n    </button>\n  </div>\n</div>\n')}]),angular.module("common/pdf-panel-viewer/pdf-panel-viewer.tpl.html",[]).run(["$templateCache",function(t){t.put("common/pdf-panel-viewer/pdf-panel-viewer.tpl.html",'<div class="pdf-panel-viewer">\n    <div class="panel-body">\n        <pdf-viewer ng-if="showViewer" pdf-url="pdfUrl"></pdf-viewer>\n    </div>\n    \x3c!--/panel-body--\x3e\n    <div class="panel-footer" ng-if="!hideFooter">\n        <div class="pull-left text-muted" ng-show="footerText">\n            <strong>Note:</strong> {{footerText}}\n        </div>\n        <div class="pull-right btn-group">\n            <a ng-click="downloadEvent(\'Resources\')" ng-href="{{resourcesUrl}}" class="btn btn-primary" ng-if="resourcesUrl">\n            <i class="fa fa-download"></i><span> Resources</span>\n        </a>\n            <a ng-click="downloadEvent(\'PDF\')" ng-href="{{pdfUrl}}&as_attachment=true" class="btn btn-success">\n            <i class="fa fa-download"></i><span ng-show="resourcesUrl"> PDF</span>\n        </a>\n        </div>\n    </div>\n    \x3c!--/panel-footer--\x3e\n</div>\n')}]),angular.module("common/pdf-viewer/pdf-viewer.tpl.html",[]).run(["$templateCache",function(t){t.put("common/pdf-viewer/pdf-viewer.tpl.html","<object type='application/pdf' ng-attr-data='{{pdfUrl}}'></object>")}]),angular.module("common/status-icon/status-icon.tpl.html",[]).run(["$templateCache",function(t){t.put("common/status-icon/status-icon.tpl.html",'<div class="status-icon-bubble {{statusClass(status)}}">\n  <i class="fa {{statusIcon(status)}}" tooltip-enable="{{showTooltip}}" tooltip="{{statusLabel(status)}}" tooltip-append-to-body="true"></i>\n</div>\n')}]),angular.module("common/user-icon/user-icon.tpl.html",[]).run(["$templateCache",function(t){t.put("common/user-icon/user-icon.tpl.html",'<div class="user-icon">\n  <div class="user-icon-wrapper user-icon-gravatar" style="{{userBackgroundStyle(email)}}"></div>\n  <div class="user-icon-wrapper user-icon-initials" ng-bind="initials"></div>\n</div>\n')}]),angular.module("errors/states/not-found/not-found.tpl.html",[]).run(["$templateCache",function(t){t.put("errors/states/not-found/not-found.tpl.html",'<div class="container text-center">\n  <div class="error-container">\n    <i class="fa fa-question-circle"></i>\n    <h1>Not Found</h1>\n    <p>This page doesn\'t exist.</p>\n  </div>\n</div>')}]),angular.module("errors/states/timeout/timeout.tpl.html",[]).run(["$templateCache",function(t){t.put("errors/states/timeout/timeout.tpl.html",'<div class="container text-center">\n  <div class="error-container">\n    <i class="fa fa-clock-o"></i>\n    <h1>Authentication Timeout</h1>\n    <p>Your session has expired and you need to log back in to proceed.</p>\n  </div>\n</div>\n')}]),angular.module("errors/states/unauthorised/unauthorised.tpl.html",[]).run(["$templateCache",function(t){t.put("errors/states/unauthorised/unauthorised.tpl.html",'<div class="container text-center">\n  <div class="error-container">\n    <i class="fa fa-exclamation-triangle"></i>\n    <h1>Unauthorised</h1>\n    <p>You do not have sufficient permissions to access this resource, or your session has expired.</p>\n  </div>\n</div>')}]),angular.module("groups/group-member-contribution-assigner/group-member-contribution-assigner.tpl.html",[]).run(["$templateCache",function(t){t.put("groups/group-member-contribution-assigner/group-member-contribution-assigner.tpl.html",'<div class="group-member-contribution-assigner">\n  <table class="table table-condensed table-hover">\n    <thead>\n      <tr>\n        <th><a ng-click="memberSortOrder=\'student_name\'; reverse=!reverse">Team Member</a></th>\n        <th><a ng-click="memberSortOrder=\'target_grade\'; reverse=!reverse">Target Grade</a></th>\n        <th class="col-sm-4"><a ng-click="memberSortOrder=\'rating\'; reverse=!reverse">Contribution</a></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="member in team.members | orderBy:memberSortOrder:reverse">\n        <td>{{member.student_name}}</td>\n        <td class="text-left">\n          <grade-icon grade="member.target_grade"></grade-icon>\n        </td>\n        <td>\n          <rating\n            class="group-member-contribution-rating"\n            ng-click="checkClearRating(member)"\n            ng-model="member.rating"\n            on-hover="hoveringOver(member, value)"\n            on-leave="hoveringOver(member, null)"\n            max="numStars"\n            state-on="\'fa fa-child rating-outline\'"\n            state-off="\'fa fa-child rating-disabled\'">\n          </rating>\n          <span\n            class="label {{percentClass(member.percent)}}"\n            ng-show="member.overStar">\n            <span ng-show="member.percent > 0">\n              {{member.percent}} % effort\n            </span>\n            <span ng-hide="member.percent > 0">\n              No effort\n            </span>\n          </span>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n')}]),angular.module("groups/group-member-list/group-member-list.tpl.html",[]).run(["$templateCache",function(t){t.put("groups/group-member-list/group-member-list.tpl.html",'<div class="panel-body panel-loading" ng-hide="loaded">\n  <i class="fa fa-spinner fa-pulse"></i> Loading Members...\n</div>\x3c!--/loading--\x3e\n<div class="panel-body" ng-show="loaded && selectedGroup.members.length == 0">\n  <div class="callout callout-primary">\n    <h4>No members in group</h4>\n    <p>There are no members in this group</p>\n  </div>\n</div>\x3c!--no-members--\x3e\n<table ng-show="loaded && selectedGroup.members.length > 0" class="table table-condensed table-hover table-pointer">\n  <thead>\n    <tr>\n      <th>\n        <a ng-click="sortTableBy(\'student_id\')">\n          Student ID\n          <i ng-show="tableSort.order == \'student_id\'" class="fa fa-caret-{{tableSort.reverse ? \'up\' : \'down\'}}"></i>\n        </a>\n      </th>\n      <th>\n        <a ng-click="sortTableBy(\'student_name\')">\n          Name\n          <i ng-show="tableSort.order == \'student_name\'" class="fa fa-caret-{{tableSort.reverse ? \'up\' : \'down\'}}"></i>\n        </a>\n      </th>\n      <th>\n        <a ng-click="sortTableBy(\'target_grade\')">\n          Target Grade\n          <i ng-show="tableSort.order == \'target_grade\'" class="fa fa-caret-{{tableSort.reverse ? \'up\' : \'down\'}}"></i>\n        </a>\n      </th>\n      <th ng-if="canRemoveMembers">\n        Actions\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="member in selectedGroup.members | orderBy:tableSort.order:tableSort.reverse">\n      <td class="student-id">{{member.student_id || "N/A"}}</td>\n      <td class="student-name">{{member.student_name}}</td>\n      <td class="student-grade text-left">\n        <grade-icon grade="member.target_grade"></grade-icon>\n      </td>\n      <td class="actions" ng-if="canRemoveMembers">\n        <button ng-click="removeMember(member)" class="btn btn-sm btn-danger">\n          <i class="fa fa-minus"></i>\n          <span ng-hide="member.project_id == project.project_id">Kick</span>\n          <span ng-show="member.project_id == project.project_id">Leave</span>\n        </button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("groups/group-selector/group-selector.tpl.html",[]).run(["$templateCache",function(t){t.put("groups/group-selector/group-selector.tpl.html",'<div class="panel-heading">\n  <h4 class="panel-title">\n    Groups in\n    <strong ng-hide="showGroupSetSelector">\n      {{selectedGroupSet.name}}\n    </strong>\n    <group-set-selector\n      ng-show="showGroupSetSelector"\n      unit="unit"\n      ng-model="selectedGroupSet"\n      on-change="selectGroupSet">\n    </group-set-selector>\n  </h4>\n</div>\x3c!--/panel-heading--\x3e\n<div class="panel-body panel-toolbar" ng-show="loaded && canCreateGroups">\n  <div class="clearfix">\n    <div class="input-group pull-left col-md-6 staff-filter" ng-if="unitRole">\n      <div class="btn-group">\n        <label class="btn btn-default col-sm-6" ng-model="staffFilter" ng-change="onChangeStaffFilter()" btn-radio="\'all\'">\n          <i class="fa fa-university"></i> All Tutorials\n        </label>\n        <label class="btn btn-default col-sm-6" ng-model="staffFilter" ng-change="onChangeStaffFilter()" btn-radio="\'mine\'">\n          <i class="fa fa-pencil"></i> My Tutorials\n        </label>\n      </div>\n    </div>\x3c!--/staff-filter-button-group--\x3e\n    <form name="newGroupForm" class="input-group pull-right col-md-6" ng-if="canCreateGroups" ng-submit="addGroup(newGroupName)">\n      <input class="form-control" placeholder="{{newGroupNamePlaceholder}}" ng-model="newGroupName">\n      <span class="input-group-btn">\n        <button type="submit" class="btn btn-success">\n          <i class="fa fa-plus"></i> Create Group\n        </button>\n      </span>\n    </form>\x3c!--/group-name-create--\x3e\n  </div>\n</div>\x3c!--/creation-options--\x3e\n<div class="panel-body panel-loading" ng-show="!loaded">\n  <i class="fa fa-spinner fa-pulse"></i> Loading Groups...\n</div>\x3c!--/loading-spinner--\x3e\n<div class="panel-body" ng-show="loaded && filteredGroups.length == 0">\n  <div class="callout callout-primary row">\n    <h4>No Groups To Show</h4>\n    <p>\n      The <strong>{{selectedGroupSet.name}}</strong> group set has no groups{{staffFilter == \'mine\' || selectedGroupSet.keep_groups_in_same_class ? " in your tutorials." : "."}}\n    </p>\n  </div>\n</div>\x3c!--/no-groups--\x3e\n<table ng-show="loaded && filteredGroups.length > 0" class="table table-condensed table-hover table-pointer">\n  <thead>\n    <tr>\n      <th class="number">\n        <a ng-click="sortTableBy(\'number\')">\n          Number <i ng-show="tableSort.order == \'number\'" class="fa fa-caret-{{tableSort.reverse ? \'up\' : \'down\'}}"></i>\n        </a>\n      </th>\n      <th class="name">\n        <a ng-click="sortTableBy(\'name\')">\n          Name <i ng-show="tableSort.order == \'name\'" class="fa fa-caret-{{tableSort.reverse ? \'up\' : \'down\'}}"></i>\n        </a>\n      </th>\n      <th class="tutorial">\n        <a ng-click="sortTableBy(\'tutorial_id\')">\n          Tutorial <i ng-show="tableSort.order == \'tutorial_id\'" class="fa fa-caret-{{tableSort.reverse ? \'up\' : \'down\'}}"></i>\n        </a>\n      </th>\n      <th class="actions" ng-show="(project && selectedGroupSet.allow_students_to_manage_groups) || unitRole">\n        Actions\n      </th>\n    </tr>\n  </thead>\x3c!--/header--\x3e\n  <tbody>\n    <tr\n      ng-class="{info: group == selectedGroup}"\n      ng-repeat="group in filteredGroups">\n      <th ng-click="selectGroup(group)">\n        {{ group.number }}\n      </th>\x3c!--/group-number--\x3e\n      <th ng-click="selectGroup(group)">\n        <span\n          editable-text="group.name"\n          e-name="name"\n          e-form="groupRowForm"\n          e-required>\n          {{ group.name || \'Not Set\' }}\n        </span>\n      </th>\x3c!--/group-name--\x3e\n      <td ng-click="selectGroup(group)">\n        <span\n          editable-select="group.tutorial_id"\n          e-name="tutorial_id"\n          e-form="groupRowForm"\n          e-ng-options="t.id as (t.abbreviation + \' - \' + t.description) for t in unit.tutorials | orderBy: \'abbreviation\'">\n          <span tooltip="{{group.tutorial().description}}" tooltip-popup-delay="200" tooltip-append-to-body="true">\n            {{group.tutorial().abbreviation}}\n          </span>\n        </span>\n      </td>\x3c!--/group-tutorial--\x3e\n      <td ng-show="(project && selectedGroupSet.allow_students_to_manage_groups) || unitRole">\n        <div ng-show="project">\n          <button ng-click="joinGroup(group)" ng-disabled="projectInGroup(group)" class="btn btn-success btn-sm">\n            <i class="fa fa-plus"></i> Join\n          </button>\n        </div>\n        <div ng-show="unitRole">\n          <form editable-form name="groupRowForm" onbeforesave="updateGroup($data, group.id)" ng-show="groupRowForm.$visible" shown="inserted == group">\n            <button type="submit" ng-disabled="groupRowForm.$waiting" class="btn btn-default btn-sm">\n              <i class="fa fa-floppy-o"></i> Save\n            </button>\n            <button type="button" ng-disabled="groupRowForm.$waiting" ng-click="groupRowForm.$cancel()" class="btn btn-default btn-sm">\n              <i class="fa fa-times"></i> Cancel\n            </button>\n          </form>\n          <div ng-hide="groupRowForm.$visible">\n            <button ng-click="groupRowForm.$show()" class="btn btn-default btn-sm">\n              <i class="fa fa-pencil"></i> Edit\n            </button>\n            <button ng-click="deleteGroup(group)" class="btn btn-danger btn-sm">\n              <i class="fa fa-trash-o"></i> Delete\n            </button>\n          </div>\x3c!--/actions--\x3e\n        </div>\n      </td>\n    </tr>\n  </tbody>\n</table>\n<div class="panel-footer text-center" ng-show="pagination.show">\n  <pagination\n    total-items="pagination.totalSize"\n    ng-change="pagination.onChange()"\n    ng-model="pagination.currentPage"\n    items-per-page="pagination.pageSize"\n    max-size="pagination.maxSize"\n    class="pagination-sm"\n    boundary-links="true"\n    rotate="false">\n  </pagination>\n</div>\n')}]),angular.module("groups/group-set-manager/group-set-manager.tpl.html",[]).run(["$templateCache",function(t){t.put("groups/group-set-manager/group-set-manager.tpl.html",'<group-selector\n  unit="unit"\n  unit-role="unitRole"\n  project="project"\n  selected-group="selectedGroup"\n  selected-group-set="selectedGroupSet"\n  show-group-set-selector="showGroupSetSelector"\n  on-select="newGroupSelected"\n  class="panel panel-primary">\n</group-selector>\n<div class="panel panel-default panel-group-memberships" ng-show="selectedGroup">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      Members of <a editable-text="selectedGroup.name" class="strong" ng-show="unitRole || selectedGroupSet.allow_students_to_manage_groups" onbeforesave="updateGroup($data)">{{selectedGroup.name}}</a>\n    </h4>\n  </div>\x3c!--/panel-heading--\x3e\n  <div class="panel-body panel-toolbar" ng-show="showMemberPanelToolbar">\n    <form\n      name="addMemberForm"\n      ng-submit="addMember(selectedStudent)"\n      class="input-group">\n      <input\n        type="search"\n        class="form-control"\n        placeholder="Enter student name or username..."\n        ng-model="selectedStudent"\n        typeahead-select-on-exact="true"\n        typeahead-on-select="addMember(selectedStudent)"\n        typeahead="\n          student as student.name\n          for student in unit.activeStudents() |\n          studentsForGroup:selectedGroupSet:selectedGroup:members |\n          filter:$viewValue |\n          limitTo:8"\n        typeahead-wait-ms="200"\n        typeahead-editable="false"\n        autocomplete="off">\n      <div class="input-group-btn">\n        <button type="submit" ng-disabled="!selectedStudent.project_id" class="btn btn-success">\n          <i class="fa fa-plus"></i> Add Member\n        </button>\n      </div>\n    </form>\n  </div>\x3c!--/panel-body--\x3e\n  <group-member-list\n    unit="unit"\n    unit-role="unitRole"\n    project="project"\n    selected-group="selectedGroup"\n    on-members-loaded="groupMembersLoaded">\n  </group-member-list>\n</div>\x3c!--/panel-group-memberships--\x3e\n')}]),angular.module("groups/group-set-selector/group-set-selector.tpl.html",[]).run(["$templateCache",function(t){t.put("groups/group-set-selector/group-set-selector.tpl.html",'<select\n  class="form-control"\n  ng-change="selectGroupSet()"\n  ng-options="gs as gs.name for gs in unit.group_sets track by gs.id"\n  ng-model="selectedGroupSet">\n</select>\n')}]),angular.module("groups/student-group-manager/student-group-manager.tpl.html",[]).run(["$templateCache",function(t){t.put("groups/student-group-manager/student-group-manager.tpl.html",'<div>\n\x3c!--\n  <div class="panel panel-default">\n    <div class="panel-heading">\n      <h3 class="panel-title">\n        <span ng-show="selectedGroup">\n          Group Members of\n          <strong>\n            <a editable-text="selectedGroup.name" ng-show="selectedGroupSet.allow_students_to_manage_groups" onbeforesave="updateGroup($data)">{{selectedGroup.name}}</a>\n            <span ng-hide="selectedGroupSet.allow_students_to_manage_groups">{{selectedGroup.name}}</span>\n          </strong>\n        </span>\n        <span ng-hide="selectedGroup">\n          Join a Group\n        </span>\n      </h3>\n    </div>\n    <div class="panel-body">\n      <group-member-list ng-show="selectedGroup" selected-group="selectedGroup"></group-member-list>\n        <div class="callout callout-primary" ng-hide="selectedGroupSet.allow_students_to_manage_groups">\n          <h4>You are not part of a group.</h4>\n          <p>Talk to your tutor or convenor and ask them to add you to a group.</p>\n        </div>\n      </div>\n  </div>--\x3e\n</div>\n')}]),angular.module("groups/tutor-group-manager/tutor-group-manager.tpl.html",[]).run(["$templateCache",function(t){t.put("groups/tutor-group-manager/tutor-group-manager.tpl.html",'<div class="groupset-switcher" ng-show="unit.group_sets.length > 1">\n    <groupset-selector></groupset-selector>\n    <hr/>\n  </div>\n<div class="row">\n  <groupset-group-manager></groupset-group-manager>\n</div>\n')}]),angular.module("home/states/home/home.tpl.html",[]).run(["$templateCache",function(t){t.put("home/states/home/home.tpl.html",'<div id="home">\n  <div class="text-center" ng-show="notEnrolled()">\n    <h1>\n      You are not enrolled in {{externalName.value}}.\n    </h1>\n    <p class="lead">\n      Contact your unit convenor or tutor to enrol you in a subject.\n    </p>\n  </div>\n  <div class="cards" ng-hide="notEntrolled()">\n    <div class="card card-primary" if-role="Tutor Convenor Admin" >\n      <div class="card-heading">\n        <h4>Units You Teach</h4>\n      </div>\n      \x3c!-- Units with a teaching period should be listed first --\x3e\n      <div class="list-group" ng-show="filteredUnitRoles.length > 0">\n        \x3c!-- For units with a teaching period --\x3e\n        <a ng-repeat="unitRole in filteredUnitRoles = (unitRoles | isActiveUnitRole)" ui-sref="units/tasks/inbox({unitId: unitRole.unit_id})" class="list-group-item" ng-if="unitRole.teachingPeriod() && unitRole.teachingPeriod().active()">\n          <header>\n            {{unitRole.unit_name}}\n          </header>\n          <p>\n            <label class="label label-default">{{unitRole.teachingPeriod().name()}}</label>\n            <label class="label label-info">{{unitRole.unit_code}}</label>\n            <label class="label label-primary">{{unitRole.role}}</label>\n          </p>\n        </a>\n        \x3c!-- For units without a teaching period --\x3e\n        <a ng-repeat="unitRole in filteredUnitRoles = (unitRoles | isActiveUnitRole)" ui-sref="units/tasks/inbox({unitId: unitRole.unit_id})" class="list-group-item" ng-if="!unitRole.teachingPeriod()">\n          <header>\n            {{unitRole.unit_name}}\n          </header>\n          <p>\n            <label class="label label-default">{{showDate(unitRole.start_date)}}</label>\n            <label class="label label-info">{{unitRole.unit_code}}</label>\n            <label class="label label-primary">{{unitRole.role}}</label>\n          </p>\n        </a>\n      </div>\n      <div class="list-group">\n        <a class="list-group-item text-right" ui-sref="view-all-units">\n          View All\n          <span class="glyphicon glyphicon-share-alt"></span>\n        </a>\n      </div>\n      <div class="card-body" ng-hide="filteredUnitRoles.length > 0">\n        You do not teach any active units\n      </div>\n    </div>\x3c!--/units-taught--\x3e\n    <div class="card card-primary" ng-show="projects.length > 0">\n      <div class="card-heading">\n        <h4>Units You Study</h4>\n      </div>\n      \x3c!-- Units with a teaching period should be listed first --\x3e\n      <div class="list-group">\n        \x3c!-- For units with a teaching period --\x3e\n        <a ng-repeat="project in projects" ui-sref=\'projects/dashboard({projectId: project.project_id, taskAbbr: ""})\' class="list-group-item" ng-if="project.teachingPeriod() && project.teachingPeriod().active()">\n          <header>\n            {{project.unit_name}}\n          </header>\n          <p>\n            <label class="label label-default">{{project.teachingPeriod().name()}}</label>\n            <label class="label label-info">{{project.unit_code}}</label>\n          </p>\n        </a>\n        \x3c!-- For units without a teaching period --\x3e\n        <a ng-repeat="project in projects" ui-sref=\'projects/dashboard({projectId: project.project_id, taskAbbr: ""})\' class="list-group-item" ng-if="!project.teachingPeriod()">\n          <header>\n            {{project.unit_name}}\n          </header>\n          <p>\n            <label class="label label-default">{{showDate(project.start_date)}}</label>\n            <label class="label label-info">{{project.unit_code}}</label>\n          </p>\n        </a>\n      </div>\n      <div class="list-group">\n        <a class="list-group-item text-right" ui-sref="view-all-projects">\n          View All\n          <span class="glyphicon glyphicon-share-alt"></span>\n        </a>\n      </div>\n    </div>\x3c!--/units-taught--\x3e\n    <div class="card card-primary" if-role="Admin Convenor">\n      <div class="card-heading">\n        <h4>Administration</h4>\n      </div>\n      <div class="list-group">\n        <a class="list-group-item" ui-sref="admin/teachingperiods" if-role="Admin">\n          <header>\n            Administer Teaching Period\n          </header>\n          <p class="text-muted">\n            Add new teaching-periods, or modify existing teaching-periods.\n          </p>\n        </a>\n        <a class="list-group-item" ui-sref="admin/units">\n          <header>\n            Administer Units\n          </header>\n          <p class="text-muted">\n            Add new units, or modify existing units you have convenor access to.\n          </p>\n        </a>\n        <a class="list-group-item" ui-sref="admin/users">\n          <header>\n            Administer Users\n          </header>\n          <p class="text-muted">\n            Add, modify or remove existing users.\n          </p>\n        </a>\n      </div>\x3c!--/admin--\x3e\n    </div>\n  </div>\n  <div class="spinner" ng-hide="dataLoaded">\n    <i class="fa fa-pulse fa-4x fa-spinner" ng-show="showSpinner"></i>\n  </div>\n</div>\n')}]),angular.module("home/states/new-user-wizard/new-user-wizard.tpl.html",[]).run(["$templateCache",function(t){t.put("home/states/new-user-wizard/new-user-wizard.tpl.html",'<div class="new-user-wizard">\n  <div class="text-center welcome-to-doubtfire clearfix col-sm-12">\n    <i class="logo"></i>\n    <h1>Welcome to {{externalName.value}}</h1>\n    <p class="lead">To get you up and running, let us ask you a few questions</p>\n  </div>\n  <div class="new-user-wizard clearfix col-sm-12 col-md-6 col-md-offset-3">\n    <div class="panel panel-primary text-center">\n      <div class="panel-heading">\n        <h3 class="panel-title">{{currentStep.title}}</h3>\n      </div>\n      <div class="panel-body">\n        <p class="strong">{{currentStep.subtitle}}</p>\n        <div ng-show="currentStep == steps.nameStep" class="col-sm-12">\n          <div class="form-group col-sm-6">\n            <input class="form-control text-center input-lg" placeholder="First Name" ng-model="user.first_name">\n          </div>\n          <div class="form-group col-sm-6">\n            <input class="form-control text-center input-lg" placeholder="Last Name"  ng-model="user.last_name">\n          </div>\n        </div>\x3c!--/name-step--\x3e\n        <div ng-show="currentStep == steps.nicknameStep">\n          <input class="form-control text-center input-lg" placeholder="Nickname or Preferred Name"  ng-model="user.nickname">\n          <p class="help-block col-sm-12 text-center">You can choose to leave this blank</p>\n        </div>\x3c!--/nickname-step--\x3e\n        <div ng-show="currentStep == steps.studentIdStep">\n          <input class="form-control text-center input-lg" placeholder="Student ID" ng-model="user.student_id">\n        </div>\x3c!--/student-id-step--\x3e\n        <div ng-show="currentStep == steps.avatarStep">\n          <user-icon size="60" style="width: 60px; height: 60px; font-size: 2em"></user-icon>\n          <p style="margin-top: 1.5em;">\n            <a href="http://en.gravatar.com/support/activating-your-account/" target="_blank" class="btn btn-lg btn-default">Change Avatar</a>\n          </p>\n          <p class="help-block">\n            Once you set your avatar on Gravatar, it will automatically be updated when you next login. If you are creating a new\n            Gravatar account, be sure to sign up using <strong>{{user.email}}</strong>.\n          </p>\n        </div>\x3c!--/avatar-step--\x3e\n        <div ng-show="currentStep == steps.emailStep">\n          <div class="form-group">\n            <input class="form-control input-lg text-center" placeholder="Email Address"  ng-model="user.email">\n          </div>\n            <hr ng-hide="isStaff">\n            <div class="form-group clearfix" ng-hide="isStaff">\n              <div class="col-sm-12">\n                <label>Task Notifications</label>\n                <p class="help-block">\n                  Recieve email notifications when new tasks become avaliable\n                </p>\n              </div>\n              <div class="col-sm-12">\n                <div class="btn-group">\n                  <label class="btn btn-default" ng-model="user.receive_task_notifications" btn-radio="true">\n                    <i class="fa fa-check"></i>\n                  </label>\n                  <label class="btn btn-default" ng-model="user.receive_task_notifications" btn-radio="false">\n                    <i class="fa fa-close"></i>\n                  </label>\n                </div>\n              </div>\n            </div>\n            <hr>\n            <div class="form-group clearfix">\n              <div class="col-sm-12">\n                <label>Feedback Notifications</label>\n                <p class="help-block">\n                  Recieve feedback and weekly status email notifications\n                </p>\n              </div>\n              <div class="col-sm-12">\n                <div class="btn-group">\n                  <label class="btn btn-default" ng-model="user.receive_feedback_notifications" btn-radio="true">\n                    <i class="fa fa-check"></i>\n                  </label>\n                  <label class="btn btn-default" ng-model="user.receive_feedback_notifications" btn-radio="false">\n                    <i class="fa fa-close"></i>\n                  </label>\n                </div>\n              </div>\n            </div>\n            <hr  ng-hide="isStaff">\n            <div class="form-group clearfix" ng-hide="isStaff">\n              <div class="col-sm-12">\n                <label>Portfolio Notifications</label>\n                <p class="help-block">\n                  Recieve email notifications when your portfolio is ready to mark\n                </p>\n              </div>\n              <div class="col-sm-12">\n                <div class="btn-group">\n                  <label class="btn btn-default" ng-model="user.receive_portfolio_notifications" btn-radio="true">\n                    <i class="fa fa-check"></i>\n                  </label>\n                  <label class="btn btn-default" ng-model="user.receive_portfolio_notifications" btn-radio="false">\n                    <i class="fa fa-close"></i>\n                  </label>\n                </div>\n              </div>\n            </div>\n        </div>\x3c!--/email-step--\x3e\n        <div ng-show="currentStep == steps.targetGradeStep">\n          <div ng-repeat="project in projects">\n            <div class="clearfix">\n              <p>\n                Select your target grade for {{project.unit_name}}\n              </p>\n              <div class="btn-group col-sm-12">\n                <label ng-repeat="grade in grades" class="btn btn-default col-sm-3" ng-model="project.target_grade" btn-radio="{{$index}}">\n                  <grade-icon grade="grade" class="text-{{project.target_grade == grades.indexOf(grade) ? \'primary\' : \'muted\'}}"></grade-icon>\n                </label>\n              </div>\n            </div>\n            <hr>\n          </div>\n          <p class="help-block">You can change this target at any time while you are enrolled.</p>\n        </div>\x3c!--/target-grade-step--\x3e\n        <div ng-show="currentStep == steps.optInToResearchStep">\n          <div class="col-sm-12 text-center">\n            <div class="btn-group">\n              <label class="btn btn-default" ng-change="optInOnly && done(user)" ng-model="user.opt_in_to_research" btn-radio="true">\n                <i class="fa fa-check"></i> Yes, I\'ll help\n              </label>\n              <label class="btn btn-default" ng-change="optInOnly && done(user)" ng-model="user.opt_in_to_research" btn-radio="false">\n                <i class="fa fa-close"></i> No, thank you\n              </label>\n            </div>\n            <p class="help-block"> You may choose to opt-in or out later at any time. </p>\n          </div>\n        </div>\x3c!--/research-step--\x3e\n      </div>\n      <div class="panel-footer clearfix" ng-hide="optInOnly">\n        <button class="btn btn-primary pull-left" ng-click="moveStep(-1)" ng-hide="currentStep == firstStep"><i class="fa fa-arrow-left"></i> Back</button>\n        <button class="btn btn-primary pull-right" ng-click="moveStep(1)" ng-disabled="determineDisabledForCurrentStep()" ng-hide="currentStep == lastStep">Next <i class="fa fa-arrow-right"></i></button>\n        <button class="btn btn-success pull-right" ng-click="done()" ng-disabled="determineDisabledForCurrentStep()" ng-show="currentStep == lastStep">Done <i class="fa fa-check"></i></a>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("projects/project-lab-list/project-lab-list.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/project-lab-list/project-lab-list.tpl.html",'<div class="col-sm-8 col-sm-offset-2">\n  <div class="panel panel-default">\n    <div class="panel-heading">\n      <h4 class="panel-title">Select a Tutorial</h4>\n      Click a check to assign yourself to that tutorial, or select the red cross at the end of the list to remove yourself from all tutorials.\n    </div>\n    <div class="panel-body">\n      <table class="table table-condensed table-hover">\n        <thead>\n          <tr>\n            <th>Lab Code</th>\n            <th><a href="" ng-click="sortOrder=\'meeting_day\'; reverse=!reverse">Day</a></th>\n            <th>Time</th>\n            <th>Room</th>\n            <th>Tutor</th>\n            <th>Assigned</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="tutorial in unit.tutorials | orderBy:sortOrder:reverse">\n            <td>{{tutorial.abbreviation}}</td>\n            <td>{{tutorial.meeting_day}}</td>\n            <td>{{tutorial.meeting_time | date: \'shortTime\'}}</td>\n            <td>{{tutorial.meeting_location}}</td>\n            <td>{{tutorial.tutor_name}}</td>\n            <td ng-if="project.tutorial_id == tutorial.id"><button type="button" class="btn btn-success"><span class="glyphicon glyphicon-ok"></span> </button>\n            </td>\n            <td ng-if="project.tutorial_id != tutorial.id"><button type="button" class="btn btn-default" ng-click ="setTutorial(tutorial.id)"><span class="glyphicon glyphicon-minus"></span></button>\n            </td>\n          </tr>\n        </tbody>\n        <tfoot if-role="Tutor Convenor Admin">\n          <tr>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td><button type="button" class="btn btn-danger" ng-click="setTutorial(-1)"><span class="glyphicon glyphicon-remove"></span></button></td>\n          </tr>\n        </tfoot>\n      </table>\n    </div>\n  </div>\n</div>')}]),angular.module("projects/project-outcome-alignment/project-outcome-alignment.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/project-outcome-alignment/project-outcome-alignment.tpl.html",'<tabset>\n  <tab ng-click="selectTab(\'progress\')">\n    <tab-heading>\n      Outcome Achievement\n    </tab-heading>\n  </tab>\n  <tab ng-click="selectTab(\'reflect\')">\n    <tab-heading>\n      Outcome Alignment\n    </tab-heading>\n  </tab>\n</tabset>\x3c!--/tab-selector--\x3e\n<div class="panel panel-default" ng-show="poaView.activeTab == \'progress\'">\n  <div class="panel-heading">\n    <h3 class="panel-title">\n      Outcome Achievement\n    </h3>\n  </div>\n  <div class="panel-body view-alignment">\n    Overall progress on unit outcome are shown below\n  </div>\n  <task-ilo-alignment-viewer\n    project="project"\n    unit="unit"\n    class-stats="classStats"\n    current-progress="currentProgress"\n    summary-only="true"></task-ilo-alignment-viewer>\n</div>\x3c!--/achievement-panel--\x3e\n<div class="panel panel-default clearfix" ng-show="poaView.activeTab == \'progress\'">\n  <div class="panel-heading">\n    <h3 class="panel-title">\n      Visualise Achievement\n    </h3>\n  </div>\n  <div class="panel-body">\n    Your achievement with all ILOs are visualised below\n  </div>\n  <achievement-custom-bar-chart\n    show-legend="false"\n    unit="unit"\n    project="project"\n    class="col-sm-12">\n  </achievement-custom-bar-chart>\n</div>\x3c!--/visualisation-achievement--\x3e\n<div ng-show="poaView.activeTab == \'reflect\'">\n  <task-ilo-alignment-editor show-csv="false" unit="unit" project="project"></task-ilo-alignment-editor>\n</div>\x3c!--ilo-editor--\x3e\n')}]),angular.module("projects/project-progress-dashboard/project-progress-dashboard.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/project-progress-dashboard/project-progress-dashboard.tpl.html",'<div ng-if="unit" class="project-progress-dashboard">\n  <div class="col-md-4 col-md-push-8">\n    <div class="row">\n      <div class="col-sm-6 col-md-12">\n        <div class="panel panel-primary">\n          <div class="panel-heading clearfix">\n            <div class="pull-left">\n              <h4 class="panel-title">Task List</h4>\n              <div ng-hide="taskDetailsSelector.viewAll">\n                The tasks you need to focus on now.\n              </div>\n              <div ng-show="taskDetailsSelector.viewAll">\n                All of the tasks to achieve a {{grades.names[project.target_grade]}}.\n              </div>\n            </div>\n            <div class="pull-right toolbar">\n              <div class="buttons">\n                <div class="btn-group">\n                  <label class="btn btn-default" ng-model="taskDetailsSelector.viewAll" btn-radio="true">\n                    <i tooltip="View all tasks" class="fa fa-list"></i>\n                  </label>\n                  <label class="btn btn-default" ng-model="taskDetailsSelector.viewAll" btn-radio="false">\n                    <i tooltip="View the tasks to focus on now" class="fa fa-dashboard"></i>\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="panel-body">\n            <project-tasks-list project="project" on-change="updateBurndownChart" student-project-id="studentProjectId" task-def="taskDef" unit="unit" assessing-unit-role="assessingUnitRole" on-select="showTaskView" ng-if="taskDetailsSelector.viewAll"></project-tasks-list>\n            <project-top-tasks-list on-select="showTaskView" project="project" ng-hide="taskDetailsSelector.viewAll"></project-top-tasks-list>\n          </div>\n        </div>\x3c!--task-lists--\x3e\n      </div>\n      <div class="col-sm-6 col-md-12">\n        <div class="panel panel-default">\n          <div class="panel-heading">\n            <h3 class="panel-title">Target Grade</h3>\n            Select the grade you wish to achieve in the unit.\n          </div>\n          <div class="panel-body text-center">\n            <p class="btn-group">\n              <label ng-repeat="grade in grades" ng-click="chooseGrade($index)" class="btn btn-default col-sm-3 text-center" ng-model="project.target_grade" btn-radio="{{$index}}">\n                <grade-icon grade="grade" tooltip="Select a {{grade}} as your target grade" tooltip-append-to-body="true" class="text-{{$index == project.target_grade ? \'primary\' : \'muted\'}}"></grade-icon>\n              </label>\n            </p>\n            <p class="help-block">\n              You target grade is\n              <strong>{{grade.names[project.target_grade]}}</strong>.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\x3c!--right-hand-panel--\x3e\n\n  <div class="col-md-8 col-md-pull-4">\n    <div class="panel panel-default">\n      <div class="panel-heading clearfix">\n        <div class="pull-left">\n          <div ng-show="currentVisualisation == \'burndown\'">\n            <h3 class="panel-title">Burndown Chart</h3>\n            The Burndown chart shows how much work remains for you to achieve your target grade.\n          </div>\n          <div ng-show="currentVisualisation == \'taskSummary\'">\n            <h3 class="panel-title">Task Summary Chart</h3>\n            Summary of each of your task statuses\n          </div>\n        </div>\x3c!--/headings--\x3e\n        <div class="pull-right text-right toolbar">\n          <div class="buttons">\n            <div class="btn-group">\n              <label class="btn btn-default text-center" btn-radio="\'burndown\'" ng-model="currentVisualisation">\n                <i class="fa fa-line-chart"></i>\n              </label>\n              <label class="btn btn-default text-center" btn-radio="\'taskSummary\'" ng-model="currentVisualisation">\n                <i class="fa fa-pie-chart"></i>\n              </label>\n            </div>\n          </div>\n        </div>\x3c!--/button-switch--\x3e\n      </div>\n      <div class="panel-body">\n        <div class="burndown-chart" ng-if="currentVisualisation == \'burndown\'">\n          <progress-burndown-chart project="project" unit="unit"></progress-burndown-chart>\n        </div>\n        <div ng-if="currentVisualisation == \'taskSummary\'">\n          <student-task-status-pie-chart project="project"></student-task-status-pie-chart>\n        </div>\n      </div>\n      <div class="panel-footer text-center">\n        <div ng-show="currentVisualisation == \'taskSummary\'">\n          You have completed\n          <strong>{{taskStats.numberOfTasksCompleted}}</strong>\n          tasks and have\n          <strong>{{taskStats.numberOfTasksRemaining}}</strong>\n          left to complete to achieve a\n          <strong>{{grade.names[project.target_grade]}}</strong>.\n        </div>\n        <div ng-show="currentVisualisation == \'burndown\'">\n          Aim to keep your\n          <strong style="color: #e01b5d">Complete</strong>\n          line close to or ahead of the\n          <strong class="text-muted">Target</strong>\n          line to keep on track.\n        </div>\n      </div>\n    </div>\n  </div>\x3c!--primary-panel--\x3e\n</div>\n')}]),angular.module("projects/states/all/directives/all-projects-list/all-projects-list.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/all/directives/all-projects-list/all-projects-list.tpl.html",'<div class="container">\n  <div class="panel panel-primary">\n    <div class="panel-heading clearfix">\n      <div class="pull-left">\n        <h4 class="panel-title">Units</h4>\n        Units you study with {{externalName.value}}\n      </div>\n      <form role="search" class="pull-right form-horizontal">\n        <input id="searchbar" class="input-md form-control" placeholder="Search for units..." type="search" ng-model="search" autocomplete="off" typeahead="project.unit_name for project in projects | filter:$viewValue | limitTo:8" />\n      </form>\n    </div>\n    <div class="panel-body">\n      <div class="callout callout-info" ng-hide="filteredProjects.length > 0">You are not enrolled in any unit with {{externalName.value}} yet</div>\n      <table ng-show="filteredProjects.length > 0" class="table table-hover table-pointer">\n        <thead>\n          <tr>\n            <th><a ng-click="sortOrder=\'unit_code\'; reverse=!reverse">Unit Code <i ng-show="sortOrder==\'unit_code\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'unit_name\'; reverse=!reverse">Name <i ng-show="sortOrder==\'unit_name\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'teachingPeriod().name()\'; reverse=!reverse">Teaching Period <i ng-show="sortOrder==\'teachingPeriod().name()\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'start_date\'; reverse=!reverse">Start Date <i ng-show="sortOrder==\'start_date\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'end_date\'; reverse=!reverse">End Date <i ng-show="sortOrder==\'end_date\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            <th><a ng-click="sortOrder=\'active\'; reverse=!reverse">Active <i ng-show="sortOrder==\'teachingPeriod().active()\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="project in filteredProjects = (projects | filter:search) | orderBy:sortOrder:reverse | startFrom:(currentPage - 1) * pageSize | limitTo: pageSize" ui-sref="projects/dashboard({projectId: project.project_id, taskAbbr:\'\'})" >\n            <td>\n              <label class="label label-info">\n                {{project.unit_code}}\n              </label>\n            </td>\n            <td>{{project.unit_name}}</td>\n            <td ng-if="project.teachingPeriod()">{{(project.teachingPeriod().name())}}</td>\n            <td ng-if="!project.teachingPeriod()">Custom</td>\n            <td>{{project.start_date | date : \'EEE d MMM\' : \'+0000\'}}</td>\n            <td>{{project.end_date | date : \'EEE d MMM\' : \'+0000\'}}</td>\n            <td ng-if="project.teachingPeriod()">\n              <i ng-if="project.teachingPeriod().active() && project.active" class="fa fa-check"></i>\n              <i ng-if="!project.teachingPeriod().active() || !project.active" class="fa fa-times"></i>\n            </td>\n            <td ng-if="!project.teachingPeriod()">\n              <i ng-if="project.active" class="fa fa-check"></i>\n              <i ng-if="!project.active" class="fa fa-times"></i>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="panel-footer clearfix">\n      <pagination ng-show="filteredProjects.length > pageSize" total-items="filteredProjects.length" ng-model="currentPage" items-per-page="pageSize" max-size="maxSize" class="pagination-sm pull-left" boundary-links="true" rotate="false"></pagination>\n    </div>\n  </div>\n  <div class="spinner" ng-hide="dataLoaded">\n    <i class="fa fa-pulse fa-4x fa-spinner" ng-show="showSpinner"></i>\n  </div>\n</div>\n')}]),angular.module("projects/states/dashboard/dashboard.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/dashboard/dashboard.tpl.html",'<div class="panel-full-screen">\n  <student-task-list\n    task-data="taskData"\n    project="project"\n    refresh-tasks="targetGradeUpdated"\n    class="col-xs-12 col-md-3">\x3c!--/panel-1--\x3e\n  </student-task-list>\n  <progress-dashboard\n    project="project"\n    on-update-target-grade="targetGradeUpdated"\n    class="col-xs-12 col-md-9"\n    ng-if="!taskData.selectedTask">\n  </progress-dashboard>\x3c!--/panel-2--\x3e\n  <task-dashboard\n    task="taskData.selectedTask"\n    class="col-xs-12 col-md-6"\n    ng-if="taskData.selectedTask">\n  </task-dashboard>\x3c!--/panel-2--\x3e\n  <task-comments-viewer\n    task="taskData.selectedTask"\n    project="project"\n    class="col-xs-12 col-md-3"\n    refocus-on-task-change="true"\n    ng-if="taskData.selectedTask">\n  </task-comments-viewer>\x3c!--/panel-3--\x3e\n</div>\n')}]),angular.module("projects/states/dashboard/directives/progress-dashboard/progress-dashboard.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/dashboard/directives/progress-dashboard/progress-dashboard.tpl.html",'<div class="panel panel-default panel-scrollable">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      Progress Dashboard <span ng-show="tutor">for {{project.student_name}}</span>\n    </h4>\n  </div>\x3c!--/panel-heading--\x3e\n  <div class="panel-body">\n    <div class="col-sm-12 col-xl-6">\n      <div class="card card-default card-sm card-target-grade">\n        <div class="card-heading">\n          <h4>Target Grade</h4>\n        </div>\x3c!--/target-grade-heading--\x3e\n        <div class="card-body">\n          <select\n            class="form-control input-lg"\n            ng-model="project.target_grade"\n            ng-options="grade as grades.names[grade] for grade in grades.values"\n            ng-change="updateTargetGrade(project.target_grade)"></select>\n        </div>\x3c!--/target-grade-body--\x3e\n      </div>\x3c!--/target-grade-card--\x3e\n      <div class="card card-default card-lg card-burndown">\n        <div class="card-heading">\n          <h4>Progress Burndown</h4>\n          <div class="text-muted">\n            The burndown chart shows how much work remains for you to achieve your target grade.\n          </div>\n        </div>\x3c!--/burndown-heading--\x3e\n        <div class="card-body">\n          <progress-burndown-chart project="project" unit="project.unit()"></progress-burndown-chart>\n        </div>\x3c!--/burndown-body--\x3e\n        <div class="card-footer">\n          Aim to keep your\n          <strong style="color: #e01b5d">Complete</strong>\n          line close to or ahead of the\n          <strong class="text-muted">Target</strong>\n          line to keep on track.\n        </div>\x3c!--/burndown-footer--\x3e\n      </div>\x3c!--/burndown-card--\x3e\n    </div>\x3c!--/burndown-column--\x3e\n    <div class="col-sm-12 col-xl-6">\n      <div class="card card-default card-lg card-pie-chart">\n        <div class="card-heading">\n          <h4>Task Statuses</h4>\n          <div class="text-muted">\n            Breakdown summary of each of your task statuses.\n          </div>\n        </div>\x3c!--/pie-chart-heading--\x3e\n        <div class="card-body">\n          <student-task-status-pie-chart\n            project="project"\n            update-data="renderTaskStatusPieChart">\n          </student-task-status-pie-chart>\n        </div>\x3c!--/pie-chart-body--\x3e\n        <div class="card-footer">\n          You have completed\n          <strong>{{numberOfTasks.completed}}</strong>\n          tasks and have\n          <strong>{{numberOfTasks.remaining}}</strong>\n          left to complete to achieve a\n          <strong>{{grades.names[project.target_grade]}}</strong>.\n        </div>\x3c!--/pie-chart-footer--\x3e\n      </div>\x3c!--/pie-chart-card--\x3e\n    </div>\x3c!--/pie-chart-column--\x3e\n  </div>\x3c!--/panel-body--\x3e\n</div>\n')}]),angular.module("projects/states/dashboard/directives/student-task-list/student-task-list.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/dashboard/directives/student-task-list/student-task-list.tpl.html",'<div class="panel panel-primary">\n  <div class="panel-heading">\n    <input type="text" class="form-control" ng-model="filters.taskName" ng-change="taskNameChanged()" placeholder="Search tasks...">\n  </div>\n  <ul class="list-group">\n    <li class="list-group-item list-group-item-task clearfix {{task.statusClass()}}"\n      id="{{task.taskKeyToIdString()}}"\n      ng-click="setSelectedTask(task)"\n      ng-class="{selected: isSelectedTask(task)}"\n      ng-repeat="task in filteredTasks">\n      <div class="task-data">\n        <h4 class="list-group-item-heading">\n          {{task.definition.name}}\n        </h4>\n        <p class="list-group-item-text">\n          {{task.definition.abbreviation}} - {{gradeNames[task.definition.target_grade]}} Task <span class="due-time" ng-if="task.isBeforeStartDate() && !task.inSubmittedState()"><i class="fa fa-hourglass-half"></i> {{task.timeToStart()}}</span>\n        </p>\n      </div>\x3c!--/task-data--\x3e\n      <div class="task-badges">\n        <status-icon status="task.status"></status-icon>\n        <div class="task-superscript-badges">\n          <span class="task-superscript-badge new-comments-badge" ng-if="task.num_new_comments > 0">\n            {{task.num_new_comments}}\n          </span>\n          <span class="task-superscript-badge plagiarism-detected-badge" ng-if="task.plagiarismDetected()">\n            <i class="fa fa-eye"></i>\n          </span>\n        </div>\n        <div class="task-subscript-badges">\n          <span class="task-subscript-badge grade-badge" ng-if="task.hasGrade()">\n            {{task.gradeDesc()}}\n          </span>\n          <span class="task-subscript-badge quality-badge" ng-if="task.hasQualityPoints()">\n            <sup>{{task.quality_pts}}</sup>&frasl;<sub>{{task.definition.max_quality_pts}}</sub>\n          </span>\n          <span class="task-subscript-badge soon-badge" ng-if="task.isToBeCompletedSoon() && ! task.isDueSoon()">\n            <i class="fa fa-clock-o"></i>\n          </span>\n          <span class="task-subscript-badge soon-badge" ng-if="task.isPastTargetDate() && ! (task.isDueSoon() || task.isOverdue())">\n            <i class="fa fa-clock-o"></i><strong>!</strong>\n          </span>\n          <span class="task-subscript-badge due-badge" ng-if="task.isDueSoon()">\n            <i class="fa fa-clock-o"></i>\n          </span>\n          <span class="task-subscript-badge due-badge" ng-if="task.isOverdue() && ! task.inTerminalState()">\n            <i class="fa fa-clock-o"></i><strong>!</strong>\n          </span>\n        </div>\n      </div>\x3c!--/badges--\x3e\n    </li>\x3c!--/task--\x3e\n    <li ng-show="filteredTasks.length == 0" class="list-group-item text-center text-muted">\n      No tasks to display.\n    </li>\n  </ul>\n</div>\n')}]),angular.module("projects/states/dashboard/directives/task-dashboard/directives/task-assessment-card/task-assessment-card.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/dashboard/directives/task-dashboard/directives/task-assessment-card/task-assessment-card.tpl.html",'<div class="card card-default card-sm" ng-show="task.definition.is_graded || task.definition.max_quality_pts > 0">\n  <div class="card-heading">\n    <h4>Assessment Information</h4>\n  </div>\n  <div class="card-body">\n    <div ng-show="task.definition.is_graded">\n      <h5>This task {{assessmentCards.hasBeenGraded ? \'has been\' : \'will be\'}} assigned a grade</h5>\n      <div ng-hide="hasBeenGraded(task)">\n        <p>\n          This task will be graded against a grade standard. Your work will\n          be assessed and assigned a grade according to a Pass, Credit,\n          Distinction or High Distinction standard.\n        </p>\n        <div class="callout callout-primary">\n          <h5>Advice for achieving a {{gradeNames[task.project().target_grade]}}</h5>\n          <p>\n            As you are attempting to achieve a {{gradeNames[task.project().target_grade]}} in this unit,\n            you should attempt to achieve a <strong>{{gradeNames[task.project().target_grade]}}</strong> grade\n            on this task. Ask your tutor to find out more on what they are looking for when they are assessing\n            this work to a specific grade.\n          </p>\n        </div>\n      </div>\x3c!--/graded-task-is-not-graded--\x3e\n      <div ng-show="hasBeenGraded(task)">\n        Your tutor has marked you on this task to a <strong>{{gradeNames[task.grade]}}</strong> standard.\n      </div>\x3c!--/graded-task-is-graded--\x3e\n    </div>\x3c!--/graded-task--\x3e\n    <hr ng-show="task.definition.is_graded && task.definition.max_quality_pts > 0">\n    <div ng-show="task.definition.max_quality_pts > 0">\n      <h5>\n        <span ng-hide="hasBeenGivenStars(task)">\n          This task will be assessed on a scale to {{task.definition.max_quality_pts}}\n        </span>\n        <span ng-show="hasBeenGivenStars(task)">\n          This task has been assessed for quality\n        </span>\n      </h5>\n      <p ng-hide="hasBeenGivenStars(task)">\n        This task will be graded against a quality scale from\n        <strong>0 to {{task.definition.max_quality_pts}}</strong>. Your work will assessed\n        and assigned a star rating based on the quality of your submission.\n      </p>\n      <div ng-show="hasBeenGivenStars(task)">\n        <rating\n          class="task-quality-rating"\n          ng-model="task.quality_pts"\n          max="task.definition.max_quality_pts"\n          state-on="\'fa fa-star rating-outline\'"\n          state-off="\'fa fa-star rating-disabled\'"\n          readonly="true">\n        </rating>\n        <p>\n          You have been awarded out\n          <strong>{{task.quality_pts}} of {{task.definition.max_quality_pts}}</strong>\n          avaliable points for this task.\n        </p>\n      </div>\n    </div>\x3c!--/quality-star-task--\x3e\n  </div>\x3c!--/assessment-body--\x3e\n</div>\x3c!--/assessment-card--\x3e\n')}]),angular.module("projects/states/dashboard/directives/task-dashboard/directives/task-description-card/task-description-card.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/dashboard/directives/task-dashboard/directives/task-description-card/task-description-card.tpl.html",'<div class="card card-default card-sm">\n  <div class="card-heading">\n    <h4>Description</h4>\n  </div>\x3c!--/description-heading--\x3e\n  <div class="card-body">\n    <div class="markdown-to-pdf" ng-bind-html="taskDef.description | markdown"></div>\n  </div>\x3c!--/description-body--\x3e\n  <div class="card-footer">\n    <h5>Key Information</h5>\n    <ul>\n      <li>\n        <strong>{{grades.names[taskDef.target_grade]}} Task</strong>\n      </li>\n      <li>\n        <strong>Start Date</strong>\n        &mdash;\n        Aim to start this task by <strong>{{startDate() |  date : \'EEE d MMM\' : \'+0000\' }}</strong>.\n      </li>\n      <li>\n        <strong>Due Date</strong>\n        &mdash;\n        Aim to complete by <strong>{{dueDate() |  date : \'EEE d MMM\' : \'+0000\' }}</strong>.\n      </li>\n      <li ng-show="task && task.extensions > 0">\n          <strong>Number of extensions</strong>\n          &mdash;\n          you have requested <strong>{{task.extensions}}</strong> one week extension{{task.extensions > 1 ? "s" : ""}} for this task.\n        </li>\n      <li ng-show="shouldShowDeadline()">\n        <strong>Deadline</strong>\n        &mdash;\n        Tutors will not give feedback on work submitted after <strong>{{taskDef.due_date | date  : \'EEE d MMM\' : \'+0000\'  }}</strong>. Consult with your unit terms and consitions to see if your work will be checked in your portfolio.\n      </li>\n    </ul>\n  </div>\x3c!--/key-info-footer--\x3e\n  <div class="card-footer" ng-show=" (!task.inTerminalState() && !task.isOverdue()) || taskDef.has_task_sheet || taskDef.has_task_resources">\n    <a\n      ng-click="downloadEvent(\'PDF\')"\n      href="{{urls.taskSheet}}"\n      ng-show="taskDef.has_task_sheet"\n      target="_blank"\n      class="btn btn-primary">\n      <i class="fa fa-download"></i>\n      Download Task Sheet\n    </a>\n    <a\n      ng-click="downloadEvent(\'Resources\')"\n      href="{{urls.resources}}"\n      ng-show="taskDef.has_task_resources"\n      target="_blank"\n      class="btn btn-primary">\n      <i class="fa fa-download"></i>\n      Download Resources\n    </a>\n    <a\n      ng-click="applyForExtension()"\n      ng-hide="task.inTerminalState() || task.isOverdue()"\n      class="btn btn-success">\n      <i class="fa fa-medkit"></i>\n      Request Extension\n    </a>\n  </div>\x3c!--/description-footer--\x3e\n</div>\n')}]),angular.module("projects/states/dashboard/directives/task-dashboard/directives/task-due-card/task-due-card.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/dashboard/directives/task-dashboard/directives/task-due-card/task-due-card.tpl.html",'<div class="card card-danger card-sm" ng-show="task.isDueSoon() && ! task.inDiscussState()">\n  <div class="card-heading">\n    <h4>Deadline Approaching in {{task.timeUntilDeadlineDescription()}}</h4>\n  </div>\n  <div class="card-body">\n    <p>\n      This task\'s deadline is {{task.definition.due_date | date : \'EEE d MMM\' : \'+0000\' }}.\n       Submitting after this date means your tutor will not provide feedback for your submission, but that it will be checked in your portfolio.\n    </p>\n  </div>\n</div>\x3c!--/due-card pre-discuss --\x3e\n<div class="card card-danger card-sm" ng-show="task.isDueSoon() && task.inDiscussState()">\n  <div class="card-heading">\n    <h4>Deadline Approaching in {{task.timeUntilDeadlineDescription()}}</h4>\n  </div>\n  <div class="card-body">\n    <p>\n      This task\'s deadline is {{task.definition.due_date | date : \'EEE d MMM\' : \'+0000\' }}.\n      Make sure to discuss this task with your tutor as soon as possible.\n    </p>\n    <p class="text-muted">\n      Tasks are only considered <strong>Completed</strong> once your tutor has <strong>Discussed</strong> your work with you.\n    </p>\n  </div>\n</div>\x3c!--/due-card discuss --\x3e\n<div class="card card-warning card-sm" ng-show="task.isToBeCompletedSoon() && !task.isDueSoon() && !task.inDiscussState()">\n  <div class="card-heading">\n    <h4>Aim To Complete Soon - Due in {{task.timeUntilTargetDescription()}}</h4>\n  </div>\n  <div class="card-body">\n    <p>\n      This task\'s target completion date is <strong>{{task.targetDate() | date : \'EEE d MMM\' : \'+0000\' }}</strong>.\n      You should aim to complete this task before then to keep your progress on track.\n    </p>\n  </div>\n</div>\x3c!--/target-card pre-discuss--\x3e\n<div class="card card-warning card-sm" ng-show="task.isToBeCompletedSoon() && !task.isDueSoon() && task.inDiscussState()">\n  <div class="card-heading">\n    <h4>Aim To Complete Soon - Due in {{task.timeUntilTargetDescription()}}</h4>\n  </div>\n  <div class="card-body">\n    <p>\n      This task\'s target completion date is <strong>{{task.targetDate() | date : \'EEE d MMM\' : \'+0000\' }}</strong>.\n      Make sure to discuss this task with your tutor as soon as possible.\n    </p>\n    <p class="text-muted">\n      Tasks are only considered <strong>completed</strong> once your tutor has\n      <strong>discussed</strong> your work with you.\n    </p>\n  </div>\n</div>\x3c!--/target-card discuss--\x3e\n<div class="card card-warning card-sm" ng-show="task.isPastTargetDate() && !task.isOverdue() && !task.inDiscussState() ">\n  <div class="card-heading">\n    <h4>Past Due Date By {{task.timePastTargetDescription()}}</h4>\n  </div>\n  <div class="card-body">\n    <p>\n      You should have completed this task by <strong>{{task.targetDate() | date : \'EEE d MMM\' : \'+0000\' }}</strong>.\n      Try and finish it as soon as possible by focusing on this task and completing it\n      to not fall behind. Remember that you can request and extension to alter the due\n      date, up to the task\'s deadline.\n    </p>\n    <p>\n      <a\n        ng-click="applyForExtension()"\n        ng-hide="task.inTerminalState()"\n        class="btn btn-success">\n        <i class="fa fa-medkit"></i>\n        Request Extension\n      </a>\n    </p>\n  </div>\n</div>\x3c!--/past-target-card pre-discuss--\x3e\n<div class="card card-warning card-sm" ng-show="task.isPastTargetDate() && !task.isOverdue() && !task.inDiscussState() ">\n  <div class="card-heading">\n    <h4>Past Due Date By {{task.timePastTargetDescription()}}</h4>\n  </div>\n  <div class="card-body">\n    <p>\n      You should have completed this task by <strong>{{task.targetDate() | date : \'EEE d MMM\' : \'+0000\' }}</strong>.\n      Make sure to discuss this task with your tutor as soon as possible.\n    </p>\n    <p class="text-muted">\n      Tasks are only considered <strong>completed</strong> once your tutor has\n      <strong>discussed</strong> your work with you.\n    </p>\n  </div>\n</div>\x3c!--/past-target-card pre-discuss--\x3e\n<div class="card card-danger card-sm" ng-show="task.isOverdue() && !task.inDiscussState() ">\n  <div class="card-heading">\n    <h4>Missed Deadline By {{task.timePastDeadlineDescription()}}</h4>\n  </div>\n  <div class="card-body">\n    <p>\n      You should have completed this task by <strong>{{task.definition.due_date | date : \'EEE d MMM\' : \'+0000\' }}</strong>.\n      As this task is past the deadline you will need to make sure it is of acceptable standard in your portfolio. The task will be marked as <em>Time Exceeded</em> when submitted, but will be reviewed in your portfolio.\n    </p>\n  </div>\n</div>\x3c!--/overdue-card--\x3e\n<div class="card card-danger card-sm" ng-show="task.isOverdue() && task.inDiscussState() ">\n  <div class="card-heading">\n    <h4>Past Deadline By {{task.timePastDeadlineDescription()}}</h4>\n  </div>\n  <div class="card-body">\n    <p>\n      You should have completed this task by <strong>{{task.definition.due_date | date : \'EEE d MMM\' : \'+0000\' }}</strong>.\n      Make sure to discuss this task with your tutor as soon as possible.\n    </p>\n    <p class="text-muted">\n      Tasks are only considered <strong>Completed</strong> once your tutor has\n      <strong>Discussed</strong> your work with you.\n    </p>\n  </div>\n</div>\x3c!--/overdue-card--\x3e\n')}]),angular.module("projects/states/dashboard/directives/task-dashboard/directives/task-outcomes-card/task-outcomes-card.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/dashboard/directives/task-dashboard/directives/task-outcomes-card/task-outcomes-card.tpl.html",'<div class="card card-default card-sm" ng-show="alignments.length > 0">\n  <div class="card-heading">\n    <h4>Intended Learning Outcomes</h4>\n    <div class="text-muted">\n      Teaching staff believe that completing this task will help you achieve\n      the outcomes listed below.\n    </div>\n  </div>\n  <div class="list-group">\n    <button\n      class="clearfix list-group-item"\n      ng-repeat="alignment in alignments"\n      ng-click="alignment.collapsed = !alignment.collapsed">\n      <heading>\n        <div>\n          <h4>\n            <strong>{{alignment.ilo.abbreviation}}</strong>\n            <small>{{alignment.ilo.name}}</small>\n          </h4>\n          <p>{{alignment.label}}. Click to expand.</p>\n        </div>\x3c!--/alignment-label--\x3e\n        <task-ilo-alignment-rater\n          readonly="true"\n          hide-labels="true"\n          unit="taskDef.unit()"\n          ng-model="alignment">\n        </task-ilo-alignment-rater>\x3c!--/alignment-rater--\x3e\n      </heading>\n      <div class="panel panel-default" collapse="!alignment.collapsed">\n        <div class="panel-body">\n          <p>\n            <h5>Outcome Description</h5>\n            <div class="markdown-to-html" ng-bind-html="alignment.ilo.description | markdown"></div>\n          </p>\n          <p>\n            <h5>Rationale</h5>\n            <div class="markdown-to-html" ng-bind-html="alignment.description | markdown"></div>\n          </p>\n        </div>\n      </div>\n    </button>\n  </div>\n</div>\n')}]),angular.module("projects/states/dashboard/directives/task-dashboard/directives/task-plagiarism-card/task-plagiarism-card.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/dashboard/directives/task-dashboard/directives/task-plagiarism-card/task-plagiarism-card.tpl.html",'<div class="card card-sm card-danger" ng-show="task.plagiarismDetected()">\n  <div class="card-heading">\n    <h4>Similarities Detected!</h4>\n  </div>\x3c!--/description-heading--\x3e\n  <div class="card-body">\n    Similarities with other student work has been detected on your submission. View the report\n    by clicking the button below.\n  </div>\x3c!--/description-body--\x3e\n  <div class="card-footer">\n    <button class="btn btn-danger" ng-click="viewReport()">\n      View Similarity Report\n    </button>\n  </div>\x3c!--/description-footer--\x3e\n</div>\n')}]),angular.module("projects/states/dashboard/directives/task-dashboard/directives/task-status-card/task-status-card.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/dashboard/directives/task-dashboard/directives/task-status-card/task-status-card.tpl.html",'<div class="card card-default card-sm card-status">\n  <div class="card-heading task-trigger-dropdown" ng-show="triggers.length > 0">\n    <div class="task-status hidden-sm hidden-xs" dropdown>\n      <button\n        type="button"\n        class="btn btn-default form-control input-lg {{task.statusClass()}}"\n        dropdown-toggle>\n        <span class="pull-left">\n          <i class="{{task.statusIcon()}}"></i> {{task.statusLabel()}}\n        </span>\n        <span class="pull-right">\n          <i class="fa fa-caret-down"></i>\n        </span>\n      </button>\x3c!--/select-button--\x3e\n      <ul class="dropdown-menu" dropdown-menu>\n        <li\n          ng-repeat="trigger in triggers"\n          tooltip="{{trigger.help.reason}}"\n          tooltip-append-to-body="true"\n          tooltip-popup-delay="1000"\n          tooltip-placement="right">\n          <a ng-click="triggerTransition(trigger.status)">\n            <status-icon status="trigger.status" show-tooltip="false"></status-icon>\n            {{trigger.label}}\n          </a>\n        </li>\n      </ul>\x3c!--/select-options--\x3e\n    </div>\x3c!--/desktop-dropdown--\x3e\n    <select\n      class="form-control input-lg visible-sm visible-xs"\n      ng-options="trigger.status as trigger.label for trigger in triggers"\n      ng-model="task.status"\n      ng-change="triggerTransition(task.status)">\n    </select>\n  </div>\x3c!--/trigger-heading--\x3e\n  <div class="card-heading static-task-status" ng-hide="triggers.length > 0">\n    <status-icon class="pull-right" status="task.status" show-tooltip="false"></status-icon>\n    <h4>{{task.statusLabel()}}</h4>\n  </div>\x3c!--/static-status-label--\x3e\n  <div class="card-body">\n    <p>{{task.statusHelp().reason}} {{task.statusHelp().action}}</p>\n  </div>\x3c!--/status-body--\x3e\n  <div class="card-footer clearfix" ng-show="task.inSubmittedState() && task.requiresFileUpload()">\n    <a\n      ng-click="updateFilesInSubmission()"\n      class="btn btn-primary"\n      tooltip="This allows you to update files for your portfolio, but does not update the task status."\n      tooltip-popup-delay="250"\n      tooltip-append-to-body="true">\n      <i class="fa fa-upload"></i>\n      Upload new files for submission\n    </a>\n  </div>\x3c!--/status-footer--\x3e\n</div>\x3c!--/status-card--\x3e\n')}]),angular.module("projects/states/dashboard/directives/task-dashboard/directives/task-submission-card/task-submission-card.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/dashboard/directives/task-dashboard/directives/task-submission-card/task-submission-card.tpl.html",'<div class="card card-default card-sm" ng-show="submission.isUploaded || submission.isProcessing">\n  <div class="card-heading">\n    <h4>\n      Submission\n      <span ng-show="submission.isProcessing">Processing</span>\n    </h4>\n  </div>\x3c!--/card-heading--\x3e\n  <div class="card-body" >\n    <p ng-show="submission.isProcessing">\n      Your submission is being processed and will be avaliable to view soon. You will also\n      be able to download your most recently submitted files.\n    </p>\n    <p ng-show="submission.isUploaded">\n      You can choose to download your <em ng-show="submission.isProcessing">previous</em>\n      submission or the files you uploaded below.\n    </p>\n    <p ng-show="submission.isUploaded">\n      You uploaded this submission <strong>{{task.submission_date | humanizedDate}}</strong>.\n    </p>\n    <p ng-show="canRegeneratePdf">\n      If you feel there has been an error in your submission, you can request Doubtfire to\n      regenerate your submission under the "Actions" dropdown menu.\n    </p>\n    <p ng-show="canReuploadEvidence">\n      If you would like to submit alternate evidence for use in your portfolio, you can\n      upload alternate files under the "Actions" dropdown menu.\n    </p>\n  </div>\x3c!--/card-body--\x3e\n  <div class="card-footer clearfix" ng-show="submission.isUploaded || canReuploadEvidence || canRegeneratePdf">\n    <div class="btn-group" ng-show="submission.isUploaded" dropdown>\n      <a href="{{urls.pdf}}" target="_blank" class="btn btn-primary">\n        <i class="fa fa-download"></i>\n        Download Submission\n      </a>\n      <button class="btn btn-primary" dropdown-toggle>\n        <span class="caret"></span>\n      </button>\n      <ul class="dropdown-menu">\n        <li>\n          <a href="{{urls.files}}" target="_blank">\n            Download Uploaded Files\n          </a>\n        </li>\n      </ul>\n    </div>\x3c!--/download-submission--\x3e\n    <div class="task-status pull-right" ng-show="canReuploadEvidence || canRegeneratePdf" dropdown>\n      <button type="button" class="btn btn-default" dropdown-toggle>\n        Actions <span class="caret"></span>\n      </button>\n      <ul class="dropdown-menu" dropdown-menu>\n        <li ng-show="canReuploadEvidence">\n          <a ng-click="uploadAlternateFiles()">Upload Alternate Files</a>\n        </li>\n        <li ng-show="canRegeneratePdf">\n          <a ng-click="regeneratePdf()">Regenerate PDF</a>\n        </li>\n      </ul>\n    </div>\x3c!--/more-dropdown--\x3e\n  </div>\x3c!--/card-footer--\x3e\n</div>\x3c!--/card--\x3e\n')}]),angular.module("projects/states/dashboard/directives/task-dashboard/task-dashboard.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/dashboard/directives/task-dashboard/task-dashboard.tpl.html",'<div class="panel panel-pdf panel-default panel-scrollable">\n  <div class="panel-heading" ng-show="task">\n    <div class="panel-title">\n      {{task.definition.name}} <span ng-show="tutor || showFooter">by {{task.project().student_name}}</span>\n\n      <div class="dropdown pull-right" dropdown ng-show="task.has_pdf || task.definition.has_task_sheet">\n        <button class="btn btn-default dropdown-toggle" dropdown-toggle>\n          <i class="fa fa-search"></i>\n          <span class="caret"></span>\n        </button>\n        <ul class="dropdown-menu">\n          <li>\n            <a ng-click="setSelectedDashboardView(\'details\')">View Task Details</a>\n          </li>\n          <li ng-show="task.has_pdf">\n            <a ng-click="setSelectedDashboardView(\'submission\')">View Submission</a>\n          </li>\n          <li ng-show="task.definition.has_task_sheet">\n            <a ng-click="setSelectedDashboardView(\'task\')">View Task Sheet</a>\n          </li>\n          <li class="divider" ng-show="task.has_pdf"></li>\n          <li ng-show="task.has_pdf">\n            <a href="{{urls.taskSubmissionPdfAttachmentUrl}}">Download Submission PDF</a>\n          </li>\n          <li ng-show="task.has_pdf">\n            <a href="{{urls.taskFilesUrl}}">Download Submitted Files</a>\n          </li>\n        </ul>\n      </div>\x3c!--/download-dropdown--\x3e\n    </div>\n  </div>\x3c!--/panel-header--\x3e\n  <div class="panel-body" ng-show="isCurrentView(\'details\')">\n    <div class="col-sm-12 col-xl-6">\n      <task-plagiarism-card task="task"></task-plagiarism-card>\n      <task-status-card task="task"></task-status-card>\n      <task-due-card task="task"></task-due-card>\n      <task-description-card task-def="task.definition" task="task" unit="task.unit()"></task-description-card>\n    </div>\x3c!--/task-description-column--\x3e\n    <div class="col-sm-12 col-xl-6">\n      <task-assessment-card task="task"></task-assessment-card>\n      <task-submission-card task="task"></task-submission-card>\n      <task-outcomes-card task-def="task.definition" unit="task.unit()"></task-outcomes-card>\n    </div>\x3c!--/task-description-column--\x3e\n  </div>\x3c!--/panel-body--\x3e\n  <div class="panel-body has-pdf" ng-if="isCurrentView(\'task\')">\n    <pdf-viewer pdf-url="urls.taskSheetPdfUrl"></pdf-viewer>\n  </div>\x3c!--/panel-body--\x3e\n  <div class="panel-body has-pdf" ng-if="isCurrentView(\'submission\') && task.has_pdf">\n    <pdf-viewer pdf-url="urls.taskSubmissionPdfUrl"></pdf-viewer>\n  </div>\x3c!--/panel-body--\x3e\n  <div class="panel-body text-muted no-pdf" ng-show="isCurrentView(\'submission\') && !task.has_pdf">\n    <i class="fa fa-file-pdf-o"></i>\n    <span ng-show="task && task.processing_pdf">\n      PDF Still Processing\n    </span>\n    <span ng-show="task && !task.processing_pdf">\n      No Submission Uploaded\n    </span>\n    <span ng-hide="task">\n      No Task Selected\n    </span>\n  </div>\x3c!--/panel-body-without-pdf--\x3e\n  <div class="panel-footer" ng-if="task && showFooter">\n    <div class="visible-sm visible-xs">\n      <select\n        ng-change="triggerTransition(status)"\n        ng-model="task.status"\n        class="form-control input-lg">\n        <option ng-repeat="status in taskStatusData.keys" value="{{taskStatusData.keys[$index]}}">\n          {{taskStatusData.labels[status]}}\n        </option>\n      </select>\n    </div>\x3c!--/mobile-select-task-status--\x3e\n    <div class="btn-group task-status hidden-sm hidden-xs">\n      <label\n        ng-repeat="status in taskStatusData.keys"\n        ng-model="task.status"\n        ng-change="triggerTransition(status)"\n        class="btn btn-default btn-status {{taskStatusData.class(status)}}"\n        tooltip-html-unsafe="<h5>Mark as <strong>{{taskStatusData.labels[status]}}</strong></h5><hr><p>{{taskStatusData.help[status].reason}}</p>"\n        tooltip-popup-delay="500"\n        tooltip-append-to-body="true"\n        btn-radio="\'{{status}}\'">\n        <i class="fa {{taskStatusData.icons[status]}}"></i>\n      </label>\n    </div>\x3c!--/desktop-select-task-status--\x3e\n  </div>\x3c!--/panel-footer--\x3e\n</div>\n')}]),angular.module("projects/states/groups/groups.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/groups/groups.tpl.html",'<div class="container" ng-if="unit.hasGroupwork()">\n  <group-set-manager\n    project="project"\n    unit="unit">\n  </group-set-manager>\n</div>\x3c!--/has-groupwork--\x3e\n<div class="container" ng-hide="unit.hasGroupwork()">\n  <div class="large-notice-block">\n    <i class="fa fa-2x fa-users"></i>\n    <p>No Groupwork Enabled</p>\n  </div>\n  <div class="text-center text-muted col-sm-12 col-md-6 col-md-offset-3">\n    There is no group work enabled for this unit.\n  </div>\n</div>\x3c!--/no-groupwork--\x3e\n')}]),angular.module("projects/states/outcomes/outcomes.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/outcomes/outcomes.tpl.html",'<div class="container" ng-show="unit.ilos.length > 0">\n  <project-outcome-alignment></project-outcome-alignment>\n</div>\x3c!--/ilos--\x3e\n<div class="container" ng-hide="unit.ilos.length > 0">\n  <div class="large-notice-block">\n    <i class="fa fa-2x fa-graduation-cap"></i>\n    <p>No Learning Outcomes</p>\n  </div>\n  <div class="text-muted text-center col-sm-12 col-md-6 col-md-offset-3">\n    There are no learning outcomes for this unit.\n  </div>\n</div>\x3c!--/no-ilos--\x3e\n\n')}]),angular.module("projects/states/portfolio/directives/portfolio-add-extra-files-step/portfolio-add-extra-files-step.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/portfolio/directives/portfolio-add-extra-files-step/portfolio-add-extra-files-step.tpl.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h3 class="panel-title">{{activeTab.title}}</h3>\n  </div>\n  <div class="panel-body">\n    <p>\n      Now is your chance to upload extra files to include in your portfolio.\n      These files will be added at to your portfolio before your selected tasks\n      from the previous step.\n    </p>\n    <div class="card">\n      <div class="card-heading" ng-show="extraFiles().length == 0">\n        <h4>No files to add?</h4>\n        <p>If you do not have any files to add you can skip this step.</p>\n      </div>\n      <div class="card-heading" ng-show="extraFiles().length > 0">\n        <h4>Extra file{{extraFiles().length > 1 ? \'s\' : \'\'}} added</h4>\n        <p>\n          {{extraFiles().length > 1 ? \'The files you add will appear in the portfolio in the order shown below.\' : \'\'}}\n          If you want to delete a file, click the cross beside the file\'s name.\n        </p>\n        <ol>\n          <li ng-repeat="file in extraFiles()">\n            <i class="fa fa-file-{{file.kind}}-o"></i> {{file.name}}\n            <a class="clear-upload text-muted" ng-click="deleteFileFromPortfolio(file)">\n              <i class="fa fa-times"></i>\n            </a>\n          </li>\n        </ol>\n      </div>\n      <div class="card-body">\n        <div class="form-group clearfix" ng-hide="isUploading">\n          <label class="col-sm-3 text-right">Select type of file:</label>\n          <div class="col-sm-7">\n            <select ng-model="uploadType" class="form-control input-sm">\n              <option value="document">\n                <i class="fa fa-file-pdf-o"></i> Document File</option>\n              <option value="code">Code File</option>\n              <option value="image">Image File</option>\n            </select>\n          </div>\n        </div>\n        <file-uploader\n          show-name="false"\n          files="uploadFileData.type"\n          payload="uploadFileData.payload"\n          is-uploading="isUploading"\n          url="portfolioSubmission.portfolioUrl"\n          on-success="addNewFilesToPortfolio">\n        </file-uploader>\n      </div>\n    </div>\n  </div>\x3c!--/add-some-more-files--\x3e\n  <div class="panel-footer clearfix">\n    <button class="btn btn-primary pull-left" ng-click="advanceActiveTab(-1)"><i class="fa fa-arrow-left"></i> Back</button>\n    <button class="btn btn-primary pull-right" ng-click="advanceActiveTab(1)">Next <i class="fa fa-arrow-right"></i></button>\n  </div>\n</div>\n')}]),angular.module("projects/states/portfolio/directives/portfolio-grade-select-step/portfolio-grade-select-step.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/portfolio/directives/portfolio-grade-select-step/portfolio-grade-select-step.tpl.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h3 class="panel-title">Select Grade</h3>\n  </div>\n  <div class="panel-body">\n    <p>\n      In preparing your portfolio, you need to undertake a self assessment. Use the\n      unit\'s assessment criteria to determine the grade your portfolio should be awarded.\n    </p>\n    <div class="card card-danger">\n      <div class="card-heading">\n        <h4><i class="fa fa-warning"></i> Read the assessment criteria</h4>\n        Make sure that you have reviewed the Assessment Criteria for the grade you\n        are applying for. Each grade will have a list of criteria that you can use\n        to determine if you meet the requirements to achieve that grade.\n      </div>\n      <div class="card-body text-center" style="font-size: 1.25em;">\n        <input type="checkbox" class="pointer" id="agree-read" ng-model="agreedToAssessmentCriteria">\n        <label class="pointer" for="agree-read">I have read the Assessment Criteria for this unit</label>\n      </div>\n    </div>\x3c!--/confirm-read-assessment-criteria--\x3e\n    <div class="card card-default" collapse="!agreedToAssessmentCriteria">\n      <div class="card-heading">\n        <h4>Grade Application</h4>\n        Select the <strong>grade</strong> you are applying for {{unit.name}} below.\n      </div>\n      <div class="card-body text-center">\n        <div class="btn-group">\n          <label ng-repeat="grade in grades" ng-click="chooseGrade($index); status.isopen=false" class="btn btn-default col-sm-3" ng-model="project.target_grade" btn-radio="{{$index}}">\n            <grade-icon grade="grade" class="text-{{project.target_grade == grades.indexOf(grade) ? \'success\' : \'muted\'}}"></grade-icon>\n          </label>\n        </div>\n        <p class="help-block">\n          Make sure your <strong>Learning Summary Report</strong> justifies how your portfolio demonstrates you have <strong>met all unit learning outcomes to a {{targetGrade}} level</strong>\n        </p>\n      </div>\n    </div>\x3c!--/select-the-grade--\x3e\n  </div>\x3c!--/content--\x3e\n  <div class="panel-footer clearfix">\n    <button class="btn btn-primary pull-left" ng-click="advanceActiveTab(-1)"><i class="fa fa-arrow-left"></i> Back</button>\n    <button class="btn btn-primary pull-right" ng-disabled="!agreedToAssessmentCriteria" ng-click="advanceActiveTab(1)">Next <i class="fa fa-arrow-right"></i></button>\n  </div>\n</div>\n')}]),angular.module("projects/states/portfolio/directives/portfolio-learning-summary-report-step/portfolio-learning-summary-report-step.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/portfolio/directives/portfolio-learning-summary-report-step/portfolio-learning-summary-report-step.tpl.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h3 class="panel-title">\n      {{activeTab.title}}\n    </h3>\n  </div>\n  <div class="panel-body">\n    <p>\n      Upload the Learning Summary Report, the primary porfolio document which\n      justifies your desired grade.\n    </p>\n    <p>\n      Your Learning Summary Report is a <strong>summary of what you have learnt in this unit</strong>.\n      It consists of two sections:\n      <ol>\n        <li>a self-assessment, and</li>\n        <li>your reflections on the unit.</li>\n      </ol>\n    </p>\n    <p>\n      The <strong>self-assessment</strong> indicates how your portfolio aligns\n      with the assessment criteria, and which grade you are applying for.\n    </p>\n    <p>\n      Your <strong>reflections</strong> are a personal comment on what you have\n      learnt in the unit, and how your knowledge and skills have developed.\n    </p>\n    <div class="card card-success" ng-class="{\'card-danger\': \'projectHasLearningSummaryReport() && !forceLSRSubmit\', \'card-success\': \'!(projectHasLearningSummaryReport() && !forceLSRSubmit)\'}">\n      <div class="card-heading" ng-show="projectHasLearningSummaryReport() && !forceLSRSubmit">\n        <h4>\n          <i class="fa fa-check"></i> Learning Summary Report Submitted\n        </h4>\n        Click <a ng-click="forceLSRSubmit = true">here</a> to re-upload a new Learning Summary Report\n      </div>\x3c!--/lsr-uploaded--\x3e\n      <div class="card-heading" ng-hide="projectHasLearningSummaryReport() && !forceLSRSubmit">\n        <h4>\n          <i class="fa fa-warning"></i> Before you submit the Learning Summary Report...\n        </h4>\n        Remember to <strong>provide a justification</strong> for why you believe\n        you have achieved a {{targetGrade}} in {{unit.name}}.\n      </div>\n      <div class="card-body" ng-show="!projectHasLearningSummaryReport() || (projectHasLearningSummaryReport() && forceLSRSubmit)">\n        <file-uploader\n          files="portfolioSubmission.learningSummaryReportFileUploadData.type"\n          payload="portfolioSubmission.learningSummaryReportFileUploadData.payload"\n          url="portfolioSubmission.portfolioUrl"\n          on-success="addNewFilesToPortfolio"></file-uploader>\n      </div>\n    </div>\n  </div>\n  <div class="panel-footer clearfix">\n    <button class="btn btn-primary pull-left" ng-click="advanceActiveTab(-1)"><i class="fa fa-arrow-left"></i> Back</button>\n    <button class="btn btn-primary pull-right" ng-disabled="!projectHasLearningSummaryReport()" ng-click="advanceActiveTab(1)">Next <i class="fa fa-arrow-right"></i></button>\n    <div class="help-block pull-right text-right col-md-8 col-sm-12" ng-hide="projectHasLearningSummaryReport()">\n      You\'re missing a Learning Summary Report. Upload one to continue.\n    </div>\n  </div>\n</div>\n')}]),angular.module("projects/states/portfolio/directives/portfolio-review-step/portfolio-review-step.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/portfolio/directives/portfolio-review-step/portfolio-review-step.tpl.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h3 class="panel-title">\n      {{activeTab.title}}\n    </h3>\n  </div>\n  <div class="panel-body">\n    <div class="card card-danger" ng-hide="hasLSR && hasTasksSelected">\n      <div class="card-heading">\n        <h4>\n          <i class="fa fa-warning"></i> There are issues with your portfolio\n        </h4>\n      </div>\n      <div class="card-body">\n        <p ng-hide="hasLSR">\n          Your portfolio <strong>must</strong> include a learning summary report.\n          Upload this before you schedule your portfolio to be compiled.\n        </p>\n        <p ng-hide="hasTasksSelected">\n          <p ng-show="unitHasILOs">\n            Your portfolio <strong>must</strong> include tasks aligned to the\n            unit\'s <strong>{{unit.ilos.length}} intended learning outcomes</strong>.\n            Please indicate which tasks you think align to the unit\'s learning\n            outcomes before you schedule your portfolio to be compiled.\n          </p>\n          <p ng-hide="unitHasILOs">\n            Your portfolio <strong>must</strong> include tasks that you have\n            completed this teaching period. Please indicate which tasks you you would\n            like to include in your portfolio before you schedule your portfolio\n            to be compiled.\n          </p>\n        </p>\n      </div>\n    </div>\x3c!--/warnings--\x3e\n    <div class="card card-default" ng-show="portfolioIsCompiling">\n      <div class="card-heading">\n        <h4>Portfolio Processing</h4>\n      </div>\n      <div class="card-body">\n        <p>\n          Your portfolio compilation is scheduled with {{externalName.value}}.\n          This process will take some time, check back soon to see if your\n          portfolio is available.\n        </p>\n      </div>\n    </div>\x3c!--/processing--\x3e\n    <div ng-show="canCompilePortfolio">\n      <p>\n        {{externalName.value}} will create your portfolio once you are happy with your\n        submissions so far.\n      </p>\n      <div ng-show="extraFiles().length > 0">\n        <p>\n          You have attached <strong>{{extraFiles().length}} extra file{{extraFiles().length > 1 ? \'s\' : \'\'}}</strong>\n          to your portfolio. You may add more files or remove {{extraFiles().length > 1 ? \'these\' : \'this\'}}\n          file{{extraFiles().length > 1 ? \'s\' : \'\'}} in the previous step. Each file is listed\n          in order of attachment below:\n        </p>\n        <ol>\n          <li ng-repeat="file in extraFiles()">\n            <i class="fa fa-file-{{file.kind}}-o"></i> {{file.name}}\n          </li>\n        </ol>\n      </div>\n      <div ng-show="selectedTasks().length > 0">\n        <p>\n          You have included <strong>{{selectedTasks().length}} tasks</strong> in your portfolio. If you wish to add or remove some of these tasks,\n          please review the <em>Select Tasks</em> step to adjust your alignments of each\n          task to the unit\'s learning outcomes. Each task will be attached in the order below:\n        </p>\n        <ol>\n          <li ng-repeat="task in selectedTasks()">\n            <label class="label label-info">{{task.definition.abbreviation}}</label>\n            {{task.definition.name}}\n          </li>\n        </ol>\n      </div>\n    </div>\n    <div class="card card-default" ng-show="canCompilePortfolio">\n      <div class="card-heading">\n        <h4>Create Your Portfolio</h4>\n      </div>\n      <div class="card-body">\n        <p>\n          Once you click Create Portfolio, the construction of your portfolio will\n          be scheduled with {{externalName.value}}. This process will take some time, and you\n          will be emailed when your portfolio is ready to review if you have enabled\n          portfolio notifications.\n        </p>\n        <p class="strong">\n          If you would like to make any further changes after you have created\n          your portfolio, you will need to delete and recreate your portfolio.\n        </p>\n      </div>\n      <div class="card-footer">\n        <button class="btn btn-success form-control" ng-click="toggleCompileProject()">\n          <i class="fa fa-book"></i> Create My Portfolio\n        </button>\n      </div>\n    </div>\x3c!--/create-portfolio--\x3e\n    <div class="card card-default" ng-show="project.portfolio_available">\n      <div class="card-heading">\n        <h4>Download Portfolio</h4>\n      </div>\n      <div class="card-body">\n        This is the <strong>exact same document</strong> your assessor will see\n      </div>\n      <div class="card-footer">\n        <button class="btn btn-danger" ng-click="deletePortfolio()">\n          <i class="fa fa-trash-o"></i> Delete Portfolio\n        </button>\n        <a href="{{project.portfolioUrlAsAttachment()}}" target="_blank" class="btn btn-success">\n          <i class="fa fa-download"></i> Download Portfolio\n        </a>\n      </div>\n    </div>\n  </div>\n  <div class="panel-footer clearfix">\n    <button class="btn btn-primary pull-left" ng-click="advanceActiveTab(-1)"><i class="fa fa-arrow-left"></i> Back</button>\n  </div>\n</div>\n')}]),angular.module("projects/states/portfolio/directives/portfolio-tasks-step/portfolio-tasks-step.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/portfolio/directives/portfolio-tasks-step/portfolio-tasks-step.tpl.html",'<div class="panel panel-default">\n  <div class="panel-heading" ng-show="unitHasILOs">\n    <h3 class="panel-title"> Relate ILOs to Tasks </h3>\n  </div>\n  <div class="panel-heading" ng-hide="unitHasILOs">\n    <h3 class="panel-title"> Select tasks to include </h3>\n  </div>\n  <div class="panel-body">\n    <p ng-show="unitHasILOs">\n      For each task, please indicate whether you think this task is related to one\n      or more of the unit\'s <strong>{{unit.ilos.length}} learning outcomes</strong>.\n      You may provide a rationale for each task selected, which will be noted in\n      your portfolio.\n    </p>\n    <p ng-hide="unitHasILOs">\n      Please indicate which tasks you would like to include in your portfolio.\n    </p>\n  </div>\n  <task-ilo-alignment-editor\n    unit="unit"\n    class="card-body"\n    project="project"\n    hide-panel="true"\n    hide-graph="true"\n    show-include-tasks="true"></task-ilo-alignment-editor>\n  <div class="panel-footer clearfix">\n    <button class="btn btn-primary pull-left" ng-click="advanceActiveTab(-1)"><i class="fa fa-arrow-left"></i> Back</button>\n    <button class="btn btn-primary pull-right" ng-disabled="noTasksSelected()" ng-click="advanceActiveTab(1)">Next <i class="fa fa-arrow-right"></i></button>\n    <div class="help-block pull-right col-sm-4" ng-show="noTasksSelected()">\n'+"      You need to select at least one task {{unitHasILOs ? 'that is aligned to an ILO above' : 'above'}}, otherwise your portfolio will be consist of no tasks.\n    </div>\n  </div>\n</div>\n")}]),angular.module("projects/states/portfolio/directives/portfolio-welcome-step/portfolio-welcome-step.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/portfolio/directives/portfolio-welcome-step/portfolio-welcome-step.tpl.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h3 class="panel-title">Portfolio Preparation</h3>\n  </div>\n  <div class="panel-body">\n    <p>Preparing your portfolio involves 5 steps:</p>\n    <ol>\n      <li>Select your <strong>Grade</strong> you are applying for</li>\n      <li>Upload your <strong>Learning Summary Report</strong></li>\n      <li>Select the <strong>Tasks</strong> you want included</li>\n      <li>Upload any <strong>Other Resources</strong> you want to add</li>\n      <li><strong>Compile</strong> your resources into your portfolio and review</li>\n    </ol>\n    <p>\n      Once you have completed all of these steps, your portfolio will be prepared by {{externalName.value}} and you will be notified when it is ready. You can then check your work, and if you want to make any corrections repeat these steps to create a new version of your portfolio.\n    </p>\n  </div>\x3c!--/welcome-step--\x3e\n  <div class="panel-footer clearfix">\n    <button class="btn btn-primary pull-right" ng-click="advanceActiveTab(1)">Next <i class="fa fa-arrow-right"></i></button>\n  </div>\n</div>\n')}]),angular.module("projects/states/portfolio/portfolio.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/portfolio/portfolio.tpl.html",'<div class="container" id="portfolio-state">\n  <tabset class="tabset-icon">\n    <tab ng-repeat="tab in tabs | toArray | orderBy: \'seq\'" active="tab.active" disabled="true">\n      <tab-heading>\n        <strong>Step {{tab.seq}}:</strong> {{tab.title}}\n      </tab-heading>\n    </tab>\n  </tabset>\x3c!--/tabs--\x3e\n  <portfolio-welcome-step ng-if="activeTab == tabs.welcomeStep"></portfolio-welcome-step>\n  <portfolio-grade-select-step ng-if="activeTab == tabs.gradeStep"></portfolio-grade-select-step>\n  <portfolio-learning-summary-report-step ng-if="activeTab == tabs.summaryStep"></portfolio-learning-summary-report-step>\n  <portfolio-tasks-step ng-if="activeTab == tabs.taskStep"></portfolio-tasks-step>\n  <portfolio-add-extra-files-step ng-if="activeTab == tabs.otherFilesStep"></portfolio-add-extra-files-step>\n  <portfolio-compile-step ng-if="activeTab == tabs.compileStep"></portfolio-compile-step>\n  <portfolio-review-step ng-if="activeTab == tabs.reviewStep"></portfolio-review-step>\n</div>\n')}]),angular.module("projects/states/tutorials/tutorials.tpl.html",[]).run(["$templateCache",function(t){t.put("projects/states/tutorials/tutorials.tpl.html",'<div class="container" id="tutorials-state">\n  <div class="panel panel-default">\n    <div class="panel-heading">\n      <h4 class="panel-title">Select a Tutorial</h4>\n    </div>\n    <div class="panel-body">\n      <p>\n        Click the plus on the specific tutorial to enrol in that tutorial, or click\n        the minus icon to withdraw from your current tutorial.\n      </p>\n      <p>\n        You are currently enrolled in\n        <strong ng-show="project.tutorial">\n          {{project.tutorial.abbreviation}}.\n        </strong>\n        <strong ng-hide="project.tutorial">\n          no tutorial.\n        </strong>\n    </div>\n    <table class="table table-condensed table-hover">\n      <thead>\n        <tr>\n          <th class="code">\n            <a ng-click="sortOrder=\'abbreviation\'; reverse=!reverse">Code</a>\n          </th>\n          <th class="day">\n            <a ng-click="sortOrder=\'meeting_day\'; reverse=!reverse">Day</a>\n          </th>\n          <th class="time">\n            <a ng-click="sortOrder=\'meeting_time\'; reverse=!reverse">Time</a>\n          </th>\n          <th class="room">\n            <a ng-click="sortOrder=\'meeting_location\'; reverse=!reverse">Room</a>\n          </th>\n          <th class="tutor">\n            <a ng-click="sortOrder=\'tutor_name\'; reverse=!reverse">Tutor</a>\n          </th>\n          <th class="actions">\n            Actions\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="tutorial in unit.tutorials | orderBy:sortOrder:reverse"\n          ng-class="{\'info\': tutorial == project.tutorial}">\n          <td>{{tutorial.abbreviation}}</td>\n          <td>{{tutorial.meeting_day}}</td>\n          <td>{{tutorial.meeting_time | date: \'shortTime\'}}</td>\n          <td>{{tutorial.meeting_location}}</td>\n          <td>{{tutorial.tutor_name}}</td>\n          <td>\n            <button\n              class="btn btn-default btn-sm"\n              ng-click ="setTutorial(tutorial.id)"\n              ng-hide="project.tutorial_id == tutorial.id">\n              <i class="fa fa-plus"></i> Enrol\n            </button>\n            <button\n              ng-show="project.tutorial_id == tutorial.id"\n              class="btn btn-danger btn-sm"\n              ng-click="setTutorial(-1)">\n              <i class="fa fa-minus"></i> Withdraw\n            </button>\n          </td>\n      </tbody>\n    </table>\n  </div>\n</div>\n')}]),angular.module("sessions/states/sign-in/sign-in.tpl.html",[]).run(["$templateCache",function(t){t.put("sessions/states/sign-in/sign-in.tpl.html",'<div id="sign-in" class="center-full-screen" ng-if="authMethodLoaded">\n  <div ng-if="noIE" class="no-ie">\n    <h1 class="logo">\n      <p>\n        <a href="http://www.apple.com/safari/" tooltip="Safari is compatible with {{externalName.value}}" tooltip-append-to-body="true">\n          <i class="fa fa-safari text-primary"></i>\n        </a>\n        <a href="http://www.google.com/chrome" tooltip="Chrome is compatible with {{externalName.value}}" tooltip-append-to-body="true">\n          <i class="fa fa-chrome text-primary"></i>\n        </a>\n        <a href="http://www.firefox.com/" tooltip="Firefox is compatible with {{externalName.value}}" tooltip-append-to-body="true">\n          <i class="fa fa-firefox text-primary"></i>\n        </a>\n        <a href="http://browsehappy.com" tooltip="This version of Internet Explorer is not compatible with {{externalName.value}}" tooltip-append-to-body="true">\n          <i class="fa fa-internet-explorer text-danger"></i>\n        </a>\n      </p>\n      {{externalName.value}}\n    </h1>\n    <p class="upgrade"> To use {{externalName.value}}, you should <a href="http://browsehappy.com/">upgrade your browser</a></p>\n  </div>\n  <div ng-if="!noIE" class="login">\n    <h1 class="logo">\n      <i class="logo"></i> {{externalName.value}}\n      <p class="lead">Learning Management System<p>\n    </h1>\n    <form name="form" ng-submit="signIn()" ng-if="aafLogin === false">\n      <div class="username-password-entry" ng-class="{\'invalid-credentials\': invalidCredentials}">\n        <input autofocus class="form-control" name="username" type="username" placeholder="Username" ng-model="session.username" auto-fill-sync required />\n        <input class="form-control" name="password" type="password" placeholder="Password" ng-model="session.password" password-validate auto-fill-sync required />\n      </div>\n      <button class="btn btn-lg btn-primary btn-block text-center" type="submit">\n        <span ng-hide="signingIn">Sign In</span>\n        <i class="fa fa-spinner fa-pulse" ng-show="signingIn"></i>\n      </button>\n      <label class="checkbox remember-me">\n        <input type="checkbox" ng-model="session.remember_me"></input>\n        <span>Remember Me</span>\n      </label>\n    </form>\n    <form name="form" ng-if="aafLogin">\n      <a class="btn btn-lg btn-primary btn-block text-center" ng-href="{{aafLogin}}">\n        Click to Sign In...\n      </a>\n    </form>\n  </div>\n  <footer class="about-doubtfire text-center">\n    <a href="" ng-click="openAboutModal()">About {{externalName.value}}</a>\n  </footer>\n</div>\n<div class="center-full-screen" ng-show="authMethodFailed || waitingAWhile">\n  <i class="fa fa-spinner fa-pulse fa-5x" ng-if="!authMethodLoaded && waitingAWhile && !authMethodFailed"></i>\n  <div class="panel panel-danger" ng-if="authMethodFailed">\n    <div class="panel-heading">\n      <h3 class="panel-title">{{externalName.value}} Down</h3>\n    </div>\n    <div class="panel-body">\n      <p>{{externalName.value}} cannot connect to the server.</p>\n      <p>Please check that <a href="{{api}}"><code>{{api}}</code></a> is up and running or try again in a while.</p>\n    </div>\n  </div>\n</div>\n')}]),angular.module("sessions/states/sign-out/sign-out.tpl.html",[]).run(["$templateCache",function(t){t.put("sessions/states/sign-out/sign-out.tpl.html",'<div class="container text-center center-full-screen">\n  <h1>\n    <i class="fa fa-sign-out fa-5x"></i>\n    <br>\n    Signing out...\n  </h1>\n</div>\n')}]),angular.module("tasks/modals/grade-task-modal/grade-task-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/modals/grade-task-modal/grade-task-modal.tpl.html",'<div class="grade-task-modal">\n  <div class="modal-header">\n    <h3>Assess Task Quality</h3>\n  </div>\n  <div class="modal-body text-center">\n    <div ng-if="task.definition.is_graded">\n      <p>Please provide a grade to change the student\'s status for task <label class="label label-info">{{task.definition.abbreviation}}</label>.</p>\n      <p class="btn-group">\n        <label ng-repeat="idx in gradeValues" class="btn btn-default col-sm-15 text-center" ng-model="data.desiredGrade" btn-radio="{{idx}}">\n          <grade-icon grade="grades[idx]" tooltip="This student completed the task to a {{grades[idx]}} standard" tooltip-append-to-body="true"></grade-icon>\n        </label>\n      </p>\n    </div>\n    <div ng-if="task.definition.max_quality_pts > 0">\n      <p>Please provide a quality rating for task <label class="label label-info">{{task.definition.abbreviation}}</label>.</p>\n      <rating class="task-quality-rating" ng-click="checkClearRating()" ng-model="data.rating" on-hover="hoveringOver(value)" on-leave="hoveringOver(null)" max="numStars" state-on="\'fa fa-3x fa-star icon-colorful\'" state-off="\'fa fa-3x fa-star icon-disable\'"></rating>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <button class="btn btn-default" ng-click="dismiss()">\n      <i class="fa fa-times"></i>\n    </button>\n    <button class="btn btn-primary" ng-click="close()" ng-disabled="task.is_graded && data.desiredGrade == null">\n      <i class="fa fa-check"></i>\n    </button>\n  </div>\n</div>\n')}]),angular.module("tasks/modals/plagiarism-report-modal/plagiarism-report-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/modals/plagiarism-report-modal/plagiarism-report-modal.tpl.html",'<div class="plagiarism-report-modal">\n  <div class="modal-header">\n    <h3>Similarity Report</h3>\n  </div>\x3c!--/modal-header--\x3e\n  <div class="modal-body clearfix">\n    <task-plagiarism-report-viewer task="task"></task-plagiarism-report-viewer>\n  </div>\n  <div class="modal-footer">\n    <button class="btn btn-default" ng-click="$dismiss()">\n      <i class="fa fa-times"></i> Close\n    </button>\n  </div>\n</div>\n')}]),angular.module("tasks/modals/upload-submission-modal/upload-submission-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/modals/upload-submission-modal/upload-submission-modal.tpl.html",'<div class="upload-submission-modal">\n  <div class="modal-header">\n    <h3>Submit\n      <strong>{{task.definition.abbreviation}}</strong> as\n      <select \n        class="form-control input-lg submission-type"\n        ng-if="!uploader.isUploading"\n        ng-change="onSelectNewSubmissionType(submissionType)"\n        ng-model="submissionType"\n        ng-options="id as label for (id, label) in submissionTypes">\n      </select>\n      <span ng-show="uploader.isUploading">\n        {{submissionTypes[submissionType]}}\n      </span>\n    </h3>\n  </div>\x3c!--/modal-header--\x3e\n  <div class="modal-body">\n    <div \n      class="state state-group"\n      ng-class="{\'state-hidden-left\': isHidden(\'group\').left,\n                 \'state-hidden-right\': isHidden(\'group\').right}">\n      <div class="card card-default">\n        <div class="card-heading">\n          <h4>\n            Team Contribution\n          </h4>\n          <p>\n            Please rate each team member\'s effort on working on {{task.definition.name}} \n            by clicking on a <i class="fa fa-child"></i> icon that represents their \n            assigned effort.\n          </p>\n          <p class="text-muted">\n            To mark a team member as contributing <strong> no effort </strong> click\n            on a <i class="fa fa-child"></i> icon twice.\n          </p>\n        </div>\n        \x3c!--/card-heading--\x3e\n        <group-member-contribution-assigner \n          task="task"\n          class="card-body"\n          project="task.project()"\n          team="team">\n        </group-member-contribution-assigner>\x3c!--/group-member-contribution--\x3e\n      </div>\x3c!--/card-group--\x3e\n    </div>\x3c!--/state-group--\x3e\n    <div class="state state-files" ng-class="{\'state-hidden-left\': isHidden(\'files\').left,\n                 \'state-hidden-right\': isHidden(\'files\').right,\n                 \'state-files-uploading\': uploader.isUploading}">\n      <div ng-class="{\'card card-default\': !uploader.isUploading}">\n        <div class="card-heading" ng-hide="uploader.isUploading">\n          <h4>\n            Select {{submissionType == \'need_help\' ? \'files\' : \'evidence\'}} to upload\n          </h4>\n          <span ng-hide="submissionType == \'need_help\'">\n            Select files from your device that show evidence of your work until no more required files are pending.\n          </span>\n          <span ng-show="submissionType == \'need_help\'">\n            Select files from your device that you need help with. You will need to upload all required files for this submission to\n            get help on this task but it does not matter if they are not finished.\n          </span>\n        </div>\n        <div class="card-body">\n          <file-uploader \n            files="uploader.files"\n            url="uploader.url"\n            payload="uploader.payload"\n            single-drop-zone="true"\n            show-upload-button="false"\n            reset-after-upload="false"\n            is-ready="uploader.isReady"\n            is-uploading="uploader.isUploading"\n            initiate-upload="uploader.start"\n            on-click-failure-cancel="uploader.onFailureCancel"\n            on-before-upload="uploader.onBeforeUpload"\n            on-success="uploader.onSuccess"\n            on-complete="uploader.onComplete"></file-uploader>\n        </div>\n      </div>\n    </div>\n    \x3c!--/state-files--\x3e\n    <div \n      class="state state-alignment" \n      ng-class="{\'state-hidden-left\': isHidden(\'alignment\').left,\n                 \'state-hidden-right\': isHidden(\'alignment\').right}">\n      <div class="card card-default">\n        <div class="card-heading">\n          <h4>\n            Learning Outcome Alignment\n          </h4>\n          <p>\n            Please rate the relevancy of this task to the specific learning outcome.\n            You <strong>must</strong> relate this task to at least one outcome.\n          </p>\n          <p class="text-muted">\n            If you think the task is not related to a specific outcome, click the highest filled circle to remove its relevancy.\n          </p>\n        </div>\n        \x3c!--/card-heading--\x3e\n        <div class="list-group">\n          <div class="list-group-item clearfix" ng-repeat="ilo in ilos | orderBy: \'ilo_number\'">\n            <div class="col-sm-12 col-md-7 pointer" ng-click="ilo.collapsed = !ilo.collapsed">\n              <h4>\n                <strong>{{ilo.abbreviation}}</strong>\n                <small>{{ilo.name}}</small>\n              </h4>\n              <div>Staff believe that {{ilo.staffAlignment.label | lcfirst}}. Click to expand.</div>\n              <div class="panel panel-default" collapse="!ilo.collapsed">\n                <div class="panel-body">\n                  <p>\n                    <h5>Outcome Description</h5>\n                    <div class="markdown-to-html" ng-bind-html="ilo.description | markdown"></div>\n                  </p>\n                  <p ng-show="ilo.staffAlignment.rating > 0">\n                    <h5>Rationale</h5>\n                    <div class="markdown-to-html" ng-bind-html="ilo.staffAlignment.rationale | markdown"></div>\n                  </p>\n                </div>\n              </div>\n            </div>\x3c!--/ilo-description--\x3e\n            <div class="col-sm-12 col-md-5">\n              <task-ilo-alignment-rater\n                readonly="false"\n                unit="task.unit()"\n                show-zero-rating="true"\n                ng-model="alignments[ilo.id]">\n              </task-ilo-alignment-rater>\n            </div>\x3c!--/alignment-rater--\x3e\n          </div>\n        </div>\x3c!--/alignment-list-group--\x3e\n        <div class="card-footer">\n          <p>\n            Jusitfy your relevancy alignments with a comment to explain your choices.\n          </p>\n          <textarea ng-model="alignmentsRationale" class="form-control input-lg" rows="3" placeholder="My rationale is...">\n          </textarea>\n        </div>\x3c!--/comments-for-alignment--\x3e\n      </div>\x3c!--/card-alignment--\x3e\n    </div>\x3c!--/state-alignment--\x3e\n    <div \n      class="state state-comments" \n      ng-class="{\'state-hidden-left\': isHidden(\'comments\').left,\n                 \'state-hidden-right\': isHidden(\'comments\').right}">\n      <div class="card card-default">\n        <div class="card-heading">\n          <h4 ng-show="submissionType == \'need_help\'">\n            What do you need help with?\n          </h4>\n          <h4 ng-hide="submissionType == \'need_help\'">\n            Final comments\n          </h4>\n          <span ng-show="submissionType == \'need_help\'">\n            Supply a comment on what you would like help on for this task so your tutor can assist you.\n          </span>\n          <span ng-hide="submissionType == \'need_help\'">\n            Supply an <strong>optional</strong> comment about this submission for your tutor to read as they assess.\n          </span>\n        </div>\x3c!--/card-heading--\x3e\n        <div class="card-body">\n          <textarea ng-model="comment" class="form-control input-lg" rows="3" placeholder="{{submissionType == \'need_help\' ? \'I need help with...\' : \'Make a comment...\'}}">\n          </textarea>\n        </div>\n      </div>\x3c!--/card-comments--\x3e\n      <div class="card card-default" ng-show="privacyPolicy.privacy">\n        <div class="card-heading">\n          <h4>\n            Declaration\n          </h4>\n        </div>\x3c!--/card-heading--\x3e\n        <div class="card-body">\n          <span>\n            {{privacyPolicy.privacy}}\n          </span>\n          <a href="#" ng-click="showPlagiarism = !showPlagiarism">Plagiarism and collusion</a>\n          <div ng-show="showPlagiarism">\n            <h4>Plagiarism and Collusion</h4>\n            <span>\n              {{privacyPolicy.plagiarism}}\n            </span>\n          </div>\n        </div>\n      </div>\x3c!--/declaration--\x3e\n    </div>\x3c!--/state-comments--\x3e\n  </div>\n</div>\x3c!--/modal-body--\x3e\n<div class="modal-footer" ng-hide="uploader.isUploading">\n  <button class="btn btn-danger pull-left" ng-click="$dismiss()" ng-disabled="shouldDisableBtn.cancel()" ng-show="shouldShowBtn.cancel()">\n    <i class="fa fa-times"></i> Cancel Submission\n  </button>\n  \x3c!--/cancel-button--\x3e\n  <button class="btn btn-default" ng-click="goToState.previous()" ng-disabled="shouldDisableBtn.back()" ng-show="shouldShowBtn.back()">\n    <i class="fa fa-arrow-left"></i> Back\n  </button>\n  \x3c!--/back-button--\x3e\n  <button class="btn btn-default" ng-click="goToState.next()" ng-disabled="shouldDisableBtn.next()" ng-show="shouldShowBtn.next()">\n    Next\n    <i class="fa fa-arrow-right"></i>\n  </button>\n  \x3c!--/next-button--\x3e\n  <button class="btn btn-success" ng-click="uploadButtonClicked()" ng-disabled="shouldDisableBtn.submit()" ng-show="shouldShowBtn.submit()">\n    <i class="fa fa-upload"></i> Upload Submission\n  </button>\n  \x3c!--/upload-button--\x3e\n</div>\n\x3c!--/modal-footer--\x3e\n</div>')}]),angular.module("tasks/project-tasks-list/project-tasks-list.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/project-tasks-list/project-tasks-list.tpl.html",'<ul class="project-tasks-list">\n  <div ng-repeat="(groupSetId, relatedTasks) in project.tasks | groupBy: \'definition.group_set_id\'" class="group-set-tasks clearfix">\n    <h5 class="group-set-name" ng-hide="hideGroupSetName">{{groupSetName(groupSetId)}}</h5>\n    <li class="col-xs-4 col-lg-3" ng-repeat="task in relatedTasks | byGrade:project.target_grade | orderBy: \'definition.seq\'">\n      <button type="button" class="col-xs-12 btn task-status {{statusClass(task.status)}}" ng-click="onSelect(task, \'Task Button List\')" tooltip-popup-delay=\'200\' tooltip-placement="bottom" tooltip-html-unsafe="<strong>{{taskDefinition(task).name}}:</strong><br>{{task.status_txt()}}">\n        <i class="fa fa-eye" ng-show="task.similar_to_count - task.similar_to_dismissed_count > 0"></i> {{taskText(task)}}\n      </button>\n    </li>\n  </div>\n</ul>\n')}]),angular.module("tasks/project-top-tasks-list/project-top-tasks-list.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/project-top-tasks-list/project-top-tasks-list.tpl.html",'<div class="project-top-tasks-list">\n  <div class="help-block text-center all-completed" ng-show="topTasks.length == 0">You have completed all of the tasks!</div>\n  <table ng-hide="topTasks.length == 0" class="table table-condensed table-hover table-pointer ">\n    <thead>\n      <tr>\n        <th class="task-abbreviation">\n          <a ng-click="sortOrder=\'task.definition.abbreviation\'; reverse=!reverse">\n            Task <i ng-show="sortOrder==\'task.definition.abbreviation\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i>\n          </a>\n        </th>\n        <th class="status">\n          <a ng-click="sortOrder=\'statusSeq()\'; reverse=!reverse">\n            Status <i ng-show="sortOrder==\'statusSeq()\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i>\n          </a>\n        </th>\n        <th class="reason">\n          <a ng-click="sortOrder=\'reason\'; reverse=!reverse">\n            Reason <i ng-show="sortOrder==\'reason\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i>\n          </a>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="data in topTasks" ng-click="onSelect(data.task, \'Top Task Select\')">\n        <td ng-click="viewTask(data.task)">\n          <label class="label label-info pointer label-task-definition" tooltip="{{data.task.definition.name}}" tooltip-append-to-body="true">\n            {{data.task.definition.abbreviation}}\n          </label>\n        </td>\n        <td ng-click="viewTask(data.task)">\n          <status-icon status="data.task.status"></status-icon>\n        </td>\n        <td ng-click="viewTask(data.task)">{{data.reason}}</td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n')}]),angular.module("tasks/task-comment-composer/task-comment-composer.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-comment-composer/task-comment-composer.tpl.html",'<form class="input-group col-sm-12 comment-submitter" ng-submit="addComment()" role="form">\n  \x3c!--\n  <button type="button" >\n    <i class="fa fa-microphone"></i>\n  </button> --\x3e\n\n  <button class="btn-recorder" type="button" popover-template="audioPopover" ng-click="isRecorderOpen = !isRecorderOpen">\n    <span class="fa fa-microphone"></span>\n  </button>\n\n  <div class="image-uploader" ngf-drop ng-show="upload.model == null || upload.model.length == 0" ng-model="upload.model" ng-model-rejected="upload.rejects"\n    ngf-change="modelChanged($files, upload)" ngf-accept="{{upload.accept}}" ngf-drag-over-class="{accept:\'file-over\', reject:\'file-over\', delay:100}"\n    ngf-drop-available="dropSupported">\n\n    <div id="textField" contenteditable ng-keypress="keyPress($event)" ng-model="comment.text" placeholder="Type a comment, or try dragging an image, audio or pdf..."></div>\n\n    <p ng-show="upload.display.error">\n      Invalid file type!\n    </p>\n\n    <p ng-hide="dropSupported || upload.display.error">\n      Click to select image file\n    </p>\n  </div>\n  <div ng-if="!singleDropZone && upload.model.length > 0" class="selected-files">\n    <span class="selected-file">\n      <i class="file-type fa fa-file-o"></i>\n      {{formatImageName(upload.model[0].name)}}\n    </span>\n    <a class="clear-upload" ng-click="clearEnqueuedUpload(upload)">\n      <i class="clear-upload fa fa-times"></i>\n    </a>\n    <a class="send-upload" ng-click="postAttachmentComment()">\n      <i class="fa fa-paper-plane"></i>\n    </a>\n  </div>\n</form>\n\n\x3c!-- The HTML which will be injected into the audio popover --\x3e\n<script type="text/ng-template" id="audioRecorderPopover.html">\n  <audio-recorder ng-if="isRecorderOpen"></audio-recorder>\n<\/script>')}]),angular.module("tasks/task-comments-viewer/task-comments-viewer.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-comments-viewer/task-comments-viewer.tpl.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <div class="panel-title">\n      Comments on this task\n    </div>\n  </div>\n  <div class="panel-body">\n    <div class="comment" ng-repeat="comment in task.comments | orderBy:\'+created_at\'" ng-class="{\'comment-by-other-user\': !comment.author_is_me, \'new-comment\': comment.is_new}">\n      <user-icon size="50" user="comment.author" ng-class="{\'hidden-xs hidden-sm\': comment.author_is_me}" tooltip="{{comment.author.name}} {{comment.created_at | humanizedDate}}"\n        tooltip-append-to-body="true" tooltip-popover-delay="500" tooltip-placement="left">\n      </user-icon>\n\n      <div ng-class="comment.type == \'image\' || comment.type == \'pdf\' ? \'image-bubble\' : \'comment-bubble\'">\n\n        <div ng-show="comment.type == \'text\'" class="comment-text">\n          <div class="markdown-to-html" ng-bind-html="comment.comment | markdown"></div>\n        </div>\n\n        <div ng-if="comment.type == \'audio\'" class="comment-text comment-audio">\n          <audio-player></audio-player>\n        </div>\n\n        <div ng-if="comment.type == \'image\'" class="comment-image">\n          \x3c!-- <p>Image here?</p> --\x3e\n          <a ng-click="openCommentsModal(comment)">\n            <img ng-src="{{getCommentAttachment(comment)}}" width="100%" height="100%" />\n          </a>\n        </div>\n        \x3c!-- Add PDF support --\x3e\n        <div ng-if="comment.type == \'pdf\'" class="comment-pdf">\n          <a ng-click="openCommentsModal(comment)">\n            <i class="fa fa-file-pdf-o" style="font-size: 3em;"></i>\n          </a>\n        </div>\n\n        <div class="delete-comment" ng-click="deleteComment(comment.id)" ng-show="{{canUserEdit(comment)}}" tooltip-append-to-body="true">\n          <i class="fa fa-trash"></i>\n        </div>\n        \x3c!--/delete-comment--\x3e\n      </div>\n      \x3c!--/comment-bubble--\x3e\n    </div>\n    \x3c!--/comment--\x3e\n    <div class="read-receipt" ng-show="lastComment.author_is_me && lastComment.recipient_read_time">\n      Read {{lastComment.recipient_read_time | humanizedDate}} by {{lastComment.recipient.name}}\n    </div>\n  </div>\n  \x3c!--/comment-list--\x3e\n  <div class="panel-footer">\n    <task-comment-composer task="task"></task-comment-composer>\n  </div>\n</div>')}]),angular.module("tasks/task-definition-editor/task-definition-editor.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-definition-editor/task-definition-editor.tpl.html",'<div class="panel panel-primary task-definition-editor">\n  <div class="panel-heading clearfix">\n    <h3 class="panel-title">\n      {{task ? (isNew ? "Create Task" : "Editing " + task.abbreviation + " - " + task.name) : "Task Details"}}\n    </h3>\n  </div>\n  <div class="panel-body large-notice-block" ng-hide="task" ng-hide="task">\n    <i class="fa fa-tasks"></i>\n    <p>Select a task to view its definition in detail</p>\n  </div>\n  <div class="panel-body" ng-show="task">\n    <form class="form-horizontal" role="form">\n    <div class="task-admin-tabs">\n        <tabset class="pull-left col-md-2" vertical="true" type="pills">\n          <tab ng-repeat="(tabKey, tab) in taskAdmin.tabsData | orderObjectBy: \'seq\'" active="tab.active" ng-click="setActiveTab(tab)">\n            <tab-heading tooltip="{{tab.title}}" tooltip-placement="right" tooltip-popup-delay="200">\n              <div class="text-center">\n                <i class="fa fa-2x {{tab.icon}}" style="margin-right: 1ex"></i>\n              </div>\n            </tab-heading>\n          </tab>\n        </tabset>\x3c!--/tab-selector--\x3e\n\n        <div class="col-md-10 pull-right task-admin-tab-contents">\n          <div class="panel panel-default">\n            <div class="panel-heading row-fluid">\n              <h3 class="panel-title">\n                {{activeTab.title}}\n              </h3>\n              {{activeTab.subtitle}}\n            </div>\n            <div class="task-admin-tab-panel panel-body">\n              <div ng-show="activeTab == taskAdmin.tabsData.taskSheet">\n                <div class="form-group" ng-required="isNew">\n                  <label class="col-sm-3 control-label">Name</label>\n                  <div class="col-sm-8">\n                    <input type="text" class="form-control" ng-model="task.name">\n                  </div>\n                </div>\x3c!--/name--\x3e\n\n                <div class="form-group" ng-required="isNew">\n                  <label class="col-sm-3 control-label">Abbreviation</label>\n                  <div class="col-sm-8">\n                    <input type="text" class="form-control" ng-model="task.abbreviation"/>\n                  </div>\n                </div>\x3c!--/abbr--\x3e\n\n                <div class="form-group" ng-required="isNew">\n                  <label class="col-sm-3 control-label">Grade</label>\n                  <div class="col-sm-7">\n                    <label ng-repeat="grade in grades" name="target-grade-{{grade}}" class="radio-inline" for="target-grade-{{grade}}">\n                      <input type="radio" id="target-grade-{{grade}}" value="{{$index}}" ng-model="task.target_grade"/>{{grade}}\n                    </label>\n                  </div>\n                </div>\x3c!--/grade--\x3e\n\n                <div class="form-group" ng-required="isNew">\n                  <label class="col-sm-3 control-label">Description</label>\n                  <div class="col-sm-8">\n                    <textarea class="form-control" ng-model="task.description"></textarea>\n                  </div>\n                </div>\x3c!--/desc--\x3e\n\n                <div class="form-group" ng-required="isNew">\n                  <label class="col-sm-3 control-label">Weighting</label>\n                  <div class="col-sm-8">\n                    <input type="number" class="form-control" ng-model="task.weight" min="1"/>\n                  </div>\n                </div>\x3c!--/weighting--\x3e\n\n                <div class="form-group" ng-required="isNew" ng-show="unit.hasGroupwork()">\n                  <label class="col-sm-3 control-label">Group Task</label>\n                  <div class="col-sm-8">\n                    <select class="form-control" ng-model="task.group_set" ng-options="gs.name for gs in unit.group_sets track by gs.id"><option value="">None</option></select>\n                  </div>\n                </div>\x3c!--/group task--\x3e\n                <div class="form-group" ng-required="isNew">\n                  <label class="col-sm-3 control-label">Restricted</label>\n                  <div class="col-sm-7">\n                    <button type="button" class="btn btn-default" ng-model="task.restrict_status_updates" btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0">\n                      <i class="fa fa-{{task.restrict_status_updates ? \'check\' : \'times\'}}"></i>\n                    </button>\n                    <span class="help-block">\n                      If true, the status cannot be changed by students after it has been assigned by staff\n                    </span>\n                  </div>\n                </div>\x3c!--/restricted--\x3e\n\n                <div class="form-group" ng-required="isNew">\n                  <label class="col-sm-3 control-label">Graded</label>\n                  <div class="col-sm-7">\n                    <button type="button" class="btn btn-default" ng-model="task.is_graded" btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0">\n                      <i class="fa fa-{{task.is_graded ? \'check\' : \'times\'}}"></i>\n                    </button>\n                    <span class="help-block">\n                      If true, the task will be assessed with a grade to a specific standard. For example, <em>the task was completed to a HD standard</em>.\n                    </span>\n                  </div>\n                </div>\x3c!--/graded-task--\x3e\n\n                <div class="form-group" ng-required="isNew">\n                  <label class="col-sm-3 control-label">Quality Points</label>\n                  <div class="col-sm-8">\n                    <div class="btn-group">\n                      <label ng-repeat="value in allowedQualityPoints" class="btn btn-sm btn-default" ng-model="task.max_quality_pts" btn-radio="{{value}}">{{value || \'Disabled\'}}</label>\n                    </div>\n                    <span class="help-block">\n                      Requires tutors to provide a quality rating based on a number of stars. The value set here determines the maximum number of stars allowed.\n                    </span>\n                  </div>\n                </div>\x3c!--/quality points--\x3e\n\n                <div class="form-group" ng-required="isNew">\n                  <label tooltip="Date students should aim to start this task." class="col-sm-3 control-label">Start Date</label>\n                  <div class="col-sm-7">\n                    <div class="col-sm-8 input-group">\n                      <input datepicker-popup="yyyy-MM-dd" is-open="startPicker.open" type="text" class="form-control" ng-model="task.start_date" placeholder="yyyy-MM-dd" close-text="Close" />\n                      <span class="input-group-btn">\n                        <button class="btn btn-default" ng-click="open($event, startPicker)"><i class="glyphicon glyphicon-calendar"></i></button>\n                      </span>\n                    </div>\n                  </div>\n                </div>\x3c!--/start-date--\x3e\n\n                <div class="form-group" ng-required="isNew">\n                  <label tooltip="Date students should aim to complete this task." class="col-sm-3 control-label">Due Date</label>\n                  <div class="col-sm-7">\n                    <div class="col-sm-8 input-group">\n                      <input datepicker-popup="yyyy-MM-dd" is-open="targetPicker.open" type="text" class="form-control" ng-model="task.target_date" placeholder="yyyy-MM-dd" close-text="Close" />\n                      <span class="input-group-btn">\n                        <button class="btn btn-default" ng-click="open($event, targetPicker)"><i class="glyphicon glyphicon-calendar"></i></button>\n                      </span>\n                    </div>\n                  </div>\n                </div>\x3c!--/target-date--\x3e\n\n                <div class="form-group">\n                  <label tooltip="Date after which task submissions will not appear for feedback. Can be empty." class="col-sm-3 control-label">Deadline</label>\n                  <div class="col-sm-7">\n                    <div class="col-sm-8 input-group">\n                      <input datepicker-popup="yyyy-MM-dd" is-open="duePicker.open" type="text" class="form-control" ng-model="task.due_date" placeholder="yyyy-MM-dd" close-text="Close" />\n                      <span class="input-group-btn">\n                        <button class="btn btn-default" ng-click="open($event, duePicker)"><i class="glyphicon glyphicon-calendar"></i></button>\n                      </span>\n                    </div>\n                  </div>\n                </div>\x3c!--/due-date--\x3e\n              </div>\n              <div ng-show="activeTab == taskAdmin.tabsData.fileUpload">\n                <div class="form-group" ng-required="isNew">\n                  <div class="panel-body large-notice-block" ng-hide="task.upload_requirements.length > 0">\n                    <i class="fa fa-2x fa-upload"></i>\n                    <p>Add Submission Requirements</p>\n                  </div>\n                  <div ng-show="task.upload_requirements.length > 0">\n                    <div class="panel-body clearfix submission-requirement" ng-repeat="upreq in task.upload_requirements">\n                      <label class="col-sm-3 control-label">Requirement Name</label>\n                      <div class="col-sm-7 form-group">\n                        <input class="form-control" placeholder="Hello World Code" type="text" required ng-model="upreq.name"/>\n                      </div>\n                      <button tooltip="Remove this requirement" tooltip-append-to-body="true" class="btn btn-danger pull-right" ng-click="removeUpReq(upreq)">\n                        <i class="fa fa-trash-o"></i>\n                      </button>\n                      <label class="col-sm-3 control-label">Requirement Type</label>\n                      <div class="col-sm-7 form-group">\n                        <div class="btn-group pull-left">\n                          <label name="upreq-type-{{upreq.key}}" class="btn btn-default" btn-radio="\'code\'" ng-model="upreq.type">\n                            <i class="fa fa-file-code-o"></i> Code\n                          </label>\n                          <label name="upreq-type-{{upreq.key}}" class="btn btn-default" btn-radio="\'document\'" ng-model="upreq.type">\n                            <i class="fa fa-file-pdf-o"></i> Document\n                          </label>\n                          <label name="upreq-type-{{upreq.key}}" class="btn btn-default" btn-radio="\'image\'" ng-model="upreq.type">\n                            <i class="fa fa-file-image-o"></i> Image\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\x3c!--/upload-requirements--\x3e\n              </div>\n              <div ng-show="activeTab == taskAdmin.tabsData.taskResources">\n                <div class="panel-body large-notice-block" ng-hide="task && task.id">\n                  <i class="fa fa-2x fa-floppy-o"></i>\n                  <p>Save Task to Upload Resources</p>\n                </div>\n                <div ng-if="task && task.id">\n                  <div class="col-sm-6">\n                    <file-uploader\n                      files="taskSheet"\n                      url="taskSheetUploadUrl()"\n                      on-success="onTaskSheetSuccess">\n                    </file-uploader>\n                    <a href="{{taskPDFUrl()}}" ng-show="task.has_task_sheet" target="_blank" class="btn btn-info col-sm-12">\n                      <i class="fa fa-download"></i> Download Task Sheet\n                    </a>\n                    <a ng-click="removeTaskSheet(task)" ng-show="task.has_task_sheet" class="btn btn-danger col-sm-12">\n                      <i class="fa fa-trash-o"></i> Delete Task Sheet\n                    </a>\n                  </div>\n                  <div class="col-sm-6">\n                    <file-uploader\n                      files="taskResources"\n                      url="taskResourcesUploadUrl()"\n                      on-success="onTaskResourcesSuccess">\n                    </file-uploader>\n                    <a href="{{resourceUrl()}}" ng-show="task.has_task_resources" target="_blank" class="btn btn-info col-sm-12">\n                      <i class="fa fa-download"></i> Download Resources\n                    </a>\n                    <a ng-click="removeTaskResources(task)" ng-show="task.has_task_resources" class="btn btn-danger col-sm-12">\n                      <i class="fa fa-trash-o"></i> Delete Resources\n                    </a>\n                  </div>\n                </div>\n              </div>\n              <div ng-show="activeTab == taskAdmin.tabsData.plagiarismChecks" class="form-group">\n                <div class="panel-body plagiarism-check" ng-required="isNew">\n                  <label class="col-sm-3 control-label">Warn Percent</label>\n                  <div class="col-sm-8">\n                    <input type="number" ng-disabled="task.plagiarism_checks.length == 0" class="form-control" ng-model="task.plagiarism_warn_pct"/>\n                    <p class="help-block">\n                      The percentage similarity where {{externalName.value}} creates a warning\n                    </p>\n                  </div>\n                </div>\x3c!--/check-perecent--\x3e\n                <div ng-required="isNew" class="panel-body plagiarism-check clearfix" ng-show="task.plagiarism_checks.length > 0" ng-repeat="check in task.plagiarism_checks">\n                  <label class="col-sm-3 control-label">Detect Language</label>\n                  <div class="col-sm-7">\n                    <select class="form-control" ng-model="check.type">\n                      <option selected disabled value="">Select language</option>\n                      <option value="moss pascal">Pascal</option>\n                      <option value="moss c">C</option>\n                      <option value="moss csharp">C#</option>\n                      <option value="moss cc">C++</option>\n                      <option value="moss python">Python</option>\n                    </select>\n                    <p class="help-block">\n                      {{externalName.value}} uses <a href="http://theory.stanford.edu/~aiken/moss/"M>Measure Of Software Similarity</a> (Moss) developed by Stanford University.\n                    </p>\n                  </div>\n                  <button class="btn btn-danger pull-right" ng-click="removeCheck(check)">\n                    <i tooltip="Remove this check" tooltip-append-to-body="true" class="fa fa-trash-o"></i>\n                  </button>\n                  <label class="col-sm-3 control-label">File Patterns</label>\n                  <div class="col-sm-7">\n                    <input class="form-control" placeholder="*.c|*.h" type="text" required ng-model="check.pattern"/>\n                    <p class="help-block">\n                      Separate file patterns with a pipe symbol, e.g.: <code>*.c|*.h</code>\n                    </p>\n                  </div>\n                </div>\n              </div>\x3c!--/plagiarism checks--\x3e\n            </div>\x3c!--/panel-body-area--\x3e\n            <div class="panel-footer text-right" ng-show="activeTab == taskAdmin.tabsData.fileUpload">\n              <button type="button" ng-click="addUpReq()" class="btn btn-success">\n                  <span class="glyphicon glyphicon-plus"></span> Add Submission Requirement\n              </button>\n            </div>\n            <div class="panel-footer text-right" ng-show="activeTab == taskAdmin.tabsData.plagiarismChecks">\n              <button type="button" ng-click="addCheck()" class="btn btn-success">\n                  <span class="glyphicon glyphicon-plus"></span> Add Plagiarism Check\n              </button>\n            </div>\n          </div>\x3c!--/tab-contents-panel--\x3e\n        </div>\x3c!--/tab-contents--\x3e\n      </div>\x3c!--/tab-feedback-tabs--\x3e\n    </form>\n  </div>\n  <div class="panel-footer text-right" ng-show="task">\n    <button type="button" ng-hide="isNew" class="btn btn-danger" ng-click="deleteTask()">\n      <i class="fa fa-trash-o"></i> Delete\n    </button>\n    <button type="button" class="btn btn-primary" ng-click="saveTask()">\n      <i class="fa fa-save"></i> {{isNew ? \'Create\' : \'Save\'}}\n    </button>\n  </div>\n</div>\n')}]),angular.module("tasks/task-definition-selector/task-definition-selector.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-definition-selector/task-definition-selector.tpl.html",'<div class="btn-group task-definition-selector dropdown" dropdown>\n  <button class="btn btn-{{buttonStyle}} dropdown-toggle col-sm-12" type="button" dropdown-toggle>\n    <span ng-show="selectedDefinition">\n      Task\n      <label class="label label-info" ng-show="selectedDefinition" tooltip="{{selectedDefinition.name}}" tooltip-append-to-body="true">\n        {{selectedDefinition.abbreviation}}\n      </label>\n    </span>\n    <span ng-hide="selectedDefinition">Select Task</span>\n    <div class="pull-right">\n      <span class="caret"></span>\n    </div>\n  </button>\x3c!--/dropdown-button--\x3e\n  <ul class="dropdown-menu project-tasks-list">\n    <div ng-repeat="(groupSetId, relatedTaskDefs) in unit.task_definitions | groupBy: \'group_set_id\'" class="col-sm-12">\n      <h5 class="group-set-name" ng-hide="hideGroupSetName">\n        {{groupSetName(groupSetId)}}\n      </h5>\n      <li class="col-xs-4 col-sm-3" ng-repeat="taskDef in relatedTaskDefs | orderBy: \'seq\'">\n        <button type="button" class="col-xs-12 btn btn-default" ng-class="{\'active\' : taskDef == selectedDefinition}" ng-click="setSelectedDefinition(taskDef)" tooltip-popup-delay=\'200\' tooltip-placement="bottom" tooltip="{{taskDef.name}}">\n          {{taskDef.abbreviation}}\n        </button>\n      </li>\n      <li class="col-xs-4 col-sm-3 pull-right" ng-if="showClear">\n        <button type="button" class="col-xs-12 btn btn-warning" ng-click="setSelectedDefinition(null)" tooltip="Clear selection" tooltip-popup-delay=\'200\' tooltip-placement="bottom">\n          <i class="fa fa-times"></i>\n        </button>\n      </li>\n    </div>\n  </ul>\n</div>\n')}]),angular.module("tasks/task-feedback-assessor/task-feedback-assessor.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-feedback-assessor/task-feedback-assessor.tpl.html",'<div class="task-feedback-assessor">\n  <div class="panel panel-default" ng-hide="task">\n    <div class="panel-heading">\n      <h3 class="panel-title">\n        Task Details\n      </h3>\n    </div>\n    <div class="panel-body large-notice-block nothing-selected" ng-hide="task">\n      <i class="fa fa-tasks"></i>\n      <p>Select a task to view its status in detail</p>\n    </div>\n  </div>\n  <div class="panel panel-default" ng-if="task">\n    <div class="panel-heading" ng-show="task.definition.upload_requirements.length > 0">\n      <a class="pull-right" ng-click="viewOptions.showPdf = !viewOptions.showPdf"><i ng-show="viewOptions.showPdf" class="fa fa-2x fa-chevron-circle-down"></i><i ng-hide="viewOptions.showPdf" class="fa fa-2x fa-chevron-circle-up"></i></a>\n      <h3 class="panel-title">\n        Task Submission\n      </h3>\n    </div>\n    <div class="panel-body large-notice-block" ng-show="viewOptions.showPdf && (!task.has_pdf) && task.definition.upload_requirements.length > 0 ">\n        <i class="fa fa-file-pdf-o fa-2x"></i>\n        <p>No submission PDF available.</p>\n    </div>\n    <task-submission-viewer ng-show="viewOptions.showPdf && (task.has_pdf || task.needsSubmissionDetails())" project="task.project()" task="task"></task-submission-viewer>\n    <div class="panel-heading">\n      <a class="pull-right" ng-click="viewOptions.showComments = !viewOptions.showComments"><i ng-show="viewOptions.showComments" class="fa fa-2x fa-chevron-circle-down"></i><i ng-hide="viewOptions.showComments" class="fa fa-2x fa-chevron-circle-up"></i></a>\n      <h3 class="panel-title">\n        Task Comments\n      </h3>\n    </div>\n    <task-comments-viewer project="task.project()" task="task" comment="comment" ng-show="viewOptions.showComments"></task-comments-viewer>\n\n    <div class="panel-heading">\n      <a class="pull-right" ng-click="viewOptions.showClassify = !viewOptions.showClassify"><i ng-show="viewOptions.showClassify" class="fa fa-2x fa-chevron-circle-down"></i><i ng-hide="viewOptions.showClassify" class="fa fa-2x fa-chevron-circle-up"></i></a>\n      <h3 class="panel-title">\n        Update Task Status\n      </h3>\n    </div>\n    <div class="panel-body" ng-show="viewOptions.showClassify">\n      <task-status-selector\n        task="task"\n        assessing-unit-role="assessingUnitRole"\n        in-menu="false"\n        trigger-transition="triggerTransition"\n        ></task-status-selector>\n    </div>\n  </div>\n</div>\n')}]),angular.module("tasks/task-ilo-alignment/modals/task-ilo-alignment-modal/task-ilo-alignment-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-ilo-alignment/modals/task-ilo-alignment-modal/task-ilo-alignment-modal.tpl.html",'<div class="task-ilo-alignment-modal">\n  <div class="modal-header text-center">\n    <h3>\n      How much does <label class="label label-info" tooltip="{{task.definition.name}}">{{task.definition.abbreviation}}</label> relate to <label class="label label-info" tooltip="{{ilo.name}}">{{ilo.abbreviation}}</label>?\n    </h3>\n  </div>\n  <div class="modal-body clearfix">\n    <p class="help-block col-sm-12 text-center">\n      Hover and click over a rating value below\n    </p>\n    <task-ilo-alignment-rater ng-model="alignment" on-rating-changed="updateRating"></task-ilo-alignment-rater>\n    <div class="col-sm-12 rationale-wrapper" ng-show="alignment.rating > 0">\n      <div tooltip="Click to edit rationale" tooltip-placement="left" tooltip-append-to-body="false" tooltip-popup-delay="300" tooltip-enable="alignment.description != null" ng-click="toggleEditRationale()" class="rationale" ng-class="{\'no-rationale\': alignment.description == null}" ng-hide="editingRationale">\n        <label class="text-muted" ng-show="alignment.description != null">\n          Provided Rationale\n        </label>\n        <div ng-bind-html="(alignment.description || \'No rationale provided\') | markdown"></div>\n        <div class="small" ng-hide="alignment.description">Click to add one</div>\n      </div>\n      <div ng-if="editingRationale" class="clearfix">\n        \x3c!-- <markdown-editor\n          height="200"\n          ng-model="alignment.description"\n          placeholder="Edit rationale..."\n          autofocus="true">\n        </markdown-editor> --\x3e\n        <div contenteditable ng-model="alignment.description" placeholder="Edit rationale here..." autofocus="true" style="border-style: solid; border-width: thin; height: 200px" ></div>\n        <a ng-click="toggleEditRationale(alignment)" class="pull-right">Done Editing</a>\n      </div>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <button ng-click="closeModal()" class="btn btn-primary">\n      <i class="fa fa-check"></i>\n    </button>\n    <button ng-click="removeAlignmentItem(alignment)" ng-if="alignment" tooltip="Remove this alignment" tooltip-append-to-body="true" class="btn btn-danger">\n      <i class="fa fa-trash-o"></i>\n    </button>\n  </div>\n</div>\n')}]),angular.module("tasks/task-ilo-alignment/task-ilo-alignment-editor/task-ilo-alignment-editor.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-ilo-alignment/task-ilo-alignment-editor/task-ilo-alignment-editor.tpl.html",'<div class="task-ilo-alignment-editor row ">\n  <div class="alignment-panels" ng-class="{\'col-md-9\': showCsv}">\n    <div class="{{hidePanel ? \'\' : \'panel panel-primary\'}}">\n      <div ng-hide="hidePanel" class="panel-heading clearfix">\n        <h3 class="panel-title">\n          {{showIncludeTasks ? \'Select Tasks\' : \'Intended Learning Outcome Alignment\'}}\n        </h3>\n        <div class="col-sm-8 pull-left" style="padding-left: 0;">\n          <div ng-show="showIncludeTasks" >\n            Select tasks to include and showcase in your portfolio that demonstrates your\n            understanding of each Learning Outcome.\n          </div>\n          <div ng-hide="showIncludeTasks">\n            Align tasks to an Intended Learning Outcome by selecting the red circle and choosing a rating,\n            providing an optional rational to justify why that task is related to the outcome selected.\n          </div>\n        </div>\n        <div class="btn-group pull-right">\n          <button class="btn btn-default" ng-model="showGraph" btn-radio="true" uncheckable>\n            <i class="fa fa-bar-chart"></i>\n          </button>\n        </div>\n      </div>\x3c!--/heading--\x3e\n\n      <div class="panel-body">\n        <div class="large-notice-block" ng-hide="tasks.length > 0">\n          <i class="fa fa-2x fa-tasks"></i>\n          <p>No tasks in this unit</p>\n        </div>\n        <div class="large-notice-block" ng-hide="unit.ilos.length > 0 || showIncludeTasks">\n          <i class="fa fa-2x fa-graduation-cap"></i>\n          <p>No learning outcomes in this unit</p>\n        </div>\n        <table class="table table-task-alignment col-sm-12" ng-hide="tasks.length == 0 || (unit.ilos.length == 0 && ! showIncludeTasks)">\n          <thead>\n            <tr>\n              <th class="task" colspan="{{(showTaskName ? 3 : 2) - (source === unit ? 1 : 0)}}">Task</th>\n              <th class="ilo text-center" ng-repeat="ilo in unit.ilos | orderBy: \'abbreviation\'" tooltip="{{ilo.name}}" tooltip-append-to-body="true">\n                <label class="label label-info">{{ilo.abbreviation}}</label>\n              </th>\n              <th ng-if="showIncludeTasks" class="include-in-portfolio">Include</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr ng-repeat="task in tasks | taskForPortfolio: source === project | orderBy: \'definition.seq\'">\n              <td class="task-abbreviation" tooltip="{{task.definition.name}}" tooltip-append-to-body="true">\n                <label class="label label-info">{{task.definition.abbreviation}}</label>\n              </td>\n              <td class="task-status-icon" ng-if="source === project">\n                <status-icon status="task.status"></status-icon>\n              </td>\n              <td class="task-name" ng-show="showTaskName">\n                {{task.definition.name}}\n              </td>\n              <td ng-repeat="ilo in unit.ilos | orderBy: \'abbreviation\'" class="ilo-alignment text-center">\n                {{alignment = alignmentForTaskAndIlo(task, ilo); \'\'}}\n                <button ng-click="showAlignmentModal(task, ilo, alignment)" class="btn btn-sm btn-default btn-alignment">\n                  <task-ilo-alignment-rater ng-if="alignment" ng-model="alignment" compact="true"></task-ilo-alignment-rater>\n                  <i ng-hide="alignment" class="fa fa-circle-o fa-3x text-danger" tooltip-append-to-body="true" tooltip="You decided {{task.definition.abbreviation}} is not aligned to {{ilo.abbreviation}}"></i>\n                </button>\n              </td>\n              <td ng-if="showIncludeTasks" class="include-in-portfolio">\n                <div\n                  tooltip-enable="disableInclude(task)"\n                  tooltip="You cannot select this task as it is not aligned to any ILOs"\n                  tooltip-placement="left"\n                  tooltip-append-to-body="true"\n                  class="button-wrapper">\n                  <button\n                    class="btn btn-sm btn-{{task.include_in_portfolio ? \'success\' : \'default\'}} col-sm-6 text-center"\n                    ng-click="includeTaskInPorfolio(task)"\n                    ng-if="!disableInclude(task)">\n                    <i class="fa fa-{{task.include_in_portfolio ? \'check\' : \'times\'}}"></i>\n                  </button>\n                  <button\n                    class="btn btn-sm btn-warning col-sm-6 text-center"\n                    ng-disabled="disableInclude(task)"\n                    ng-show="disableInclude(task)">\n                    <i class="fa fa-question"></i>\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\x3c!--/select-panel-body--\x3e\n    </div>\x3c!--/select-panel--\x3e\n    <div class="panel panel-default visualisation" ng-if="showGraph">\n      <div class="panel-heading clearfix">\n          <h4 class="panel-title pull-left">Visualisation</h4>\n          <button class="pull-right close" ng-click="closeGraph()">&times;</button>\n      </div>\n      <div class="panel-body">\n        <alignment-bar-chart unit="unit" project="project" source="source" task-status-factor="taskStatusFactor"></alignment-bar-chart>\n      </div>\n      <div class="panel-footer text-center">\n        Hover over this panel to highlight\n      </div>\n    </div>\x3c!--/visualisation--\x3e\n  </div>\x3c!--/main-panels--\x3e\n  <div class="col-md-3" ng-if="showCsv">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">Import Task Outcome Alignments</h3>\n        Import links between tasks and outcomes from a CSV containing: unit_code, learning_outcome, task_abbr, rating.\n      </div>\n      <div class="panel-body">\n        <file-uploader\n          files="taskAlignmentCSV"\n          url="taskAlignmentCSVUploadUrl()"\n          is-uploading="isTaskAlignmentCSVUploading"\n          on-success="onTaskAlignmentCSVSuccess"\n          on-complete="onTaskAlignmentCSVComplete"></file-uploader>\n      </div>\n      <div class="panel-heading">\n        <h3 class="panel-title">Export Task Outcome Alignments</h3>\n        Download a CSV of task outcome alignment details.\n      </div>\n      <div class="panel-body text-center">\n        <button class="btn btn-primary btn-download" ng-click="downloadTaskAlignmentCSV()">\n          <i class="fa fa-download"></i> Download\n        </button>\n      </div>\n    </div>\x3c!--/csv-import-export--\x3e\n  </div>\x3c!--/csv-panels--\x3e\n</div>\n')}]),angular.module("tasks/task-ilo-alignment/task-ilo-alignment-rater/task-ilo-alignment-rater.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-ilo-alignment/task-ilo-alignment-rater/task-ilo-alignment-rater.tpl.html",'<div class="task-ilo-alignment-rater" ng-class="{colorful: colorful}">\n  <rating ng-hide="compact" on-leave="setHoverValue(null)" on-hover="setHoverValue(value)" titles="null" ng-model="ngModel.rating" max="max" state-on="\'fa fa-2x fa-circle\'" state-off="\'fa fa-2x fa-circle-o\'" tooltip="{{label}}" tooltip-placement="right" tooltip-class="tooltip-rating-{{hoveringOver}}" tooltip-append-to-body="true" tooltip-popup-delay="200" tooltip-enable="showTooltips" readonly="readonly" class="rating-area"></rating>\n  <div ng-show="!hideLabels && selectedTooltip && !showTooltips && !compact" class="text-center rating-static-tooltip">\n    <span class="rating-{{hoveringOver || ngModel.rating}} badge" ng-hide="(hoveringOver || ngModel.rating) == 0">{{tooltips[(hoveringOver || ngModel.rating)]}}</span>\n    <span class="text-muted" ng-show="showZeroRating && !hoveringOver && ngModel.rating == 0">This task is not related to this outcome at all</span>\n  </div>\n  <div ng-show="compact && readonly" class="compact-rating rating-{{ngModel.rating}}" tooltip="{{tooltips[ngModel.rating]}}" tooltip-class="tooltip-rating-{{ngModel.rating}}" tooltip-append-to-body="true">\n    {{ngModel.rating}}\n  </div>\n</div>\n')}]),angular.module("tasks/task-ilo-alignment/task-ilo-alignment-viewer/task-ilo-alignment-viewer.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-ilo-alignment/task-ilo-alignment-viewer/task-ilo-alignment-viewer.tpl.html",'<div class="task-ilo-alignment-viewer">\n  <div class="clearfix" ng-if="alignments.length > 0">\n    <ul class="list-group alignment-list">\n      <li ng-click="toggleExpanded(align)" ng-class="{expanded: align.expanded}" ng-repeat="align in alignments | orderBy: \'ilo_number\'" class="list-group-item col-sm-12">\n        <header class="clearfix">\n          <div class="col-sm-6 pull-left header-item">\n            {{ilo = summaryOnly ? align : unit.outcome(align.learning_outcome_id); \'\'}}\n            <h3 class="list-group-item-heading outcome-heading col-sm-12" style="padding: 0;">\n              <span class="col-sm-3 label label-info pull-left">{{ilo.abbreviation}}</span>\n              <span class="col-sm-9 pull-left">{{ilo.name}}</span>\n            </h3>\n          </div>\n          <div class="col-sm-6 pull-right clearfix header-item">\n            <task-ilo-alignment-rater\n              ng-hide="summaryOnly"\n              readonly="true"\n              unit="unit"\n              ng-model="align"></task-ilo-alignment-rater>\n            <div ng-if="ilo && classStats && summaryOnly">\n              <alignment-bullet-chart\n                show-legend="false"\n                unit="unit"\n                project="project"\n                ilo="ilo"\n                targets="targets"\n                current-progress="currentProgress"\n                class-stats="classStats"></alignment-bullet-chart>\n            </div>\n            <div class="expand-icon text-muted text-{{align.expanded ? \'primary\' : \'muted\'}}">\n              <i class="fa fa-3x fa-chevron-circle-{{align.expanded ? \'up\' : \'down\'}}"></i>\n            </div>\n          </div>\n        </header>\x3c!--/alignment-header--\x3e\n        <div class="list-group-item-text alignment-content col-sm-8" ng-show="align.expanded">\n          <div ng-show="ilo.description">\n            <h5>Description</h5>\n            <div class="markdown-to-html" ng-bind-html="ilo.description | markdown"></div>\n          </div>\n          <div ng-if="ilo && classStats &&!hideVisualisation">\n            <h5>Visualisation</h5>\n            <alignment-bullet-chart\n              show-legend="false"\n              unit="unit"\n              project="project"\n              ilo="ilo"\n              targets="targets"\n              current-progress="currentProgress"\n              class-stats="classStats">\n            </alignment-bullet-chart>\n          </div>\n          <div ng-show="!summaryOnly && align.description">\n            <h5>Rationale</h5>\n            <div class="markdown-to-html" ng-bind-html="align.description | markdown"></div>\n          </div>\n          <div ng-show="summaryOnly">\n            <h5>Related Tasks</h5>\n            <div class="related-outcome-tasks">\n              <ul class="list-group">\n                <li class="list-group-item" ng-repeat="align in unit.task_outcome_alignments | outcomeFilter: ilo.id | orderBy: \'seq\'">\n                  <div class="clearfix">\n                    {{taskDef = unit.taskDef(align.task_definition_id); \'\'}}\n                    <task-ilo-alignment-rater\n                      class="pull-right"\n                      readonly="true"\n                      unit="unit"\n                      show-tooltips="true"\n                      ng-model="align">\n                    </task-ilo-alignment-rater>\n                    <div class="task-def-alignment-item">\n                      <label class="label label-info task-def-label pull-left">{{taskDef.abbreviation}}</label>\n                      <span class="col-sm-6">{{taskDef.name}}</span>\n                    </div>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </li>\n    </ul>\n  </div>\n  <div class="large-notice-block" ng-hide="alignments.length > 0">\n    <i class="fa fa-2x fa-graduation-cap"></i>\n    <p>No alignments</p>\n  </div>\n</div>\n')}]),angular.module("tasks/task-plagiarism-file-viewer/task-plagiarism-file-viewer.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-plagiarism-file-viewer/task-plagiarism-file-viewer.tpl.html",'<div class="card card-default task-plagiarism-file-viewer">\n  <div class="card-heading clearfix">\n    <div class="pull-left">\n      <h5 class="panel-title">\n        <strong>{{match.username || "Other Student"}}</strong>\n        {{match.name}}\n      </h5>\n      <span ng-show="other">\n        Match is <strong>{{match.pct}}% similar</strong> to a student in {{match.tutor}}\'s tutorial, {{match.tutorial}}.\n      </span>\n      <span ng-hide="other">\n        Similarities detected in your work.\n      </span>\n    </div>\n  </div>\n  <div class="card-body plagiarism-panel" ng-bind-html="match.html" ng-show="match.html">\n  </div>\n  <div class="card-body plagiarism-panel text-center strong" ng-hide="match.html">\n    <i class="fa fa-low-vision fa-2x"></i>\n    <p>Match data hidden</p>\n  </div>\n  <div class="card-footer text-right">\n    <a class="btn btn-default" ng-show="match.url" ng-href="{{match.url}}" target="new">\n      <i class="fa fa-file-text-o"></i> View Report\n    </a>\n    <button class="btn btn-danger" ng-hide="match.dismissed" ng-if="canDismiss" ng-click="dismiss_similarity(true)">\n      <i class="fa fa-check-square-o"></i> Mark as Resolved\n    </button>\n    <button class="btn btn-danger" ng-show="match.dismissed" ng-if="canDismiss" ng-click="dismiss_similarity(false)">\n      <i class="fa fa-square-o"></i> Mark as Unresolved\n    </button>\n  </div>\n</div>\n')}]),angular.module("tasks/task-plagiarism-report-viewer/task-plagiarism-report-viewer.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-plagiarism-report-viewer/task-plagiarism-report-viewer.tpl.html",'<div class="task-plagiarism-report-viewer">\n  <div>\n    <div class="large-notice-block" ng-show="noPlagiarismDetected()">\n      <i class="fa fa-eye fa-2x"></i>\n      <p>{{externalName.value}} has detected no similarities for this work</p>\n    </div>\x3c!--/no-detections--\x3e\n    <div ng-if="task.similar_to_count > 0 && similarityData">\n      <div ng-class="{ \'col-md-6\': canViewOther }" class="col-sm-12">\n        <task-plagiarism-file-viewer task="task" match="similarityData.student" match-idx="match" other="false" assessing-unit-role="assessingUnitRole"></task-plagiarism-file-viewer>\n      </div>\n      <div ng-class="{ \'col-md-6\': canViewOther }" class="col-sm-12">\n        <task-plagiarism-file-viewer task="task" match="similarityData.other_student" match-idx="match" other="true" assessing-unit-role="assessingUnitRole"></task-plagiarism-file-viewer>\n      </div>\n      <div class="col-sm-12 text-center">\n        <a ng-if="mailtoString" ng-href="{{mailtoString}}" class="btn btn-primary btn-lg">\n          <i class="fa fa-envelope"></i> Email Students\n        </a>\n      </div>\n    </div>\n  </div>\n  <div ng-show="task.similar_to_count > 1">\n    <pagination\n      ng-show="task.similar_to_count > 1"\n      total-items="task.similar_to_count"\n      ng-model="match"\n      items-per-page="1"\n      max-size="5"\n      class="pagination-sm"\n      boundary-links="true"\n      rotate="false">\n    </pagination>\n  </div>\n</div>\n')}]),angular.module("tasks/task-sheet-viewer/task-sheet-viewer.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-sheet-viewer/task-sheet-viewer.tpl.html",'<div class="task-sheet-viewer">\n  <div class="panel-body task-description">\n    <div class="markdown-to-pdf" ng-bind-html="task.definition.description | markdown"></div>\n  </div>\x3c!--task-description-panel-body--\x3e\n  <div class="panel-heading assessment-details-alignment-panel" ng-if="showAssessmentPanel">\n    <h3 class="panel-title">\n      Task Assessment\n    </h3>\n    Details about your task assessment are given below\n  </div>\x3c!--view-alignment-panel-header--\x3e\n  <div class="panel-body assessment-details-alignment-panel" ng-if="showAssessmentPanel">\n    <div class="assessment-item current-status" ng-if="assessmentPanels.feedback.show">\n      <aside>\n        <status-icon status="task.status"></status-icon>\n      </aside>\n      <div class="content">\n        <h4>{{activeStatusData.help.detail}}</h4>\n        <h5>Why do I have this status?</h5>\n        <p>{{activeStatusData.help.reason}}</p>\n        <h5>What should I do?</h5>\n        <p>{{activeStatusData.help.action}}</p>\n      </div>\n    </div>\n    <div class="assessment-item graded-task" ng-if="assessmentPanels.graded.show">\n      <aside class="text-right">\n        <grade-icon colorful="assessmentPanels.graded.active" grade="task.grade"></grade-icon>\n      </aside>\n      <div class="content">\n        <h4 ng-show="assessmentPanels.graded.active">\n          This task {{assessmentPanels.graded.active ? \'has been\' : \'will be\'}} assigned a grade\n        </h4>\n        <div ng-hide="assessmentPanels.graded.active">\n          <p>\n            This task will be graded against a grade standard. Your work will\n            be assessed and assigned a grade according to a Pass,\n            Credit, Distinction or High Distinction standard.\n          </p>\n          <p class="callout callout-primary">\n            As you are attempting to achieve a {{gradeName[project.target_grade]}} in this unit,\n            you should attempt to achieve a <strong>{{gradeName[project.target_grade]}}</strong> grade\n            on this task.\n          </p>\n        </div>\n        <div ng-show="assessmentPanels.graded.active">\n          Your tutor has marked you on this task to a <strong>{{gradeName[task.grade]}}</strong> standard.\n        </div>\n      </div>\n    </div>\x3c!--/graded-task-details--\x3e\n    <div class="assessment-item quality-stars" ng-if="assessmentPanels.quality.show">\n      <aside ng-class="{\'rating-outline\': assessmentPanels.quality.active}">\n        <i class="fa fa-star"></i>\n      </aside>\n      <div class="content">\n        <h4 ng-show="assessmentPanels.quality.active">\n          This task has been assessed for quality\n        </h4>\n        <h4 ng-hide="assessmentPanels.quality.active">\n          This task will be assessed on a scale to {{qualityPoints.max}}\n        </h4>\n        <p ng-hide="assessmentPanels.quality.active">\n          This task will be graded against a quality scale from\n          <strong>0 to {{qualityPoints.max}}</strong>. Your work will assessed\n          and assigned a star rating based on the quality of your submission.\n        </p>\n        <p ng-show="assessmentPanels.quality.active">\n          <label>Quality Mark: </label>\n          <rating\n            class="task-quality-rating"\n            ng-model="qualityPoints.assigned"\n            max="qualityPoints.max"\n            state-on="\'fa fa-star rating-outline\'"\n            state-off="\'fa fa-star rating-disabled\'"\n            readonly="true">\n          </rating>\n        </p>\n      </div>\n    </div>\x3c!--/quality-star-details--\x3e\n  </div>\x3c!--assessment-details-panel-body--\x3e\n  <div class="panel-heading task-view-alignment-panel" ng-hide="showTaskSheet" ng-if="alignments.length > 0">\n    <h3 class="panel-title">\n      Task Outcome Alignments\n    </h3>\n    Teaching staff believe that completing this task will help you achieve the outcomes listed below\n  </div>\x3c!--view-alignment-panel-header--\x3e\n  <div class="panel-body task-view-alignment-panel" ng-hide="showTaskSheet" ng-if="alignments.length > 0">\n    <task-ilo-alignment-viewer\n      project="project"\n      task="task"\n      unit="unit"\n      alignments="alignments"\n      summative="false"\n      hide-visualisation="true"></task-ilo-alignment-viewer>\n  </div>\x3c!--view-alignment-panel-body--\x3e\n  <div class="panel-heading row-fluid task-download" ng-show="hasPDF || hasResources">\n    <h3 class="panel-title">\n      Begin task\n    </h3>\n    Begin task by {{hasPDF ? "viewing the task sheet" : ""}} {{hasPDF && hasResources ? "or" : ""}} {{hasResources ? "downloading task resources" : ""}}\n  </div>\n  <div class="panel-body task-buttons-download-area" ng-class="{ small: showTaskSheet }" ng-show="hasPDF || hasResources">\n    <a ng-class="{ active: showTaskSheet }" ng-click="toggleTaskSheet()" ng-show="hasPDF" class="btn btn-lg btn-default">\n      <div>\n        <i class="fa fa-2x fa-file-pdf-o"></i>\n        <p>View{{showTaskSheet ? "ing" : \'\'}} PDF</p>\n      </div>\n    </a>\n    <a ng-click="downloadEvent(\'PDF\')" href="{{taskPDFUrl}}&as_attachment=true" ng-show="hasPDF" target="_blank" class="btn btn-lg btn-info">\n      <div>\n        <i class="fa fa-2x fa-file-pdf-o"></i>\n        <i class="fa fa-2x fa-download"></i>\n        <p>Download PDF</p>\n      </div>\n    </a>\n    <a ng-click="downloadEvent(\'Resources\')" href="{{resourceUrl}}" ng-show="hasResources" target="_blank" class="btn btn-lg btn-success">\n      <div>\n        <i class="fa fa-2x fa-download"></i>\n        <p>Download Resources</p>\n      </div>\n    </a>\n  </div>\n  <div ng-if="showTaskSheet && hasPDF && hasResources">\n    <pdf-panel-viewer\n      pdf-url="taskPDFUrl"\n      resources-url="resourceUrl"\n      hide-footer="true">\n    </pdf-panel-viewer>\n  </div>\n  <div ng-if="showTaskSheet && hasPDF && !hasResources">\n    <pdf-panel-viewer\n      pdf-url="taskPDFUrl"\n      hide-footer="true">\n    </pdf-panel-viewer>\n  </div>\x3c!--viewing-task-sheet--\x3e\n</div>\n')}]),angular.module("tasks/task-status-selector/task-status-selector.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-status-selector/task-status-selector.tpl.html",'<ul ng-class="{\'dropdown-menu\' :inMenu}" class="task-status-selector">\n  <li ng-show="assessingUnitRole" class="col-xs-6 col-sm-4 col-md-4" ng-repeat="action in taskEngagementConfig.tutorTriggers" >\n    <div class="row">\n    <button class="col-xs-12 btn task-status {{action.class}}" ng-class="{\'active\' : project.selectedTask.status == action.status}" ng-click="triggerTransition(action.status)" ng-model="project.selectedTask.status" btn-radio="action.status" uncheckable>\n      <i class="{{action.icon}} fa-2x task-status-icon"></i>\n      <strong>{{action.label}}</strong>\n    </button>\n    </div>\n  </li>\x3c!--/tutor-statuses--\x3e\n  <li ng-hide="assessingUnitRole || taskService.rejectFutureStates[task.status].length == 0" class="col-xs-6 col-sm-4 col-md-4">\n    <div class="row">\n    <button class="col-xs-12 btn task-status {{task.statusClass()}} active" uncheckable>\n      <i class="{{task.statusIcon()}} fa-2x task-status-icon"></i>\n      <strong>{{task.statusLabel()}}</strong>\n    </button>\n    </div>\n  </li>\n  <li class="col-xs-6 col-sm-4 col-md-4" ng-repeat="action in task.filterFutureStates(taskEngagementConfig.studentTriggers)" >\n    <div class="row">\n      <button class="col-xs-12 btn task-status {{action.class}}" ng-class="{\'active\' : project.selectedTask.status == action.status}" ng-click="triggerTransition(action.status)" ng-model="project.selectedTask.status" btn-radio="action.status" >\n        <i class="{{action.icon}} fa-2x task-status-icon"></i>\n        <strong>{{action.label}}</strong>\n      </button>\n    </div>\n  </li>\x3c!--/student-statuses--\x3e\n</ul>\n')}]),angular.module("tasks/task-submission-viewer/task-submission-viewer.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-submission-viewer/task-submission-viewer.tpl.html",'<div class="panel-body task-submission-viewer">\n  <div class="large-notice-block" ng-show="notSubmitted(task) || task.processing_pdf || loadingDetails(task)">\n    <div ng-show="notSubmitted(task) && ! loadingDetails(task)">\n      <i class="fa fa-upload fa-2x"></i>\n      <p>Upload submission before viewing</p>\n    </div>\x3c!--/no-pdf--\x3e\n    <div ng-show="task.processing_pdf && ! loadingDetails(task)">\n        <i class="fa fa-clock-o fa-2x"></i>\n        <p>\n          Submission is still being processed\n          <p class="small text-muted">\n            Please check again shortly\n          </p>\n        </p>\n    </div>\x3c!--/pdf-in-process--\x3e\n    <div ng-show="loadingDetails(task)">\n        <i class="fa fa-spinner fa-pulse fa-2x"></i>\n        <p>Fetching Submission Details</p>\n    </div>\x3c!--/loading details--\x3e\n  </div>\n  <div ng-if="task.has_pdf">\n    <pdf-panel-viewer\n      pdf-url="taskUrl"\n      resources-url="taskFilesURL"\n      footer-text="{{task.status != \'ready_to_mark\' ? \'Annotated comments are viewable once PDF is downloaded\' : \'Comments will be available once your tutor has assessed your submission\'}}"\n      ng-hide="notSubmitted(task) || task.processing_pdf">\n    </pdf-panel-viewer>\n  </div>\n</div>\n')}]),angular.module("tasks/task-submission-wizard/task-submission-wizard.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-submission-wizard/task-submission-wizard.tpl.html",'<div class="task-submission-wizard">\n  <div class="panel-body">\n    <div class="initial-state" ng-show="state == states.initial">\n      <div class="large-notice-block" ng-show="task.definition.upload_requirements.length == 0">\n        <i class="fa fa-times fa-2x"></i>\n        <p>No files required for this task</p>\n      </div>\x3c!--/no-files-required--\x3e\n      <div class="large-notice-block" ng-show="isGroupTask && !inGroupForTask">\n        <i class="fa fa-users fa-2x"></i>\n        <p></p>\n      </div>\x3c!--/no-detections--\x3e\n      <div class="large-notice-block" ng-if="task.definition.upload_requirements.length > 0 && ((! isGroupTask) || inGroupForTask)">\n        <div class="icons-for-files">\n          <i ng-repeat="(k, file) in files" class="fa fa-2x fa-file-{{file.type == \'document\' ? \'pdf\' : file.type}}-o"></i>\n        </div>\n        <h3>{{numberOfFiles}} File{{numberOfFiles > 1 ? "s" : ""}} Required</h3>\n        <p class="lead">\n          <span ng-show="helpLabel">\n          Upload as\n          </span>\n          {{helpLabel || "Please select upload type below"}}\n        </p>\n        <div class="text-center">\n          <div class="btn-group">\n            <button ng-repeat="(key, data) in uploadTypes"\n                class="btn btn-lg task-status {{data.class}}"\n                ng-click="setUploadType(key)"\n                ng-mouseover="setHelpLabel(data.text)"\n                ng-mouseout="setHelpLabel()"\n                ng-if="!data.hide"\n                ng-class="{active: uploadType == key}">\n              <i class="fa-2x {{data.icon}}"></i>\n            </button>\n          </div>\x3c!--/upload-type-buttons--\x3e\n        </div>\n      </div>\x3c!--upload-header--\x3e\n    </div>\x3c!--/initial-state--\x3e\n    <div class="group-member-contribution-state" ng-show="state == states.groupMemberContribution && isGroupTask && !isUploading">\n      <div class="upload-assistant clearfix">\n        <h3>\n          Team Contribution\n          <small>\n            Please rate each team member\'s effort. To mark a member with <strong>no effort</strong>, click the first <i class="fa fa-child"></i> icon twice.\n          </small>\n        </h3>\n      </div>\n      <group-member-contribution-assigner task="task" project="project" team="team"></group-member-contribution-assigner>\n      <div class="text-center contribution-navigation">\n        <button class="btn btn-lg btn-default"\n          ng-click="setState(states.initial)"> Back </button>\n        <button class="btn btn-lg btn-primary"\n          ng-click="setState(states.uploadFiles)"> Continue </button>\n      </div>\n    </div>\x3c!--/group-member-contribution--\x3e\n    <div class="upload-files-state" ng-show="state == states.uploadFiles && task.definition.upload_requirements.length > 0">\n      <div class="upload-assistant clearfix" ng-if="!isUploading">\n        <h3>\n          Upload {{task.definition.name}}...\n          <small>Select {{numberOfFiles}} file{{numberOfFiles > 1 ? "s" : ""}} below</small>\n        </h3>\n        <div class="upload-type-switcher">\n          <button\n            class="btn btn-default"\n            ng-click="setState(states.groupMemberContribution)"\n            ng-if="isGroupTask"\n            ng-mouseover="setHelpLabel(\'Configure Group Member Contributions\')"\n            ng-mouseout="setHelpLabel()">\n            <i class="fa fa-2x fa-child"></i>\n          </button>\n          <div class="btn-group">\n            <button ng-repeat="(key, data) in uploadTypes"\n                class="btn task-status {{data.class}}"\n                ng-click="setUploadType(key)"\n                ng-mouseover="setHelpLabel(data.text)"\n                ng-mouseout="setHelpLabel()"\n                ng-if="!data.hide"\n                ng-class="{active: uploadType == key}">\n              <i class="fa-2x {{data.icon}}"></i>\n            </button>\n          </div>\x3c!--/upload-type-buttons--\x3e\n          <p class="">\n            <strong ng-hide="helpLabel == \'Configure Group Member Contributions\'">\n              Upload{{helpLabel == \'\' ? \'ing\' : \'\'}} as\n            </strong>\n            <span>{{helpLabel || uploadTypes[uploadType].text}}</span>\n          </p>\n        </div>\n      </div>\x3c!--/upload-assistant--\x3e\n      <file-uploader\n        files="files"\n        url="url"\n        payload="payload"\n        on-before-upload="onBeforeUpload"\n        is-uploading="isUploading"\n        on-success="onSuccess"\n        on-complete="onComplete"></file-uploader>\n    </div>\x3c!--/upload-area--\x3e\x3c!--end if to hide group tasks--\x3e\n  </div>\n  <div class="panel-footer clearfix" ng-if="allowRegeneratePdf">\n    <button class="btn btn-primary pull-right" tooltip="Ask {{externalName.value}} to regenerate the PDF that was created" ng-click="recreateTask()">\n      <i class=\'fa fa-refresh\'></i>\n    </button>\n  </div>\n</div>\n')}]),angular.module("tasks/task-viewer/task-viewer.tpl.html",[]).run(["$templateCache",function(t){t.put("tasks/task-viewer/task-viewer.tpl.html",'<div class="task-viewer">\n  <div class="col-sm-12">\n    <div class="task-viewer-toolbar clearfix">\n      <div class="btn-group dropdown active-task-selector col-sm-1" dropdown>\n        <button class="btn task-status {{activeStatusData.class}} dropdown-toggle" dropdown-toggle>\n          <label>{{project.selectedTask.definition.abbreviation}}</label>\n          <span class="caret"></span>\n        </button>\x3c!--/dropdown-button--\x3e\n        <project-tasks-list\n          class="dropdown-menu"\n          in-menu="true"\n          unit="unit"\n          project="project"\n          on-select="setSelectedTask"></project-tasks-list>\n      </div>\x3c!--/active-task-selector--\x3e\n      <div class="task-header-info col-sm-10">\n        <div class="col-sm-7 task-header-summary">\n          <div class="task-header-grade-icon">\n            <grade-icon grade="project.selectedTask.definition.target_grade"></grade-icon>\n          </div>\n          <h3>{{project.selectedTask.definition.name}}</h3>\n        </div>\n        <div class="col-sm-5 task-date-info">\n          <div class="overdue label label-{{daysPastTargetDate > 5 ? \'danger\' : \'warning\'}}" ng-hide="daysPastTargetDate === false" tooltip="Tasks are overdue until they are discussed with your tutor." tooltip-placement="right">\n            <i class="fa fa-exclamation-triangle"></i>\n            Past Due Date By <br/> {{daysPastTargetDate}} day{{daysPastTargetDate > 1 ? \'s\' : \'\'}}\n          </div>\n          <span class="label label-info" tooltip="You should aim to complete the task by this date" tooltip-placement="right" tooltip-append-to-body="true">\n            <i class="fa fa-clock-o"></i>\n            <div>\n              <label>Due Date</label>\n              {{project.selectedTask.definition.localTargetDate() | date:\'EEE MMM d\'}}\n            </div>\n          </span>\n          <span class="label label-warning" ng-if="project.selectedTask.definition.due_date" tooltip="The task must be completed by this date" tooltip-placement="right" tooltip-append-to-body="true">\n            <i class="fa fa-lock"></i>\n            <div>\n              <label>Deadline</label>\n              {{project.selectedTask.definition.due_date | date:\'EEE MMM d\' : \'+0000\' }}\n            </div>\n          </span>\n        </div>\n      </div>\x3c!--/task-header-info--\x3e\n      <div tooltip-placement="left" tooltip="{{activeStatusData.label}}" tooltip-append-to-body="true" class="btn-group dropdown active-task-status-selector col-sm-1 pull-right" dropdown>\n        <button type="button" class="btn task-status {{statusClass(project.selectedTask.status)}} dropdown-toggle" dropdown-toggle>\n          <i class="{{activeStatusData.icon}} fa-2x"></i>\n          <span class="caret"></span>\n        </button>\n        <task-status-selector\n          task="project.selectedTask"\n          assessing-unit-role="assessingUnitRole"\n          in-menu="true"\n          trigger-transition="triggerTransition">\n        </task-status-selector>\n      </div>\x3c!--/active-task-status-selector--\x3e\n    </div>\x3c!--/task-details-toolbar--\x3e\n  </div>\n  <div class="col-sm-2 col-lg-1 task-viewer-tabs">\n    <tabset vertical="false" type="pills">\n      <tab ng-repeat="(tabKey, tab) in tabs | orderObjectBy: \'seq\'" active="tab.active" ng-click="setActiveTab(tab)">\n        <tab-heading class="text-center" tooltip="{{tab.title}}" tooltip-placement="right" tooltip-popup-delay="200">\n          <i class="fa fa-2x {{tab.icon}}"></i>\n          <i class="fa fa-2x fa-warning" ng-class="{ \'text-warning\': !isActiveTab(tab) }" ng-show="tab == tabs.plagiarismReport && project.selectedTask.similar_to_count - project.selectedTask.similar_to_dismissed_count > 0"></i>\n          <strong class="comment-count" ng-show="tab == tabs.viewComments && project.selectedTask.comments.length > 0">{{project.selectedTask.comments.length}}</strong>\n        </tab-heading>\n      </tab>\n    </tabset>\n  </div>\n  <div class="col-sm-10 col-lg-11" class="class-viewer-tab-contents">\n    <div class="panel panel-primary">\n      <div class="panel-heading row-fluid">\n        <h3 class="panel-title">\n          {{activeTab.title}}\n        </h3>\n        {{activeTab.subtitle}}\n      </div>\n      <div class="task-viewer-tab-panel">\n        <task-sheet-viewer task="project.selectedTask" project="project" unit="unit" ng-if="activeTab == tabs.taskSheet"></task-sheet-viewer>\n        <task-submission-wizard task="project.selectedTask" project="project" unit="unit" assessing-unit-role="assessingUnitRole" ng-if="activeTab == tabs.fileUpload"></task-submission-wizard>\n        <task-submission-viewer ng-show="activeTab == tabs.viewSubmission" project="project" task="project.selectedTask"></task-submission-viewer>\n        <task-comments-viewer ng-show="activeTab == tabs.viewComments" project="project" task="project.selectedTask"></task-comments-viewer>\n        <task-plagiarism-report-viewer task="project.selectedTask" assessing-unit-role="assessingUnitRole" ng-if="activeTab == tabs.plagiarismReport"></task-plagiarism-report-viewer>\n      </div>\x3c!--/panel-body-area--\x3e\n    </div>\x3c!--/tab-contents-panel--\x3e\n  </div>\n</div>\n')}]),angular.module("units/modals/unit-ilo-edit-modal/unit-ilo-edit-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("units/modals/unit-ilo-edit-modal/unit-ilo-edit-modal.tpl.html",'<div class="unit-ilo-edit-modal">\n  <form class="form-horizontal" ng-submit="saveILO()" role="form">\n    <div class="modal-header">\n      <h3>{{isNew ? "Create Learning Outcome" : "Edit Learning Outcome: " + ilo.ilo_number}}</h3>\n    </div>\n    <div class="modal-body">\n      <div class="form-group" required>\n        <label class="col-sm-3 control-label">Name</label>\n        <div class="col-sm-7">\n          <input type="text" class="form-control" ng-model="ilo.name" placeholder="Outcome Name" />\n        </div>\n      </div>\n      <div class="form-group" required>\n        <label class="col-sm-3 control-label">Abbreviation</label>\n        <div class="col-sm-7">\n          <input type="text" class="form-control" ng-model="ilo.abbreviation" placeholder="ABBR" />\n        </div>\n      </div>\n      <div class="form-group" required>\n        <label class="col-sm-3 control-label">Description</label>\n        <div class="col-sm-7">\n          \x3c!-- <markdown-editor height="200" placeholder="Enter markdown description..." ng-model="ilo.description"></markdown-editor> --\x3e\n          <div contenteditable ng-model="ilo.description" placeholder="Enter markdown description..." style="border-style: solid; border-width: thin; height: 200px"></div>\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer text-right">\n      <input type="submit" class="btn btn-primary" ng-disabled="ilo.name == null || ilo.abbreviation == null || ilo.description == null"\n        value="{{isNew ? \'Create\' : \'Update\'}}" />\n    </div>\n  </form>\n</div>')}]),angular.module("units/modals/unit-student-enrolment-modal/unit-student-enrolment-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("units/modals/unit-student-enrolment-modal/unit-student-enrolment-modal.tpl.html",'<div class="unit-student-enrolment-modal">\n  <div class="modal-header">\n    <h3>Enrol Student</h3>\n  </div>\n  <div class="modal-body">\n    <form class="form-horizontal">\n      <div class="form-group" required>\n        <label class="col-sm-3 control-label">Student ID</label>\n        <div class="col-sm-7">\n          <input type="input" class="form-control" placeholder="Student ID" ng-model="student_id">\n        </div>\n      </div>\n      <div class="form-group" required>\n        <label class="col-sm-3 control-label">Tutorial</label>\n        <div class="col-sm-7">\n          <input id="searchbar" class="form-control" placeholder="Tutorial Code" type="search" ng-model="tutorial" typeahead="tutorial as tutorial.abbreviation for tutorial in unit.tutorials"\n          typeahead-select-on-exact="true"\n          typeahead-editable="false"\n          autocomplete="off"/>\n        </div>\n      </div>\n      <p class="help-block" style="padding-left: 5em" ng-show="tutorial.trim().length == 0">Student will be enrolled without a tutorial assigned.</p>\n    </form>\n  </div>\n  <div class="modal-footer text-right">\n    <input type="button" ng-click="enrolStudent(student_id, tutorial)" class="btn btn-primary" value="Save" />\n  </div>\n</div>\n')}]),angular.module("units/modals/unit-tutorial-edit-modal/unit-tutorial-edit-modal.tpl.html",[]).run(["$templateCache",function(t){t.put("units/modals/unit-tutorial-edit-modal/unit-tutorial-edit-modal.tpl.html",'<div class="unit-tutorial-edit-modal">\n  <form class="form-horizontal" ng-submit="saveTutorial()" role="form">\n    <div class="modal-header">\n      <h3>{{isNew ? "Create Tutorial" : "Edit Tutorial"}}</h3>\n    </div>\n    <div class="modal-body">\n      <div class="form-group" required>\n        <label class="col-sm-3 control-label">Abbreviation</label>\n        <div class="col-sm-7">\n          <input type="text" class="form-control" ng-model="tutorial.abbreviation" placeholder="Abbreviation eg. LA1-01"/>\n        </div>\n      </div>\n      <div class="form-group" required>\n        <label class="col-sm-3 control-label">Location</label>\n        <div class="col-sm-7">\n          <input type="input" class="form-control" ng-model="tutorial.meeting_location" placeholder="Room Number">\n        </div>\n      </div>\n      <div class="form-group" required>\n        <label class="col-sm-3 control-label">Day</label>\n        <div class="col-sm-7">\n          <select id="day" class="form-control" ng-model="tutorial.meeting_day" name="day">\n            <option value="Monday">Monday</option>\n            <option value="Tuesday">Tuesday</option>\n            <option value="Wednesday">Wednesday</option>\n            <option value="Thursday">Thursday</option>\n            <option value="Friday">Friday</option>\n          </select>\n        </div>\n      </div>\n      <div class="form-group" required>\n        <label class="col-sm-3 control-label">Time</label>\n        <div class="col-sm-7">\n          <timepicker ng-model="tutorial.meeting_time" hour-step="1" minute-step="30" show-meridian="false"></timepicker>\n        </div>\n      </div>\n      <div class="form-group">\n        <label class="col-sm-3 control-label">Tutor</label>\n        <div class="col-sm-7">\n          <input\n            type="text"\n            class="form-control"\n            ng-model="tutorial.tutor"\n            placeholder="Staff Name"\n            autocomplete="off"\n            typeahead="tutor as tutor.name for tutor in tutors | filter: $viewValue"\n            typeahead-select-on-exact="true"\n            typeahead-editable="false"\n            typeahead-wait-ms="200">\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer text-right">\n      <input ng-disabled="!validForm()" type="submit" class="btn btn-primary" value="{{isNew ? \'Create\' : \'Update\'}}" />\n    </div>\n  </form>\n</div>\n')}]),angular.module("units/states/all/directives/all-units-list/all-units-list.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/all/directives/all-units-list/all-units-list.tpl.html",'<div class="container">\n  <div if-role="Tutor Convenor Admin">\n    <div class="panel panel-primary">\n      <div class="panel-heading clearfix">\n        <div class="pull-left">\n          <h4 class="panel-title">Units</h4>\n          All units registered with {{externalName.value}}\n        </div>\n        <form role="search" class="pull-right form-horizontal">\n          <input id="searchbar" class="input-md form-control" placeholder="Search for units..." type="search" ng-model="search" autocomplete="off" typeahead="unitRole.unit_name for unitRole in unitRoles | filter:$viewValue | limitTo:8" />\n        </form>\n      </div>\n      <div class="panel-body">\n        <div class="callout callout-info" ng-hide="unitRoles.length > 0">No units have been registered with {{externalName.value}} yet</div>\n        <table ng-show="unitRoles.length > 0" class="table table-hover table-pointer">\n          <thead>\n            <tr>\n              <th><a ng-click="sortOrder=\'unit_code\'; reverse=!reverse">Unit Code <i ng-show="sortOrder==\'unit_code\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n              <th><a ng-click="sortOrder=\'unit_name\'; reverse=!reverse">Name <i ng-show="sortOrder==\'unit_name\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n              <th><a ng-click="sortOrder=\'role\'; reverse=!reverse">Unit Role <i ng-show="sortOrder==\'role\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n              <th><a ng-click="sortOrder=\'teachingPeriod().name()\'; reverse=!reverse">Teaching Period <i ng-show="sortOrder==\'teachingPeriod().name()\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n              <th><a ng-click="sortOrder=\'start_date\'; reverse=!reverse">Start Date <i ng-show="sortOrder==\'start_date\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n              <th><a ng-click="sortOrder=\'end_date\'; reverse=!reverse">End Date <i ng-show="sortOrder==\'end_date\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n              <th><a ng-click="sortOrder=\'active\'; reverse=!reverse">Active <i ng-show="sortOrder==\'teachingPeriod().active()\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i></a></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr ng-repeat="unitRole in filteredUnitRoles = (unitRoles | filter:search) | orderBy:sortOrder:reverse | startFrom:(currentPage - 1) * pageSize | limitTo: pageSize" ui-sref="units/tasks/inbox({ unitId: unitRole.unit_id })">\n              <td>\n                <label class="label label-info">\n                  {{unitRole.unit_code}}\n                </label>\n              </td>\n              <td>{{unitRole.unit_name}}</td>\n              <td>{{(unitRole.role | ucfirst) || "N/A"}}</td>\n              <td ng-if="unitRole.teachingPeriod()">{{(unitRole.teachingPeriod().name())}}</td>\n              <td ng-if="!unitRole.teachingPeriod()">Custom</td>\n              <td>{{unitRole.start_date | date : \'EEE d MMM\' : \'+0000\'}}</td>\n              <td>{{unitRole.end_date | date : \'EEE d MMM\' : \'+0000\'}}</td>\n              <td ng-if="unitRole.teachingPeriod()">\n                <i ng-if="unitRole.teachingPeriod().active() && unitRole.active" class="fa fa-check"></i>\n                <i ng-if="!unitRole.teachingPeriod().active() || !unitRole.active" class="fa fa-times"></i>\n              </td>\n              <td ng-if="!unitRole.teachingPeriod()">\n                <i ng-if="unitRole.active" class="fa fa-check"></i>\n                <i ng-if="!unitRole.active" class="fa fa-times"></i>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="panel-footer clearfix">\n        <pagination ng-show="filteredUnitRoles.length > pageSize" total-items="filteredUnitRoles.length" ng-model="currentPage" items-per-page="pageSize" max-size="maxSize" class="pagination-sm pull-left" boundary-links="true" rotate="false"></pagination>\n      </div>\n    </div>\n  </div>\n  <div class="spinner" ng-hide="dataLoaded">\n    <i class="fa fa-pulse fa-4x fa-spinner" ng-show="showSpinner"></i>\n  </div>\n</div>\n')}]),angular.module("units/states/analytics/analytics.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/analytics/analytics.tpl.html",'<div class="container">\n  <tabset class="tabset-icon">\n    <tab ng-repeat="tab in tabs | toArray | orderBy: \'seq\'" active="tab.active" ng-click="setActiveTab(tab)">\n      <tab-heading>{{tab.title}}</tab-heading>\n    </tab>\n  </tabset>\x3c!--/tabs--\x3e\n  <div class="panel panel-primary">\n    <div class="panel-heading">\n      <h3 class="panel-title">\n        {{activeTab.title}}\n      </h3>\n    </div>\n    <div class="panel-body">\n      {{activeTab.subtitle}}\n    </div>\n    <unit-stats-download unit="unit" ng-if="activeTab === tabs.csvStatDownload"> </unit-stats-download>\n    <task-summary-stats unit="unit" ng-if="unit.students && activeTab === tabs.taskSummaryStats"></task-summary-stats>\n    <task-status-stats unit="unit" ng-if="activeTab === tabs.taskStatusStats"></task-status-stats>\n    <unit-target-grade-stats unit="unit" ng-if="activeTab === tabs.targetGradeStats"></unit-target-grade-stats>\n    <task-completion-stats unit="unit" ng-if="activeTab === tabs.taskCompletionStats"></task-completion-stats>\n    <unit-achievement-stats unit="unit" ng-if="activeTab === tabs.achievementStats"></unit-achievement-stats>\n  </div>\x3c!--/tab-contents-panel--\x3e\n</div>\n')}]),angular.module("units/states/analytics/directives/task-completion-stats/task-completion-stats.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/analytics/directives/task-completion-stats/task-completion-stats.tpl.html",'<div class="task-completion-stats drilldown-visualiser panel-body">\n  <div class="data-loaded" ng-if="data">\n    <div class="clearfix">\n      <div class="btn-group col-sm-6 pull-left">\n        <label class="btn btn-default" ng-model="dataModel.selectedType" btn-radio="\'unit\'">\n          <i tooltip="View stats over entire unit" class="fa fa-university"></i>\n        </label>\n        <label class="btn btn-default" ng-model="dataModel.selectedType" btn-radio="\'tutorial\'">\n          <i tooltip="View stats by tutorial" class="fa fa-pencil"></i>\n        </label>\n        <label class="btn btn-default" ng-model="dataModel.selectedType" btn-radio="\'grade\'">\n          <i tooltip="View stats by target grade" class="fa fa-trophy"></i>\n        </label>\n      </div>\n      <div class="col-sm-6 pull-right" ng-if="dataModel.selectedType == \'tutorial\'">\n        <select\n          class="form-control"\n          ng-options="tutorial as (tutorial.abbreviation + \' - \' + tutorial.tutor_name) for tutorial in (tutorialsForSelector | orderBy: \'tutorial.id\' | orderBy: \'tutorial.abbreviation\' | reverse) track by tutorial.id"\n          ng-model="dataModel.selectedTutorial"></select>\n      </div>\n    </div>\x3c!--/toolbar--\x3e\n    <hr>\n    <div ng-show="depth == 0">\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'unit\'">\n        Task completion distribution in <strong>{{unit.code}}</strong>\n      </h4>\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'tutorial\'">\n        <p>Task completion distribution for Tutorial <strong>{{dataModel.selectedTutorial.abbreviation}}</strong></p>\n        <p class=\'small text-muted\'>{{dataModel.selectedTutorial.tutor_name}} at {{dataModel.selectedTutorial.meeting_time | date: shortTime}}</p>\n      </h4>\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'grade\'">\n        Task completion distribution by Target Grade\n      </h4>\n    </div>\x3c!--/headers-for-depth-0--\x3e\n    <div ng-show="depth == 1">\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'tutorial\'">\n        Task completion distribution over all tutorials in <strong>{{unit.code}}</strong>\n      </h4>\n    </div>\x3c!--/headers-for-depth-1--\x3e\n    <div ng-if="depth == 0" ng-click="drillDown()" class="overview-chart">\n      <task-completion-box-plot\n          data="data"\n          unit="unit"\n          type="dataModel.selectedType"></task-completion-box-plot>\n    </div>\x3c!--/depth-0-chart--\x3e\n    <div ng-if="dataModel.selectedTutorial.id < 0 && depth == 1" class="overview-chart">\n      <div ng-repeat="tutorial in unit.tutorials | orderBy: \'abbreviation\'" class="col-xs-6 col-sm-4 col-md-3" ng-click="switchToTutorial(tutorial)">\n        <task-completion-box-plot\n            data="data[tutorial.id]"\n            unit="unit"\n            type="dataModel.selectedType"\n            height="200"\n            show-legend="false"></task-completion-box-plot>\n        <div class="col-xs-12 caption text-center">\n          <strong>{{tutorial.abbreviation}}</strong>\n          <div class="small text-muted">{{tutorial.tutor_name}} at {{tutorial.meeting_time | date: shortTime}}</div>\n        </div>\n      </div>\n    </div>\x3c!--/overview-charts--\x3e\n  </div>\n  <div class="data-not-loaded" ng-hide="data">\n    <i class="fa fa-spinner fa-pulse fa-3x"></i>\n    <p>Loading...</p>\n  </div>\n</div>\n')}]),angular.module("units/states/analytics/directives/task-status-stats/task-status-stats.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/analytics/directives/task-status-stats/task-status-stats.tpl.html",'<div class="task-status-stats drilldown-visualiser">\n  <div class="panel-body" ng-if="data">\n    <div class="clearfix">\n      <div class="btn-group col-sm-6 pull-left">\n        <label class="btn btn-default" ng-model="dataModel.selectedType" btn-radio="\'unit\'">\n          <i tooltip="View task statuses over entire unit" class="fa fa-university"></i>\n        </label>\n        <label class="btn btn-default" ng-model="dataModel.selectedType" btn-radio="\'tutorial\'">\n          <i tooltip="View task statuses by tutorial" class="fa fa-pencil"></i>\n        </label>\n        <label class="btn btn-default" ng-model="dataModel.selectedType" btn-radio="\'task\'">\n          <i tooltip="View task statuses by task" class="fa fa-tasks"></i>\n        </label>\n      </div>\n      <div class="col-sm-6 pull-right" ng-if="dataModel.selectedType == \'tutorial\'">\n        <select\n          class="form-control"\n          ng-options="tutorial as (tutorial.text) for tutorial in (tutorialsForSelector | orderBy: \'tutorial.abbreviation\' | reverse) track by tutorial.id"\n          ng-model="dataModel.selectedTutorial"></select>\n      </div>\n      <div class="col-sm-6 pull-right" ng-if="dataModel.selectedType == \'task\'">\n        <select\n          class="form-control"\n          ng-options="task as (task.text) for task in (tasksForSelector | orderBy: \'seq\') track by task.id"\n          ng-model="dataModel.selectedTask"></select>\n      </div>\n    </div>\x3c!--/toolbar--\x3e\n    <hr>\n    <div ng-show="depth == 0">\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'unit\'">\n        Task status distribution in <strong>{{unit.code}}</strong>\n      </h4>\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'task\'">\n        <p>Task status distribution of <strong>{{dataModel.selectedTask.abbreviation}}</strong> in <strong>{{unit.code}}</strong></p>\n        <p class=\'small text-muted\'>{{dataModel.selectedTask.name}}</p>\n      </h4>\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'tutorial\'">\n        <p>Status by Task for Tutorial <strong>{{dataModel.selectedTutorial.abbreviation}}</strong></p>\n        <p class=\'small text-muted\'>{{dataModel.selectedTutorial.tutor_name}} at {{dataModel.selectedTutorial.meeting_time | date: shortTime}}</p>\n      </h4>\n    </div>\x3c!--/headers-for-depth-0--\x3e\n    <div ng-show="depth == 1">\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'tutorial\'">\n        Task status distribution over all tutorials in <strong>{{unit.code}}</strong>\n      </h4>\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'task\'">\n        Task status distribution over all tasks in <strong>{{unit.code}}</strong>\n      </h4>\n    </div>\x3c!--/headers-for-depth-1--\x3e\n    <div ng-show="depth == 2">\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'tutorial\'">\n        <p>Status by Task for Tutorial <strong>{{dataModel.selectedTutorial.abbreviation}}</strong></p>\n        <p class=\'small text-muted\'>{{dataModel.selectedTutorial.tutor_name}} at {{dataModel.selectedTutorial.meeting_time | date: shortTime}}</p>\n      </h4>\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'task\'">\n        <p>Status by Tutorial for Task <strong>{{dataModel.selectedTask.abbreviation}}</strong></p>\n        <p class=\'small text-muted\'>{{dataModel.selectedTask.name}}</p>\n      </h4>\n    </div>\x3c!--/headers-for-depth-2--\x3e\n    <p class="col-sm-12 help-block text-center">\n      Click chart to explore details\n    </p>\x3c!--/click-chart-help-block--\x3e\n    <div ng-if="depth == 0" ng-click="drillDown()" class="overview-chart">\n      <task-status-pie-chart data="data" show-legend="true" height="600"></task-status-pie-chart>\n    </div>\x3c!--/depth-0-chart--\x3e\n    <div ng-if="(dataModel.selectedTask.id < 0) || (depth >= 1 && dataModel.selectedTutorial.id > 0)" class="overview-charts">\n      <div ng-repeat="chart in overviewKeys" class="col-xs-6 col-sm-4 col-md-3 overview-chart" ng-click="drillToTask(chart.task)">\n        <task-status-pie-chart ng-if="chart.show" data="chart.data" show-legend="false" height="200"></task-status-pie-chart>\n        <div class="no-data-to-display" ng-hide="chart.show">\n          No data\n        </div>\n        <div class="col-xs-12 caption text-center">\n          <strong class="col-xs-12">{{chart.title}}</strong>\n          <div class="col-xs-12 small text-muted">{{chart.subtitle}}</div>\n        </div>\n      </div>\n    </div>\x3c!--/overview-chart-charts-of-tutorials-or-tasks--\x3e\n    <div ng-if="(dataModel.selectedTutorial.id < 0) || (depth >= 1 && dataModel.selectedTask.id > 0)" class="overview-charts">\n      <div ng-repeat="chart in (overviewKeys | orderBy: \'title\' )" class="col-xs-6 col-sm-4 col-md-3 overview-chart" ng-click="drillToTutorial(chart.tutorial)">\n        <task-status-pie-chart ng-if="chart.show" data="chart.data" show-legend="false" height="200"></task-status-pie-chart>\n        <div class="no-data-to-display" ng-hide="chart.show">\n          No data\n        </div>\n        <div class="col-xs-12 caption text-center">\n          <strong>{{chart.title}}</strong>\n          <div class="small text-muted">{{chart.subtitle}}</div>\n        </div>\n      </div>\n    </div>\x3c!--/overview-chart-charts-of-tutorials-or-tasks--\x3e\n  </div>\n  <div class="large-notice-block" ng-hide="data">\n    <i class="fa fa-spinner fa-pulse fa-3x"></i>\n    <p>Loading...</p>\n  </div>\n  <div class="panel-footer text-center" ng-show="data && depth == 0">\n    <strong>{{completeStats.completed}}%</strong> of student tasks are marked as complete, while <strong>{{completeStats.left}}%</strong> are not\n  </div>\x3c!--/footer--\x3e\n</div>\n')}]),angular.module("units/states/analytics/directives/task-summary-stats/task-summary-stats.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/analytics/directives/task-summary-stats/task-summary-stats.tpl.html",'<div class="task-summary-stats">\n  <div class="panel-body text-center">\n    <div ng-show="scatterData.length == 0">\n      <i class="fa fa-4x fa-spinner fa-pulse"></i>\n      <h2>Loading...</h2>\n    </div>\n    <div ng-if="scatterData.length > 0">\n      <summary-task-status-scatter data="scatterData" unit="unit">\n      </summary-task-status-scatter>\n    </div>\n  </div>\n</div>\n')}]),angular.module("units/states/analytics/directives/unit-achievement-stats/unit-achievement-stats.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/analytics/directives/unit-achievement-stats/unit-achievement-stats.tpl.html",'<div class="unit-achievement-stats drilldown-visualiser panel-body">\n  <div ng-if="data">\n    <div class="clearfix">\n      <div class="col-sm-6 pull-left">\n        <div class="btn-group">\n          <label class="btn btn-default" ng-model="dataModel.selectedType" btn-radio="\'unit\'">\n            <i tooltip="View stats over entire unit" class="fa fa-university"></i>\n          </label>\n          <label class="btn btn-default" ng-model="dataModel.selectedType" btn-radio="\'tutorial\'">\n            <i tooltip="View stats by tutorial" class="fa fa-pencil"></i>\n          </label>\n        </div>\n        <div class="btn-group">\n          <label class="btn btn-default" ng-model="dataModel.pct" btn-radio="true">\n            <i tooltip="View as percent of maximum achievement" class="fa fa-percent" tooltip-append-to-body="true"></i>\n          </label>\n          <label class="btn btn-default" ng-model="dataModel.pct" btn-radio="false">\n            <i tooltip="View as the raw achievement data" class="fa fa-database" tooltip-append-to-body="true"></i>\n          </label>\n        </div>\n      </div>\n      <div class="col-sm-6 pull-right" ng-if="dataModel.selectedType == \'tutorial\'">\n        <select\n          class="form-control"\n          ng-options="tutorial as (tutorial.abbreviation + \' - \' + tutorial.tutor_name) for tutorial in (tutorialsForSelector | orderBy: \'tutorial.abbreviation\' | reverse) track by tutorial.id"\n          ng-model="dataModel.selectedTutorial"></select>\n      </div>\n    </div>\x3c!--/toolbar--\x3e\n    <hr>\n    <div ng-show="depth == 0">\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'unit\'">\n        ILO achievement distribution in <strong>{{unit.code}}</strong>\n      </h4>\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'tutorial\'">\n        <p>ILO achievement distribution for Tutorial <strong>{{dataModel.selectedTutorial.abbreviation}}</strong></p>\n        <p class=\'small text-muted\'>{{dataModel.selectedTutorial.tutor_name}} at {{dataModel.selectedTutorial.meeting_time | date: shortTime}}</p>\n      </h4>\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'grade\'">\n        ILO achievement distribution by Target Grade\n      </h4>\n    </div>\x3c!--/headers-for-depth-0--\x3e\n    <div ng-show="depth == 1">\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'tutorial\'">\n        ILO achievement distribution over all tutorials in <strong>{{unit.code}}</strong>\n      </h4>\n    </div>\x3c!--/headers-for-depth-1--\x3e\n    <div ng-if="depth == 0" ng-click="drillDown()" class="overview-chart">\n      <achievement-box-plot\n          data="data"\n          unit="unit"\n          type="dataModel.selectedType"\n          pct-holder="dataModel"></achievement-box-plot>\n    </div>\x3c!--/depth-0-chart--\x3e\n    <div ng-if="dataModel.selectedTutorial.id < 0 && depth == 1" class="overview-chart">\n      <div ng-repeat="tutorial in unit.tutorials | orderBy: \'abbreviation\'" class="col-xs-6 col-sm-4 col-md-3" ng-click="switchToTutorial(tutorial)">\n        <achievement-box-plot\n            data="data[tutorial.id]"\n            unit="unit"\n            type="dataModel.selectedType"\n            height="200"\n            show-legend="false"\n            pct-holder="dataModel"></achievement-box-plot>\n        <div class="col-xs-12 caption text-center">\n          <strong>{{tutorial.abbreviation}}</strong>\n          <div class="small text-muted">{{tutorial.tutor_name}} at {{tutorial.meeting_time | date: shortTime}}</div>\n        </div>\n      </div>\n    </div>\x3c!--/overview-charts--\x3e\n  </div>\n</div>\n')}]),angular.module("units/states/analytics/directives/unit-stats-download/unit-stats-download.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/analytics/directives/unit-stats-download/unit-stats-download.tpl.html",'<div class="unit-stats-download panel-body">\n    <a class="col-sm-4 btn btn-info" ng-click="fetchTaskCompletionStats()">\n      <i class="fa fa-3x fa-tasks"></i> <br \\>\n      <span class="button-title">Task Completion Stats</span>\n    </a>\n    <a class="col-sm-4 btn btn-info" ng-click="fetchTutorAssessmentStats()">\n      <i class="fa fa-3x fa-check"></i> <br \\>\n      <span class="button-title">Tutor Assessment Stats</span>\n    </a>\n</div>\n')}]),angular.module("units/states/analytics/directives/unit-target-grade-stats/unit-target-grade-stats.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/analytics/directives/unit-target-grade-stats/unit-target-grade-stats.tpl.html",'<div class="drilldown-visualiser">\n  <div class="data-loaded panel-body" ng-if="data">\n    <div class="clearfix">\n      <div class="btn-group col-sm-6 pull-left">\n        <label class="btn btn-default" ng-model="dataModel.selectedType" btn-radio="\'unit\'">\n          <i tooltip="View target grades over unit" class="fa fa-university"></i>\n        </label>\n        <label class="btn btn-default" ng-model="dataModel.selectedType" btn-radio="\'tutorial\'">\n          <i tooltip="View target grades by tutorial" class="fa fa-pencil"></i>\n        </label>\n      </div>\n      <div class="col-sm-6 pull-right" ng-if="dataModel.selectedType == \'tutorial\'">\n        <select\n          class="form-control"\n          ng-options="tutorial as (tutorial.text) for tutorial in (tutorialsForSelector | orderBy: \'tutorial.abbreviation\' | reverse) track by tutorial.id"\n          ng-model="dataModel.selectedTutorial"></select>\n      </div>\n    </div>\x3c!--/toolbar--\x3e\n    <hr>\n    <div ng-show="depth == 0">\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'unit\'">\n        Target grade distribution in <strong>{{unit.code}}</strong>\n      </h4>\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'tutorial\'">\n        <p>Task grade distribution for Tutorial <strong>{{dataModel.selectedTutorial.abbreviation}}</strong></p>\n        <p class=\'small text-muted\'>{{dataModel.selectedTutorial.tutor_name}} at {{dataModel.selectedTutorial.meeting_time | date: shortTime}}</p>\n      </h4>\n    </div>\x3c!--/headers-for-depth-0--\x3e\n    <div ng-show="depth == 1">\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'tutorial\'">\n        Target grade distribution over all tutorials in <strong>{{unit.code}}</strong>\n      </h4>\n    </div>\x3c!--/headers-for-depth-1--\x3e\n    <div ng-show="depth == 2">\n      <h4 class="col-xs-12 text-center" ng-show="dataModel.selectedType == \'tutorial\'">\n        <p>Target grade distribution for Tutorial <strong>{{dataModel.selectedTutorial.abbreviation}}</strong></p>\n        <p class=\'small text-muted\'>{{dataModel.selectedTutorial.tutor_name}} at {{dataModel.selectedTutorial.meeting_time | date: shortTime}}</p>\n      </h4>\n    </div>\x3c!--/headers-for-depth-2--\x3e\n    <p class="col-sm-12 help-block text-center">\n      {{depth == 0 && dataModel.selectedType == \'unit\' || depth == 1 ? \'Click chart to explore details\' : \'Click to return to overview\'}}\n    </p>\x3c!--/click-chart-help-block--\x3e\n    <div ng-if="depth == 0" ng-click="drillDown()" class="overview-chart">\n      <target-grade-pie-chart data="data" show-legend="true" height="600"></target-grade-pie-chart>\n    </div>\x3c!--/depth-0-chart--\x3e\n    <div ng-if="dataModel.selectedTutorial.id < 0" class="overview-charts">\n      <div ng-repeat="chart in (overviewKeys | orderBy: \'title\' )" class="col-xs-6 col-sm-4 col-md-3 overview-chart" ng-click="switchToTutorial(chart.tutorial)">\n        <target-grade-pie-chart data="chart.data" show-legend="false" height="200"></target-grade-pie-chart>\n        <div class="no-data-to-display" ng-hide="chart.show">\n          No data\n        </div>\n        <div class="col-xs-12 caption text-center">\n          <strong>{{chart.title}}</strong>\n          <div class="small text-muted">{{chart.subtitle}}</div>\n        </div>\n      </div>\n    </div>\x3c!--/overview-charts--\x3e\n  </div>\n  <div class="data-not-loaded" ng-hide="data">\n    <i class="fa fa-spinner fa-pulse fa-3x"></i>\n    <p>Loading...</p>\n  </div>\n</div>\n')}]),angular.module("units/states/edit/directives/unit-details-editor/unit-details-editor.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/edit/directives/unit-details-editor/unit-details-editor.tpl.html",'<div class="unit-details-editor">\n  <div class="panel panel-primary">\n    <div class="panel-heading" ng-if="unit.id == -1">\n      <h3 class="panel-title">Create Unit</h3>\n      Create a new unit with all overview unit details here.\n    </div>\n    <div class="panel-heading" ng-if="unit.id != -1">\n      <h3 class="panel-title">Update Unit</h3>\n      Update overview details of the unit below.\n    </div>\n    <form class="form-horizontal" role="form" name="unitForm" ng-submit="saveUnit()">\n      <div class="panel-body">\n        <div class="form-group">\n          <label class="col-sm-2 control-label" for="code">Code</label>\n          <div class="col-sm-9">\n            <input class="form-control" id="code" type="text" placeholder="COS1234567" ng-model="unit.code">\n          </div>\n        </div>\x3c!--/code-date--\x3e\n\n        <div class="form-group">\n          <label class="col-sm-2 control-label" for="name">Name</label>\n          <div class="col-sm-9">\n            <input id="name" type="text" class="form-control" ng-model="unit.name" placeholder="Introduction to {{externalName.value}}">\n          </div>\n        </div>\x3c!--/name-date--\x3e\n\n        <div class="form-group">\n          <label class="col-sm-2 control-label" for="description">Description</label>\n          <div class="col-sm-9">\n            <textarea id="description" class="form-control" ng-model="unit.description"></textarea>\n          </div>\n        </div>\x3c!--/description-date--\x3e\n\n        <div class="form-group">\n          <label class="col-sm-2 control-label" for="teachingperiod">Teaching Period</label>\n          <div class="col-sm-9">\n            <select class="form-control" ng-model="unit.teaching_period_id">\n              <option value="">Custom Period</option>\n              <option ng-value="tp.id" value="{{tp.id}}" ng-repeat="tp in teachingPeriods.loadedPeriods">{{tp.period}}-{{tp.year}} </option>\n            </select>\n          </div>\n        </div>\x3c!--/teaching-period-date--\x3e\n\n        <div class="form-group">\n          <label tooltip="Date for the start of teaching in the unit." class="col-sm-2 control-label" for="startdate">Start Date</label>\n          <div class="col-sm-9">\n            <div class="col-sm-4 input-group">\n              <input datepicker-popup="yyyy-MM-dd" is-open="calOptions.startOpened" type="text" class="form-control" id="startdate" ng-model="unit.start_date" ng-required="true" placeholder="yyyy-MM-dd" close-text="Close" ng-if="!unit.teaching_period_id" />\n              <input datepicker-popup="yyyy-MM-dd" is-open="calOptions.startOpened" type="text" class="form-control" id="startdate" ng-model="tp.start_date" ng-required="true" placeholder="yyyy-MM-dd" close-text="Close" ng-disabled="unit.teaching_period_id" ng-repeat="tp in teachingPeriods.loadedPeriods" ng-if="unit.teaching_period_id && tp.id == unit.teaching_period_id" />\n              <span class="input-group-btn">\n                <button class="btn btn-default" type="button" ng-click="open($event,\'start\')" ng-disabled="unit.teaching_period_id">\n                  <i class="fa fa-calendar"></i>\n                </button>\n              </span>\n            </div>\n          </div>\n        </div>\x3c!--/start-date--\x3e\n\n        <div class="form-group">\n          <label class="col-sm-2 control-label" for="enddate">End Date</label>\n          <div class="col-sm-9">\n            <div class="col-sm-4 input-group">\n              <input datepicker-popup="{{format}}" id="enddate" type="text" class="form-control" ng-model="unit.end_date" is-open="calOptions.endOpened" ng-required="true" close-text="Close" ng-if="!unit.teaching_period_id" />\n              <input datepicker-popup="{{format}}" id="enddate" type="text" class="form-control" ng-model="tp.end_date" is-open="calOptions.endOpened" ng-required="true" close-text="Close" ng-disabled="unit.teaching_period_id" ng-repeat="tp in teachingPeriods.loadedPeriods" ng-if="unit.teaching_period_id && tp.id == unit.teaching_period_id" />\n              <span class="input-group-btn">\n                <button class="btn btn-default" type="button" ng-click="open($event,\'end\')" ng-disabled="unit.teaching_period_id">\n                  <i class="fa fa-calendar"></i>\n                </button>\n              </span>\n            </div>\n          </div>\n        </div>\x3c!--/end-date--\x3e\n\n        <div class="form-group">\n          <label class="col-sm-2 control-label" for="enddate">Active</label>\n          <div class="col-sm-9">\n            <div class="btn-group">\n              <label class="btn btn-{{unit.active ? \'success\' : \'default\'}}" ng-model="unit.active" btn-radio="true" uncheckable>\n                <i class="fa fa-check"></i>\n              </label>\n              <label class="btn btn-{{unit.active ? \'default\' : \'danger\'}}" ng-model="unit.active" btn-radio="false" uncheckable>\n                <i class="fa fa-times"></i>\n              </label>\n            </div>\n          </div>\n        </div>\x3c!--/active--\x3e\n      </div>\n      <div class="panel-footer text-right">\n        <a class="btn btn-success" ui-sref="units/rollover" >\n          <header>\n            Rollover\n          </header>\n        </a>\n        <input type="submit" value="{{ unit.id == -1 ? \'Create\' : \'Update\' }}" class="btn btn-success" ng-disabled="unitForm.$pristine" />\n      </div>\n    </form>\n  </div>\n</div>\n')}]),angular.module("units/states/edit/directives/unit-group-set-editor/unit-group-set-editor.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/edit/directives/unit-group-set-editor/unit-group-set-editor.tpl.html",'<div class="unit-group-set-editor row">\n  <div class="col-sm-12">\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <h3 class="panel-title">\n          Group Sets\n        </h3>\n      </div>\x3c!--/panel-heading--\x3e\n      <div class="panel-body">\n        <p>\n          A group set is a set of related group-work. A unit can have multiple\n          group sets for various kinds of group work which has multiple teams.\n          <a ng-click="showHelp = true"><strong>Read more about group sets</strong></a>.\n        </p>\x3c!--/basic-help--\x3e\n        <div ng-show="showHelp" class="callout callout-info">\n          <a class="pull-right" ng-click="showHelp = false">\n            <i class="fa fa-times fa-2x"></i>\n          </a>\n          <h4> About Group Sets </h4>\n          <p>\n            Once a group set has been created, you may wish to restrict certain\n            permissions such as creating and managing groups to staff only, instead\n            of staff and students. If you restrict this to staff only, then tutors\n            and convenors will only be allowed to create groups, and manage them\n            (i.e., assign students to groups). Otherwise, you assume that students\n            will be able to self-manage themselves in that particular group set.\n          </p>\n          <p>\n            You may also decide that groups can only be restricted to students in\n            the same tutorial, otheriwse students for a given group can be from\n            any tutorial.\n          </p>\n          <p>\n            Click the pencil icon to modify these details.\n          </p>\n        </div>\x3c!--/extended-help--\x3e\n        <div ng-hide="unit.group_sets.length > 0" class="callout callout-primary">\n          <h4> No Group Sets Created </h4>\n          <p>\n            This unit has no group sets. Click the create group set button below to create one.\n          </p>\n        </div>\x3c!--/no-group-sets-created--\x3e\n      </div>\x3c!--/panel-body--\x3e\n      <table ng-show="unit.group_sets.length > 0" class="table table-hover table-pointer group-sets">\n        <thead>\n          <tr>\n            <th>\n              <span tooltip="Name of the group set">Name</span>\n            </th>\n            <th>\n              <span tooltip="Who can create groups?">Create Groups</span>\n            </th>\n            <th>\n              <span tooltip="Who can manage groups?">Manage Groups</span>\n            </th>\n            <th>\n              <span tooltip="Are groups restricted to tutorials?">Restrict to Tutorials</span>\n            </th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="gs in unit.group_sets" ng-class="{info: gs == selectedGroupSet}">\n            <td ng-click="selectGroupSet(gs)" class="col-sm-3">\n              <span editable-text="gs.name" e-name="name" e-form="gsRowform" e-required>\n                {{ gs.name || \'No Name Set\' }}\n              </span>\n            </td>\n            <td ng-click="selectGroupSet(gs)">\n              <span editable-select="gs.allow_students_to_create_groups" e-name="allow_students_to_create_groups" e-form="gsRowform" e-ng-options="opt.value as opt.text for opt in studentStaffOptions">\n                {{ ( (gs && gs.allow_students_to_create_groups) ? \'Staff and Students\' : \'Staff Only\' ) }}\n              </span>\n            </td>\n            <td ng-click="selectGroupSet(gs)">\n              <span editable-select="gs.allow_students_to_manage_groups" e-name="allow_students_to_manage_groups" e-form="gsRowform" e-ng-options="opt.value as opt.text for opt in studentStaffOptions">\n                {{ ( (gs && gs.allow_students_to_manage_groups) ? \'Staff and Students\' : \'Staff Only\' ) }}\n              </span>\n            </td>\n            <td ng-click="selectGroupSet(gs)">\n              <span editable-select="gs.keep_groups_in_same_class" e-name="keep_groups_in_same_class" e-form="gsRowform" e-ng-options="opt.value as opt.text for opt in tutorialOptions">\n                {{ ( (gs && gs.keep_groups_in_same_class) ? \'Same Tutorial\' : \'Any Tutorial\' ) }}\n              </span>\n            </td>\n            <td>\n              <form editable-form name="gsRowform" onbeforesave="saveGroupSet($data, gs.id)" ng-show="gsRowform.$visible" class="form-buttons form-inline" shown="inserted == gs">\n                <button type="submit" ng-disabled="gsRowform.$waiting" class="btn btn-default btn-sm">\n                  <i class="fa fa-floppy-o"></i> Save\n                </button>\n                <button type="button" ng-disabled="gsRowform.$waiting" ng-click="gsRowform.$cancel()" class="btn btn-default btn-sm">\n                  <i class="fa fa-times"></i> Cancel\n                </button>\n              </form>\n              <div ng-show="!gsRowform.$visible">\n                <button ng-click="gsRowform.$show()" class="btn btn-default btn-sm">\n                  <i class="fa fa-pencil"></i> Edit\n                </button>\n                <button ng-click="removeGroupSet(gs)" class="btn btn-danger btn-sm">\n                  <i class="fa fa-trash-o"></i> Delete\n                </button>\n              </div>\n              \x3c!--/actions--\x3e\n            </td>\n          </tr>\n        </tbody>\n      </table>\x3c!--/group-set-table--\x3e\n      <div class="panel-footer clearfix">\n        <button class="btn pull-right btn-success" ng-click="addGroupSet()">\n          <i class="fa fa-users"></i>\n          <i class="fa fa-plus"></i>\n          New Group Set\n        </button>\n      </div>\x3c!--/panel-footer--\x3e\n    </div>\x3c!--/panel--\x3e\n  </div>\x3c!--/group-sets--\x3e\n  <div class="clearfix">\n    <group-set-manager\n      ng-show="selectedGroupSet && unit.group_sets.length > 0"\n      unit="unit"\n      selected-group-set="selectedGroupSet"\n      show-group-set-selector="false"\n      unit-role="unitRole"\n      class="col-sm-12"></group-set-manager>\n  </div>\n  <div class="file-io col-sm-12" ng-if="selectedGroupSet && unit.group_sets.length > 0">\n    <hr>\n    <div class="panel-row">\n      <div class="panel panel-default">\n        <div class="panel-heading">\n          <h4 class="panel-title">Batch Import to <strong>{{selectedGroupSet.name}}</strong></h4>\n        </div>\n        <div class="panel-body">\n          <p>\n            Import groups into the group set named <strong>{{selectedGroupSet.name}}</strong>\n            with a CSV containing the following column headings:\n          </p>\n          <ul>\n            <li><code>group_name</code> for the indicated group\'s name,</li>\n            <li><code>group_number</code> for the indicated group\'s number,</li>\n            <li><code>username</code> for the student\'s username, and </li>\n            <li><code>tutorial</code> for the student\'s tutorial.</li>\n          </ul>\n        </div>\n        <div class="panel-footer">\n          <file-uploader\n            files="groupCSV"\n            url="groupCSVUploadUrl()"\n            is-uploading="isGroupCSVUploading"\n            on-success="onGroupCSVSuccess"\n            on-complete="onGroupCSVComplete"\n            as-button="true">\n          </file-uploader>\n        </div>\n      </div>\x3c!--/import-panel--\x3e\n      <div class="panel panel-default">\n        <div class="panel-heading">\n          <h3 class="panel-title">\n            Batch Export <strong>{{selectedGroupSet.name}}</strong>\n          </h3>\n        </div>\n        <div class="panel-body">\n          <p>\n            Download a CSV of all teams in group set named <strong>{{selectedGroupSet.name}}</strong>.\n            Data is listed under the following column headings:\n          </p>\n          <ul>\n            <li><code>group_name</code> for the indicated group\'s name,</li>\n            <li><code>group_number</code> for the indicated group\'s number,</li>\n            <li><code>username</code> for the student\'s username, and </li>\n            <li><code>tutorial</code> for the student\'s tutorial.</li>\n          </ul>\n        </div>\n        <div class="panel-footer">\n          <button class="btn btn-success form-control" ng-click="downloadGroupCSV()">\n            <i class="fa fa-download"></i> Download CSV\n          </button>\n        </div>\x3c!--/download-panel--\x3e\n      </div>\n    </div>\n  </div>\x3c!--/file-io--\x3e\n</div>\n')}]),angular.module("units/states/edit/directives/unit-ilo-editor/unit-ilo-editor.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/edit/directives/unit-ilo-editor/unit-ilo-editor.tpl.html",'<div class="unit-ilo-editor row">\n  <div class="col-md-9">\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <h3 class="panel-title">Edit Intended Learning Outcomes</h3>\n        Add, edit or delete intended learning outcomes for this unit\n      </div>\n      <div class="panel-body">\n          <div class="callout callout-info" ng-hide="unit.ilos.length > 0">This unit has no Intended Learning Outcomes</div>\n          <div ng-show="unit.ilos.length > 0">\n            <table class="table table-pointer table-hover">\n              <thead>\n                <tr>\n                  <th> Number </th>\n                  <th> Abbreviation </th>\n                  <th> Name </th>\n                  <th> Description </th>\n                  <th> Actions </th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr ng-repeat="ilo in unit.ilos | orderBy:\'ilo_number\'">\n                  <td ng-click="editILO(ilo)">{{ilo.ilo_number}}</td>\n                  <td ng-click="editILO(ilo)">{{ilo.abbreviation}}</td>\n                  <td ng-click="editILO(ilo)">{{ilo.name}}</td>\n                  <td ng-click="editILO(ilo)">{{ilo.description}}</td>\n                  <td>\n                    <button class="btn btn-danger" ng-click="deleteILO(ilo)">\n                      <i class="fa fa-trash-o"></i>\n                    </button>\n                  </td>\n              </tbody>\n            </table>\n          </div>\n      </div>\n      <div class="panel-footer clearfix">\n        <button class="btn btn-success pull-right" ng-click="createILO()">\n          <i class="fa fa-graduation-cap"></i>\n          <i class="fa fa-plus"></i> Add Outcome\n        </button>\n      </div>\n    </div>\n  </div>\n  <div class="col-md-3">\n    <div class="panel panel-default">\n        <div class="panel-heading">\n            <h4 class="panel-title">Batch Upload Outcome Definitions</h4>\n            Batch upload learning outcome definitions with a CSV containing: unit_code, ilo_number, abbreviation, name, and description.\n        </div>\n        <div class="panel-body">\n            <file-uploader\n              files="batchFiles"\n              url="batchOutcomeUrl()"\n              on-success="onBatchOutcomeSuccess"></file-uploader>\n        </div>\x3c!--batch-withdraw--\x3e\n        <div class="panel-heading">\n            <h4 class="panel-title">Download Outcomes</h4>\n            Download all outcomes for the unit.\n        </div>\n        <div class="panel-body text-center">\n            <a target="_blank" ng-href="{{batchOutcomeUrl()}}" class="btn btn-primary btn-download">\n                <i class="fa fa-download"></i> Download\n            </a>\n        </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("units/states/edit/directives/unit-staff-editor/unit-staff-editor.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/edit/directives/unit-staff-editor/unit-staff-editor.tpl.html",'<div class="unit-staff-editor">\n  <div class="panel panel-primary">\n    <div class="panel-heading">\n      <h3 class="panel-title">Modify Unit Staff</h3>\n      Add staff members to the unit, assigning them a convenor or tutor role.\n    </div>\n    <div class="panel-body">\n      <div class="col-sm-12">\n        <div class="callout callout-info" ng-hide="unit.staff.length > 0">This unit has no staff assigned</div>\n        <div ng-show="unit.staff.length > 0">\n          <table class="table table-condensed table-hover">\n            <thead>\n              <tr>\n                <th> Name </th>\n                <th> Role </th>\n                <th> Actions </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr ng-repeat="staff in unit.staff">\n                <td> {{staff.name}} </td>\n                <td>\n                  <div class="btn-group">\n                    <label class="btn btn-default" ng-model="staff.role" btn-radio="\'Tutor\'" ng-click="changeRole(staff,2)">Tutor</label>\n                    <label class="btn btn-default" ng-model="staff.role" btn-radio="\'Convenor\'" ng-click="changeRole(staff,3)">Convenor</label>\n                  </div>\n                </td>\n                <td>\n                  <button class="btn btn-danger" ng-click="removeStaff(staff)">\n                    <i class="fa fa-trash-o"></i>\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n    <div class="panel-footer clearfix">\n      <div class="input-group col-sm-12">\n        <input\n          class="form-control"\n          id="convenors"\n          placeholder="Staff Name"\n          ng-model="selectedStaff"\n          typeahead="staff as staff.full_name for staff in staff | filter: $viewValue | filter: filterStaff"\n          autocomplete="off"\n          typeahead-editable="false"\n          typeahead-wait-ms="200"\n          typeahead-select-on-exact="true"\n          typeahead-on-select="addSelectedStaff()">\n\n        <span class="input-group-btn">\n          <button class="btn btn-success pull-right" ng-click="addSelectedStaff()">\n            <i class="fa fa-male"></i>\n            <i class="fa fa-plus"></i> Add Staff\n          </button>\n        </span>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("units/states/edit/directives/unit-students-editor/unit-students-editor.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/edit/directives/unit-students-editor/unit-students-editor.tpl.html",'<div class="unit-students-editor row">\n  <div ng-if="unit">\n    <div class="col-md-9">\n      <div class="panel panel-primary">\n        <div class="panel-heading clearfix">\n          <div class="pull-left">\n            <h3 class="panel-title">\n              Enrolled Students\n            </h3>\n            Summary of students enrolled in this unit\n          </div>\n          <div class="pull-right">\n            <form ng-show="unit.students.length > 0" role="search" class="form-horizontal">\n              <input\n                id="searchbar"\n                class="input-md form-control"\n                placeholder="Search..."\n                type="search"\n                ng-model="studentSearch"\n                typeahead="text for text in unitTypeAheadData(unit)| filter:$viewValue | limitTo:8" typeahead-wait-ms="200"\n                autofocus=""\n                autocomplete="off">\n              <p ng-show="filteredStudents.length < unit.students.length && filteredStudents.length != 0">\n                Showing {{filteredStudents.length}} of {{unit.students.length}} students enrolled.\n              </p>\n              <p ng-show="filteredStudents.length < unit.students.length && filteredStudents.length == 0">\n                No students found.\n              </p>\n            </form>\n          </div>\n        </div>\n        <div class="panel-body">\n          <div ng-hide="unit.students.length > 0" class="callout callout-info">There are no students enrolled in this unit</div>\n          <div ng-show="unit.students.length > 0">\n            <table class="table table-condensed table-hover">\n              <thead>\n                <tr>\n                  <th>Username</th>\n                  <th>First Name</th>\n                  <th>Last Name</th>\n                  <th>Email</th>\n                  <th>Tutorial</th>\n                  <th>Enrolled</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr ng-repeat="student in filteredStudents = (unit.students | filter:studentSearch) | startFrom:(currentPage - 1) * pageSize | limitTo: pageSize">\n                  <td>\n                    <a ng-click="student.viewProject(true)">{{student.student_id}}</a>\n                  </td>\n                  <td>{{student.first_name}}</td>\n                  <td>{{student.last_name}}</td>\n                  <td>\n                    <a href="mailto:{{student.student_email}}">{{student.student_email}}</a>\n                  </td>\n                  <td>\n                    <div class="btn-group dropdown" dropdown is-open="status.isopen">\n                      <span tooltip-html-unsafe="<strong>{{student.tutorial.meeting_day}} {{student.tutorial.meeting_time | date: \'shortTime\'}}</strong><br/> {{student.tutorial.meeting_location}} - {{student.tutorial.tutor_name}}">\n                        <button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle>\n                          {{student.tutorial ? student.tutorial.abbreviation : \'None\'}} <span class="caret"></span>\n                        </button>\n                      </span>\n                      <ul class="dropdown-menu">\n                        <li><a ng-click="switchToTutorial(student, nil); status.isopen = false">None</a></li>\n                        <li ng-repeat="tutorial in unit.tutorials | orderBy:\'abbreviation\'"><a ng-click="switchToTutorial(student, tutorial); status.isopen = false" ng-hide="tutorial == student.tutorial">{{tutorial.abbreviation}}</a></li>\n                      </ul>\n                    </div>\n                  </td>\n                  <td>\n                    <button ng-show="student.enrolled" class="btn col-sm-8 btn-success" ng-click="withdraw(student)">\n                      <i class="fa fa-check" tooltip="Click to withdraw {{student.first_name}}"></i>\n                    </button>\n                    <button ng-hide="student.enrolled" class="btn col-sm-8 btn-danger" ng-click="enrol(student)">\n                      <i class="fa fa-times" tooltip="Click to enrol {{student.first_name}}"></i>\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            \x3c!--/enrolment-table--\x3e\n          </div>\n        </div>\n        <div class="panel-footer clearfix">\n          <pagination ng-show="unit.students.length > pageSize" total-items="unit.students.length" ng-model="currentPage" items-per-page="pageSize" max-size="maxSize" class="pagination-sm pull-left" boundary-links="true" rotate="false"></pagination>\n          <button class="btn btn-success pull-right" ng-click="showEnrolModal()">\n            <i class="fa fa-user"></i>\n            <i class="fa fa-plus"></i> Enrol Student\n          </button>\n        </div>\n      </div>\n    </div>\n    \x3c!--/student-list--\x3e\n    <div class="col-md-3">\n      <div class="panel panel-default">\n        <div class="panel-heading">\n          <h4 class="panel-title">Batch Student Uploads</h4> Batch enrol or withdraw students into this unit using a CSV containing: unit_code, username, first_name, last_name, email, tutorial.\n        </div>\n        <div class="panel-body">\n          <div class="btn-group btn-group-justified">\n            <label class="btn btn-primary" ng-model="activeBatchStudentType" btn-radio="\'enrol\'">\n              Batch Enrol\n            </label>\n            <label class="btn btn-danger" ng-model="activeBatchStudentType" btn-radio="\'withdraw\'">\n              Batch Withdraw\n            </label>\n          </div>\n          <file-uploader files="batchStudentTypes[activeBatchStudentType].batchFiles" url="batchStudentTypes[activeBatchStudentType].batchUrl()" on-success="batchStudentTypes[activeBatchStudentType].onSuccess"></file-uploader>\n        </div>\n        \x3c!--batch-enrol--\x3e\n        <div class="panel-heading">\n          <h4 class="panel-title">Download Enrolled Students</h4> Download all enrolled students in this unit.\n        </div>\n        <div class="panel-body text-center">\n          <a target="_blank" href="{{batchStudentTypes.enrol.batchUrl()}}" class="btn btn-primary btn-download">\n            <i class="fa fa-download"></i> Download\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("units/states/edit/directives/unit-tasks-editor/unit-tasks-editor.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/edit/directives/unit-tasks-editor/unit-tasks-editor.tpl.html",'<div class="unit-tasks-editor row">\n  <div ng-if="unit">\n    <div class="col-md-9">\n      <div class="panel panel-primary">\n        <div class="panel-heading clearfix">\n          <div class="pull-left">\n            <h3 class="panel-title">\n              Task List\n            </h3>\n            Summary of tasks added as work for this unit\n          </div>\n          <form role="search" class="col-sm-4 form-horizontal pull-right">\n            <input id="searchbar" class="input-md form-control" placeholder="Search..." type="search" ng-model="taskAdminPager.search" autofocus />\n            <p ng-show="filteredTaskDefs.length < allTaskDefs.length && filteredTaskDefs.length != 0">Showing {{filteredTaskDefs.length}} of {{unit.task_definitions.length}} tasks.</p>\n          </form>\n        </div>\n        <div class="panel-body tasks-overview">\n          <div class="callout callout-info" ng-hide="unit.task_definitions.length > 0">\n            This unit has no tasks\n          </div>\n          <table ng-show="unit.task_definitions.length > 0" class="table table-condensed table-hover table-pointer">\n            <thead>\n              <tr>\n                <th>\n                  <a ng-click="taskAdminPager.sortOrder=\'abbreviation\'; taskAdminPager.reverse=!taskAdminPager.reverse">\n                    Name <i ng-show="taskAdminPager.sortOrder==\'abbreviation\'" class="fa fa-caret-{{taskAdminPager.reverse ? \'down\' : \'up\'}}"></i>\n                  </a>\n                </th>\n                <th>\n                  <a ng-click="taskAdminPager.sortOrder=\'target_grade\'; taskAdminPager.reverse=!taskAdminPager.reverse">\n                    Grade <i ng-show="taskAdminPager.sortOrder==\'target_grade\'" class="fa fa-caret-{{taskAdminPager.reverse ? \'down\' : \'up\'}}"></i>\n                  </a>\n                </th>\n                <th>\n                  <a ng-click="taskAdminPager.sortOrder=\'start_date\'; taskAdminPager.reverse=!taskAdminPager.reverse">\n                    Start Date <i ng-show="taskAdminPager.sortOrder==\'start_date\'" class="fa fa-caret-{{taskAdminPager.reverse ? \'down\' : \'up\'}}"></i>\n                  </a>\n                </th>\n                <th>\n                  <a ng-click="taskAdminPager.sortOrder=\'target_date\'; taskAdminPager.reverse=!taskAdminPager.reverse">\n                    Due Date <i ng-show="taskAdminPager.sortOrder==\'target_date\'" class="fa fa-caret-{{taskAdminPager.reverse ? \'down\' : \'up\'}}"></i>\n                  </a>\n                </th>\n                <th>\n                  <a ng-click="taskAdminPager.sortOrder=\'due_date\'; taskAdminPager.reverse=!taskAdminPager.reverse">\n                    Deadline <i ng-show="taskAdminPager.sortOrder==\'due_date\'" class="fa fa-caret-{{taskAdminPager.reverse ? \'down\' : \'up\'}}"></i>\n                  </a>\n                </th>\n                <th ng-show="unit.hasGroupwork()">\n                  <a ng-click="taskAdminPager.sortOrder=\'group_set_id\'; taskAdminPager.reverse=!taskAdminPager.reverse">\n                    Group Set <i ng-show="taskAdminPager.sortOrder==\'group_set_id\'" class="fa fa-caret-{{taskAdminPager.reverse ? \'down\' : \'up\'}}"></i>\n                  </a>\n                </th>\n                <th>\n                  <a ng-click="taskAdminPager.sortOrder=\'upload_requirements.length\'; taskAdminPager.reverse=!taskAdminPager.reverse">\n                    <i class="fa fa-upload" tooltip="The number of files the student needs to submit."></i> <i ng-show="taskAdminPager.sortOrder==\'upload_requirements.length\'" class="fa fa-caret-{{taskAdminPager.reverse ? \'down\' : \'up\'}}"></i>\n                  </a>\n                </th>\n                <th>\n                  <a ng-click="taskAdminPager.sortOrder=\'hasPlagiarismCheck()\'; taskAdminPager.reverse=!taskAdminPager.reverse">\n                    <i class="fa fa-eye" tooltip="Is plagiarism checked?"></i> <i ng-show="taskAdminPager.sortOrder==\'hasPlagiarismCheck()\'" class="fa fa-caret-{{taskAdminPager.reverse ? \'down\' : \'up\'}}"></i>\n                  </a>\n                </th>\n                <th>\n                  <a ng-click="taskAdminPager.sortOrder=\'restrict_status_updates\'; taskAdminPager.reverse=!taskAdminPager.reverse">\n                    <i class="fa fa-lock" tooltip="Are status updated locked to staff only?"></i> <i ng-show="taskAdminPager.sortOrder==\'restrict_status_updates\'" class="fa fa-caret-{{taskAdminPager.reverse ? \'down\' : \'up\'}}"></i>\n                  </a>\n                </th>\n                <th>\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr ng-repeat="task in filteredTaskDefs = (allTaskDefs = ( unit.task_definitions ) | filter:taskAdminPager.search) | orderBy:taskAdminPager.sortOrder:taskAdminPager.reverse | startFrom:(taskAdminPager.currentPage - 1) * taskAdminPager.pageSize | limitTo: taskAdminPager.pageSize" ng-click="editTask(task)" ng-class="{\'info\': taskAdminData.selectedTask == task}">\n                <td><strong>{{task.abbreviation}}</strong> - {{task.name}}</td>\n                <td>{{grades[task.target_grade]}}</td>\n                <td>{{task.start_date | date : \'EEE d MMM\' : \'+0000\'}}</td>\n                <td>{{task.localTargetDate() | date : \'EEE d MMM\'}}</td>\n                <td><span ng-show="task.due_date">{{task.localDueDate() | date : \'EEE d MMM\' : \'+0000\' }}</span><span ng-hide="task.due_date">None</span></td>\n                <td ng-show="unit.hasGroupwork()">{{groupSetName(task.group_set_id)}}</td>\n                <td>{{task.upload_requirements.length}}</td>\n                <td><i ng-show="task.hasPlagiarismCheck()" class="fa fa-check"></i><i ng-hide="task.hasPlagiarismCheck()" class="fa fa-times"></i></td>\n                <td><i ng-show="task.restrict_status_updates" class="fa fa-check"></i><i ng-hide="task.restrict_status_updates" class="fa fa-times"></i></td>\n                <td>\n                  <button class="btn btn-danger" ng-click="deleteTask(task)">\n                    <i class="fa fa-trash-o"></i>\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\x3c!--/task-table--\x3e\n        </div>\n        <div class="panel-footer clearfix">\n          <pagination  ng-show="unit.task_definitions.length > taskAdminPager.pageSize" total-items="unit.task_definitions.length" ng-model="taskAdminPager.currentPage" items-per-page="taskAdminPager.pageSize" max-size="taskAdminPager.maxSize" class="pagination-sm pull-left" boundary-links="true" rotate="false"></pagination>\n          <button class="btn btn-success pull-right" ng-click="createTask()">\n            <i class="fa fa-file"></i>\n            <i class="fa fa-plus"></i> Add Task\n          </button>\n        </div>\n      </div>\x3c!--/tasks-overview--\x3e\n      <task-definition-editor\n        unit="unit"\n        task="taskAdminData.selectedTask"\n        is-new="taskAdminData.isNew"></task-definition-editor>\n    </div>\n    <div class="col-md-3">\n          <div class="panel panel-default">\n              <div class="panel-heading">\n                  <h4 class="panel-title">Batch Upload Task Definitions</h4>\n                  <p>Batch upload task definitions with a CSV containing: name, abbreviation, description, weighting, target_grade, restrict_status_updates, upload_requirements, target_week, target_day, due_week, due_day, is graded, and max quality points.</p><p>Note: Upload_requirements should be an escaped-JSON-formatted string an array of objects containing a "key",  "name" and "type". Target and due weeks should be the number of weeks from the unit start, and the day should be a short text (eg "Tue").</p>\n              </div>\n              <div class="panel-body">\n                  <file-uploader\n                    files="batchFiles"\n                    url="batchTaskUrl()"\n                    on-success="onBatchTaskSuccess"></file-uploader>\n              </div>\x3c!--batch-withdraw--\x3e\n              <div class="panel-heading">\n                  <h4 class="panel-title">Download Tasks</h4>\n                  Download all tasks for the unit.\n              </div>\n              <div class="panel-body text-center">\n                <div class="btn-group col-sm-12">\n                  <a tooltip="Download a CSV with details of all tasks" tooltip-append-to-body="true" target="_blank" ng-href="{{batchTaskUrl()}}" class="btn btn-primary col-sm-6">\n                    <i class="fa fa-download"></i> <i class="fa fa-file-excel-o"></i> CSV\n                  </a>\n                  <a tooltip="Download task resources and task sheets for all tasks" tooltip-append-to-body="true" target="_blank" ng-href="{{allResourceUrl()}}" class="btn btn-info col-sm-6">\n                    <i class="fa fa-download"></i> <i class="fa fa-file-zip-o"></i> Zip\n                  </a>\n                </div>\n              </div>\n              <div class="panel-heading">\n                  <h4 class="panel-title">Upload All Task PDFs</h4>\n                  Upload PDFs of tasks such that they are viewable for students under the relevant task. Upload a ZIP containing PDFs and ZIP file resources. Name each with task abbreviation.\n              </div>\n              <div class="panel-body">\n                <file-uploader\n                  files="taskFiles"\n                  url="taskUploadUrl"\n                  on-success="onTaskPDFSuccess"></file-uploader>\n                  <table ng-show="filesUploaded" class="table table-condensed table-hover">\n                    <thead>\n                      <tr>\n                        <th>Filename</th>\n                        <th>Details</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr ng-repeat="file in filesUploaded.ignored_files">\n                        <td>{{file.name}}</td><td>Ignored</td>\n                      </tr>\n                      <tr ng-repeat="file in filesUploaded.added_files">\n                        <td>{{file.name}}</td><td>Added</td>\n                      </tr>\n                    </tbody>\n                </table>\n              </div>\x3c!--batch-enrol--\x3e\n          </div>\n      </div>\n  </div>\n</div>\n')}]),angular.module("units/states/edit/directives/unit-tutorials-editor/unit-tutorials-editor.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/edit/directives/unit-tutorials-editor/unit-tutorials-editor.tpl.html",'<div class="unit-tutorials-editor">\n  <div class="panel panel-primary">\n    <div class="panel-heading clearfix">\n      <h3 class="panel-title">Modify Unit Tutorials</h3>\n      Add new tutorials to the unit or modify existing ones\n    </div>\n    <div class="panel-body">\n      <div ng-hide="unit.tutorials.length > 0" class="callout callout-info">\n        This unit has no tutorials\n      </div>\n      <table ng-show="unit.tutorials.length > 0" class="table table-condensed table-hover table-pointer">\n        <thead>\n          <tr>\n            <th>Abbreviation</th>\n            <th>Location</th>\n            <th>Day</th>\n            <th>Time</th>\n            <th>Tutor</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="tutorial in unit.tutorials">\n            <td ng-click="editTutorial(tutorial)">{{tutorial.abbreviation}}</td>\n            <td ng-click="editTutorial(tutorial)">{{tutorial.meeting_location}}</td>\n            <td ng-click="editTutorial(tutorial)">{{tutorial.meeting_day}}</td>\n            <td ng-click="editTutorial(tutorial)">{{tutorial.meeting_time | date:\'HH:mm\'}}</td>\n            <td ng-click="editTutorial(tutorial)">{{tutorial.tutor_name}}</td>\n            <td>\n              <button class="btn btn-danger" ng-click="deleteTutorial(tutorial)">\n                <i class="fa fa-trash-o"></i>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="panel-footer clearfix">\n      <button class="btn btn-success pull-right" ng-click="createTutorial()">\n        <i class="fa fa-pencil"></i>\n        <i class="fa fa-plus"></i> Add Tutorial\n      </button>\n    </div>\n  </div>\n</div>\n')}]),angular.module("units/states/edit/edit.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/edit/edit.tpl.html",'<div class="container">\n  <tabset class="tabset-icon">\n    <tab ng-repeat="tab in tabs | toArray | orderBy: \'seq\'" active="tab.active" ng-click="setActiveTab(tab)">\n      <tab-heading>{{tab.title}}</tab-heading>\n    </tab>\n  </tabset>\x3c!--/tabs--\x3e\n  <unit-details-editor unit="unit" ng-if="activeTab === tabs.unitTab"></unit-details-editor>\n  <unit-ilo-editor ng-if="activeTab === tabs.learningOutcomesTab"></unit-ilo-editor>\n  <unit-staff-editor ng-if="activeTab === tabs.staffTab"></unit-staff-editor>\n  <unit-tutorials-editor ng-if="activeTab === tabs.tutorialsTab"></unit-tutorials-editor>\n  <unit-students-editor ng-if="activeTab === tabs.studentsTab"></unit-students-editor>\n  <unit-tasks-editor ng-if="activeTab === tabs.tasksTab"></unit-tasks-editor>\n  <task-ilo-alignment-editor show-csv="true" unit="unit" ng-if="activeTab === tabs.taskAlignmentTab"></task-ilo-alignment-editor>\n  <unit-group-set-editor ng-if="activeTab === tabs.groupsTab"></unit-group-set-editor>\n</div>\n')}]),angular.module("units/states/groups/groups.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/groups/groups.tpl.html",'<div class="container" ng-if="unit.hasGroupwork()">\n  <group-set-manager\n    class="row"\n    unit="unit"\n    unit-role="unitRole"\n    selected-group-set="selectedGroupSet">\n  </group-set-manager>\n</div>\x3c!--/has-groupwork--\x3e\n<div class="container" ng-hide="unit.hasGroupwork()">\n  <div class="large-notice-block">\n    <i class="fa fa-2x fa-users"></i>\n    <p>No Groupwork Enabled</p>\n  </div>\n  <div class="text-center col-sm-12 col-md-6 col-md-offset-3">\n    <p class="text-muted">\n      There is no group work enabled for this unit. Convenors should create at\n      least one group set first for groups to be created. This can be found under\n      the groups tab in the unit administration settings.\n    </p>\n    <a class="btn btn-default" ui-sref="units/admin({unitId: unit.id})">Unit Administration</a>\n  </div>\n</div>\x3c!--/no-groupwork--\x3e\n')}]),angular.module("units/states/index/index.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/index/index.tpl.html",'<div ng-hide="unit && (unitRole || project)" class="large-notice-block">\n  <i class="fa fa-2x fa-spinner fa-pulse"></i>\n  <p>Loading unit details...</p>\n</div>\x3c!--/loading--\x3e\n<div ng-if="unit && (unitRole || project)">\n  <ui-view/>\n</div>\n')}]),angular.module("units/states/plagiarism/directives/unit-student-plagiarism-list/unit-student-plagiarism-list.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/plagiarism/directives/unit-student-plagiarism-list/unit-student-plagiarism-list.tpl.html",'<div class="unit-student-plagiarism-list">\n  <div class="panel panel-primary">\n    <div class="panel-heading clearfix">\n      <div class="pull-left">\n        <h4 class="panel-title">Plagiarism Report</h4>\n        Students from {{studentFilter == \'myStudents\' ? \'my tutorials\' : \'every tutorial\'}} that include tasks which appear similar to other student work\n      </div>\n      <div class="pull-right toolbar text-right">\n        <div class="buttons">\n          \x3c!-- <div class="btn-group pull-right">\n            <label class="btn btn-default" ng-model="view" btn-radio="\'students\'">\n              <i class="fa fa-user" tooltip="Show students with similarities"></i>\n            </label>\n            <label class="btn btn-default" ng-model="view" btn-radio="\'tasks\'">\n              <i class="fa fa-tasks" tooltip="Show tasks with similarities"></i>\n            </label>\n          </div> --\x3e\n          <div class="btn-group pull-right">\n            <label class="btn btn-default" ng-model="studentFilter" btn-radio="\'allStudents\'">\n              <i class="fa fa-university" tooltip="Show all students"></i>\n            </label>\n            <label class="btn btn-default" ng-model="studentFilter" btn-radio="\'myStudents\'">\n              <i class="fa fa-pencil" tooltip="Show only my students"></i>\n            </label>\n          </div>\n        </div>\x3c!--/buttons--\x3e\n        <form role="search" class="form-horizontal pull-right">\n          <input id="searchbar" class="input-md form-control" placeholder="Search..." type="search" ng-model="search" autocomplete="off" typeahead="text for text in unitService.unitTypeAheadData(unit) | filter:$viewValue | limitTo:8" typeahead-wait-ms="200" autofocus />\n          <p ng-show="filteredStudents.length < allStudents.length && filteredStudents.length != 0">Showing {{filteredStudents.length}} of {{unit.students.length}} students enrolled.</p>\n        </form>\x3c!--/search--\x3e\n      </div>\x3c!--/toolbar--\x3e\n    </div>\n\n    <div class="panel-body">\n      <div ng-show="view == \'students\'">\n        <div class="table-responsive">\n          <table class="table table-condensed table-hover table-pointer">\n            <thead>\n              <tr>\n                <th><a href="" ng-click="sortOrder=\'student_id\'; reverse=!reverse">Student ID</a></th>\n                <th><a href="" ng-click="sortOrder=\'name\'; reverse=!reverse">Name</a></th>\n                <th><a href="" ng-click="sortOrder=\'target_grade\'; reverse=!reverse">Grade</a></th>\n                \x3c!-- <th><a href="" ng-click="sortOrder=\'similar_to_count\'; reverse=!reverse">Tasks Similar</a></th> --\x3e\n                <th><a href="" ng-click="sortOrder=\'max_pct_copy\'; reverse=!reverse">Max Pct Similar</a></th>\n                <th><a href="" ng-click="sortOrder=\'tutorial.abbreviation\'; reverse=!reverse">Tutorial</a></th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr class="task-progress-row" ng-repeat="student in filteredStudents = (allStudents = (unit.students | showStudents:studentFilter:tutorName | studentsWithPlagiarism) | filter:search) | orderBy:sortOrder:reverse | startFrom:(currentPage - 1) * pageSize | limitTo: pageSize" ng-class="{\'info\': activeStudent == student}" class="pointer" ng-click="selectStudent(student)">\n                <td>{{student.student_id}}</td>\n                <td>{{student.name}}</td>\n                <td>{{grades[student.target_grade]}}</td>\n                \x3c!-- <td>{{student.similar_to_count}}</td> --\x3e\n                <td>{{student.max_pct_copy}}%</td>\n                <td><span tooltip-html-unsafe="<strong>{{student.tutorial.meeting_day}} {{student.tutorial.meeting_time | date: \'shortTime\'}}</strong><br/> {{student.tutorial.meeting_location}} - {{student.tutorial.tutor_name}}">{{student.tutorial ? student.tutorial.abbreviation : \'None\'}}</span></td>\n              </tr>\n            </tbody>\n          </table>\n          <pagination total-items="filteredStudents.length" ng-model="currentPage" items-per-page="pageSize" max-size="maxSize" class="pagination-sm pull-left" boundary-links="true" rotate="false"></pagination>\n        </div>\n      </div> \x3c!-- end students div --\x3e\n    </div>\n  </div>\n\n  \x3c!-- Panel with select student/task to view  --\x3e\n  <div class="panel panel-default" ng-hide="activeStudent || task">\n    <div class="panel-heading">\n      <h3 class="panel-title">\n        View similarities\n      </h3>\n    </div>\n    \x3c!-- Panel body with select message  --\x3e\n    <div class="panel-body large-notice-block nothing-selected">\n      <i ng-class="view == \'tasks\' ? \'fa fa-tasks\' : \'fa fa-user\'"></i>\n      <p>Select a {{ view == \'tasks\' ? \'task\' : \'student\' }} to view similarities</p>\n    </div>\n  </div>\n\n  \x3c!-- Panel body with task details  --\x3e\n  <div class="panel panel-default" ng-show="activeStudent || task">\n    <div class="panel-heading">\n      <h3 class="panel-title">\n        View similarities\n      </h3>\n    </div>\n    <div class="panel-body" ng-show="activeStudent || task">\n      <div ng-show="loadingStudent">\n        <div class="large-notice-block">\n          <i class="fa fa-spinner fa-pulse fa-2x"></i>\n          <p>Loading...</p>\n        </div>\n      </div>\n      <div ng-hide="loadingStudent">\n        <ul class="nav nav-tabs nav-justified" ng-show="tasksToCheck.length > 1">\n          <li role="presentation" ng-class="{\'active\' : activeTask == task }" ng-repeat="task in tasksToCheck = (activeStudent.tasks | taskWithPlagiarism)"><a href="" ng-click="selectTask(task)">{{task.definition.abbreviation}}</a></li>\n        </ul>\n        <div class="col-sm-12" ng-if="activeTask">\n          <task-plagiarism-report-viewer task="activeTask" assessing-unit-role="assessingUnitRole"></task-plagiarism-report-viewer>\n        </div>\n      </div>\n    </div>\n    <div class="panel-footer">\n      <span ng-if="activeTask"><a ng-href="{{activeTask.definition.plagiarism_report_url}}" target="new">All plagiarism for {{activeTask.definition.name}}</a></span>\n    </div>\n  </div>\n</div>\n')}]),angular.module("units/states/plagiarism/plagiarism.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/plagiarism/plagiarism.tpl.html",'<div class="container">\n  <unit-student-plagiarism-list\n    unit="unit"\n    unit-role="unitRole">\n  </unit-student-plagiarism-list>\n</div>\n')}]),angular.module("units/states/portfolios/portfolios.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/portfolios/portfolios.tpl.html",'<div id="student-portfolios" class="container">\n  <tabset>\n    <tab ng-repeat="tab in tabs | toArray | orderBy: \'seq\'" active="tab.active" disable="!selectedStudent" ng-click="selectedStudent && setActiveTab(tab)">\n      <tab-heading>{{tab.title}}</tab-heading>\n    </tab>\n  </tabset>\x3c!--/tabs--\x3e\n  <div class="panel panel-primary" ng-show="activeTab == tabs.selectStudent">\n    <div class="panel-heading clearfix">\n      <div class="pull-left">\n        <h4 class="panel-title">Mark Portfolios</h4>\n        Assess student portfolios\n      </div>\n      <div class="pull-right toolbar">\n        <div class="buttons">\n          <div class="btn-group">\n            <label class="btn btn-default" ng-model="portfolioFilter" btn-radio="\'allStudents\'">\n              <i class="fa fa-globe" tooltip-placement="top" tooltip="Show all students, even those without portfolios"></i>\n            </label>\n            <label class="btn btn-default" ng-model="portfolioFilter" btn-radio="\'withPortfolio\'">\n              <i class="fa fa-book" tooltip-placement="top" tooltip="Show only students with portfolios"></i>\n            </label>\n          </div>\n          <div class="btn-group">\n            <label class="btn btn-default" ng-model="studentFilter" btn-radio="\'allStudents\'">\n              <i class="fa fa-university" tooltip-placement="top" tooltip="Show all students"></i>\n            </label>\n            <label class="btn btn-default" ng-model="studentFilter" btn-radio="\'myStudents\'">\n              <i class="fa fa-pencil" tooltip-placement="top" tooltip="Show only my students"></i>\n            </label>\n          </div>\n          <div class="btn-group btn-group-sm select-portfolio-grade">\n              <label class="btn btn-default text-center" ng-model="filterOptions.selectedGrade" btn-radio="-1">\n                  <span class="grade-icon" tooltip="Show all portfolios" class="text-{{$index == filterOptions.selectedGrade ? \'primary\' : \'muted\'}}">All</span>\n              </label>\n          </div>\n          <div class="btn-group btn-group-sm select-portfolio-grade">\n            <label ng-repeat="grade in grades" class="btn btn-default col-sm-3 text-center" ng-model="filterOptions.selectedGrade" btn-radio="{{$index}}">\n              <grade-icon grade="grade" tooltip="Select to show student\'s aiming for {{grade}}" tooltip-append-to-body="true" class="text-{{$index == filterOptions.selectedGrade ? \'primary\' : \'muted\'}}"></grade-icon>\n            </label>\n          </div>\n        </div>\x3c!--/buttons--\x3e\n        <form role="search" class="form-horizontal">\n          <input id="searchbar" class="input-md form-control" placeholder="Search..." type="search" ng-model="search" autocomplete="off" typeahead="text for text in unitService.unitTypeAheadData(unit) | filter:$viewValue | limitTo:8" typeahead-wait-ms="200" autofocus />\n          <p ng-show="filteredStudents.length < allStudents.length && filteredStudents.length != 0">Showing {{filteredStudents.length}} of {{unit.students.length}} students enrolled.</p>\n        </form>\x3c!--/search--\x3e\n      </div>\x3c!--/toolbar--\x3e\n    </div>\x3c!--header--\x3e\n    <div class="panel-body unit-student-list">\n      <div class="panel-body large-notice-block" ng-hide="filteredStudents.length > 0">\n        <i class="fa fa-book"></i>\n        <p>No portfolios found</p>\n      </div>\n      <table ng-hide="filteredStudents.length == 0" class="table table-condensed table-hover table-pointer ">\n        <thead>\n          <tr>\n            <th class="student-id">\n              <a ng-click="sortOrder=\'student_id\'; reverse=!reverse">\n                Student <i ng-show="sortOrder==\'student_id\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i>\n              </a>\n            </th>\n            <th class="name">\n              <a ng-click="sortOrder=\'name\'; reverse=!reverse">\n                Name <i ng-show="sortOrder==\'name\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i>\n              </a>\n            </th>\n            <th>\n              <a ng-click="sortOrder=\'tutorial.tutor_name\'; reverse=!reverse">\n                Tutor <i ng-show="sortOrder==\'tutorial.tutor_name\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i>\n              </a>\n            </th>\n            <th class="tutorial">\n              <a ng-click="sortOrder=\'tutorial.abbreviation\'; reverse=!reverse">\n                Tutorial <i ng-show="sortOrder==\'tutorial.abbreviation\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i>\n              </a>\n            </th>\n            <th>\n              <a ng-click="sortOrder=\'target_grade\'; reverse=!reverse">\n                Target <i ng-show="sortOrder==\'target_grade\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i>\n              </a>\n            </th>\n            <th>\n              <a ng-click="sortOrder=\'orderScale\'; reverse=!reverse">\n                Stats<i ng-show="sortOrder==\'orderScale\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i>\n              </a>\n            </th>\n            <th class="has-portfolio" ng-show="portfolioFilter == \'allStudents\'">\n                <a ng-click="sortOrder=\'has_portfolio\'; reverse=!reverse">\n                  Portfolio? <i ng-show="sortOrder==\'has_portfolio\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i>\n              </a>\n            </th>\n            <th class="grade">\n              <a ng-click="sortOrder=\'grade\'; reverse=!reverse">\n                Grade <i ng-show="sortOrder==\'grade\'" class="fa fa-caret-{{reverse ? \'down\' : \'up\'}}"></i>\n              </a>\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr class="task-progress-row" ng-repeat="student in filteredStudents = (allStudents = (unit.students | showStudents:studentFilter:tutorName | studentsWithPortfolio:portfolioFilter | studentsWithTargetGrade:filterOptions.selectedGrade) | filter:search) | orderBy:sortOrder:reverse | startFrom:(currentPage - 1) * pageSize | limitTo: pageSize" ng-class="{\'info\': selectedStudent == student}" ng-click="selectStudent(student)">\n            <td>{{student.student_id}}</td>\n            <td>{{student.name}}</td>\n            <td>{{student.tutorial ? student.tutorial.tutor_name : \'None\'}}</td>\n            <td>{{student.tutorial ? student.tutorial.abbreviation : \'None\'}}</td>\n            <td class="flags-data">\n              <grade-icon grade="student.target_grade"></grade-icon>\n            </td>\n            <td class="task-progress-bar">\n              <progress class="task-progress" animate="true">\n                <bar\n                  ng-repeat="bar in student.task_stats | filter:barLargerZero track by $index"\n                  value="bar.value"\n                  type="{{statusClass(bar.key)}}">\n                  <span ng-hide="bar.value < 10">{{bar.value}}%</span>\n                </bar>\n              </progress>\n            </td>\n            <td ng-show="portfolioFilter == \'allStudents\'">{{student.has_portfolio ? "Yes" : "No"}}</td>\n            <td>{{student.grade}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="panel-footer clearfix">\n      <pagination total-items="filteredStudents.length" ng-model="currentPage" items-per-page="pageSize" max-size="maxSize" class="pagination-sm pull-left" boundary-links="true" rotate="false"></pagination>\n      <div class="pull-right">\n        <a class="btn btn-info" href="{{portfolioDownloadUrl}}" target="_blank" tooltip-html-unsafe="<i class=\'fa fa-warning\'></i> <strong>WARNING:</strong> Downloading all portfolios may take a long time" tooltip-append-to-body="true">\n          <i class="fa fa-download"></i> Download All Portfolios\n        </a>\n        <a class="btn btn-success" href="{{gradeDownloadUrl}}" target="_blank">\n          <i class="fa fa-download"></i> Download Grades\n        </a>\n      </div>\n    </div>\n  </div>\n  <div class="panel panel-primary" ng-show="activeTab != tabs.selectStudent && !selectedStudent">\n    <div class="panel-heading clearfix">\n      <div class="pull-left">\n        <h4 class="panel-title" ng-hide="selectedStudent">Portfolio Details</h4>\n        Review portfolio and assign grade.\n      </div>\n    </div>\n    <div class="panel-body large-notice-block" ng-hide="selectedStudent">\n      <i class="fa fa-book"></i>\n      <p>Select student to view portfolio and assign grade</p>\n    </div>\n  </div>\n  <div ng-if="selectedStudent">\n    <div class="panel panel-primary" ng-show="activeTab == tabs.viewProgress">\n      <div class="panel-heading clearfix">\n        <div class="pull-left">\n          <h3 class="panel-title">Review Progress of {{selectedStudent.name}}</h3>\x3c!--/title--\x3e\n          Review the students progress through the unit\'s tasks.\n        </div>\n      </div>\n      <div class="panel-body">\n        <project-progress-dashboard ng-if="project"></project-progress-dashboard>\n      </div>\n    </div>\n\n    <div class="panel panel-primary" ng-show="activeTab == tabs.viewPortfolio">\n      <div class="panel-heading clearfix">\n        <div class="pull-left">\n          <h3 class="panel-title">Review Portfolio of {{selectedStudent.name}}</h3>\x3c!--/title--\x3e\n          View or download portfolio for assessment.\n        </div>\n      </div>\n      <div class="panel-body large-notice-block" ng-hide="project.portfolio_available">\n        <i class="fa fa-book"></i>\n        <p>No Portfolio Submitted</p>\n      </div>\n      <pdf-panel-viewer\n        ng-if="project.portfolio_available"\n        pdf-url="project.portfolioUrl()">\n      </pdf-panel-viewer>\n    </div>\n\n    <div class="panel panel-primary" ng-show="activeTab == tabs.assessPortfolio">\n      <div class="panel-heading clearfix">\n        <div class="pull-left">\n          <h4 class="panel-title">Grade for {{selectedStudent.name}}</h4>\n          Assign Grade for this work.\n        </div>\n      </div>\n      <div class="panel-body alignment-rater">\n        <div class="col-sm-12 rationale-wrapper">\n          <div tooltip="Click to edit rationale" tooltip-placement="left" tooltip-append-to-body="false" tooltip-popup-delay="300" tooltip-enable="project.grade_rationale != null" ng-click="toggleEditRationale()" class="rationale" ng-class="{\'no-rationale\': project.grade_rationale == null}" ng-hide="editingRationale">\n            <label class="text-muted" ng-show="project.grade_rationale != null">\n              Provided Rationale\n            </label>\n            <div ng-bind-html="(project.grade_rationale || \'No rationale provided\') | markdown"></div>\n            <div class="small" ng-hide="project.grade_rationale">Click to add one</div>\n          </div>\n          <div ng-if="editingRationale" class="clearfix">\n            \x3c!-- <markdown-editor\n              height="200"\n              ng-model="project.grade_rationale"\n              placeholder="Edit rationale..."\n              autofocus="true">\n            </markdown-editor> --\x3e\n            <div contenteditable ng-model="project.grade_rationale" placeholder="Edit rationale here..." style="border-style: solid; border-width: thin; height: 200px"></div>\n            <a ng-click="toggleEditRationale(alignment)" class="pull-right">Done Editing</a>\n          </div>\n        </div>\n\n        <div ng-repeat="results in gradeResults">\n          <h5 class="col-sm-2">{{results.name}}</h5>\n          <p class="btn-group col-sm-10">\n            <label ng-repeat="resultScore in results.scores" ng-click="project.assignGrade(resultScore, project.grade_rationale)" class="btn col-sm-2 text-center {{project.grade == resultScore ? \'btn-primary\' : \'btn-default\'}}">\n              {{resultScore}}\n            </label>\n          </p>\n        </div>\n      </div>\n    </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("units/states/rollover/directives/unit-dates-selector/unit-dates-selector.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/rollover/directives/unit-dates-selector/unit-dates-selector.tpl.html",'<div class="unit-dates-selector">\n  <div class="panel panel-primary">\n    <div class="panel-heading">\n      <h3 class="panel-title">Create Unit</h3>\n      Duplicate an existing unit by specifying the time period.\n    </div>\n    <form class="form-horizontal" role="form" name="rolloverUnitForm" ng-submit="saveUnit()">\n      <div class="panel-body">\n        <div class="form-group">\n          <label class="col-sm-2 control-label" for="teachingperiod">Teaching Period</label>\n          <div class="col-sm-9">\n            <select class="form-control" ng-model="unit.teaching_period_id">\n              <option value="">Custom Period</option>\n              <option ng-value="tp.id" value="{{tp.id}}" ng-repeat="tp in teachingPeriods.loadedPeriods">{{tp.period}}-{{tp.year}}</option>\n            </select>\n          </div>\n        </div>\x3c!--/teaching-period-date--\x3e\n\n        <div class="form-group">\n          <label tooltip="Date for the start of teaching in the unit." class="col-sm-2 control-label" for="startdate">Start Date</label>\n          <div class="col-sm-9">\n            <div class="col-sm-4 input-group">\n              <input datepicker-popup="yyyy-MM-dd" is-open="calOptions.startOpened" type="text" class="form-control" id="startdate" ng-model="unit.start_date" ng-required="true" placeholder="yyyy-MM-dd" close-text="Close" ng-if="!unit.teaching_period_id" />\n              <input datepicker-popup="yyyy-MM-dd" is-open="calOptions.startOpened" type="text" class="form-control" id="startdate" ng-model="tp.start_date" ng-required="true" placeholder="yyyy-MM-dd" close-text="Close" ng-disabled="unit.teaching_period_id" ng-repeat="tp in teachingPeriods.loadedPeriods" ng-if="unit.teaching_period_id && tp.id == unit.teaching_period_id" />\n              <span class="input-group-btn">\n                <button class="btn btn-default" type="button" ng-click="open($event,\'start\')" ng-disabled="unit.teaching_period_id">\n                  <i class="fa fa-calendar"></i>\n                </button>\n              </span>\n            </div>\n          </div>\n        </div>\x3c!--/start-date--\x3e\n\n        <div class="form-group">\n          <label class="col-sm-2 control-label" for="enddate">End Date</label>\n          <div class="col-sm-9">\n            <div class="col-sm-4 input-group">\n              <input datepicker-popup="{{format}}" id="enddate" type="text" class="form-control" ng-model="unit.end_date" is-open="calOptions.endOpened" ng-required="true" close-text="Close" ng-if="!unit.teaching_period_id" />\n              <input datepicker-popup="{{format}}" id="enddate" type="text" class="form-control" ng-model="tp.end_date" is-open="calOptions.endOpened" ng-required="true" close-text="Close" ng-disabled="unit.teaching_period_id" ng-repeat="tp in teachingPeriods.loadedPeriods" ng-if="unit.teaching_period_id && tp.id == unit.teaching_period_id" />\n              <span class="input-group-btn">\n                <button class="btn btn-default" type="button" ng-click="open($event,\'end\')" ng-disabled="unit.teaching_period_id">\n                  <i class="fa fa-calendar"></i>\n                </button>\n              </span>\n            </div>\n          </div>\n        </div>\x3c!--/end-date--\x3e\n      </div>\n      <div class="panel-footer text-right">\n        <input type="submit" value="Create Unit" class="btn btn-success" />\n      </div>\n    </form>\n  </div>\n</div>\n')}]),angular.module("units/states/rollover/rollover.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/rollover/rollover.tpl.html",'<div class="container">\n  <unit-dates-selector unit="unit"></unit-dates-selector>\n</div>\n')}]),angular.module("units/states/students-list/students-list.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/students-list/students-list.tpl.html",'<div id="students-list" class="container">\n  <div class="panel panel-primary">\n    <div class="panel-heading">\n      <div class="input-group">\n        <input\n          class="form-control input-lg"\n          placeholder="Search for students or tutors..."\n          type="search"\n          ng-model="searchText"\n          ng-change="searchTextChanged()"\n          typeahead-on-select="searchTextChanged()"\n          typeahead="text for text in\n            unitTypeAheadData(unit) |\n            filter:$viewValue |\n            limitTo:8"\n          typeahead-wait-ms="200"\n          autofocus>\x3c!--/search-text--\x3e\n          <span class="input-group-btn">\n            <button class="btn btn-default btn-lg" type="button" ng-model="showSearchOptions" btn-checkbox>\n              <i class="fa fa-chevron-{{showSearchOptions ? \'up\' : \'down\'}}"></i>\n            </button>\n          </span>\x3c!--/search-options-toggle--\x3e\n        </div>\n      </h4>\n    </div>\x3c!--/search-header--\x3e\n    <form class="panel-body panel-collapseable search-options" ng-show="showSearchOptions">\n      <div class="form-group staff-filter">\n        <label>Show Students From...</label>\n        <div class="input-group">\n          <div class="btn-group">\n            <button class="btn btn-default col-sm-6" ng-model="staffFilter" ng-click="staffFilterChanged(\'all\')" btn-radio="\'all\'">\n              <i class="fa fa-university"></i> All Tutorials\n            </button>\n            <button class="btn btn-default col-sm-6" ng-model="staffFilter" ng-click="staffFilterChanged(\'mine\')" btn-radio="\'mine\'">\n              <i class="fa fa-pencil"></i> My Tutorials\n            </button>\n          </div>\n        </div>\n      </div>\x3c!--/staff-filter-button-group--\x3e\n      <div class="form-group flag-sort">\n        <label>Sort Flags By...</label>\n        <div class="input-group">\n          <div class="btn-group">\n            <button class="btn btn-default" ng-model="tableSort.order" ng-click="sortTableBy(\'target_grade\')" btn-radio="\'target_grade\'">\n              <i class="fa fa-check"></i> Grade\n            </button>\n            <button class="btn btn-default" ng-model="tableSort.order" ng-click="sortTableBy(\'max_pct_copy\')" btn-radio="\'max_pct_copy\'">\n              <i class="fa fa-eye"></i> Plagiarism\n            </button>\n            <button class="btn btn-default" ng-model="tableSort.order" ng-click="sortTableBy(\'portfolio_status\')" btn-radio="\'portfolio_status\'">\n              <i class="fa fa-book"></i> Portfolio Status\n            </button>\n          </div>\n        </div>\n        <p class="help-block">\n          Click the button twice to reverse the sort ordering.\n        </p>\n      </div>\x3c!--/flag-sort-button-group--\x3e\n    </form>\x3c!--/search-options--\x3e\n    <div class="panel-body" ng-show="filteredStudents.length == 0">\n      <div class="callout callout-primary">\n        <h4>No students found</h4>\n        <p>\n          No students were found using the filters specified.\n        </p>\n      </div>\n    </div>\x3c!--/no-students-found--\x3e\n    <table ng-show="filteredStudents.length > 0" class="table table-condensed table-hover table-pointer">\n      <thead>\n        <tr>\n          <th class="avatar"></th>\n          <th class="student-id">\n            <a ng-click="sortTableBy(\'student_id\')">\n              Student ID <i ng-show="tableSort.order == \'student_id\'" class="fa fa-caret-{{tableSort.reverse ? \'down\' : \'up\'}}"></i>\n            </a>\n          </th>\x3c!--/id-column-header--\x3e\n          <th class="name">\n            <a ng-click="sortTableBy(\'name\')">\n              Name <i ng-show="tableSort.order == \'name\'" class="fa fa-caret-{{tableSort.reverse ? \'down\' : \'up\'}}"></i>\n            </a>\n          </th>\x3c!--/name-column-header--\x3e\n          <th class="stats">\n            <a ng-click="sortTableBy(\'orderScale\')">\n              Stats <i ng-show="tableSort.order == \'orderScale\'" class="fa fa-caret-{{tableSort.reverse ? \'down\' : \'up\'}}"></i>\n            </a>\n          </th>\x3c!--/stats-column-header--\x3e\n          <th class="flags">\n            <a ng-click="sortTableBy(\'flags\')">\n              Flags\n              <i ng-show="\n                tableSort.order == \'max_pct_copy\' ||\n                tableSort.order == \'target_grade\' ||\n                tableSort.order == \'portfolio_status\'"\n                class="ng-hide fa fa-caret-{{tableSort.reverse ? \'down\' : \'up\'}}"></i>\n            </a>\n          </th>\x3c!--/flags-column-header--\x3e\n          <th class="tutorial">\n            <a ng-click="sortTableBy(\'tutorial.abbreviation\')">\n              Tutorial <i ng-show="tableSort.order == \'tutorial.abbreviation\'" class="fa fa-caret-{{tableSort.reverse ? \'down\' : \'up\'}}"></i>\n            </a>\n          </th>\x3c!--/tutorial-column-header--\x3e\n        </tr>\x3c!--/column-headers-row--\x3e\n      </thead>\n      <tbody>\n        <tr class="task-progress-row" ng-repeat="student in filteredStudents">\n          <td class="avatar" ng-click="viewStudent(student)">\n            <user-icon user="student" email="student.student_email"></user-icon>\n          </td>\n          <td ng-click="viewStudent(student)">\n            {{student.student_id || "N/A"}}\n          </td>\x3c!--/student-id-column--\x3e\n          <td ng-click="viewStudent(student)">\n            {{student.name}}\n          </td>\x3c!--/name-column--\x3e\n          <td ng-click="viewStudent(student)" class="task-progress-bar">\n            <progress class="task-progress" animate="true">\n              <bar\n                ng-repeat="bar in student.task_stats"\n                value="bar.value"\n                type="{{statusClass(bar.key)}}">\n                <span ng-hide="bar.value < 10">{{bar.value}}%</span>\n              </bar>\n            </progress>\n          </td>\x3c!--/progress-column--\x3e\n          <td class="text-left" ng-click="viewStudent(student)">\n            <span class="flags">\n              <span class="flag">\n                <grade-icon grade="student.target_grade"></grade-icon>\n              </span>\n              <span ng-show="student.max_pct_copy > 0" class="flag">\n                <i class="fa fa-eye fa-2x" ></i>\n              </span>\n              <span ng-show="student.has_portfolio" class="flag">\n                <i class="fa fa-book fa-2x" ng-class="{\'text-muted\': student.compile_portfolio}"></i>\n              </span>\n            </span>\n          </td>\x3c!--/flags-column--\x3e\n          <td>\n            <select\n              class="form-control input-sm"\n              ng-model="student.tutorial_id"\n              ng-options="tutorial.id as (tutorial.abbreviation + \' - \' + tutorial.description) for tutorial in unit.tutorials | orderBy:\'abbreviation\'"\n              ng-change="switchToTutorial(student, student.tutorial_id)">\n              <option value="">None</option>\n            </select>\n          </td>\x3c!--/tutorial-column--\x3e\n        </tr>\x3c!--/student-row--\x3e\n      </tbody>\n    </table>\x3c!--/student-table--\x3e\n    <div class="panel-footer">\n      <div class="pull-right">\n        <button\n          type="button"\n          class="btn btn-default"\n          ng-csv="getCSVData"\n          lazy-load="true"\n          csv-header="getCSVHeader()"\n          filename="student-project-export.csv"\n          target="_blank">\n          <i class="fa fa-file-excel-o"></i>\n          <i class="fa fa-download"></i> Export CSV\n        </button>\n        <button type="button" class="btn btn-default" ng-click="showEnrolModal()">\n          <i class="fa fa-user"></i>\n          <i class="fa fa-plus"></i> Enrol Student\n        </button>\n      </div>\x3c!--/export-buttons--\x3e\n      <pagination\n        total-items="pagination.totalSize"\n        ng-change="pagination.onChange()"\n        ng-model="pagination.currentPage"\n        items-per-page="pagination.pageSize"\n        max-size="pagination.maxSize"\n        class="pagination-sm"\n        boundary-links="true"\n        rotate="false">\n      </pagination>\x3c!--/pagination--\x3e\n    </div>\x3c!--/panel-footer--\x3e\n  </div>\n</div>\n')}]),angular.module("units/states/tasks/inbox/directives/staff-task-list/staff-task-list.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/tasks/inbox/directives/staff-task-list/staff-task-list.tpl.html",'<div class="panel panel-primary">\n  <div class="panel-heading">\n    <div class="input-group">\n      <input type="text" class="form-control" ng-model="filters.studentName" ng-change="studentNameChanged()"\n        placeholder="Search students...">\n      <span class="input-group-btn">\n        <button class="btn btn-default btn-search-opts-toggle" type="button" ng-model="showSearchOptions" btn-checkbox>\n          <i class="fa fa-chevron-{{showSearchOptions ? \'up\' : \'down\'}}"></i>\n        </button>\n      </span>\n      \x3c!--/search-options-toggle--\x3e\n    </div>\n    \x3c!--/search--\x3e\n  </div>\n  <form class="panel-body panel-collapseable search-options" ng-show="showSearchOptions">\n    <div class="form-group task-definition">\n      <div class="dropdown" dropdown>\n        <label>Task Definition</label>\n        <i ng-if="isTaskDefMode" class="fa fa-download pull-right dropdown-toggle" style="cursor:pointer; padding-top: 8px; padding-right: 8px;"\n          dropdown-toggle></i>\n        <ul class="dropdown-menu pull-right">\n          <li>\n            <a ng-href="{{submissionsPdfsUrl}}">Bulk Export Submission PDFs</a>\n          </li>\n          <li>\n            <a ng-href="{{submissionsUrl}}">Bulk Export Submission Files</a>\n          </li>\n        </ul>\n      </div>\n      <div class="input-group col-sm-12">\n        <select ng-model="filters.taskDefinitionIdSelected" ng-options="td.id as (td.abbreviation + \' - \' + td.name) group by groupSetName(td.group_set_id) for td in unit.task_definitions | orderBy:\'+seq\'"\n          ng-change="taskDefinitionIdChanged()" autofocus="{{autofocus.onTaskDefinitionSelect}}" class="form-control input-md">\n          <option value="" ng-hide="isTaskDefMode">All task definitions</option>\n        </select>\n      </div>\n      <p class="help-block">You can choose to display submissions of a specific task definition here.</p>\n    </div>\n    \x3c!--/task-definition--\x3e\n    <div class="form-group tutorial">\n      <label>Tutorials</label>\n      <div class="input-group col-sm-12">\n        <select ng-model="filters.tutorialIdSelected" ng-options="t.id as t.description for t in tutorials | orderBy:\'abbreviation\'"\n          ng-change="tutorialIdChanged()" class="form-control input-md">\n        </select>\n      </div>\n      <p class="help-block">You can choose to display submissions from all tutorials or just your tutorials.</p>\n    </div>\n    \x3c!--/tutorial--\x3e\n  </form>\n  \x3c!--/search-options--\x3e\n  <ul class="list-group">\n    <li class="list-group-item list-group-item-task clearfix {{task.statusClass()}}" id="{{task.taskKeyToIdString()}}"\n      ng-click="setSelectedTask(task)" ng-class="{selected: isSelectedTask(task)}" ng-repeat="task in filteredTasks">\n      <user-icon user="task.project()" email="task.project().student_email" size="50">\n      </user-icon>\n      <div class="task-data">\n        <h4 class="list-group-item-heading">\n          {{task.project().name}}\n        </h4>\n        <p class="list-group-item-text">\n          {{task.definition.abbreviation}} - {{task.definition.name}}\n        </p>\n        <div class="list-group-item-text-extended" ng-show="isSelectedTask(task)">\n          <p>\n            {{task.project().shortTutorialDescription()}}\n          </p>\n          <p>\n            Submitted {{showDate(task.submission_date)}}\n          </p>\n          <p ng-show="task.times_assessed > 0">\n            Assessed {{task.times_assessed}} time{{task.times_assessed == 1 ? "" : "s"}}\n          </p>\n        </div>\n      </div>\n      \x3c!--/task-data--\x3e\n      <div class="task-badges">\n        <status-icon status="task.status"></status-icon>\n        <div class="task-superscript-badges">\n          <span class="task-superscript-badge new-comments-badge" ng-if="task.num_new_comments > 0">\n            {{task.num_new_comments}}\n          </span>\n          <span class="task-superscript-badge plagiarism-detected-badge" ng-if="task.plagiarismDetected()">\n            <i class="fa fa-eye"></i>\n          </span>\n        </div>\n        <div class="task-subscript-badges">\n          <span class="task-subscript-badge grade-badge" ng-if="task.hasGrade()">\n            {{task.gradeDesc()}}\n          </span>\n          <span class="task-subscript-badge quality-badge" ng-if="task.hasQualityPoints()">\n            <sup>{{task.quality_pts}}</sup>&frasl;<sub>{{task.definition.max_quality_pts}}</sub>\n          </span>\n        </div>\n      </div>\n      \x3c!--/badges--\x3e\n    </li>\n    \x3c!--/task--\x3e\n    <li ng-show="filteredTasks.length == 0" class="list-group-item text-center text-muted">\n      <div id="empty-task-inbox">\n        <img src="/assets/images/empty_task_inbox.svg" alt="Empty task inbox">\n        No tasks to display!\n      </div>\n    </li>\n  </ul>\n</div>')}]),angular.module("units/states/tasks/inbox/inbox.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/tasks/inbox/inbox.tpl.html",'<div class="panel-full-screen">\n  <staff-task-list\n    show-search-options="showSearchOptions"\n    filters="filters"\n    task-data="taskData"\n    unit="unit"\n    unit-role="unitRole"\n    class="col-xs-12 col-md-3">\x3c!--/panel-1--\x3e\n  </staff-task-list>\n  <task-dashboard\n    task="taskData.selectedTask"\n    show-footer="true"\n    show-submission="true"\n    class="col-xs-12 col-md-6">\n  </task-dashboard>\x3c!--/panel-2--\x3e\n  <task-comments-viewer\n    task="taskData.selectedTask"\n    project="taskData.selectedTask.project()"\n    class="col-xs-12 col-md-3"\n    refocus-on-task-change="true"\n    ng-if="taskData.selectedTask">\n  </task-comments-viewer>\x3c!--/panel-3--\x3e\n</div>\n')}]),angular.module("units/states/tasks/offline/offline.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/tasks/offline/offline.tpl.html",'<div class="container" id="task-offline-marking-state">\n  <div class="panel-row">\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <h4 class="panel-title">Download Unmarked Tasks</h4>\n      </div>\n      <div class="panel-body">\n        <p>\n          Download a zip file containing the tasks that require feedback,\n          along with a CSV you can use to submit your comments and task\n          status changes.\n        </p>\n      </div>\n      <div class="panel-footer">\n        <a target="_blank" class="btn btn-success form-control" href="{{readyToMarkSubmissionsUrl}}">\n          <i class="fa fa-file-zip-o"></i> <i class="fa fa-download"></i> Download Tasks To Mark\n        </a>\n      </div>\n    </div>\x3c!--/download-unmarked--\x3e\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <h4 class="panel-title">Upload Marked Zip</h4>\n      </div>\n      <div class="panel-body">\n        <p>\n          Make changes to student\'s statuses in the downloaded <code>marks.csv</code>\n          file. Re-zip your changes and optional annotated PDFs with your feedback and\n          upload below.\n        </p>\n        <p class="text-muted">\n          Use this option when you have made annotations to student\'s work for feedback\n          and to change student\'s task states.\n        </p>\n      </div>\n      <div class="panel-footer">\n        <file-uploader\n          url="uploadSubmissionUrl"\n          files="zipMarkingFiles"\n          is-uploading="isUploading"\n          is-ready="isReady.zip"\n          as-button="true"\n          on-success="onMarkingUploadSuccess">\n        </file-uploader>\n      </div>\n    </div>\x3c!--/upload-zip--\x3e\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <h4 class="panel-title">Upload Marked CSV</h4>\n      </div>\n      <div class="panel-body">\n        <p>\n          Make changes to student\'s statuses in the downloaded <code>marks.csv</code>\n          file. Upload your modified <code>marks.csv</code> below.\n        </p>\n        <p class="text-muted">\n          Use this option when you have not made annotations to student\'s work\n          and just want to change student\'s task states.\n        </p>\n      </div>\n      <div class="panel-footer">\n        <file-uploader\n          url="uploadSubmissionUrl"\n          files="csvMarkingFiles"\n          is-uploading="isUploading"\n          is-ready="isReady.csv"\n          as-button="true"\n          on-success="onMarkingUploadSuccess">\n        </file-uploader>\n      </div>\n    </div>\x3c!--/upload-zip--\x3e\n  </div>\x3c!--/top-panels--\x3e\n  <div class="panel panel-default" ng-show="taskUploadResults && taskUploadResults.length > 0">\n    <hr>\n    <div class="panel-heading">\n      <h4 class="panel-title">\n        Upload Results\n        <a class="pull-right" ng-click="dismissResults()">\n          <i class="fa fa-times"></i>\n        </a>\n      </h4>\n    </div>\n    <table class="table table-striped">\n      <thead>\n        <th>Filename</th>\n        <th>Task</th>\n        <th>Message</th>\n      </thead>\n      <tr ng-repeat="item in taskUploadResults.failed" class="danger">\n        <td>{{item.file}}</td>\n        <td>{{item.task}}</td>\n        <td>{{item.error}}</td>\n      </tr>\n      <tr ng-repeat="item in taskUploadResults.succeeded">\n        <td>{{item.file}}</td>\n        <td>{{item.task}}</td>\n        <td>Success</td>\n      </tr>\n      <tr ng-repeat="item in taskUploadResults.ignored" class="info">\n        <td>{{item.file}}</td>\n        <td>{{item.task}}</td>\n        <td>File ignored</td>\n      </tr>\n    </table>\n  </div>\x3c!--/upload-results--\x3e\n  <hr>\n  <div class="panel panel-default">\n    <div class="panel-heading">\n      <h4 class="panel-title">How to mark offline</h4>\n    </div>\n    <div class="panel-body">\n      <h5>1. Open CSV</h5>\n      <p>\n        To mark, open <code>marks.csv</code> in your favourite spreadsheet or text editor.\n      </p>\n      <h5>2. Open PDF</h5>\n      <p>\n        Open a student\'s PDF submission file under the appropriate directory.\n        You may choose to annotate or comment on this PDF file.\n      </p>\n      <h5>3. Decide a new status</h5>\n      <p>\n        A student may decide that their work is:\n      </p>\n      <ul>\n        <li>Ready to Mark (or <code>rtm</code>), or</li>\n        <li>Needs Help (or <code>needs_help</code>).</li>\n      </ul>\n      <p>\n        This is indicated in the <code>status</code> column for the respective task\n        row in the <code>marks.csv</code> file.\n      </p>\n      <p>\n        Once you decide what status to update a student\'s work to, change the\n        <code>status</code> column value to one of the following:\n      </p>\n      <table class="table table-condensed">\n        <thead>\n          <tr>\n            <th>Status</th>\n            <th>Description</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>\n              <code>discuss</code> or <code>d</code>\n            </td>\n            <td>\n              The student has completed work to a satisfactory\n              standard and you will discuss the work with them at\n              the next tutorial.\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <code>demonstrate</code> or <code>demo</code>\n            </td>\n            <td>\n              The same as <code>discuss</code>, but a reminder for you\n              to ask the student to show you the work in class (i.e., prove\n              to you that the code works).\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <code>fix</code>\n            </td>\n            <td>\n              The student has made some errors and you will want them to\n              make fixes to their submission, and resubmit their work for\n              re-correction at a later date.\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <code>do_not_resubmit</code>\n            </td>\n            <td>\n              The student has consistently submitted the same work without\n              making required fixes. This indicates that the student should\n              fix the work themselves and include it in their portfolio where\n              staff will reassess it.\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <code>redo</code>\n            </td>\n            <td>\n              The student has completely misunderstood what the task asked\n              of them, or have completed unrelated files to Doubtfire. You want\n              them to start the task again from scratch.\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <code>fail</code>\n            </td>\n            <td>\n              The student has failed this task and will no longer have any\n              more attempts at uploading further work. Use this sparingly.\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <h5>4. Leaving a comment</h5>\n      <p>\n        Your previous comment and the student\'s previous comment will be\n        present in the <code>Student\'s Last Comment</code> and\n        <code>Your Last Comment</code> column, respectively.\n\n        You may choose to add a new comment to this in the <code>New Comment</code>\n        column.\n      </p>\n\n      <h5>5. Graded task</h5>\n      <p>\n        If the task is a graded task, you should set the value of the\n        <code>New Grade</code> column to one of:\n      </p>\n\n      <ul>\n        <li><code>p</code>  - for a task that was completed to a Pass standard</li>\n        <li><code>c</code>  - for a task that was completed to a Credit standard</li>\n        <li><code>d</code>  - for a task that was completed to a Distinction standard</li>\n        <li><code>hd</code> - for a task that was completed to a High Distinction standard</li>\n      </ul>\n\n      <h5>6. Rezip</h5>\n      <p>\n        Re-zip the entire package again, including each student\'s username folder and\n        <code>marks.csv</code>. Alternatively, if you haven\'t made any annotations to students\' work\n        you can chose to upload just the marks.csv file instead.\n      </p>\n\n      <p>\n        To do this, navigate to the upload tabs above.\n      </p>\n    </div>\n  </div>\n</div>\n')}]),angular.module("units/states/tasks/viewer/directives/task-details-view/task-details-view.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/tasks/viewer/directives/task-details-view/task-details-view.tpl.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <div class="panel-title">\n      Details for {{taskDef.name}}\n    </div>\n  </div>\n  <div class="panel-body">\n    <task-outcomes-card task-def="taskDef" unit="unit"></task-outcomes-card>\n    <task-description-card task-def="taskDef" unit="unit" task=""></task-description-card>\n  </div>\x3c!--/comment-list--\x3e\n</div>\n')}]),angular.module("units/states/tasks/viewer/directives/task-sheet-view/task-sheet-view.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/tasks/viewer/directives/task-sheet-view/task-sheet-view.tpl.html",'<div class="panel panel-pdf panel-default">\n  <div class="panel-heading">\n    <div class="panel-title" ng-hide="taskDef">\n      No Task Selected\n    </div>\n    <div class="panel-title" ng-show="taskDef">\n      {{taskDef.name}}\n    </div>\n  </div>\x3c!--/panel-header--\x3e\n  <div class="panel-body no-pdf" ng-hide="hasPdf">\n    <i class="fa fa-question-circle"></i>\n    <span>\n      This task has no task sheet\n    </span>\n  </div>\x3c!--/panel-body-without-pdf--\x3e\n  <div class="panel-body has-pdf" ng-if="hasPdf">\n    <pdf-viewer pdf-url="urls.taskPdfUrl"></pdf-viewer>\n  </div>\x3c!--/panel-body-with-pdf--\x3e\n</div>\n')}]),angular.module("units/states/tasks/viewer/directives/unit-task-list/unit-task-list.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/tasks/viewer/directives/unit-task-list/unit-task-list.tpl.html",'<div class="panel panel-primary">\n  <div class="panel-heading">\n    <input type="text" class="form-control" ng-model="filters.taskSearch" ng-change="taskNameChanged()" placeholder="Search tasks...">\n  </div>\n  <ul class="list-group">\n    <li class="list-group-item list-group-item-task clearfix {{task.statusClass()}}"\n      id="{{task.taskKeyToIdString()}}"\n      ng-click="setSelectedTask(task)"\n      ng-class="{selected: isSelectedTask(task)}"\n      ng-repeat="task in filteredTasks">\n      <div class="task-data">\n        <h4 class="list-group-item-heading">\n          {{task.name}}\n        </h4>\n        <p class="list-group-item-text">\n          {{task.abbreviation}} - {{gradeNames[task.target_grade]}} Task\n        </p>\n      </div>\x3c!--/task-data--\x3e\n    </li>\x3c!--/task--\x3e\n    <li ng-show="filteredTasks.length == 0" class="list-group-item text-center text-muted">\n      No tasks to display.\n    </li>\n  </ul>\n</div>\n')}]),angular.module("units/states/tasks/viewer/viewer.tpl.html",[]).run(["$templateCache",function(t){t.put("units/states/tasks/viewer/viewer.tpl.html",'<div class="panel-full-screen">\n  <unit-task-list\n    filters="filters"\n    unit-tasks="unitTasks"\n    unit=\'unit\'\n    selected-task-def="selectedTaskDef"\n    class="col-xs-12 col-md-3">\x3c!--/panel-1--\x3e\n  </unit-task-list>\n  <task-sheet-view\n    task-def="selectedTaskDef"\n    unit=\'unit\'\n    class="col-xs-12 col-md-6">\n  </task-sheet-view>\x3c!--/panel-2--\x3e\n  <task-details-view\n    task-def="selectedTaskDef"\n    unit="unit"\n    class="col-xs-12 col-md-3">\n  </task-details-view>\x3c!--/panel-3--\x3e\n</div>')}]),angular.module("visualisations/visualisation.tpl.html",[]).run(["$templateCache",function(t){t.put("visualisations/visualisation.tpl.html",'<div ng-isolate-scope>\n  <nvd3 options="options" data="data" id="chart" api="api" config="config"></nvd3>\n</div>\n')}])},vVEA:function(t,e){angular.module("doubtfire.api.models.task-completion-csv",[]).service("TaskCompletionCsv",function(t,e,n){return this.downloadFile=function(r){return e.open(t.API_URL+"/csv/units/"+r.id+"/task_completion.json?auth_token="+n.authenticationToken,"_blank")},this}).service("TutorAssessmentCsv",function(t,e,n){return this.downloadFile=function(r){return e.open(t.API_URL+"/csv/units/"+r.id+"/tutor_assessments.json?auth_token="+n.authenticationToken,"_blank")},this})},vjto:function(t,e){angular.module("doubtfire.common",["doubtfire.common.services","doubtfire.common.filters","doubtfire.common.modals","doubtfire.common.header","doubtfire.common.file-uploader","doubtfire.common.pdf-panel-viewer","doubtfire.common.grade-icon","doubtfire.common.status-icon","doubtfire.common.content-editable","doubtfire.common.alert-list","doubtfire.common.pdf-viewer","doubtfire.common.pdf-panel-viewer","doubtfire.common.user-icon","doubtfire.common.audio-player","doubtfire.common.audio-recorder"])},w4Pi:function(t,e,n){!function(t){"use strict";var e=t.nv;e=n("S4HQ"),angular.module("nvd3",[]).directive("nvd3",["nvd3Utils",function(t){return{restrict:"AE",scope:{data:"=",options:"=",api:"=?",events:"=?",config:"=?",onReady:"&?"},link:function(n,r,i){var o={extended:!1,visible:!0,disabled:!1,refreshDataOnly:!0,deepWatchOptions:!0,deepWatchData:!0,deepWatchDataDepth:2,debounce:10,debounceImmediate:!0};function a(t,e){t&&e&&angular.forEach(t,function(r,i){null==e[i]?n._config.extended&&(e[i]=r.on):t.on(i+"._",e[i])})}function s(e){var i=t.deepExtend(function(t){switch(e){case"title":return{enable:!1,text:"Write Your Title",className:"h4",css:{width:n.options.chart.width+"px",textAlign:"center"}};case"subtitle":return{enable:!1,text:"Write Your Subtitle",css:{width:n.options.chart.width+"px",textAlign:"center"}};case"caption":return{enable:!1,text:"Figure 1. Write Your Caption text.",css:{width:n.options.chart.width+"px",textAlign:"center"}}}}(),n.options[e]||{});n._config.extended&&(n.options[e]=i);var o=angular.element("<div></div>").html(i.html||"").addClass(e).addClass(i.className).removeAttr("style").css(i.css);i.html||o.text(i.text),i.enable&&("title"===e?r.prepend(o):"subtitle"===e?angular.element(r[0].querySelector(".title")).after(o):"caption"===e&&r.append(o))}function l(t,e){t!==e&&(n._config.disabled||(n._config.refreshDataOnly?n.api.update():n.api.refresh()))}n.isReady=!1,n._config=angular.extend(o,n.config),n.api={refresh:function(){n.api.updateWithOptions(),n.isReady=!0},refreshWithTimeout:function(t){setTimeout(function(){n.api.refresh()},t)},update:function(){n.chart&&n.svg?"sunburstChart"===n.options.chart.type?n.svg.datum(angular.copy(n.data)).call(n.chart):n.svg.datum(n.data).call(n.chart):n.api.refresh()},updateWithTimeout:function(t){setTimeout(function(){n.api.update()},t)},updateWithOptions:function(i){if(arguments.length){if(n.options=i,n._config.deepWatchOptions&&!n._config.disabled)return}else i=n.options;var o;n.api.clearElement(),!1!==angular.isDefined(i)&&n._config.visible&&(n.chart=e.models[i.chart.type](),n.chart.id=Math.random().toString(36).substr(2,15),angular.forEach(n.chart,function(t,e){"_"===e[0]||["clearHighlights","highlightPoint","id","options","resizeHandler","state","open","close","tooltipContent"].indexOf(e)>=0||("dispatch"===e?(null==i.chart[e]&&n._config.extended&&(i.chart[e]={}),a(n.chart[e],i.chart[e])):["bars","bars1","bars2","boxplot","bullet","controls","discretebar","distX","distY","focus","interactiveLayer","legend","lines","lines1","lines2","multibar","pie","scatter","scatters1","scatters2","sparkline","stack1","stack2","sunburst","tooltip","x2Axis","xAxis","y1Axis","y2Axis","y3Axis","y4Axis","yAxis","yAxis1","yAxis2"].indexOf(e)>=0||"stacked"===e&&"stackedAreaChart"===i.chart.type?(null==i.chart[e]&&n._config.extended&&(i.chart[e]={}),function t(e,r,i){e&&r&&angular.forEach(e,function(o,s){"_"===s[0]||("dispatch"===s?(null==r[s]&&n._config.extended&&(r[s]={}),a(o,r[s])):"tooltip"===s?(null==r[s]&&n._config.extended&&(r[s]={}),t(e[s],r[s],i)):"contentGenerator"===s?r[s]&&e[s](r[s]):-1===["axis","clearHighlights","defined","highlightPoint","nvPointerEventsClass","options","rangeBand","rangeBands","scatter","open","close","node"].indexOf(s)&&(null==r[s]?n._config.extended&&(r[s]=o()):e[s](r[s])))})}(n.chart[e],i.chart[e],i.chart.type)):"focusHeight"===e&&"lineChart"===i.chart.type||"focusHeight"===e&&"lineWithFocusChart"===i.chart.type||("xTickFormat"!==e&&"yTickFormat"!==e||"lineWithFocusChart"!==i.chart.type)&&("tooltips"===e&&"boxPlotChart"===i.chart.type||("tooltipXContent"!==e&&"tooltipYContent"!==e||"scatterChart"!==i.chart.type)&&("x"!==e&&"y"!==e||"forceDirectedGraph"!==i.chart.type)&&(null==i.chart[e]?n._config.extended&&(i.chart[e]="barColor"===e?t()():t()):n.chart[e](i.chart[e]))))}),n.api.updateWithData(),(i.title||n._config.extended)&&s("title"),(i.subtitle||n._config.extended)&&s("subtitle"),(i.caption||n._config.extended)&&s("caption"),(i.styles||n._config.extended)&&(o=t.deepExtend({classes:{"with-3d-shadow":!0,"with-transitions":!0,gallery:!1},css:{}},n.options.styles||{}),n._config.extended&&(n.options.styles=o),angular.forEach(o.classes,function(t,e){t?r.addClass(e):r.removeClass(e)}),r.removeAttr("style").css(o.css)),e.addGraph(function(){if(n.chart)return n.chart.resizeHandler&&n.chart.resizeHandler.clear(),n.chart.resizeHandler=e.utils.windowResize(function(){n.chart&&n.chart.update&&n.chart.update()}),void 0!==i.chart.zoom&&["scatterChart","lineChart","candlestickBarChart","cumulativeLineChart","historicalBarChart","ohlcBarChart","stackedAreaChart"].indexOf(i.chart.type)>-1&&t.zoom(n,i),n.chart},i.chart.callback))},updateWithData:function(t){if(arguments.length){if(n.data=t,n._config.deepWatchData&&!n._config.disabled)return}else t="sunburstChart"===n.options.chart.type?angular.copy(n.data):n.data;var e,i;t&&(d3.select(r[0]).select("svg").remove(),n.svg=d3.select(r[0]).insert("svg",".caption"),(e=n.options.chart.height)&&(isNaN(+e)||(e+="px"),n.svg.attr("height",e).style({height:e})),(i=n.options.chart.width)?(isNaN(+i)||(i+="px"),n.svg.attr("width",i).style({width:i})):n.svg.attr("width","100%").style({width:"100%"}),n.svg.datum(t).call(n.chart),n.chart&&n.chart.zoomRender&&n.chart.zoomRender())},clearElement:function(){if(r.find(".title").remove(),r.find(".subtitle").remove(),r.find(".caption").remove(),r.empty(),n.chart&&n.chart.tooltip&&n.chart.tooltip.id&&d3.select("#"+n.chart.tooltip.id()).remove(),e.graphs&&n.chart)for(var t=e.graphs.length-1;t>=0;t--)e.graphs[t]&&e.graphs[t].id===n.chart.id&&e.graphs.splice(t,1);e.tooltip&&e.tooltip.cleanup&&e.tooltip.cleanup(),n.chart&&n.chart.resizeHandler&&n.chart.resizeHandler.clear(),n.chart=null},getScope:function(){return n},getElement:function(){return r}},n._config.deepWatchOptions&&n.$watch("options",t.debounce(function(t){n._config.disabled||n.api.refresh()},n._config.debounce,n._config.debounceImmediate),!0),n._config.deepWatchData&&(1===n._config.deepWatchDataDepth?n.$watchCollection("data",l):n.$watch("data",l,2===n._config.deepWatchDataDepth)),n.$watch("config",function(t,e){t!==e&&(n._config=angular.extend(o,t),n.api.refresh())},!0),n._config.deepWatchOptions||n._config.deepWatchData||n.api.refresh(),angular.forEach(n.events,function(t,e){n.$on(e,function(e,r){return t(e,n,r)})}),r.on("$destroy",function(){n.api.clearElement()}),n.$watch("isReady",function(t){t&&n.onReady&&"function"==typeof n.onReady()&&n.onReady()(n,r)})}}}]).factory("nvd3Utils",function(){return{debounce:function(t,e,n){var r;return function(){var i=this,o=arguments,a=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||t.apply(i,o)},e),a&&t.apply(i,o)}},deepExtend:function(t){var e=this;return angular.forEach(arguments,function(n){n!==t&&angular.forEach(n,function(n,r){t[r]&&t[r].constructor&&t[r].constructor===Object?e.deepExtend(t[r],n):t[r]=n})}),t},zoom:function(t,e){var n=e.chart.zoom;if(null==n.enabled||n.enabled){var r,i,o,a,s,l=t.chart.xAxis.scale(),u=t.chart.yAxis.scale(),c=t.chart.xDomain||l.domain,d=t.chart.yDomain||u.domain,p=l.domain().slice(),f=u.domain().slice(),h=n.scale||1,m=n.translate||[0,0],g=n.scaleExtent||[1,10],v=n.useFixedDomain||!1,b=n.horizontalOff||!1,y=n.verticalOff||!1,w=n.unzoomEventType||"dblclick.zoom";!!n.useNiceScale&&(l.nice(),u.nice()),r=function(t,e){return t[0]=Math.min(Math.max(t[0],e[0]),e[1]-e[1]/g[1]),t[1]=Math.max(e[0]+e[1]/g[1],Math.min(t[1],e[1])),t},o=function(){if(void 0!==n.zoomed){var e=n.zoomed(l.domain(),u.domain());b||c([e.x1,e.x2]),y||d([e.y1,e.y2])}else b||c(v?r(l.domain(),p):l.domain()),y||d(v?r(u.domain(),f):u.domain());t.chart&&t.chart.update()},a=function(){if(void 0!==n.unzoomed){var e=n.unzoomed(l.domain(),u.domain());b||c([e.x1,e.x2]),y||d([e.y1,e.y2])}else b||c(p),y||d(f);i.scale(h).translate(m),t.chart&&t.chart.update()},s=function(){void 0!==n.zoomend&&n.zoomend()},i=d3.behavior.zoom().x(l).y(u).scaleExtent(g).on("zoom",o).on("zoomend",s),t.svg&&(t.svg.call(i),i.scale(h).translate(m).event(t.svg),"none"!==w&&t.svg.on(w,a)),t.chart&&(t.chart.zoomRender=function(){i.scale(h).translate(m),l=t.chart.xAxis.scale(),u=t.chart.yAxis.scale(),c=t.chart.xDomain||l.domain,d=t.chart.yDomain||u.domain,p=l.domain().slice(),f=u.domain().slice(),i.x(l).y(u),t.svg.call(i),"none"!==w&&t.svg.on(w,a)})}}}})}(window)},wHD3:function(t,e){angular.module("doubtfire.api.models.rollover-unit",[]).factory("RolloverUnit",function(t){return t("/units/:id/rollover",{id:"@id"})})},wHTR:function(t,e){angular.module("doubtfire.groups.group-set-selector",[]).directive("groupSetSelector",function(){return{restrict:"E",templateUrl:"groups/group-set-selector/group-set-selector.tpl.html",scope:{unit:"=",selectedGroupSet:"=ngModel",onSelectGroupSet:"=onChange"},controller:function(t){if(null==t.unit)throw Error("Unit not supplied to group set selector");return t.selectGroupSet=function(){return"function"==typeof t.onSelectGroupSet?t.onSelectGroupSet(t.selectedGroupSet):void 0}}}})},wpWz:function(t,e){angular.module("doubtfire.home",["doubtfire.home.states"])},x0Lv:function(t,e){angular.module("doubtfire.projects.states.tutorials",[]).config(function(t){return t.state("projects/tutorials",{parent:"projects/index",url:"/tutorials",controller:"ProjectsTutorialsStateCtrl",templateUrl:"projects/states/tutorials/tutorials.tpl.html",data:{task:"Tutorial List",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin","Student"]}})}).controller("ProjectsTutorialsStateCtrl",function(t,e,n,r,i,o,a){return t.sortOrder="abbreviation",t.setTutorial=function(e){return r.update({id:t.project.project_id,tutorial_id:e},function(n){var r,s,l,u;return s=null!=(l=t.unit.tutorialFromId(t.project.tutorial_id))?l.abbreviation:void 0,t.project.tutorial_id=n.tutorial_id,t.project.tutorial=t.unit.tutorialFromId(t.project.tutorial_id),-1===e?(r="Withdrew from all tutorials",u="Withdrew from "+s):(r="Changed tutorial",u="Enrolled in "+t.project.tutorial.abbreviation),a.event("Student Project View - Tutorials Tab",r),i.add("success",u,3e3),o.updateGroups(t.project)},function(t){return i.add("danger",t.data.error,6e3)})}})},xBYf:function(t,e,n){t.exports===e&&(t.exports="angular-md5"),function(t){t.module("angular-md5",["gdi2290.md5"]),t.module("ngMd5",["gdi2290.md5"]),t.module("gdi2290.md5",["gdi2290.gravatar-filter","gdi2290.md5-service","gdi2290.md5-filter"]),t.module("gdi2290.gravatar-filter",[]).filter("gravatar",["md5",function(t){var e={};return function(n,r){return e[n]||(r=r?t.createHash(r.toString().toLowerCase()):"",e[n]=n?t.createHash(n.toString().toLowerCase()):r),e[n]}}]),t.module("gdi2290.md5-filter",[]).filter("md5",["md5",function(t){return function(e){return e?t.createHash(e.toString().toLowerCase()):e}}]),t.module("gdi2290.md5-service",[]).factory("md5",[function(){return{createHash:function(t){if(null===t)return null;var e,n,r,i,o,a,s,l,u,c,d,p=function(t,e){return t<<e|t>>>32-e},f=function(t,e){var n,r,i,o,a;return i=2147483648&t,o=2147483648&e,a=(1073741823&t)+(1073741823&e),(n=1073741824&t)&(r=1073741824&e)?2147483648^a^i^o:n|r?1073741824&a?3221225472^a^i^o:1073741824^a^i^o:a^i^o},h=function(t,e,n,r,i,o,a){return t=f(t,f(f(e&n|~e&r,i),a)),f(p(t,o),e)},m=function(t,e,n,r,i,o,a){return t=f(t,f(f(e&r|n&~r,i),a)),f(p(t,o),e)},g=function(t,e,n,r,i,o,a){return t=f(t,f(f(e^n^r,i),a)),f(p(t,o),e)},v=function(t,e,n,r,i,o,a){return t=f(t,f(f(n^(e|~r),i),a)),f(p(t,o),e)},b=function(t){var e,n="",r="";for(e=0;e<=3;e++)n+=(r="0"+(t>>>8*e&255).toString(16)).substr(r.length-2,2);return n};for(l=1732584193,u=4023233417,c=2562383102,d=271733878,e=(n=function(t){for(var e,n=t.length,r=n+8,i=16*((r-r%64)/64+1),o=new Array(i-1),a=0,s=0;s<n;)a=s%4*8,o[e=(s-s%4)/4]=o[e]|t.charCodeAt(s)<<a,s++;return o[e=(s-s%4)/4]=o[e]|128<<(a=s%4*8),o[i-2]=n<<3,o[i-1]=n>>>29,o}(t)).length,r=0;r<e;r+=16)i=l,o=u,a=c,s=d,l=h(l,u,c,d,n[r+0],7,3614090360),d=h(d,l,u,c,n[r+1],12,3905402710),c=h(c,d,l,u,n[r+2],17,606105819),u=h(u,c,d,l,n[r+3],22,3250441966),l=h(l,u,c,d,n[r+4],7,4118548399),d=h(d,l,u,c,n[r+5],12,1200080426),c=h(c,d,l,u,n[r+6],17,2821735955),u=h(u,c,d,l,n[r+7],22,4249261313),l=h(l,u,c,d,n[r+8],7,1770035416),d=h(d,l,u,c,n[r+9],12,2336552879),c=h(c,d,l,u,n[r+10],17,4294925233),u=h(u,c,d,l,n[r+11],22,2304563134),l=h(l,u,c,d,n[r+12],7,1804603682),d=h(d,l,u,c,n[r+13],12,4254626195),c=h(c,d,l,u,n[r+14],17,2792965006),l=m(l,u=h(u,c,d,l,n[r+15],22,1236535329),c,d,n[r+1],5,4129170786),d=m(d,l,u,c,n[r+6],9,3225465664),c=m(c,d,l,u,n[r+11],14,643717713),u=m(u,c,d,l,n[r+0],20,3921069994),l=m(l,u,c,d,n[r+5],5,3593408605),d=m(d,l,u,c,n[r+10],9,38016083),c=m(c,d,l,u,n[r+15],14,3634488961),u=m(u,c,d,l,n[r+4],20,3889429448),l=m(l,u,c,d,n[r+9],5,568446438),d=m(d,l,u,c,n[r+14],9,3275163606),c=m(c,d,l,u,n[r+3],14,4107603335),u=m(u,c,d,l,n[r+8],20,1163531501),l=m(l,u,c,d,n[r+13],5,2850285829),d=m(d,l,u,c,n[r+2],9,4243563512),c=m(c,d,l,u,n[r+7],14,1735328473),l=g(l,u=m(u,c,d,l,n[r+12],20,2368359562),c,d,n[r+5],4,4294588738),d=g(d,l,u,c,n[r+8],11,2272392833),c=g(c,d,l,u,n[r+11],16,1839030562),u=g(u,c,d,l,n[r+14],23,4259657740),l=g(l,u,c,d,n[r+1],4,2763975236),d=g(d,l,u,c,n[r+4],11,1272893353),c=g(c,d,l,u,n[r+7],16,4139469664),u=g(u,c,d,l,n[r+10],23,3200236656),l=g(l,u,c,d,n[r+13],4,681279174),d=g(d,l,u,c,n[r+0],11,3936430074),c=g(c,d,l,u,n[r+3],16,3572445317),u=g(u,c,d,l,n[r+6],23,76029189),l=g(l,u,c,d,n[r+9],4,3654602809),d=g(d,l,u,c,n[r+12],11,3873151461),c=g(c,d,l,u,n[r+15],16,530742520),l=v(l,u=g(u,c,d,l,n[r+2],23,3299628645),c,d,n[r+0],6,4096336452),d=v(d,l,u,c,n[r+7],10,1126891415),c=v(c,d,l,u,n[r+14],15,2878612391),u=v(u,c,d,l,n[r+5],21,4237533241),l=v(l,u,c,d,n[r+12],6,1700485571),d=v(d,l,u,c,n[r+3],10,2399980690),c=v(c,d,l,u,n[r+10],15,4293915773),u=v(u,c,d,l,n[r+1],21,2240044497),l=v(l,u,c,d,n[r+8],6,1873313359),d=v(d,l,u,c,n[r+15],10,4264355552),c=v(c,d,l,u,n[r+6],15,2734768916),u=v(u,c,d,l,n[r+13],21,1309151649),l=v(l,u,c,d,n[r+4],6,4149444226),d=v(d,l,u,c,n[r+11],10,3174756917),c=v(c,d,l,u,n[r+2],15,718787259),u=v(u,c,d,l,n[r+9],21,3951481745),l=f(l,i),u=f(u,o),c=f(c,a),d=f(d,s);return(b(l)+b(u)+b(c)+b(d)).toLowerCase()}}}])}(angular)},xL3z:function(t,e){angular.module("doubtfire.visualisations.task-completion-box-plot",[]).directive("taskCompletionBoxPlot",function(){return{replace:!0,restrict:"E",templateUrl:"visualisations/visualisation.tpl.html",scope:{rawData:"=data",unit:"=",type:"=",height:"=?",showLegend:"=?"},controller:function(t,e,n,r,i){var o,a;return t.showLegend=null==t.showLegend||t.showLegend,t.height=null==t.height?600:t.height,a=function(i){return t.data="grade"!==t.type?[{label:e("ucfirst")(t.type),values:{Q1:i.lower,Q2:i.median,Q3:i.upper,whisker_low:i.min,whisker_high:i.max}}]:_.map(i,function(t,e){return{label:r.grades[e],values:{Q1:t.lower,Q2:t.median,Q3:t.upper,whisker_low:t.min,whisker_high:t.max}}}),n(function(){var e;if(null!=(null!=(e=t.api)?e.refresh:void 0))return t.api.refresh()})},t.$watch("rawData",a),a(t.rawData),o=i("boxPlotChart","Task Completion Summary Box Plot",{x:function(t){return t.label},height:t.height,showXAxis:t.showLegend,margin:{top:20,right:10,bottom:t.showLegend?60:20,left:t.showLegend?80:40},yAxis:{axisLabel:t.showLegend?"Number of tasks completed":void 0},tooltip:{enabled:t.showLegend},maxBoxWidth:75,yDomain:[0,2*Math.ceil(t.unit.task_definitions.length/2)]},{}),t.options=o[0],t.config=o[1],o}}})},xOIg:function(t,e){angular.module("doubtfire.projects.states.portfolio",["doubtfire.projects.states.portfolio.directives"]).config(function(t){return t.state("projects/portfolio",{parent:"projects/index",url:"/portfolio",controller:"ProjectsPortfolioStateCtrl",templateUrl:"projects/states/portfolio/portfolio.tpl.html",data:{task:"Portfolio Creation",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin","Student"]}})}).controller("ProjectsPortfolioStateCtrl",function(t,e,n,r,i,o){return t.tabs={welcomeStep:{title:"Portfolio Preparation",seq:1},gradeStep:{title:"Select Grade",seq:2},summaryStep:{title:"Learning Summary Report",seq:3},taskStep:{title:"Select Tasks",seq:4},otherFilesStep:{title:"Upload Other Files",seq:5},reviewStep:{title:"Review Portfolio",seq:6}},t.setActiveTab=function(e){return t.activeTab=e,t.activeTab.active=!0,o.event("Portfolio Wizard","Switched to Step",e.title+" Step")},t.advanceActiveTab=function(e){var n,r,i;return n=t.activeTab.seq+e,t.setActiveTab(function(){var e,o;for(i in o=[],e=t.tabs)(r=e[i]).seq===n&&o.push(r);return o}()[0])},t.projectHasLearningSummaryReport=function(){return _.filter(t.project.portfolio_files,{idx:0}).length>0},t.portfolioSubmission=i(t.project),t.addNewFilesToPortfolio=function(e){return t.project.portfolio_files.push(e)},t.deleteFileFromPortfolio=function(e){return t.portfolioSubmission.deleteFile(t.project,e)},t.$watch("project.target_grade",function(e){return t.targetGrade=r.grades[e]}),t.externalName=e.ExternalName,t.extraFiles=function(){return _.filter(t.project.portfolio_files,function(t){return 0!==t.idx})},t.unitHasILOs=t.unit.ilos.length>0,t.selectedTasks=function(){var e;return e=t.unitHasILOs?_.filter(t.project.tasks,function(e){var n;return n=null!=_.find(t.project.task_outcome_alignments,{task_id:e.id}),e.include_in_portfolio&&n}):_.filter(t.project.tasks,function(t){return t.include_in_portfolio}),e=_.filter(e,function(t){return!_.includes(n.toBeWorkedOn,t.status)}),_.sortBy(e,function(t){return t.definition.seq})},t.project.portfolio_available||t.project.compile_portfolio?t.setActiveTab(t.tabs.reviewStep):t.projectHasLearningSummaryReport()?t.setActiveTab(t.tabs.taskStep):t.setActiveTab(t.tabs.welcomeStep),t.statusText=n.statusText,t.statusData=n.statusData,t.statusClass=n.statusClass})},xf4P:function(t,e){angular.module("doubtfire.tasks.task-definition-selector",[]).directive("taskDefinitionSelector",function(){return{replace:!0,restrict:"E",templateUrl:"tasks/task-definition-selector/task-definition-selector.tpl.html",scope:{unit:"=",onSelectDefinition:"=",ngModel:"=?",buttonStyle:"@",showClear:"=?"},controller:function(t,e){var n;return null==t.buttonStyle&&(t.buttonStyle="default"),t.groupSetName=function(n){return e.groupSetName(n,t.unit)},t.hideGroupSetName=0===(null!=(n=t.unit.group_sets)?n.length:void 0),t.selectedDefinition=null,t.setSelectedDefinition=function(e){if(t.selectedDefinition=e,t.ngModel=e,null!=t.onSelectDefinition&&_.isFunction(t.onSelectDefinition))return t.onSelectDefinition(e)}}}})},xkaz:function(t,e){angular.module("doubtfire.sessions.auth.roles",["doubtfire.sessions.auth.roles.if-role"]).constant("authRoles",["anon","Student","Tutor","Convenor","Admin"])},xozG:function(t,e){angular.module("doubtfire.tasks.task-status-selector",[]).directive("taskStatusSelector",function(){return{replace:!0,restrict:"E",templateUrl:"tasks/task-status-selector/task-status-selector.tpl.html",scope:{task:"=task",assessingUnitRole:"=assessingUnitRole",inMenu:"=inMenu",triggerTransition:"=triggerTransition"},controller:function(t,e){return t.taskService=e,t.studentStatuses=e.switchableStates.student,t.tutorStatuses=e.switchableStates.tutor,t.taskEngagementConfig={studentTriggers:t.studentStatuses.map(e.statusData),tutorTriggers:t.tutorStatuses.map(e.statusData)}}}})},ySSw:function(t,e){!function(t,e){"use strict";function n(t,n,r){var i=r.baseHref(),o=t[0];return function(t,r,a){o.cookie=function(t,r,o){var a,s;s=(o=o||{}).expires,a=e.isDefined(o.path)?o.path:i,e.isUndefined(r)&&(s="Thu, 01 Jan 1970 00:00:00 GMT",r=""),e.isString(s)&&(s=new Date(s));var l=encodeURIComponent(t)+"="+encodeURIComponent(r);l+=a?";path="+a:"",l+=o.domain?";domain="+o.domain:"",l+=s?";expires="+s.toUTCString():"";var u=(l+=o.secure?";secure":"").length+1;return u>4096&&n.warn("Cookie '"+t+"' possibly not set or overflowed because it was too large ("+u+" > 4096 bytes)!"),l}(t,r,a)}}e.module("ngCookies",["ng"]).provider("$cookies",[function(){var t=this.defaults={};function n(n){return n?e.extend({},t,n):t}this.$get=["$$cookieReader","$$cookieWriter",function(t,r){return{get:function(e){return t()[e]},getObject:function(t){var n=this.get(t);return n?e.fromJson(n):n},getAll:function(){return t()},put:function(t,e,i){r(t,e,n(i))},putObject:function(t,n,r){this.put(t,e.toJson(n),r)},remove:function(t,e){r(t,void 0,n(e))}}}]}]),e.module("ngCookies").factory("$cookieStore",["$cookies",function(t){return{get:function(e){return t.getObject(e)},put:function(e,n){t.putObject(e,n)},remove:function(e){t.remove(e)}}}]),n.$inject=["$document","$log","$browser"],e.module("ngCookies").provider("$$cookieWriter",function(){this.$get=n})}(window,window.angular)},yVKh:function(t,e){var n=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("doubtfire.projects.states.dashboard.directives.task-dashboard",["doubtfire.projects.states.dashboard.directives.task-dashboard.directives"]).directive("taskDashboard",function(){return{restrict:"E",templateUrl:"projects/states/dashboard/directives/task-dashboard/task-dashboard.tpl.html",scope:{task:"=",showFooter:"@?",showSubmission:"@?"},controller:function(t,e,r,i,o,a,s){var l;if(t.tutor=e.tutor,t.dashboardViews=["details","submission","task"],(l=function(){return t.currentView=t.showSubmission?t.dashboardViews[1]:t.dashboardViews[0]})(),o.listenTo(t).push(t.$watch("task.id",function(){if(null!=t.task)return t.urls={taskSheetPdfUrl:r.getTaskPDFUrl(t.task.unit(),t.task.definition),taskSubmissionPdfUrl:i.getTaskUrl(t.task),taskSubmissionPdfAttachmentUrl:i.getTaskUrl(t.task,!0),taskFilesUrl:i.getTaskFilesUrl(t.task)},l()})),t.setSelectedDashboardView=function(e){if(n.call(t.dashboardViews,e)>=0)return t.currentView=e},t.isCurrentView=function(e){return t.currentView===e},t.showFooter)return t.taskStatusData={keys:_.sortBy(s.markedStatuses,function(t){return s.statusSeq[t]}),help:s.helpDescriptions,icons:s.statusIcons,labels:s.statusLabels,class:s.statusClass},t.triggerTransition=function(e){return s.updateTaskStatus(t.task.project().unit(),t.task.project(),t.task,e)}}}})},yg3R:function(t,e){angular.module("doubtfire.common.pdf-panel-viewer",[]).directive("pdfPanelViewer",function(){return{restrict:"E",templateUrl:"common/pdf-panel-viewer/pdf-panel-viewer.tpl.html",replace:!0,scope:{pdfUrl:"=",footerText:"@",resourcesUrl:"=",hideFooter:"=?"},controller:function(t,e){return t.showViewer=!1,t.downloadEvent=function(t){return e.event("Task Sheet","Downloaded "+t)},t.$watch("pdfUrl",function(e){return t.showViewer=null!=e})}}})},yzNs:function(t,e){angular.module("doubtfire.units.modals.unit-ilo-edit-modal",[]).factory("UnitILOEditModal",function(t){var e;return(e={}).show=function(e,n){return t.open({controller:"UnitILOEditModalCtrl",templateUrl:"units/modals/unit-ilo-edit-modal/unit-ilo-edit-modal.tpl.html",resolve:{ilo:function(){return n},unit:function(){return e}}})},e}).controller("UnitILOEditModalCtrl",function(t,e,n,r,i,o){return t.ilo=n||{name:null,description:null,abbreviation:null},t.isNew=null==n,t.saveILO=function(){var n;return n={unit_id:r.id,name:t.ilo.name,description:t.ilo.description,abbreviation:t.ilo.abbreviation},t.isNew?i.create(n,function(t){return e.close(t),r.ilos.push(t),o.add("success","Intended Learning Outcome Added",2e3)},function(t){if(null!=t.data.error)return o.add("danger","Error: "+t.data.error,6e3)}):(n.id=t.ilo.id,i.update(n).$promise.then(function(t){return e.close(t),o.add("success","Intended Learning Outcome Updated",2e3)},function(t){if(null!=t.data.error)return o.add("danger","Error: "+t.data.error,6e3)}))}})},z0rW:function(t,e){var n=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("doubtfire.sessions.auth",["doubtfire.sessions.auth.http-auth-injector","doubtfire.sessions.auth.roles"]).factory("auth",function(t,e,r,i,o,a,s,l,u,c,d){var p,f,h,m,g,v,b,y,w;return h=_.clone(o),f=function(){return!_.isEqual(o,h)},b=function(){return s.set(i,o),e.put(i,o)},w=function(e){var n;if(f())return n=s.get(u),s.set(l,(new Date).getTime()),t.put(e,{username:o.profile.username,remember:n}).success(function(t){return o.authenticationToken=t.auth_token,b(),r(function(){return w(c.API_URL+"/auth/"+o.authenticationToken+".json")},36e5)})},g=function(t){return 0===_.difference(t,a).length},(y=function(t){var r;if(null!=t&&n.call(a,t.role)>=0){for(r in o)delete o[r];return _.extend(o,t),f()?b():(e.remove(i),s.remove(i)),!0}return!1})(e.get(i))||y(s.get(i)),(p={}).saveCurrentUser=b,p.isAuthenticated=f,p.isAuthorised=function(t,e){return null==e&&(e=o.role),null==t||g(t)&&n.call(t,e)>=0},p.signIn=function(e,n,i,a){return null==i&&(i=function(){}),null==a&&(a=function(){}),t.post(e,n).success(function(t){var e;return e={id:t.user.id,authenticationToken:t.auth_token,role:t.user.system_role,profile:t.user},r(function(){return w(c.API_URL+"/auth/"+o.authenticationToken+".json")},36e5),y(e)?i():a()}).error(a)},p.signOut=function(e){return t.delete(e),y(h),d.$broadcast("signOut"),s.remove(i),s.set(u,!1),s.remove(l)},f()&&(v=(new Date).getTime(),(m=parseInt(s.get(l),10)+36e5-v)<100&&(m=100),r(function(){return w(c.API_URL+"/auth/"+o.authenticationToken+".json")},m)),p})},z4Fa:function(t,e){angular.module("doubtfire.projects.states.dashboard.directives.task-dashboard.directives.task-status-card",[]).directive("taskStatusCard",function(){return{restrict:"E",templateUrl:"projects/states/dashboard/directives/task-dashboard/directives/task-status-card/task-status-card.tpl.html",scope:{task:"="},controller:function(t,e,n,r,i){var o,a,s;return a=r.listenTo(t),s=function(){var r,i;return null!=e.tutor?t.triggers=_.map(n.statusKeys,n.statusData):(i=_.map(n.switchableStates.student,n.statusData),r=t.task.filterFutureStates(i),t.triggers=r)},a.push(t.$watch("task.id",function(){if(null!=t.task)return s()})),o=function(e){return t.task.applyForExtension(function(n){return t.task.isPastTargetDate()&&!t.task.isOverdue()?o(e):t.task.triggerTransition(e,t.unitRole)},function(t){return alertService.add("danger","Extension failed - "+t.data.error,6e3)})},t.triggerTransition=function(e){return"ready_to_mark"===e&&t.task.isPastTargetDate()&&!t.task.isOverdue()?i.show("Request Extensions?","This task is past the target due date, so you will need to request an extension to get feedback. Use confirm to request extensions and proceed with the submission.",function(){return o(e)}):t.task.triggerTransition(e,t.unitRole)},t.updateFilesInSubmission=function(){return n.presentTaskSubmissionModal(t.task,t.task.status,!0)}}}})},z6iE:function(t,e){angular.module("doubtfire.tasks.task-submission-viewer",[]).directive("taskSubmissionViewer",function(){return{restrict:"E",templateUrl:"tasks/task-submission-viewer/task-submission-viewer.tpl.html",scope:{project:"=project",task:"=task"},controller:function(t,e){return t.notSubmitted=function(t){return!t.has_pdf&&!t.processing_pdf},t.loadingDetails=function(t){return t.needsSubmissionDetails()},t.$watch("task",function(n){if(null!=n)return n.getSubmissionDetails(),t.taskUrl=e.getTaskUrl(n),t.taskFilesURL=e.getTaskFilesUrl(n)})}}})},zOo6:function(t,e){angular.module("doubtfire.units.states.tasks.offline",[]).config(function(t){return t.state("units/tasks/offline",{parent:"units/tasks",url:"/offline",templateUrl:"units/states/tasks/offline/offline.tpl.html",controller:"OfflineMarkingStateCtrl",data:{task:"Mark Tasks Offline",pageTitle:"_Home_",roleWhitelist:["Tutor","Convenor","Admin"]}})}).controller("OfflineMarkingStateCtrl",function(t,e,n,r){return t.zipMarkingFiles={file:{name:"Zip of annotated task PDFs and marks.csv",type:"zip"}},t.csvMarkingFiles={file:{name:"Modified marks.csv",type:"csv"}},t.uploadSubmissionUrl=t.readyToMarkSubmissionsUrl=n.getTaskMarkingUrl(t.unit),t.isUploading=null,t.isReady={csv:null,zip:null},t.onMarkingUploadSuccess=function(e){return r.show("Marking CSV and ZIP upload",e),t.unit.refreshStudents()},t.activeTab="download",t.setActiveTab=function(e){return t.activeTab=e}})},zUnb:function(t,e,n){"use strict";n.r(e),n("IbG+");var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function a(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}var d=Array.isArray||function(t){return t&&"number"==typeof t.length};function p(t){return null!==t&&"object"==typeof t}function f(t){return"function"==typeof t}function h(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}h.prototype=Object.create(Error.prototype);var m=h,g=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,s=r?r.length:0;n;)n.remove(this),n=++a<s&&r[a]||null;if(f(i))try{i.call(this)}catch(u){e=!0,t=u instanceof m?v(u.errors):[u]}if(d(o))for(a=-1,s=o.length;++a<s;){var l=o[a];if(p(l))try{l.unsubscribe()}catch(u){e=!0,t=t||[],u instanceof m?t=t.concat(v(u.errors)):t.push(u)}}if(e)throw new m(t)}},t.prototype.add=function(e){var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){var i=this._subscriptions;i?i.push(n):this._subscriptions=[n]}return n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))},t.EMPTY=((e=new t).closed=!0,e),t}();function v(t){return t.reduce(function(t,e){return t.concat(e instanceof m?e.errors:e)},[])}var b=!1,y={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){b=t},get useDeprecatedSynchronousErrorHandling(){return b}};function w(t){setTimeout(function(){throw t})}var k={closed:!0,next:function(t){},error:function(t){if(y.useDeprecatedSynchronousErrorHandling)throw t;w(t)},complete:function(){}},_="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),x=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=k;break;case 1:if(!n){o.destination=k;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new S(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new S(o,n,r,i)}return o}return i(e,t),e.prototype[_]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(g),S=function(t){function e(e,n,r,i){var o,a=t.call(this)||this;a._parentSubscriber=e;var s=a;return f(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==k&&(f((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=o,a._error=r,a._complete=i,a}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;y.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=y.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):w(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;w(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};y.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),y.useDeprecatedSynchronousErrorHandling)throw n;w(n)}},e.prototype.__tryOrSetError=function(t,e,n){if(!y.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return y.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(w(r),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(x),$="function"==typeof Symbol&&Symbol.observable||"@@observable";var T=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof x)return t;if(t[_])return t[_]()}return t||e||n?new x(t,e,n):new x(k)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||y.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),y.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){y.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof x?e:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=C(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[$]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:((n=t)?1===n.length?n[0]:function(t){return n.reduce(function(t,e){return e(t)},t)}:function(){})(this);var n},t.prototype.toPromise=function(t){var e=this;return new(t=C(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function C(t){if(t||(t=y.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function E(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}E.prototype=Object.create(Error.prototype);var A=E,D=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(g),P=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return i(e,t),e}(x),O=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[_]=function(){return new P(this)},e.prototype.lift=function(t){var e=new M(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new A;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new A;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new A;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new A;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new A;return this.hasError?(t.error(this.thrownError),g.EMPTY):this.isStopped?(t.complete(),g.EMPTY):(this.observers.push(t),new D(this,t))},e.prototype.asObservable=function(){var t=new T;return t.source=this,t},e.create=function(t,e){return new M(t,e)},e}(T),M=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):g.EMPTY},e}(O);function R(t){return t&&"function"==typeof t.schedule}var j=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(x),I=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},N=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,w),e}};function F(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var U=F(),L=function(t){return function(e){for(var n=t[U]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},V=function(t){return function(e){var n=t[$]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},B=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function H(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var q=function(t){if(t instanceof T)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[$])return V(t);if(B(t))return I(t);if(H(t))return N(t);if(t&&"function"==typeof t[U])return L(t);var e=p(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function z(t,e,n,r,i){if(void 0===i&&(i=new j(t,n,r)),!i.closed)return q(e)(i)}var G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(x);function W(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Y(t,e))}}var Y=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new K(t,this.project,this.thisArg))},t}(),K=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(x);function Z(t,e){return new T(e?function(n){var r=new g,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:I(t))}function Q(t,e){if(!e)return t instanceof T?t:new T(q(t));if(null!=t){if(function(t){return t&&"function"==typeof t[$]}(t))return function(t,e){return new T(e?function(n){var r=new g;return r.add(e.schedule(function(){var i=t[$]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:V(t))}(t,e);if(H(t))return function(t,e){return new T(e?function(n){var r=new g;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:N(t))}(t,e);if(B(t))return Z(t,e);if(function(t){return t&&"function"==typeof t[U]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new T(e?function(n){var r,i=new g;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[U](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}}))})),i}:L(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function X(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(X(function(n,r){return Q(t(n,r)).pipe(W(function(t,i){return e(n,t,r,i)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new J(t,n))})}var J=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new tt(t,this.project,this.concurrent))},t}(),tt=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new j(this,void 0,void 0);this.destination.add(r),z(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(G);function et(t){return t}function nt(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),X(et,t)}function rt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return R(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof T?t[0]:nt(n)(Z(t,r))}function it(){return function(t){return t.lift(new ot(t))}}var ot=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new at(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),at=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(x),st=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new g).add(this.source.subscribe(new ut(this.getSubject(),this))),t.closed?(this._connection=null,t=g.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return it()(this)},e}(T).prototype,lt={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:st._subscribe},_isComplete:{value:st._isComplete,writable:!0},getSubject:{value:st.getSubject},connect:{value:st.connect},refCount:{value:st.refCount}},ut=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(P);function ct(){return new O}function dt(t){for(var e in t)if(t[e]===dt)return e;throw Error("Could not find renamed property on target object.")}var pt=dt({ngInjectableDef:dt});function ft(t){return{providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ht(t){return t&&t.hasOwnProperty(pt)?t[pt]:null}var mt=function(){function t(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==e?ft({providedIn:e.providedIn||"root",factory:e.factory}):void 0}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),gt="__parameters__";function vt(t,e,n){var r=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var r=t.apply(void 0,c(e));for(var i in r)this[i]=r[i]}}}(e);function i(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof i)return r.apply(this,e),this;var o=new((t=i).bind.apply(t,c([void 0],e)));return a.annotation=o,a;function a(t,e,n){for(var r=t.hasOwnProperty(gt)?t[gt]:Object.defineProperty(t,gt,{value:[]})[gt];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}var bt=new mt("AnalyzeForEntryComponents"),yt="undefined"!=typeof window&&window,wt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,kt="undefined"!=typeof global&&global||yt||wt,_t=Promise.resolve(0),xt=null;function St(){if(!xt){var t=kt.Symbol;if(t&&t.iterator)xt=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(xt=r)}}return xt}function $t(t){"undefined"==typeof Zone?_t.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function Tt(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function Ct(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(Ct).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}var Et=dt({__forward_ref__:dt});function At(t){return t.__forward_ref__=At,t.toString=function(){return Ct(this())},t}function Dt(t){var e=t;return"function"==typeof e&&e.hasOwnProperty(Et)&&e.__forward_ref__===At?e():t}var Pt,Ot=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),Mt=vt("Inject",function(t){return{token:t}}),Rt=vt("Optional"),jt=vt("Self"),It=vt("SkipSelf"),Nt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({}),Ft=void 0;function Ut(t){var e=Ft;return Ft=t,e}function Lt(t,e){return void 0===e&&(e=Nt.Default),(Pt||function(t,e){if(void 0===e&&(e=Nt.Default),void 0===Ft)throw new Error("inject() must be called from an injection context");return null===Ft?function(t,e,n){var r=ht(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&Nt.Optional)return null;throw new Error("Injector: NOT_FOUND ["+Ct(t)+"]")}(t,0,e):Ft.get(t,e&Nt.Optional?null:void 0,e)})(t,e)}var Vt=/([A-Z])/g;function Bt(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}function Ht(t,e){var n=Gt(t),r=Gt(e);return n&&r?function(t,e,n){for(var r=t[St()](),i=e[St()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,Ht):!(n||!t||"object"!=typeof t&&"function"!=typeof t||r||!e||"object"!=typeof e&&"function"!=typeof e)||Tt(t,e)}var qt=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),zt=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Gt(t){return!!Wt(t)&&(Array.isArray(t)||!(t instanceof Map)&&St()in t)}function Wt(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Yt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}var Kt="__source",Zt=new Object,Qt=Zt,Xt=new mt("INJECTOR"),Jt=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=Zt),e===Zt)throw new Error("NullInjectorError: No provider for "+Ct(t)+"!");return e},t}(),te=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new ce(t,e):new ce(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=Zt,t.NULL=new Jt,t.ngInjectableDef=ft({providedIn:"any",factory:function(){return Lt(Xt)}}),t.__NG_ELEMENT_ID__=function(){return ee()},t}(),ee=Yt,ne=function(t){return t},re=[],ie=ne,oe=function(){return Array.prototype.slice.call(arguments)},ae=dt({provide:String,useValue:dt}),se=te.NULL,le=/\n/gm,ue="\u0275",ce=function(){function t(t,e,n){void 0===e&&(e=se),void 0===n&&(n=null),this.parent=e,this.source=n;var r=this._records=new Map;r.set(te,{token:te,fn:ne,deps:re,value:this,useNew:!1}),r.set(Xt,{token:Xt,fn:ne,deps:re,value:this,useNew:!1}),function t(e,n){if(n)if((n=Dt(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw fe("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw fe("Unexpected provider",n);var i=Dt(n.provide),o=function(t){var e=function(t){var e=re,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var i=6;if((l=Dt(n[r]))instanceof Array)for(var o=0,a=l;o<a.length;o++){var s=a[o];s instanceof Rt||s==Rt?i|=1:s instanceof It||s==It?i&=-3:s instanceof jt||s==jt?i&=-5:l=s instanceof Mt?s.token:Dt(s)}e.push({token:l,options:i})}}else if(t.useExisting){var l;e=[{token:l=Dt(t.useExisting),options:6}]}else if(!(n||ae in t))throw fe("'deps' required",t);return e}(t),n=ne,r=re,i=!1,o=Dt(t.provide);if(ae in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=Dt(t.useClass);else{if("function"!=typeof o)throw fe("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=e.get(i);if(a){if(a.fn!==oe)throw de(i)}else e.set(i,a={token:n.provide,deps:[],useNew:!1,fn:oe,value:re});a.deps.push({token:i=n,options:6})}var s=e.get(i);if(s&&s.fn==oe)throw de(i);e.set(i,o)}}(r,t)}return t.prototype.get=function(t,e,n){void 0===n&&(n=Nt.Default);var r=this._records.get(t);try{return function t(e,n,r,i,o,a){try{return function(e,n,r,i,o,a){var s,l;if(!n||a&Nt.SkipSelf)a&Nt.Self||(l=i.get(e,o,Nt.Default));else{if((l=n.value)==ie)throw Error(ue+"Circular dependency");if(l===re){n.value=ie;var u=n.useNew,d=n.fn,p=n.deps,f=re;if(p.length){f=[];for(var h=0;h<p.length;h++){var m=p[h],g=m.options,v=2&g?r.get(m.token):void 0;f.push(t(m.token,v,r,v||4&g?i:se,1&g?null:te.THROW_IF_NOT_FOUND,Nt.Default))}}n.value=l=u?new((s=d).bind.apply(s,c([void 0],f))):d.apply(void 0,f)}}return l}(e,n,r,i,o,a)}catch(s){throw s instanceof Error||(s=new Error(s)),(s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(e),n&&n.value==ie&&(n.value=re),s}}(t,r,this._records,this.parent,e,n)}catch(o){var i=o.ngTempTokenPath;throw t[Kt]&&i.unshift(t[Kt]),o.message=pe("\n"+o.message,i,this.source),o.ngTokenPath=i,o.ngTempTokenPath=null,o}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(Ct(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function de(t){return fe("Cannot mix multi providers and regular providers",t)}function pe(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==ue?t.substr(2):t;var r=Ct(e);if(e instanceof Array)r=e.map(Ct).join(" -> ");else if("object"==typeof e){var i=[];for(var o in e)if(e.hasOwnProperty(o)){var a=e[o];i.push(o+":"+("string"==typeof a?JSON.stringify(a):Ct(a)))}r="{"+i.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+t.replace(le,"\n  ")}function fe(t,e){return new Error(pe(t,e))}var he=new mt("The presence of this token marks an injector as being the root injector."),me=function(){return function(){}}(),ge=function(){return function(){}}();function ve(t){var e=Error("No component factory found for "+Ct(t)+". Did you add it to @NgModule.entryComponents?");return e[be]=t,e}var be="ngComponent",ye=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw ve(t)},t}(),we=function(){function t(){}return t.NULL=new ye,t}(),ke=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var i=t[r];this._factories.set(i.componentType,i)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw ve(t);return new _e(e,this._ngModule)},t}(),_e=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return i(e,t),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(ge),xe=function(){return function(){}}(),Se=function(){return function(){}}(),$e=function(){function t(t){this.nativeElement=t}return t.__NG_ELEMENT_ID__=function(){return Te(t)},t}(),Te=Yt,Ce=function(){return function(){}}(),Ee=function(){return function(){}}(),Ae=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({}),De=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return Pe()},t}(),Pe=Yt,Oe=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({}),Me=function(){return function(){}}(),Re=new(function(){return function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}())("7.2.10"),je=!0,Ie=!1;function Ne(){return Ie=!0,je}var Fe=function(){function t(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(n){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling},t}(),Ue=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,Le=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ve(t){return(t=String(t)).match(Ue)||t.match(Le)?t:(Ne()&&console.warn("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function Be(t){var e,n,r={};try{for(var i=l(t.split(",")),o=i.next();!o.done;o=i.next())r[o.value]=!0}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function He(){for(var t,e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};try{for(var o=l(n),a=o.next();!a.done;a=o.next()){var s=a.value;for(var u in s)s.hasOwnProperty(u)&&(i[u]=!0)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return i}var qe,ze=Be("area,br,col,hr,img,wbr"),Ge=Be("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),We=Be("rp,rt"),Ye=He(We,Ge),Ke=He(ze,He(Ge,Be("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),He(We,Be("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ye),Ze=Be("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Qe=Be("srcset"),Xe=He(Ze,Qe,Be("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),Je=Be("script,style,template"),tn=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")},t.prototype.startElement=function(t){var e,n=t.nodeName.toLowerCase();if(!Ke.hasOwnProperty(n))return this.sanitizedSomething=!0,!Je.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);for(var r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(Xe.hasOwnProperty(s)){var l=o.value;Ze[s]&&(l=Ve(l)),Qe[s]&&(e=l,l=(e=String(e)).split(",").map(function(t){return Ve(t.trim())}).join(", ")),this.buf.push(" ",a,'="',rn(l),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0},t.prototype.endElement=function(t){var e=t.nodeName.toLowerCase();Ke.hasOwnProperty(e)&&!ze.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(rn(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e},t}(),en=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nn=/([^\#-~ |!])/g;function rn(t){return t.replace(/&/g,"&amp;").replace(en,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(nn,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function on(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var an=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return i(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var i,o=function(t){return null},a=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(o=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var s=t.prototype.subscribe.call(this,i,o,a);return e instanceof g&&e.add(s),s},e}(O),sn=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return ln(t,$e)},t}(),ln=Yt,un=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),cn=/^url\(([^)]+)\)$/,dn=function(){return function(){}}(),pn=Function;function fn(t){return"function"==typeof t}var hn=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/,mn=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,gn=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,vn=function(){function t(t){this._reflect=t||kt.Reflect}return t.prototype.isReflectionEnabled=function(){return!0},t.prototype.factory=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,c([void 0],e)))}},t.prototype._zipTypesAndAnnotations=function(t,e){var n;n=void 0===t?new Array(e.length):new Array(t.length);for(var r=0;r<n.length;r++)n[r]=void 0===t?[]:t[r]!=Object?[t[r]]:[],e&&null!=e[r]&&(n[r]=n[r].concat(e[r]));return n},t.prototype._ownParameters=function(t,e){var n=t.toString();if(hn.exec(n)||mn.exec(n)&&!gn.exec(n))return null;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;var r=t.ctorParameters;if(r&&r!==e.ctorParameters){var i="function"==typeof r?r():r,o=i.map(function(t){return t&&t.type}),a=i.map(function(t){return t&&bn(t.decorators)});return this._zipTypesAndAnnotations(o,a)}var s=t.hasOwnProperty(gt)&&t[gt],l=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return l||s?this._zipTypesAndAnnotations(l,s):new Array(t.length).fill(void 0)},t.prototype.parameters=function(t){if(!fn(t))return[];var e=yn(t),n=this._ownParameters(t,e);return n||e===Object||(n=this.parameters(e)),n||[]},t.prototype._ownAnnotations=function(t,e){if(t.annotations&&t.annotations!==e.annotations){var n=t.annotations;return"function"==typeof n&&n.annotations&&(n=n.annotations),n}return t.decorators&&t.decorators!==e.decorators?bn(t.decorators):t.hasOwnProperty("__annotations__")?t.__annotations__:null},t.prototype.annotations=function(t){if(!fn(t))return[];var e=yn(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)},t.prototype._ownPropMetadata=function(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){var n=t.propMetadata;return"function"==typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(t.propDecorators&&t.propDecorators!==e.propDecorators){var r=t.propDecorators,i={};return Object.keys(r).forEach(function(t){i[t]=bn(r[t])}),i}return t.hasOwnProperty("__prop__metadata__")?t.__prop__metadata__:null},t.prototype.propMetadata=function(t){if(!fn(t))return{};var e=yn(t),n={};if(e!==Object){var r=this.propMetadata(e);Object.keys(r).forEach(function(t){n[t]=r[t]})}var i=this._ownPropMetadata(t,e);return i&&Object.keys(i).forEach(function(t){var e=[];n.hasOwnProperty(t)&&e.push.apply(e,c(n[t])),e.push.apply(e,c(i[t])),n[t]=e}),n},t.prototype.hasLifecycleHook=function(t,e){return t instanceof pn&&e in t.prototype},t.prototype.guards=function(t){return{}},t.prototype.getter=function(t){return new Function("o","return o."+t+";")},t.prototype.setter=function(t){return new Function("o","v","return o."+t+" = v;")},t.prototype.method=function(t){return new Function("o","args","if (!o."+t+") throw new Error('\""+t+"\" is undefined');\n        return o."+t+".apply(o, args);")},t.prototype.importUri=function(t){return"object"==typeof t&&t.filePath?t.filePath:"./"+Ct(t)},t.prototype.resourceUri=function(t){return"./"+Ct(t)},t.prototype.resolveIdentifier=function(t,e,n,r){return r},t.prototype.resolveEnum=function(t,e){return t[e]},t}();function bn(t){return t?t.map(function(t){var e=t.type.annotationCls;return new(e.bind.apply(e,c([void 0],t.args?t.args:[])))}):[]}function yn(t){var e=t.prototype?Object.getPrototypeOf(t.prototype):null;return(e?e.constructor:null)||Object}var wn="ngDebugContext",kn="ngOriginalError",_n="ngErrorLogger";function xn(t){return t[wn]}function Sn(t){return t[kn]}function $n(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,c(e))}var Tn=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[_n]||$n}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?xn(t)?xn(t):this._findContext(Sn(t)):null},t.prototype._findOriginalError=function(t){for(var e=Sn(t);e&&Sn(e);)e=Sn(e);return e},t}();function Cn(t){return t.length>1?" ("+function(t){for(var e=[],n=0;n<t.length;++n){if(e.indexOf(t[n])>-1)return e.push(t[n]),e;e.push(t[n])}return e}(t.slice().reverse()).map(function(t){return Ct(t.token)}).join(" -> ")+")":""}function En(t,e,n,r){var i=[e],o=n(i),a=r?function(t,e){var n=o+" caused by: "+(e instanceof Error?e.message:e),r=Error(n);return r[kn]=e,r}(0,r):Error(o);return a.addKey=An,a.keys=i,a.injectors=[t],a.constructResolvingMessage=n,a[kn]=r,a}function An(t,e){this.injectors.push(t),this.keys.push(e),this.message=this.constructResolvingMessage(this.keys)}function Dn(t,e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];n.push(o&&0!=o.length?o.map(Ct).join(" "):"?")}return Error("Cannot resolve all parameters for '"+Ct(t)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+Ct(t)+"' is decorated with Injectable.")}var Pn=function(){function t(t,e){if(this.token=t,this.id=e,!t)throw new Error("Token must be defined!");this.displayName=Ct(this.token)}return t.get=function(t){return On.get(Dt(t))},Object.defineProperty(t,"numberOfKeys",{get:function(){return On.numberOfKeys},enumerable:!0,configurable:!0}),t}(),On=new(function(){function t(){this._allKeys=new Map}return t.prototype.get=function(t){if(t instanceof Pn)return t;if(this._allKeys.has(t))return this._allKeys.get(t);var e=new Pn(t,Pn.numberOfKeys);return this._allKeys.set(t,e),e},Object.defineProperty(t.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),t}()),Mn=new(function(){function t(t){this.reflectionCapabilities=t}return t.prototype.updateCapabilities=function(t){this.reflectionCapabilities=t},t.prototype.factory=function(t){return this.reflectionCapabilities.factory(t)},t.prototype.parameters=function(t){return this.reflectionCapabilities.parameters(t)},t.prototype.annotations=function(t){return this.reflectionCapabilities.annotations(t)},t.prototype.propMetadata=function(t){return this.reflectionCapabilities.propMetadata(t)},t.prototype.hasLifecycleHook=function(t,e){return this.reflectionCapabilities.hasLifecycleHook(t,e)},t.prototype.getter=function(t){return this.reflectionCapabilities.getter(t)},t.prototype.setter=function(t){return this.reflectionCapabilities.setter(t)},t.prototype.method=function(t){return this.reflectionCapabilities.method(t)},t.prototype.importUri=function(t){return this.reflectionCapabilities.importUri(t)},t.prototype.resourceUri=function(t){return this.reflectionCapabilities.resourceUri(t)},t.prototype.resolveIdentifier=function(t,e,n,r){return this.reflectionCapabilities.resolveIdentifier(t,e,n,r)},t.prototype.resolveEnum=function(t,e){return this.reflectionCapabilities.resolveEnum(t,e)},t}())(new vn),Rn=function(){function t(t,e,n){this.key=t,this.optional=e,this.visibility=n}return t.fromKey=function(e){return new t(e,!1,null)},t}(),jn=[],In=function(){return function(t,e,n){this.key=t,this.resolvedFactories=e,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]}}(),Nn=function(){return function(t,e){this.factory=t,this.dependencies=e}}();function Fn(t){var e,n;if(t.useClass){var r=Dt(t.useClass);e=Mn.factory(r),n=Ln(r)}else t.useExisting?(e=function(t){return t},n=[Rn.fromKey(Pn.get(t.useExisting))]):t.useFactory?(e=t.useFactory,n=function(t,e){if(e){var n=e.map(function(t){return[t]});return e.map(function(e){return Vn(t,e,n)})}return Ln(t)}(t.useFactory,t.deps)):(e=function(){return t.useValue},n=jn);return new Nn(e,n)}function Un(t){return new In(Pn.get(t.provide),[Fn(t)],t.multi||!1)}function Ln(t){var e=Mn.parameters(t);if(!e)return[];if(e.some(function(t){return null==t}))throw Dn(t,e);return e.map(function(n){return Vn(t,n,e)})}function Vn(t,e,n){var r=null,i=!1;if(!Array.isArray(e))return Bn(e instanceof Mt?e.token:e,i,null);for(var o=null,a=0;a<e.length;++a){var s=e[a];s instanceof pn?r=s:s instanceof Mt?r=s.token:s instanceof Rt?i=!0:s instanceof jt||s instanceof It?o=s:s instanceof mt&&(r=s)}if(null!=(r=Dt(r)))return Bn(r,i,o);throw Dn(t,n)}function Bn(t,e,n){return new Rn(Pn.get(t),e,n)}var Hn=new Object,qn=function(){function t(){}return t.resolve=function(t){return function(t){var e=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e.get(r.key.id);if(i){if(r.multiProvider!==i.multiProvider)throw Error("Cannot mix multi providers and regular providers, got: "+i+" "+r);if(r.multiProvider)for(var o=0;o<r.resolvedFactories.length;o++)i.resolvedFactories.push(r.resolvedFactories[o]);else e.set(r.key.id,r)}else{var a;a=r.multiProvider?new In(r.key,r.resolvedFactories.slice(),r.multiProvider):r,e.set(r.key.id,a)}}return e}(function t(e,n){return e.forEach(function(e){if(e instanceof pn)n.push({provide:e,useClass:e});else if(e&&"object"==typeof e&&void 0!==e.provide)n.push(e);else{if(!(e instanceof Array))throw Error("Invalid provider - only instances of Provider and Type are allowed, got: "+e);t(e,n)}}),n}(t,[]).map(Un),new Map);return Array.from(e.values())}(t)},t.resolveAndCreate=function(e,n){var r=t.resolve(e);return t.fromResolvedProviders(r,n)},t.fromResolvedProviders=function(t,e){return new zn(t,e)},t}(),zn=function(){function t(t,e){this._constructionCounter=0,this._providers=t,this.parent=e||null;var n=t.length;this.keyIds=new Array(n),this.objs=new Array(n);for(var r=0;r<n;r++)this.keyIds[r]=t[r].key.id,this.objs[r]=Hn}return t.prototype.get=function(t,e){return void 0===e&&(e=Qt),this._getByKey(Pn.get(t),null,e)},t.prototype.resolveAndCreateChild=function(t){var e=qn.resolve(t);return this.createChildFromResolved(e)},t.prototype.createChildFromResolved=function(e){var n=new t(e);return n.parent=this,n},t.prototype.resolveAndInstantiate=function(t){return this.instantiateResolved(qn.resolve([t])[0])},t.prototype.instantiateResolved=function(t){return this._instantiateProvider(t)},t.prototype.getProviderAtIndex=function(t){if(t<0||t>=this._providers.length)throw function(t){return Error("Index "+t+" is out-of-bounds.")}(t);return this._providers[t]},t.prototype._new=function(t){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw En(this,t.key,function(t){return"Cannot instantiate cyclic dependency!"+Cn(t)});return this._instantiateProvider(t)},t.prototype._getMaxNumberOfObjects=function(){return this.objs.length},t.prototype._instantiateProvider=function(t){if(t.multiProvider){for(var e=new Array(t.resolvedFactories.length),n=0;n<t.resolvedFactories.length;++n)e[n]=this._instantiate(t,t.resolvedFactories[n]);return e}return this._instantiate(t,t.resolvedFactories[0])},t.prototype._instantiate=function(t,e){var n,r,i,o=this,a=e.factory;try{n=e.dependencies.map(function(t){return o._getByReflectiveDependency(t)})}catch(s){throw s.addKey&&s.addKey(this,t.key),s}try{r=a.apply(void 0,c(n))}catch(s){throw En(this,t.key,function(t){var e=Ct(t[0].token);return i.message+": Error during instantiation of "+e+"!"+Cn(t)+"."},i=s)}return r},t.prototype._getByReflectiveDependency=function(t){return this._getByKey(t.key,t.visibility,t.optional?null:Qt)},t.prototype._getByKey=function(e,n,r){return e===t.INJECTOR_KEY?this:n instanceof jt?this._getByKeySelf(e,r):this._getByKeyDefault(e,r,n)},t.prototype._getObjByKeyId=function(t){for(var e=0;e<this.keyIds.length;e++)if(this.keyIds[e]===t)return this.objs[e]===Hn&&(this.objs[e]=this._new(this._providers[e])),this.objs[e];return Hn},t.prototype._throwOrNull=function(t,e){if(e!==Qt)return e;throw function(t,e){return En(t,e,function(t){return"No provider for "+Ct(t[0].token)+"!"+Cn(t)})}(this,t)},t.prototype._getByKeySelf=function(t,e){var n=this._getObjByKeyId(t.id);return n!==Hn?n:this._throwOrNull(t,e)},t.prototype._getByKeyDefault=function(e,n,r){var i;for(i=r instanceof It?this.parent:this;i instanceof t;){var o=i,a=o._getObjByKeyId(e.id);if(a!==Hn)return a;i=o.parent}return null!==i?i.get(e.token,n):this._throwOrNull(e,n)},Object.defineProperty(t.prototype,"displayName",{get:function(){return"ReflectiveInjector(providers: ["+function(t,e){for(var n=new Array(t._providers.length),r=0;r<t._providers.length;++r)n[r]=' "'+t.getProviderAtIndex(r).key.displayName+'" ';return n}(this).join(", ")+"])"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.displayName},t.INJECTOR_KEY=Pn.get(te),t}();function Gn(t){return!!t&&"function"==typeof t.then}var Wn=new mt("Application Initializer"),Yn=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Gn(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},t}(),Kn=new mt("AppId");function Zn(){return""+Qn()+Qn()+Qn()}function Qn(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Xn=new mt("Platform Initializer"),Jn=new mt("Platform ID"),tr=new mt("appBootstrapListener"),er=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t}();function nr(){throw new Error("Runtime compiler is not loaded")}var rr,ir,or=nr,ar=nr,sr=nr,lr=nr,ur=function(){function t(){this.compileModuleSync=or,this.compileModuleAsync=ar,this.compileModuleAndAllComponentsSync=sr,this.compileModuleAndAllComponentsAsync=lr}return t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t.prototype.getModuleId=function(t){},t}(),cr=function(){return function(){}}();function dr(){var t=kt.wtf;return!(!t||!(rr=t.trace)||(ir=rr.events,0))}var pr=dr();function fr(t,e){return null}var hr=pr?function(t,e){return void 0===e&&(e=null),ir.createScope(t,e)}:function(t,e){return fr},mr=pr?function(t,e){return rr.leaveScope(t,e),e}:function(t,e){return e},gr=function(){function t(t){var e,n=t.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new an(!1),this.onMicrotaskEmpty=new an(!1),this.onStable=new an(!1),this.onError=new an(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,i,o,a){try{return wr(e),t.invokeTask(r,i,o,a)}finally{kr(e)}},onInvoke:function(t,n,r,i,o,a,s){try{return wr(e),t.invoke(r,i,o,a,s)}finally{kr(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,yr(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,br,vr,vr);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function vr(){}var br={};function yr(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function wr(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function kr(t){t._nesting--,yr(t)}var _r,xr=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new an,this.onMicrotaskEmpty=new an,this.onStable=new an,this.onError=new an}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),Sr=function(){function t(t){var e=this;this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){e.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){gr.assertNotInAngularZone(),$t(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;if(this.isStable())$t(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}},t.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}}):[]},t.prototype.addCallback=function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==i}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})},t.prototype.whenStable=function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),$r=function(){function t(){this._applications=new Map,Tr.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),Tr.findTestabilityInTree(this,t,e)},a([s("design:paramtypes",[])],t)}(),Tr=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),Cr=new mt("AllowMultipleToken"),Er=function(){return function(t,e){this.name=t,this.token=e}}();function Ar(t,e,n){void 0===n&&(n=[]);var r="Platform: "+e,i=new mt(r);return function(e){void 0===e&&(e=[]);var o=Dr();if(!o||o.injector.get(Cr,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(_r&&!_r.destroyed&&!_r.injector.get(Cr,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");_r=t.get(Pr);var e=t.get(Xn,null);e&&e.forEach(function(t){return t()})}(te.create({providers:a,name:r}))}return function(t){var e=Dr();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Dr(){return _r&&!_r.destroyed?_r:null}var Pr=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,r=this,i="noop"===(n=e?e.ngZone:void 0)?new xr:("zone.js"===n?void 0:n)||new gr({enableLongStackTrace:Ne()}),o=[{provide:gr,useValue:i}];return i.run(function(){var e=te.create({providers:o,parent:r.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(Tn,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return Rr(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(t){a.handleError(t)}})}),function(t,e,i){try{var o=((a=n.injector.get(Yn)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return Gn(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(s){throw e.runOutsideAngular(function(){return t.handleError(s)}),s}var a}(a,i)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var r=Or({},e);return function(t,e,n){return t.get(cr).createCompiler([e]).compileModuleAsync(n)}(this.injector,r,t).then(function(t){return n.bootstrapModuleFactory(t,r)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(Mr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+Ct(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function Or(t,e){return Array.isArray(e)?e.reduce(Or,t):o({},t,e)}var Mr=function(){function t(t,e,n,r,i,o){var a=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Ne(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run(function(){a.tick()})}});var s=new T(function(t){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular(function(){t.next(a._stable),t.complete()})}),l=new T(function(t){var e;a._zone.runOutsideAngular(function(){e=a._zone.onStable.subscribe(function(){gr.assertNotInAngularZone(),$t(function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,t.next(!0))})})});var n=a._zone.onUnstable.subscribe(function(){gr.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=rt(s,l.pipe(function(t){return it()((e=ct,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,lt);return r.source=t,r.subjectFactory=n,r})(t));var e}))}var e;return e=t,t.prototype.bootstrap=function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof ge?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n instanceof _e?null:this._injector.get(xe),o=n.create(te.NULL,[],e||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var a=o.injector.get(Sr,null);return a&&o.injector.get($r).registerApplication(o.location.nativeElement,a),this._loadComponent(o),Ne()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},t.prototype.tick=function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(r){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(r)})}finally{this._runningTick=!1,mr(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;Rr(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(tr,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),Rr(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=hr("ApplicationRef#tick()"),t}();function Rr(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var jr=function(){function t(){this.dirty=!0,this._results=[],this.changes=new an,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[St()]=function(){return this._results[St()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var r=Array.isArray(n)?t(n):n;return e.concat(r)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),Ir=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return Nr(t,$e)},t}(),Nr=Yt,Fr=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return Ur()},t}(),Ur=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},Lr=function(){return function(t,e){this.name=t,this.callback=e}}(),Vr=function(){function t(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof Br&&e.addChild(this)}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),Br=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return i(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,r=this,i=this.childNodes.indexOf(t);-1!==i&&((n=this.childNodes).splice.apply(n,c([i+1,0],e)),e.forEach(function(e){e.parent&&e.parent.removeChild(e),t.parent=r}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return function t(e,n,r){e.childNodes.forEach(function(e){e instanceof Br&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return function t(e,n,r){e instanceof Br&&e.childNodes.forEach(function(e){n(e)&&r.push(e),e instanceof Br&&t(e,n,r)})}(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(Vr),Hr=new Map,qr=function(t){return Hr.get(t)||null};function zr(t){Hr.set(t.nativeNode,t)}var Gr=function(){function t(){}return t.prototype.supports=function(t){return Gt(t)},t.prototype.create=function(t){return new Yr(t)},t}(),Wr=function(t,e){return e},Yr=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Wr}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<Xr(n,r,i)?e:n,a=Xr(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var l=a-r,u=s-r;if(l!=u){for(var c=0;c<l;c++){var d=c<i.length?i[c]:i[c]=0,p=d+c;u<=p&&p<l&&(i[c]=d+1)}i[o.previousIndex]=u-l}}a!==s&&t(o,a,s)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Gt(t))throw new Error("Error trying to diff '"+Ct(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)i=this._trackByFn(s,r=t[s]),null!==o&&Tt(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Tt(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r=t[St()](),i=void 0;!(i=r.next()).done;)e(i.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&Tt(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),Tt(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Tt(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Tt(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Kr(e,n),i,r),t},t.prototype._verifyReinsertion=function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Qr),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qr),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),Kr=function(){return function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}(),Zr=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Tt(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),Qr=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Zr,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function Xr(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Jr=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||Wt(t)},t.prototype.create=function(){return new ti},t}(),ti=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||Wt(t)))throw new Error("Error trying to diff '"+Ct(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new ei(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){Tt(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),ei=function(){return function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}(),ni=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new It,new Rt]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t.ngInjectableDef=ft({providedIn:"root",factory:function(){return new t([new Gr])}}),t}(),ri=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new It,new Rt]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t.ngInjectableDef=ft({providedIn:"root",factory:function(){return new t([new Jr])}}),t}(),ii=[new Jr],oi=new ni([new Gr]),ai=new ri(ii),si=Ar(null,"core",[{provide:Jn,useValue:"unknown"},{provide:Pr,deps:[te]},{provide:$r,deps:[]},{provide:er,deps:[]}]),li=new mt("LocaleId");function ui(){return oi}function ci(){return ai}function di(t){return t||"en-US"}var pi=function(){return function(t){}}();function fi(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function hi(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function mi(t,e){return t.nodes[e]}function gi(t,e){return t.nodes[e]}function vi(t,e){return t.nodes[e]}function bi(t,e){return t.nodes[e]}function yi(t,e){return t.nodes[e]}var wi={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function ki(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return _i(n,e),n}(i,t)}function _i(t,e){t[wn]=e,t[_n]=e.logError.bind(e)}function xi(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var Si=function(){},$i=new Map;function Ti(t){var e=$i.get(t);return e||(e=Ct(t)+"_"+$i.size,$i.set(t,e)),e}var Ci="$$undefined",Ei="$$empty";function Ai(t){return{id:Ci,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var Di=0;function Pi(t,e,n,r){return!(!(2&t.state)&&Tt(t.oldValues[e.bindingIndex+n],r))}function Oi(t,e,n,r){return!!Pi(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function Mi(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!Ht(i,r)){var o=e.bindings[n].name;throw ki(wi.createDebugContext(t,e.nodeIndex),o+": "+i,o+": "+r,0!=(1&t.state))}}function Ri(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function ji(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function Ii(t,e,n,r){try{return Ri(33554432&t.def.nodes[e].flags?gi(t,e).componentView:t),wi.handleEvent(t,e,n,r)}catch(i){t.root.errorHandler.handleError(i)}}function Ni(t){return t.parent?gi(t.parent,t.parentNodeDef.nodeIndex):null}function Fi(t){return t.parent?t.parentNodeDef.parent:null}function Ui(t,e){switch(201347067&e.flags){case 1:return gi(t,e.nodeIndex).renderElement;case 2:return mi(t,e.nodeIndex).renderText}}function Li(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function Vi(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function Bi(t){return 1<<t%32}function Hi(t){var e={},n=0,r={};return t&&t.forEach(function(t){var i=u(t,2),o=i[0],a=i[1];"number"==typeof o?(e[o]=a,n|=Bi(o)):r[o]=a}),{matchedQueries:e,references:r,matchedQueryIds:n}}function qi(t,e){return t.map(function(t){var n,r,i;return Array.isArray(t)?(i=(n=u(t,2))[0],r=n[1]):(i=0,r=t),r&&("function"==typeof r||"object"==typeof r)&&e&&Object.defineProperty(r,Kt,{value:e,configurable:!0}),{flags:i,token:r,tokenKey:Ti(r)}})}function zi(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Ot.Native?gi(t,n.renderParent.nodeIndex).renderElement:void 0:e}var Gi=new WeakMap;function Wi(t){var e=Gi.get(t);return e||((e=t(function(){return Si})).factory=t,Gi.set(t,e)),e}function Yi(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(Ui(t,t.def.lastRenderRootNode))),Ki(t,e,0,t.def.nodes.length-1,n,r,i)}function Ki(t,e,n,r,i,o,a){for(var s=n;s<=r;s++){var l=t.def.nodes[s];11&l.flags&&Qi(t,l,e,i,o,a),s+=l.childCount}}function Zi(t,e,n,r,i,o){for(var a=t;a&&!Li(a);)a=a.parent;for(var s=a.parent,l=Fi(a),u=l.nodeIndex+l.childCount,c=l.nodeIndex+1;c<=u;c++){var d=s.def.nodes[c];d.ngContentIndex===e&&Qi(s,d,n,r,i,o),c+=d.childCount}if(!s.parent){var p=t.root.projectableNodes[e];if(p)for(c=0;c<p.length;c++)Xi(t,p[c],n,r,i,o)}}function Qi(t,e,n,r,i,o){if(8&e.flags)Zi(t,e.ngContent.index,n,r,i,o);else{var a=Ui(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&Xi(t,a,n,r,i,o),32&e.bindingFlags&&Xi(gi(t,e.nodeIndex).componentView,a,n,r,i,o)):Xi(t,a,n,r,i,o),16777216&e.flags)for(var s=gi(t,e.nodeIndex).viewContainer._embeddedViews,l=0;l<s.length;l++)Yi(s[l],n,r,i,o);1&e.flags&&!e.element.name&&Ki(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function Xi(t,e,n,r,i,o){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,i);break;case 3:a.removeChild(r,e);break;case 0:o.push(e)}}var Ji=/^:([^:]+):(.+)$/;function to(t){if(":"===t[0]){var e=t.match(Ji);return[e[1],e[2]]}return["",t]}function eo(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function no(t,e,n,r,i,o){t|=1;var a=Hi(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a.matchedQueries,matchedQueryIds:a.matchedQueryIds,references:a.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?Wi(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Si},provider:null,text:null,query:null,ngContent:null}}function ro(t,e,n,r,i,o,a,s,l,c,d,p){var f;void 0===a&&(a=[]),c||(c=Si);var h=Hi(n),m=h.matchedQueries,g=h.references,v=h.matchedQueryIds,b=null,y=null;o&&(b=(f=u(to(o),2))[0],y=f[1]),s=s||[];for(var w=new Array(s.length),k=0;k<s.length;k++){var _=u(s[k],3),x=_[0],S=_[2],$=u(to(_[1]),2),T=$[0],C=$[1],E=void 0,A=void 0;switch(15&x){case 4:A=S;break;case 1:case 8:E=S}w[k]={flags:x,ns:T,name:C,nonMinifiedName:C,securityContext:E,suffix:A}}l=l||[];var D=new Array(l.length);for(k=0;k<l.length;k++){var P=u(l[k],2);D[k]={type:0,target:P[0],eventName:P[1],propName:null}}var O=(a=a||[]).map(function(t){var e=u(t,2),n=e[1],r=u(to(e[0]),2);return[r[0],r[1],n]});return p=function(t){if(t&&t.id===Ci){var e=null!=t.encapsulation&&t.encapsulation!==Ot.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+Di++:Ei}return t&&t.id===Ei&&(t=null),t||null}(p),d&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:m,matchedQueryIds:v,references:g,ngContentIndex:r,childCount:i,bindings:w,bindingFlags:eo(w),outputs:D,element:{ns:b,name:y,attrs:O,template:null,componentProvider:null,componentView:d||null,componentRendererType:p,publicProviders:null,allProviders:null,handleEvent:c||Si},provider:null,text:null,query:null,ngContent:null}}function io(t,e,n){var r,i=n.element,o=t.root.selectorOrNode,a=t.renderer;if(t.parent||!o){r=i.name?a.createElement(i.name,i.ns):a.createComment("");var s=zi(t,e,n);s&&a.appendChild(s,r)}else r=a.selectRootElement(o,!!i.componentRendererType&&i.componentRendererType.encapsulation===Ot.ShadowDom);if(i.attrs)for(var l=0;l<i.attrs.length;l++){var c=u(i.attrs[l],3);a.setAttribute(r,c[1],c[2],c[0])}return r}function oo(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=ao(t,n.nodeIndex,(d=o.eventName,(c=o.target)?c+":"+d:d)),s=o.target,l=t;"component"===o.target&&(s=null,l=e);var u=l.renderer.listen(s||r,o.eventName,a);t.disposables[n.outputIndex+i]=u}var c,d}function ao(t,e,n){return function(r){return Ii(t,e,n,r)}}function so(t,e,n,r){if(!Oi(t,e,n,r))return!1;var i=e.bindings[n],o=gi(t,e.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var l=t.renderer;null!=o?l.setAttribute(n,i,s,r):l.removeAttribute(n,i,r)}(t,i,a,i.ns,s,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,a,s,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(Oe.STYLE,i);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,a,s,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,a)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,a,s,r)}return!0}var lo=new Object,uo=Ti(te),co=Ti(Xt),po=Ti(xe);function fo(t,e,n,r){return n=Dt(n),{index:-1,deps:qi(r,Ct(e)),flags:t,token:e,value:n}}function ho(t,e,n){void 0===n&&(n=te.THROW_IF_NOT_FOUND);var r,i,o=Ut(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var a=e.tokenKey;switch(a){case uo:case co:case po:return t}var s,l=t._def.providersByKey[a];if(l){var u=t._providers[l.index];return void 0===u&&(u=t._providers[l.index]=mo(t,l)),u===lo?void 0:u}if((s=ht(e.token))&&(r=t,null!=(i=s).providedIn&&(function(t,e){return t._def.modules.indexOf(i.providedIn)>-1}(r)||"root"===i.providedIn&&r._def.isRoot))){var c=t._providers.length;return t._def.providersByKey[e.tokenKey]={flags:5120,value:s.factory,deps:[],index:c,token:e.token},t._providers[c]=lo,t._providers[c]=mo(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{Ut(o)}}function mo(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var r=n.length;switch(r){case 0:return new e;case 1:return new e(ho(t,n[0]));case 2:return new e(ho(t,n[0]),ho(t,n[1]));case 3:return new e(ho(t,n[0]),ho(t,n[1]),ho(t,n[2]));default:for(var i=new Array(r),o=0;o<r;o++)i[o]=ho(t,n[o]);return new(e.bind.apply(e,c([void 0],i)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var r=n.length;switch(r){case 0:return e();case 1:return e(ho(t,n[0]));case 2:return e(ho(t,n[0]),ho(t,n[1]));case 3:return e(ho(t,n[0]),ho(t,n[1]),ho(t,n[2]));default:for(var i=Array(r),o=0;o<r;o++)i[o]=ho(t,n[o]);return e.apply(void 0,c(i))}}(t,e.value,e.deps);break;case 2048:n=ho(t,e.deps[0]);break;case 256:n=e.value}return n===lo||null==n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?lo:n}function go(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,wo(n,e),wi.dirtyParentQueries(r),bo(r),r}function vo(t,e,n){var r=e?Ui(e,e.def.lastRenderRootNode):t.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);Yi(n,2,i,o,void 0)}function bo(t){Yi(t,3,null,null,void 0)}function yo(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function wo(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var ko=new Object;function _o(t,e,n,r,i,o){return new xo(t,e,n,r,i,o)}var xo=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.selector=e,s.componentType=n,s._inputs=i,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=r,s}return i(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=Wi(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=wi.createRootView(t,e||[],n,i,r,ko),s=vi(a,o).instance;return n&&a.renderer.setAttribute(gi(a,0).renderElement,"ng-version",Re.full),new So(a,new Eo(a),s)},e}(ge),So=function(t){function e(e,n,r){var i=t.call(this)||this;return i._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return i(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new $e(gi(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Oo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(me);function $o(t,e,n){return new To(t,e,n)}var To=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new $e(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Oo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=Fi(t),t=t.parent;return t?new Oo(t,e):new Oo(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=go(this._data,t);wi.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new Eo(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof _e||(i=o.get(xe));var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a=t;return o=(n=this._data).viewContainer._embeddedViews,null==(r=e)&&(r=o.length),(i=a._view).viewContainerParent=this._view,yo(o,r,i),function(t,e){var n=Ni(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,e.parentNodeDef)}}(n,i),wi.dirtyParentQueries(i),vo(n,r>0?o[r-1]:null,i),a.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(t._view);return i=e,a=(o=(n=this._data).viewContainer._embeddedViews)[r=s],wo(o,r),null==i&&(i=o.length),yo(o,i,a),wi.dirtyParentQueries(a),bo(a),vo(n,i>0?o[i-1]:null,a),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=go(this._data,t);e&&wi.destroyView(e)},t.prototype.detach=function(t){var e=go(this._data,t);return e?new Eo(e):null},t}();function Co(t){return new Eo(t)}var Eo=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return Yi(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){Ri(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{wi.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){wi.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),wi.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,bo(this._view),wi.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function Ao(t,e){return new Do(t,e)}var Do=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return i(e,t),e.prototype.createEmbeddedView=function(t){return new Eo(wi.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new $e(gi(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(sn);function Po(t,e){return new Oo(t,e)}var Oo=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=te.THROW_IF_NOT_FOUND),wi.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Ti(t)},e)},t}();function Mo(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=gi(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return mi(t,n.nodeIndex).renderText;if(20240&n.flags)return vi(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function Ro(t){return new jo(t.renderer)}var jo=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=u(to(e),2),r=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,r),r},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var r=u(to(e),2),i=r[0],o=r[1];null!=n?this.delegate.setAttribute(t,o,n,i):this.delegate.removeAttribute(t,o,i)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function Io(t,e,n,r){return new No(t,e,n,r)}var No=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=mo(t,i))}}(this)}return t.prototype.get=function(t,e,n){void 0===e&&(e=te.THROW_IF_NOT_FOUND),void 0===n&&(n=Nt.Default);var r=0;return n&Nt.SkipSelf?r|=1:n&Nt.Self&&(r|=4),ho(this,{token:t,tokenKey:Ti(t),flags:r},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(we)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+Ct(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=t._providers[i];if(o&&o!==lo){var a=o.ngOnDestroy;"function"!=typeof a||r.has(o)||(a.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),Fo=Ti(Ce),Uo=Ti(De),Lo=Ti($e),Vo=Ti(Ir),Bo=Ti(sn),Ho=Ti(Fr),qo=Ti(te),zo=Ti(Xt);function Go(t,e,n,r,i,o,a,s){var l=[];if(a)for(var c in a){var d=u(a[c],2);l[d[0]]={flags:8,name:c,nonMinifiedName:d[1],ns:null,securityContext:null,suffix:null}}var p=[];if(s)for(var f in s)p.push({type:1,propName:f,target:null,eventName:s[f]});return Wo(t,e|=16384,n,r,i,i,o,l,p)}function Wo(t,e,n,r,i,o,a,s,l){var u=Hi(n),c=u.matchedQueries,d=u.references,p=u.matchedQueryIds;l||(l=[]),s||(s=[]),o=Dt(o);var f=qi(a,Ct(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:p,references:d,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:eo(s),outputs:l,element:null,provider:{token:i,value:o,deps:f},text:null,query:null,ngContent:null}}function Yo(t,e){return Xo(t,e)}function Ko(t,e){for(var n=t;n.parent&&!Li(n);)n=n.parent;return Jo(n.parent,Fi(n),!0,e.provider.value,e.provider.deps)}function Zo(t,e){var n,r=Jo(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var i=0;i<e.outputs.length;i++){var o=e.outputs[i],a=r[o.propName];if(!(n=a)||"function"!=typeof n.subscribe)throw new Error("@Output "+o.propName+" not initialized in '"+r.constructor.name+"'.");var s=a.subscribe(Qo(t,e.parent.nodeIndex,o.eventName));t.disposables[e.outputIndex+i]=s.unsubscribe.bind(s)}return r}function Qo(t,e,n){return function(r){return Ii(t,e,n,r)}}function Xo(t,e){var n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return Jo(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){var o=i.length;switch(o){case 0:return r();case 1:return r(ea(t,e,n,i[0]));case 2:return r(ea(t,e,n,i[0]),ea(t,e,n,i[1]));case 3:return r(ea(t,e,n,i[0]),ea(t,e,n,i[1]),ea(t,e,n,i[2]));default:for(var a=Array(o),s=0;s<o;s++)a[s]=ea(t,e,n,i[s]);return r.apply(void 0,c(a))}}(t,e.parent,n,r.value,r.deps);case 2048:return ea(t,e.parent,n,r.deps[0]);case 256:return r.value}}function Jo(t,e,n,r,i){var o=i.length;switch(o){case 0:return new r;case 1:return new r(ea(t,e,n,i[0]));case 2:return new r(ea(t,e,n,i[0]),ea(t,e,n,i[1]));case 3:return new r(ea(t,e,n,i[0]),ea(t,e,n,i[1]),ea(t,e,n,i[2]));default:for(var a=new Array(o),s=0;s<o;s++)a[s]=ea(t,e,n,i[s]);return new(r.bind.apply(r,c([void 0],a)))}}var ta={};function ea(t,e,n,r,i){if(void 0===i&&(i=te.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var a=r.tokenKey;a===Ho&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);for(var s=t;s;){if(e)switch(a){case Fo:return Ro(na(s,e,n));case Uo:return na(s,e,n).renderer;case Lo:return new $e(gi(s,e.nodeIndex).renderElement);case Vo:return gi(s,e.nodeIndex).viewContainer;case Bo:if(e.element.template)return gi(s,e.nodeIndex).template;break;case Ho:return Co(na(s,e,n));case qo:case zo:return Po(s,e);default:var l=(n?e.element.allProviders:e.element.publicProviders)[a];if(l){var u=vi(s,l.nodeIndex);return u||(u={instance:Xo(s,l)},s.nodes[l.nodeIndex]=u),u.instance}}n=Li(s),e=Fi(s),s=s.parent,4&r.flags&&(s=null)}var c=o.root.injector.get(r.token,ta);return c!==ta||i===ta?c:o.root.ngModule.injector.get(r.token,i)}function na(t,e,n){var r;if(n)r=gi(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!Li(r);)r=r.parent;return r}function ra(t,e,n,r,i,o){if(32768&n.flags){var a=gi(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=qt.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new zt(s,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function ia(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&e&&aa(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(r=oa(t,a,e,r)),a=a.parent}}function oa(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&aa(t,i,o.flags&n,r++),i+=o.childCount}return r}function aa(t,e,n,r){var i=vi(t,e);if(i){var o=i.instance;o&&(wi.setCurrentNode(t,e),1048576&n&&hi(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&hi(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function sa(t,e,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:Bi(e),bindings:r},ngContent:null}}function la(t){for(var e=t.def.nodeMatchedQueries;t.parent&&Vi(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=t.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&yi(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&t.def.nodeFlags)for(i=0;i<t.def.nodes.length;i++){var o;134217728&(o=t.def.nodes[i]).flags&&536870912&o.flags&&yi(t,i).setDirty(),i+=o.childCount}}function ua(t,e){var n=yi(t,e.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=ca(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=vi(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=ca(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var a=e.query.bindings,s=!1,l=0;l<a.length;l++){var u=a[l],c=void 0;switch(u.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}r[u.propName]=c}s&&n.notifyOnChanges()}}function ca(t,e,n,r,i){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(da(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var l=gi(t,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(ca(t,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var u=l.viewContainer._embeddedViews,c=0;c<u.length;c++){var d=u[c],p=Ni(d);p&&p===l&&ca(d,0,d.def.nodes.length-1,r,i)}var f=l.template._projectedViews;if(f)for(c=0;c<f.length;c++){var h=f[c];ca(h,0,h.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function da(t,e,n){if(null!=n)switch(n){case 1:return gi(t,e.nodeIndex).renderElement;case 0:return new $e(gi(t,e.nodeIndex).renderElement);case 2:return gi(t,e.nodeIndex).template;case 3:return gi(t,e.nodeIndex).viewContainer;case 4:return vi(t,e.nodeIndex).instance}}function pa(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function fa(t,e,n){var r=zi(t,e,n);r&&Zi(t,n.ngContent.index,1,r,null,void 0)}function ha(t,e,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function ma(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=zi(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function ga(t,e){return(null!=t?t.toString():"")+e.suffix}function va(t,e,n,r){for(var i=0,o=0,a=0,s=0,l=0,u=null,c=null,d=!1,p=!1,f=null,h=0;h<e.length;h++){var m=e[h];if(m.nodeIndex=h,m.parent=u,m.bindingIndex=i,m.outputIndex=o,m.renderParent=c,a|=m.flags,l|=m.matchedQueryIds,m.element){var g=m.element;g.publicProviders=u?u.element.publicProviders:Object.create(null),g.allProviders=g.publicProviders,d=!1,p=!1,m.element.template&&(l|=m.element.template.nodeMatchedQueries)}if(ya(u,m,e.length),i+=m.bindings.length,o+=m.outputs.length,!c&&3&m.flags&&(f=m),20224&m.flags){d||(d=!0,u.element.publicProviders=Object.create(u.element.publicProviders),u.element.allProviders=u.element.publicProviders);var v=0!=(32768&m.flags);0==(8192&m.flags)||v?u.element.publicProviders[Ti(m.provider.token)]=m:(p||(p=!0,u.element.allProviders=Object.create(u.element.publicProviders)),u.element.allProviders[Ti(m.provider.token)]=m),v&&(u.element.componentProvider=m)}if(u?(u.childFlags|=m.flags,u.directChildFlags|=m.flags,u.childMatchedQueries|=m.matchedQueryIds,m.element&&m.element.template&&(u.childMatchedQueries|=m.element.template.nodeMatchedQueries)):s|=m.flags,m.childCount>0)u=m,ba(m)||(c=m);else for(;u&&h===u.nodeIndex+u.childCount;){var b=u.parent;b&&(b.childFlags|=u.childFlags,b.childMatchedQueries|=u.childMatchedQueries),c=(u=b)&&ba(u)?u.renderParent:u}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:l,flags:t,nodes:e,updateDirectives:n||Si,updateRenderer:r||Si,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:f}}function ba(t){return 0!=(1&t.flags)&&null===t.element.name}function ya(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function wa(t,e,n,r){var i=xa(t.root,t.renderer,t,e,n);return Sa(i,t.component,r),$a(i),i}function ka(t,e,n){var r=xa(t,t.renderer,null,null,e);return Sa(r,n,n),$a(r),r}function _a(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,xa(t.root,i,t,e.element.componentProvider,n)}function xa(t,e,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function Sa(t,e,n){t.component=e,t.context=n}function $a(t){var e;Li(t)&&(e=gi(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];wi.setCurrentNode(t,i);var a=void 0;switch(201347067&o.flags){case 1:var s=io(t,e,o),l=void 0;if(33554432&o.flags){var u=Wi(o.element.componentView);l=wi.createComponentView(t,o,u,s)}oo(t,l,o,s),a={renderElement:s,componentView:l,viewContainer:null,template:o.element.template?Ao(t,o):void 0},16777216&o.flags&&(a.viewContainer=$o(t,o,a));break;case 2:a=ma(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:Yo(t,o)});break;case 16:a={instance:Ko(t,o)};break;case 16384:(a=r[i])||(a={instance:Zo(t,o)}),32768&o.flags&&Sa(gi(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new jr;break;case 8:fa(t,e,o),a=void 0}r[i]=a}Ra(t,Ma.CreateViewNodes),Fa(t,201326592,268435456,0)}function Ta(t){Aa(t),wi.updateDirectives(t,1),ja(t,Ma.CheckNoChanges),wi.updateRenderer(t,1),Ra(t,Ma.CheckNoChanges),t.state&=-97}function Ca(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,fi(t,0,256),Aa(t),wi.updateDirectives(t,0),ja(t,Ma.CheckAndUpdate),Fa(t,67108864,536870912,0);var e=fi(t,256,512);ia(t,2097152|(e?1048576:0)),wi.updateRenderer(t,0),Ra(t,Ma.CheckAndUpdate),Fa(t,134217728,536870912,0),ia(t,8388608|((e=fi(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,fi(t,768,1024)}function Ea(t,e,n,r,i,o,a,s,l,u,d,p,f){return 0===n?function(t,e,n,r,i,o,a,s,l,u,c,d){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,a,s,l,u,c,d){var p=e.bindings.length,f=!1;return p>0&&so(t,e,0,n)&&(f=!0),p>1&&so(t,e,1,r)&&(f=!0),p>2&&so(t,e,2,i)&&(f=!0),p>3&&so(t,e,3,o)&&(f=!0),p>4&&so(t,e,4,a)&&(f=!0),p>5&&so(t,e,5,s)&&(f=!0),p>6&&so(t,e,6,l)&&(f=!0),p>7&&so(t,e,7,u)&&(f=!0),p>8&&so(t,e,8,c)&&(f=!0),p>9&&so(t,e,9,d)&&(f=!0),f}(t,e,n,r,i,o,a,s,l,u,c,d);case 2:return function(t,e,n,r,i,o,a,s,l,u,c,d){var p=!1,f=e.bindings,h=f.length;if(h>0&&Oi(t,e,0,n)&&(p=!0),h>1&&Oi(t,e,1,r)&&(p=!0),h>2&&Oi(t,e,2,i)&&(p=!0),h>3&&Oi(t,e,3,o)&&(p=!0),h>4&&Oi(t,e,4,a)&&(p=!0),h>5&&Oi(t,e,5,s)&&(p=!0),h>6&&Oi(t,e,6,l)&&(p=!0),h>7&&Oi(t,e,7,u)&&(p=!0),h>8&&Oi(t,e,8,c)&&(p=!0),h>9&&Oi(t,e,9,d)&&(p=!0),p){var m=e.text.prefix;h>0&&(m+=ga(n,f[0])),h>1&&(m+=ga(r,f[1])),h>2&&(m+=ga(i,f[2])),h>3&&(m+=ga(o,f[3])),h>4&&(m+=ga(a,f[4])),h>5&&(m+=ga(s,f[5])),h>6&&(m+=ga(l,f[6])),h>7&&(m+=ga(u,f[7])),h>8&&(m+=ga(c,f[8])),h>9&&(m+=ga(d,f[9]));var g=mi(t,e.nodeIndex).renderText;t.renderer.setValue(g,m)}return p}(t,e,n,r,i,o,a,s,l,u,c,d);case 16384:return function(t,e,n,r,i,o,a,s,l,u,c,d){var p=vi(t,e.nodeIndex),f=p.instance,h=!1,m=void 0,g=e.bindings.length;return g>0&&Pi(t,e,0,n)&&(h=!0,m=ra(t,p,e,0,n,m)),g>1&&Pi(t,e,1,r)&&(h=!0,m=ra(t,p,e,1,r,m)),g>2&&Pi(t,e,2,i)&&(h=!0,m=ra(t,p,e,2,i,m)),g>3&&Pi(t,e,3,o)&&(h=!0,m=ra(t,p,e,3,o,m)),g>4&&Pi(t,e,4,a)&&(h=!0,m=ra(t,p,e,4,a,m)),g>5&&Pi(t,e,5,s)&&(h=!0,m=ra(t,p,e,5,s,m)),g>6&&Pi(t,e,6,l)&&(h=!0,m=ra(t,p,e,6,l,m)),g>7&&Pi(t,e,7,u)&&(h=!0,m=ra(t,p,e,7,u,m)),g>8&&Pi(t,e,8,c)&&(h=!0,m=ra(t,p,e,8,c,m)),g>9&&Pi(t,e,9,d)&&(h=!0,m=ra(t,p,e,9,d,m)),m&&f.ngOnChanges(m),65536&e.flags&&hi(t,256,e.nodeIndex)&&f.ngOnInit(),262144&e.flags&&f.ngDoCheck(),h}(t,e,n,r,i,o,a,s,l,u,c,d);case 32:case 64:case 128:return function(t,e,n,r,i,o,a,s,l,u,c,d){var p=e.bindings,f=!1,h=p.length;if(h>0&&Oi(t,e,0,n)&&(f=!0),h>1&&Oi(t,e,1,r)&&(f=!0),h>2&&Oi(t,e,2,i)&&(f=!0),h>3&&Oi(t,e,3,o)&&(f=!0),h>4&&Oi(t,e,4,a)&&(f=!0),h>5&&Oi(t,e,5,s)&&(f=!0),h>6&&Oi(t,e,6,l)&&(f=!0),h>7&&Oi(t,e,7,u)&&(f=!0),h>8&&Oi(t,e,8,c)&&(f=!0),h>9&&Oi(t,e,9,d)&&(f=!0),f){var m=bi(t,e.nodeIndex),g=void 0;switch(201347067&e.flags){case 32:g=new Array(p.length),h>0&&(g[0]=n),h>1&&(g[1]=r),h>2&&(g[2]=i),h>3&&(g[3]=o),h>4&&(g[4]=a),h>5&&(g[5]=s),h>6&&(g[6]=l),h>7&&(g[7]=u),h>8&&(g[8]=c),h>9&&(g[9]=d);break;case 64:g={},h>0&&(g[p[0].name]=n),h>1&&(g[p[1].name]=r),h>2&&(g[p[2].name]=i),h>3&&(g[p[3].name]=o),h>4&&(g[p[4].name]=a),h>5&&(g[p[5].name]=s),h>6&&(g[p[6].name]=l),h>7&&(g[p[7].name]=u),h>8&&(g[p[8].name]=c),h>9&&(g[p[9].name]=d);break;case 128:var v=n;switch(h){case 1:g=v.transform(n);break;case 2:g=v.transform(r);break;case 3:g=v.transform(r,i);break;case 4:g=v.transform(r,i,o);break;case 5:g=v.transform(r,i,o,a);break;case 6:g=v.transform(r,i,o,a,s);break;case 7:g=v.transform(r,i,o,a,s,l);break;case 8:g=v.transform(r,i,o,a,s,l,u);break;case 9:g=v.transform(r,i,o,a,s,l,u,c);break;case 10:g=v.transform(r,i,o,a,s,l,u,c,d)}}m.value=g}return f}(t,e,n,r,i,o,a,s,l,u,c,d);default:throw"unreachable"}}(t,e,r,i,o,a,s,l,u,d,p,f):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)so(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)Oi(t,e,o,n[o])&&(i=!0);if(i){var a="";for(o=0;o<n.length;o++)a+=ga(n[o],r[o]);a=e.text.prefix+a;var s=mi(t,e.nodeIndex).renderText;t.renderer.setValue(s,a)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r=vi(t,e.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)Pi(t,e,s,n[s])&&(o=!0,a=ra(t,r,e,s,n[s],a));return a&&i.ngOnChanges(a),65536&e.flags&&hi(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)Oi(t,e,o,n[o])&&(i=!0);if(i){var a=bi(t,e.nodeIndex),s=void 0;switch(201347067&e.flags){case 32:s=n;break;case 64:for(s={},o=0;o<n.length;o++)s[r[o].name]=n[o];break;case 128:var l=n[0],u=n.slice(1);s=l.transform.apply(l,c(u))}a.value=s}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Aa(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=gi(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,ji(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Da(t,e,n,r,i,o,a,s,l,u,c,d,p){return 0===n?function(t,e,n,r,i,o,a,s,l,u,c,d){var p=e.bindings.length;p>0&&Mi(t,e,0,n),p>1&&Mi(t,e,1,r),p>2&&Mi(t,e,2,i),p>3&&Mi(t,e,3,o),p>4&&Mi(t,e,4,a),p>5&&Mi(t,e,5,s),p>6&&Mi(t,e,6,l),p>7&&Mi(t,e,7,u),p>8&&Mi(t,e,8,c),p>9&&Mi(t,e,9,d)}(t,e,r,i,o,a,s,l,u,c,d,p):function(t,e,n){for(var r=0;r<n.length;r++)Mi(t,e,r,n[r])}(t,e,r),!1}function Pa(t,e){if(yi(t,e.nodeIndex).dirty)throw ki(wi.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function Oa(t){if(!(128&t.state)){if(ja(t,Ma.Destroy),Ra(t,Ma.Destroy),ia(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=Ni(t);if(e){var n=e.template._projectedViews;n&&(wo(n,n.indexOf(t)),wi.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(gi(t,n).renderElement):2&r.flags?t.renderer.destroyNode(mi(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&yi(t,n).destroy()}}(t),Li(t)&&t.renderer.destroy(),t.state|=128}}var Ma=function(t){return t[t.CreateViewNodes=0]="CreateViewNodes",t[t.CheckNoChanges=1]="CheckNoChanges",t[t.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate=3]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",t[t.Destroy=5]="Destroy",t}({});function Ra(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?Ia(gi(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function ja(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=gi(t,r).viewContainer._embeddedViews,a=0;a<o.length;a++)Ia(o[a],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function Ia(t,e){var n=t.state;switch(e){case Ma.CheckNoChanges:0==(128&n)&&(12==(12&n)?Ta(t):64&n&&Na(t,Ma.CheckNoChangesProjectedViews));break;case Ma.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Ta(t):64&n&&Na(t,e));break;case Ma.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Ca(t):64&n&&Na(t,Ma.CheckAndUpdateProjectedViews));break;case Ma.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Ca(t):64&n&&Na(t,e));break;case Ma.Destroy:Oa(t);break;case Ma.CreateViewNodes:$a(t)}}function Na(t,e){ja(t,e),Ra(t,e)}function Fa(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(wi.setCurrentNode(t,a.nodeIndex),r){case 0:ua(t,a);break;case 1:Pa(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var Ua=!1;function La(t,e,n,r,i,o){var a=i.injector.get(Ee);return ka(Ba(t,i,a,e,n),r,o)}function Va(t,e,n,r,i,o){var a=i.injector.get(Ee),s=Ba(t,i,new ws(a),e,n),l=Xa(r);return bs(ss.create,ka,null,[s,l,o])}function Ba(t,e,n,r,i){var o=e.injector.get(Me),a=e.injector.get(Tn),s=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:s,errorHandler:a}}function Ha(t,e,n,r){var i=Xa(n);return bs(ss.create,wa,null,[t,e,i,r])}function qa(t,e,n,r){return n=Ya.get(e.element.componentProvider.provider.token)||Xa(n),bs(ss.create,_a,null,[t,e,n,r])}function za(t,e,n,r){return Io(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===Ga.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var r=Ga.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(function(t){Wa.forEach(function(r,i){ht(i).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var r=t.providers[e];n&&(r.flags|=4096);var i=Ga.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=qi(i.deps),r.value=i.value)}if(Wa.size>0){var o=new Set(t.modules);Wa.forEach(function(e,r){if(o.has(ht(r).providedIn)){var i={token:r,flags:e.flags|(n?4096:0),deps:qi(e.deps),value:e.value,index:t.providers.length};t.providers.push(i),t.providersByKey[Ti(r)]=i}})}}(t=t.factory(function(){return Si})),t):t}(r))}var Ga=new Map,Wa=new Map,Ya=new Map;function Ka(t){var e;Ga.set(t.token,t),"function"==typeof t.token&&(e=ht(t.token))&&"function"==typeof e.providedIn&&Wa.set(t.token,t)}function Za(t,e){var n=Wi(e.viewDefFactory),r=Wi(n.nodes[0].element.componentView);Ya.set(t,r)}function Qa(){Ga.clear(),Wa.clear(),Ya.clear()}function Xa(t){if(0===Ga.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Ga.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return Si});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=Ga.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=qi(o.deps),i.value=o.value)}}}}function Ja(t,e,n,r,i,o,a,s,l,u,c,d,p){var f=t.def.nodes[e];return Ea(t,f,n,r,i,o,a,s,l,u,c,d,p),224&f.flags?bi(t,e).value:void 0}function ts(t,e,n,r,i,o,a,s,l,u,c,d,p){var f=t.def.nodes[e];return Da(t,f,n,r,i,o,a,s,l,u,c,d,p),224&f.flags?bi(t,e).value:void 0}function es(t){return bs(ss.detectChanges,Ca,null,[t])}function ns(t){return bs(ss.checkNoChanges,Ta,null,[t])}function rs(t){return bs(ss.destroy,Oa,null,[t])}var is,os,as,ss=function(t){return t[t.create=0]="create",t[t.detectChanges=1]="detectChanges",t[t.checkNoChanges=2]="checkNoChanges",t[t.destroy=3]="destroy",t[t.handleEvent=4]="handleEvent",t}({});function ls(t,e){os=t,as=e}function us(t,e,n,r){return ls(t,e),bs(ss.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function cs(t,e){if(128&t.state)throw xi(ss[is]);return ls(t,hs(t,0)),t.def.updateDirectives(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?ps(t,a,r,i):fs(t,a,r,i),16384&a.flags&&ls(t,hs(t,n)),224&a.flags?bi(t,a.nodeIndex).value:void 0},t)}function ds(t,e){if(128&t.state)throw xi(ss[is]);return ls(t,ms(t,0)),t.def.updateRenderer(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?ps(t,a,r,i):fs(t,a,r,i),3&a.flags&&ls(t,ms(t,n)),224&a.flags?bi(t,a.nodeIndex).value:void 0},t)}function ps(t,e,n,r){if(Ea.apply(void 0,c([t,e,n],r))){var i=1===n?r[0]:r;if(16384&e.flags){for(var o={},a=0;a<e.bindings.length;a++){var s=e.bindings[a],l=i[a];8&s.flags&&(o[(f=s.nonMinifiedName,"ng-reflect-"+f.replace(/[$@]/g,"_").replace(Vt,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()}))]=Bt(l))}var u=e.parent,d=gi(t,u.nodeIndex).renderElement;if(u.element.name)for(var p in o)null!=(l=o[p])?t.renderer.setAttribute(d,p,l):t.renderer.removeAttribute(d,p);else t.renderer.setValue(d,"bindings="+JSON.stringify(o,null,2))}}var f}function fs(t,e,n,r){Da.apply(void 0,c([t,e,n],r))}function hs(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function ms(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var gs=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=Fi(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return gi(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return Po(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){vs(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&vs(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!Li(t);)t=t.parent;return t.parent?gi(t.parent,Fi(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?Ui(this.view,this.nodeDef):Ui(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var o=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(e,n),a=-1;e.factory(function(){var e;return++a===o?(e=t.error).bind.apply(e,c([t],r)):Si}),a<o&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,c(r)))},t}();function vs(t,e,n){for(var r in e.references)n[r]=da(t,e,e.references[r])}function bs(t,e,n,r){var i=is,o=os,a=as;try{is=t;var s=e.apply(n,r);return os=o,as=a,is=i,s}catch(l){if(xn(l)||!os)throw l;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),_i(t,e),t}(l,ys())}}function ys(){return os?new gs(os,as):null}var ws=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new ks(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),ks=function(){function t(t){this.delegate=t,this.debugContextFactory=ys,this.data=this.delegate.data}return t.prototype.createDebugContext=function(t){return this.debugContextFactory(t)},t.prototype.destroyNode=function(t){!function(t){Hr.delete(t.nativeNode)}(qr(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){var i=new Br(n,null,r);i.name=t,zr(i)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&zr(new Vr(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&zr(new Vr(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=qr(t),r=qr(e);n&&r&&n instanceof Br&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=qr(t),i=qr(e),o=qr(n);r&&i&&r instanceof Br&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=qr(t),r=qr(e);n&&r&&n instanceof Br&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t,e){var n=this.delegate.selectRootElement(t,e),r=ys();return r&&zr(new Br(n,null,r)),n},t.prototype.setAttribute=function(t,e,n,r){var i=qr(t);i&&i instanceof Br&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=qr(t);r&&r instanceof Br&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=qr(t);n&&n instanceof Br&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=qr(t);n&&n instanceof Br&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var i=qr(t);i&&i instanceof Br&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=qr(t);r&&r instanceof Br&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=qr(t);r&&r instanceof Br&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var r=qr(t);r&&r.listeners.push(new Lr(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}();function _s(t,e,n){return new xs(t,e,n)}var xs=function(t){function e(e,n,r){var i=t.call(this)||this;return i.moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return i(e,t),e.prototype.create=function(t){!function(){if(!Ua){Ua=!0;var t=Ne()?{setCurrentNode:ls,createRootView:Va,createEmbeddedView:Ha,createComponentView:qa,createNgModuleRef:za,overrideProvider:Ka,overrideComponentView:Za,clearOverrides:Qa,checkAndUpdateView:es,checkNoChangesView:ns,destroyView:rs,createDebugContext:function(t,e){return new gs(t,e)},handleEvent:us,updateDirectives:cs,updateRenderer:ds}:{setCurrentNode:function(){},createRootView:La,createEmbeddedView:wa,createComponentView:_a,createNgModuleRef:Io,overrideProvider:Si,overrideComponentView:Si,clearOverrides:Si,checkAndUpdateView:Ca,checkNoChangesView:Ta,destroyView:Oa,createDebugContext:function(t,e){return new gs(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?Ja:ts,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?Ja:ts,t)}};wi.setCurrentNode=t.setCurrentNode,wi.createRootView=t.createRootView,wi.createEmbeddedView=t.createEmbeddedView,wi.createComponentView=t.createComponentView,wi.createNgModuleRef=t.createNgModuleRef,wi.overrideProvider=t.overrideProvider,wi.overrideComponentView=t.overrideComponentView,wi.clearOverrides=t.clearOverrides,wi.checkAndUpdateView=t.checkAndUpdateView,wi.checkNoChangesView=t.checkNoChangesView,wi.destroyView=t.destroyView,wi.resolveDep=ea,wi.createDebugContext=t.createDebugContext,wi.handleEvent=t.handleEvent,wi.updateDirectives=t.updateDirectives,wi.updateRenderer=t.updateRenderer,wi.dirtyParentQueries=la}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),r={};for(var i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(Wi(this._ngModuleDefFactory));return wi.createNgModuleRef(this.moduleType,t||te.NULL,this._bootstrapComponents,e)},e}(Se),Ss=n("KHwQ"),$s=function(){return function(){}}(),Ts=function(){return function(){}}(),Cs=function(){function t(t){var n=this;this._subject=new an,this._platformStrategy=t;var r=this._platformStrategy.getBaseHref();this._baseHref=e.stripTrailingSlash(Es(r)),this._platformStrategy.onPopState(function(t){n._subject.emit({url:n.path(!0),pop:!0,state:t.state,type:t.type})})}var e;return e=t,t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(t,n){return void 0===n&&(n=""),this.path()==this.normalize(t+e.normalizeQueryParams(n))},t.prototype.normalize=function(t){return e.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Es(t)))},t.prototype.prepareExternalUrl=function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=null),this._platformStrategy.pushState(n,"",t,e)},t.prototype.replaceState=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=null),this._platformStrategy.replaceState(n,"",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t&&"?"!==t[0]?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)},t}();function Es(t){return t.replace(/\/index.html$/,"")}var As=function(t){function e(e,n){var r=t.call(this)||this;return r._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return i(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=Cs.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Cs.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Cs.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(Ts),Ds=function(t){function e(e,n){var r=t.call(this)||this;if(r._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,r}return i(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return Cs.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+Cs.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?""+e+n:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Cs.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Cs.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(Ts),Ps=void 0,Os=["en",[["a","p"],["AM","PM"],Ps],[["AM","PM"],Ps,Ps],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ps,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ps,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ps,"{1} 'at' {0}",Ps],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],Ms={},Rs=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),js=new mt("UseV4Plurals"),Is=function(){return function(){}}(),Ns=function(t){function e(e,n){var r=t.call(this)||this;return r.locale=e,r.deprecatedPluralFn=n,r}return i(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,"-"),n=Ms[e];if(n)return n;var r=e.split("-")[0];if(n=Ms[r])return n;if("en"===r)return Os;throw new Error('Missing locale data for the locale "'+t+'".')}(t)[18]}(e||this.locale)(t)){case Rs.Zero:return"zero";case Rs.One:return"one";case Rs.Two:return"two";case Rs.Few:return"few";case Rs.Many:return"many";default:return"other"}},e}(Is);function Fs(t,e){var n,r;e=encodeURIComponent(e);try{for(var i=l(t.split(";")),o=i.next();!o.done;o=i.next()){var a=o.value,s=a.indexOf("="),c=u(-1==s?[a,""]:[a.slice(0,s),a.slice(s+1)],2),d=c[1];if(c[0].trim()===e)return decodeURIComponent(d)}}catch(p){n={error:p}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null}var Us=function(){function t(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),Ls=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(t.prototype,"ngForOf",{set:function(t){this._ngForOf=t,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){Ne()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new Us(null,e._ngForOf,-1,-1),i),a=new Vs(t,o);n.push(a)}else null==i?e._viewContainer.remove(r):(o=e._viewContainer.get(r),e._viewContainer.move(o,i),a=new Vs(t,o),n.push(a))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t.ngTemplateContextGuard=function(t,e){return!0},t}(),Vs=function(){return function(t,e){this.record=t,this.view=e}}(),Bs=function(){function t(t,e){this._viewContainer=t,this._context=new Hs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){qs("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){qs("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t.ngTemplateGuard_ngIf=function(t,e){return!0},t}(),Hs=function(){return function(){this.$implicit=null,this.ngIf=null}}();function qs(t,e){if(e&&!e.createEmbeddedView)throw new Error(t+" must be a TemplateRef, but received '"+Ct(e)+"'.")}var zs=function(){return function(){}}(),Gs=new mt("DocumentToken"),Ws="browser",Ys="server";function Ks(t){return t===Ws}var Zs=null;function Qs(){return Zs}var Xs,Js={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},tl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},el={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};kt.Node&&(Xs=kt.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var nl,rl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,Zs||(Zs=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var r;(r=t)[e].apply(r,c(n))},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return Js},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return Xs.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n.item(r);e.set(i.name,i.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&el.hasOwnProperty(e)&&(e=el[e]))}return tl[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=il||(il=document.querySelector("base"))?il.getAttribute("href"):null;return null==n?null:(e=n,nl||(nl=document.createElement("a")),nl.setAttribute("href",e),"/"===nl.pathname.charAt(0)?nl.pathname:"/"+nl.pathname)},e.prototype.resetBaseElement=function(){il=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return Fs(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+"AnimationName")){e._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(a){e._animationPrefix=null,e._transitionEnd=null}return e}return i(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),il=null,ol=Gs;function al(){return!!window.history.pushState}var sl=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}var n;return i(e,t),e.prototype._init=function(){this.location=Qs().getLocation(),this._history=Qs().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return Qs().getBaseHref(this._doc)},e.prototype.onPopState=function(t){Qs().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){Qs().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){al()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){al()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},a([(n=Mt(ol),function(t,e){n(t,e,0)}),s("design:paramtypes",[Object])],e)}($s),ll=new mt("TRANSITION_ID"),ul=[{provide:Wn,useFactory:function(t,e,n){return function(){n.get(Yn).donePromise.then(function(){var n=Qs();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[ll,ol,te],multi:!0}],cl=function(){function t(){}return t.init=function(){var e;e=new t,Tr=e},t.prototype.addToWindow=function(t){kt.getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},kt.getAllAngularTestabilities=function(){return t.getAllTestabilities()},kt.getAllAngularRootElements=function(){return t.getAllRootElements()},kt.frameworkStabilizers||(kt.frameworkStabilizers=[]),kt.frameworkStabilizers.push(function(t){var e=kt.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(i)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?Qs().isShadowRoot(e)?this.findTestabilityInTree(t,Qs().getHost(e),!0):this.findTestabilityInTree(t,Qs().parentElement(e),!0):null},t}();function dl(t,e){"undefined"!=typeof COMPILED&&COMPILED||((kt.ng=kt.ng||{})[t]=e)}var pl={ApplicationRef:Mr,NgZone:gr};function fl(t){return qr(t)}var hl=new mt("EventManagerPlugins"),ml=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)},t}(),gl=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var r=Qs().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target "+r+" for event "+e);return this.addEventListener(r,e,n)},t}(),vl=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),bl=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return i(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return Qs().remove(t)})},e}(vl),yl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wl=/%COMP%/g,kl="_nghost-%COMP%",_l="_ngcontent-%COMP%";function xl(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?xl(t,i,n):(i=i.replace(wl,t),n.push(i))}return n}function Sl(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var $l=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new Tl(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Ot.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Dl(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case Ot.Native:case Ot.ShadowDom:return new Pl(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=xl(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),Tl=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(yl[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'+t+'" did not match any elements');return e||(n.textContent=""),n},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+":"+e;var i=yl[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=yl[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,r){r&Ae.DashCase?t.style.setProperty(e,n,r&Ae.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&Ae.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){El(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return El(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Sl(n)):this.eventManager.addEventListener(t,e,Sl(n))},t}(),Cl="@".charCodeAt(0);function El(t,e){if(t.charCodeAt(0)===Cl)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Al,Dl=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.component=r;var o=xl(r.id,r.styles,[]);return n.addStyles(o),i.contentAttr=_l.replace(wl,r.id),i.hostAttr=kl.replace(wl,r.id),i}return i(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,""),r},e}(Tl),Pl=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;o.sharedStylesHost=n,o.hostEl=r,o.component=i,o.shadowRoot=i.encapsulation===Ot.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=xl(i.id,i.styles,[]),s=0;s<a.length;s++){var l=document.createElement("style");l.textContent=a[s],o.shadowRoot.appendChild(l)}return o}return i(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(Tl),Ol="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},Ml=Ol("addEventListener"),Rl=Ol("removeEventListener"),jl={},Il="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[Ol("BLACK_LISTED_EVENTS")]&&(Al={});var Nl=function(t){return!!Al&&Al.hasOwnProperty(t)},Fl=function(t){var e=jl[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==t[Il];o++){var a;(a=i[o]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},Ul=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.ngZone=n,r&&function(t){return t===Ys}(r)||i.patchEvent(),i}return i(e,t),e.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Il]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var r=this,i=n;if(!t[Ml]||gr.isInAngularZone()&&!Nl(e))t.addEventListener(e,i,!1);else{var o=jl[e];o||(o=jl[e]=Ol("ANGULAR"+e+"FALSE"));var a=t[o],s=a&&a.length>0;a||(a=t[o]=[]);var l=Nl(e)?Zone.root:Zone.current;if(0===a.length)a.push({zone:l,handler:i});else{for(var u=!1,c=0;c<a.length;c++)if(a[c].handler===i){u=!0;break}u||a.push({zone:l,handler:i})}s||t[Ml](e,Fl,!1)}return function(){return r.removeEventListener(t,e,i)}},e.prototype.removeEventListener=function(t,e,n){var r=t[Rl];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var i=jl[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(t,[e,Fl,!1]):t.removeEventListener.apply(t,[e,n,!1])},e}(gl),Ll={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Vl=new mt("HammerGestureConfig"),Bl=new mt("HammerLoader"),Hl=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),ql=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._config=n,o.console=r,o.loader=i,o}return i(e,t),e.prototype.supports=function(t){return!(!Ll.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+t+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},e.prototype.addEventListener=function(t,e,n){var r=this,i=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});o||(a=r.addEventListener(t,e,n))}).catch(function(){r.console.warn('The "'+e+'" event cannot be bound because the custom Hammer.JS loader failed.'),a=function(){}}),function(){a()}}return i.runOutsideAngular(function(){var o=r._config.buildHammer(t),a=function(t){i.runGuarded(function(){n(t)})};return o.on(e,a),function(){o.off(e,a),"function"==typeof o.destroy&&o.destroy()}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(gl),zl=["alt","control","meta","shift"],Gl={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Wl=function(t){function e(e){return t.call(this,e)||this}var n;return i(e,t),n=e,e.prototype.supports=function(t){return null!=n.parseEventName(t)},e.prototype.addEventListener=function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Qs().onAndCancel(t,i.domEventName,o)})},e.parseEventName=function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(zl.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")}),o+=i,0!=e.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a},e.getEventFullKey=function(t){var e="",n=Qs().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),zl.forEach(function(r){r!=n&&(0,Gl[r])(t)&&(e+=r+".")}),e+=n},e.eventCallback=function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded(function(){return e(i)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e}(gl),Yl=function(){return function(){}}(),Kl=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return i(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case Oe.NONE:return e;case Oe.HTML:return e instanceof Ql?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){var n=null;try{qe=qe||new Fe(t);var r=e?String(e):"";n=qe.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=qe.getInertBodyElement(r)}while(r!==o);var a=new tn,s=a.sanitizeChildren(on(n)||n);return Ne()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var l=on(n)||n;l.firstChild;)l.removeChild(l.firstChild)}}(this._doc,String(e)));case Oe.STYLE:return e instanceof Xl?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(cn);return e&&Ve(e[1])===e[1]||t.match(un)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Ne()&&console.warn("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case Oe.SCRIPT:if(e instanceof Jl)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case Oe.URL:return e instanceof eu||e instanceof tu?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),Ve(String(e)));case Oe.RESOURCE_URL:if(e instanceof eu)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof Zl)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new Ql(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new Xl(t)},e.prototype.bypassSecurityTrustScript=function(t){return new Jl(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new tu(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new eu(t)},e}(Yl),Zl=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),Ql=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(Zl),Xl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"Style"},e}(Zl),Jl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"Script"},e}(Zl),tu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"URL"},e}(Zl),eu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(Zl),nu=Ar(si,"browser",[{provide:Jn,useValue:Ws},{provide:Xn,useValue:function(){rl.makeCurrent(),cl.init()},multi:!0},{provide:$s,useClass:sl,deps:[ol]},{provide:ol,useFactory:function(){return document},deps:[]}]);function ru(){return new Tn}var iu=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}var e;return e=t,t.withServerTransition=function(t){return{ngModule:e,providers:[{provide:Kn,useValue:t.appId},{provide:ll,useExisting:Kn},ul]}},t}();function ou(){return new au(Lt(ol))}var au=function(){function t(t){this._doc=t}return t.prototype.getTitle=function(){return Qs().getTitle(this._doc)},t.prototype.setTitle=function(t){Qs().setTitle(this._doc,t)},t.ngInjectableDef=ft({factory:ou,token:t,providedIn:"root"}),t}();function su(){throw new Error("AngularJS v1.x is not loaded!")}"undefined"!=typeof window&&window;var lu=function(){return su()};lu.cleanData=su;var uu={bootstrap:su,module:su,element:lu,version:void 0,resumeBootstrap:su,getTestability:su};try{window.hasOwnProperty("angular")&&(uu=window.angular)}catch(lk){}function cu(){return uu}var du=function(t,e){return uu.module(t,e)},pu=function(t){return uu.element(t)};pu.cleanData=function(t){return uu.element.cleanData(t)};var fu="$injector",hu="$$angularDowngradedModuleCount",mu="$$angularInjector",gu="$$angularUpgradeAppType",vu="?^^"+mu,bu=function(){function t(t,e){this.prop=t,this.attr=e,this.parseBinding()}return t.prototype.parseBinding=function(){this.bracketAttr="["+this.attr+"]",this.parenAttr="("+this.attr+")",this.bracketParenAttr="[("+this.attr+")]";var t=this.attr.charAt(0).toUpperCase()+this.attr.substr(1);this.onAttr="on"+t,this.bindAttr="bind"+t,this.bindonAttr="bindon"+t},t}();function yu(t){return"$"+t+"Controller"}function wu(t){return t.overriddenName||t.name||t.toString().split("\n")[0]}function ku(t){return t.has(hu)?t.get(hu):0}function _u(t){return t.has(gu)?t.get(gu):0}function xu(t){return"function"==typeof t}function Su(t,e,n,r){var i=_u(t),o=ku(t);switch(i){case 1:case 2:if(e)throw new Error("Error while "+r+": 'downgradedModule' unexpectedly specified.\nYou should not specify a value for 'downgradedModule', unless you are downgrading more than one Angular module (via 'downgradeModule()').");break;case 3:if(!e&&o>=2)throw new Error("Error while "+r+": 'downgradedModule' not specified.\nThis application contains more than one downgraded Angular module, thus you need to always specify 'downgradedModule' when downgrading components and injectables.");if(!t.has(n))throw new Error("Error while "+r+": Unable to find the specified downgraded module.\nDid you forget to downgrade an Angular module or include it in the AngularJS application?");break;default:throw new Error("Error while "+r+": Not a valid '@angular/upgrade' application.\nDid you forget to downgrade an Angular module or include it in the AngularJS application?")}}var $u,Tu={__UNINITIALIZED__:!0},Cu=function(){function t(t,e,n,r,i,o,a,s,l,u){this.element=t,this.attrs=e,this.scope=n,this.ngModel=r,this.parentInjector=i,this.$injector=o,this.$compile=a,this.$parse=s,this.componentFactory=l,this.wrapCallback=u,this.implementsOnChanges=!1,this.inputChangeCount=0,this.inputChanges={},this.componentScope=n.$new()}return t.prototype.compileContents=function(){var t=this,e=[],n=this.groupProjectableNodes().map(function(e){return t.$compile(e)});return this.element.empty(),n.forEach(function(n){n(t.scope,function(n){e.push(n),t.element.append(n)})}),e},t.prototype.createComponent=function(t){var e=te.create({providers:[{provide:"$scope",useValue:this.componentScope}],parent:this.parentInjector,name:"DowngradeComponentAdapter"});this.componentRef=this.componentFactory.create(e,t,this.element[0]),this.viewChangeDetector=this.componentRef.injector.get(Fr),this.changeDetector=this.componentRef.changeDetectorRef,this.component=this.componentRef.instance;var n,r,i=this.componentRef.injector.get(Sr,null);i&&this.componentRef.injector.get($r).registerApplication(this.componentRef.location.nativeElement,i),r=this.component,(n=this.ngModel)&&function(t){return"function"==typeof t.writeValue&&"function"==typeof t.registerOnChange}(r)&&(n.$render=function(){r.writeValue(n.$viewValue)},r.registerOnChange(n.$setViewValue.bind(n)),"function"==typeof r.registerOnTouched&&r.registerOnTouched(n.$setTouched.bind(n)))},t.prototype.setupInputs=function(t,e){var n=this;void 0===e&&(e=!0);for(var r=this.attrs,i=this.componentFactory.inputs||[],o=function(t){var e,o,s=new bu(i[t].propName,i[t].templateName),l=null;if(r.hasOwnProperty(s.attr)){var u=(e=s.prop,o=Tu,function(t){var r,i;(r=o)===(i=t)||r!=r&&i!=i||(o===Tu&&(o=t),n.updateInput(e,o,t),o=t)});r.$observe(s.attr,u);var c=a.componentScope.$watch(function(){c(),c=null,u(r[s.attr])})}else r.hasOwnProperty(s.bindAttr)?l=r[s.bindAttr]:r.hasOwnProperty(s.bracketAttr)?l=r[s.bracketAttr]:r.hasOwnProperty(s.bindonAttr)?l=r[s.bindonAttr]:r.hasOwnProperty(s.bracketParenAttr)&&(l=r[s.bracketParenAttr]);if(null!=l){var d=function(t){return function(e,r){return n.updateInput(t,r,e)}}(s.prop);a.componentScope.$watch(l,d)}},a=this,s=0;s<i.length;s++)o(s);var l=function(){return n.changeDetector.detectChanges()},u=this.componentFactory.componentType.prototype;if(this.implementsOnChanges=!(!u||!u.ngOnChanges),this.componentScope.$watch(function(){return n.inputChangeCount},this.wrapCallback(function(){if(n.implementsOnChanges){var t=n.inputChanges;n.inputChanges={},n.component.ngOnChanges(t)}n.viewChangeDetector.markForCheck(),e||l()})),e&&this.componentScope.$watch(this.wrapCallback(l)),t||!e)var c=this.componentScope.$watch(function(){c(),c=null,n.parentInjector.get(Mr).attachView(n.componentRef.hostView)})},t.prototype.setupOutputs=function(){for(var t=this.attrs,e=this.componentFactory.outputs||[],n=0;n<e.length;n++){var r=new bu(e[n].propName,e[n].templateName),i=r.bindonAttr.substring(0,r.bindonAttr.length-6),o="[("+r.bracketParenAttr.substring(2,r.bracketParenAttr.length-8)+")]";t.hasOwnProperty(i)&&this.subscribeToOutput(r,t[i],!0),t.hasOwnProperty(o)&&this.subscribeToOutput(r,t[o],!0),t.hasOwnProperty(r.onAttr)&&this.subscribeToOutput(r,t[r.onAttr]),t.hasOwnProperty(r.parenAttr)&&this.subscribeToOutput(r,t[r.parenAttr])}},t.prototype.subscribeToOutput=function(t,e,n){var r=this;void 0===n&&(n=!1);var i=this.$parse(e),o=i.assign;if(n&&!o)throw new Error("Expression '"+e+"' is not assignable!");var a=this.component[t.prop];if(!a)throw new Error("Missing emitter '"+t.prop+"' on component '"+wu(this.componentFactory.componentType)+"'!");a.subscribe({next:n?function(t){return o(r.scope,t)}:function(t){return i(r.scope,{$event:t})}})},t.prototype.registerCleanup=function(){var t=this,e=this.wrapCallback(function(){return t.componentRef.destroy()}),n=!1;this.element.on("$destroy",function(){return t.componentScope.$destroy()}),this.componentScope.$on("$destroy",function(){n||(n=!0,t.componentRef.injector.get($r).unregisterApplication(t.componentRef.location.nativeElement),e())})},t.prototype.getInjector=function(){return this.componentRef.injector},t.prototype.updateInput=function(t,e,n){this.implementsOnChanges&&(this.inputChanges[t]=new zt(e,n,e===n)),this.inputChangeCount++,this.component[t]=n},t.prototype.groupProjectableNodes=function(){return function(t,e){for(var n=[],r=0,i=t.length;r<i;++r)n[r]=[];for(var o=0,a=e.length;o<a;++o){var s=e[o],l=Eu(s,t);null!=l&&n[l].push(s)}return n}(this.componentFactory.ngContentSelectors,this.element.contents())},t}();function Eu(t,e){for(var n=[],r=-1,i=0;i<e.length;i++){var o=e[i];"*"===o?r=i:Au(t,o)&&n.push(i)}return n.sort(),-1!==r&&n.push(r),n.length?n[0]:null}function Au(t,e){if(!$u){var n=Element.prototype;$u=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&$u.call(t,e)}var Du=function(){function t(t){this.element=t,this.injectorKey=yu(mu),this.callbacks=[],t.data(this.injectorKey,this)}return t.prototype.then=function(t){this.injector?t(this.injector):this.callbacks.push(t)},t.prototype.resolve=function(t){this.injector=t,this.element.data(this.injectorKey,t),this.element=null,this.callbacks.forEach(function(e){return e(t)}),this.callbacks.length=0},t}();function Pu(t){return xu(t.then)}function Ou(t,e){void 0===e&&(e="");var n=function(n){var r=""+mu+e,i=xu(t)?wu(t):String(t);return Su(n,e,r,"instantiating injectable '"+i+"'"),n.get(r).get(t)};return n.$inject=[fu],n}var Mu=null;function Ru(){if(!Mu)throw new Error("Trying to get the AngularJS injector before it being set.");var t=Mu;return Mu=null,t}function ju(t){return t.get("$rootScope")}function Iu(t){return t.get("$compile")}function Nu(t){return t.get("$parse")}var Fu=function(){function t(t){this.modInjector=t}return t.prototype.get=function(t,e){return e===ta?e:this.modInjector.get(t,e)},t}(),Uu=function(){function t(t,e){this.ngZone=e,this.injector=new Fu(t)}return t.prototype.bootstrap=function(t,e,n){var r=this;void 0===e&&(e=[]);var i="$$UpgradeModule.init",o=(du(i,[]).constant(gu,2).value(mu,this.injector).factory("$$angularLazyModuleRef",[mu,function(t){return{injector:t}}]).config(["$provide",fu,function(t,e){e.has("$$testability")&&t.decorator("$$testability",["$delegate",function(t){var e=t.whenStable,n=r.injector,i=function(r){e.call(t,function(){var e=n.get(Sr);e.isStable()?r():e.whenStable(i.bind(t,r))})};return t.whenStable=i,t}]),e.has("$interval")&&t.decorator("$interval",["$delegate",function(t){var e=function(e,n,i,o){for(var a=[],s=4;s<arguments.length;s++)a[s-4]=arguments[s];return r.ngZone.runOutsideAngular(function(){return t.apply(void 0,c([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];setTimeout(function(){r.ngZone.run(function(){return e.apply(void 0,c(t))})})},n,i,o],a))})};return e.cancel=t.cancel,e}])}]).run([fu,function(e){r.$injector=e,Mu=e,r.injector.get(fu),pu(t).data(yu(mu),r.injector),setTimeout(function(){var t=e.get("$rootScope"),n=r.ngZone.onMicrotaskEmpty.subscribe(function(){return t.$digest()});t.$on("$destroy",function(){n.unsubscribe()})},0)}]),du("$$UpgradeModule",[i].concat(e))),a=window.angular;if(a.resumeBootstrap=void 0,this.ngZone.run(function(){!function(e,n,r){uu.bootstrap(t,[o.name],r)}(0,0,n)}),a.resumeBootstrap){var s=a.resumeBootstrap,l=this.ngZone;a.resumeBootstrap=function(){var t=this,e=arguments;return a.resumeBootstrap=s,l.run(function(){return a.resumeBootstrap.apply(t,e)})}}},t}(),Lu=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new A;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(O),Vu="https://"+window.location.host+"/api",Bu=new T(function(t){return t.complete()});function Hu(t){return t?function(t){return new T(function(e){return t.schedule(function(){return e.complete()})})}(t):Bu}function qu(t){var e=new T(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}function zu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(R(n)?t.pop():n=void 0,t.length){case 0:return Hu(n);case 1:return n?Z(t,n):qu(t[0]);default:return Z(t,n)}}function Gu(t,e){return X(t,e,1)}function Wu(t,e){return function(n){return n.lift(new Yu(t,e))}}var Yu=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Ku(t,this.predicate,this.thisArg))},t}(),Ku=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)},e}(x),Zu=function(){return function(){}}(),Qu=function(){return function(){}}(),Xu=function(){function t(t){var e=this;this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){e.headers=new Map,t.split("\n").forEach(function(t){var n=t.indexOf(":");if(n>0){var r=t.slice(0,n),i=r.toLowerCase(),o=t.slice(n+1).trim();e.maybeSetNormalizedName(r,i),e.headers.has(i)?e.headers.get(i).push(o):e.headers.set(i,[o])}})}:function(){e.headers=new Map,Object.keys(t).forEach(function(n){var r=t[n],i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(e.headers.set(i,r),e.maybeSetNormalizedName(n,i))})}:this.headers=new Map}return t.prototype.has=function(t){return this.init(),this.headers.has(t.toLowerCase())},t.prototype.get=function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null},t.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},t.prototype.getAll=function(t){return this.init(),this.headers.get(t.toLowerCase())||null},t.prototype.append=function(t,e){return this.clone({name:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({name:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({name:t,value:e,op:"d"})},t.prototype.maybeSetNormalizedName=function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)},t.prototype.init=function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))},t.prototype.copyFrom=function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))})},t.prototype.clone=function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n},t.prototype.applyUpdate=function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,c(n)),this.headers.set(e,r);break;case"d":var i=t.value;if(i){var o=this.headers.get(e);if(!o)return;0===(o=o.filter(function(t){return-1===i.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}},t.prototype.forEach=function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return t(e.normalizedNames.get(n),e.headers.get(n))})},t}(),Ju=function(){function t(){}return t.prototype.encodeKey=function(t){return tc(t)},t.prototype.encodeValue=function(t){return tc(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}();function tc(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var ec=function(){function t(t){void 0===t&&(t={});var e,n,r,i=this;if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Ju,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(e=t.fromString,n=this.encoder,r=new Map,e.length>0&&e.split("&").forEach(function(t){var e=t.indexOf("="),i=u(-1==e?[n.decodeKey(t),""]:[n.decodeKey(t.slice(0,e)),n.decodeValue(t.slice(e+1))],2),o=i[0],a=i[1],s=r.get(o)||[];s.push(a),r.set(o,s)}),r)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(function(e){var n=t.fromObject[e];i.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}return t.prototype.has=function(t){return this.init(),this.map.has(t)},t.prototype.get=function(t){this.init();var e=this.map.get(t);return e?e[0]:null},t.prototype.getAll=function(t){return this.init(),this.map.get(t)||null},t.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},t.prototype.append=function(t,e){return this.clone({param:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({param:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({param:t,value:e,op:"d"})},t.prototype.toString=function(){var t=this;return this.init(),this.keys().map(function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return n+"="+t.encoder.encodeValue(e)}).join("&")}).join("&")},t.prototype.clone=function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n},t.prototype.init=function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}}),this.cloneFrom=null)},t}();function nc(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function rc(t){return"undefined"!=typeof Blob&&t instanceof Blob}function ic(t){return"undefined"!=typeof FormData&&t instanceof FormData}var oc=function(){function t(t,e,n,r){var i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Xu),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{var a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new ec,this.urlWithParams=e}return t.prototype.serializeBody=function(){return null===this.body?null:nc(this.body)||rc(this.body)||ic(this.body)||"string"==typeof this.body?this.body:this.body instanceof ec?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},t.prototype.detectContentTypeHeader=function(){return null===this.body?null:ic(this.body)?null:rc(this.body)?this.body.type||null:nc(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ec?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},t.prototype.clone=function(e){void 0===e&&(e={});var n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,l=e.headers||this.headers,u=e.params||this.params;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce(function(t,n){return t.set(n,e.setHeaders[n])},l)),e.setParams&&(u=Object.keys(e.setParams).reduce(function(t,n){return t.set(n,e.setParams[n])},u)),new t(n,r,o,{params:u,headers:l,reportProgress:s,responseType:i,withCredentials:a})},t}(),ac=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),sc=function(){return function(t,e,n){void 0===e&&(e=200),void 0===n&&(n="OK"),this.headers=t.headers||new Xu,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}(),lc=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=ac.ResponseHeader,n}return i(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(sc),uc=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=ac.Response,n.body=void 0!==e.body?e.body:null,n}return i(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(sc),cc=function(t){function e(e){var n=t.call(this,e,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):"Http failure response for "+(e.url||"(unknown url)")+": "+e.status+" "+e.statusText,n.error=e.error||null,n}return i(e,t),e}(sc);function dc(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var pc=function(){function t(t){this.handler=t}return t.prototype.request=function(t,e,n){var r,i=this;if(void 0===n&&(n={}),t instanceof oc)r=t;else{var o;o=n.headers instanceof Xu?n.headers:new Xu(n.headers);var a=void 0;n.params&&(a=n.params instanceof ec?n.params:new ec({fromObject:n.params})),r=new oc(t,e,void 0!==n.body?n.body:null,{headers:o,params:a,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var s=zu(r).pipe(Gu(function(t){return i.handler.handle(t)}));if(t instanceof oc||"events"===n.observe)return s;var l=s.pipe(Wu(function(t){return t instanceof uc}));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return l.pipe(W(function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return l.pipe(W(function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return l.pipe(W(function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return l.pipe(W(function(t){return t.body}))}case"response":return l;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},t.prototype.delete=function(t,e){return void 0===e&&(e={}),this.request("DELETE",t,e)},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("GET",t,e)},t.prototype.head=function(t,e){return void 0===e&&(e={}),this.request("HEAD",t,e)},t.prototype.jsonp=function(t,e){return this.request("JSONP",t,{params:(new ec).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},t.prototype.options=function(t,e){return void 0===e&&(e={}),this.request("OPTIONS",t,e)},t.prototype.patch=function(t,e,n){return void 0===n&&(n={}),this.request("PATCH",t,dc(n,e))},t.prototype.post=function(t,e,n){return void 0===n&&(n={}),this.request("POST",t,dc(n,e))},t.prototype.put=function(t,e,n){return void 0===n&&(n={}),this.request("PUT",t,dc(n,e))},t}(),fc=function(){function t(t,e){this.next=t,this.interceptor=e}return t.prototype.handle=function(t){return this.interceptor.intercept(t,this.next)},t}(),hc=new mt("HTTP_INTERCEPTORS"),mc=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t)},t}(),gc=/^\)\]\}',?\n/,vc=function(){return function(){}}(),bc=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t}(),yc=function(){function t(t){this.xhrFactory=t}return t.prototype.handle=function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new T(function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach(function(t,e){return r.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,l=function(){if(null!==s)return s;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new Xu(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new lc({headers:i,status:e,statusText:n,url:o})},u=function(){var e=l(),i=e.headers,o=e.status,a=e.statusText,s=e.url,u=null;204!==o&&(u=void 0===r.response?r.responseText:r.response),0===o&&(o=u?200:0);var c=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof u){var d=u;u=u.replace(gc,"");try{u=""!==u?JSON.parse(u):null}catch(p){u=d,c&&(c=!1,u={error:p,text:u})}}c?(n.next(new uc({body:u,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new cc({error:u,headers:i,status:o,statusText:a,url:s||void 0}))},c=function(t){var e=l().url,i=new cc({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error",url:e||void 0});n.error(i)},d=!1,p=function(e){d||(n.next(l()),d=!0);var i={type:ac.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},f=function(t){var e={type:ac.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",u),r.addEventListener("error",c),t.reportProgress&&(r.addEventListener("progress",p),null!==a&&r.upload&&r.upload.addEventListener("progress",f)),r.send(a),n.next({type:ac.Sent}),function(){r.removeEventListener("error",c),r.removeEventListener("load",u),t.reportProgress&&(r.removeEventListener("progress",p),null!==a&&r.upload&&r.upload.removeEventListener("progress",f)),r.abort()}})},t}(),wc=new mt("XSRF_COOKIE_NAME"),kc=new mt("XSRF_HEADER_NAME"),_c=function(){return function(){}}(),xc=function(){function t(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return t.prototype.getToken=function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fs(t,this.cookieName),this.lastCookieString=t),this.lastToken},t}(),Sc=function(){function t(t,e){this.tokenService=t,this.headerName=e}return t.prototype.intercept=function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)},t}(),$c=function(){function t(t,e){this.backend=t,this.injector=e,this.chain=null}return t.prototype.handle=function(t){if(null===this.chain){var e=this.injector.get(hc,[]);this.chain=e.reduceRight(function(t,e){return new fc(t,e)},this.backend)}return this.chain.handle(t)},t}(),Tc=function(){function t(){}var e;return e=t,t.disable=function(){return{ngModule:e,providers:[{provide:Sc,useClass:mc}]}},t.withOptions=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.cookieName?{provide:wc,useValue:t.cookieName}:[],t.headerName?{provide:kc,useValue:t.headerName}:[]]}},t}(),Cc=function(){return function(){}}(),Ec=function(){function t(t){this.http=t,this.mainContributors=["macite","alexcu","jakerenzella"],this.API_URL=Vu,this.ExternalName=new Lu("Loading..."),this.settingsUrl=this.API_URL+"/settings",this.loadExternalName(),this.loadSignoutUrl()}return t.prototype.loadSignoutUrl=function(){var t=this;this.http.get(this.API_URL+"/auth/signout_url").subscribe(function(e){return t.SignoutURL=e.auth_signout_url},function(t){return console.error(t)})},t.prototype.loadExternalName=function(){var t=this;this.http.get(this.settingsUrl).subscribe(function(e){return t.ExternalName.next(e.externalName)})},t.ngInjectableDef=ft({factory:function(){return new t(Lt(pc))},token:t,providedIn:"root"}),t}(),Ac=function(){function t(t){this.http=t}return t.prototype.GetGithubProfiles=function(t){return this.http.get("https://api.github.com/users/"+t)},t}(),Dc=function(){return function(t){this.data=t}}(),Pc=function(){function t(t,e,n){this.dialog=t,this.constants=e,this.aboutDoubtfireModalService=n,this.aboutDialogData={externalName:"",contributors:[]},this.aboutDialogData.contributors=this.constants.mainContributors.map(function(t){return{avatar_url:"/assets/images/person-unknown.gif",login:t}})}return t.prototype.show=function(){this.getContributorDetails(),this.getExternalName(),this.dialog.open(Dc,{width:"900px",data:this.aboutDialogData})},t.prototype.getExternalName=function(){var t=this;this.constants.ExternalName.subscribe(function(e){t.aboutDialogData.externalName=e})},t.prototype.getContributorDetails=function(){var t=this;this.aboutDialogData.contributors.forEach(function(e,n){t.aboutDoubtfireModalService.GetGithubProfiles(e.login).subscribe(function(e){t.aboutDialogData.contributors[n]={avatar_url:e.avatar_url,name:e.name,html_url:e.html_url,login:e.login}})})},t}(),Oc=(n("ySSw"),n("kvyo"),n("IZpb"),n("CoPh"),n("w4Pi"),n("e4O7"),n("/FGW"),n("LkIK"),n("5iTH"),n("5fuZ"),n("uVLc"),n("/7wq"),n("rr7S"),n("+f+8"),n("Ubv5"),n("xBYf"),n("vRFE"),n("YHAa"),n("oFp8"),n("ZenS"),n("WrKa"),n("e0Io"),n("qHRh"),n("xL3z"),n("2VkZ"),n("SoBS"),n("ltUq"),n("dSw6"),n("Um6K"),n("wpWz"),n("1gZ8"),n("H9ox"),n("eLmm"),n("z6iE"),n("xozG"),n("4wZu"),n("XyS+"),n("By75"),n("Q4rK"),n("IN6a"),n("0mrk"),n("cvho"),n("xf4P"),n("09Tn"),n("72vh"),n("bitr"),n("NU9F"),n("6qpU"),n("cbZt"),n("fsPY"),n("HvVG"),n("Ygc7"),n("ROMr"),n("g96Y"),n("RtYk"),n("IcVH"),n("uPfk"),n("cIgU"),n("rgoI"),n("tnxp"),n("bJ4r"),n("l9Zy"),n("qNE9"),n("C6Cm"),n("o7Mz"),n("OwQH"),n("CjTd"),n("YTnw"),n("Q1Io"),n("Whmr"),n("qR0b"),n("R+pi"),n("lZfr"),n("SV+T"),n("hrW+"),n("N0f2"),n("mL5s"),n("W9kW"),n("2TZ6"),n("6+Iu"),n("bjKH"),n("+H4Z"),n("g40n"),n("ej+f"),n("D1nA"),n("1VGn"),n("z4Fa"),n("yVKh"),n("dC4b"),n("i3xR"),n("WFko"),n("XpQh"),n("tLt2"),n("Z94s"),n("8VRA"),n("8NPN"),n("vLjA"),n("xOIg"),n("FVRI"),n("x0Lv"),n("Duzk"),n("VF48"),n("6dr/"),n("GMb7"),n("IRdx"),n("uH0l"),n("fkHl"),n("ut43"),n("QqsB"),n("Or+b"),n("gwZl"),n("dZB/"),n("Vjir"),n("V1RV"),n("c+Mi"),n("pNnN"),n("SP6l"),n("uZjq"),n("BSnQ"),n("AcHm"),n("D0Uj"),n("m/Qy"),n("G1in"),n("wHTR"),n("qJ/I"),n("S3kq"),n("SJO3"),n("yzNs"),n("/7oY"),n("3Vef"),n("OsdL"),n("4jb+"),n("ED7q"),n("jeRM"),n("B2it"),n("+DPT"),n("FKRd"),n("XvXa"),n("EDb2"),n("JZL2"),n("dfRj"),n("G5Ey"),n("unhN"),n("727p"),n("DDRc"),n("zOo6"),n("TOql"),n("bSyc"),n("R5WU"),n("FE7D"),n("H91u"),n("MOf/"),n("6pEX"),n("1lqO"),n("3QH1"),n("Tq/7"),n("19sK"),n("pojS"),n("ulcU"),n("qayQ"),n("G11L"),n("688P"),n("q7L+"),n("jm96"),n("6/UL"),n("XvB+"),n("Ujk7"),n("Nfv9"),n("1pJz"),n("MWfS"),n("igl/"),n("FTi6"),n("ocCN"),n("LjWJ"),n("yg3R"),n("5Buf"),n("47hH"),n("qUxc"),n("2ChG"),n("a3wL"),n("DNp5"),n("eVRO"),n("c8R8"),n("d6lO"),n("999U"),n("PHqG"),n("nucG"),n("0r4E"),n("cMLu"),n("KGOA"),n("vjto"),n("pckz"),n("zYWJ"),n("SIT7"),n("eGvP"),n("gJle"),n("IfsA"),n("myRX"),n("d09A"),n("4Xs5"),n("YzF7"),n("DXtn"),n("Osgm"),n("8h+h"),n("ejcT"),n("Sp9U"),n("JJQ8"),n("8pUN"),n("BUA6"),n("z0rW"),n("xkaz"),n("dcMl"),n("n8sD"),n("eOMg"),n("exXu"),n("5GP2"),n("ixBm"),n("6heI"),n("rfju"),n("GsxH"),n("Hbtf"),n("7axO"),n("mHeX"),n("TFDp"),n("uKhs"),n("5Zb3"),n("vVEA"),n("Qc7Y"),n("wHD3"),n("M0d3"),n("gWJd"),n("3g9P"),n("oD68"),n("RIjG"),n("PfrU"),n("rB0A"),n("BV18"),n("G/2P"),n("b7QK"),n("EqbJ"),n("2Kj5"),n("RmMz"),n("/Lkx"),n("ggdv"),n("3nbo"),n("UftQ"),n("AZ+m"),n("f3wz"),n("2Isw"),n("oY7l"),n("GmOA"),n("SI+0"),n("INTa"),n("GEUR"),n("/rw+"),n("U6v0"),n("IcB5"),n("s10c"),Ss.module("doubtfire",["doubtfire.config","doubtfire.api","doubtfire.sessions","doubtfire.common","doubtfire.errors","doubtfire.home","doubtfire.admin","doubtfire.units","doubtfire.tasks","doubtfire.projects","doubtfire.groups","doubtfire.visualisations"]));function Mc(t){var e=[].slice.apply(arguments,[1]),n=t.length;return function e(r){return r.length>=n?t.apply(null,r):function(){return e(r.concat([].slice.apply(arguments)))}}(e)}function Rc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}).apply(null,[].slice.call(arguments).reverse())}Oc.factory("AboutDoubtfireModal",Ou(Pc)),Oc.factory("DoubtfireConstants",Ou(Ec)),Oc.config(["$urlRouterProvider","$locationProvider",function(t,e){e.hashPrefix(""),t.otherwise("/home")}]);var jc=function(t){return function(e){return e&&e[t]}},Ic=Mc(function(t,e,n){return n&&n[t]===e}),Nc=function(t){return Rc.apply(null,t.split(".").map(jc))},Fc=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}},Uc=function(t){return function(e){return e.reduce(function(e,n){return e&&!!t(n)},!0)}},Lc=function(t){return function(e){return e.reduce(function(e,n){return e||!!t(n)},!1)}},Vc=function(t){return function(e){return null!=e&&e.constructor===t||e instanceof t}},Bc=function(t){return function(){return t}};function Hc(t){return function(e){for(var n=0;n<t.length;n++)if(t[n][0](e))return t[n][1](e)}}var qc,zc,Gc=Object.prototype.toString,Wc=function(t){return function(e){return typeof e===t}},Yc=Wc("undefined"),Kc=Fc(Yc),Zc=function(t){return null===t},Qc=(qc=Zc,zc=Yc,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return qc.apply(null,t)||zc.apply(null,t)}),Xc=Wc("function"),Jc=Wc("number"),td=Wc("string"),ed=function(t){return null!==t&&"object"==typeof t},nd=Array.isArray,rd=function(t){return"[object Date]"===Gc.call(t)},id=function(t){return"[object RegExp]"===Gc.call(t)};function od(t){if(nd(t)&&t.length){var e=t.slice(0,-1),n=t.slice(-1);return!(e.filter(Fc(td)).length||n.filter(Fc(Xc)).length)}return Xc(t)}var ad=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.apply(null,n)&&e.apply(null,n)}}(ed,Rc(jc("then"),Xc)),sd=function(t,e){return e.reduce(function(e,n){return e[n]=(r=t+"."+n+"()",function(){throw new Error("No implementation for "+r+". The framework specific code did not implement this method.")}),e;var r},{})},ld={$q:void 0,$injector:void 0},ud="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||void 0,cd=ud.angular||{},dd=cd.fromJson||JSON.parse.bind(JSON),pd=cd.toJson||JSON.stringify.bind(JSON),fd=cd.forEach||function(t,e,n){if(nd(t))return t.forEach(e,n);Object.keys(t).forEach(function(n){return e(t[n],n)})},hd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r=Object.keys(n),i=0;i<r.length;i++)t[r[i]]=n[r[i]]}return t},md=cd.equals||function t(e,n){if(e===n)return!0;if(null===e||null===n)return!1;if(e!=e&&n!=n)return!0;var r=typeof e;if(r!==typeof n||"object"!==r)return!1;var i,o,a=[e,n];if(Uc(nd)(a))return(i=e).length===(o=n).length&&Ld(i,o).reduce(function(e,n){return e&&t(n[0],n[1])},!0);if(Uc(rd)(a))return e.getTime()===n.getTime();if(Uc(id)(a))return e.toString()===n.toString();if(Uc(Xc)(a))return!0;if([Xc,nd,rd,id].map(Lc).reduce(function(t,e){return t||!!e(a)},!1))return!1;var s={};for(var l in e){if(!t(e[l],n[l]))return!1;s[l]=!0}for(var l in n)if(!s[l])return!1;return!0};function gd(t){return t}function vd(){}function bd(t,e,n,r,i){void 0===i&&(i=!1);var o=function(e){return t()[e].bind(n())};return(r=r||Object.keys(t())).reduce(function(t,n){var r;return t[n]=i?(r=n,function(){return e[r]=o(r),e[r].apply(null,arguments)}):o(n),t},e)}var yd=function(t,e){return hd(Object.create(t),e)},wd=Mc(function(t,e){return-1!==t.indexOf(e)}),kd=Mc(function(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),t}),_d=Mc(function(t,e){return t.push(e),e});function xd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=hd.apply(void 0,[{}].concat(e.reverse()));return hd(r,$d(t||{},Object.keys(r)))}var Sd=function(t,e){return hd(t,e)};function $d(t,e){var n={};for(var r in t)-1!==e.indexOf(r)&&(n[r]=t[r]);return n}function Td(t,e){return Object.keys(t).filter(Fc(wd(e))).reduce(function(e,n){return e[n]=t[n],e},{})}function Cd(t,e){var n=nd(t),r=n?[]:{},i=n?function(t){return r.push(t)}:function(t,e){return r[e]=t};return fd(t,function(t,n){e(t,n)&&i(t,n)}),r}function Ed(t,e){var n;return fd(t,function(t,r){n||e(t,r)&&(n=t)}),n}var Ad=Dd;function Dd(t,e,n){return n=n||(nd(t)?[]:{}),fd(t,function(t,r){return n[r]=e(t,r)}),n}var Pd=function(t){return Object.keys(t).map(function(e){return t[e]})},Od=function(t,e){return t&&e},Md=function(t,e){return t||e},Rd=function(t,e){return t.concat(e)},jd=function(t,e){return nd(e)?t.concat(e.reduce(jd,[])):Id(t,e)};function Id(t,e){return t.push(e),t}var Nd=function(t,e){return wd(t,e)?t:Id(t,e)},Fd=function(t){return t.reduce(Rd,[])},Ud=function(t,e){return void 0===e&&(e="assert failure"),function(n){var r=t(n);if(!r)throw new Error(Xc(e)?e(n):e);return r}};function Ld(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return[];for(var n=t.reduce(function(t,e){return Math.min(e.length,t)},9007199254740991),r=[],i=function(e){switch(t.length){case 1:r.push([t[0][e]]);break;case 2:r.push([t[0][e],t[1][e]]);break;case 3:r.push([t[0][e],t[1][e],t[2][e]]);break;case 4:r.push([t[0][e],t[1][e],t[2][e],t[3][e]]);break;default:r.push(t.map(function(t){return t[e]}))}},o=0;o<n;o++)i(o);return r}function Vd(t,e){var n,r;if(nd(e)&&(n=e[0],r=e[1]),!td(n))throw new Error("invalid parameters to applyPairs");return t[n]=r,t}function Bd(t){return t.length&&t[t.length-1]||void 0}function Hd(t,e){return e&&Object.keys(e).forEach(function(t){return delete e[t]}),e||(e={}),hd(e,t)}var qd=function(t){return t.catch(function(t){return 0})&&t},zd=function(t){return qd(ld.$q.reject(t))},Gd=function(){function t(t){this.text=t,this.glob=t.split(".");var e=this.text.split(".").map(function(t){return"**"===t?"(?:|(?:\\.[^.]*)*)":"*"===t?"\\.[^.]*":"\\."+t}).join("");this.regexp=new RegExp("^"+e+"$")}return t.is=function(t){return!!/[!,*]+/.exec(t)},t.fromString=function(e){return t.is(e)?new t(e):null},t.prototype.matches=function(t){return this.regexp.test("."+t)},t}(),Wd=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=null),this._items=t,this._limit=e,this._evictListeners=[],this.onEvict=_d(this._evictListeners)}return t.prototype.enqueue=function(t){var e=this._items;return e.push(t),this._limit&&e.length>this._limit&&this.evict(),t},t.prototype.evict=function(){var t=this._items.shift();return this._evictListeners.forEach(function(e){return e(t)}),t},t.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},t.prototype.clear=function(){var t=this._items;return this._items=[],t},t.prototype.size=function(){return this._items.length},t.prototype.remove=function(t){var e=this._items.indexOf(t);return e>-1&&this._items.splice(e,1)[0]},t.prototype.peekTail=function(){return this._items[this._items.length-1]},t.prototype.peekHead=function(){if(this.size())return this._items[0]},t}(),Yd=function(t){return t[t.SUPERSEDED=2]="SUPERSEDED",t[t.ABORTED=3]="ABORTED",t[t.INVALID=4]="INVALID",t[t.IGNORED=5]="IGNORED",t[t.ERROR=6]="ERROR",t}({}),Kd=0,Zd=function(){function t(t,e,n){this.$id=Kd++,this.type=t,this.message=e,this.detail=n}return t.isRejectionPromise=function(e){return e&&"function"==typeof e.then&&Vc(t)(e._transitionRejection)},t.superseded=function(e,n){var r=new t(Yd.SUPERSEDED,"The transition has been superseded by a different transition",e);return n&&n.redirected&&(r.redirected=!0),r},t.redirected=function(e){return t.superseded(e,{redirected:!0})},t.invalid=function(e){return new t(Yd.INVALID,"This transition is invalid",e)},t.ignored=function(e){return new t(Yd.IGNORED,"The transition was ignored",e)},t.aborted=function(e){return new t(Yd.ABORTED,"The transition has been aborted",e)},t.errored=function(e){return new t(Yd.ERROR,"The transition errored",e)},t.normalize=function(e){return Vc(t)(e)?e:t.errored(e)},t.prototype.toString=function(){var t,e=(t=this.detail)&&t.toString!==Object.prototype.toString?t.toString():rp(t);return"Transition Rejection($id: "+this.$id+" type: "+this.type+", message: "+this.message+", detail: "+e+")"},t.prototype.toPromise=function(){return hd(zd(this),{_transitionRejection:this})},t}();function Qd(t,e){return e.length<=t?e:e.substr(0,t-3)+"..."}function Xd(t){return t.replace(/^([A-Z])/,function(t){return t.toLowerCase()}).replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function Jd(t){var e=tp(t),n=e.match(/^(function [^ ]+\([^)]*\))/),r=n?n[1]:e,i=t.name||"";return i&&r.match(/function \(/)?"function "+i+r.substr(9):r}function tp(t){var e=nd(t)?t.slice(-1)[0]:t;return e&&e.toString()||"undefined"}var ep=Zd.isRejectionPromise,np=Hc([[Yc,Bc("undefined")],[Zc,Bc("null")],[ad,Bc("[Promise]")],[ep,function(t){return t._transitionRejection.toString()}],[function(t){return ed(t)&&!nd(t)&&t.constructor!==Object&&Xc(t.toString)},function(t){return t.toString()}],[od,Jd],[Bc(!0),gd]]);function rp(t){var e=[];function n(t){if(ed(t)){if(-1!==e.indexOf(t))return"[circular ref]";e.push(t)}return np(t)}return Yc(t)?n(t):JSON.stringify(t,function(t,e){return n(e)}).replace(/\\"/g,'"')}var ip=function(t){return function(e){if(!e)return["",""];var n=e.indexOf(t);return-1===n?[e,""]:[e.substr(0,n),e.substr(n+1)]}},op=(new RegExp("^(?:[a-z]+:)?//[^/]+/"),function(t){return t.replace(/\/[^\/]*$/,"")}),ap=ip("#"),sp=ip("?"),lp=ip("=");function up(t,e){return td(Bd(t))&&td(e)?t.slice(0,-1).concat(Bd(t)+e):Id(t,e)}function cp(t){return t?"[ui-view#"+t.id+" "+t.$type+":"+t.fqn+" ("+t.name+"@"+(t.creationContext?t.creationContext.name||"(root)":"(none)")+")]":"ui-view (defunct)"}function dp(t){return Jc(t)?hp[t]:hp[hp[t]]}var pp=Function.prototype.bind.call(console.log,console),fp=Xc(console.table)?console.table.bind(console):pp.bind(console),hp=function(t){return t[t.RESOLVE=0]="RESOLVE",t[t.TRANSITION=1]="TRANSITION",t[t.HOOK=2]="HOOK",t[t.UIVIEW=3]="UIVIEW",t[t.VIEWCONFIG=4]="VIEWCONFIG",t}({}),mp=Nc("$id"),gp=Nc("router.$id"),vp=function(t){return"Transition #"+mp(t)+"-"+gp(t)},bp=new(function(){function t(){this._enabled={},this.approximateDigests=0}return t.prototype._set=function(t,e){var n=this;e.length||(e=Object.keys(hp).map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)}).map(function(t){return hp[t]})),e.map(dp).forEach(function(e){return n._enabled[e]=t})},t.prototype.enable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!0,t)},t.prototype.disable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!1,t)},t.prototype.enabled=function(t){return!!this._enabled[dp(t)]},t.prototype.traceTransitionStart=function(t){this.enabled(hp.TRANSITION)&&console.log(vp(t)+": Started  -> "+rp(t))},t.prototype.traceTransitionIgnored=function(t){this.enabled(hp.TRANSITION)&&console.log(vp(t)+": Ignored  <> "+rp(t))},t.prototype.traceHookInvocation=function(t,e,n){if(this.enabled(hp.HOOK)){var r=Nc("traceData.hookType")(n)||"internal",i=Nc("traceData.context.state.name")(n)||Nc("traceData.context")(n)||"unknown",o=Jd(t.registeredHook.callback);console.log(vp(e)+":   Hook -> "+r+" context: "+i+", "+Qd(200,o))}},t.prototype.traceHookResult=function(t,e,n){this.enabled(hp.HOOK)&&console.log(vp(e)+":   <- Hook returned: "+Qd(200,rp(t)))},t.prototype.traceResolvePath=function(t,e,n){this.enabled(hp.RESOLVE)&&console.log(vp(n)+":         Resolving "+t+" ("+e+")")},t.prototype.traceResolvableResolved=function(t,e){this.enabled(hp.RESOLVE)&&console.log(vp(e)+":               <- Resolved  "+t+" to: "+Qd(200,rp(t.data)))},t.prototype.traceError=function(t,e){this.enabled(hp.TRANSITION)&&console.log(vp(e)+": <- Rejected "+rp(e)+", reason: "+t)},t.prototype.traceSuccess=function(t,e){this.enabled(hp.TRANSITION)&&console.log(vp(e)+": <- Success  "+rp(e)+", final state: "+t.name)},t.prototype.traceUIViewEvent=function(t,e,n){void 0===n&&(n=""),this.enabled(hp.UIVIEW)&&console.log("ui-view: "+function(t,e){for(;e.length<30;)e+=" ";return e}(0,t)+" "+cp(e)+n)},t.prototype.traceUIViewConfigUpdated=function(t,e){this.enabled(hp.UIVIEW)&&this.traceUIViewEvent("Updating",t," with ViewConfig from context='"+e+"'")},t.prototype.traceUIViewFill=function(t,e){this.enabled(hp.UIVIEW)&&this.traceUIViewEvent("Fill",t," with: "+Qd(200,e))},t.prototype.traceViewSync=function(t){if(this.enabled(hp.VIEWCONFIG)){var e="uiview component fqn",n=t.map(function(t){var n,r=t.uiView,i=t.viewConfig,o=i&&i.viewDecl.$context.name+": ("+i.viewDecl.$name+")";return(n={})[e]=r&&r.fqn,n["view config state (view name)"]=o,n}).sort(function(t,n){return(t[e]||"").localeCompare(n[e]||"")});fp(n)}},t.prototype.traceViewServiceEvent=function(t,e){this.enabled(hp.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+function(t){var e=t.viewDecl;return"[View#"+t.$id+" from '"+(e.$context.name||"(root)")+"' state]: target ui-view: '"+e.$uiViewName+"@"+e.$uiViewContextAnchor+"'"}(e))},t.prototype.traceViewServiceUIViewEvent=function(t,e){this.enabled(hp.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+cp(e))},t}()),yp=function(){function t(t){this.pattern=/.*/,this.inherit=!0,hd(this,t)}return t.prototype.is=function(t,e){return!0},t.prototype.encode=function(t,e){return t},t.prototype.decode=function(t,e){return t},t.prototype.equals=function(t,e){return t==e},t.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},t.prototype.toString=function(){return"{ParamType:"+this.name+"}"},t.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},t.prototype.$asArray=function(t,e){if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new wp(this,t)},t}();function wp(t,e){var n=this;function r(t){return nd(t)?t:Kc(t)?[t]:[]}function i(t,n){return function(i){if(nd(i)&&0===i.length)return i;var o=Dd(r(i),t);return!0===n?0===Cd(o,function(t){return!t}).length:function(t){switch(t.length){case 0:return;case 1:return"auto"===e?t[0]:t;default:return t}}(o)}}["encode","decode","equals","$normalize"].forEach(function(e){var o=t[e].bind(t);n[e]=("equals"===e?function(t){return function(e,n){var i=r(e),o=r(n);if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(!t(i[a],o[a]))return!1;return!0}}:i)(o)}),hd(this,{dynamic:t.dynamic,name:t.name,pattern:t.pattern,inherit:t.inherit,raw:t.raw,is:i(t.is.bind(t),!0),$arrayMode:e})}var kp,_p=Object.prototype.hasOwnProperty,xp=function(t){return 0===["value","type","squash","array","dynamic"].filter(_p.bind(t||{})).length},Sp=function(t){return t[t.PATH=0]="PATH",t[t.SEARCH=1]="SEARCH",t[t.CONFIG=2]="CONFIG",t}({}),$p=function(){function t(t,e,n,r,i){var o=function(t,e,n){var r=Ed([n.dynamic,!1===n.reloadOnSearch&&e===Sp.SEARCH||void 0],Kc),i=Kc(r)?{dynamic:r}:{},o=function(t){function e(){return t.value}t=xp(t)?{value:t}:t,e.__cacheable=!0;var n=od(t.value)?t.value:e;return hd(t,{$$fn:n})}(n&&n.params&&n.params[t]);return hd(i,o)}(t,n,i);e=function(t,e,n,r,i){if(t.type&&e&&"string"!==e.name)throw new Error("Param '"+r+"' has two type configurations.");return t.type&&e&&"string"===e.name&&i.type(t.type)?i.type(t.type):e||(t.type?t.type instanceof yp?t.type:i.type(t.type):i.type(n===Sp.CONFIG?"any":n===Sp.PATH?"path":n===Sp.SEARCH?"query":"string"))}(o,e,n,t,r.paramTypes);var a,s,l=(a={array:n===Sp.SEARCH&&"auto"},s=t.match(/\[\]$/)?{array:!0}:{},hd(a,s,o).array);e=l?e.$asArray(l,n===Sp.SEARCH):e;var u=void 0!==o.value||n===Sp.SEARCH,c=Kc(o.dynamic)?!!o.dynamic:!!e.dynamic,d=Kc(o.raw)?!!o.raw:!!e.raw,p=function(t,e,n){var r=t.squash;if(!e||!1===r)return!1;if(!Kc(r)||null==r)return n;if(!0===r||td(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}(o,u,r.defaultSquashPolicy()),f=function(t,e,n,r){var i=[{from:"",to:n||e?void 0:""},{from:null,to:n||e?void 0:""}],o=nd(t.replace)?t.replace:[];td(r)&&o.push({from:r,to:void 0});var a=Dd(o,jc("from"));return Cd(i,function(t){return-1===a.indexOf(t.from)}).concat(o)}(o,l,u,p),h=Kc(o.inherit)?!!o.inherit:!!e.inherit;hd(this,{id:t,type:e,location:n,isOptional:u,dynamic:c,raw:d,squash:p,replace:f,inherit:h,array:l,config:o})}return t.values=function(t,e){void 0===e&&(e={});for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];n[o.id]=o.value(e[o.id])}return n},t.changed=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),t.filter(function(t){return!t.type.equals(e[t.id],n[t.id])})},t.equals=function(e,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),0===t.changed(e,n,r).length},t.validates=function(t,e){return void 0===e&&(e={}),t.map(function(t){return t.validates(e[t.id])}).reduce(Od,!0)},t.prototype.isDefaultValue=function(t){return this.isOptional&&this.type.equals(this.value(),t)},t.prototype.value=function(t){var e=this;return t=function(t){for(var n=0,r=e.replace;n<r.length;n++){var i=r[n];if(i.from===t)return i.to}return t}(t),Yc(t)?function(){if(e._defaultValueCache)return e._defaultValueCache.defaultValue;if(!ld.$injector)throw new Error("Injectable functions cannot be called at configuration time");var t=ld.$injector.invoke(e.config.$$fn);if(null!=t&&!e.type.is(t))throw new Error("Default value ("+t+") for parameter '"+e.id+"' is not an instance of ParamType ("+e.type.name+")");return e.config.$$fn.__cacheable&&(e._defaultValueCache={defaultValue:t}),t}():this.type.$normalize(t)},t.prototype.isSearch=function(){return this.location===Sp.SEARCH},t.prototype.validates=function(t){if((Yc(t)||null===t)&&this.isOptional)return!0;var e=this.type.$normalize(t);if(!this.type.is(e))return!1;var n=this.type.encode(e);return!(td(n)&&!this.type.pattern.exec(n))},t.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},t}(),Tp=function(){function t(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=$d(t.prototype,["hash","string","query","path","int","bool","date","json","any"]),this.types=yd(Dd(this.defaultTypes,function(t,e){return new yp(hd({name:e},t))}),{})}return t.prototype.dispose=function(){this.types={}},t.prototype.type=function(t,e,n){if(!Kc(e))return this.types[t];if(this.types.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return this.types[t]=new yp(hd({name:t},e)),n&&(this.typeQueue.push({name:t,def:n}),this.enqueue||this._flushTypeQueue()),this},t.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var t=this.typeQueue.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");hd(this.types[t.name],ld.$injector.invoke(t.def))}},t}();kp=function(t){var e=function(t){return null!=t?t.toString():t},n={encode:e,decode:e,is:Vc(String),pattern:/.*/,equals:function(t,e){return t==e}};return hd({},n,t)},hd(Tp.prototype,{string:kp({}),path:kp({pattern:/[^\/]*/}),query:kp({}),hash:kp({inherit:!1}),int:kp({decode:function(t){return parseInt(t,10)},is:function(t){return!Qc(t)&&this.decode(t.toString())===t},pattern:/-?\d+/}),bool:kp({encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:Vc(Boolean),pattern:/0|1/}),date:kp({encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):void 0},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):void 0},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return["getFullYear","getMonth","getDate"].reduce(function(n,r){return n&&t[r]()===e[r]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:kp({encode:pd,decode:dd,is:Vc(Object),equals:md,pattern:/[^\/]*/}),any:kp({encode:gd,decode:gd,is:function(){return!0},equals:md})});var Cp=function(){function t(t){void 0===t&&(t={}),hd(this,t)}return t.prototype.$inherit=function(t,e,n){var r,i=function(t,e){var n=[];for(var r in t.path){if(t.path[r]!==e.path[r])break;n.push(t.path[r])}return n}(e,n),o={},a=[];for(var s in i)if(i[s]&&i[s].params&&(r=Object.keys(i[s].params)).length)for(var l in r)a.indexOf(r[l])>=0||(a.push(r[l]),o[r[l]]=this[r[l]]);return hd({},o,t)},t}(),Ep=function(){function t(e){if(e instanceof t){var n=e;this.state=n.state,this.paramSchema=n.paramSchema.slice(),this.paramValues=hd({},n.paramValues),this.resolvables=n.resolvables.slice(),this.views=n.views&&n.views.slice()}else{var r=e;this.state=r,this.paramSchema=r.parameters({inherit:!1}),this.paramValues={},this.resolvables=r.resolvables.map(function(t){return t.clone()})}}return t.prototype.clone=function(){return new t(this)},t.prototype.applyRawParams=function(t){return this.paramValues=this.paramSchema.reduce(function(e,n){return Vd(e,[(r=n).id,r.value(t[r.id])]);var r},{}),this},t.prototype.parameter=function(t){return Ed(this.paramSchema,Ic("id",t))},t.prototype.equals=function(t,e){var n=this.diff(t,e);return n&&0===n.length},t.prototype.diff=function(t,e){if(this.state!==t.state)return!1;var n=e?e(this):this.paramSchema;return $p.changed(n,this.paramValues,t.paramValues)},t.clone=function(t){return t.clone()},t}(),Ap=function(){function t(t,e,n,r){this._stateRegistry=t,this._identifier=e,this._identifier=e,this._params=hd({},n||{}),this._options=hd({},r||{}),this._definition=t.matcher.find(e,this._options.relative)}return t.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},t.prototype.identifier=function(){return this._identifier},t.prototype.params=function(){return this._params},t.prototype.$state=function(){return this._definition},t.prototype.state=function(){return this._definition&&this._definition.self},t.prototype.options=function(){return this._options},t.prototype.exists=function(){return!(!this._definition||!this._definition.self)},t.prototype.valid=function(){return!this.error()},t.prototype.error=function(){var t=this.options().relative;if(!this._definition&&t){var e=t.name?t.name:t;return"Could not resolve '"+this.name()+"' from state '"+e+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},t.prototype.toString=function(){return"'"+this.name()+"'"+rp(this.params())},t.prototype.withState=function(e){return new t(this._stateRegistry,e,this._params,this._options)},t.prototype.withParams=function(e,n){void 0===n&&(n=!1);var r=n?e:hd({},this._params,e);return new t(this._stateRegistry,this._identifier,r,this._options)},t.prototype.withOptions=function(e,n){void 0===n&&(n=!1);var r=n?e:hd({},this._options,e);return new t(this._stateRegistry,this._identifier,this._params,r)},t.isDef=function(t){return t&&t.state&&(td(t.state)||td(t.state.name))},t}(),Dp=function(){function t(){}return t.makeTargetState=function(t,e){var n=Bd(e).state;return new Ap(t,n,e.map(jc("paramValues")).reduce(Sd,{}),{})},t.buildPath=function(t){var e=t.params();return t.$state().path.map(function(t){return new Ep(t).applyRawParams(e)})},t.buildToPath=function(e,n){var r=t.buildPath(n);return n.options().inherit?t.inheritParams(e,r,Object.keys(n.params())):r},t.applyViewConfigs=function(e,n,r){n.filter(function(t){return wd(r,t.state)}).forEach(function(r){var i=Pd(r.state.views||{}),o=t.subPath(n,function(t){return t===r}),a=i.map(function(t){return e.createViewConfig(o,t)});r.views=a.reduce(Rd,[])})},t.inheritParams=function(t,e,n){void 0===n&&(n=[]);var r=t.map(function(t){return t.paramSchema}).reduce(Rd,[]).filter(function(t){return!t.inherit}).map(jc("id"));return e.map(function(e){var i=hd({},e&&e.paramValues),o=$d(i,n);i=Td(i,n);var a,s=Td((a=Ed(t,Ic("state",e.state)),hd({},a&&a.paramValues)||{}),r),l=hd(i,s,o);return new Ep(e.state).applyRawParams(l)})},t.treeChanges=function(e,n,r){for(var i,o,a,s,l=Math.min(e.length,n.length),u=0;u<l&&e[u].state!==r&&e[u].equals(n[u],t.nonDynamicParams);)u++;o=(i=e).slice(0,u),a=i.slice(u);var c=o.map(function(t,e){var r=t.clone();return r.paramValues=n[e].paramValues,r});return s=n.slice(u),{from:i,to:c.concat(s),retained:o,retainedWithToParams:c,exiting:a,entering:s}},t.matching=function(t,e,n){var r=!1;return Ld(t,e).reduce(function(t,e){var i=e[0];return(r=r||!i.equals(e[1],n))?t:t.concat(i)},[])},t.equals=function(e,n,r){return e.length===n.length&&t.matching(e,n,r).length===e.length},t.subPath=function(t,e){var n=Ed(t,e),r=t.indexOf(n);return-1===r?void 0:t.slice(0,r+1)},t.nonDynamicParams=function(t){return t.state.parameters({inherit:!1}).filter(function(t){return!t.dynamic})},t.paramValues=function(t){return t.reduce(function(t,e){return hd(t,e.paramValues)},{})},t}(),Pp=function(){function t(e,n,r,i,o){if(this.resolved=!1,this.promise=void 0,e instanceof t)hd(this,e);else if(Xc(n)){if(Qc(e))throw new Error("new Resolvable(): token argument is required");if(!Xc(n))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=e,this.policy=i,this.resolveFn=n,this.deps=r||[],this.data=o,this.resolved=void 0!==o,this.promise=this.resolved?ld.$q.when(this.data):void 0}else if(ed(e)&&e.token&&(e.hasOwnProperty("resolveFn")||e.hasOwnProperty("data")))return new t(e.token,e.resolveFn,e.deps,e.policy,e.data)}return t.prototype.getPolicy=function(t){var e=this.policy||{},n=t&&t.resolvePolicy||{};return{when:e.when||n.when||"LAZY",async:e.async||n.async||"WAIT"}},t.prototype.resolve=function(t,e){var n=this,r=ld.$q,i=t.findNode(this),o="RXWAIT"===this.getPolicy(i&&i.state).async?function(t){var e=t.cache(1);return e.take(1).toPromise().then(function(){return e})}:gd;return this.promise=r.when().then(function(){return r.all(t.getDependencies(n).map(function(n){return n.get(t,e)}))}).then(function(t){return n.resolveFn.apply(null,t)}).then(o).then(function(t){return n.data=t,n.resolved=!0,n.resolveFn=null,bp.traceResolvableResolved(n,e),n.data})},t.prototype.get=function(t,e){return this.promise||this.resolve(t,e)},t.prototype.toString=function(){return"Resolvable(token: "+rp(this.token)+", requires: ["+this.deps.map(rp)+"])"},t.prototype.clone=function(){return new t(this)},t.fromData=function(e,n){return new t(e,function(){return n},null,null,n)},t}(),Op=["EAGER","LAZY"],Mp=["EAGER"],Rp="Native Injector",jp=function(){function t(t){this._path=t}return t.prototype.getTokens=function(){return this._path.reduce(function(t,e){return t.concat(e.resolvables.map(function(t){return t.token}))},[]).reduce(Nd,[])},t.prototype.getResolvable=function(t){return Bd(this._path.map(function(t){return t.resolvables}).reduce(Rd,[]).filter(function(e){return e.token===t}))},t.prototype.getPolicy=function(t){var e=this.findNode(t);return t.getPolicy(e.state)},t.prototype.subContext=function(e){return new t(Dp.subPath(this._path,function(t){return t.state===e}))},t.prototype.addResolvables=function(t,e){var n=Ed(this._path,Ic("state",e)),r=t.map(function(t){return t.token});n.resolvables=n.resolvables.filter(function(t){return-1===r.indexOf(t.token)}).concat(t)},t.prototype.resolvePath=function(t,e){var n=this;void 0===t&&(t="LAZY");var r="EAGER"===(wd(Op,t)?t:"LAZY")?Mp:Op;bp.traceResolvePath(this._path,t,e);var i=function(t,e){return function(r){return wd(t,n.getPolicy(r)[e])}},o=this._path.reduce(function(t,o){var a=o.resolvables.filter(i(r,"when")),s=a.filter(i(["NOWAIT"],"async")),l=a.filter(Fc(i(["NOWAIT"],"async"))),u=n.subContext(o.state),c=function(t){return t.get(u,e).then(function(e){return{token:t.token,value:e}})};return s.forEach(c),t.concat(l.map(c))},[]);return ld.$q.all(o)},t.prototype.injector=function(){return this._injector||(this._injector=new Ip(this))},t.prototype.findNode=function(t){return Ed(this._path,function(e){return wd(e.resolvables,t)})},t.prototype.getDependencies=function(t){var e=this,n=this.findNode(t),r=(Dp.subPath(this._path,function(t){return t===n})||this._path).reduce(function(t,e){return t.concat(e.resolvables)},[]).filter(function(e){return e!==t});return t.deps.map(function(t){var n=r.filter(function(e){return e.token===t});if(n.length)return Bd(n);var i=e.injector().getNative(t);if(Yc(i))throw new Error("Could not find Dependency Injection token: "+rp(t));return new Pp(t,function(){return i},[],i)})},t}(),Ip=function(){function t(t){this.context=t,this.native=this.get(Rp)||ld.$injector}return t.prototype.get=function(t){var e=this.context.getResolvable(t);if(e){if("NOWAIT"===this.context.getPolicy(e).async)return e.get(this.context);if(!e.resolved)throw new Error("Resolvable async .get() not complete:"+rp(e.token));return e.data}return this.getNative(t)},t.prototype.getAsync=function(t){var e=this.context.getResolvable(t);return e?e.get(this.context):ld.$q.when(this.native.get(t))},t.prototype.getNative=function(t){return this.native&&this.native.get(t)},t}();function Np(t){return t.name}function Fp(t){return t.self.$$state=function(){return t},t.self}function Up(t){return t.parent&&t.parent.data&&(t.data=t.self.data=yd(t.parent.data,t.data)),t.data}var Lp=function(t,e){return function(n){var r=n.self;if(r&&r.url&&r.name&&r.name.match(/\.\*\*$/)){var i={};Hd(r,i),i.url+="{remainder:any}",r=i}var o=n.parent,a=function(t){if(!td(t))return!1;var e="^"===t.charAt(0);return{val:e?t.substring(1):t,root:e}}(r.url),s=a?t.compile(a.val,{state:r}):r.url;if(!s)return null;if(!t.isMatcher(s))throw new Error("Invalid url '"+s+"' in state '"+n+"'");return a&&a.root?s:(o&&o.navigable||e()).url.append(s)}},Vp=function(t){return function(e){return!t(e)&&e.url?e:e.parent?e.parent.navigable:null}},Bp=function(t){return function(e){var n=e.url&&e.url.parameters({inherit:!1})||[],r=Pd(Ad(Td(e.params||{},n.map(jc("id"))),function(n,r){return t.fromConfig(r,null,e.self)}));return n.concat(r).map(function(t){return[t.id,t]}).reduce(Vd,{})}};function Hp(t){return t.parent?t.parent.path.concat(t):[t]}function qp(t){var e=t.parent?hd({},t.parent.includes):{};return e[t.name]=!0,e}function zp(t){var e,n,r=function(t){return t.provide||t.token},i=Hc([[jc("resolveFn"),function(t){return new Pp(r(t),t.resolveFn,t.deps,t.policy)}],[jc("useFactory"),function(t){return new Pp(r(t),t.useFactory,t.deps||t.dependencies,t.policy)}],[jc("useClass"),function(t){return new Pp(r(t),function(){return new t.useClass},[],t.policy)}],[jc("useValue"),function(t){return new Pp(r(t),function(){return t.useValue},[],t.policy,t.useValue)}],[jc("useExisting"),function(t){return new Pp(r(t),gd,[t.useExisting],t.policy)}]]),o=Hc([[Rc(jc("val"),td),function(t){return new Pp(t.token,gd,[t.val],t.policy)}],[Rc(jc("val"),nd),function(t){return new Pp(t.token,Bd(t.val),t.val.slice(0,-1),t.policy)}],[Rc(jc("val"),Xc),function(t){return new Pp(t.token,t.val,(n=ld.$injector,(e=t.val).$inject||n&&n.annotate(e,n.strictDi)||"deferred"),t.policy);var e,n}]]),a=Hc([[Vc(Pp),function(t){return t}],[function(t){return!(!t.token||!t.resolveFn)},i],[function(t){return!(!t.provide&&!t.token||!(t.useValue||t.useFactory||t.useExisting||t.useClass))},i],[function(t){return!!(t&&t.val&&(td(t.val)||nd(t.val)||Xc(t.val)))},o],[Bc(!0),function(t){throw new Error("Invalid resolve value: "+rp(t))}]]),s=t.resolve;return(nd(s)?s:(e=s,n=t.resolvePolicy||{},Object.keys(e||{}).map(function(t){return{token:t,val:e[t],deps:void 0,policy:n[t]}}))).map(a)}var Gp=function(){function t(t,e){this.matcher=t;var n=this,r=function(){return t.find("")},i=function(t){return""===t.name};this.builders={name:[Np],self:[Fp],parent:[function(e){return i(e)?null:t.find(n.parentName(e))||r()}],data:[Up],url:[Lp(e,r)],navigable:[Vp(i)],params:[Bp(e.paramFactory)],views:[],path:[Hp],includes:[qp],resolvables:[zp]}}return t.prototype.builder=function(t,e){var n=this.builders,r=n[t]||[];return td(t)&&!Kc(e)?r.length>1?r:r[0]:td(t)&&Xc(e)?(n[t]=r,n[t].push(e),function(){return n[t].splice(n[t].indexOf(e,1))&&null}):void 0},t.prototype.build=function(t){var e=this.matcher,n=this.builders,r=this.parentName(t);if(r&&!e.find(r,void 0,!1))return null;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i].reduce(function(t,e){return function(n){return e(n,t)}},vd);t[i]=o(t)}return t},t.prototype.parentName=function(t){var e=t.name||"",n=e.split(".");if("**"===n.pop()&&n.pop(),n.length){if(t.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+e+")");return n.join(".")}return t.parent?td(t.parent)?t.parent:t.parent.name:""},t.prototype.name=function(t){var e=t.name;if(-1!==e.indexOf(".")||!t.parent)return e;var n=td(t.parent)?t.parent:t.parent.name;return n?n+"."+e:e},t}(),Wp=function(){function t(e){return t.create(e||{})}return t.create=function(e){e=t.isStateClass(e)?new e:e;var n=yd(yd(e,t.prototype));return e.$$state=function(){return n},n.self=e,n.__stateObjectCache={nameGlob:Gd.fromString(n.name)},n},t.prototype.is=function(t){return this===t||this.self===t||this.fqn()===t},t.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var t=this.parent.fqn();return t?t+"."+this.name:this.name},t.prototype.root=function(){return this.parent&&this.parent.root()||this},t.prototype.parameters=function(t){return((t=xd(t,{inherit:!0,matchingKeys:null})).inherit&&this.parent&&this.parent.parameters()||[]).concat(Pd(this.params)).filter(function(e){return!t.matchingKeys||t.matchingKeys.hasOwnProperty(e.id)})},t.prototype.parameter=function(t,e){return void 0===e&&(e={}),this.url&&this.url.parameter(t,e)||Ed(Pd(this.params),Ic("id",t))||e.inherit&&this.parent&&this.parent.parameter(t)},t.prototype.toString=function(){return this.fqn()},t.isStateClass=function(t){return Xc(t)&&!0===t.__uiRouterState},t.isState=function(t){return ed(t.__stateObjectCache)},t}(),Yp=function(){function t(t){this._states=t}return t.prototype.isRelative=function(t){return 0===(t=t||"").indexOf(".")||0===t.indexOf("^")},t.prototype.find=function(t,e,n){if(void 0===n&&(n=!0),t||""===t){var r=td(t),i=r?t:t.name;this.isRelative(i)&&(i=this.resolvePath(i,e));var o=this._states[i];if(o&&(r||!(r||o!==t&&o.self!==t)))return o;if(r&&n){var a=Pd(this._states).filter(function(t){return t.__stateObjectCache.nameGlob&&t.__stateObjectCache.nameGlob.matches(i)});return a.length>1&&console.log("stateMatcher.find: Found multiple matches for "+i+" using glob: ",a.map(function(t){return t.name})),a[0]}}},t.prototype.resolvePath=function(t,e){if(!e)throw new Error("No reference point given for path '"+t+"'");for(var n=this.find(e),r=t.split("."),i=r.length,o=0,a=n;o<i;o++)if(""!==r[o]||0!==o){if("^"!==r[o])break;if(!a.parent)throw new Error("Path '"+t+"' not valid for state '"+n.name+"'");a=a.parent}else a=n;var s=r.slice(o).join(".");return a.name+(a.name&&s?".":"")+s},t}(),Kp=function(){function t(t,e,n,r){this.router=t,this.states=e,this.builder=n,this.listeners=r,this.queue=[]}return t.prototype.dispose=function(){this.queue=[]},t.prototype.register=function(t){var e=this.queue,n=Wp.create(t),r=n.name;if(!td(r))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(r)||wd(e.map(jc("name")),r))throw new Error("State '"+r+"' is already defined");return e.push(n),this.flush(),n},t.prototype.flush=function(){for(var t=this,e=this.queue,n=this.states,r=this.builder,i=[],o=[],a={},s=function(e){return t.states.hasOwnProperty(e)&&t.states[e]},l=function(){i.length&&t.listeners.forEach(function(t){return t("registered",i.map(function(t){return t.self}))})};e.length>0;){var u=e.shift(),c=u.name,d=r.build(u),p=o.indexOf(u);if(d){var f=s(c);if(f&&f.name===c)throw new Error("State '"+c+"' is already defined");var h=s(c+".**");h&&this.router.stateRegistry.deregister(h),n[c]=u,this.attachRoute(u),p>=0&&o.splice(p,1),i.push(u)}else{var m=a[c];if(a[c]=e.length,p>=0&&m===e.length)return e.push(u),l(),n;p<0&&o.push(u),e.push(u)}}return l(),n},t.prototype.attachRoute=function(t){if(!t.abstract&&t.url){var e=this.router.urlService.rules;e.rule(e.urlRuleFactory.create(t))}},t}(),Zp=function(){function t(t){this.router=t,this.states={},this.listeners=[],this.matcher=new Yp(this.states),this.builder=new Gp(this.matcher,t.urlMatcherFactory),this.stateQueue=new Kp(t,this.states,this.builder,this.listeners),this._registerRoot()}return t.prototype._registerRoot=function(){(this._root=this.stateQueue.register({name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0})).navigable=null},t.prototype.dispose=function(){var t=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(e){return t.get(e)&&t.deregister(e)})},t.prototype.onStatesChanged=function(t){return this.listeners.push(t),(function(){kd(this.listeners)(t)}).bind(this)},t.prototype.root=function(){return this._root},t.prototype.register=function(t){return this.stateQueue.register(t)},t.prototype._deregisterTree=function(t){var e=this,n=this.get().map(function(t){return t.$$state()}),r=function(t){var e=n.filter(function(e){return-1!==t.indexOf(e.parent)});return 0===e.length?e:e.concat(r(e))},i=r([t]),o=[t].concat(i).reverse();return o.forEach(function(t){var n=e.router.urlService.rules;n.rules().filter(Ic("state",t)).forEach(function(t){return n.removeRule(t)}),delete e.states[t.name]}),o},t.prototype.deregister=function(t){var e=this.get(t);if(!e)throw new Error("Can't deregister state; not found: "+t);var n=this._deregisterTree(e.$$state());return this.listeners.forEach(function(t){return t("deregistered",n.map(function(t){return t.self}))}),n},t.prototype.get=function(t,e){var n=this;if(0===arguments.length)return Object.keys(this.states).map(function(t){return n.states[t].self});var r=this.matcher.find(t,e);return r&&r.self||null},t.prototype.decorator=function(t,e){return this.builder.builder(t,e)},t}(),Qp=function(t){return t[t.CREATE=0]="CREATE",t[t.BEFORE=1]="BEFORE",t[t.RUN=2]="RUN",t[t.SUCCESS=3]="SUCCESS",t[t.ERROR=4]="ERROR",t}({}),Xp=function(t){return t[t.TRANSITION=0]="TRANSITION",t[t.STATE=1]="STATE",t}({}),Jp={current:vd,transition:null,traceData:{},bind:null},tf=function(){function t(t,e,n,r){var i=this;this.transition=t,this.stateContext=e,this.registeredHook=n,this.options=r,this.isSuperseded=function(){return i.type.hookPhase===Qp.RUN&&!i.options.transition.isActive()},this.options=xd(r,Jp),this.type=n.eventType}return t.chain=function(t,e){return t.reduce(function(t,e){return t.then(function(){return e.invokeHook()})},e||ld.$q.when())},t.invokeHooks=function(e,n){for(var r=0;r<e.length;r++){var i=e[r].invokeHook();if(ad(i)){var o=e.slice(r+1);return t.chain(o,i).then(n)}}return n()},t.runAllHooks=function(t){t.forEach(function(t){return t.invokeHook()})},t.prototype.logError=function(t){this.transition.router.stateService.defaultErrorHandler()(t)},t.prototype.invokeHook=function(){var t=this,e=this.registeredHook;if(!e._deregistered){var n=this.getNotCurrentRejection();if(n)return n;var r=this.options;bp.traceHookInvocation(this,this.transition,r);var i=function(n){return e.eventType.getErrorHandler(t)(n)},o=function(n){return e.eventType.getResultHandler(t)(n)};try{var a=e.callback.call(r.bind,t.transition,t.stateContext);return!this.type.synchronous&&ad(a)?a.catch(function(t){return Zd.normalize(t).toPromise()}).then(o,i):o(a)}catch(s){return i(Zd.normalize(s))}finally{e.invokeLimit&&++e.invokeCount>=e.invokeLimit&&e.deregister()}}},t.prototype.handleHookResult=function(t){var e=this;return this.getNotCurrentRejection()||(ad(t)?t.then(function(t){return e.handleHookResult(t)}):(bp.traceHookResult(t,this.transition,this.options),!1===t?Zd.aborted("Hook aborted transition").toPromise():Vc(Ap)(t)?Zd.redirected(t).toPromise():void 0))},t.prototype.getNotCurrentRejection=function(){var t=this.transition.router;return t._disposed?Zd.aborted("UIRouter instance #"+t.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?Zd.aborted().toPromise():this.isSuperseded()?Zd.superseded(this.options.current()).toPromise():void 0},t.prototype.toString=function(){var t=this.options,e=this.registeredHook;return(Nc("traceData.hookType")(t)||"internal")+" context: "+(Nc("traceData.context.state.name")(t)||Nc("traceData.context")(t)||"unknown")+", "+Qd(200,tp(e.callback))},t.HANDLE_RESULT=function(t){return function(e){return t.handleHookResult(e)}},t.LOG_REJECTED_RESULT=function(t){return function(e){ad(e)&&e.catch(function(e){return t.logError(Zd.normalize(e))})}},t.LOG_ERROR=function(t){return function(e){return t.logError(e)}},t.REJECT_ERROR=function(t){return function(t){return zd(t)}},t.THROW_ERROR=function(t){return function(t){throw t}},t}();function ef(t,e,n){var r=td(e)?[e]:e;return!!(Xc(r)?r:function(t){for(var e=r,n=0;n<e.length;n++){var i=new Gd(e[n]);if(i&&i.matches(t.name)||!i&&e[n]===t.name)return!0}return!1})(t,n)}var nf=function(){function t(t,e,n,r,i,o){void 0===o&&(o={}),this.tranSvc=t,this.eventType=e,this.callback=n,this.matchCriteria=r,this.removeHookFromRegistry=i,this.invokeCount=0,this._deregistered=!1,this.priority=o.priority||0,this.bind=o.bind||null,this.invokeLimit=o.invokeLimit}return t.prototype._matchingNodes=function(t,e,n){if(!0===e)return t;var r=t.filter(function(t){return ef(t.state,e,n)});return r.length?r:null},t.prototype._getDefaultMatchCriteria=function(){return Ad(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},t.prototype._getMatchingNodes=function(t,e){var n=this,r=hd(this._getDefaultMatchCriteria(),this.matchCriteria);return Pd(this.tranSvc._pluginapi._getPathTypes()).reduce(function(i,o){var a=t[o.name]||[],s=o.scope===Xp.STATE?a:[Bd(a)];return i[o.name]=n._matchingNodes(s,r[o.name],e),i},{})},t.prototype.matches=function(t,e){var n=this._getMatchingNodes(t,e);return Pd(n).every(gd)?n:null},t.prototype.deregister=function(){this.removeHookFromRegistry(this),this._deregistered=!0},t}();function rf(t,e,n){var r=(t._registeredHooks=t._registeredHooks||{})[n.name]=[],i=kd(r);function o(t,o,a){void 0===a&&(a={});var s=new nf(e,n,o,t,i,a);return r.push(s),s.deregister.bind(s)}return t[n.name]=o,o}var of=function(){function t(t){this.transition=t}return t.prototype.buildHooksForPhase=function(t){var e=this;return this.transition.router.transitionService._pluginapi._getEvents(t).map(function(t){return e.buildHooks(t)}).reduce(Rd,[]).filter(gd)},t.prototype.buildHooks=function(t){var e=this.transition,n=e.treeChanges(),r=this.getMatchingHooks(t,n,e);if(!r)return[];var i,o={transition:e,current:e.options().current};return r.map(function(r){return r.matches(n,e)[t.criteriaMatchPath.name].map(function(n){var i=hd({bind:r.bind,traceData:{hookType:t.name,context:n}},o),a=new tf(e,t.criteriaMatchPath.scope===Xp.STATE?n.state.self:null,r,i);return{hook:r,node:n,transitionHook:a}})}).reduce(Rd,[]).sort((i=t.reverseSort,void 0===i&&(i=!1),function(t,e){var n=(t.node.state.path.length-e.node.state.path.length)*(i?-1:1);return 0!==n?n:e.hook.priority-t.hook.priority})).map(function(t){return t.transitionHook})},t.prototype.getMatchingHooks=function(t,e,n){var r=this.transition.router.transitionService;return(t.hookPhase===Qp.CREATE?[r]:[this.transition,r]).map(function(e){return e.getHooks(t.name)}).filter(Ud(nd,"broken event named: "+t.name)).reduce(Rd,[]).filter(function(t){return t.matches(e,n)})},t}(),af=jc("self"),sf=function(){function t(t,e,n){var r=this;if(this._deferred=ld.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new of(this),this.isActive=function(){return r.router.globals.transition===r},this.router=n,this._targetState=e,!e.valid())throw new Error(e.error());this._options=hd({current:Bc(this)},e.options()),this.$id=n.transitionService._transitionCount++;var i=Dp.buildToPath(t,e);this._treeChanges=Dp.treeChanges(t,i,this._options.reloadState),this.createTransitionHookRegFns();var o=this._hookBuilder.buildHooksForPhase(Qp.CREATE);tf.invokeHooks(o,function(){return null}),this.applyViewConfigs(n)}return t.prototype.onBefore=function(t,e,n){},t.prototype.onStart=function(t,e,n){},t.prototype.onExit=function(t,e,n){},t.prototype.onRetain=function(t,e,n){},t.prototype.onEnter=function(t,e,n){},t.prototype.onFinish=function(t,e,n){},t.prototype.onSuccess=function(t,e,n){},t.prototype.onError=function(t,e,n){},t.prototype.createTransitionHookRegFns=function(){var t=this;this.router.transitionService._pluginapi._getEvents().filter(function(t){return t.hookPhase!==Qp.CREATE}).forEach(function(e){return rf(t,t.router.transitionService,e)})},t.prototype.getHooks=function(t){return this._registeredHooks[t]},t.prototype.applyViewConfigs=function(t){var e=this._treeChanges.entering.map(function(t){return t.state});Dp.applyViewConfigs(t.transitionService.$view,this._treeChanges.to,e)},t.prototype.$from=function(){return Bd(this._treeChanges.from).state},t.prototype.$to=function(){return Bd(this._treeChanges.to).state},t.prototype.from=function(){return this.$from().self},t.prototype.to=function(){return this.$to().self},t.prototype.targetState=function(){return this._targetState},t.prototype.is=function(e){return e instanceof t?this.is({to:e.$to().name,from:e.$from().name}):!(e.to&&!ef(this.$to(),e.to,this)||e.from&&!ef(this.$from(),e.from,this))},t.prototype.params=function(t){return void 0===t&&(t="to"),Object.freeze(this._treeChanges[t].map(jc("paramValues")).reduce(Sd,{}))},t.prototype.paramsChanged=function(){var t=this.params("from"),e=this.params("to"),n=[].concat(this._treeChanges.to).concat(this._treeChanges.from).map(function(t){return t.paramSchema}).reduce(jd,[]).reduce(Nd,[]);return $p.changed(n,t,e).reduce(function(t,n){return t[n.id]=e[n.id],t},{})},t.prototype.injector=function(t,e){void 0===e&&(e="to");var n=this._treeChanges[e];return t&&(n=Dp.subPath(n,function(e){return e.state===t||e.state.name===t})),new jp(n).injector()},t.prototype.getResolveTokens=function(t){return void 0===t&&(t="to"),new jp(this._treeChanges[t]).getTokens()},t.prototype.addResolvable=function(t,e){void 0===e&&(e=""),t=Vc(Pp)(t)?t:new Pp(t);var n="string"==typeof e?e:e.name,r=this._treeChanges.to,i=Ed(r,function(t){return t.state.name===n});new jp(r).addResolvables([t],i.state)},t.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},t.prototype.originalTransition=function(){var t=this.redirectedFrom();return t&&t.originalTransition()||this},t.prototype.options=function(){return this._options},t.prototype.entering=function(){return Dd(this._treeChanges.entering,jc("state")).map(af)},t.prototype.exiting=function(){return Dd(this._treeChanges.exiting,jc("state")).map(af).reverse()},t.prototype.retained=function(){return Dd(this._treeChanges.retained,jc("state")).map(af)},t.prototype.views=function(t,e){void 0===t&&(t="entering");var n=this._treeChanges[t];return(n=e?n.filter(Ic("state",e)):n).map(jc("views")).filter(gd).reduce(Rd,[])},t.prototype.treeChanges=function(t){return t?this._treeChanges[t]:this._treeChanges},t.prototype.redirect=function(t){for(var e=1,n=this;null!=(n=n.redirectedFrom());)if(++e>20)throw new Error("Too many consecutive Transition redirects (20+)");var r={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==t.options().location&&(r.location="replace");var i=hd({},this.options(),t.options(),r);t=t.withOptions(i,!0);var o,a=this.router.transitionService.create(this._treeChanges.from,t),s=this._treeChanges.entering;return Dp.matching(a._treeChanges.entering,s,Dp.nonDynamicParams).filter(Fc((o=t.options().reloadState,function(t){return o&&t.state.includes[o.name]}))).forEach(function(t,e){t.resolvables=s[e].resolvables}),a},t.prototype._changedParams=function(){var t=this._treeChanges;if(!(this._options.reload||t.exiting.length||t.entering.length||t.to.length!==t.from.length||Ld(t.to,t.from).map(function(t){return t[0].state!==t[1].state}).reduce(Md,!1))){var e=t.to.map(function(t){return t.paramSchema}),n=[t.to,t.from].map(function(t){return t.map(function(t){return t.paramValues})});return Ld(e,n[0],n[1]).map(function(t){return $p.changed(t[0],t[1],t[2])}).reduce(Rd,[])}},t.prototype.dynamic=function(){var t=this._changedParams();return!!t&&t.map(function(t){return t.dynamic}).reduce(Md,!1)},t.prototype.ignored=function(){return!!this._ignoredReason()},t.prototype._ignoredReason=function(){var t=this.router.globals.transition,e=this._options.reloadState,n=function(t,n){if(t.length!==n.length)return!1;var r=Dp.matching(t,n);return t.length===r.filter(function(t){return!e||!t.state.includes[e.name]}).length},r=this.treeChanges(),i=t&&t.treeChanges();return i&&n(i.to,r.to)&&n(i.exiting,r.exiting)?"SameAsPending":0===r.exiting.length&&0===r.entering.length&&n(r.from,r.to)?"SameAsCurrent":void 0},t.prototype.run=function(){var t=this,e=tf.runAllHooks,n=function(e){return t._hookBuilder.buildHooksForPhase(e)},r=n(Qp.BEFORE);return tf.invokeHooks(r,function(){var e=t.router.globals;return e.lastStartedTransitionId=t.$id,e.transition=t,e.transitionHistory.enqueue(t),bp.traceTransitionStart(t),ld.$q.when(void 0)}).then(function(){var t=n(Qp.RUN);return tf.invokeHooks(t,function(){return ld.$q.when(void 0)})}).then(function(){bp.traceSuccess(t.$to(),t),t.success=!0,t._deferred.resolve(t.to()),e(n(Qp.SUCCESS))},function(r){bp.traceError(r,t),t.success=!1,t._deferred.reject(r),t._error=r,e(n(Qp.ERROR))}),this.promise},t.prototype.valid=function(){return!this.error()||void 0!==this.success},t.prototype.abort=function(){Yc(this.success)&&(this._aborted=!0)},t.prototype.error=function(){var t=this.$to();if(t.self.abstract)return Zd.invalid("Cannot transition to abstract state '"+t.name+"'");var e=t.parameters(),n=this.params(),r=e.filter(function(t){return!t.validates(n[t.id])});if(r.length){var i=r.map(function(t){return"["+t.id+":"+rp(n[t.id])+"]"}).join(", ");return Zd.invalid("The following parameter values are not valid for state '"+t.name+"': "+i)}return!1===this.success?this._error:void 0},t.prototype.toString=function(){var t=this.from(),e=this.to(),n=function(t){return null!=t["#"]?t:Td(t,["#"])};return"Transition#"+this.$id+"( '"+(ed(t)?t.name:t)+"'"+rp(n(this._treeChanges.from.map(jc("paramValues")).reduce(Sd,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(ed(e)?e.name:e)+"'"+rp(n(this.params()))+" )"},t.diToken=t,t}();function lf(t,e){var n=["",""],r=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return r;switch(e.squash){case!1:n=["(",")"+(e.isOptional?"?":"")];break;case!0:r=r.replace(/\/$/,""),n=["(?:/(",")|/)?"];break;default:n=["("+e.squash+"|",")?"]}return r+n[0]+e.type.pattern.source+n[1]}var uf,cf,df=(uf=new RegExp("(/)","g"),function(t){return t.split(uf).filter(gd)}),pf={state:{params:{}},strict:!0,caseInsensitive:!0},ff=function(){function t(e,n,r,i){var o=this;this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.config=i=xd(i,pf),this.pattern=e;for(var a,s,l,u=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,c=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,d=[],p=0,f=function(n){if(!t.nameValidator.test(n))throw new Error("Invalid parameter name '"+n+"' in pattern '"+e+"'");if(Ed(o._params,Ic("id",n)))throw new Error("Duplicate parameter name '"+n+"' in pattern '"+e+"'")},h=function(t,r){var i,a=r?t[4]:t[4]||("*"===t[1]?"[\\s\\S]*":null);return{id:t[2]||t[3],regexp:a,segment:e.substring(p,t.index),type:a?n.type(a)||(i=a,yd(n.type(r?"query":"path"),{pattern:new RegExp(i,o.config.caseInsensitive?"i":void 0)})):null}};(a=u.exec(e))&&!((s=h(a,!1)).segment.indexOf("?")>=0);)f(s.id),this._params.push(r.fromPath(s.id,s.type,i.state)),this._segments.push(s.segment),d.push([s.segment,Bd(this._params)]),p=u.lastIndex;var m=(l=e.substring(p)).indexOf("?");if(m>=0){var g=l.substring(m);if(l=l.substring(0,m),g.length>0)for(p=0;a=c.exec(g);)f((s=h(a,!0)).id),this._params.push(r.fromSearch(s.id,s.type,i.state)),p=u.lastIndex}this._segments.push(l),this._compiled=d.map(function(t){return lf.apply(null,t)}).concat(lf(l))}return t.encodeDashes=function(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})},t.pathSegmentsAndParams=function(t){return Ld(t._segments,t._params.filter(function(t){return t.location===Sp.PATH}).concat(void 0)).reduce(Rd,[]).filter(function(t){return""!==t&&Kc(t)})},t.queryParams=function(t){return t._params.filter(function(t){return t.location===Sp.SEARCH})},t.compare=function(e,n){var r=function(e){return e._cache.weights=e._cache.weights||function(e){return e._cache.segments=e._cache.segments||e._cache.path.map(t.pathSegmentsAndParams).reduce(Rd,[]).reduce(up,[]).map(function(t){return td(t)?df(t):t}).reduce(Rd,[])}(e).map(function(t){return"/"===t?1:td(t)?2:t instanceof $p?3:void 0})},i=r(e),o=r(n);!function(t,e,n){for(var r=Math.max(t.length,e.length);t.length<r;)t.push(0);for(;e.length<r;)e.push(0)}(i,o);var a,s,l=Ld(i,o);for(s=0;s<l.length;s++)if(0!=(a=l[s][0]-l[s][1]))return a;return 0},t.prototype.append=function(t){return this._children.push(t),t._cache={path:this._cache.path.concat(t),parent:this,pattern:null},t},t.prototype.isRoot=function(){return this._cache.path[0]===this},t.prototype.toString=function(){return this.pattern},t.prototype.exec=function(t,e,n,r){var i=this;void 0===e&&(e={}),void 0===r&&(r={});var o,a,s=(o=this._cache,a=function(){return new RegExp(["^",Fd(i._cache.path.map(jc("_compiled"))).join(""),!1===i.config.strict?"/?":"","$"].join(""),i.config.caseInsensitive?"i":void 0)},o.pattern=o.pattern||a()).exec(t);if(!s)return null;var l,u,c=this.parameters(),d=c.filter(function(t){return!t.isSearch()}),p=c.filter(function(t){return t.isSearch()}),f=this._cache.path.map(function(t){return t._segments.length-1}).reduce(function(t,e){return t+e}),h={};if(f!==s.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var m=0;m<f;m++){for(var g=d[m],v=s[m+1],b=0;b<g.replace.length;b++)g.replace[b].from===v&&(v=g.replace[b].to);v&&!0===g.array&&(u=Dd((l=function(t){return t.split("").reverse().join("")})(v).split(/-(?!\\)/),l),v=Dd(u,function(t){return t.replace(/\\-/g,"-")}).reverse()),Kc(v)&&(v=g.type.decode(v)),h[g.id]=g.value(v)}return p.forEach(function(t){for(var n=e[t.id],r=0;r<t.replace.length;r++)t.replace[r].from===n&&(n=t.replace[r].to);Kc(n)&&(n=t.type.decode(n)),h[t.id]=t.value(n)}),n&&(h["#"]=n),h},t.prototype.parameters=function(t){return void 0===t&&(t={}),!1===t.inherit?this._params:Fd(this._cache.path.map(function(t){return t._params}))},t.prototype.parameter=function(t,e){var n=this;void 0===e&&(e={});var r=this._cache.parent;return function(){for(var e=0,r=n._params;e<r.length;e++){var i=r[e];if(i.id===t)return i}}()||!1!==e.inherit&&r&&r.parameter(t,e)||null},t.prototype.validates=function(t){return t=t||{},this.parameters().filter(function(e){return t.hasOwnProperty(e.id)}).map(function(e){return!(n=e)||n.validates(t[e.id]);var n}).reduce(Od,!0)},t.prototype.format=function(e){void 0===e&&(e={});var n=this._cache.path,r=n.map(t.pathSegmentsAndParams).reduce(Rd,[]).map(function(t){return td(t)?t:o(t)}),i=n.map(t.queryParams).reduce(Rd,[]).map(o);if(r.concat(i).filter(function(t){return!1===t.isValid}).length)return null;function o(t){var n=t.value(e[t.id]),r=t.validates(n),i=t.isDefaultValue(n),o=!!i&&t.squash,a=t.type.encode(n);return{param:t,value:n,isValid:r,isDefaultValue:i,squash:o,encoded:a}}var a=r.reduce(function(e,n){if(td(n))return e+n;var r=n.squash,i=n.encoded,o=n.param;return!0===r?e.match(/\/$/)?e.slice(0,-1):e:td(r)?e+r:!1!==r?e:null==i?e:nd(i)?e+Dd(i,t.encodeDashes).join("-"):o.raw?e+i:e+encodeURIComponent(i)},""),s=i.map(function(t){var e=t.param,n=t.encoded;if(!(null==n||t.isDefaultValue&&!1!==t.squash)&&(nd(n)||(n=[n]),0!==n.length))return e.raw||(n=Dd(n,encodeURIComponent)),n.map(function(t){return e.id+"="+t})}).filter(gd).reduce(Rd,[]).join("&");return a+(s?"?"+s:"")+(e["#"]?"#"+e["#"]:"")},t.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,t}(),hf=function(){return(hf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},mf=function(){function t(t){this.router=t}return t.prototype.fromConfig=function(t,e,n){return new $p(t,e,Sp.CONFIG,this.router.urlService.config,n)},t.prototype.fromPath=function(t,e,n){return new $p(t,e,Sp.PATH,this.router.urlService.config,n)},t.prototype.fromSearch=function(t,e,n){return new $p(t,e,Sp.SEARCH,this.router.urlService.config,n)},t}(),gf=function(){function t(t){var e=this;this.router=t,this.paramFactory=new mf(this.router),this.caseInsensitive=function(t){return e.router.urlService.config.caseInsensitive(t)},this.defaultSquashPolicy=function(t){return e.router.urlService.config.defaultSquashPolicy(t)},this.strictMode=function(t){return e.router.urlService.config.strictMode(t)},this.type=function(t,n,r){return e.router.urlService.config.type(t,n,r)||e},hd(this,{UrlMatcher:ff,Param:$p})}return t.prototype.compile=function(t,e){var n=this.router.urlService.config,r=e&&!e.state&&e.params;return e=r?hf({state:{params:r}},e):e,new ff(t,n.paramTypes,this.paramFactory,hd({strict:n._isStrictMode,caseInsensitive:n._isCaseInsensitive},e))},t.prototype.isMatcher=function(t){if(!ed(t))return!1;var e=!0;return fd(ff.prototype,function(n,r){Xc(n)&&(e=e&&Kc(t[r])&&Xc(t[r]))}),e},t.prototype.$get=function(){var t=this.router.urlService.config;return t.paramTypes.enqueue=!1,t.paramTypes._flushTypeQueue(),this},t}(),vf=function(){function t(t){this.router=t}return t.prototype.compile=function(t){return this.router.urlMatcherFactory.compile(t)},t.prototype.create=function(t,e){var n=this,r=Wp.isState,i=Hc([[td,function(t){return i(n.compile(t))}],[Vc(ff),function(t){return n.fromUrlMatcher(t,e)}],[r,function(t){return n.fromState(t,n.router)}],[Vc(RegExp),function(t){return n.fromRegExp(t,e)}],[Xc,function(t){return new bf(t,e)}]]),o=i(t);if(!o)throw new Error("invalid 'what' in when()");return o},t.prototype.fromUrlMatcher=function(t,e){var n=e;td(e)&&(e=this.router.urlMatcherFactory.compile(e)),Vc(ff)(e)&&(n=function(t){return e.format(t)});var r={urlMatcher:t,matchPriority:function(e){var n=t.parameters().filter(function(t){return t.isOptional});return n.length?n.filter(function(t){return e[t.id]}).length/n.length:1e-6},type:"URLMATCHER"};return hd(new bf(function(e){var n=t.exec(e.path,e.search,e.hash);return t.validates(n)&&n},n),r)},t.prototype.fromState=function(t,e){var n={state:t,type:"STATE"};return hd(this.fromUrlMatcher(t.url,function(n){var r=e.stateService,i=e.globals;r.href(t,n)!==r.href(i.current,i.params)&&r.transitionTo(t,n,{inherit:!0,source:"url"})}),n)},t.prototype.fromRegExp=function(t,e){if(t.global||t.sticky)throw new Error("Rule RegExp must not be global or sticky");var n=td(e)?function(t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}:e,r={regexp:t,type:"REGEXP"};return hd(new bf(function(e){return t.exec(e.path)},n),r)},t.isUrlRule=function(t){return t&&["type","match","handler"].every(function(e){return Kc(t[e])})},t}(),bf=function(){return function(t,e){var n=this;this.match=t,this.type="RAW",this.matchPriority=function(t){return 0-n.$id},this.handler=e||gd}}(),yf=function(){function t(t){var e=this;this.router=t,this.sync=function(t){return e.router.urlService.sync(t)},this.listen=function(t){return e.router.urlService.listen(t)},this.deferIntercept=function(t){return e.router.urlService.deferIntercept(t)},this.match=function(t){return e.router.urlService.match(t)},this.initial=function(t){return e.router.urlService.rules.initial(t)},this.otherwise=function(t){return e.router.urlService.rules.otherwise(t)},this.removeRule=function(t){return e.router.urlService.rules.removeRule(t)},this.rule=function(t){return e.router.urlService.rules.rule(t)},this.rules=function(){return e.router.urlService.rules.rules()},this.sort=function(t){return e.router.urlService.rules.sort(t)},this.when=function(t,n,r){return e.router.urlService.rules.when(t,n,r)},this.urlRuleFactory=new vf(t)}return t.prototype.update=function(t){var e=this.router.locationService;t?this.location=e.url():e.url()!==this.location&&e.url(this.location,!0)},t.prototype.push=function(t,e,n){var r=n&&!!n.replace;this.router.urlService.url(t.format(e||{}),r)},t.prototype.href=function(t,e,n){var r=t.format(e);if(null==r)return null;n=n||{absolute:!1};var i=this.router.urlService.config,o=i.html5Mode();if(o||null===r||(r="#"+i.hashPrefix()+r),r=function(t,e,n,r){return"/"===r?t:e?op(r)+t:n?r.slice(1)+t:t}(r,o,n.absolute,i.baseHref()),!n.absolute||!r)return r;var a=!o&&r?"/":"",s=i.port(),l=80===s||443===s?"":":"+s;return[i.protocol(),"://",i.host(),l,a,r].join("")},Object.defineProperty(t.prototype,"interceptDeferred",{get:function(){return this.router.urlService.interceptDeferred},enumerable:!0,configurable:!0}),t}(),wf=function(){function t(t){var e=this;this.router=t,this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._listeners=[],this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIView:function(t){return Ed(e._uiViews,function(n){return e.router.$id+"."+n.id===t})},_registeredUIViews:function(){return e._uiViews},_activeViewConfigs:function(){return e._viewConfigs},_onSync:function(t){return e._listeners.push(t),function(){return kd(e._listeners,t)}}}}return t.normalizeUIViewTarget=function(t,e){void 0===e&&(e="");var n=e.split("@"),r=n[0]||"$default",i=td(n[1])?n[1]:"^",o=/^(\^(?:\.\^)*)\.(.*$)/.exec(r);if(o&&(i=o[1],r=o[2]),"!"===r.charAt(0)&&(r=r.substr(1),i=""),/^(\^(?:\.\^)*)$/.exec(i)){var a=i.split(".").reduce(function(t,e){return t.parent},t);i=a.name}else"."===i&&(i=t.name);return{uiViewName:r,uiViewContextAnchor:i}},t.prototype._rootViewContext=function(t){return this._rootContext=t||this._rootContext},t.prototype._viewConfigFactory=function(t,e){this._viewConfigFactories[t]=e},t.prototype.createViewConfig=function(t,e){var n=this._viewConfigFactories[e.$type];if(!n)throw new Error("ViewService: No view config factory registered for type "+e.$type);var r=n(t,e);return nd(r)?r:[r]},t.prototype.deactivateViewConfig=function(t){bp.traceViewServiceEvent("<- Removing",t),kd(this._viewConfigs,t)},t.prototype.activateViewConfig=function(t){bp.traceViewServiceEvent("-> Registering",t),this._viewConfigs.push(t)},t.prototype.sync=function(){var e=this,n=this._uiViews.map(function(t){return[t.fqn,t]}).reduce(Vd,{});function r(t){for(var e=t.viewDecl.$context,n=0;++n&&e.parent;)e=e.parent;return n}var i=Mc(function(t,e,n,r){return e*(t(n)-t(r))}),o=this._uiViews.sort(i(function(t){var e=function(t){return t&&t.parent?e(t.parent)+1:1};return 1e4*t.fqn.split(".").length+e(t.creationContext)},1)).map(function(o){var a=e._viewConfigs.filter(t.matches(n,o));return a.length>1&&a.sort(i(r,-1)),{uiView:o,viewConfig:a[0]}}),a=o.map(function(t){return t.viewConfig}),s=this._viewConfigs.filter(function(t){return!wd(a,t)}).map(function(t){return{uiView:void 0,viewConfig:t}});o.forEach(function(t){-1!==e._uiViews.indexOf(t.uiView)&&t.uiView.configUpdated(t.viewConfig)});var l=o.concat(s);this._listeners.forEach(function(t){return t(l)}),bp.traceViewSync(l)},t.prototype.registerUIView=function(t){bp.traceViewServiceUIViewEvent("-> Registering",t);var e=this._uiViews;return e.filter(function(e){return e.fqn===t.fqn&&e.$type===t.$type}).length&&bp.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",t),e.push(t),this.sync(),function(){-1!==e.indexOf(t)?(bp.traceViewServiceUIViewEvent("<- Deregistering",t),kd(e)(t)):bp.traceViewServiceUIViewEvent("Tried removing non-registered uiView",t)}},t.prototype.available=function(){return this._uiViews.map(jc("fqn"))},t.prototype.active=function(){return this._uiViews.filter(jc("$config")).map(jc("name"))},t.matches=function(t,e){return function(n){if(e.$type!==n.viewDecl.$type)return!1;var r=n.viewDecl,i=r.$uiViewName.split("."),o=e.fqn.split(".");if(!md(i,o.slice(0-i.length)))return!1;var a=o.slice(0,1-i.length||void 0).join("."),s=t[a].creationContext;return r.$uiViewContextAnchor===(s&&s.name)}},t}(),kf=function(){function t(){this.params=new Cp,this.lastStartedTransitionId=-1,this.transitionHistory=new Wd([],1),this.successfulTransitions=new Wd([],1)}return t.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},t}();function _f(t){if(!(Xc(t)||td(t)||Vc(Ap)(t)||Ap.isDef(t)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return Xc(t)?t:Bc(t)}cf=function(t,e){var n=function(t,e){return(e.priority||0)-(t.priority||0)}(t,e);return 0!==n?n:0!==(n=function(t,e){var n={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1};return(n[t.type]||0)-(n[e.type]||0)}(t,e))?n:0!==(n=function(t,e){return t.urlMatcher&&e.urlMatcher?ff.compare(t.urlMatcher,e.urlMatcher):0}(t,e))?n:function(t,e){var n={STATE:!0,URLMATCHER:!0};return n[t.type]&&n[e.type]?0:(t.$id||0)-(e.$id||0)}(t,e)};var xf=function(){function t(t){this.router=t,this._sortFn=cf,this._rules=[],this._id=0,this.urlRuleFactory=new vf(t)}return t.prototype.dispose=function(t){this._rules=[],delete this._otherwiseFn},t.prototype.initial=function(t){var e=_f(t);this.rule(this.urlRuleFactory.create(function(t,e){return 0===e.globals.transitionHistory.size()&&!!/^\/?$/.exec(t.path)},e))},t.prototype.otherwise=function(t){var e=_f(t);this._otherwiseFn=this.urlRuleFactory.create(Bc(!0),e),this._sorted=!1},t.prototype.removeRule=function(t){kd(this._rules,t)},t.prototype.rule=function(t){var e=this;if(!vf.isUrlRule(t))throw new Error("invalid rule");return t.$id=this._id++,t.priority=t.priority||0,this._rules.push(t),this._sorted=!1,function(){return e.removeRule(t)}},t.prototype.rules=function(){return this.ensureSorted(),this._rules.concat(this._otherwiseFn?[this._otherwiseFn]:[])},t.prototype.sort=function(t){for(var e=this.stableSort(this._rules,this._sortFn=t||this._sortFn),n=0,r=0;r<e.length;r++)e[r]._group=n,r<e.length-1&&0!==this._sortFn(e[r],e[r+1])&&n++;this._rules=e,this._sorted=!0},t.prototype.ensureSorted=function(){this._sorted||this.sort()},t.prototype.stableSort=function(t,e){var n=t.map(function(t,e){return{elem:t,idx:e}});return n.sort(function(t,n){var r=e(t.elem,n.elem);return 0===r?t.idx-n.idx:r}),n.map(function(t){return t.elem})},t.prototype.when=function(t,e,n){var r=this.urlRuleFactory.create(t,e);return Kc(n&&n.priority)&&(r.priority=n.priority),this.rule(r),r},t}(),Sf=function(){function t(t){var e=this;this.router=t,this.paramTypes=new Tp,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this.dispose=function(){return e.paramTypes.dispose()},this.baseHref=function(){return e.router.locationConfig.baseHref()},this.hashPrefix=function(t){return e.router.locationConfig.hashPrefix(t)},this.host=function(){return e.router.locationConfig.host()},this.html5Mode=function(){return e.router.locationConfig.html5Mode()},this.port=function(){return e.router.locationConfig.port()},this.protocol=function(){return e.router.locationConfig.protocol()}}return t.prototype.caseInsensitive=function(t){return this._isCaseInsensitive=Kc(t)?t:this._isCaseInsensitive},t.prototype.defaultSquashPolicy=function(t){if(Kc(t)&&!0!==t&&!1!==t&&!td(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=Kc(t)?t:this._defaultSquashPolicy},t.prototype.strictMode=function(t){return this._isStrictMode=Kc(t)?t:this._isStrictMode},t.prototype.type=function(t,e,n){var r=this.paramTypes.type(t,e,n);return Kc(e)?this:r},t}(),$f=function(){function t(t){var e=this;this.router=t,this.interceptDeferred=!1,this.rules=new xf(this.router),this.config=new Sf(this.router),this.url=function(t,n,r){return e.router.locationService.url(t,n,r)},this.path=function(){return e.router.locationService.path()},this.search=function(){return e.router.locationService.search()},this.hash=function(){return e.router.locationService.hash()},this.onChange=function(t){return e.router.locationService.onChange(t)}}return t.prototype.dispose=function(){this.listen(!1),this.rules.dispose()},t.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},t.prototype.sync=function(t){if(!t||!t.defaultPrevented){var e=this.router,n=e.urlService,r=e.stateService,i={path:n.path(),search:n.search(),hash:n.hash()},o=this.match(i);Hc([[td,function(t){return n.url(t,!0)}],[Ap.isDef,function(t){return r.go(t.state,t.params,t.options)}],[Vc(Ap),function(t){return r.go(t.state(),t.params(),t.options())}]])(o&&o.rule.handler(o.match,i,this.router))}},t.prototype.listen=function(t){var e=this;if(!1!==t)return this._stopListeningFn=this._stopListeningFn||this.router.urlService.onChange(function(t){return e.sync(t)});this._stopListeningFn&&this._stopListeningFn(),delete this._stopListeningFn},t.prototype.deferIntercept=function(t){void 0===t&&(t=!0),this.interceptDeferred=t},t.prototype.match=function(t){t=hd({path:"",search:{},hash:""},t);for(var e,n,r,i=this.rules.rules(),o=0;o<i.length&&(!e||e.rule._group===i[o]._group);o++){var a=(r=(n=i[o]).match(t,this.router))&&{match:r,rule:n,weight:n.matchPriority(r)};e=!e||a&&a.weight>e.weight?a:e}return e},t}(),Tf=0,Cf=sd("LocationServices",["url","path","search","hash","onChange"]),Ef=sd("LocationConfig",["port","protocol","host","baseHref","html5Mode","hashPrefix"]),Af=function(){function t(t,e){void 0===t&&(t=Cf),void 0===e&&(e=Ef),this.locationService=t,this.locationConfig=e,this.$id=Tf++,this._disposed=!1,this._disposables=[],this.trace=bp,this.viewService=new wf(this),this.globals=new kf,this.transitionService=new Qf(this),this.urlMatcherFactory=new gf(this),this.urlRouter=new yf(this),this.urlService=new $f(this),this.stateRegistry=new Zp(this),this.stateService=new Xf(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlService),this.disposable(t),this.disposable(e)}return t.prototype.disposable=function(t){this._disposables.push(t)},t.prototype.dispose=function(t){var e=this;t&&Xc(t.dispose)?t.dispose(this):(this._disposed=!0,this._disposables.slice().forEach(function(t){try{"function"==typeof t.dispose&&t.dispose(e),kd(e._disposables,t)}catch(n){}}))},t.prototype.plugin=function(t,e){void 0===e&&(e={});var n=new t(this,e);if(!n.name)throw new Error("Required property `name` missing on plugin: "+n);return this._disposables.push(n),this._plugins[n.name]=n},t.prototype.getPlugin=function(t){return t?this._plugins[t]:Pd(this._plugins)},t}();function Df(t){t.addResolvable(Pp.fromData(Af,t.router),""),t.addResolvable(Pp.fromData(sf,t),""),t.addResolvable(Pp.fromData("$transition$",t),""),t.addResolvable(Pp.fromData("$stateParams",t.params()),""),t.entering().forEach(function(e){t.addResolvable(Pp.fromData("$state$",e),e)})}var Pf=wd(["$transition$",sf]),Of=function(t){var e=Pd(t.treeChanges()).reduce(Rd,[]).reduce(Nd,[]),n=function(t){return Pf(t.token)?Pp.fromData(t.token,null):t};e.forEach(function(t){t.resolvables=t.resolvables.map(n)})},Mf=function(t){var e=t.to().redirectTo;if(e){var n=t.router.stateService;return Xc(e)?ld.$q.when(e(t)).then(r):r(e)}function r(e){if(e)return e instanceof Ap?e:td(e)?n.target(e,t.params(),t.options()):e.state||e.params?n.target(e.state||t.to(),e.params||t.params(),t.options()):void 0}};function Rf(t){return function(e,n){return(0,n.$$state()[t])(e,n)}}var jf=Rf("onExit"),If=Rf("onRetain"),Nf=Rf("onEnter"),Ff=function(t){return new jp(t.treeChanges().to).resolvePath("EAGER",t).then(vd)},Uf=function(t,e){return new jp(t.treeChanges().to).subContext(e.$$state()).resolvePath("LAZY",t).then(vd)},Lf=function(t){return new jp(t.treeChanges().to).resolvePath("LAZY",t).then(vd)},Vf=function(t){var e=ld.$q,n=t.views("entering");if(n.length)return e.all(n.map(function(t){return e.when(t.load())})).then(vd)},Bf=function(t){var e=t.views("entering"),n=t.views("exiting");if(e.length||n.length){var r=t.router.viewService;n.forEach(function(t){return r.deactivateViewConfig(t)}),e.forEach(function(t){return r.activateViewConfig(t)}),r.sync()}},Hf=function(t){var e=t.router.globals,n=function(){e.transition===t&&(e.transition=null)};t.onSuccess({},function(){e.successfulTransitions.enqueue(t),e.$current=t.$to(),e.current=e.$current.self,Hd(t.params(),e.params)},{priority:1e4}),t.promise.then(n,n)},qf=function(t){var e=t.options(),n=t.router.stateService,r=t.router.urlRouter;"url"!==e.source&&e.location&&n.$current.navigable&&r.push(n.$current.navigable.url,n.params,{replace:"replace"===e.location}),r.update(!0)},zf=function(t){var e=t.router,n=t.entering().filter(function(t){return!!t.$$state().lazyLoad}).map(function(e){return Gf(t,e)});return ld.$q.all(n).then(function(){if("url"!==t.originalTransition().options().source){var n=t.targetState();return e.stateService.target(n.identifier(),n.params(),n.options())}var r=e.urlService,i=r.match(r.parts()),o=i&&i.rule;if(o&&"STATE"===o.type)return e.stateService.target(o.state,i.match,t.options());e.urlService.sync()})};function Gf(t,e){var n=e.$$state().lazyLoad,r=n._promise;return r||(r=n._promise=ld.$q.when(n(t,e)).then(function(e){return e&&Array.isArray(e.states)&&e.states.forEach(function(e){return t.router.stateRegistry.register(e)}),e}).then(function(t){return delete e.lazyLoad,delete e.$$state().lazyLoad,delete n._promise,t},function(t){return delete n._promise,ld.$q.reject(t)})),r}var Wf=function(){return function(t,e,n,r,i,o,a,s){void 0===i&&(i=!1),void 0===o&&(o=tf.HANDLE_RESULT),void 0===a&&(a=tf.REJECT_ERROR),void 0===s&&(s=!1),this.name=t,this.hookPhase=e,this.hookOrder=n,this.criteriaMatchPath=r,this.reverseSort=i,this.getResultHandler=o,this.getErrorHandler=a,this.synchronous=s}}();function Yf(t){var e=t._ignoredReason();if(e){bp.traceTransitionIgnored(t);var n=t.router.globals.transition;return"SameAsCurrent"===e&&n&&n.abort(),Zd.ignored().toPromise()}}function Kf(t){if(!t.valid())throw new Error(t.error().toString())}var Zf={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},Qf=function(){function t(t){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=t,this.$view=t.viewService,this._deregisterHookFns={},this._pluginapi=bd(Bc(this),{},Bc(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks(),t.globals.successfulTransitions.onEvict(Of)}return t.prototype.onCreate=function(t,e,n){},t.prototype.onBefore=function(t,e,n){},t.prototype.onStart=function(t,e,n){},t.prototype.onExit=function(t,e,n){},t.prototype.onRetain=function(t,e,n){},t.prototype.onEnter=function(t,e,n){},t.prototype.onFinish=function(t,e,n){},t.prototype.onSuccess=function(t,e,n){},t.prototype.onError=function(t,e,n){},t.prototype.dispose=function(t){Pd(this._registeredHooks).forEach(function(t){return t.forEach(function(e){e._deregistered=!0,kd(t,e)})})},t.prototype.create=function(t,e){return new sf(t,e,this._router)},t.prototype._defineCoreEvents=function(){var t=Qp,e=tf,n=this._criteriaPaths;this._defineEvent("onCreate",t.CREATE,0,n.to,!1,e.LOG_REJECTED_RESULT,e.THROW_ERROR,!0),this._defineEvent("onBefore",t.BEFORE,0,n.to),this._defineEvent("onStart",t.RUN,0,n.to),this._defineEvent("onExit",t.RUN,100,n.exiting,!0),this._defineEvent("onRetain",t.RUN,200,n.retained),this._defineEvent("onEnter",t.RUN,300,n.entering),this._defineEvent("onFinish",t.RUN,400,n.to),this._defineEvent("onSuccess",t.SUCCESS,0,n.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0),this._defineEvent("onError",t.ERROR,0,n.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0)},t.prototype._defineCorePaths=function(){var t=Xp.STATE,e=Xp.TRANSITION;this._definePathType("to",e),this._definePathType("from",e),this._definePathType("exiting",t),this._definePathType("retained",t),this._definePathType("entering",t)},t.prototype._defineEvent=function(t,e,n,r,i,o,a,s){void 0===i&&(i=!1),void 0===o&&(o=tf.HANDLE_RESULT),void 0===a&&(a=tf.REJECT_ERROR),void 0===s&&(s=!1);var l=new Wf(t,e,n,r,i,o,a,s);this._eventTypes.push(l),rf(this,this,l)},t.prototype._getEvents=function(t){return(Kc(t)?this._eventTypes.filter(function(e){return e.hookPhase===t}):this._eventTypes.slice()).sort(function(t,e){var n=t.hookPhase-e.hookPhase;return 0===n?t.hookOrder-e.hookOrder:n})},t.prototype._definePathType=function(t,e){this._criteriaPaths[t]={name:t,scope:e}},t.prototype._getPathTypes=function(){return this._criteriaPaths},t.prototype.getHooks=function(t){return this._registeredHooks[t]},t.prototype._registerCoreTransitionHooks=function(){var t=this._deregisterHookFns;t.addCoreResolves=this.onCreate({},Df),t.ignored=function(t){return t.onBefore({},Yf,{priority:-9999})}(this),t.invalid=function(t){return t.onBefore({},Kf,{priority:-1e4})}(this),t.redirectTo=function(t){return t.onStart({to:function(t){return!!t.redirectTo}},Mf)}(this),t.onExit=function(t){return t.onExit({exiting:function(t){return!!t.onExit}},jf)}(this),t.onRetain=function(t){return t.onRetain({retained:function(t){return!!t.onRetain}},If)}(this),t.onEnter=function(t){return t.onEnter({entering:function(t){return!!t.onEnter}},Nf)}(this),t.eagerResolve=function(t){return t.onStart({},Ff,{priority:1e3})}(this),t.lazyResolve=function(t){return t.onEnter({entering:Bc(!0)},Uf,{priority:1e3})}(this),t.resolveAll=function(t){return t.onFinish({},Lf,{priority:1e3})}(this),t.loadViews=function(t){return t.onFinish({},Vf)}(this),t.activateViews=function(t){return t.onSuccess({},Bf)}(this),t.updateGlobals=function(t){return t.onCreate({},Hf)}(this),t.updateUrl=function(t){return t.onSuccess({},qf,{priority:9999})}(this),t.lazyLoad=function(t){return t.onBefore({entering:function(t){return!!t.lazyLoad}},zf)}(this)},t}(),Xf=function(){function t(e){this.router=e,this.invalidCallbacks=[],this._defaultErrorHandler=function(t){t instanceof Error&&t.stack?(console.error(t),console.error(t.stack)):t instanceof Zd?(console.error(t.toString()),t.detail&&t.detail.stack&&console.error(t.detail.stack)):console.error(t)};var n=Object.keys(t.prototype).filter(Fc(wd(["current","$current","params","transition"])));bd(Bc(t.prototype),this,Bc(this),n)}return Object.defineProperty(t.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.defaultErrorHandler(vd),this.invalidCallbacks=[]},t.prototype._handleInvalidTargetState=function(t,e){var n=this,r=Dp.makeTargetState(this.router.stateRegistry,t),i=this.router.globals,o=function(){return i.transitionHistory.peekTail()},a=o(),s=new Wd(this.invalidCallbacks.slice()),l=new jp(t).injector(),u=function(t){if(t instanceof Ap){var e=t;return(e=n.target(e.identifier(),e.params(),e.options())).valid()?o()!==a?Zd.superseded().toPromise():n.transitionTo(e.identifier(),e.params(),e.options()):Zd.invalid(e.error()).toPromise()}};return function t(){var n=s.dequeue();return void 0===n?Zd.invalid(e.error()).toPromise():ld.$q.when(n(e,r,l)).then(u).then(function(e){return e||t()})}()},t.prototype.onInvalid=function(t){return this.invalidCallbacks.push(t),(function(){kd(this.invalidCallbacks)(t)}).bind(this)},t.prototype.reload=function(t){return this.transitionTo(this.current,this.params,{reload:!Kc(t)||t,inherit:!1,notify:!1})},t.prototype.go=function(t,e,n){var r=xd(n,{relative:this.$current,inherit:!0},Zf);return this.transitionTo(t,e,r)},t.prototype.target=function(t,e,n){if(void 0===n&&(n={}),ed(n.reload)&&!n.reload.name)throw new Error("Invalid reload state object");var r=this.router.stateRegistry;if(n.reloadState=!0===n.reload?r.root():r.matcher.find(n.reload,n.relative),n.reload&&!n.reloadState)throw new Error("No such reload state '"+(td(n.reload)?n.reload:n.reload.name)+"'");return new Ap(this.router.stateRegistry,t,e,n)},t.prototype.getCurrentPath=function(){var t=this.router.globals.successfulTransitions.peekTail();return t?t.treeChanges().to:[new Ep(this.router.stateRegistry.root())]},t.prototype.transitionTo=function(t,e,n){var r=this;void 0===e&&(e={}),void 0===n&&(n={});var i=this.router,o=i.globals;n=xd(n,Zf),n=hd(n,{current:function(){return o.transition}});var a=this.target(t,e,n),s=this.getCurrentPath();if(!a.exists())return this._handleInvalidTargetState(s,a);if(!a.valid())return zd(a.error());var l=function(t){return function(e){if(e instanceof Zd){var n=i.globals.lastStartedTransitionId<=t.$id;if(e.type===Yd.IGNORED)return n&&i.urlRouter.update(),ld.$q.when(o.current);var a=e.detail;if(e.type===Yd.SUPERSEDED&&e.redirected&&a instanceof Ap){var s=t.redirect(a);return s.run().catch(l(s))}if(e.type===Yd.ABORTED)return n&&i.urlRouter.update(),ld.$q.reject(e)}return r.defaultErrorHandler()(e),ld.$q.reject(e)}},u=this.router.transitionService.create(s,a),c=u.run().catch(l(u));return qd(c),hd(c,{transition:u})},t.prototype.is=function(t,e,n){n=xd(n,{relative:this.$current});var r=this.router.stateRegistry.matcher.find(t,n.relative);if(Kc(r)){if(this.$current!==r)return!1;if(!e)return!0;var i=r.parameters({inherit:!0,matchingKeys:e});return $p.equals(i,$p.values(i,e),this.params)}},t.prototype.includes=function(t,e,n){n=xd(n,{relative:this.$current});var r=td(t)&&Gd.fromString(t);if(r){if(!r.matches(this.$current.name))return!1;t=this.$current.name}var i=this.router.stateRegistry.matcher.find(t,n.relative),o=this.$current.includes;if(Kc(i)){if(!Kc(o[i.name]))return!1;if(!e)return!0;var a=i.parameters({inherit:!0,matchingKeys:e});return $p.equals(a,$p.values(a,e),this.params)}},t.prototype.href=function(t,e,n){n=xd(n,{lossy:!0,inherit:!0,absolute:!1,relative:this.$current}),e=e||{};var r=this.router.stateRegistry.matcher.find(t,n.relative);if(!Kc(r))return null;n.inherit&&(e=this.params.$inherit(e,this.$current,r));var i=r&&n.lossy?r.navigable:r;return i&&null!=i.url?this.router.urlRouter.href(i.url,e,{absolute:n.absolute}):null},t.prototype.defaultErrorHandler=function(t){return this._defaultErrorHandler=t||this._defaultErrorHandler},t.prototype.get=function(t,e){var n=this.router.stateRegistry;return 0===arguments.length?n.get():n.get(t,e||this.$current)},t.prototype.lazyLoad=function(t,e){var n=this.get(t);if(!n||!n.lazyLoad)throw new Error("Can not lazy load "+t);var r=this.getCurrentPath(),i=Dp.makeTargetState(this.router.stateRegistry,r);return Gf(e=e||this.router.transitionService.create(r,i),n)},t}(),Jf={when:function(t){return new Promise(function(e,n){return e(t)})},reject:function(t){return new Promise(function(e,n){n(t)})},defer:function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t},all:function(t){if(nd(t))return Promise.all(t);if(ed(t)){var e=Object.keys(t).map(function(e){return t[e].then(function(t){return{key:e,val:t}})});return Jf.all(e).then(function(t){return t.reduce(function(t,e){return t[e.key]=e.val,t},{})})}}},th={},eh=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,nh=/([^\s,]+)/g,rh={get:function(t){return th[t]},has:function(t){return null!=rh.get(t)},invoke:function(t,e,n){var r=hd({},th,n||{}),i=rh.annotate(t),o=Ud(function(t){return r.hasOwnProperty(t)},function(t){return"DI can't find injectable: '"+t+"'"}),a=i.filter(o).map(function(t){return r[t]});return Xc(t)?t.apply(e,a):t.slice(-1)[0].apply(e,a)},annotate:function(t){if(!od(t))throw new Error("Not an injectable function: "+t);if(t&&t.$inject)return t.$inject;if(nd(t))return t.slice(0,-1);var e=t.toString().replace(eh,"");return e.slice(e.indexOf("(")+1,e.indexOf(")")).match(nh)||[]}},ih=function(t,e){var n=e[0],r=e[1];return t.hasOwnProperty(n)?nd(t[n])?t[n].push(r):t[n]=[t[n],r]:t[n]=r,t},oh=function(t){return t.split("&").filter(gd).map(lp).reduce(ih,{})};function ah(t){var e=function(t){return t||""},n=ap(t).map(e),r=n[1],i=sp(n[0]).map(e);return{path:i[0],search:i[1],hash:r,url:t}}function sh(t,e,n,r){return function(i){var o=i.locationService=new n(i),a=i.locationConfig=new r(i,e);return{name:t,service:o,configuration:a,dispose:function(t){t.dispose(o),t.dispose(a)}}}}var lh=function(){function t(t,e){var n=this;this.fireAfterUpdate=e,this._listeners=[],this._listener=function(t){return n._listeners.forEach(function(e){return e(t)})},this.hash=function(){return ah(n._get()).hash},this.path=function(){return ah(n._get()).path},this.search=function(){return oh(ah(n._get()).search)},this._location=ud.location,this._history=ud.history}return t.prototype.url=function(t,e){return void 0===e&&(e=!0),Kc(t)&&t!==this._get()&&(this._set(null,null,t,e),this.fireAfterUpdate&&this._listeners.forEach(function(e){return e({url:t})})),r=(n=this).path(),i=n.search(),o=n.hash(),r+((a=Object.keys(i).map(function(t){var e=i[t];return(nd(e)?e:[e]).map(function(e){return t+"="+e})}).reduce(Rd,[]).join("&"))?"?"+a:"")+(o?"#"+o:"");var n,r,i,o,a},t.prototype.onChange=function(t){var e=this;return this._listeners.push(t),function(){return kd(e._listeners,t)}},t.prototype.dispose=function(t){var e;(e=this._listeners).slice().forEach(function(t){"function"==typeof t&&t(),kd(e,t)})},t}(),uh=function(t){function e(e){var n=t.call(this,e,!1)||this;return ud.addEventListener("hashchange",n._listener,!1),n}return i(e,t),e.prototype._get=function(){return(t=this._location.hash)?t.replace(/^#/,""):"";var t},e.prototype._set=function(t,e,n,r){this._location.hash=n},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),ud.removeEventListener("hashchange",this._listener)},e}(lh),ch=function(t){function e(e){return t.call(this,e,!0)||this}return i(e,t),e.prototype._get=function(){return this._url},e.prototype._set=function(t,e,n,r){this._url=n},e}(lh),dh=function(t){function e(e){var n=t.call(this,e,!0)||this;return n._config=e.urlService.config,ud.addEventListener("popstate",n._listener,!1),n}return i(e,t),e.prototype._getBasePrefix=function(){return op(this._config.baseHref())},e.prototype._get=function(){var t=this._location,e=t.pathname,n=t.hash,r=t.search;r=sp(r)[1],n=ap(n)[1];var i=this._getBasePrefix(),o=e===this._config.baseHref(),a=e.substr(0,i.length)===i;return(e=o?"/":a?e.substring(i.length):e)+(r?"?"+r:"")+(n?"#"+n:"")},e.prototype._set=function(t,e,n,r){var i=this._getBasePrefix(),o=n&&"/"!==n[0]?"/":"",a=""===n||"/"===n?this._config.baseHref():i+o+n;r?this._history.replaceState(t,e,a):this._history.pushState(t,e,a)},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),ud.removeEventListener("popstate",this._listener)},e}(lh),ph=function(){return function(){var t=this;this.dispose=vd,this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return t._port},this.protocol=function(){return t._protocol},this.host=function(){return t._host},this.baseHref=function(){return t._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(e){return Kc(e)?t._hashPrefix=e:t._hashPrefix}}}(),fh=function(){function t(t,e){void 0===e&&(e=!1),this._isHtml5=e,this._baseHref=void 0,this._hashPrefix=""}return t.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},t.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},t.prototype.host=function(){return location.hostname},t.prototype.html5Mode=function(){return this._isHtml5},t.prototype.hashPrefix=function(t){return Kc(t)?this._hashPrefix=t:this._hashPrefix},t.prototype.baseHref=function(t){return Kc(t)&&(this._baseHref=t),Yc(this._baseHref)&&(this._baseHref=this.getBaseHref()),this._baseHref},t.prototype.getBaseHref=function(){var t=document.getElementsByTagName("base")[0];return t&&t.href?t.href.replace(/^([^\/:]*:)?\/\/[^\/]*/,""):this._isHtml5?"/":location.pathname||"/"},t.prototype.dispose=function(){},t}();function hh(t){return ld.$injector=rh,ld.$q=Jf,{name:"vanilla.services",$q:Jf,$injector:rh,dispose:function(){return null}}}sh("vanilla.hashBangLocation",!1,uh,fh),sh("vanilla.pushStateLocation",!0,dh,fh),sh("vanilla.memoryLocation",!1,ch,ph),"undefined"!=typeof window&&window,"undefined"==typeof console||console;var mh=function(){function t(t,e,n){var r=this;this.upgrade=t,this.constants=e,this.title=n,this.constants.ExternalName.subscribe(function(t){r.title.setTitle(t)})}return t.prototype.ngDoBootstrap=function(){this.upgrade.bootstrap(document.body,[Oc.name],{strictDi:!1})},t}(),gh=function(){return function(){}}(),vh=function(){return function(){}}(),bh="*";function yh(t,e){return void 0===e&&(e=null),{type:2,steps:t,options:e}}function wh(t){return{type:6,styles:t,offset:null}}function kh(t){Promise.resolve(null).then(t)}var _h=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.init=function(){},t.prototype.play=function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0},t.prototype.triggerMicrotask=function(){var t=this;kh(function(){return t._onFinish()})},t.prototype._onStart=function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]},t.prototype.pause=function(){},t.prototype.restart=function(){},t.prototype.finish=function(){this._onFinish()},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){},t.prototype.setPosition=function(t){},t.prototype.getPosition=function(){return 0},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),xh=function(){function t(t){var e=this;this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var n=0,r=0,i=0,o=this.players.length;0==o?kh(function(){return e._onFinish()}):this.players.forEach(function(t){t.onDone(function(){++n==o&&e._onFinish()}),t.onDestroy(function(){++r==o&&e._onDestroy()}),t.onStart(function(){++i==o&&e._onStart()})}),this.totalTime=this.players.reduce(function(t,e){return Math.max(t,e.totalTime)},0)}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this.players.forEach(function(t){return t.init()})},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype._onStart=function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[])},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(t){return t.play()})},t.prototype.pause=function(){this.players.forEach(function(t){return t.pause()})},t.prototype.restart=function(){this.players.forEach(function(t){return t.restart()})},t.prototype.finish=function(){this._onFinish(),this.players.forEach(function(t){return t.finish()})},t.prototype.destroy=function(){this._onDestroy()},t.prototype._onDestroy=function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(t){return t.destroy()}),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){this.players.forEach(function(t){return t.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype.setPosition=function(t){var e=t*this.totalTime;this.players.forEach(function(t){var n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})},t.prototype.getPosition=function(){var t=0;return this.players.forEach(function(e){var n=e.getPosition();t=Math.min(n,t)}),t},t.prototype.beforeDestroy=function(){this.players.forEach(function(t){t.beforeDestroy&&t.beforeDestroy()})},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),Sh="!";function $h(){throw Error("Host already has a portal attached")}var Th=function(){function t(){}return t.prototype.attach=function(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&$h(),this._attachedHost=t,t.attach(this)},t.prototype.detach=function(){var t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())},Object.defineProperty(t.prototype,"isAttached",{get:function(){return null!=this._attachedHost},enumerable:!0,configurable:!0}),t.prototype.setAttachedHost=function(t){this._attachedHost=t},t}(),Ch=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.component=e,o.viewContainerRef=n,o.injector=r,o.componentFactoryResolver=i,o}return i(e,t),e}(Th),Eh=function(t){function e(e,n,r){var i=t.call(this)||this;return i.templateRef=e,i.viewContainerRef=n,i.context=r,i}return i(e,t),Object.defineProperty(e.prototype,"origin",{get:function(){return this.templateRef.elementRef},enumerable:!0,configurable:!0}),e.prototype.attach=function(e,n){return void 0===n&&(n=this.context),this.context=n,t.prototype.attach.call(this,e)},e.prototype.detach=function(){return this.context=void 0,t.prototype.detach.call(this)},e}(Th),Ah=function(){function t(){this._isDisposed=!1}return t.prototype.hasAttached=function(){return!!this._attachedPortal},t.prototype.attach=function(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&$h(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof Ch?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Eh?(this._attachedPortal=t,this.attachTemplatePortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()},t.prototype.detach=function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()},t.prototype.dispose=function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0},t.prototype.setDisposeFn=function(t){this._disposeFn=t},t.prototype._invokeDisposeFn=function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)},t}(),Dh=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.outletElement=e,o._componentFactoryResolver=n,o._appRef=r,o._defaultInjector=i,o}return i(e,t),e.prototype.attachComponentPortal=function(t){var e,n=this,r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);return t.viewContainerRef?(e=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(function(){return e.destroy()})):(e=r.create(t.injector||this._defaultInjector),this._appRef.attachView(e.hostView),this.setDisposeFn(function(){n._appRef.detachView(e.hostView),e.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(e)),e},e.prototype.attachTemplatePortal=function(t){var e=this,n=t.viewContainerRef,r=n.createEmbeddedView(t.templateRef,t.context);return r.detectChanges(),r.rootNodes.forEach(function(t){return e.outletElement.appendChild(t)}),this.setDisposeFn(function(){var t=n.indexOf(r);-1!==t&&n.remove(t)}),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)},e.prototype._getComponentRootNode=function(t){return t.hostView.rootNodes[0]},e}(Ah),Ph=function(t){function e(e,n){var r=t.call(this)||this;return r._componentFactoryResolver=e,r._viewContainerRef=n,r._isInitialized=!1,r.attached=new an,r}return i(e,t),Object.defineProperty(e.prototype,"portal",{get:function(){return this._attachedPortal},set:function(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&t.prototype.detach.call(this),e&&t.prototype.attach.call(this,e),this._attachedPortal=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attachedRef",{get:function(){return this._attachedRef},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._isInitialized=!0},e.prototype.ngOnDestroy=function(){t.prototype.dispose.call(this),this._attachedPortal=null,this._attachedRef=null},e.prototype.attachComponentPortal=function(e){e.setAttachedHost(this);var n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),i=n.createComponent(r,n.length,e.injector||n.injector);return t.prototype.setDisposeFn.call(this,function(){return i.destroy()}),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i},e.prototype.attachTemplatePortal=function(e){var n=this;e.setAttachedHost(this);var r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return t.prototype.setDisposeFn.call(this,function(){return n._viewContainerRef.clear()}),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r},e}(Ah),Oh=function(){return function(){}}(),Mh=function(){function t(t,e){this._parentInjector=t,this._customTokens=e}return t.prototype.get=function(t,e){var n=this._customTokens.get(t);return void 0!==n?n:this._parentInjector.get(t,e)},t}(),Rh=27;function jh(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}jh.prototype=Object.create(Error.prototype);var Ih=jh;function Nh(t){return function(e){return 0===t?Hu():e.lift(new Fh(t))}}var Fh=function(){function t(t){if(this.total=t,this.total<0)throw new Ih}return t.prototype.call=function(t,e){return e.subscribe(new Uh(t,this.total))},t}(),Uh=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return i(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(x);var Lh=new mt("cdk-dir-doc",{providedIn:"root",factory:function(){return Lt(Gs)}}),Vh=function(){function t(t){if(this.value="ltr",this.change=new an,t){var e=(t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null);this.value="ltr"===e||"rtl"===e?e:"ltr"}}return t.prototype.ngOnDestroy=function(){this.change.complete()},t.ngInjectableDef=ft({factory:function(){return new t(Lt(Lh,8))},token:t,providedIn:"root"}),t}(),Bh=function(){return function(){}}();function Hh(t){return null!=t&&""+t!="false"}function qh(t){return Array.isArray(t)?t:[t]}function zh(t){return null==t?"":"string"==typeof t?t:t+"px"}function Gh(t){return t instanceof $e?t.nativeElement:t}function Wh(t,e,n,r){return f(n)&&(r=n,n=void 0),r?Wh(t,e,n).pipe(W(function(t){return d(t)?r.apply(void 0,t):r(t)})):new T(function(r){!function t(e,n,r,i,o){var a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,r,o),a=function(){return s.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var l=e;e.on(n,r),a=function(){return l.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var u=e;e.addListener(n,r),a=function(){return u.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,d=e.length;c<d;c++)t(e[c],n,r,i,o)}i.add(a)}(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}var Yh=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(g)),Kh=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),Zh=function(t){function e(n,r){void 0===r&&(r=Kh.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(Kh),Qh=new Zh(Yh),Xh=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Jh(t,this.durationSelector))},t}(),Jh=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return i(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=void 0;try{e=(0,this.durationSelector)(t)}catch(r){return this.destination.error(r)}var n=z(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(G);function tm(t){return!d(t)&&t-parseFloat(t)+1>=0}function em(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function nm(t,e){return void 0===e&&(e=Qh),n=function(){return function(t,e,n){void 0===t&&(t=0);var r=-1;return tm(e)?r=Number(e)<1?1:Number(e):R(e)&&(n=e),R(n)||(n=Qh),new T(function(e){var i=tm(t)?t:+t-n.now();return n.schedule(em,i,{index:0,period:r,subscriber:e})})}(t,e)},function(t){return t.lift(new Xh(n))};var n}var rm,im=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new om(t),r=z(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n},t}(),om=function(t){function e(e){var n=t.call(this,e)||this;return n.seenValue=!1,n}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(G),am=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(Yh),sm=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(Zh))(am);function lm(t,e){return new T(e?function(n){return e.schedule(um,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function um(t){t.subscriber.error(t.error)}rm||(rm={});var cm,dm=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return zu(this.value);case"E":return lm(this.error);case"C":return Hu()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),pm=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return i(e,t),e.dispatch=function(t){t.notification.observe(t.destination),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new fm(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(dm.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(dm.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(dm.createComplete()),this.unsubscribe()},e}(x),fm=function(){return function(t,e){this.notification=t,this.destination=e}}(),hm=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new mm(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new A;if(this.isStopped||this.hasError?e=g.EMPTY:(this.observers.push(t),e=new D(this,t)),i&&t.add(t=new pm(t,i)),n)for(var a=0;a<o&&!t.closed;a++)t.next(r[a]);else for(a=0;a<o&&!t.closed;a++)t.next(r[a].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||sm).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(O),mm=function(){return function(t,e){this.time=t,this.value=e}}(),gm="undefined"!=typeof Intl&&Intl.v8BreakIterator,vm=function(){function t(t){this._platformId=t,this.isBrowser=this._platformId?Ks(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!gm)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}return t.ngInjectableDef=ft({factory:function(){return new t(Lt(Jn,8))},token:t,providedIn:"root"}),t}(),bm=function(){return function(){}}();function ym(t){return function(){if(null==cm&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return cm=!0}}))}finally{cm=cm||!1}return cm}()?t:!!t.capture}var wm=function(){function t(t,e){this._ngZone=t,this._platform=e,this._scrolled=new O,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}return t.prototype.register=function(t){var e=this;this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(function(){return e._scrolled.next(t)}))},t.prototype.deregister=function(t){var e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))},t.prototype.scrolled=function(t){var e=this;return void 0===t&&(t=20),this._platform.isBrowser?new T(function(n){e._globalSubscription||e._addGlobalListener();var r=t>0?e._scrolled.pipe(nm(t)).subscribe(n):e._scrolled.subscribe(n);return e._scrolledCount++,function(){r.unsubscribe(),e._scrolledCount--,e._scrolledCount||e._removeGlobalListener()}}):zu()},t.prototype.ngOnDestroy=function(){var t=this;this._removeGlobalListener(),this.scrollContainers.forEach(function(e,n){return t.deregister(n)}),this._scrolled.complete()},t.prototype.ancestorScrolled=function(t,e){var n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Wu(function(t){return!t||n.indexOf(t)>-1}))},t.prototype.getAncestorScrollContainers=function(t){var e=this,n=[];return this.scrollContainers.forEach(function(r,i){e._scrollableContainsElement(i,t)&&n.push(i)}),n},t.prototype._scrollableContainsElement=function(t,e){var n=e.nativeElement,r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1},t.prototype._addGlobalListener=function(){var t=this;this._globalSubscription=this._ngZone.runOutsideAngular(function(){return Wh(window.document,"scroll").subscribe(function(){return t._scrolled.next()})})},t.prototype._removeGlobalListener=function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)},t.ngInjectableDef=ft({factory:function(){return new t(Lt(gr),Lt(vm))},token:t,providedIn:"root"}),t}(),km=function(){return function(){}}(),_m=function(){function t(t,e){var n=this;this._platform=t,e.runOutsideAngular(function(){n._change=t.isBrowser?rt(Wh(window,"resize"),Wh(window,"orientationchange")):zu(),n._invalidateCache=n.change().subscribe(function(){return n._updateViewportSize()})})}return t.prototype.ngOnDestroy=function(){this._invalidateCache.unsubscribe()},t.prototype.getViewportSize=function(){this._viewportSize||this._updateViewportSize();var t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t},t.prototype.getViewportRect=function(){var t=this.getViewportScrollPosition(),e=this.getViewportSize(),n=e.width,r=e.height;return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}},t.prototype.getViewportScrollPosition=function(){if(!this._platform.isBrowser)return{top:0,left:0};var t=document.documentElement,e=t.getBoundingClientRect();return{top:-e.top||document.body.scrollTop||window.scrollY||t.scrollTop||0,left:-e.left||document.body.scrollLeft||window.scrollX||t.scrollLeft||0}},t.prototype.change=function(t){return void 0===t&&(t=20),t>0?this._change.pipe(nm(t)):this._change},t.prototype._updateViewportSize=function(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}},t.ngInjectableDef=ft({factory:function(){return new t(Lt(vm),Lt(gr))},token:t,providedIn:"root"}),t}(),xm=function(){function t(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}return t.prototype.attach=function(){},t.prototype.enable=function(){if(this._canBeEnabled()){var t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=zh(-this._previousScrollPosition.left),t.style.top=zh(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}},t.prototype.disable=function(){if(this._isEnabled){var t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),e.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),e.scrollBehavior=r,n.scrollBehavior=i}},t.prototype._canBeEnabled=function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width},t}();function Sm(){return Error("Scroll strategy has already been attached.")}var $m=function(){function t(t,e,n,r){var i=this;this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=function(){i.disable(),i._overlayRef.hasAttached()&&i._ngZone.run(function(){return i._overlayRef.detach()})}}return t.prototype.attach=function(t){if(this._overlayRef)throw Sm();this._overlayRef=t},t.prototype.enable=function(){var t=this;if(!this._scrollSubscription){var e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(function(){var e=t._viewportRuler.getViewportScrollPosition().top;Math.abs(e-t._initialScrollPosition)>t._config.threshold?t._detach():t._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}},t.prototype.disable=function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)},t}(),Tm=function(){function t(){}return t.prototype.enable=function(){},t.prototype.disable=function(){},t.prototype.attach=function(){},t}();function Cm(t,e){return e.some(function(e){return t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right})}function Em(t,e){return e.some(function(e){return t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right})}var Am=function(){function t(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}return t.prototype.attach=function(t){if(this._overlayRef)throw Sm();this._overlayRef=t},t.prototype.enable=function(){var t=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(function(){if(t._overlayRef.updatePosition(),t._config&&t._config.autoClose){var e=t._overlayRef.overlayElement.getBoundingClientRect(),n=t._viewportRuler.getViewportSize(),r=n.width,i=n.height;Cm(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(t.disable(),t._ngZone.run(function(){return t._overlayRef.detach()}))}}))},t.prototype.disable=function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)},t}(),Dm=function(){function t(t,e,n,r){var i=this;this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=function(){return new Tm},this.close=function(t){return new $m(i._scrollDispatcher,i._ngZone,i._viewportRuler,t)},this.block=function(){return new xm(i._viewportRuler,i._document)},this.reposition=function(t){return new Am(i._scrollDispatcher,i._viewportRuler,i._ngZone,t)},this._document=r}return t.ngInjectableDef=ft({factory:function(){return new t(Lt(wm),Lt(_m),Lt(gr),Lt(Gs))},token:t,providedIn:"root"}),t}(),Pm=function(){return function(t){var e=this;this.scrollStrategy=new Tm,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t&&Object.keys(t).forEach(function(n){void 0!==t[n]&&(e[n]=t[n])})}}(),Om=function(){return function(t,e,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}(),Mm=function(){return function(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}();function Rm(t,e){if("top"!==e&&"bottom"!==e&&"center"!==e)throw Error("ConnectedPosition: Invalid "+t+' "'+e+'". Expected "top", "bottom" or "center".')}function jm(t,e){if("start"!==e&&"end"!==e&&"center"!==e)throw Error("ConnectedPosition: Invalid "+t+' "'+e+'". Expected "start", "end" or "center".')}var Im=function(){function t(t){var e=this;this._attachedOverlays=[],this._keydownListener=function(t){for(var n=e._attachedOverlays,r=n.length-1;r>-1;r--)if(n[r]._keydownEventSubscriptions>0){n[r]._keydownEvents.next(t);break}},this._document=t}return t.prototype.ngOnDestroy=function(){this._detach()},t.prototype.add=function(t){this.remove(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener,!0),this._isAttached=!0),this._attachedOverlays.push(t)},t.prototype.remove=function(t){var e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this._detach()},t.prototype._detach=function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener,!0),this._isAttached=!1)},t.ngInjectableDef=ft({factory:function(){return new t(Lt(Gs))},token:t,providedIn:"root"}),t}(),Nm=function(){function t(t){this._document=t}return t.prototype.ngOnDestroy=function(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)},t.prototype.getContainerElement=function(){return this._containerElement||this._createContainer(),this._containerElement},t.prototype._createContainer=function(){var t=this._document.createElement("div");t.classList.add("cdk-overlay-container"),this._document.body.appendChild(t),this._containerElement=t},t.ngInjectableDef=ft({factory:function(){return new t(Lt(Gs))},token:t,providedIn:"root"}),t}(),Fm=function(){function t(t,e,n,r,i,o,a,s){var l=this;this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=o,this._document=a,this._location=s,this._backdropElement=null,this._backdropClick=new O,this._attachments=new O,this._detachments=new O,this._locationChanges=g.EMPTY,this._keydownEventsObservable=new T(function(t){var e=l._keydownEvents.subscribe(t);return l._keydownEventSubscriptions++,function(){e.unsubscribe(),l._keydownEventSubscriptions--}}),this._keydownEvents=new O,this._keydownEventSubscriptions=0,r.scrollStrategy&&r.scrollStrategy.attach(this),this._positionStrategy=r.positionStrategy}return Object.defineProperty(t.prototype,"overlayElement",{get:function(){return this._pane},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backdropElement",{get:function(){return this._backdropElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._host},enumerable:!0,configurable:!0}),t.prototype.attach=function(t){var e=this,n=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._config.scrollStrategy&&this._config.scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(Nh(1)).subscribe(function(){e.hasAttached()&&e.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe(function(){return e.dispose()})),n},t.prototype.detach=function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._config.scrollStrategy&&this._config.scrollStrategy.disable();var t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),t}},t.prototype.dispose=function(){var t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._config.scrollStrategy&&this._config.scrollStrategy.disable(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()},t.prototype.hasAttached=function(){return this._portalOutlet.hasAttached()},t.prototype.backdropClick=function(){return this._backdropClick.asObservable()},t.prototype.attachments=function(){return this._attachments.asObservable()},t.prototype.detachments=function(){return this._detachments.asObservable()},t.prototype.keydownEvents=function(){return this._keydownEventsObservable},t.prototype.getConfig=function(){return this._config},t.prototype.updatePosition=function(){this._positionStrategy&&this._positionStrategy.apply()},t.prototype.updatePositionStrategy=function(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))},t.prototype.updateSize=function(t){this._config=o({},this._config,t),this._updateElementSize()},t.prototype.setDirection=function(t){this._config=o({},this._config,{direction:t}),this._updateElementDirection()},t.prototype.addPanelClass=function(t){this._pane&&this._toggleClasses(this._pane,t,!0)},t.prototype.removePanelClass=function(t){this._pane&&this._toggleClasses(this._pane,t,!1)},t.prototype.getDirection=function(){var t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"},t.prototype._updateElementDirection=function(){this._host.setAttribute("dir",this.getDirection())},t.prototype._updateElementSize=function(){var t=this._pane.style;t.width=zh(this._config.width),t.height=zh(this._config.height),t.minWidth=zh(this._config.minWidth),t.minHeight=zh(this._config.minHeight),t.maxWidth=zh(this._config.maxWidth),t.maxHeight=zh(this._config.maxHeight)},t.prototype._togglePointerEvents=function(t){this._pane.style.pointerEvents=t?"auto":"none"},t.prototype._attachBackdrop=function(){var t=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",function(e){return t._backdropClick.next(e)}),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){t._backdropElement&&t._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")},t.prototype._updateStackingOrder=function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)},t.prototype.detachBackdrop=function(){var t=this,e=this._backdropElement;if(e){var n,r=function(){e&&e.parentNode&&e.parentNode.removeChild(e),t._backdropElement==e&&(t._backdropElement=null),t._config.backdropClass&&t._toggleClasses(e,t._config.backdropClass,!1),clearTimeout(n)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(function(){e.addEventListener("transitionend",r)}),e.style.pointerEvents="none",n=this._ngZone.runOutsideAngular(function(){return setTimeout(r,500)})}},t.prototype._toggleClasses=function(t,e,n){var r=t.classList;qh(e).forEach(function(t){n?r.add(t):r.remove(t)})},t.prototype._detachContentWhenStable=function(){var t=this;this._ngZone.runOutsideAngular(function(){var e,n=t._ngZone.onStable.asObservable().pipe((e=rt(t._attachments,t._detachments),function(t){return t.lift(new im(e))})).subscribe(function(){t._pane&&t._host&&0!==t._pane.children.length||(t._pane&&t._config.panelClass&&t._toggleClasses(t._pane,t._config.panelClass,!1),t._host&&t._host.parentElement&&(t._previousHostParent=t._host.parentElement,t._previousHostParent.removeChild(t._host)),n.unsubscribe())})})},t}(),Um=function(){function t(t,e,n,r,i){var o=this;this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this.scrollables=[],this._preferredPositions=[],this._positionChanges=new O,this._resizeSubscription=g.EMPTY,this._offsetX=0,this._offsetY=0,this._positionChangeSubscriptions=0,this._appliedPanelClasses=[],this.positionChanges=new T(function(t){var e=o._positionChanges.subscribe(t);return o._positionChangeSubscriptions++,function(){e.unsubscribe(),o._positionChangeSubscriptions--}}),this.setOrigin(t)}return Object.defineProperty(t.prototype,"positions",{get:function(){return this._preferredPositions},enumerable:!0,configurable:!0}),t.prototype.attach=function(t){var e=this;if(this._overlayRef&&t!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),t.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(function(){e._isInitialRender=!0,e.apply()})},t.prototype.apply=function(){if(!(this._isDisposed||this._platform&&!this._platform.isBrowser))if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)this.reapplyLastPosition();else{this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();for(var t,e=this._originRect,n=this._overlayRect,r=this._viewportRect,i=[],o=0,a=this._preferredPositions;o<a.length;o++){var s=a[o],l=this._getOriginPoint(e,s),u=this._getOverlayPoint(l,n,s),c=this._getOverlayFit(u,n,r,s);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,l);this._canFitWithFlexibleDimensions(c,u,r)?i.push({position:s,origin:l,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(l,s)}):(!t||t.overlayFit.visibleArea<c.visibleArea)&&(t={overlayFit:c,overlayPoint:u,originPoint:l,position:s,overlayRect:n})}if(i.length){for(var d=null,p=-1,f=0,h=i;f<h.length;f++){var m=h[f],g=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);g>p&&(p=g,d=m)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(t.position,t.originPoint);this._applyPosition(t.position,t.originPoint)}},t.prototype.detach=function(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()},t.prototype.dispose=function(){this._isDisposed||(this._boundingBox&&Lm(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)},t.prototype.reapplyLastPosition=function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}},t.prototype.withScrollableContainers=function(t){this.scrollables=t},t.prototype.withPositions=function(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this},t.prototype.withViewportMargin=function(t){return this._viewportMargin=t,this},t.prototype.withFlexibleDimensions=function(t){return void 0===t&&(t=!0),this._hasFlexibleDimensions=t,this},t.prototype.withGrowAfterOpen=function(t){return void 0===t&&(t=!0),this._growAfterOpen=t,this},t.prototype.withPush=function(t){return void 0===t&&(t=!0),this._canPush=t,this},t.prototype.withLockedPosition=function(t){return void 0===t&&(t=!0),this._positionLocked=t,this},t.prototype.setOrigin=function(t){return this._origin=t,this},t.prototype.withDefaultOffsetX=function(t){return this._offsetX=t,this},t.prototype.withDefaultOffsetY=function(t){return this._offsetY=t,this},t.prototype.withTransformOriginOn=function(t){return this._transformOriginSelector=t,this},t.prototype._getOriginPoint=function(t,e){var n;if("center"==e.originX)n=t.left+t.width/2;else{var r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return{x:n,y:"center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom}},t.prototype._getOverlayPoint=function(t,e,n){var r;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,{x:t.x+r,y:t.y+("center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height)}},t.prototype._getOverlayFit=function(t,e,n,r){var i=t.x,o=t.y,a=this._getOffset(r,"x"),s=this._getOffset(r,"y");a&&(i+=a),s&&(o+=s);var l=0-o,u=o+e.height-n.height,c=this._subtractOverflows(e.width,0-i,i+e.width-n.width),d=this._subtractOverflows(e.height,l,u),p=c*d;return{visibleArea:p,isCompletelyWithinViewport:e.width*e.height===p,fitsInViewportVertically:d===e.height,fitsInViewportHorizontally:c==e.width}},t.prototype._canFitWithFlexibleDimensions=function(t,e,n){if(this._hasFlexibleDimensions){var r=n.bottom-e.y,i=n.right-e.x,o=this._overlayRef.getConfig().minHeight,a=this._overlayRef.getConfig().minWidth;return(t.fitsInViewportVertically||null!=o&&o<=r)&&(t.fitsInViewportHorizontally||null!=a&&a<=i)}},t.prototype._pushOverlayOnScreen=function(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};var r,i,o=this._viewportRect,a=Math.max(t.x+e.width-o.right,0),s=Math.max(t.y+e.height-o.bottom,0),l=Math.max(o.top-n.top-t.y,0),u=Math.max(o.left-n.left-t.x,0);return this._previousPushAmount={x:r=e.width<=o.width?u||-a:t.x<this._viewportMargin?o.left-n.left-t.x:0,y:i=e.height<=o.height?l||-s:t.y<this._viewportMargin?o.top-n.top-t.y:0},{x:t.x+r,y:t.y+i}},t.prototype._applyPosition=function(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChangeSubscriptions>0){var n=this._getScrollVisibility(),r=new Mm(t,n);this._positionChanges.next(r)}this._isInitialRender=!1},t.prototype._setTransformOrigin=function(t){if(this._transformOriginSelector){var e,n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r=t.overlayY;e="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(var i=0;i<n.length;i++)n[i].style.transformOrigin=e+" "+r}},t.prototype._calculateBoundingBoxRect=function(t,e){var n,r,i,o,a,s,l=this._viewportRect,u=this._isRtl();if("top"===e.overlayY)n=l.height-(r=t.y)+this._viewportMargin;else if("bottom"===e.overlayY)n=l.height-(i=l.height-t.y+2*this._viewportMargin)+this._viewportMargin;else{var c=Math.min(l.bottom-t.y+l.top,t.y),d=this._lastBoundingBoxSize.height;r=t.y-c,(n=2*c)>d&&!this._isInitialRender&&!this._growAfterOpen&&(r=t.y-d/2)}if("end"===e.overlayX&&!u||"start"===e.overlayX&&u)s=l.right-t.x+this._viewportMargin,o=t.x-l.left;else if("start"===e.overlayX&&!u||"end"===e.overlayX&&u)a=t.x,o=l.right-t.x;else{c=Math.min(l.right-t.x+l.left,t.x);var p=this._lastBoundingBoxSize.width;a=t.x-c,(o=2*c)>p&&!this._isInitialRender&&!this._growAfterOpen&&(a=t.x-p/2)}return{top:r,left:a,bottom:i,right:s,width:o,height:n}},t.prototype._setBoundingBoxStyles=function(t,e){var n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));var r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right="",r.width=r.height="100%";else{var i=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=zh(n.height),r.top=zh(n.top),r.bottom=zh(n.bottom),r.width=zh(n.width),r.left=zh(n.left),r.right=zh(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",i&&(r.maxHeight=zh(i)),o&&(r.maxWidth=zh(o))}this._lastBoundingBoxSize=n,Lm(this._boundingBox.style,r)},t.prototype._resetBoundingBoxStyles=function(){Lm(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})},t.prototype._resetOverlayElementStyles=function(){Lm(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})},t.prototype._setOverlayElementStyles=function(t,e){var n={};if(this._hasExactPosition()){var r=this._viewportRuler.getViewportScrollPosition();Lm(n,this._getExactOverlayY(e,t,r)),Lm(n,this._getExactOverlayX(e,t,r))}else n.position="static";var i="",o=this._getOffset(e,"x"),a=this._getOffset(e,"y");o&&(i+="translateX("+o+"px) "),a&&(i+="translateY("+a+"px)"),n.transform=i.trim(),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxHeight&&(n.maxHeight=""),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxWidth&&(n.maxWidth=""),Lm(this._pane.style,n)},t.prototype._getExactOverlayY=function(t,e,n){var r={top:null,bottom:null},i=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));var o=this._overlayContainer?this._overlayContainer.getContainerElement().getBoundingClientRect().top:0;return i.y-=o,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=zh(i.y),r},t.prototype._getExactOverlayX=function(t,e,n){var r={left:null,right:null},i=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n)),"right"==(this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left")?r.right=this._document.documentElement.clientWidth-(i.x+this._overlayRect.width)+"px":r.left=zh(i.x),r},t.prototype._getScrollVisibility=function(){var t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this.scrollables.map(function(t){return t.getElementRef().nativeElement.getBoundingClientRect()});return{isOriginClipped:Em(t,n),isOriginOutsideView:Cm(t,n),isOverlayClipped:Em(e,n),isOverlayOutsideView:Cm(e,n)}},t.prototype._subtractOverflows=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(t,e){return t-Math.max(e,0)},t)},t.prototype._getNarrowedViewportRect=function(){var t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}},t.prototype._isRtl=function(){return"rtl"===this._overlayRef.getDirection()},t.prototype._hasExactPosition=function(){return!this._hasFlexibleDimensions||this._isPushed},t.prototype._getOffset=function(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY},t.prototype._validatePositions=function(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach(function(t){jm("originX",t.originX),Rm("originY",t.originY),jm("overlayX",t.overlayX),Rm("overlayY",t.overlayY)})},t.prototype._addPanelClasses=function(t){var e=this;this._pane&&qh(t).forEach(function(t){-1===e._appliedPanelClasses.indexOf(t)&&(e._appliedPanelClasses.push(t),e._pane.classList.add(t))})},t.prototype._clearPanelClasses=function(){var t=this;this._pane&&(this._appliedPanelClasses.forEach(function(e){return t._pane.classList.remove(e)}),this._appliedPanelClasses=[])},t.prototype._getOriginRect=function(){var t=this._origin;return t instanceof $e?t.nativeElement.getBoundingClientRect():t instanceof HTMLElement?t.getBoundingClientRect():{top:t.y,bottom:t.y,left:t.x,right:t.x,height:0,width:0}},t}();function Lm(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var Vm=function(){function t(t,e,n,r,i,o){this._preferredPositions=[],this._positionStrategy=new Um(n,r,i,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e)}return Object.defineProperty(t.prototype,"_isRtl",{get:function(){return"rtl"===this._overlayRef.getDirection()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onPositionChange",{get:function(){return this._positionStrategy.positionChanges},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._preferredPositions},enumerable:!0,configurable:!0}),t.prototype.attach=function(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)},t.prototype.dispose=function(){this._positionStrategy.dispose()},t.prototype.detach=function(){this._positionStrategy.detach()},t.prototype.apply=function(){this._positionStrategy.apply()},t.prototype.recalculateLastPosition=function(){this._positionStrategy.reapplyLastPosition()},t.prototype.withScrollableContainers=function(t){this._positionStrategy.withScrollableContainers(t)},t.prototype.withFallbackPosition=function(t,e,n,r){var i=new Om(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this},t.prototype.withDirection=function(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this},t.prototype.withOffsetX=function(t){return this._positionStrategy.withDefaultOffsetX(t),this},t.prototype.withOffsetY=function(t){return this._positionStrategy.withDefaultOffsetY(t),this},t.prototype.withLockedPosition=function(t){return this._positionStrategy.withLockedPosition(t),this},t.prototype.withPositions=function(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this},t.prototype.setOrigin=function(t){return this._positionStrategy.setOrigin(t),this},t}(),Bm=function(){function t(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return t.prototype.attach=function(t){var e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1},t.prototype.top=function(t){return void 0===t&&(t=""),this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this},t.prototype.left=function(t){return void 0===t&&(t=""),this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this},t.prototype.bottom=function(t){return void 0===t&&(t=""),this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this},t.prototype.right=function(t){return void 0===t&&(t=""),this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this},t.prototype.width=function(t){return void 0===t&&(t=""),this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this},t.prototype.height=function(t){return void 0===t&&(t=""),this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this},t.prototype.centerHorizontally=function(t){return void 0===t&&(t=""),this.left(t),this._justifyContent="center",this},t.prototype.centerVertically=function(t){return void 0===t&&(t=""),this.top(t),this._alignItems="center",this},t.prototype.apply=function(){if(this._overlayRef&&this._overlayRef.hasAttached()){var t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig();t.position=this._cssPosition,t.marginLeft="100%"===n.width?"0":this._leftOffset,t.marginTop="100%"===n.height?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,"100%"===n.width?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems="100%"===n.height?"flex-start":this._alignItems}},t.prototype.dispose=function(){if(!this._isDisposed&&this._overlayRef){var t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},t}(),Hm=function(){function t(t,e,n,r){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=r}return t.prototype.global=function(){return new Bm},t.prototype.connectedTo=function(t,e,n){return new Vm(e,n,t,this._viewportRuler,this._document)},t.prototype.flexibleConnectedTo=function(t){return new Um(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)},t.ngInjectableDef=ft({factory:function(){return new t(Lt(_m),Lt(Gs),Lt(vm,8),Lt(Nm,8))},token:t,providedIn:"root"}),t}(),qm=0,zm=function(){function t(t,e,n,r,i,o,a,s,l,u){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=o,this._ngZone=a,this._document=s,this._directionality=l,this._location=u}return t.prototype.create=function(t){var e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new Pm(t);return i.direction=i.direction||this._directionality.value,new Fm(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location)},t.prototype.position=function(){return this._positionBuilder},t.prototype._createPaneElement=function(t){var e=this._document.createElement("div");return e.id="cdk-overlay-"+qm++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e},t.prototype._createHostElement=function(){var t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t},t.prototype._createPortalOutlet=function(t){return this._appRef||(this._appRef=this._injector.get(Mr)),new Dh(t,this._componentFactoryResolver,this._appRef,this._injector)},t}(),Gm=new mt("cdk-connected-overlay-scroll-strategy");function Wm(t){return function(){return t.scrollStrategies.reposition()}}var Ym=function(){return function(){}}(),Km=function(){return function(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}();function Zm(){throw Error("Attempting to attach dialog content after content is already attached")}var Qm=function(t){function e(e,n,r,i,o){var a=t.call(this)||this;return a._elementRef=e,a._focusTrapFactory=n,a._changeDetectorRef=r,a._document=i,a._config=o,a._elementFocusedBeforeDialogWasOpened=null,a._state="enter",a._animationStateChanged=new an,a._ariaLabelledBy=null,a}return i(e,t),e.prototype.attachComponentPortal=function(t){return this._portalOutlet.hasAttached()&&Zm(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachComponentPortal(t)},e.prototype.attachTemplatePortal=function(t){return this._portalOutlet.hasAttached()&&Zm(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachTemplatePortal(t)},e.prototype._trapFocus=function(){this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)),this._config.autoFocus&&this._focusTrap.focusInitialElementWhenReady()},e.prototype._restoreFocus=function(){var t=this._elementFocusedBeforeDialogWasOpened;this._config.restoreFocus&&t&&"function"==typeof t.focus&&t.focus(),this._focusTrap&&this._focusTrap.destroy()},e.prototype._savePreviouslyFocusedElement=function(){var t=this;this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then(function(){return t._elementRef.nativeElement.focus()}))},e.prototype._onAnimationDone=function(t){"enter"===t.toState?this._trapFocus():"exit"===t.toState&&this._restoreFocus(),this._animationStateChanged.emit(t)},e.prototype._onAnimationStart=function(t){this._animationStateChanged.emit(t)},e.prototype._startExitAnimation=function(){this._state="exit",this._changeDetectorRef.markForCheck()},e}(Ah),Xm=0,Jm=function(){function t(t,e,n,r){void 0===r&&(r="mat-dialog-"+Xm++);var i=this;this._overlayRef=t,this._containerInstance=e,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new O,this._afterClosed=new O,this._beforeClosed=new O,e._id=r,e._animationStateChanged.pipe(Wu(function(t){return"done"===t.phaseName&&"enter"===t.toState}),Nh(1)).subscribe(function(){i._afterOpened.next(),i._afterOpened.complete()}),e._animationStateChanged.pipe(Wu(function(t){return"done"===t.phaseName&&"exit"===t.toState}),Nh(1)).subscribe(function(){return i._overlayRef.dispose()}),t.detachments().subscribe(function(){i._beforeClosed.next(i._result),i._beforeClosed.complete(),i._afterClosed.next(i._result),i._afterClosed.complete(),i.componentInstance=null,i._overlayRef.dispose()}),t.keydownEvents().pipe(Wu(function(t){return t.keyCode===Rh&&!i.disableClose})).subscribe(function(){return i.close()})}return t.prototype.close=function(t){var e=this;this._result=t,this._containerInstance._animationStateChanged.pipe(Wu(function(t){return"start"===t.phaseName}),Nh(1)).subscribe(function(){e._beforeClosed.next(t),e._beforeClosed.complete(),e._overlayRef.detachBackdrop()}),this._containerInstance._startExitAnimation()},t.prototype.afterOpened=function(){return this._afterOpened.asObservable()},t.prototype.afterClosed=function(){return this._afterClosed.asObservable()},t.prototype.beforeClosed=function(){return this._beforeClosed.asObservable()},t.prototype.backdropClick=function(){return this._overlayRef.backdropClick()},t.prototype.keydownEvents=function(){return this._overlayRef.keydownEvents()},t.prototype.updatePosition=function(t){var e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this},t.prototype.updateSize=function(t,e){return void 0===t&&(t=""),void 0===e&&(e=""),this._getPositionStrategy().width(t).height(e),this._overlayRef.updatePosition(),this},t.prototype.addPanelClass=function(t){return this._overlayRef.addPanelClass(t),this},t.prototype.removePanelClass=function(t){return this._overlayRef.removePanelClass(t),this},t.prototype.afterOpen=function(){return this.afterOpened()},t.prototype.beforeClose=function(){return this.beforeClosed()},t.prototype._getPositionStrategy=function(){return this._overlayRef.getConfig().positionStrategy},t}(),tg=new mt("MatDialogData"),eg=new mt("mat-dialog-default-options"),ng=new mt("mat-dialog-scroll-strategy");function rg(t){return function(){return t.scrollStrategies.block()}}var ig=function(){function t(t,e,n,r,i,o,a){var s,l=this;this._overlay=t,this._injector=e,this._location=n,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new O,this._afterOpenedAtThisLevel=new O,this._ariaHiddenElements=new Map,this.afterAllClosed=(s=function(){return l.openDialogs.length?l._afterAllClosed:l._afterAllClosed.pipe(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];R(n)?t.pop():n=null;var r=t.length;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return nt(1)(zu.apply(void 0,t))}(1!==r||n?r>0?Z(t,n):Hu(n):qu(t[0]),e)}}(void 0))},new T(function(t){var e;try{e=s()}catch(n){return void t.error(n)}return(e?Q(e):Hu()).subscribe(t)})),this._scrollStrategy=i}return Object.defineProperty(t.prototype,"openDialogs",{get:function(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterOpened",{get:function(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterOpen",{get:function(){return this.afterOpened},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_afterAllClosed",{get:function(){var t=this._parentDialog;return t?t._afterAllClosed:this._afterAllClosedAtThisLevel},enumerable:!0,configurable:!0}),t.prototype.open=function(t,e){var n=this;if((e=function(t,e){return o({},e,t)}(e,this._defaultOptions||new Km)).id&&this.getDialogById(e.id))throw Error('Dialog with id "'+e.id+'" exists already. The dialog id must be unique.');var r=this._createOverlay(e),i=this._attachDialogContainer(r,e),a=this._attachDialogContent(t,i,r,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.afterClosed().subscribe(function(){return n._removeOpenDialog(a)}),this.afterOpened.next(a),a},t.prototype.closeAll=function(){this._closeDialogs(this.openDialogs)},t.prototype.getDialogById=function(t){return this.openDialogs.find(function(e){return e.id===t})},t.prototype.ngOnDestroy=function(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()},t.prototype._createOverlay=function(t){var e=this._getOverlayConfig(t);return this._overlay.create(e)},t.prototype._getOverlayConfig=function(t){var e=new Pm({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e},t.prototype._attachDialogContainer=function(t,e){var n=new Mh(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[Km,e]])),r=new Ch(Qm,e.viewContainerRef,n);return t.attach(r).instance},t.prototype._attachDialogContent=function(t,e,n,r){var i=new Jm(n,e,this._location,r.id);if(r.hasBackdrop&&n.backdropClick().subscribe(function(){i.disableClose||i.close()}),t instanceof sn)e.attachTemplatePortal(new Eh(t,null,{$implicit:r.data,dialogRef:i}));else{var o=this._createInjector(r,i,e),a=e.attachComponentPortal(new Ch(t,void 0,o));i.componentInstance=a.instance}return i.updateSize(r.width,r.height).updatePosition(r.position),i},t.prototype._createInjector=function(t,e,n){var r=t&&t.viewContainerRef&&t.viewContainerRef.injector,i=new WeakMap([[Qm,n],[tg,t.data],[Jm,e]]);return!t.direction||r&&r.get(Vh,null)||i.set(Vh,{value:t.direction,change:zu()}),new Mh(r||this._injector,i)},t.prototype._removeOpenDialog=function(t){var e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach(function(t,e){t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))},t.prototype._hideNonDialogContentFromAssistiveTechnology=function(){var t=this._overlayContainer.getContainerElement();if(t.parentElement)for(var e=t.parentElement.children,n=e.length-1;n>-1;n--){var r=e[n];r===t||"SCRIPT"===r.nodeName||"STYLE"===r.nodeName||r.hasAttribute("aria-live")||(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}},t.prototype._closeDialogs=function(t){for(var e=t.length;e--;)t[e].close()},t}(),og=function(){function t(t,e,n){this.dialogRef=t,this._elementRef=e,this._dialog=n,this.ariaLabel="Close dialog"}return t.prototype.ngOnInit=function(){if(this.dialogRef||(this.dialogRef=function(t,e){for(var n=t.nativeElement.parentElement;n&&!n.classList.contains("mat-dialog-container");)n=n.parentElement;return n?e.find(function(t){return t.id===n.id}):null}(this._elementRef,this._dialog.openDialogs)),void 0===this._hasAriaLabel){var t=this._elementRef.nativeElement;if(t.hasAttribute("mat-icon-button"))this._hasAriaLabel=!0;else{var e=t.textContent;this._hasAriaLabel=!e||0===e.trim().length}}},t.prototype.ngOnChanges=function(t){var e=t._matDialogClose||t._matDialogCloseResult;e&&(this.dialogResult=e.currentValue),t.ariaLabel&&(this._hasAriaLabel=!!t.ariaLabel.currentValue)},t}(),ag=function(){return function(){}}(),sg=function(){return function(){}}(),lg=function(){return function(){}}(),ug=function(){function t(t){this._platform=t}return t.prototype.isDisabled=function(t){return t.hasAttribute("disabled")},t.prototype.isVisible=function(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility},t.prototype.isTabbable=function(t){if(!this._platform.isBrowser)return!1;var e,n=function(t){try{return t.frameElement}catch(lk){return null}}((e=t).ownerDocument&&e.ownerDocument.defaultView||window);if(n){var r=n&&n.nodeName.toLowerCase();if(-1===dg(n))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===r)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(n))return!1}var i=t.nodeName.toLowerCase(),o=dg(t);if(t.hasAttribute("contenteditable"))return-1!==o;if("iframe"===i)return!1;if("audio"===i){if(!t.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===i){if(!t.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==i||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){var e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&t.tabIndex>=0},t.prototype.isFocusable=function(t){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){var e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||cg(t))}(t)&&!this.isDisabled(t)&&this.isVisible(t)},t.ngInjectableDef=ft({factory:function(){return new t(Lt(vm))},token:t,providedIn:"root"}),t}();function cg(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;var e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function dg(t){if(!cg(t))return null;var e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}var pg=function(){function t(t,e,n,r,i){void 0===i&&(i=!1);var o=this;this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this._startAnchorListener=function(){return o.focusLastTabbableElement()},this._endAnchorListener=function(){return o.focusFirstTabbableElement()},this._enabled=!0,i||this.attachAnchors()}return Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){var t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this._startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this._endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null},t.prototype.attachAnchors=function(){var t=this;return!!this._hasAttached||(this._ngZone.runOutsideAngular(function(){t._startAnchor||(t._startAnchor=t._createAnchor(),t._startAnchor.addEventListener("focus",t._startAnchorListener)),t._endAnchor||(t._endAnchor=t._createAnchor(),t._endAnchor.addEventListener("focus",t._endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)},t.prototype.focusInitialElementWhenReady=function(){var t=this;return new Promise(function(e){t._executeOnStable(function(){return e(t.focusInitialElement())})})},t.prototype.focusFirstTabbableElementWhenReady=function(){var t=this;return new Promise(function(e){t._executeOnStable(function(){return e(t.focusFirstTabbableElement())})})},t.prototype.focusLastTabbableElementWhenReady=function(){var t=this;return new Promise(function(e){t._executeOnStable(function(){return e(t.focusLastTabbableElement())})})},t.prototype._getRegionBoundary=function(t){for(var e=this._element.querySelectorAll("[cdk-focus-region-"+t+"], [cdkFocusRegion"+t+"], [cdk-focus-"+t+"]"),n=0;n<e.length;n++)e[n].hasAttribute("cdk-focus-"+t)?console.warn("Found use of deprecated attribute 'cdk-focus-"+t+"', use 'cdkFocusRegion"+t+"' instead. The deprecated attribute will be removed in 8.0.0.",e[n]):e[n].hasAttribute("cdk-focus-region-"+t)&&console.warn("Found use of deprecated attribute 'cdk-focus-region-"+t+"', use 'cdkFocusRegion"+t+"' instead. The deprecated attribute will be removed in 8.0.0.",e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)},t.prototype.focusInitialElement=function(){var t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return t?(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),Ne()&&!this._checker.isFocusable(t)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",t),t.focus(),!0):this.focusFirstTabbableElement()},t.prototype.focusFirstTabbableElement=function(){var t=this._getRegionBoundary("start");return t&&t.focus(),!!t},t.prototype.focusLastTabbableElement=function(){var t=this._getRegionBoundary("end");return t&&t.focus(),!!t},t.prototype.hasAttached=function(){return this._hasAttached},t.prototype._getFirstTabbableElement=function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null},t.prototype._getLastTabbableElement=function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=e.length-1;n>=0;n--){var r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null},t.prototype._createAnchor=function(){var t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t},t.prototype._toggleAnchorTabIndex=function(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")},t.prototype._executeOnStable=function(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(Nh(1)).subscribe(t)},t}(),fg=function(){function t(t,e,n){this._checker=t,this._ngZone=e,this._document=n}return t.prototype.create=function(t,e){return void 0===e&&(e=!1),new pg(t,this._checker,this._ngZone,this._document,e)},t.ngInjectableDef=ft({factory:function(){return new t(Lt(ug),Lt(gr),Lt(Gs))},token:t,providedIn:"root"}),t}(),hg=650,mg=ym({passive:!0,capture:!0}),gg=function(){function t(t,e){var n=this;this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._documentKeydownListener=function(){n._lastTouchTarget=null,n._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=function(){n._lastTouchTarget||n._setOriginForCurrentEventQueue("mouse")},this._documentTouchstartListener=function(t){null!=n._touchTimeoutId&&clearTimeout(n._touchTimeoutId),n._lastTouchTarget=t.target,n._touchTimeoutId=setTimeout(function(){return n._lastTouchTarget=null},hg)},this._windowFocusListener=function(){n._windowFocused=!0,n._windowFocusTimeoutId=setTimeout(function(){return n._windowFocused=!1})}}return t.prototype.monitor=function(t,e){var n=this;if(void 0===e&&(e=!1),!this._platform.isBrowser)return zu(null);var r=Gh(t);if(this._elementInfo.has(r)){var i=this._elementInfo.get(r);return i.checkChildren=e,i.subject.asObservable()}var o={unlisten:function(){},checkChildren:e,subject:new O};this._elementInfo.set(r,o),this._incrementMonitoredElementCount();var a=function(t){return n._onFocus(t,r)},s=function(t){return n._onBlur(t,r)};return this._ngZone.runOutsideAngular(function(){r.addEventListener("focus",a,!0),r.addEventListener("blur",s,!0)}),o.unlisten=function(){r.removeEventListener("focus",a,!0),r.removeEventListener("blur",s,!0)},o.subject.asObservable()},t.prototype.stopMonitoring=function(t){var e=Gh(t),n=this._elementInfo.get(e);n&&(n.unlisten(),n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._decrementMonitoredElementCount())},t.prototype.focusVia=function(t,e,n){var r=Gh(t);this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n)},t.prototype.ngOnDestroy=function(){var t=this;this._elementInfo.forEach(function(e,n){return t.stopMonitoring(n)})},t.prototype._toggleClass=function(t,e,n){n?t.classList.add(e):t.classList.remove(e)},t.prototype._setClasses=function(t,e){this._elementInfo.get(t)&&(this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e))},t.prototype._setOriginForCurrentEventQueue=function(t){var e=this;this._ngZone.runOutsideAngular(function(){e._origin=t,e._originTimeoutId=setTimeout(function(){return e._origin=null},1)})},t.prototype._wasCausedByTouch=function(t){var e=t.target;return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))},t.prototype._onFocus=function(t,e){var n=this._elementInfo.get(e);if(n&&(n.checkChildren||e===t.target)){var r=this._origin;r||(r=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"),this._setClasses(e,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}},t.prototype._onBlur=function(t,e){var n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))},t.prototype._emitOrigin=function(t,e){this._ngZone.run(function(){return t.next(e)})},t.prototype._incrementMonitoredElementCount=function(){var t=this;1==++this._monitoredElementCount&&this._platform.isBrowser&&this._ngZone.runOutsideAngular(function(){document.addEventListener("keydown",t._documentKeydownListener,mg),document.addEventListener("mousedown",t._documentMousedownListener,mg),document.addEventListener("touchstart",t._documentTouchstartListener,mg),window.addEventListener("focus",t._windowFocusListener)})},t.prototype._decrementMonitoredElementCount=function(){--this._monitoredElementCount||(document.removeEventListener("keydown",this._documentKeydownListener,mg),document.removeEventListener("mousedown",this._documentMousedownListener,mg),document.removeEventListener("touchstart",this._documentTouchstartListener,mg),window.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId))},t.ngInjectableDef=ft({factory:function(){return new t(Lt(gr),Lt(vm))},token:t,providedIn:"root"}),t}(),vg=new mt("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),bg=function(){function t(t,e){this._sanityChecksEnabled=t,this._hammerLoader=e,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._hasDoneGlobalChecks=!0)}return t.prototype._areChecksEnabled=function(){return this._sanityChecksEnabled&&Ne()&&!this._isTestEnv()},t.prototype._isTestEnv=function(){var t=this._window;return t&&(t.__karma__||t.jasmine)},t.prototype._checkDoctypeIsDefined=function(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")},t.prototype._checkThemeIsPresent=function(){if(this._document&&this._document.body&&"function"==typeof getComputedStyle){var t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);var e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}},t.prototype._checkHammerIsAvailable=function(){!this._hasCheckedHammer&&this._window&&(!this._areChecksEnabled()||this._window.Hammer||this._hammerLoader||console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)},t}();function yg(t){return function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(this,e)||this;return r._disabled=!1,r}return i(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=Hh(t)},enumerable:!0,configurable:!0}),e}(t)}function wg(t,e){return function(t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return i.color=e,i}return i(n,t),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(t){var n=t||e;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),n&&this._elementRef.nativeElement.classList.add("mat-"+n),this._color=n)},enumerable:!0,configurable:!0}),n}(t)}function kg(t){return function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(this,e)||this;return r._disableRipple=!1,r}return i(e,t),Object.defineProperty(e.prototype,"disableRipple",{get:function(){return this._disableRipple},set:function(t){this._disableRipple=Hh(t)},enumerable:!0,configurable:!0}),e}(t)}var _g=function(){var t={FADING_IN:0,VISIBLE:1,FADING_OUT:2,HIDDEN:3};return t[t.FADING_IN]="FADING_IN",t[t.VISIBLE]="VISIBLE",t[t.FADING_OUT]="FADING_OUT",t[t.HIDDEN]="HIDDEN",t}(),xg=function(){function t(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=_g.HIDDEN}return t.prototype.fadeOut=function(){this._renderer.fadeOutRipple(this)},t}(),Sg={enterDuration:450,exitDuration:400},$g=800,Tg=ym({passive:!0}),Cg=function(){function t(t,e,n,r){var i=this;this._target=t,this._ngZone=e,this._isPointerDown=!1,this._triggerEvents=new Map,this._activeRipples=new Set,this.onMousedown=function(t){var e=function(t){return 0===t.buttons}(t),n=i._lastTouchStartEvent&&Date.now()<i._lastTouchStartEvent+$g;i._target.rippleDisabled||e||n||(i._isPointerDown=!0,i.fadeInRipple(t.clientX,t.clientY,i._target.rippleConfig))},this.onTouchStart=function(t){if(!i._target.rippleDisabled){i._lastTouchStartEvent=Date.now(),i._isPointerDown=!0;for(var e=t.changedTouches,n=0;n<e.length;n++)i.fadeInRipple(e[n].clientX,e[n].clientY,i._target.rippleConfig)}},this.onPointerUp=function(){i._isPointerDown&&(i._isPointerDown=!1,i._activeRipples.forEach(function(t){!t.config.persistent&&(t.state===_g.VISIBLE||t.config.terminateOnPointerUp&&t.state===_g.FADING_IN)&&t.fadeOut()}))},r.isBrowser&&(this._containerElement=n.nativeElement,this._triggerEvents.set("mousedown",this.onMousedown).set("mouseup",this.onPointerUp).set("mouseleave",this.onPointerUp).set("touchstart",this.onTouchStart).set("touchend",this.onPointerUp).set("touchcancel",this.onPointerUp))}return t.prototype.fadeInRipple=function(t,e,n){var r=this;void 0===n&&(n={});var i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a=o({},Sg,n.animation);n.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);var s=n.radius||function(t,e,n){var r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,i),l=t-i.left,u=e-i.top,c=a.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=l-s+"px",d.style.top=u-s+"px",d.style.height=2*s+"px",d.style.width=2*s+"px",d.style.backgroundColor=n.color||null,d.style.transitionDuration=c+"ms",this._containerElement.appendChild(d),window.getComputedStyle(d).getPropertyValue("opacity"),d.style.transform="scale(1)";var p=new xg(this,d,n);return p.state=_g.FADING_IN,this._activeRipples.add(p),n.persistent||(this._mostRecentTransientRipple=p),this.runTimeoutOutsideZone(function(){var t=p===r._mostRecentTransientRipple;p.state=_g.VISIBLE,n.persistent||t&&r._isPointerDown||p.fadeOut()},c),p},t.prototype.fadeOutRipple=function(t){var e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),e){var n=t.element,r=o({},Sg,t.config.animation);n.style.transitionDuration=r.exitDuration+"ms",n.style.opacity="0",t.state=_g.FADING_OUT,this.runTimeoutOutsideZone(function(){t.state=_g.HIDDEN,n.parentNode.removeChild(n)},r.exitDuration)}},t.prototype.fadeOutAll=function(){this._activeRipples.forEach(function(t){return t.fadeOut()})},t.prototype.setupTriggerEvents=function(t){var e=this;t&&t!==this._triggerElement&&(this._removeTriggerEvents(),this._ngZone.runOutsideAngular(function(){e._triggerEvents.forEach(function(e,n){t.addEventListener(n,e,Tg)})}),this._triggerElement=t)},t.prototype.runTimeoutOutsideZone=function(t,e){void 0===e&&(e=0),this._ngZone.runOutsideAngular(function(){return setTimeout(t,e)})},t.prototype._removeTriggerEvents=function(){var t=this;this._triggerElement&&this._triggerEvents.forEach(function(e,n){t._triggerElement.removeEventListener(n,e,Tg)})},t}(),Eg=new mt("mat-ripple-global-options"),Ag=function(){function t(t,e,n,r,i){this._elementRef=t,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new Cg(this,e,t,n),"NoopAnimations"===i&&(this._globalOptions.animation={enterDuration:0,exitDuration:0})}return Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t,this._setupTriggerEventsIfEnabled()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trigger",{get:function(){return this._trigger||this._elementRef.nativeElement},set:function(t){this._trigger=t,this._setupTriggerEventsIfEnabled()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()},t.prototype.ngOnDestroy=function(){this._rippleRenderer._removeTriggerEvents()},t.prototype.fadeOutAll=function(){this._rippleRenderer.fadeOutAll()},Object.defineProperty(t.prototype,"rippleConfig",{get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:o({},this._globalOptions.animation,this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rippleDisabled",{get:function(){return this.disabled||!!this._globalOptions.disabled},enumerable:!0,configurable:!0}),t.prototype._setupTriggerEventsIfEnabled=function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)},t.prototype.launch=function(t,e,n){return void 0===e&&(e=0),"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,o({},this.rippleConfig,n)):this._rippleRenderer.fadeInRipple(0,0,o({},this.rippleConfig,t))},t}(),Dg=function(){return function(){}}(),Pg=Ai({encapsulation:2,styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}@media (-ms-high-contrast:active){.mat-dialog-container{outline:solid 1px}}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button+.mat-button,.mat-dialog-actions .mat-button+.mat-raised-button,.mat-dialog-actions .mat-raised-button+.mat-button,.mat-dialog-actions .mat-raised-button+.mat-raised-button{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button+.mat-button,[dir=rtl] .mat-dialog-actions .mat-button+.mat-raised-button,[dir=rtl] .mat-dialog-actions .mat-raised-button+.mat-button,[dir=rtl] .mat-dialog-actions .mat-raised-button+.mat-raised-button{margin-left:0;margin-right:8px}"],data:{animation:[{type:7,name:"dialogContainer",definitions:[{type:0,name:"void, exit",styles:{type:6,styles:{opacity:0,transform:"scale(0.7)"},offset:null},options:void 0},{type:0,name:"enter",styles:{type:6,styles:{transform:"none"},offset:null},options:void 0},{type:1,expr:"* => enter",animation:{type:4,styles:{type:6,styles:{transform:"none",opacity:1},offset:null},timings:"150ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void, * => exit",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"75ms cubic-bezier(0.4, 0.0, 0.2, 1)"},options:null}],options:{}}]}});function Og(t){return va(0,[(t()(),no(0,null,null,0))],null,null)}function Mg(t){return va(0,[sa(402653184,1,{_portalOutlet:0}),(t()(),no(16777216,null,null,1,null,Og)),Go(2,212992,[[1,4]],0,Ph,[we,Ir],{portal:[0,"portal"]},null)],function(t,e){t(e,2,0,"")},null)}function Rg(t){return va(0,[(t()(),ro(0,0,null,null,1,"mat-dialog-container",[["aria-modal","true"],["class","mat-dialog-container"],["tabindex","-1"]],[[1,"id",0],[1,"role",0],[1,"aria-labelledby",0],[1,"aria-label",0],[1,"aria-describedby",0],[40,"@dialogContainer",0]],[["component","@dialogContainer.start"],["component","@dialogContainer.done"]],function(t,e,n){var r=!0;return"component:@dialogContainer.start"===e&&(r=!1!==Mo(t,1)._onAnimationStart(n)&&r),"component:@dialogContainer.done"===e&&(r=!1!==Mo(t,1)._onAnimationDone(n)&&r),r},Mg,Pg)),Go(1,49152,null,0,Qm,[$e,fg,Fr,[2,Gs],Km],null,null)],null,function(t,e){t(e,0,0,Mo(e,1)._id,Mo(e,1)._config.role,Mo(e,1)._config.ariaLabel?null:Mo(e,1)._ariaLabelledBy,Mo(e,1)._config.ariaLabel,Mo(e,1)._config.ariaDescribedBy||null,Mo(e,1)._state)})}var jg=_o("mat-dialog-container",Qm,Rg,{},{},[]);function Ig(t){var e={},n=t.views||{$default:$d(t,["component","bindings"])};return fd(n,function(n,r){if(r=r||"$default",Xc(n)&&(n={component:n}),0!==Object.keys(n).length){n.$type="ng2",n.$context=t,n.$name=r;var i=wf.normalizeUIViewTarget(n.$context,n.$name);n.$uiViewName=i.uiViewName,n.$uiViewContextAnchor=i.uiViewContextAnchor,e[r]=n}}),e}var Ng=0,Fg=function(){function t(t,e){this.path=t,this.viewDecl=e,this.$id=Ng++,this.loaded=!0}return t.prototype.load=function(){return ld.$q.when(this)},t}(),Ug=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length<2)throw new Error("pass at least two injectors");this.injectors=t}return t.prototype.get=function(e,n){for(var r=0;r<this.injectors.length;r++){var i=this.injectors[r].get(e,t.NOT_FOUND);if(i!==t.NOT_FOUND)return i}if(arguments.length>=2)return n;this.injectors[0].get(e)},t.NOT_FOUND={},t}(),Lg=0,Vg=function(){function t(t,e,n){this.router=t,this.viewContainerRef=n,this._uiViewData={},this._parent=e}return Object.defineProperty(t.prototype,"_name",{set:function(t){this.name=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return Nc("_uiViewData.config.viewDecl.$context.self")(this)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this,e=this.router,n=this._parent.fqn,r=this.name||"$default";this._uiViewData={$type:"ng2",id:Lg++,name:r,fqn:n?n+"."+r:r,creationContext:this._parent.context,configUpdated:this._viewConfigUpdated.bind(this),config:void 0},this._deregisterUiCanExitHook=e.transitionService.onBefore({},function(e){return t._invokeUiCanExitHook(e)}),this._deregisterUiOnParamsChangedHook=e.transitionService.onSuccess({},function(e){return t._invokeUiOnParamsChangedHook(e)}),this._deregisterUIView=e.viewService.registerUIView(this._uiViewData)},t.prototype._invokeUiCanExitHook=function(t){var e=this._componentRef&&this._componentRef.instance,n=e&&e.uiCanExit;if(Xc(n)){var r=this.state;-1!==t.exiting().indexOf(r)&&t.onStart({},function(){return n.call(e,t)})}},t.prototype._invokeUiOnParamsChangedHook=function(t){var e=this._componentRef&&this._componentRef.instance;if(Xc(e&&e.uiOnParamsChanged)){var n=this.state;if(t===new jp(this._uiViewData.config.path).getResolvable("$transition$").data||-1!==t.exiting().indexOf(n))return;var r=t.params("to"),i=t.params("from"),o=function(t){return t.paramSchema},a=t.treeChanges("to").map(o).reduce(Rd,[]),s=t.treeChanges("from").map(o).reduce(Rd,[]),l=a.filter(function(t){var e=s.indexOf(t);return-1===e||!s[e].type.equals(r[t.id],i[t.id])});if(l.length){var u=l.map(function(t){return t.id}),c=Cd(r,function(t,e){return-1!==u.indexOf(e)});e.uiOnParamsChanged(c,t)}}},t.prototype._disposeLast=function(){this._componentRef&&this._componentRef.destroy(),this._componentRef=null},t.prototype.ngOnDestroy=function(){this._deregisterUIView&&this._deregisterUIView(),this._deregisterUiCanExitHook&&this._deregisterUiCanExitHook(),this._deregisterUiOnParamsChangedHook&&this._deregisterUiOnParamsChangedHook(),this._deregisterUIView=this._deregisterUiCanExitHook=this._deregisterUiOnParamsChangedHook=null,this._disposeLast()},t.prototype._viewConfigUpdated=function(t){if(!t)return this._disposeLast();t instanceof Fg&&this._uiViewData.config!==t&&(this._disposeLast(),bp.traceUIViewConfigUpdated(this._uiViewData,t&&t.viewDecl.$context),this._applyUpdatedConfig(t),this._componentRef.changeDetectorRef.markForCheck())},t.prototype._applyUpdatedConfig=function(t){this._uiViewData.config=t;var e=new jp(t.path),n=this._getComponentInjector(e),r=t.viewDecl.component,i=n.get(we).resolveComponentFactory(r);this._componentRef=this._componentTarget.createComponent(i,void 0,n),this._applyInputBindings(i,this._componentRef.instance,e,r)},t.prototype._getComponentInjector=function(e){var n=e.getTokens().map(function(t){return e.getResolvable(t)}).filter(function(t){return t.resolved}).map(function(t){return{provide:t.token,useValue:e.injector().get(t.token)}});n.push({provide:t.PARENT_INJECT,useValue:{context:this._uiViewData.config.viewDecl.$context,fqn:this._uiViewData.fqn}});var r=this.viewContainerRef.injector,i=e.getResolvable(Rp).data,o=new Ug(i,r);return qn.resolveAndCreate(n,o)},t.prototype._applyInputBindings=function(t,e,n,r){var i=this._uiViewData.config.viewDecl.bindings||{},o=Object.keys(i),a=o.reduce(function(e,n){return e.concat([{prop:(r=n,o=t.inputs.find(function(t){return t.templateName===r}),o&&o.propName||r),token:i[n]}]);var r,o},[]),s=function(t){return t.inputs.map(function(t){return{prop:t.propName,token:t.templateName}})}(t).filter(function(t){return!wd(o,t.prop)}),l=n.injector();a.concat(s).map(function(t){return{prop:t.prop,resolvable:n.getResolvable(t.token)}}).filter(function(t){return t.resolvable&&t.resolvable.resolved}).forEach(function(t){e[t.prop]=l.get(t.resolvable.token)})},t.PARENT_INJECT="UIView.PARENT_INJECT",t}(),Bg=Ai({encapsulation:2,styles:[],data:{}});function Hg(t){return va(0,[(t()(),no(0,null,null,0))],null,null)}function qg(t){return va(0,[pa(null,0),(t()(),no(0,null,null,0))],null,null)}function zg(t){return va(0,[sa(402653184,1,{_componentTarget:0}),(t()(),no(16777216,[[1,3],["componentTarget",2]],null,0,null,Hg)),(t()(),no(16777216,null,null,1,null,qg)),Go(3,16384,null,0,Bs,[Ir,sn],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,3,0,!e.component._componentRef)},null)}function Gg(t){return va(0,[(t()(),ro(0,16777216,null,null,1,"ui-view",[],null,null,null,zg,Bg)),Go(1,245760,null,0,Vg,[Af,"UIView.PARENT_INJECT",Ir],null,null)],function(t,e){t(e,1,0)},null)}var Wg=_o("ui-view, [ui-view]",Vg,Gg,{name:"name",_name:"ui-view"},{},["*"]);function Yg(t,e,n){return void 0===n&&(n={}),Xc(n.config)&&n.config(t,e,n),(n.states||[]).map(function(e){return t.stateRegistry.register(e)})}Error;var Kg=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new Zg(t,this.selector,this.caught))},t}(),Zg=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return i(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(i){return void t.prototype.error.call(this,i)}this._unsubscribeAndRecycle();var r=new j(this,void 0,void 0);this.add(r),z(this,n,void 0,void 0,r)}},e}(G),Qg=new mt("ROUTES"),Xg=new mt("UIRouter Root Module"),Jg=new mt("UIRouter Module");function tv(t,e){var n=e[0];return n&&n.deferInitialRender?function(){return new Promise(function(e){t.onStart({},function(t){t.promise.then(e,e)},{invokeLimit:1})})}:function(){return Promise.resolve()}}function ev(t){return[{provide:Jg,useValue:t,multi:!0},{provide:Qg,useValue:t.states||[],multi:!0},{provide:bt,useValue:t.states||[],multi:!0}]}new mt("UIRouter States");var nv=function(){function t(){}return t.forRoot=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[lv,vv,(r=e.useHash,{provide:Ts,useClass:r?As:Ds})].concat((n=e,[{provide:Xg,useValue:n,multi:!0},{provide:Jg,useValue:n,multi:!0},{provide:Qg,useValue:n.states||[],multi:!0},{provide:bt,useValue:n.states||[],multi:!0},{provide:Wn,useFactory:tv,deps:[Qf,Xg],multi:!0}]))};var n,r},t.forChild=function(e){return void 0===e&&(e={}),{ngModule:t,providers:ev(e)}},t}();function rv(t,e,n){var r=e.get(n,[]),i=t.get(n,[]);return r.filter(function(t){return-1===i.indexOf(t)})}function iv(t,e){var n,r=t.loadChildren;return r?(n=r,function(t,e){var r=t.injector().get(Rp);return function(t,e){if(td(t))return e.get(dn).load(t);var n=e.get(ur),r=n instanceof ur,i=Promise.resolve(t()).then(function(t){return t&&t.__esModule&&t.default?t.default:t});return r?i:i.then(function(t){return n.compileModuleAsync(t)})}(n,r).then(function(t){return t.create(r)}).then(function(t){return function(e,n,r,i){var o=t.injector,a=o.get(Af),s=a.stateRegistry,l=i.name,u=s.get(l),c=/^(.*)\.\*\*$/.exec(l),d=c&&c[1],p=rv(r,o,Xg).reduce(Nd,[]),f=rv(r,o,Jg).reduce(Nd,[]);if(p.length)throw console.log(p),new Error("Lazy loaded modules should not contain a UIRouterModule.forRoot() module");var h=f.map(function(t){return Yg(a,o,t)}).reduce(Rd,[]).reduce(Nd,[]);if(c){var m=s.get(d);if(!m||m===u)throw new Error("The Future State named '"+l+"' lazy loaded an NgModule. The lazy loaded NgModule must have a state named '"+d+"' which replaces the (placeholder) '"+l+"' Future State. Add a '"+d+"' state to the lazy loaded NgModule using UIRouterModule.forChild({ states: CHILD_STATES }).")}return h.filter(function(t){return!wd(h,t.parent)}).forEach(function(t){return t.resolvables.push(Pp.fromData(Rp,o))}),{}}(0,0,r,e)})}):t.lazyLoad}var ov=function(){function t(t){this.name="@uirouter/rx",this.deregisterFns=[];var e=new hm(1),n=e.pipe(X(function(t){return t.promise.then(function(){return t},function(){return null})}),Wu(function(t){return!!t})),r=n.pipe(W(function(t){return t.params()})),i=new hm(1);function o(e,n){var r={currentStates:t.stateRegistry.get(),registered:[],deregistered:[]};e&&(r[e]=n),i.next(r)}this.deregisterFns.push(t.transitionService.onStart({},function(t){return e.next(t)})),this.deregisterFns.push(t.stateRegistry.onStatesChanged(o)),o(null,null),Object.assign(t.globals,{start$:e,success$:n,params$:r,states$:i})}return t.prototype.dispose=function(){this.deregisterFns.forEach(function(t){return t()}),this.deregisterFns=[]},t}(),av=function(t){function e(e,n,r){var i=t.call(this,e,r)||this;return i._locationStrategy=n,i._locationStrategy.onPopState(function(t){"hashchange"!==t.type&&i._listener(t)}),i}return i(e,t),e.prototype._get=function(){return this._locationStrategy.path(!0).replace(this._locationStrategy.getBaseHref().replace(/\/$/,""),"")},e.prototype._set=function(t,e,n,r){var i=ah(n),o=i.search,a=i.hash,s=i.path+(a?"#"+a:"");r?this._locationStrategy.replaceState(t,e,s,o):this._locationStrategy.pushState(t,e,s,o)},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e)},e}(lh),sv=function(t){function e(e,n){var r=t.call(this,e,Vc(Ds)(n))||this;return r._locationStrategy=n,r}return i(e,t),e.prototype.baseHref=function(t){return this._locationStrategy.getBaseHref()},e}(fh),lv=[{provide:Af,useFactory:function(t,e,n,r){if(1!==e.length)throw new Error("Exactly one UIRouterModule.forRoot() should be in the bootstrapped app module's imports: []");var i=new Af;i.plugin(ov),i.plugin(hh),ld.$injector.get=r.get.bind(r),i.locationService=new av(i,t,Ks(r.get(Jn))),i.locationConfig=new sv(i,t),i.viewService._pluginapi._viewConfigFactory("ng2",function(t,e){return new Fg(t,e)});var o=i.stateRegistry;o.decorator("views",Ig),o.decorator("lazyLoad",iv);var a=Pp.fromData(Rp,r);return o.root().resolvables.push(a),i.urlMatcherFactory.$get(),e.forEach(function(t){return e=i,Kc((n=t).deferIntercept)&&e.urlService.deferIntercept(n.deferIntercept),Kc(n.otherwise)&&e.urlService.rules.otherwise(n.otherwise),void(Kc(n.initial)&&e.urlService.rules.initial(n.initial));var e,n}),n.forEach(function(t){return Yg(i,r,t)}),i},deps:[Ts,Xg,Jg,te]},{provide:Vg.PARENT_INJECT,useFactory:function(t){return{fqn:null,context:t.root()}},deps:[Zp]},{provide:Wn,useFactory:function(t){return function(){t.urlRouter.interceptDeferred||(t.urlService.listen(),t.urlService.sync())}},deps:[Af],multi:!0}];function uv(t){return t.stateService}function cv(t){return t.transitionService}function dv(t){return t.urlMatcherFactory}function pv(t){return t.urlRouter}function fv(t){return t.urlService}function hv(t){return t.viewService}function mv(t){return t.stateRegistry}function gv(t){return t.globals}var vv=[{provide:Xf,useFactory:uv,deps:[Af]},{provide:Qf,useFactory:cv,deps:[Af]},{provide:gf,useFactory:dv,deps:[Af]},{provide:yf,useFactory:pv,deps:[Af]},{provide:$f,useFactory:fv,deps:[Af]},{provide:wf,useFactory:hv,deps:[Af]},{provide:Zp,useFactory:mv,deps:[Af]},{provide:kf,useFactory:gv,deps:[Af]}],bv=(lv.concat(vv),angular),yv=Ss&&Ss.module?Ss:bv,wv=function(t,e){return t.reduce(function(t,n){return t||Kc(e[n])},!1)};function kv(t){if(!t.parent)return{};var e=["component","bindings","componentProvider"],n=["templateProvider","templateUrl","template","notify","async"].concat(["controller","controllerProvider","controllerAs","resolveAs"]),r=e.concat(n);if(Kc(t.views)&&wv(r,t))throw new Error("State '"+t.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+r.filter(function(e){return Kc(t[e])}).join(", "));var i={},o=t.views||{$default:$d(t,r)};return fd(o,function(r,o){if(o=o||"$default",td(r)&&(r={component:r}),r=hd({},r),wv(e,r)&&wv(n,r))throw new Error("Cannot combine: "+e.join("|")+" with: "+n.join("|")+" in stateview: '"+o+"@"+t.name+"'");r.resolveAs=r.resolveAs||"$resolve",r.$type="ng1",r.$context=t,r.$name=o;var a=wf.normalizeUIViewTarget(r.$context,r.$name);r.$uiViewName=a.uiViewName,r.$uiViewContextAnchor=a.uiViewContextAnchor,i[o]=r}),i}var _v=0,xv=function(){function t(t,e,n){var r=this;this.path=t,this.viewDecl=e,this.factory=n,this.$id=_v++,this.loaded=!1,this.getTemplate=function(t,e){return r.component?r.factory.makeComponentTemplate(t,e,r.component,r.viewDecl.bindings):r.template}}return t.prototype.load=function(){var t=this,e=ld.$q,n=new jp(this.path),r=this.path.reduce(function(t,e){return hd(t,e.paramValues)},{}),i={template:e.when(this.factory.fromConfig(this.viewDecl,r,n)),controller:e.when(this.getController(n))};return e.all(i).then(function(e){return bp.traceViewServiceEvent("Loaded",t),t.controller=e.controller,hd(t,e.template),t})},t.prototype.getController=function(t){var e=this.viewDecl.controllerProvider;if(!od(e))return this.viewDecl.controller;var n=ld.$injector.annotate(e),r=nd(e)?Bd(e):e;return new Pp("",r,n).get(t)},t}(),Sv=function(){function t(){var t=this;this._useHttp=yv.version.minor<3,this.$get=["$http","$templateCache","$injector",function(e,n,r){return t.$templateRequest=r.has&&r.has("$templateRequest")&&r.get("$templateRequest"),t.$http=e,t.$templateCache=n,t}]}return t.prototype.useHttpService=function(t){this._useHttp=t},t.prototype.fromConfig=function(t,e,n){var r=function(t){return ld.$q.when(t).then(function(t){return{template:t}})},i=function(t){return ld.$q.when(t).then(function(t){return{component:t}})};return Kc(t.template)?r(this.fromString(t.template,e)):Kc(t.templateUrl)?r(this.fromUrl(t.templateUrl,e)):Kc(t.templateProvider)?r(this.fromProvider(t.templateProvider,e,n)):Kc(t.component)?i(t.component):Kc(t.componentProvider)?i(this.fromComponentProvider(t.componentProvider,e,n)):r("<ui-view></ui-view>")},t.prototype.fromString=function(t,e){return Xc(t)?t(e):t},t.prototype.fromUrl=function(t,e){return Xc(t)&&(t=t(e)),null==t?null:this._useHttp?this.$http.get(t,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(t){return t.data}):this.$templateRequest(t)},t.prototype.fromProvider=function(t,e,n){var r=ld.$injector.annotate(t),i=nd(t)?Bd(t):t;return new Pp("",i,r).get(n)},t.prototype.fromComponentProvider=function(t,e,n){var r=ld.$injector.annotate(t),i=nd(t)?Bd(t):t;return new Pp("",i,r).get(n)},t.prototype.makeComponentTemplate=function(t,e,n,r){r=r||{};var i=yv.version.minor>=3?"::":"",o=function(t){var e=Xd(t);return/^(x|data)-/.exec(e)?"x-"+e:e},a=function(t){var e=ld.$injector.get(t+"Directive");if(!e||!e.length)throw new Error("Unable to find component named '"+t+"'");return e.map($v).reduce(Rd,[])}(n).map(function(n){var a=n.name,s=n.type,l=o(a);if(t.attr(l)&&!r[a])return l+"='"+t.attr(l)+"'";var u=r[a]||a;if("@"===s)return l+"='{{"+i+"$resolve."+u+"}}'";if("&"===s){var c=e.getResolvable(u),d=c&&c.data,p=d&&ld.$injector.annotate(d)||[];return l+"='$resolve."+u+(nd(d)?"["+(d.length-1)+"]":"")+"("+p.join(",")+")'"}return l+"='"+i+"$resolve."+u+"'"}).join(" "),s=o(n);return"<"+s+" "+a+"></"+s+">"},t}(),$v=function(t){return ed(t.bindToController)?Tv(t.bindToController):Tv(t.scope)},Tv=function(t){return Object.keys(t||{}).map(function(e){return[e,/^([=<@&])[?]?(.*)/.exec(t[e])]}).filter(function(t){return Kc(t)&&nd(t[1])}).map(function(t){return{name:t[1][2]||t[0],type:t[1][1]}})},Cv=function(){function t(e,n){this.stateRegistry=e,this.stateService=n,bd(Bc(t.prototype),this,Bc(this))}return t.prototype.decorator=function(t,e){return this.stateRegistry.decorator(t,e)||this},t.prototype.state=function(t,e){return ed(t)?e=t:e.name=t,this.stateRegistry.register(e),this},t.prototype.onInvalid=function(t){return this.stateService.onInvalid(t)},t}(),Ev=function(t){return function(e,n){var r=e[t],i="onExit"===t?"from":"to";return r?function(t,e){var n=new jp(t.treeChanges(i)).subContext(e.$$state()),o=hd(zv(n),{$state$:e,$transition$:t});return ld.$injector.invoke(r,this,o)}:void 0}},Av=function(){function t(t){this._urlListeners=[],this.$locationProvider=t;var e=Bc(t);bd(e,this,e,["hashPrefix"])}return t.monkeyPatchPathParameterType=function(t){var e=t.urlMatcherFactory.type("path");e.encode=function(t){return null!=t?t.toString().replace(/(~|\/)/g,function(t){return{"~":"~~","/":"~2F"}[t]}):t},e.decode=function(t){return null!=t?t.toString().replace(/(~~|~2F)/g,function(t){return{"~~":"~","~2F":"/"}[t]}):t}},t.prototype.dispose=function(){},t.prototype.onChange=function(t){var e=this;return this._urlListeners.push(t),function(){return kd(e._urlListeners)(t)}},t.prototype.html5Mode=function(){var t=this.$locationProvider.html5Mode();return(t=ed(t)?t.enabled:t)&&this.$sniffer.history},t.prototype.baseHref=function(){return this._baseHref||(this._baseHref=this.$browser.baseHref()||this.$window.location.pathname)},t.prototype.url=function(t,e,n){return void 0===e&&(e=!1),Kc(t)&&this.$location.url(t),e&&this.$location.replace(),n&&this.$location.state(n),this.$location.url()},t.prototype._runtimeServices=function(t,e,n,r,i){var o=this;this.$location=e,this.$sniffer=n,this.$browser=r,this.$window=i,t.$on("$locationChangeSuccess",function(t){return o._urlListeners.forEach(function(e){return e(t)})});var a=Bc(e);bd(a,this,a,["replace","path","search","hash"]),bd(a,this,a,["port","protocol","host"])},t}(),Dv=function(){function t(t){this.router=t}return t.injectableHandler=function(t,e){return function(n){return ld.$injector.invoke(e,null,{$match:n,$stateParams:t.globals.params})}},t.prototype.$get=function(){var t=this.router.urlService;return this.router.urlRouter.update(!0),t.interceptDeferred||t.listen(),this.router.urlRouter},t.prototype.rule=function(t){var e=this;if(!Xc(t))throw new Error("'rule' must be a function");var n=new bf(function(){return t(ld.$injector,e.router.locationService)},gd);return this.router.urlService.rules.rule(n),this},t.prototype.otherwise=function(t){var e=this,n=this.router.urlService.rules;if(td(t))n.otherwise(t);else{if(!Xc(t))throw new Error("'rule' must be a string or function");n.otherwise(function(){return t(ld.$injector,e.router.locationService)})}return this},t.prototype.when=function(e,n){return(nd(n)||Xc(n))&&(n=t.injectableHandler(this.router,n)),this.router.urlService.rules.when(e,n),this},t.prototype.deferIntercept=function(t){this.router.urlService.deferIntercept(t)},t}();yv.module("ui.router.angular1",[]);var Pv=yv.module("ui.router.init",["ng"]),Ov=yv.module("ui.router.util",["ui.router.init"]),Mv=yv.module("ui.router.router",["ui.router.util"]),Rv=yv.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),jv=yv.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),Iv=(yv.module("ui.router.compat",["ui.router"]),null);function Nv(t){var e;(Iv=this.router=new Af).stateProvider=new Cv(Iv.stateRegistry,Iv.stateService),Iv.stateRegistry.decorator("views",kv),Iv.stateRegistry.decorator("onExit",Ev("onExit")),Iv.stateRegistry.decorator("onRetain",Ev("onRetain")),Iv.stateRegistry.decorator("onEnter",Ev("onEnter")),Iv.viewService._pluginapi._viewConfigFactory("ng1",(e=null,function(t,n){return e=e||ld.$injector.get("$templateFactory"),[new xv(t,n,e)]}));var n=Iv.locationService=Iv.locationConfig=new Av(t);function r(t,e,r,i,o,a,s){return n._runtimeServices(o,t,i,e,r),delete Iv.router,delete Iv.$get,Iv}return Av.monkeyPatchPathParameterType(Iv),Iv.router=Iv,Iv.$get=r,r.$inject=["$location","$browser","$window","$sniffer","$rootScope","$http","$templateCache"],Iv}Nv.$inject=["$locationProvider"];var Fv=function(t){return["$uiRouterProvider",function(e){var n=e.router[t];return n.$get=function(){return n},n}]};function Uv(t,e,n){if(ld.$injector=t,ld.$q=e,!t.hasOwnProperty("strictDi"))try{t.invoke(function(t){})}catch(r){t.strictDi=!!/strict mode/.exec(r&&r.toString())}n.stateRegistry.get().map(function(t){return t.$$state().resolvables}).reduce(Rd,[]).filter(function(t){return"deferred"===t.deps}).forEach(function(e){return e.deps=t.annotate(e.resolveFn,t.strictDi)})}function Lv(t){t.$watch(function(){bp.approximateDigests++})}Uv.$inject=["$injector","$q","$uiRouter"],Lv.$inject=["$rootScope"],Pv.provider("$uiRouter",Nv),Mv.provider("$urlRouter",["$uiRouterProvider",function(t){return t.urlRouterProvider=new Dv(t)}]),Ov.provider("$urlService",Fv("urlService")),Ov.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return Iv.urlMatcherFactory}]),Ov.provider("$templateFactory",function(){return new Sv}),Rv.provider("$stateRegistry",Fv("stateRegistry")),Rv.provider("$uiRouterGlobals",Fv("globals")),Rv.provider("$transitions",Fv("transitionService")),Rv.provider("$state",["$uiRouterProvider",function(){return hd(Iv.stateProvider,{$get:function(){return Iv.stateService}})}]),Rv.factory("$stateParams",["$uiRouter",function(t){return t.globals.params}]),jv.factory("$view",function(){return Iv.viewService}),jv.service("$trace",function(){return bp}),jv.run(Lv),Ov.run(["$urlMatcherFactory",function(t){}]),Rv.run(["$state",function(t){}]),Mv.run(["$urlRouter",function(t){}]),Pv.run(Uv);var Vv,Bv,Hv,qv,zv=function(t){return t.getTokens().filter(td).map(function(e){var n=t.getResolvable(e);return[e,"NOWAIT"===t.getPolicy(n).async?n.promise:n.data]}).reduce(Vd,{})};function Gv(t){var e,n=t.match(/^\s*({[^}]*})\s*$/);if(n&&(t="("+n[1]+")"),!(e=t.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==e.length)throw new Error("Invalid state ref '"+t+"'");return{state:e[1]||null,paramExpr:e[3]||null}}function Wv(t){var e=t.parent().inheritedData("$uiView"),n=Nc("$cfg.path")(e);return n?Bd(n).state.name:void 0}function Yv(t,e,n){var r=n.uiState||t.current.name,i=hd(function(t,n){return{relative:Wv(e)||n.$current,inherit:!0,source:"sref"}}(0,t),n.uiStateOpts||{}),o=t.href(r,n.uiStateParams,i);return{uiState:r,uiStateParams:n.uiStateParams,uiStateOpts:i,href:o}}function Kv(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),n="FORM"===t[0].nodeName;return{attr:n?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!n}}function Zv(t,e,n,r,i){return function(o){var a=o.which||o.button,s=i();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||t.attr("target"))){var l=n(function(){t.attr("disabled")||e.go(s.uiState,s.uiStateParams,s.uiStateOpts)});o.preventDefault();var u=r.isAnchor&&!s.href?1:0;o.preventDefault=function(){u--<=0&&n.cancel(l)}}}}function Qv(t,e,n,r){var i;r&&(i=r.events),nd(i)||(i=["click"]);for(var o=t.on?"on":"bind",a=0,s=i;a<s.length;a++)t[o](s[a],n);e.$on("$destroy",function(){for(var e=t.off?"off":"unbind",r=0,o=i;r<o.length;r++)t[e](o[r],n)})}function Xv(t){var e=function(e,n,r){return t.is(e,n,r)};return e.$stateful=!0,e}function Jv(t){var e=function(e,n,r){return t.includes(e,n,r)};return e.$stateful=!0,e}function tb(t,e,n,r,i,o){var a=Nc("viewDecl.controllerAs"),s=Nc("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(r){var o=r.html();return r.empty(),function(r,l){var u=l.data("$uiView");if(!u)return l.html(o),void t(l.contents())(r);var c=u.$cfg||{viewDecl:{},getTemplate:vd},d=c.path&&new jp(c.path);l.html(c.getTemplate(l,d)||o),bp.traceUIViewFill(u.$uiView,l.html());var p=t(l.contents()),f=c.controller,h=a(c),m=s(c),g=d&&zv(d);if(r[m]=g,f){var v=e(f,hd({},g,{$scope:r,$element:l}));h&&(r[h]=v,r[h][m]=g),l.data("$ngControllerController",v),l.children().data("$ngControllerController",v),rb(i,n,v,r,c)}if(td(c.component))var b=Xd(c.component),y=new RegExp("^(x-|data-)?"+b+"$","i"),w=r.$watch(function(){var t=[].slice.call(l[0].children).filter(function(t){return t&&t.tagName&&y.exec(t.tagName)});return t&&yv.element(t).data("$"+c.component+"Controller")},function(t){t&&(rb(i,n,t,r,c),w())});p(r)}}}}n("R5V4"),Vv=["$uiRouter","$timeout",function(t,e){var n=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,i,o,a){var s,l=Kv(i),u=a[1]||a[0],c=null,d={},p=function(){return Yv(n,i,d)},f=Gv(o.uiSref);function h(){var t=p();c&&c(),u&&(c=u.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&o.$set(l.attr,t.href)}d.uiState=f.state,d.uiStateOpts=o.uiSrefOpts?r.$eval(o.uiSrefOpts):{},f.paramExpr&&(r.$watch(f.paramExpr,function(t){d.uiStateParams=hd({},t),h()},!0),d.uiStateParams=hd({},r.$eval(f.paramExpr))),h(),r.$on("$destroy",t.stateRegistry.onStatesChanged(h)),r.$on("$destroy",t.transitionService.onSuccess({},h)),l.clickable&&(s=Zv(i,n,e,l,p),Qv(i,r,s,d.uiStateOpts))}}}],Bv=["$uiRouter","$timeout",function(t,e){var n=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,i,o,a){var s,l=Kv(i),u=a[1]||a[0],c=null,d={},p=function(){return Yv(n,i,d)},f=["uiState","uiStateParams","uiStateOpts"],h=f.reduce(function(t,e){return t[e]=vd,t},{});function m(){var t=p();c&&c(),u&&(c=u.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&o.$set(l.attr,t.href)}f.forEach(function(t){d[t]=o[t]?r.$eval(o[t]):null,o.$observe(t,function(e){h[t](),h[t]=r.$watch(e,function(e){d[t]=e,m()},!0)})}),m(),r.$on("$destroy",t.stateRegistry.onStatesChanged(m)),r.$on("$destroy",t.transitionService.onSuccess({},m)),l.clickable&&(s=Zv(i,n,e,l,p),Qv(i,r,s,d.uiStateOpts))}}}],Hv=["$state","$stateParams","$interpolate","$uiRouter",function(t,e,n,r){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,i,o){var a,s,l,u,c,d=[];a=n(o.uiSrefActiveEq||"",!1)(e);try{s=e.$eval(o.uiSrefActive)}catch(g){}function p(t){t.promise.then(m,vd)}function f(t){ed(t)&&(d=[],fd(t,function(t,n){var r=function(t,n){var r=Gv(t);h(r.state,e.$eval(r.paramExpr),n)};td(t)?r(t,n):nd(t)&&fd(t,function(t){r(t,n)})}))}function h(e,n,r){var o={state:t.get(e,Wv(i))||{name:e},params:n,activeClass:r};return d.push(o),function(){kd(d)(o)}}function m(){var n=function(t){return t.split(/\s/).filter(gd)},r=function(t){return t.map(function(t){return t.activeClass}).map(n).reduce(Rd,[])},o=r(d).concat(n(a)).reduce(Nd,[]),s=r(d.filter(function(e){return t.includes(e.state.name,e.params)})),l=d.filter(function(e){return t.is(e.state.name,e.params)}).length?n(a):[],u=s.concat(l).reduce(Nd,[]),c=o.filter(function(t){return!wd(u,t)});e.$evalAsync(function(){u.forEach(function(t){return i.addClass(t)}),c.forEach(function(t){return i.removeClass(t)})})}f(s=s||n(o.uiSrefActive||"",!1)(e)),this.$$addStateInfo=function(t,e){if(!(ed(s)&&d.length>0)){var n=h(t,e,s);return m(),n}},e.$on("$destroy",(l=r.stateRegistry.onStatesChanged(function(){f(s)}),u=r.transitionService.onStart({},p),c=e.$on("$stateChangeSuccess",m),function(){l(),u(),c()})),r.globals.transition&&p(r.globals.transition),m()}]}}],yv.module("ui.router.state").directive("uiSref",Vv).directive("uiSrefActive",Hv).directive("uiSrefActiveEq",Hv).directive("uiState",Bv),Xv.$inject=["$state"],Jv.$inject=["$state"],yv.module("ui.router.state").filter("isState",Xv).filter("includedByState",Jv),qv=["$view","$animate","$uiViewScroll","$interpolate","$q",function(t,e,n,r,i){var o={$cfg:{viewDecl:{$context:t._pluginapi._rootViewContext()}},$uiView:{}},a={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(s,l,u){return function(s,l,c){var d,p,f,h,m,g=c.onload||"",v=c.autoscroll,b={enter:function(t,n,r){yv.version.minor>2?e.enter(t,null,n).then(r):e.enter(t,null,n,r)},leave:function(t,n){yv.version.minor>2?e.leave(t).then(n):e.leave(t,n)}},y=l.inheritedData("$uiView")||o,w=r(c.uiView||c.name||"")(s)||"$default",k={$type:"ng1",id:a.count++,name:w,fqn:y.$uiView.fqn?y.$uiView.fqn+"."+w:w,config:null,configUpdated:function(t){(!t||t instanceof xv)&&h!==t&&(bp.traceUIViewConfigUpdated(k,t&&t.viewDecl&&t.viewDecl.$context),h=t,_(t))},get creationContext(){var t=Nc("$cfg.viewDecl.$context")(y),e=Nc("$uiView.creationContext")(y);return t||e}};function _(t){var e=s.$new(),r=i.defer(),o=i.defer(),a={$cfg:t,$uiView:k},c={$animEnter:r.promise,$animLeave:o.promise,$$animLeave:o};e.$emit("$viewContentLoading",w);var m=u(e,function(t){t.data("$uiViewAnim",c),t.data("$uiView",a),b.enter(t,l,function(){r.resolve(),f&&f.$emit("$viewContentAnimationEnded"),(Kc(v)&&!v||s.$eval(v))&&n(t)}),function(){if(d&&(bp.traceUIViewEvent("Removing (previous) el",d.data("$uiView")),d.remove(),d=null),f&&(bp.traceUIViewEvent("Destroying scope",k),f.$destroy(),f=null),p){var t=p.data("$uiViewAnim");bp.traceUIViewEvent("Animate out",t),b.leave(p,function(){t.$$animLeave.resolve(),d=null}),d=p,p=null}}()});p=m,(f=e).$emit("$viewContentLoaded",t||h),f.$eval(g)}bp.traceUIViewEvent("Linking",k),l.data("$uiView",{$uiView:k}),_(),m=t.registerUIView(k),s.$on("$destroy",function(){bp.traceUIViewEvent("Destroying/Unregistering",k),m()})}}};return a}],tb.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var eb="function"==typeof yv.module("ui.router").component,nb=0;function rb(t,e,n,r,i){!Xc(n.$onInit)||i.viewDecl.component&&eb||n.$onInit();var o=Bd(i.path).state.self,a={bind:n};if(Xc(n.uiOnParamsChanged)){var s=new jp(i.path).getResolvable("$transition$").data;r.$on("$destroy",e.onSuccess({},function(t){if(t!==s&&-1===t.exiting().indexOf(o)){var e=t.params("to"),r=t.params("from"),i=function(t){return t.paramSchema},a=t.treeChanges("to").map(i).reduce(Rd,[]),l=t.treeChanges("from").map(i).reduce(Rd,[]),u=a.filter(function(t){var n=l.indexOf(t);return-1===n||!l[n].type.equals(e[t.id],r[t.id])});if(u.length){var c=u.map(function(t){return t.id}),d=Cd(e,function(t,e){return-1!==c.indexOf(e)});n.uiOnParamsChanged(d,t)}}},a))}if(Xc(n.uiCanExit)){var l=nb++,u=function(t){return!!t&&(t._uiCanExitIds&&!0===t._uiCanExitIds[l]||u(t.redirectedFrom()))};r.$on("$destroy",e.onBefore({exiting:o.name},function(e){var r,i=e._uiCanExitIds=e._uiCanExitIds||{};return u(e)||(r=t.when(n.uiCanExit(e))).then(function(t){return i[l]=!1!==t}),r},a))}}yv.module("ui.router.state").directive("uiView",qv),yv.module("ui.router.state").directive("uiView",tb),yv.module("ui.router.state").provider("$uiViewScroll",function(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,n){return t?e:function(t){return n(function(){t[0].scrollIntoView()},0,!1)}}]});var ib=(cu||function(){return cu()})();if(!ib)throw new Error("AngularJS not found on window.  https://github.com/ui-router/angular-hybrid/wiki/AngularJS-not-found-on-window");var ob=ib.module("ui.router.upgrade",["ui.router"]);function ab(){return{}}var sb=function(){return function(t,e,n){var r=ib.element(t.nativeElement).parent().parent();Object.defineProperty(e,"context",{get:function(){var t=r.inheritedData("$uiView");return t&&t.$cfg?t.$cfg.viewDecl.$context:n.root()},enumerable:!0}),Object.defineProperty(e,"fqn",{get:function(){var t=r.inheritedData("$uiView");return t&&t.$uiView?t.$uiView.fqn:null},enumerable:!0})}}();function lb(t,e){return e.get(Jg,[]).forEach(function(n){return Yg(t,e,n)}),t}function ub(t){return t.get("$uiRouter")}function cb(t){return{fqn:null,context:t.root()}}var db,pb,fb={},hb=function(){function t(){}return t.forRoot=function(e){return void 0===e&&(e={}),{ngModule:t,providers:ev(e)}},t.forChild=function(t){return void 0===t&&(t={}),{ngModule:nv,providers:ev(t)}},t}();ob.directive("uiViewNgUpgrade",(db={component:sb,inputs:["name"]},(pb=function(t,e,n){var r,i=3===_u(e),o=i?function(t){return function(){return gr.isInAngularZone()?t():r.run(t)}}:function(t){return t},a=i&&ku(e)>1;return{restrict:"E",terminal:!0,require:[vu,"?ngModel"],link:function(s,l,c,d){var p=d[1],f=d[0],h=void 0,m=!1;if(!f||a){var g=db.downgradedModule||"",v="$$angularLazyModuleRef"+g,b="instantiating component '"+wu(db.component)+"'";Su(e,g,v,b);var y=e.get(v);h=y.injector||y.promise}var w=f||h,k=h||f,_=function(r,a){var u=a.get(we).resolveComponentFactory(db.component);if(!u)throw new Error("Expecting ComponentFactory for: "+wu(db.component));var d=new Du(l),f=new Cu(l,c,s,p,r,e,t,n,u,o),h=f.compileContents();f.createComponent(h),f.setupInputs(i,db.propagateDigest),f.setupOutputs(),f.registerCleanup(),d.resolve(f.getInjector()),m&&s.$evalAsync(function(){})},x=i?function(t,e){r||(r=t.get(gr)),o(function(){return _(t,e)})()}:_;Pu(w)||Pu(k)?Promise.all([w,k]).then(function(t){var e=u(t,2);return x(e[0],e[1])}):x(w,k),m=!0}}}).$inject=["$compile",fu,"$parse"],pb)),ob.run(["$injector",function(t){var e=t.get("$uiRouter");e.plugin(ov);var n=Pp.fromData(Rp,{get:function(e,n){var r=t.get("$$angularInjector");return t.has(e)?t.get(e):r.get(e,n)}});e.stateRegistry.root().resolvables.push(n)}]),ob.config(["$stateRegistryProvider",function(t){t.decorator("lazyLoad",iv)}]),ob.config(["$stateRegistryProvider",function(t){t.decorator("views",function(t,e){var n=e(t);return fd(n,function(t,e){"ng1-to-ng2"!==t.$type&&"function"!=typeof t.component||(t.$type="ng1-to-ng2",t.templateProvider=null,t.template="<ui-view-ng-upgrade name='"+t.$uiViewName+"'></ui-view-ng-upgrade>")}),n})}]),ob.run(["$view","$templateFactory",function(t,e){t._pluginapi._viewConfigFactory("ng2",function(t,e){return new Fg(t,e)}),t._pluginapi._viewConfigFactory("ng1-to-ng2",function(t,n){var r=new xv(t,Object.assign({},n,{$type:"ng1"}),e);return[new Fg(t,Object.assign({},n,{$type:"ng2"})),r]})}]);var mb=Ai({encapsulation:2,styles:[],data:{}});function gb(t){return va(0,[(t()(),ro(0,16777216,null,null,1,"ui-view",[],null,null,null,zg,Bg)),Go(1,245760,null,0,Vg,[Af,"UIView.PARENT_INJECT",Ir],{name:[0,"name"]},null)],function(t,e){t(e,1,0,e.component.name)},null)}function vb(t){return va(0,[(t()(),ro(0,0,null,null,2,"ui-view-ng-upgrade",[],null,null,null,gb,mb)),(e=ab,n=[],Wo(-1,9216,null,0,"UIView.PARENT_INJECT",e,n)),Go(2,49152,null,0,sb,[$e,"UIView.PARENT_INJECT",Zp],null,null)],null,null);var e,n}var bb=_o("ui-view-ng-upgrade",sb,vb,{name:"name"},{},[]),yb="accent",wb=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],kb=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;o._focusMonitor=r,o._animationMode=i,o.isRoundButton=o._hasHostAttributes("mat-fab","mat-mini-fab"),o.isIconButton=o._hasHostAttributes("mat-icon-button");for(var a=0,s=wb;a<s.length;a++){var l=s[a];o._hasHostAttributes(l)&&e.nativeElement.classList.add(l)}return o._focusMonitor.monitor(o._elementRef,!0),o.isRoundButton&&(o.color=yb),o}return i(e,t),e.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._elementRef)},e.prototype.focus=function(){this._getHostElement().focus()},e.prototype._getHostElement=function(){return this._elementRef.nativeElement},e.prototype._isRippleDisabled=function(){return this.disableRipple||this.disabled},e.prototype._hasHostAttributes=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.some(function(e){return t._getHostElement().hasAttribute(e)})},e}(wg(yg(kg(function(){return function(t){this._elementRef=t}}())))),_b=function(){return function(){}}();function xb(){return"undefined"!=typeof process}function Sb(t){switch(t.length){case 0:return new _h;case 1:return t[0];default:return new xh(t)}}function $b(t,e,n,r,i,o){void 0===i&&(i={}),void 0===o&&(o={});var a=[],s=[],l=-1,u=null;if(r.forEach(function(t){var n=t.offset,r=n==l,c=r&&u||{};Object.keys(t).forEach(function(n){var r=n,s=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,a),s){case Sh:s=i[n];break;case bh:s=o[n];break;default:s=e.normalizeStyleValue(n,r,s,a)}c[r]=s}),r||s.push(c),u=c,l=n}),a.length)throw new Error("Unable to animate due to the following errors:\n - "+a.join("\n - "));return s}function Tb(t,e,n,r){switch(e){case"start":t.onStart(function(){return r(n&&Cb(n,"start",t))});break;case"done":t.onDone(function(){return r(n&&Cb(n,"done",t))});break;case"destroy":t.onDestroy(function(){return r(n&&Cb(n,"destroy",t))})}}function Cb(t,e,n){var r=n.totalTime,i=Eb(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function Eb(t,e,n,r,i,o,a){return void 0===i&&(i=""),void 0===o&&(o=0),{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function Ab(t,e,n){var r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function Db(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var Pb=function(t,e){return!1},Ob=function(t,e){return!1},Mb=function(t,e,n){return[]},Rb=xb();if(Rb||"undefined"!=typeof Element){if(Pb=function(t,e){return t.contains(e)},Rb||Element.prototype.matches)Ob=function(t,e){return t.matches(e)};else{var jb=Element.prototype,Ib=jb.matchesSelector||jb.mozMatchesSelector||jb.msMatchesSelector||jb.oMatchesSelector||jb.webkitMatchesSelector;Ib&&(Ob=function(t,e){return Ib.apply(t,[e])})}Mb=function(t,e,n){var r=[];if(n)r.push.apply(r,c(t.querySelectorAll(e)));else{var i=t.querySelector(e);i&&r.push(i)}return r}}var Nb=null,Fb=!1;function Ub(t){Nb||(Nb=("undefined"!=typeof document?document.body:null)||{},Fb=!!Nb.style&&"WebkitAppearance"in Nb.style);var e=!0;return Nb.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&!(e=t in Nb.style)&&Fb&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Nb.style),e}var Lb=Ob,Vb=Pb,Bb=Mb;function Hb(t){var e={};return Object.keys(t).forEach(function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}var qb=function(){function t(){}return t.prototype.validateStyleProperty=function(t){return Ub(t)},t.prototype.matchesElement=function(t,e){return Lb(t,e)},t.prototype.containsElement=function(t,e){return Vb(t,e)},t.prototype.query=function(t,e,n){return Bb(t,e,n)},t.prototype.computeStyle=function(t,e,n){return n||""},t.prototype.animate=function(t,e,n,r,i,o,a){return void 0===o&&(o=[]),new _h(n,r)},t}(),zb=function(){function t(){}return t.NOOP=new qb,t}(),Gb=1e3;function Wb(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Yb(parseFloat(e[1]),e[2])}function Yb(t,e){switch(e){case"s":return t*Gb;default:return t}}function Kb(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var r,i=0,o="";if("string"==typeof t){var a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push('The provided timing value "'+t+'" is invalid.'),{duration:0,delay:0,easing:""};r=Yb(parseFloat(a[1]),a[2]);var s=a[3];null!=s&&(i=Yb(parseFloat(s),a[4]));var l=a[5];l&&(o=l)}else r=t;if(!n){var u=!1,c=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),u=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),u=!0),u&&e.splice(c,0,'The provided timing value "'+t+'" is invalid.')}return{duration:r,delay:i,easing:o}}(t,e,n)}function Zb(t,e){return void 0===e&&(e={}),Object.keys(t).forEach(function(n){e[n]=t[n]}),e}function Qb(t,e,n){if(void 0===n&&(n={}),e)for(var r in t)n[r]=t[r];else Zb(t,n);return n}function Xb(t,e,n){return n?e+":"+n+";":""}function Jb(t){for(var e="",n=0;n<t.style.length;n++)e+=Xb(0,r=t.style.item(n),t.style.getPropertyValue(r));for(var r in t.style)t.style.hasOwnProperty(r)&&!r.startsWith("_")&&(e+=Xb(0,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[r]));t.setAttribute("style",e)}function ty(t,e,n){t.style&&(Object.keys(e).forEach(function(r){var i=ly(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),xb()&&Jb(t))}function ey(t,e){t.style&&(Object.keys(e).forEach(function(e){var n=ly(e);t.style[n]=""}),xb()&&Jb(t))}function ny(t){return Array.isArray(t)?1==t.length?t[0]:yh(t):t}var ry=new RegExp("{{\\s*(.+?)\\s*}}","g");function iy(t){var e=[];if("string"==typeof t){for(var n=t.toString(),r=void 0;r=ry.exec(n);)e.push(r[1]);ry.lastIndex=0}return e}function oy(t,e,n){var r=t.toString(),i=r.replace(ry,function(t,r){var i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function ay(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var sy=/-+([a-z0-9])/g;function ly(t){return t.replace(sy,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[1].toUpperCase()})}function uy(t,e){return 0===t||0===e}function cy(t,e,n){var r=Object.keys(n);if(r.length&&e.length){var i=e[0],o=[];if(r.forEach(function(t){i.hasOwnProperty(t)||o.push(t),i[t]=n[t]}),o.length)for(var a=function(){var n=e[s];o.forEach(function(e){n[e]=py(t,e)})},s=1;s<e.length;s++)a()}return e}function dy(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function py(t,e){return window.getComputedStyle(t)[e]}var fy="*",hy=new Set(["true","1"]),my=new Set(["false","0"]);function gy(t,e){var n=hy.has(t)||my.has(t),r=hy.has(e)||my.has(e);return function(i,o){var a=t==fy||t==i,s=e==fy||e==o;return!a&&n&&"boolean"==typeof i&&(a=i?hy.has(t):my.has(t)),!s&&r&&"boolean"==typeof o&&(s=o?hy.has(e):my.has(e)),a&&s}}var vy=new RegExp("s*:selfs*,?","g");function by(t,e,n){return new yy(t).build(e,n)}var yy=function(){function t(t){this._driver=t}return t.prototype.build=function(t,e){var n=new wy(e);return this._resetContextStyleTimingState(n),dy(this,ny(t),n)},t.prototype._resetContextStyleTimingState=function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0},t.prototype.visitTrigger=function(t,e){var n=this,r=e.queryCount=0,i=e.depCount=0,o=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(function(t){if(n._resetContextStyleTimingState(e),0==t.type){var s=t,l=s.name;l.toString().split(/\s*,\s*/).forEach(function(t){s.name=t,o.push(n.visitState(s,e))}),s.name=l}else if(1==t.type){var u=n.visitTransition(t,e);r+=u.queryCount,i+=u.depCount,a.push(u)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}},t.prototype.visitState=function(t,e){var n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){var i=new Set,o=r||{};if(n.styles.forEach(function(t){if(ky(t)){var e=t;Object.keys(e).forEach(function(t){iy(e[t]).forEach(function(t){o.hasOwnProperty(t)||i.add(t)})})}}),i.size){var a=ay(i.values());e.errors.push('state("'+t.name+'", ...) must define default values for all the following style substitutions: '+a.join(", "))}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}},t.prototype.visitTransition=function(t,e){e.queryCount=0,e.depCount=0;var n,r,i,o=dy(this,ny(t.animation),e);return{type:1,matchers:(n=t.expr,r=e.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach(function(t){return function(t,e,n){if(":"==t[0]){var r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'+t+'" is not supported'),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}var i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'+t+'" is not supported'),e;var o=i[1],a=i[2],s=i[3];e.push(gy(o,s)),"<"!=a[0]||o==fy&&s==fy||e.push(gy(s,o))}(t,i,r)}):i.push(n),i),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:_y(t.options)}},t.prototype.visitSequence=function(t,e){var n=this;return{type:2,steps:t.steps.map(function(t){return dy(n,t,e)}),options:_y(t.options)}},t.prototype.visitGroup=function(t,e){var n=this,r=e.currentTime,i=0,o=t.steps.map(function(t){e.currentTime=r;var o=dy(n,t,e);return i=Math.max(i,e.currentTime),o});return e.currentTime=i,{type:3,steps:o,options:_y(t.options)}},t.prototype.visitAnimate=function(t,e){var n,r=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return xy(Kb(t,e).duration,0,"");var r=t;if(r.split(/\s+/).some(function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)})){var i=xy(0,0,"");return i.dynamic=!0,i.strValue=r,i}return xy((n=n||Kb(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;var i=t.styles?t.styles:wh({});if(5==i.type)n=this.visitKeyframes(i,e);else{var o=t.styles,a=!1;if(!o){a=!0;var s={};r.easing&&(s.easing=r.easing),o=wh(s)}e.currentTime+=r.duration+r.delay;var l=this.visitStyle(o,e);l.isEmptyStep=a,n=l}return e.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}},t.prototype.visitStyle=function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n},t.prototype._makeStyleAst=function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach(function(t){"string"==typeof t?t==bh?n.push(t):e.errors.push("The provided style string value "+t+" is not allowed."):n.push(t)}):n.push(t.styles);var r=!1,i=null;return n.forEach(function(t){if(ky(t)){var e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(var o in e)if(e[o].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}},t.prototype._validateStyleAst=function(t,e){var n=this,r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(function(t){"string"!=typeof t&&Object.keys(t).forEach(function(r){if(n._driver.validateStyleProperty(r)){var a,s,l,u=e.collectedStyles[e.currentQuerySelector],c=u[r],d=!0;c&&(o!=i&&o>=c.startTime&&i<=c.endTime&&(e.errors.push('The CSS property "'+r+'" that exists between the times of "'+c.startTime+'ms" and "'+c.endTime+'ms" is also being animated in a parallel animation between the times of "'+o+'ms" and "'+i+'ms"'),d=!1),o=c.startTime),d&&(u[r]={startTime:o,endTime:i}),e.options&&(a=e.errors,s=e.options.params||{},(l=iy(t[r])).length&&l.forEach(function(t){s.hasOwnProperty(t)||a.push("Unable to resolve the local animation param "+t+" in the given list of values")}))}else e.errors.push('The provided animation property "'+r+'" is not a supported CSS property for animations')})})},t.prototype.visitKeyframes=function(t,e){var n=this,r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,o=[],a=!1,s=!1,l=0,u=t.steps.map(function(t){var r=n._makeStyleAst(t,e),u=null!=r.offset?r.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach(function(t){if(ky(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}});else if(ky(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}return e}(r.styles),c=0;return null!=u&&(i++,c=r.offset=u),s=s||c<0||c>1,a=a||c<l,l=c,o.push(c),r});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");var c=t.steps.length,d=0;i>0&&i<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(d=1/(c-1));var p=c-1,f=e.currentTime,h=e.currentAnimateTimings,m=h.duration;return u.forEach(function(t,i){var a=d>0?i==p?1:d*i:o[i],s=a*m;e.currentTime=f+h.delay+s,h.duration=s,n._validateStyleAst(t,e),t.offset=a,r.styles.push(t)}),r},t.prototype.visitReference=function(t,e){return{type:8,animation:dy(this,ny(t.animation),e),options:_y(t.options)}},t.prototype.visitAnimateChild=function(t,e){return e.depCount++,{type:9,options:_y(t.options)}},t.prototype.visitAnimateRef=function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:_y(t.options)}},t.prototype.visitQuery=function(t,e){var n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;var i=u(function(t){var e=!!t.split(/\s*,\s*/).find(function(t){return":self"==t});return e&&(t=t.replace(vy,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(t){return".ng-trigger-"+t.substr(1)}).replace(/:animating/g,".ng-animating"),e]}(t.selector),2),o=i[0],a=i[1];e.currentQuerySelector=n.length?n+" "+o:o,Ab(e.collectedStyles,e.currentQuerySelector,{});var s=dy(this,ny(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:s,originalSelector:t.selector,options:_y(t.options)}},t.prototype.visitStagger=function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Kb(t.timings,e.errors,!0);return{type:12,animation:dy(this,ny(t.animation),e),timings:n,options:null}},t}(),wy=function(){return function(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}();function ky(t){return!Array.isArray(t)&&"object"==typeof t}function _y(t){var e;return t?(t=Zb(t)).params&&(t.params=(e=t.params)?Zb(e):null):t={},t}function xy(t,e,n){return{duration:t,delay:e,easing:n}}function Sy(t,e,n,r,i,o,a,s){return void 0===a&&(a=null),void 0===s&&(s=!1),{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:s}}var $y=function(){function t(){this._map=new Map}return t.prototype.consume=function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e},t.prototype.append=function(t,e){var n=this._map.get(t);n||this._map.set(t,n=[]),n.push.apply(n,c(e))},t.prototype.has=function(t){return this._map.has(t)},t.prototype.clear=function(){this._map.clear()},t}(),Ty=new RegExp(":enter","g"),Cy=new RegExp(":leave","g");function Ey(t,e,n,r,i,o,a,s,l,u){return void 0===o&&(o={}),void 0===a&&(a={}),void 0===u&&(u=[]),(new Ay).buildKeyframes(t,e,n,r,i,o,a,s,l,u)}var Ay=function(){function t(){}return t.prototype.buildKeyframes=function(t,e,n,r,i,o,a,s,l,u){void 0===u&&(u=[]),l=l||new $y;var c=new Py(t,e,l,r,i,u,[]);c.options=s,c.currentTimeline.setStyles([o],null,c.errors,s),dy(this,n,c);var d=c.timelines.filter(function(t){return t.containsAnimation()});if(d.length&&Object.keys(a).length){var p=d[d.length-1];p.allowOnlyTimelineStyles()||p.setStyles([a],null,c.errors,s)}return d.length?d.map(function(t){return t.buildKeyframes()}):[Sy(e,[],[],[],0,0,"",!1)]},t.prototype.visitTrigger=function(t,e){},t.prototype.visitState=function(t,e){},t.prototype.visitTransition=function(t,e){},t.prototype.visitAnimateChild=function(t,e){var n=e.subInstructions.consume(e.element);if(n){var r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t},t.prototype.visitAnimateRef=function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t},t.prototype._visitSubInstructions=function(t,e,n){var r=e.currentTimeline.currentTime,i=null!=n.duration?Wb(n.duration):null,o=null!=n.delay?Wb(n.delay):null;return 0!==i&&t.forEach(function(t){var n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r},t.prototype.visitReference=function(t,e){e.updateOptions(t.options,!0),dy(this,t.animation,e),e.previousNode=t},t.prototype.visitSequence=function(t,e){var n=this,r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&((i=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Dy);var a=Wb(o.delay);i.delayNextStep(a)}t.steps.length&&(t.steps.forEach(function(t){return dy(n,t,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t},t.prototype.visitGroup=function(t,e){var n=this,r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?Wb(t.options.delay):0;t.steps.forEach(function(a){var s=e.createSubContext(t.options);o&&s.delayNextStep(o),dy(n,a,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)}),r.forEach(function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)}),e.transformIntoNewTimeline(i),e.previousNode=t},t.prototype._visitTiming=function(t,e){if(t.dynamic){var n=t.strValue;return Kb(e.params?oy(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}},t.prototype.visitAnimate=function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());var i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t},t.prototype.visitStyle=function(t,e){var n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t},t.prototype.visitKeyframes=function(t,e){var n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(function(t){o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t},t.prototype.visitQuery=function(t,e){var n=this,r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?Wb(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Dy);var a=r,s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=s.length;var l=null;s.forEach(function(r,i){e.currentQueryIndex=i;var s=e.createSubContext(t.options,r);o&&s.delayNextStep(o),r===e.element&&(l=s.currentTimeline),dy(n,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t},t.prototype.visitStagger=function(t,e){var n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),a=o*(e.currentQueryTotal-1),s=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var l=e.currentTimeline;s&&l.delayNextStep(s);var u=l.currentTime;dy(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)},t}(),Dy={},Py=function(){function t(t,e,n,r,i,o,a,s){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Dy,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=s||new Oy(this._driver,e,0),a.push(this.currentTimeline)}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.updateOptions=function(t,e){var n=this;if(t){var r=t,i=this.options;null!=r.duration&&(i.duration=Wb(r.duration)),null!=r.delay&&(i.delay=Wb(r.delay));var o=r.params;if(o){var a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach(function(t){e&&a.hasOwnProperty(t)||(a[t]=oy(o[t],a,n.errors))})}}},t.prototype._copyOptions=function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach(function(t){n[t]=e[t]})}}return t},t.prototype.createSubContext=function(e,n,r){void 0===e&&(e=null);var i=n||this.element,o=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o},t.prototype.transformIntoNewTimeline=function(t){return this.previousNode=Dy,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline},t.prototype.appendInstructionToTimeline=function(t,e,n){var r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new My(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r},t.prototype.incrementTime=function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)},t.prototype.delayNextStep=function(t){t>0&&this.currentTimeline.delayNextStep(t)},t.prototype.invokeQuery=function(t,e,n,r,i,o){var a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(Ty,"."+this._enterClassName)).replace(Cy,"."+this._leaveClassName);var s=this._driver.query(this.element,t,1!=n);0!==n&&(s=n<0?s.slice(s.length+n,s.length):s.slice(0,n)),a.push.apply(a,c(s))}return i||0!=a.length||o.push('`query("'+e+'")` returned zero elements. (Use `query("'+e+'", { optional: true })` if you wish to allow this.)'),a},t}(),Oy=function(){function t(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}return t.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}},t.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),t.prototype.delayNextStep=function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t},t.prototype.fork=function(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)},t.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},t.prototype.forwardFrame=function(){this.duration+=1,this._loadKeyframe()},t.prototype.forwardTime=function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()},t.prototype._updateStyle=function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}},t.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},t.prototype.applyEmptyStep=function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(function(t){e._backFill[t]=e._globalTimelineStyles[t]||bh,e._currentKeyframe[t]=bh}),this._currentEmptyStepKeyframe=this._currentKeyframe},t.prototype.setStyles=function(t,e,n,r){var i=this;e&&(this._previousKeyframe.easing=e);var o=r&&r.params||{},a=function(t,e){var n,r={};return t.forEach(function(t){"*"===t?(n=n||Object.keys(e)).forEach(function(t){r[t]=bh}):Qb(t,!1,r)}),r}(t,this._globalTimelineStyles);Object.keys(a).forEach(function(t){var e=oy(a[t],o,n);i._pendingStyles[t]=e,i._localTimelineStyles.hasOwnProperty(t)||(i._backFill[t]=i._globalTimelineStyles.hasOwnProperty(t)?i._globalTimelineStyles[t]:bh),i._updateStyle(t,e)})},t.prototype.applyStylesToKeyframe=function(){var t=this,e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){t._currentKeyframe[n]=e[n]}),Object.keys(this._localTimelineStyles).forEach(function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])}))},t.prototype.snapshotCurrentStyles=function(){var t=this;Object.keys(this._localTimelineStyles).forEach(function(e){var n=t._localTimelineStyles[e];t._pendingStyles[e]=n,t._updateStyle(e,n)})},t.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(t.prototype,"properties",{get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t},enumerable:!0,configurable:!0}),t.prototype.mergeTimelineCollectedStyles=function(t){var e=this;Object.keys(t._styleSummary).forEach(function(n){var r=e._styleSummary[n],i=t._styleSummary[n];(!r||i.time>r.time)&&e._updateStyle(n,i.value)})},t.prototype.buildKeyframes=function(){var t=this;this.applyStylesToKeyframe();var e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach(function(o,a){var s=Qb(o,!0);Object.keys(s).forEach(function(t){var r=s[t];r==Sh?e.add(t):r==bh&&n.add(t)}),r||(s.offset=a/t.duration),i.push(s)});var o=e.size?ay(e.values()):[],a=n.size?ay(n.values()):[];if(r){var s=i[0],l=Zb(s);s.offset=0,l.offset=1,i=[s,l]}return Sy(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)},t}(),My=function(t){function e(e,n,r,i,o,a,s){void 0===s&&(s=!1);var l=t.call(this,e,n,a.delay)||this;return l.element=n,l.keyframes=r,l.preStyleProps=i,l.postStyleProps=o,l._stretchStartingKeyframe=s,l.timings={duration:a.duration,delay:a.delay,easing:a.easing},l}return i(e,t),e.prototype.containsAnimation=function(){return this.keyframes.length>1},e.prototype.buildKeyframes=function(){var t=this.keyframes,e=this.timings,n=e.delay,r=e.duration,i=e.easing;if(this._stretchStartingKeyframe&&n){var o=[],a=r+n,s=n/a,l=Qb(t[0],!1);l.offset=0,o.push(l);var u=Qb(t[0],!1);u.offset=Ry(s),o.push(u);for(var c=t.length-1,d=1;d<=c;d++){var p=Qb(t[d],!1);p.offset=Ry((n+p.offset*r)/a),o.push(p)}r=a,n=0,i="",t=o}return Sy(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)},e}(Oy);function Ry(t,e){void 0===e&&(e=3);var n=Math.pow(10,e-1);return Math.round(t*n)/n}var jy=function(){return function(){}}(),Iy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.normalizePropertyName=function(t,e){return ly(t)},e.prototype.normalizeStyleValue=function(t,e,n,r){var i="",o=n.toString().trim();if(Ny[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push("Please provide a CSS unit value for "+t+":"+n)}return o+i},e}(jy),Ny=Fy("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function Fy(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function Uy(t,e,n,r,i,o,a,s,l,u,c,d,p){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:a,timelines:s,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:d,errors:p}}var Ly={},Vy=function(){function t(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}return t.prototype.match=function(t,e,n,r){return function(t,e,n,r,i){return t.some(function(t){return t(e,n,r,i)})}(this.ast.matchers,t,e,n,r)},t.prototype.buildStyles=function(t,e,n){var r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o},t.prototype.build=function(t,e,n,r,i,a,s,l,u,c){var d=[],p=this.ast.options&&this.ast.options.params||Ly,f=this.buildStyles(n,s&&s.params||Ly,d),h=l&&l.params||Ly,m=this.buildStyles(r,h,d),g=new Set,v=new Map,b=new Map,y="void"===r,w={params:o({},p,h)},k=c?[]:Ey(t,e,this.ast.animation,i,a,f,m,w,u,d),_=0;if(k.forEach(function(t){_=Math.max(t.duration+t.delay,_)}),d.length)return Uy(e,this._triggerName,n,r,y,f,m,[],[],v,b,_,d);k.forEach(function(t){var n=t.element,r=Ab(v,n,{});t.preStyleProps.forEach(function(t){return r[t]=!0});var i=Ab(b,n,{});t.postStyleProps.forEach(function(t){return i[t]=!0}),n!==e&&g.add(n)});var x=ay(g.values());return Uy(e,this._triggerName,n,r,y,f,m,k,x,v,b,_)},t}(),By=function(){function t(t,e){this.styles=t,this.defaultParams=e}return t.prototype.buildStyles=function(t,e){var n={},r=Zb(this.defaultParams);return Object.keys(t).forEach(function(e){var n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(function(t){if("string"!=typeof t){var i=t;Object.keys(i).forEach(function(t){var o=i[t];o.length>1&&(o=oy(o,r,e)),n[t]=o})}}),n},t}(),Hy=function(){function t(t,e){var n=this;this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(function(t){n.states[t.name]=new By(t.style,t.options&&t.options.params||{})}),qy(this.states,"true","1"),qy(this.states,"false","0"),e.transitions.forEach(function(e){n.transitionFactories.push(new Vy(t,e,n.states))}),this.fallbackTransition=new Vy(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},this.states)}return Object.defineProperty(t.prototype,"containsQueries",{get:function(){return this.ast.queryCount>0},enumerable:!0,configurable:!0}),t.prototype.matchTransition=function(t,e,n,r){return this.transitionFactories.find(function(i){return i.match(t,e,n,r)})||null},t.prototype.matchStyles=function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)},t}();function qy(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var zy=new $y,Gy=function(){function t(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}return t.prototype.register=function(t,e){var n=[],r=by(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r},t.prototype._buildPlayer=function(t,e,n){var r=t.element,i=$b(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)},t.prototype.create=function(t,e,n){var r=this;void 0===n&&(n={});var i,o=[],a=this._animations[t],s=new Map;if(a?(i=Ey(this._driver,e,a,"ng-enter","ng-leave",{},{},n,zy,o)).forEach(function(t){var e=Ab(s,t.element,{});t.postStyleProps.forEach(function(t){return e[t]=null})}):(o.push("The requested animation doesn't exist or has already been destroyed"),i=[]),o.length)throw new Error("Unable to create the animation due to the following errors: "+o.join("\n"));s.forEach(function(t,e){Object.keys(t).forEach(function(n){t[n]=r._driver.computeStyle(e,n,bh)})});var l=Sb(i.map(function(t){var e=s.get(t.element);return r._buildPlayer(t,{},e)}));return this._playersById[t]=l,l.onDestroy(function(){return r.destroy(t)}),this.players.push(l),l},t.prototype.destroy=function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)},t.prototype._getPlayer=function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e},t.prototype.listen=function(t,e,n,r){var i=Eb(e,"","","");return Tb(this._getPlayer(t),n,i,r),function(){}},t.prototype.command=function(t,e,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}else this.create(t,e,r[0]||{});else this.register(t,r[0])},t}(),Wy=[],Yy={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ky={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Zy="__ng_removed",Qy=function(){function t(t,e){void 0===e&&(e=""),this.namespaceId=e;var n=t&&t.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(n?t.value:t),n){var r=Zb(t);delete r.value,this.options=r}else this.options={};this.options.params||(this.options.params={})}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.absorbOptions=function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach(function(t){null==n[t]&&(n[t]=e[t])})}},t}(),Xy=new Qy("void"),Jy=function(){function t(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,sw(e,this._hostClassName)}return t.prototype.listen=function(t,e,n,r){var i,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'+n+'" because the animation trigger "'+e+"\" doesn't exist!");if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'+e+'" because the provided event is undefined!');if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'+n+'" for the animation trigger "'+e+'" is not supported!');var a=Ab(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};a.push(s);var l=Ab(this._engine.statesByElement,t,{});return l.hasOwnProperty(e)||(sw(t,"ng-trigger"),sw(t,"ng-trigger-"+e),l[e]=Xy),function(){o._engine.afterFlush(function(){var t=a.indexOf(s);t>=0&&a.splice(t,1),o._triggers[e]||delete l[e]})}},t.prototype.register=function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)},t.prototype._getTrigger=function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'+t+'" has not been registered!');return e},t.prototype.trigger=function(t,e,n,r){var i=this;void 0===r&&(r=!0);var o=this._getTrigger(e),a=new ew(this.id,e,t),s=this._engine.statesByElement.get(t);s||(sw(t,"ng-trigger"),sw(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));var l=s[e],u=new Qy(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),s[e]=u,l||(l=Xy),"void"===u.value||l.value!==u.value){var c=Ab(this._engine.playersByElement,t,[]);c.forEach(function(t){t.namespaceId==i.id&&t.triggerName==e&&t.queued&&t.destroy()});var d=o.matchTransition(l.value,u.value,t,u.params),p=!1;if(!d){if(!r)return;d=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:d,fromState:l,toState:u,player:a,isFallbackTransition:p}),p||(sw(t,"ng-animate-queued"),a.onStart(function(){lw(t,"ng-animate-queued")})),a.onDone(function(){var e=i.players.indexOf(a);e>=0&&i.players.splice(e,1);var n=i._engine.playersByElement.get(t);if(n){var r=n.indexOf(a);r>=0&&n.splice(r,1)}}),this.players.push(a),c.push(a),a}if(!function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(l.params,u.params)){var f=[],h=o.matchStyles(l.value,l.params,f),m=o.matchStyles(u.value,u.params,f);f.length?this._engine.reportError(f):this._engine.afterFlush(function(){ey(t,h),ty(t,m)})}},t.prototype.deregister=function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach(function(e,n){delete e[t]}),this._elementListeners.forEach(function(n,r){e._elementListeners.set(r,n.filter(function(e){return e.name!=t}))})},t.prototype.clearElementCache=function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach(function(t){return t.destroy()}),this._engine.playersByElement.delete(t))},t.prototype._signalRemovalForInnerTriggers=function(t,e,n){var r=this;void 0===n&&(n=!1),this._engine.driver.query(t,".ng-trigger",!0).forEach(function(t){if(!t[Zy]){var n=r._engine.fetchNamespacesByElement(t);n.size?n.forEach(function(n){return n.triggerLeaveAnimation(t,e,!1,!0)}):r.clearElementCache(t)}})},t.prototype.triggerLeaveAnimation=function(t,e,n,r){var i=this,o=this._engine.statesByElement.get(t);if(o){var a=[];if(Object.keys(o).forEach(function(e){if(i._triggers[e]){var n=i.trigger(t,e,"void",r);n&&a.push(n)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Sb(a).onDone(function(){return i._engine.processLeaveNode(t)}),!0}return!1},t.prototype.prepareLeaveAnimationListeners=function(t){var e=this,n=this._elementListeners.get(t);if(n){var r=new Set;n.forEach(function(n){var i=n.name;if(!r.has(i)){r.add(i);var o=e._triggers[i].fallbackTransition,a=e._engine.statesByElement.get(t)[i]||Xy,s=new Qy("void"),l=new ew(e.id,i,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:i,transition:o,fromState:a,toState:s,player:l,isFallbackTransition:!0})}})}},t.prototype.removeNode=function(t,e){var n=this,r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),!this.triggerLeaveAnimation(t,e,!0)){var i=!1;if(r.totalAnimations){var o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else for(var a=t;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}this.prepareLeaveAnimationListeners(t),i?r.markElementAsRemoved(this.id,t,!1,e):(r.afterFlush(function(){return n.clearElementCache(t)}),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}},t.prototype.insertNode=function(t,e){sw(t,this._hostClassName)},t.prototype.drainQueuedTransitions=function(t){var e=this,n=[];return this._queue.forEach(function(r){var i=r.player;if(!i.destroyed){var o=r.element,a=e._elementListeners.get(o);a&&a.forEach(function(e){if(e.name==r.triggerName){var n=Eb(o,r.triggerName,r.fromState.value,r.toState.value);n._data=t,Tb(r.player,e.phase,n,e.callback)}}),i.markedForDestroy?e._engine.afterFlush(function(){i.destroy()}):n.push(r)}}),this._queue=[],n.sort(function(t,n){var r=t.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:e._engine.driver.containsElement(t.element,n.element)?1:-1})},t.prototype.destroy=function(t){this.players.forEach(function(t){return t.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,t)},t.prototype.elementContainsData=function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),!!this._queue.find(function(e){return e.element===t})||e},t}(),tw=function(){function t(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return t.prototype._onRemovalComplete=function(t,e){this.onRemovalComplete(t,e)},Object.defineProperty(t.prototype,"queuedPlayers",{get:function(){var t=[];return this._namespaceList.forEach(function(e){e.players.forEach(function(e){e.queued&&t.push(e)})}),t},enumerable:!0,configurable:!0}),t.prototype.createNamespace=function(t,e){var n=new Jy(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n},t.prototype._balanceNamespaceList=function(t,e){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t},t.prototype.register=function(t,e){var n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n},t.prototype.registerTrigger=function(t,e,n){var r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++},t.prototype.destroy=function(t,e){var n=this;if(t){var r=this._fetchNamespace(t);this.afterFlush(function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[t];var e=n._namespaceList.indexOf(r);e>=0&&n._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(function(){return r.destroy(e)})}},t.prototype._fetchNamespace=function(t){return this._namespaceLookup[t]},t.prototype.fetchNamespacesByElement=function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]].namespaceId;if(o){var a=this._fetchNamespace(o);a&&e.add(a)}}return e},t.prototype.trigger=function(t,e,n,r){if(nw(e)){var i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1},t.prototype.insertNode=function(t,e,n,r){if(nw(e)){var i=e[Zy];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){var a=this._fetchNamespace(t);a&&a.insertNode(e,n)}r&&this.collectEnterElement(e)}},t.prototype.collectEnterElement=function(t){this.collectedEnterElements.push(t)},t.prototype.markElementAsDisabled=function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),sw(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),lw(t,"ng-animate-disabled"))},t.prototype.removeNode=function(t,e,n){if(nw(e)){var r=t?this._fetchNamespace(t):null;r?r.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n)}else this._onRemovalComplete(e,n)},t.prototype.markElementAsRemoved=function(t,e,n,r){this.collectedLeaveElements.push(e),e[Zy]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}},t.prototype.listen=function(t,e,n,r,i){return nw(e)?this._fetchNamespace(t).listen(e,n,r,i):function(){}},t.prototype._buildInstruction=function(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)},t.prototype.destroyInnerAnimations=function(t){var e=this,n=this.driver.query(t,".ng-trigger",!0);n.forEach(function(t){return e.destroyActiveAnimationsForElement(t)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,".ng-animating",!0)).forEach(function(t){return e.finishActiveQueriedAnimationOnElement(t)})},t.prototype.destroyActiveAnimationsForElement=function(t){var e=this.playersByElement.get(t);e&&e.forEach(function(t){t.queued?t.markedForDestroy=!0:t.destroy()})},t.prototype.finishActiveQueriedAnimationOnElement=function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach(function(t){return t.finish()})},t.prototype.whenRenderingDone=function(){var t=this;return new Promise(function(e){if(t.players.length)return Sb(t.players).onDone(function(){return e()});e()})},t.prototype.processLeaveNode=function(t){var e=this,n=t[Zy];if(n&&n.setForRemoval){if(t[Zy]=Yy,n.namespaceId){this.destroyInnerAnimations(t);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(function(t){e.markElementAsDisabled(t,!1)})},t.prototype.flush=function(t){var e=this;void 0===t&&(t=-1);var n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(t,n){return e._balanceNamespaceList(t,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)sw(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,t)}finally{for(r=0;r<i.length;r++)i[r]()}}else for(r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(t){return t()}),this._flushFns=[],this._whenQuietFns.length){var o=this._whenQuietFns;this._whenQuietFns=[],n.length?Sb(n).onDone(function(){o.forEach(function(t){return t()})}):o.forEach(function(t){return t()})}},t.prototype.reportError=function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))},t.prototype._flushAnimations=function(t,e){var n=this,r=new $y,i=[],a=new Map,s=[],l=new Map,u=new Map,d=new Map,p=new Set;this.disabledNodes.forEach(function(t){p.add(t);for(var e=n.driver.query(t,".ng-animate-queued",!0),r=0;r<e.length;r++)p.add(e[r])});var f=this.bodyNode,h=Array.from(this.statesByElement.keys()),m=ow(h,this.collectedEnterElements),g=new Map,v=0;m.forEach(function(t,e){var n="ng-enter"+v++;g.set(e,n),t.forEach(function(t){return sw(t,n)})});for(var b=[],y=new Set,w=new Set,k=0;k<this.collectedLeaveElements.length;k++)(F=(N=this.collectedLeaveElements[k])[Zy])&&F.setForRemoval&&(b.push(N),y.add(N),F.hasAnimation?this.driver.query(N,".ng-star-inserted",!0).forEach(function(t){return y.add(t)}):w.add(N));var _=new Map,x=ow(h,Array.from(y));x.forEach(function(t,e){var n="ng-leave"+v++;_.set(e,n),t.forEach(function(t){return sw(t,n)})}),t.push(function(){m.forEach(function(t,e){var n=g.get(e);t.forEach(function(t){return lw(t,n)})}),x.forEach(function(t,e){var n=_.get(e);t.forEach(function(t){return lw(t,n)})}),b.forEach(function(t){n.processLeaveNode(t)})});for(var S=[],$=[],T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(e).forEach(function(t){var e=t.player,o=t.element;if(S.push(e),n.collectedEnterElements.length){var a=o[Zy];if(a&&a.setForMove)return void e.destroy()}var c=!f||!n.driver.containsElement(f,o),p=_.get(o),h=g.get(o),m=n._buildInstruction(t,r,h,p,c);if(m.errors&&m.errors.length)$.push(m);else{if(c)return e.onStart(function(){return ey(o,m.fromStyles)}),e.onDestroy(function(){return ty(o,m.toStyles)}),void i.push(e);if(t.isFallbackTransition)return e.onStart(function(){return ey(o,m.fromStyles)}),e.onDestroy(function(){return ty(o,m.toStyles)}),void i.push(e);m.timelines.forEach(function(t){return t.stretchStartingKeyframe=!0}),r.append(o,m.timelines),s.push({instruction:m,player:e,element:o}),m.queriedElements.forEach(function(t){return Ab(l,t,[]).push(e)}),m.preStyleProps.forEach(function(t,e){var n=Object.keys(t);if(n.length){var r=u.get(e);r||u.set(e,r=new Set),n.forEach(function(t){return r.add(t)})}}),m.postStyleProps.forEach(function(t,e){var n=Object.keys(t),r=d.get(e);r||d.set(e,r=new Set),n.forEach(function(t){return r.add(t)})})}});if($.length){var C=[];$.forEach(function(t){C.push("@"+t.triggerName+" has failed due to:\n"),t.errors.forEach(function(t){return C.push("- "+t+"\n")})}),S.forEach(function(t){return t.destroy()}),this.reportError(C)}var E=new Map,A=new Map;s.forEach(function(t){var e=t.element;r.has(e)&&(A.set(e,e),n._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),i.forEach(function(t){var e=t.element;n._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(function(t){Ab(E,e,[]).push(t),t.destroy()})});var D=b.filter(function(t){return cw(t,u,d)}),P=new Map;iw(P,this.driver,w,d,bh).forEach(function(t){cw(t,u,d)&&D.push(t)});var O=new Map;m.forEach(function(t,e){iw(O,n.driver,new Set(t),u,Sh)}),D.forEach(function(t){var e=P.get(t),n=O.get(t);P.set(t,o({},e,n))});var M=[],R=[],j={};s.forEach(function(t){var e=t.element,o=t.player,s=t.instruction;if(r.has(e)){if(p.has(e))return o.onDestroy(function(){return ty(e,s.toStyles)}),o.disabled=!0,o.overrideTotalTime(s.totalTime),void i.push(o);var l=j;if(A.size>1){for(var u=e,c=[];u=u.parentNode;){var d=A.get(u);if(d){l=d;break}c.push(u)}c.forEach(function(t){return A.set(t,l)})}var f=n._buildAnimation(o.namespaceId,s,E,a,O,P);if(o.setRealPlayer(f),l===j)M.push(o);else{var h=n.playersByElement.get(l);h&&h.length&&(o.parentPlayer=Sb(h)),i.push(o)}}else ey(e,s.fromStyles),o.onDestroy(function(){return ty(e,s.toStyles)}),R.push(o),p.has(e)&&i.push(o)}),R.forEach(function(t){var e=a.get(t.element);if(e&&e.length){var n=Sb(e);t.setRealPlayer(n)}}),i.forEach(function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(var I=0;I<b.length;I++){var N,F=(N=b[I])[Zy];if(lw(N,"ng-leave"),!F||!F.hasAnimation){var U=[];if(l.size){var L=l.get(N);L&&L.length&&U.push.apply(U,c(L));for(var V=this.driver.query(N,".ng-animating",!0),B=0;B<V.length;B++){var H=l.get(V[B]);H&&H.length&&U.push.apply(U,c(H))}}var q=U.filter(function(t){return!t.destroyed});q.length?uw(this,N,q):this.processLeaveNode(N)}}return b.length=0,M.forEach(function(t){n.players.push(t),t.onDone(function(){t.destroy();var e=n.players.indexOf(t);n.players.splice(e,1)}),t.play()}),M},t.prototype.elementContainsData=function(t,e){var n=!1,r=e[Zy];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n},t.prototype.afterFlush=function(t){this._flushFns.push(t)},t.prototype.afterFlushAnimationsDone=function(t){this._whenQuietFns.push(t)},t.prototype._getPreviousPlayers=function(t,e,n,r,i){var o=[];if(e){var a=this.playersByQueriedElement.get(t);a&&(o=a)}else{var s=this.playersByElement.get(t);if(s){var l=!i||"void"==i;s.forEach(function(t){t.queued||(l||t.triggerName==r)&&o.push(t)})}}return(n||r)&&(o=o.filter(function(t){return!(n&&n!=t.namespaceId||r&&r!=t.triggerName)})),o},t.prototype._beforeAnimationBuild=function(t,e,n){var r,i,o=e.element,a=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName,u=function(t){var r=t.element,i=r!==o,l=Ab(n,r,[]);c._getPreviousPlayers(r,i,a,s,e.toState).forEach(function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})},c=this;try{for(var d=l(e.timelines),p=d.next();!p.done;p=d.next())u(p.value)}catch(f){r={error:f}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}ey(o,e.fromStyles)},t.prototype._buildAnimation=function(t,e,n,r,i,o){var a=this,s=e.triggerName,l=e.element,u=[],c=new Set,d=new Set,p=e.timelines.map(function(e){var p=e.element;c.add(p);var f=p[Zy];if(f&&f.removedBeforeQueried)return new _h(e.duration,e.delay);var h,m,g=p!==l,v=(h=(n.get(p)||Wy).map(function(t){return t.getRealPlayer()}),m=[],function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];i instanceof xh?t(i.players,n):n.push(i)}}(h,m),m).filter(function(t){return!!t.element&&t.element===p}),b=i.get(p),y=o.get(p),w=$b(0,a._normalizer,0,e.keyframes,b,y),k=a._buildPlayer(e,w,v);if(e.subTimeline&&r&&d.add(p),g){var _=new ew(t,s,p);_.setRealPlayer(k),u.push(_)}return k});u.forEach(function(t){Ab(a.playersByQueriedElement,t.element,[]).push(t),t.onDone(function(){return function(t,e,n){var r;if(t instanceof Map){if(r=t.get(e)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}}else(r=t[e])&&(r.length&&(i=r.indexOf(n),r.splice(i,1)),0==r.length&&delete t[e]);return r}(a.playersByQueriedElement,t.element,t)})}),c.forEach(function(t){return sw(t,"ng-animating")});var f=Sb(p);return f.onDestroy(function(){c.forEach(function(t){return lw(t,"ng-animating")}),ty(l,e.toStyles)}),d.forEach(function(t){Ab(r,t,[]).push(f)}),f},t.prototype._buildPlayer=function(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new _h(t.duration,t.delay)},t}(),ew=function(){function t(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new _h,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return t.prototype.setRealPlayer=function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(function(n){e._queuedCallbacks[n].forEach(function(e){return Tb(t,n,void 0,e)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)},t.prototype.getRealPlayer=function(){return this._player},t.prototype.overrideTotalTime=function(t){this.totalTime=t},t.prototype.syncPlayerEvents=function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart(function(){return n.triggerCallback("start")}),t.onDone(function(){return e.finish()}),t.onDestroy(function(){return e.destroy()})},t.prototype._queueEvent=function(t,e){Ab(this._queuedCallbacks,t,[]).push(e)},t.prototype.onDone=function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)},t.prototype.onStart=function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)},t.prototype.onDestroy=function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)},t.prototype.init=function(){this._player.init()},t.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},t.prototype.play=function(){!this.queued&&this._player.play()},t.prototype.pause=function(){!this.queued&&this._player.pause()},t.prototype.restart=function(){!this.queued&&this._player.restart()},t.prototype.finish=function(){this._player.finish()},t.prototype.destroy=function(){this.destroyed=!0,this._player.destroy()},t.prototype.reset=function(){!this.queued&&this._player.reset()},t.prototype.setPosition=function(t){this.queued||this._player.setPosition(t)},t.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},t.prototype.triggerCallback=function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)},t}();function nw(t){return t&&1===t.nodeType}function rw(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function iw(t,e,n,r,i){var o=[];n.forEach(function(t){return o.push(rw(t))});var a=[];r.forEach(function(n,r){var o={};n.forEach(function(t){var n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r[Zy]=Ky,a.push(r))}),t.set(r,o)});var s=0;return n.forEach(function(t){return rw(t,o[s++])}),a}function ow(t,e){var n=new Map;if(t.forEach(function(t){return n.set(t,[])}),0==e.length)return n;var r=new Set(e),i=new Map;return e.forEach(function(t){var e=function t(e){if(!e)return 1;var o=i.get(e);if(o)return o;var a=e.parentNode;return o=n.has(a)?a:r.has(a)?1:t(a),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}var aw="$$classes";function sw(t,e){if(t.classList)t.classList.add(e);else{var n=t[aw];n||(n=t[aw]={}),n[e]=!0}}function lw(t,e){if(t.classList)t.classList.remove(e);else{var n=t[aw];n&&delete n[e]}}function uw(t,e,n){Sb(n).onDone(function(){return t.processLeaveNode(e)})}function cw(t,e,n){var r=n.get(t);if(!r)return!1;var i=e.get(t);return i?r.forEach(function(t){return i.add(t)}):e.set(t,r),n.delete(t),!0}var dw=function(){function t(t,e,n){var r=this;this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new tw(t,e,n),this._timelineEngine=new Gy(t,e,n),this._transitionEngine.onRemovalComplete=function(t,e){return r.onRemovalComplete(t,e)}}return t.prototype.registerTrigger=function(t,e,n,r,i){var o=t+"-"+r,a=this._triggerCache[o];if(!a){var s=[],l=by(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'+r+'" has failed to build due to the following errors:\n - '+s.join("\n - "));a=function(t,e){return new Hy(t,e)}(r,l),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)},t.prototype.register=function(t,e){this._transitionEngine.register(t,e)},t.prototype.destroy=function(t,e){this._transitionEngine.destroy(t,e)},t.prototype.onInsert=function(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)},t.prototype.onRemove=function(t,e,n){this._transitionEngine.removeNode(t,e,n)},t.prototype.disableAnimations=function(t,e){this._transitionEngine.markElementAsDisabled(t,e)},t.prototype.process=function(t,e,n,r){if("@"==n.charAt(0)){var i=u(Db(n),2);this._timelineEngine.command(i[0],e,i[1],r)}else this._transitionEngine.trigger(t,e,n,r)},t.prototype.listen=function(t,e,n,r,i){if("@"==n.charAt(0)){var o=u(Db(n),2);return this._timelineEngine.listen(o[0],e,o[1],i)}return this._transitionEngine.listen(t,e,n,r,i)},t.prototype.flush=function(t){void 0===t&&(t=-1),this._transitionEngine.flush(t)},Object.defineProperty(t.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),t.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},t}();function pw(t,e){var n=null,r=null;return Array.isArray(e)&&e.length?(n=hw(e[0]),e.length>1&&(r=hw(e[e.length-1]))):e&&(n=hw(e)),n||r?new fw(t,n,r):null}var fw=function(){function t(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;var i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}return t.prototype.start=function(){this._state<1&&(this._startStyles&&ty(this._element,this._startStyles,this._initialStyles),this._state=1)},t.prototype.finish=function(){this.start(),this._state<2&&(ty(this._element,this._initialStyles),this._endStyles&&(ty(this._element,this._endStyles),this._endStyles=null),this._state=1)},t.prototype.destroy=function(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(ey(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ey(this._element,this._endStyles),this._endStyles=null),ty(this._element,this._initialStyles),this._state=3)},t.initialStylesByElement=new WeakMap,t}();function hw(t){for(var e=null,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];mw(i)&&((e=e||{})[i]=t[i])}return e}function mw(t){return"display"===t||"position"===t}var gw="animation",vw="animationend",bw=function(){function t(t,e,n,r,i,o,a){var s=this;this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(t){return s._handleCallback(t)}}return t.prototype.apply=function(){var t,e,n;e=this._duration+"ms "+this._easing+" "+this._delay+"ms 1 normal "+this._fillMode+" "+this._name,(n=Sw(t=this._element,"").trim()).length&&(function(t,e){for(var n=0;n<t.length;n++)","===t.charAt(n)&&0}(n),e=n+", "+e),xw(t,"",e),_w(this._element,this._eventFn,!1),this._startTime=Date.now()},t.prototype.pause=function(){yw(this._element,this._name,"paused")},t.prototype.resume=function(){yw(this._element,this._name,"running")},t.prototype.setPosition=function(t){var e=ww(this._element,this._name);this._position=t*this._duration,xw(this._element,"Delay","-"+this._position+"ms",e)},t.prototype.getPosition=function(){return this._position},t.prototype._handleCallback=function(t){var e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()},t.prototype.finish=function(){this._finished||(this._finished=!0,this._onDoneFn(),_w(this._element,this._eventFn,!0))},t.prototype.destroy=function(){var t,e,n,r;this._destroyed||(this._destroyed=!0,this.finish(),e=this._name,(r=kw(n=Sw(t=this._element,"").split(","),e))>=0&&(n.splice(r,1),xw(t,"",n.join(","))))},t}();function yw(t,e,n){xw(t,"PlayState",n,ww(t,e))}function ww(t,e){var n=Sw(t,"");return n.indexOf(",")>0?kw(n.split(","),e):kw([n],e)}function kw(t,e){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function _w(t,e,n){n?t.removeEventListener(vw,e):t.addEventListener(vw,e)}function xw(t,e,n,r){var i=gw+e;if(null!=r){var o=t.style[i];if(o.length){var a=o.split(",");a[r]=n,n=a.join(",")}}t.style[i]=n}function Sw(t,e){return t.style[gw+e]}var $w="linear",Tw=function(){function t(t,e,n,r,i,o,a,s){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=a,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||$w,this.totalTime=r+i,this._buildStyler()}return t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.destroy=function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype._flushDoneFns=function(){this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[]},t.prototype._flushStartFns=function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]},t.prototype.finish=function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())},t.prototype.setPosition=function(t){this._styler.setPosition(t)},t.prototype.getPosition=function(){return this._styler.getPosition()},t.prototype.hasStarted=function(){return this._state>=2},t.prototype.init=function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())},t.prototype.play=function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()},t.prototype.pause=function(){this.init(),this._styler.pause()},t.prototype.restart=function(){this.reset(),this.play()},t.prototype.reset=function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()},t.prototype._buildStyler=function(){var t=this;this._styler=new bw(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return t.finish()})},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t.prototype.beforeDestroy=function(){var t=this;this.init();var e={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach(function(r){"offset"!=r&&(e[r]=n?t._finalStyles[r]:py(t.element,r))})}this.currentSnapshot=e},t}(),Cw=function(t){function e(e,n){var r=t.call(this)||this;return r.element=e,r._startingStyles={},r.__initialized=!1,r._styles=Hb(n),r}return i(e,t),e.prototype.init=function(){var e=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(function(t){e._startingStyles[t]=e.element.style[t]}),t.prototype.init.call(this))},e.prototype.play=function(){var e=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(function(t){return e.element.style.setProperty(t,e._styles[t])}),t.prototype.play.call(this))},e.prototype.destroy=function(){var e=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach(function(t){var n=e._startingStyles[t];n?e.element.style.setProperty(t,n):e.element.style.removeProperty(t)}),this._startingStyles=null,t.prototype.destroy.call(this))},e}(_h),Ew=function(){function t(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return t.prototype.validateStyleProperty=function(t){return Ub(t)},t.prototype.matchesElement=function(t,e){return Lb(t,e)},t.prototype.containsElement=function(t,e){return Vb(t,e)},t.prototype.query=function(t,e,n){return Bb(t,e,n)},t.prototype.computeStyle=function(t,e,n){return window.getComputedStyle(t)[e]},t.prototype.buildKeyframeElement=function(t,e,n){n=n.map(function(t){return Hb(t)});var r="@keyframes "+e+" {\n",i="";n.forEach(function(t){i=" ";var e=parseFloat(t.offset);r+=""+i+100*e+"% {\n",i+=" ",Object.keys(t).forEach(function(e){var n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=i+"animation-timing-function: "+n+";\n"));default:return void(r+=""+i+e+": "+n+";\n")}}),r+=i+"}\n"}),r+="}\n";var o=document.createElement("style");return o.innerHTML=r,o},t.prototype.animate=function(t,e,n,r,i,o,a){void 0===o&&(o=[]),a&&this._notifyFaultyScrubber();var s=o.filter(function(t){return t instanceof Tw}),l={};uy(n,r)&&s.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return l[t]=e[t]})});var u=function(t){var e={};return t&&(Array.isArray(t)?t:[t]).forEach(function(t){Object.keys(t).forEach(function(n){"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=cy(t,e,l));if(0==n)return new Cw(t,u);var c="gen_css_kf_"+this._count++,d=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(d);var p=pw(t,e),f=new Tw(t,e,c,n,r,i,u,p);return f.onDestroy(function(){var t;(t=d).parentNode.removeChild(t)}),f},t.prototype._notifyFaultyScrubber=function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)},t}(),Aw=function(){function t(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this._buildPlayer(),this._preparePlayerBeforeStart()},t.prototype._buildPlayer=function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",function(){return t._onFinish()})}},t.prototype._preparePlayerBeforeStart=function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()},t.prototype._triggerWebAnimation=function(t,e,n){return t.animate(e,n)},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.play=function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()},t.prototype.pause=function(){this.init(),this.domPlayer.pause()},t.prototype.finish=function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()},t.prototype.reset=function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype._resetDomPlayerState=function(){this.domPlayer&&this.domPlayer.cancel()},t.prototype.restart=function(){this.reset(),this.play()},t.prototype.hasStarted=function(){return this._started},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.setPosition=function(t){this.domPlayer.currentTime=t*this.time},t.prototype.getPosition=function(){return this.domPlayer.currentTime/this.time},Object.defineProperty(t.prototype,"totalTime",{get:function(){return this._delay+this._duration},enumerable:!0,configurable:!0}),t.prototype.beforeDestroy=function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(e[n]=t._finished?t._finalKeyframe[n]:py(t.element,n))}),this.currentSnapshot=e},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),Dw=function(){function t(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Pw().toString()),this._cssKeyframesDriver=new Ew}return t.prototype.validateStyleProperty=function(t){return Ub(t)},t.prototype.matchesElement=function(t,e){return Lb(t,e)},t.prototype.containsElement=function(t,e){return Vb(t,e)},t.prototype.query=function(t,e,n){return Bb(t,e,n)},t.prototype.computeStyle=function(t,e,n){return window.getComputedStyle(t)[e]},t.prototype.overrideWebAnimationsSupport=function(t){this._isNativeImpl=t},t.prototype.animate=function(t,e,n,r,i,o,a){if(void 0===o&&(o=[]),!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);var s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);var l={},u=o.filter(function(t){return t instanceof Aw});uy(n,r)&&u.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return l[t]=e[t]})});var c=pw(t,e=cy(t,e=e.map(function(t){return Qb(t,!1)}),l));return new Aw(t,e,s,c)},t}();function Pw(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var Ow=function(t){function e(e,n){var r=t.call(this)||this;return r._nextAnimationId=0,r._renderer=e.createRenderer(n.body,{id:"0",encapsulation:Ot.None,styles:[],data:{animation:[]}}),r}return i(e,t),e.prototype.build=function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(t)?yh(t):t;return jw(this._renderer,null,e,"register",[n]),new Mw(e,this._renderer)},e}(gh),Mw=function(t){function e(e,n){var r=t.call(this)||this;return r._id=e,r._renderer=n,r}return i(e,t),e.prototype.create=function(t,e){return new Rw(this._id,t,e||{},this._renderer)},e}(vh),Rw=function(){function t(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}return t.prototype._listen=function(t,e){return this._renderer.listen(this.element,"@@"+this.id+":"+t,e)},t.prototype._command=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return jw(this._renderer,this.element,this.id,t,e)},t.prototype.onDone=function(t){this._listen("done",t)},t.prototype.onStart=function(t){this._listen("start",t)},t.prototype.onDestroy=function(t){this._listen("destroy",t)},t.prototype.init=function(){this._command("init")},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this._command("play"),this._started=!0},t.prototype.pause=function(){this._command("pause")},t.prototype.restart=function(){this._command("restart")},t.prototype.finish=function(){this._command("finish")},t.prototype.destroy=function(){this._command("destroy")},t.prototype.reset=function(){this._command("reset")},t.prototype.setPosition=function(t){this._command("setPosition",t)},t.prototype.getPosition=function(){return 0},t}();function jw(t,e,n,r,i){return t.setProperty(e,"@@"+n+":"+r,i)}var Iw=function(){function t(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return t.prototype.createRenderer=function(t,e){var n=this,r=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var i=this._rendererCache.get(r);return i||(i=new Nw("",r,this.engine),this._rendererCache.set(r,i)),i}var o=e.id,a=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(a,t),e.data.animation.forEach(function(e){return n.engine.registerTrigger(o,a,t,e.name,e)}),new Fw(this,a,r,this.engine)},t.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},t.prototype._scheduleCountTask=function(){var t=this;this.promise.then(function(){t._microtaskId++})},t.prototype.scheduleListenerCallback=function(t,e,n){var r=this;t>=0&&t<this._microtaskId?this._zone.run(function(){return e(n)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){r._zone.run(function(){r._animationCallbacksBuffer.forEach(function(t){var e=u(t,2);(0,e[0])(e[1])}),r._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))},t.prototype.end=function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)}),this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},t}(),Nw=function(){function t(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?function(t){return e.destroyNode(t)}:null}return Object.defineProperty(t.prototype,"data",{get:function(){return this.delegate.data},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},t.prototype.createElement=function(t,e){return this.delegate.createElement(t,e)},t.prototype.createComment=function(t){return this.delegate.createComment(t)},t.prototype.createText=function(t){return this.delegate.createText(t)},t.prototype.appendChild=function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)},t.prototype.insertBefore=function(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)},t.prototype.removeChild=function(t,e){this.engine.onRemove(this.namespaceId,e,this.delegate)},t.prototype.selectRootElement=function(t,e){return this.delegate.selectRootElement(t,e)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setAttribute=function(t,e,n,r){this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)},t.prototype.setValue=function(t,e){this.delegate.setValue(t,e)},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.disableAnimations=function(t,e){this.engine.disableAnimations(t,e)},t}(),Fw=function(t){function e(e,n,r,i){var o=t.call(this,n,r,i)||this;return o.factory=e,o.namespaceId=n,o}return i(e,t),e.prototype.setProperty=function(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)},e.prototype.listen=function(t,e,n){var r,i,o,a=this;if("@"==e.charAt(0)){var s=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),l=e.substr(1),c="";return"@"!=l.charAt(0)&&(l=(r=u((i=l,o=i.indexOf("."),[i.substring(0,o),i.substr(o+1)]),2))[0],c=r[1]),this.engine.listen(this.namespaceId,s,l,c,function(t){a.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)},e}(Nw),Uw=function(t){function e(e,n,r){return t.call(this,e.body,n,r)||this}return i(e,t),e}(dw);function Lw(){return"function"==typeof Pw()?new Dw:new Ew}function Vw(){return new Iy}function Bw(t,e,n){return new Iw(t,e,n)}var Hw=new mt("AnimationModuleType"),qw=function(){return function(){}}(),zw=Ai({encapsulation:2,styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media (hover:none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-flat-button,.mat-icon-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-flat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-focus-overlay,.mat-stroked-button .mat-button-ripple.mat-ripple{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button-focus-overlay,.mat-button-ripple.mat-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-focus-overlay{opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}@media (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:#fff}}@media (-ms-high-contrast:black-on-white){.mat-button-focus-overlay{background-color:#000}}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}@media (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],data:{}});function Gw(t){return va(2,[sa(402653184,1,{ripple:0}),(t()(),ro(1,0,null,null,1,"span",[["class","mat-button-wrapper"]],null,null,null,null,null)),pa(null,0),(t()(),ro(3,0,null,null,1,"div",[["class","mat-button-ripple mat-ripple"],["matRipple",""]],[[2,"mat-button-ripple-round",null],[2,"mat-ripple-unbounded",null]],null,null,null,null)),Go(4,212992,[[1,4]],0,Ag,[$e,gr,vm,[2,Eg],[2,Hw]],{centered:[0,"centered"],disabled:[1,"disabled"],trigger:[2,"trigger"]},null),(t()(),ro(5,0,null,null,0,"div",[["class","mat-button-focus-overlay"]],null,null,null,null,null))],function(t,e){var n=e.component;t(e,4,0,n.isIconButton,n._isRippleDisabled(),n._getHostElement())},function(t,e){var n=e.component;t(e,3,0,n.isRoundButton||n.isIconButton,Mo(e,4).unbounded)})}var Ww=Ai({encapsulation:2,styles:[],data:{}});function Yw(t){return va(0,[(t()(),ro(0,0,null,null,6,"li",[],null,null,null,null,null)),(t()(),ro(1,0,null,null,5,"a",[["target","_blank"]],[[8,"href",4]],null,null,null,null)),(t()(),ro(2,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),ro(3,0,null,null,1,"div",[["class","name"]],null,null,null,null,null)),(t()(),ha(4,null,["",""])),(t()(),ro(5,0,null,null,1,"div",[["class","handler"]],null,null,null,null,null)),(t()(),ha(6,null,["@",""]))],null,function(t,e){t(e,1,0,e.context.$implicit.html_url),t(e,2,0,e.context.$implicit.avatar_url),t(e,4,0,e.context.$implicit.name),t(e,6,0,e.context.$implicit.login)})}function Kw(t){return va(0,[(t()(),ro(0,0,null,null,33,"mat-dialog-content",[["class","mat-typography mat-dialog-content"]],null,null,null,null,null)),Go(1,16384,null,0,ag,[],null,null),(t()(),ro(2,0,null,null,7,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),ro(3,0,null,null,0,"i",[["class","logo"]],null,null,null,null,null)),(t()(),ro(4,0,null,null,5,"h1",[["class","full logo"]],null,null,null,null,null)),(t()(),ha(5,null,[" "," "])),(t()(),ro(6,0,null,null,1,"small",[],[[8,"hidden",0]],null,null,null,null)),(t()(),ha(-1,null,[" Powered By Doubtfire "])),(t()(),ro(8,0,null,null,1,"small",[],[[8,"hidden",0]],null,null,null,null)),(t()(),ha(-1,null,[" Version 5 "])),(t()(),ro(10,0,null,null,23,"div",[["class","modal-body"]],null,null,null,null,null)),(t()(),ro(11,0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),ha(-1,null,["Main Contributors"])),(t()(),ro(13,0,null,null,2,"ul",[],null,null,null,null,null)),(t()(),no(16777216,null,null,1,null,Yw)),Go(15,278528,null,0,Ls,[Ir,sn,ni],{ngForOf:[0,"ngForOf"]},null),(t()(),ro(16,0,null,null,1,"p",[["class","text-muted text-center"]],null,null,null,null,null)),(t()(),ha(-1,null,[" \xa9 2012\u20132018. Made in Melbourne. "])),(t()(),ro(18,0,null,null,15,"p",[["class","text-muted text-center logo-smallprint"]],null,null,null,null,null)),(t()(),ha(-1,null,[" Doubtfire is an "])),(t()(),ro(20,0,null,null,1,"a",[["href","http://github.com/doubtfire-lms"]],null,null,null,null,null)),(t()(),ha(-1,null,["Open Source"])),(t()(),ha(-1,null,[" project licensed under "])),(t()(),ro(23,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),ha(-1,null,["GNU Affero General Public License (AGPL) v3.0"])),(t()(),ha(-1,null,[". Star us on "])),(t()(),ro(26,0,null,null,1,"a",[["href","http://github.com/doubtfire-lms/doubtfire-web"]],null,null,null,null,null)),(t()(),ha(-1,null,["GitHub"])),(t()(),ha(-1,null,["! "])),(t()(),ro(29,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ha(-1,null,[' The Doubtfire Logo adapted under Creative Commons from "Progress" by Creative Stall from the '])),(t()(),ro(31,0,null,null,1,"a",[["href","https://thenounproject.com/search/?q=progress&i=175994"]],null,null,null,null,null)),(t()(),ha(-1,null,["Noun Project"])),(t()(),ha(-1,null,[". "])),(t()(),ro(34,0,null,null,5,"mat-dialog-actions",[["align","end"],["class","mat-dialog-actions"]],null,null,null,null,null)),Go(35,16384,null,0,sg,[],null,null),(t()(),ro(36,0,null,null,3,"button",[["mat-dialog-close",""],["mat-stroked-button",""],["type","button"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==Mo(t,38).dialogRef.close(Mo(t,38).dialogResult)&&r),r},Gw,zw)),Go(37,180224,null,0,kb,[$e,vm,gg,[2,Hw]],null,null),Go(38,606208,null,0,og,[[2,Jm],$e,ig],{dialogResult:[0,"dialogResult"]},null),(t()(),ha(-1,0,["Close"]))],function(t,e){t(e,15,0,e.component.data.contributors),t(e,38,0,"")},function(t,e){var n=e.component;t(e,5,0,n.data.externalName),t(e,6,0,"Doubtfire"==n.data.externalName),t(e,8,0,"Doubtfire"!=n.data.externalName),t(e,36,0,Mo(e,37).disabled||null,"NoopAnimations"===Mo(e,37)._animationMode,Mo(e,38)._hasAriaLabel?Mo(e,38).ariaLabel:null)})}function Zw(t){return va(0,[(t()(),ro(0,0,null,null,1,"about-doubtfire-dialog",[],null,null,null,Kw,Ww)),Go(1,49152,null,0,Dc,[tg],null,null)],null,null)}var Qw=_o("about-doubtfire-dialog",Dc,Zw,{},{},[]),Xw=function(){function t(){}return t.prototype.create=function(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)},t.ngInjectableDef=ft({factory:function(){return new t},token:t,providedIn:"root"}),t}(),Jw=function(){return function(){}}(),tk=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new ek(t,this.notifier,this.source))},t}(),ek=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i}return i(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{n=new O;try{r=(0,this.notifier)(n)}catch(o){return t.prototype.error.call(this,o)}i=z(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,r,i){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},e}(G),nk=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new rk(t,this.delay,this.scheduler))},t}(),rk=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return i(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new ik(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(dm.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(dm.createComplete()),this.unsubscribe()},e}(x),ik=function(){return function(t,e){this.time=t,this.notification=e}}(),ok=function(){function t(){}return t.prototype.intercept=function(t,e){var n,r;return e.handle(t).pipe((n=function(t){return t.pipe(Gu(function(t,e){return e<3&&(400==t.status||0==t.status)?zu(t.status):lm(t)}),function(t,e){void 0===e&&(e=Qh);var n=1e3 instanceof Date&&!isNaN(1e3)?1e3-e.now():Math.abs(1e3);return function(t){return t.lift(new nk(n,e))}}())},function(t){return t.lift(new tk(n,t))}),(r=function(t){return lm(t.error instanceof ErrorEvent?"Error: "+t.error.message:"Error Code: "+t.status+"\nMessage: "+t.message)},function(t){var e=new Kg(r),n=t.lift(e);return e.caught=n}))},t}(),ak=function(){return function(){}}(),sk=_s(mh,[],function(t){return function(t){for(var e={},n=[],r=!1,i=0;i<t.length;i++){var o=t[i];o.token===he&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,e[Ti(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}([fo(512,we,ke,[[8,[jg,Wg,bb,Qw]],[3,we],xe]),fo(5120,li,di,[[3,li]]),fo(4608,Is,Ns,[li,[2,js]]),fo(4608,ur,ur,[]),fo(5120,Kn,Zn,[]),fo(5120,ni,ui,[]),fo(5120,ri,ci,[]),fo(4608,Yl,Kl,[Gs]),fo(6144,Me,null,[Yl]),fo(4608,Vl,Hl,[]),fo(5120,hl,function(t,e,n,r,i,o,a,s){return[new Ul(t,e,n),new Wl(r),new ql(i,o,a,s)]},[Gs,gr,Jn,Gs,Gs,Vl,er,[2,Bl]]),fo(4608,ml,ml,[hl,gr]),fo(135680,bl,bl,[Gs]),fo(4608,$l,$l,[ml,bl]),fo(5120,zb,Lw,[]),fo(5120,jy,Vw,[]),fo(4608,dw,Uw,[Gs,zb,jy]),fo(5120,Ee,Bw,[$l,dw,gr]),fo(6144,vl,null,[bl]),fo(4608,Sr,Sr,[gr]),fo(4608,gh,Ow,[Ee,ol]),fo(4608,Xw,Xw,[]),fo(4608,zm,zm,[Dm,Nm,we,Hm,Im,te,gr,Gs,Vh,[2,Cs]]),fo(5120,Gm,Wm,[zm]),fo(5120,ng,rg,[zm]),fo(135680,ig,ig,[zm,te,[2,Cs],[2,eg],ng,[3,ig],Nm]),fo(4608,_c,xc,[Gs,Jn,wc]),fo(4608,Sc,Sc,[_c,kc]),fo(5120,hc,function(t){return[t,new ok]},[Sc]),fo(5120,"$injector",Ru,[]),fo(5120,"$rootScope",ju,["$injector"]),fo(5120,"$compile",Iu,["$injector"]),fo(5120,"$parse",Nu,["$injector"]),fo(5120,"$uiRouter",ub,["$injector"]),fo(5120,Af,lb,["$uiRouter",te]),fo(5120,Zp,mv,[Af]),fo(5120,"UIView.PARENT_INJECT",cb,[Zp]),fo(5120,Xf,uv,[Af]),fo(5120,Qf,cv,[Af]),fo(5120,gf,dv,[Af]),fo(5120,yf,pv,[Af]),fo(5120,$f,fv,[Af]),fo(5120,wf,hv,[Af]),fo(5120,kf,gv,[Af]),fo(4608,Ac,Ac,[pc]),fo(4608,Pc,Pc,[ig,Ec,Ac]),fo(1073742336,zs,zs,[]),fo(1024,Tn,ru,[]),fo(1024,Wn,function(t){return[(e=t,dl("probe",fl),dl("coreTokens",o({},pl,(e||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return fl})];var e},[[2,Er]]),fo(512,Yn,Yn,[[2,Wn]]),fo(131584,Mr,Mr,[gr,er,te,Tn,we,Yn]),fo(1073742336,pi,pi,[Mr]),fo(1073742336,iu,iu,[[3,iu]]),fo(1073742336,qw,qw,[]),fo(1073742336,Bh,Bh,[]),fo(1073742336,bg,bg,[[2,vg],[2,Bl]]),fo(1073742336,bm,bm,[]),fo(1073742336,Dg,Dg,[]),fo(1073742336,_b,_b,[]),fo(1073742336,Jw,Jw,[]),fo(1073742336,ak,ak,[]),fo(1073742336,Oh,Oh,[]),fo(1073742336,km,km,[]),fo(1073742336,Ym,Ym,[]),fo(1073742336,lg,lg,[]),fo(1073742336,Tc,Tc,[]),fo(1073742336,Cc,Cc,[]),fo(1073742336,Uu,Uu,[te,gr]),fo(1073742336,nv,nv,[]),fo(1073742336,hb,hb,[]),fo(512,bc,bc,[]),fo(2048,vc,null,[bc]),fo(512,yc,yc,[vc]),fo(2048,Qu,null,[yc]),fo(512,Zu,$c,[Qu,te]),fo(512,pc,pc,[Zu]),fo(512,Ec,Ec,[pc]),fo(1073742336,mh,mh,[Uu,Ec,au]),fo(256,he,!0,[]),fo(256,Hw,"BrowserAnimations",[]),fo(256,wc,"XSRF-TOKEN",[]),fo(256,kc,"X-XSRF-TOKEN",[]),fo(1024,Xg,function(){return[fb]},[]),fo(1024,Jg,function(){return[{}]},[]),fo(1024,Qg,function(){return[[]]},[])])});(function(){if(Ie)throw new Error("Cannot enable prod mode after platform setup.");je=!1})(),Oc.config(["$urlServiceProvider",function(t){return t.deferIntercept()}]),nu().bootstrapModuleFactory(sk).then(function(t){var e=t.injector.get(Af).urlService;t.injector.get(gr).run(function(){e.listen(),e.sync()})})},zYWJ:function(t,e){angular.module("doubtfire.common.header",["doubtfire.common.header.unit-dropdown"]).controller("BasicHeaderCtrl",function(t,e,n,r,i,o,a,s,l,u){var c,d;return t.currentUser=o.profile,t.tutor=null!=(null!=(c=e.params)?c.tutor:void 0),t.openUserSettings=function(){return i.show(t.currentUser)},t.openNotificationSettings=function(){return r.show(t.currentUser)},t.openAboutModal=function(){return a.show()},d=function(e,n){var r;if(null!=(r=n.context))return t.unit={code:r.unit_code||r.unit().code,name:r.unit_name||r.unit().name},t[null!=r.role?"unitRole":"project"]=r},t.task=e.current.data.task,s.onSuccess({to:"**"},function(e){return t.task=e.to().data.task}),n.$on("UnitRoleChanged",d),n.$on("ProjectChanged",d)})}},[[0,0]]]);