!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";var t,e;function n(){return t.apply(null,arguments)}function r(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function o(t){return void 0===t}function a(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function u(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function s(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t,e){for(var n in e)l(e,n)&&(t[n]=e[n]);return l(e,"toString")&&(t.toString=e.toString),l(e,"valueOf")&&(t.valueOf=e.valueOf),t}function f(t,e,n,r){return De(t,e,n,r,!0).utc()}function d(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function h(t){if(null==t._isValid){var n=d(t),r=e.call(n.parsedDateParts,function(t){return null!=t}),i=!isNaN(t._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&r);if(t._strict&&(i=i&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function p(t){var e=f(NaN);return null!=t?c(d(e),t):d(e).userInvalidated=!0,e}e=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var g=n.momentProperties=[];function v(t,e){var n,r,i;if(o(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),o(e._i)||(t._i=e._i),o(e._f)||(t._f=e._f),o(e._l)||(t._l=e._l),o(e._strict)||(t._strict=e._strict),o(e._tzm)||(t._tzm=e._tzm),o(e._isUTC)||(t._isUTC=e._isUTC),o(e._offset)||(t._offset=e._offset),o(e._pf)||(t._pf=d(e)),o(e._locale)||(t._locale=e._locale),g.length>0)for(n=0;n<g.length;n++)o(i=e[r=g[n]])||(t[r]=i);return t}var m=!1;function y(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===m&&(m=!0,n.updateOffset(this),m=!1)}function b(t){return t instanceof y||null!=t&&null!=t._isAMomentObject}function x(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function w(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=x(e)),n}function k(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&w(t[r])!==w(e[r]))&&a++;return a+o}function _(t){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function M(t,e){var r=!0;return c(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,t),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(var u in i+="\n["+a+"] ",arguments[0])i+=u+": "+arguments[0][u]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}_(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return e.apply(this,arguments)},e)}var S,C={};function A(t,e){null!=n.deprecationHandler&&n.deprecationHandler(t,e),C[t]||(_(e),C[t]=!0)}function D(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function T(t,e){var n,r=c({},t);for(n in e)l(e,n)&&(i(t[n])&&i(e[n])?(r[n]={},c(r[n],t[n]),c(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)l(t,n)&&!l(e,n)&&i(t[n])&&(r[n]=c({},r[n]));return r}function L(t){null!=t&&this.set(t)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,S=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)l(t,e)&&n.push(e);return n};var E={};function O(t,e){var n=t.toLowerCase();E[n]=E[n+"s"]=E[e]=t}function N(t){return"string"==typeof t?E[t]||E[t.toLowerCase()]:void 0}function F(t){var e,n,r={};for(n in t)l(t,n)&&(e=N(n))&&(r[e]=t[n]);return r}var P={};function W(t,e){P[t]=e}function z(t,e,n){var r=""+Math.abs(t);return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,e-r.length)).toString().substr(1)+r}var R=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,I=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,H={},Y={};function B(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(Y[t]=i),e&&(Y[e[0]]=function(){return z(i.apply(this,arguments),e[1],e[2])}),n&&(Y[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function j(t,e){return t.isValid()?(e=U(e,t.localeData()),H[e]=H[e]||function(t){var e,n,r,i=t.match(R);for(e=0,n=i.length;e<n;e++)i[e]=Y[i[e]]?Y[i[e]]:(r=i[e]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(e){var r,o="";for(r=0;r<n;r++)o+=D(i[r])?i[r].call(e,t):i[r];return o}}(e),H[e](t)):t.localeData().invalidDate()}function U(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(I.lastIndex=0;n>=0&&I.test(t);)t=t.replace(I,r),I.lastIndex=0,n-=1;return t}var G=/\d/,V=/\d\d/,q=/\d{3}/,$=/\d{4}/,X=/[+-]?\d{6}/,Z=/\d\d?/,K=/\d\d\d\d?/,Q=/\d\d\d\d\d\d?/,J=/\d{1,3}/,tt=/\d{1,4}/,et=/[+-]?\d{1,6}/,nt=/\d+/,rt=/[+-]?\d+/,it=/Z|[+-]\d\d:?\d\d/gi,ot=/Z|[+-]\d\d(?::?\d\d)?/gi,at=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ut={};function st(t,e,n){ut[t]=D(e)?e:function(t,r){return t&&n?n:e}}function lt(t,e){return l(ut,t)?ut[t](e._strict,e._locale):new RegExp(ct(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,i){return e||n||r||i})))}function ct(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ft={};function dt(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),a(e)&&(r=function(t,n){n[e]=w(t)}),n=0;n<t.length;n++)ft[t[n]]=r}function ht(t,e){dt(t,function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)})}function pt(t,e,n){null!=e&&l(ft,t)&&ft[t](e,n._a,n,t)}var gt=0,vt=1,mt=2,yt=3,bt=4,xt=5,wt=6,kt=7,_t=8;function Mt(t){return St(t)?366:365}function St(t){return t%4==0&&t%100!=0||t%400==0}B("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),B(0,["YY",2],0,function(){return this.year()%100}),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),O("year","y"),W("year",1),st("Y",rt),st("YY",Z,V),st("YYYY",tt,$),st("YYYYY",et,X),st("YYYYYY",et,X),dt(["YYYYY","YYYYYY"],gt),dt("YYYY",function(t,e){e[gt]=2===t.length?n.parseTwoDigitYear(t):w(t)}),dt("YY",function(t,e){e[gt]=n.parseTwoDigitYear(t)}),dt("Y",function(t,e){e[gt]=parseInt(t,10)}),n.parseTwoDigitYear=function(t){return w(t)+(w(t)>68?1900:2e3)};var Ct,At=Dt("FullYear",!0);function Dt(t,e){return function(r){return null!=r?(Lt(this,t,r),n.updateOffset(this,e),this):Tt(this,t)}}function Tt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Lt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&St(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Et(n,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function Et(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=(e%12+12)%12;return t+=(e-n)/12,1===n?St(t)?29:28:31-n%7%2}Ct=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},B("M",["MM",2],"Mo",function(){return this.month()+1}),B("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),B("MMMM",0,0,function(t){return this.localeData().months(this,t)}),O("month","M"),W("month",8),st("M",Z),st("MM",Z,V),st("MMM",function(t,e){return e.monthsShortRegex(t)}),st("MMMM",function(t,e){return e.monthsRegex(t)}),dt(["M","MM"],function(t,e){e[vt]=w(t)-1}),dt(["MMM","MMMM"],function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[vt]=i:d(n).invalidMonth=t});var Ot=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Nt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ft="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Pt(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=w(e);else if(!a(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),Et(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Wt(t){return null!=t?(Pt(this,t),n.updateOffset(this,!0),this):Tt(this,"Month")}var zt=at,Rt=at;function It(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],o=[];for(e=0;e<12;e++)n=f([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),o.sort(t),e=0;e<12;e++)r[e]=ct(r[e]),i[e]=ct(i[e]);for(e=0;e<24;e++)o[e]=ct(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Ht(t){var e;if(t<100&&t>=0){var n=Array.prototype.slice.call(arguments);n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function Yt(t,e,n){var r=7+e-n;return-(7+Ht(t,0,r).getUTCDay()-e)%7+r-1}function Bt(t,e,n,r,i){var o,a,u=1+7*(e-1)+(7+n-r)%7+Yt(t,r,i);return u<=0?a=Mt(o=t-1)+u:u>Mt(t)?(o=t+1,a=u-Mt(t)):(o=t,a=u),{year:o,dayOfYear:a}}function jt(t,e,n){var r,i,o=Yt(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?r=a+Ut(i=t.year()-1,e,n):a>Ut(t.year(),e,n)?(r=a-Ut(t.year(),e,n),i=t.year()+1):(i=t.year(),r=a),{week:r,year:i}}function Ut(t,e,n){var r=Yt(t,e,n),i=Yt(t+1,e,n);return(Mt(t)-r+i)/7}function Gt(t,e){return t.slice(e,7).concat(t.slice(0,e))}B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),O("week","w"),O("isoWeek","W"),W("week",5),W("isoWeek",5),st("w",Z),st("ww",Z,V),st("W",Z),st("WW",Z,V),ht(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=w(t)}),B("d",0,"do","day"),B("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),B("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),B("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),O("day","d"),O("weekday","e"),O("isoWeekday","E"),W("day",11),W("weekday",11),W("isoWeekday",11),st("d",Z),st("e",Z),st("E",Z),st("dd",function(t,e){return e.weekdaysMinRegex(t)}),st("ddd",function(t,e){return e.weekdaysShortRegex(t)}),st("dddd",function(t,e){return e.weekdaysRegex(t)}),ht(["dd","ddd","dddd"],function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:d(n).invalidWeekday=t}),ht(["d","e","E"],function(t,e,n,r){e[r]=w(t)});var Vt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),qt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),$t="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Xt=at,Zt=at,Kt=at;function Qt(){function t(t,e){return e.length-t.length}var e,n,r,i,o,a=[],u=[],s=[],l=[];for(e=0;e<7;e++)n=f([2e3,1]).day(e),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),u.push(i),s.push(o),l.push(r),l.push(i),l.push(o);for(a.sort(t),u.sort(t),s.sort(t),l.sort(t),e=0;e<7;e++)u[e]=ct(u[e]),s[e]=ct(s[e]),l[e]=ct(l[e]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Jt(){return this.hours()%12||12}function te(t,e){B(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function ee(t,e){return e._meridiemParse}B("H",["HH",2],0,"hour"),B("h",["hh",2],0,Jt),B("k",["kk",2],0,function(){return this.hours()||24}),B("hmm",0,0,function(){return""+Jt.apply(this)+z(this.minutes(),2)}),B("hmmss",0,0,function(){return""+Jt.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)}),B("Hmm",0,0,function(){return""+this.hours()+z(this.minutes(),2)}),B("Hmmss",0,0,function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)}),te("a",!0),te("A",!1),O("hour","h"),W("hour",13),st("a",ee),st("A",ee),st("H",Z),st("h",Z),st("k",Z),st("HH",Z,V),st("hh",Z,V),st("kk",Z,V),st("hmm",K),st("hmmss",Q),st("Hmm",K),st("Hmmss",Q),dt(["H","HH"],yt),dt(["k","kk"],function(t,e,n){var r=w(t);e[yt]=24===r?0:r}),dt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),dt(["h","hh"],function(t,e,n){e[yt]=w(t),d(n).bigHour=!0}),dt("hmm",function(t,e,n){var r=t.length-2;e[yt]=w(t.substr(0,r)),e[bt]=w(t.substr(r)),d(n).bigHour=!0}),dt("hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[yt]=w(t.substr(0,r)),e[bt]=w(t.substr(r,2)),e[xt]=w(t.substr(i)),d(n).bigHour=!0}),dt("Hmm",function(t,e,n){var r=t.length-2;e[yt]=w(t.substr(0,r)),e[bt]=w(t.substr(r))}),dt("Hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[yt]=w(t.substr(0,r)),e[bt]=w(t.substr(r,2)),e[xt]=w(t.substr(i))});var ne,re=Dt("Hours",!0),ie={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Nt,monthsShort:Ft,week:{dow:0,doy:6},weekdays:Vt,weekdaysMin:$t,weekdaysShort:qt,meridiemParse:/[ap]\.?m?\.?/i},oe={},ae={};function ue(t){return t?t.toLowerCase().replace("_","-"):t}function se(t){var e=null;if(!oe[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=ne._abbr,require("./locale/"+t),le(e)}catch(n){}return oe[t]}function le(t,e){var n;return t&&((n=o(e)?fe(t):ce(t,e))?ne=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),ne._abbr}function ce(t,e){if(null!==e){var n,r=ie;if(e.abbr=t,null!=oe[t])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=oe[t]._config;else if(null!=e.parentLocale)if(null!=oe[e.parentLocale])r=oe[e.parentLocale]._config;else{if(null==(n=se(e.parentLocale)))return ae[e.parentLocale]||(ae[e.parentLocale]=[]),ae[e.parentLocale].push({name:t,config:e}),null;r=n._config}return oe[t]=new L(T(r,e)),ae[t]&&ae[t].forEach(function(t){ce(t.name,t.config)}),le(t),oe[t]}return delete oe[t],null}function fe(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ne;if(!r(t)){if(e=se(t))return e;t=[t]}return function(t){for(var e,n,r,i,o=0;o<t.length;){for(e=(i=ue(t[o]).split("-")).length,n=(n=ue(t[o+1]))?n.split("-"):null;e>0;){if(r=se(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&k(i,n,!0)>=e-1)break;e--}o++}return ne}(t)}function de(t){var e,n=t._a;return n&&-2===d(t).overflow&&(e=n[vt]<0||n[vt]>11?vt:n[mt]<1||n[mt]>Et(n[gt],n[vt])?mt:n[yt]<0||n[yt]>24||24===n[yt]&&(0!==n[bt]||0!==n[xt]||0!==n[wt])?yt:n[bt]<0||n[bt]>59?bt:n[xt]<0||n[xt]>59?xt:n[wt]<0||n[wt]>999?wt:-1,d(t)._overflowDayOfYear&&(e<gt||e>mt)&&(e=mt),d(t)._overflowWeeks&&-1===e&&(e=kt),d(t)._overflowWeekday&&-1===e&&(e=_t),d(t).overflow=e),t}function he(t,e,n){return null!=t?t:null!=e?e:n}function pe(t){var e,r,i,o,a,u=[];if(!t._d){for(i=function(t){var e=new Date(n.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[mt]&&null==t._a[vt]&&function(t){var e,n,r,i,o,a,u,s;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)o=1,a=4,n=he(e.GG,t._a[gt],jt(Te(),1,4).year),r=he(e.W,1),((i=he(e.E,1))<1||i>7)&&(s=!0);else{o=t._locale._week.dow,a=t._locale._week.doy;var l=jt(Te(),o,a);n=he(e.gg,t._a[gt],l.year),r=he(e.w,l.week),null!=e.d?((i=e.d)<0||i>6)&&(s=!0):null!=e.e?(i=e.e+o,(e.e<0||e.e>6)&&(s=!0)):i=o}r<1||r>Ut(n,o,a)?d(t)._overflowWeeks=!0:null!=s?d(t)._overflowWeekday=!0:(u=Bt(n,r,i,o,a),t._a[gt]=u.year,t._dayOfYear=u.dayOfYear)}(t),null!=t._dayOfYear&&(a=he(t._a[gt],i[gt]),(t._dayOfYear>Mt(a)||0===t._dayOfYear)&&(d(t)._overflowDayOfYear=!0),r=Ht(a,0,t._dayOfYear),t._a[vt]=r.getUTCMonth(),t._a[mt]=r.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=u[e]=i[e];for(;e<7;e++)t._a[e]=u[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[yt]&&0===t._a[bt]&&0===t._a[xt]&&0===t._a[wt]&&(t._nextDay=!0,t._a[yt]=0),t._d=(t._useUTC?Ht:function(t,e,n,r,i,o,a){var u;return t<100&&t>=0?(u=new Date(t+400,e,n,r,i,o,a),isFinite(u.getFullYear())&&u.setFullYear(t)):u=new Date(t,e,n,r,i,o,a),u}).apply(null,u),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[yt]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(d(t).weekdayMismatch=!0)}}var ge=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ve=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,me=/Z|[+-]\d\d(?::?\d\d)?/,ye=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],be=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],xe=/^\/?Date\((\-?\d+)/i;function we(t){var e,n,r,i,o,a,u=t._i,s=ge.exec(u)||ve.exec(u);if(s){for(d(t).iso=!0,e=0,n=ye.length;e<n;e++)if(ye[e][1].exec(s[1])){i=ye[e][0],r=!1!==ye[e][2];break}if(null==i)return void(t._isValid=!1);if(s[3]){for(e=0,n=be.length;e<n;e++)if(be[e][1].exec(s[3])){o=(s[2]||" ")+be[e][0];break}if(null==o)return void(t._isValid=!1)}if(!r&&null!=o)return void(t._isValid=!1);if(s[4]){if(!me.exec(s[4]))return void(t._isValid=!1);a="Z"}t._f=i+(o||"")+(a||""),Ce(t)}else t._isValid=!1}var ke=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function _e(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}var Me={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Se(t){var e,n,r,i,o,a,u=ke.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(u){var s=(e=u[3],n=u[2],r=u[5],i=u[6],o=u[7],a=[_e(u[4]),Ft.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)],o&&a.push(parseInt(o,10)),a);if(!function(t,e,n){return!t||qt.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(d(n).weekdayMismatch=!0,n._isValid=!1,!1)}(u[1],s,t))return;t._a=s,t._tzm=function(t,e,n){if(t)return Me[t];if(u[9])return 0;var r=parseInt(u[10],10),i=r%100;return(r-i)/100*60+i}(u[8]),t._d=Ht.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),d(t).rfc2822=!0}else t._isValid=!1}function Ce(t){if(t._f!==n.ISO_8601)if(t._f!==n.RFC_2822){t._a=[],d(t).empty=!0;var e,r,i,o,a,u=""+t._i,s=u.length,l=0;for(i=U(t._f,t._locale).match(R)||[],e=0;e<i.length;e++)(r=(u.match(lt(o=i[e],t))||[])[0])&&((a=u.substr(0,u.indexOf(r))).length>0&&d(t).unusedInput.push(a),u=u.slice(u.indexOf(r)+r.length),l+=r.length),Y[o]?(r?d(t).empty=!1:d(t).unusedTokens.push(o),pt(o,r,t)):t._strict&&!r&&d(t).unusedTokens.push(o);d(t).charsLeftOver=s-l,u.length>0&&d(t).unusedInput.push(u),t._a[yt]<=12&&!0===d(t).bigHour&&t._a[yt]>0&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[yt]=(c=t._locale,f=t._a[yt],null==(h=t._meridiem)?f:null!=c.meridiemHour?c.meridiemHour(f,h):null!=c.isPM?((p=c.isPM(h))&&f<12&&(f+=12),p||12!==f||(f=0),f):f),pe(t),de(t)}else Se(t);else we(t);var c,f,h,p}function Ae(t){var e=t._i,l=t._f;return t._locale=t._locale||fe(t._l),null===e||void 0===l&&""===e?p({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),b(e)?new y(de(e)):(u(e)?t._d=e:r(l)?function(t){var e,n,r,i,o;if(0===t._f.length)return d(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)o=0,e=v({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Ce(e),h(e)&&(o+=d(e).charsLeftOver,o+=10*d(e).unusedTokens.length,d(e).score=o,(null==r||o<r)&&(r=o,n=e));c(t,n||e)}(t):l?Ce(t):function(t){var e=t._i;o(e)?t._d=new Date(n.now()):u(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=xe.exec(t._i);null===e?(we(t),!1===t._isValid&&(delete t._isValid,Se(t),!1===t._isValid&&(delete t._isValid,n.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):r(e)?(t._a=s(e.slice(0),function(t){return parseInt(t,10)}),pe(t)):i(e)?function(t){if(!t._d){var e=F(t._i);t._a=s([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),pe(t)}}(t):a(e)?t._d=new Date(e):n.createFromInputFallback(t)}(t),h(t)||(t._d=null),t))}function De(t,e,n,o,a){var u,s={};return!0!==n&&!1!==n||(o=n,n=void 0),(i(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||r(t)&&0===t.length)&&(t=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=a,s._l=n,s._i=t,s._f=e,s._strict=o,(u=new y(de(Ae(s))))._nextDay&&(u.add(1,"d"),u._nextDay=void 0),u}function Te(t,e,n,r){return De(t,e,n,r,!1)}n.createFromInputFallback=M("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){};var Le=M("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Te.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:p()}),Ee=M("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Te.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:p()});function Oe(t,e){var n,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return Te();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}var Ne=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Fe(t){var e=F(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||e.isoWeek||0,a=e.day||0,u=e.hour||0,s=e.minute||0,l=e.second||0,c=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===Ct.call(Ne,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,r=0;r<Ne.length;++r)if(t[Ne[r]]){if(n)return!1;parseFloat(t[Ne[r]])!==w(t[Ne[r]])&&(n=!0)}return!0}(e),this._milliseconds=+c+1e3*l+6e4*s+1e3*u*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=fe(),this._bubble()}function Pe(t){return t instanceof Fe}function We(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function ze(t,e){B(t,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+z(~~(t/60),2)+e+z(~~t%60,2)})}ze("Z",":"),ze("ZZ",""),st("Z",ot),st("ZZ",ot),dt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ie(ot,t)});var Re=/([\+\-]|\d\d)/gi;function Ie(t,e){var n=(e||"").match(t);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(Re)||["-",0,0],i=60*r[1]+w(r[2]);return 0===i?0:"+"===r[0]?i:-i}function He(t,e){var r,i;return e._isUTC?(r=e.clone(),i=(b(t)||u(t)?t.valueOf():Te(t).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),n.updateOffset(r,!1),r):Te(t).local()}function Ye(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Be(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var je=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ue=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ge(t,e){var n,r,i,o,u,s,c=t,f=null;return Pe(t)?c={ms:t._milliseconds,d:t._days,M:t._months}:a(t)?(c={},e?c[e]=t:c.milliseconds=t):(f=je.exec(t))?(n="-"===f[1]?-1:1,c={y:0,d:w(f[mt])*n,h:w(f[yt])*n,m:w(f[bt])*n,s:w(f[xt])*n,ms:w(We(1e3*f[wt]))*n}):(f=Ue.exec(t))?c={y:Ve(f[2],n="-"===f[1]?-1:1),M:Ve(f[3],n),w:Ve(f[4],n),d:Ve(f[5],n),h:Ve(f[6],n),m:Ve(f[7],n),s:Ve(f[8],n)}:null==c?c={}:"object"==typeof c&&("from"in c||"to"in c)&&(o=Te(c.from),u=Te(c.to),i=o.isValid()&&u.isValid()?(u=He(u,o),o.isBefore(u)?s=qe(o,u):((s=qe(u,o)).milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0},(c={}).ms=i.milliseconds,c.M=i.months),r=new Fe(c),Pe(t)&&l(t,"_locale")&&(r._locale=t._locale),r}function Ve(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function qe(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function $e(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(A(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Xe(this,Ge(n="string"==typeof n?+n:n,r),t),this}}function Xe(t,e,r,i){var o=e._milliseconds,a=We(e._days),u=We(e._months);t.isValid()&&(i=null==i||i,u&&Pt(t,Tt(t,"Month")+u*r),a&&Lt(t,"Date",Tt(t,"Date")+a*r),o&&t._d.setTime(t._d.valueOf()+o*r),i&&n.updateOffset(t,a||u))}Ge.fn=Fe.prototype,Ge.invalid=function(){return Ge(NaN)};var Ze=$e(1,"add"),Ke=$e(-1,"subtract");function Qe(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function Je(t){var e;return void 0===t?this._locale._abbr:(null!=(e=fe(t))&&(this._locale=e),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var tn=M("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function en(){return this._locale}var nn=126227808e5;function rn(t,e){return(t%e+e)%e}function on(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-nn:new Date(t,e,n).valueOf()}function an(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-nn:Date.UTC(t,e,n)}function un(t,e){B(0,[t,t.length],0,e)}function sn(t,e,n,r,i){var o;return null==t?jt(this,r,i).year:(e>(o=Ut(t,r,i))&&(e=o),(function(t,e,n,r,i){var o=Bt(t,e,n,r,i),a=Ht(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}).call(this,t,e,n,r,i))}B(0,["gg",2],0,function(){return this.weekYear()%100}),B(0,["GG",2],0,function(){return this.isoWeekYear()%100}),un("gggg","weekYear"),un("ggggg","weekYear"),un("GGGG","isoWeekYear"),un("GGGGG","isoWeekYear"),O("weekYear","gg"),O("isoWeekYear","GG"),W("weekYear",1),W("isoWeekYear",1),st("G",rt),st("g",rt),st("GG",Z,V),st("gg",Z,V),st("GGGG",tt,$),st("gggg",tt,$),st("GGGGG",et,X),st("ggggg",et,X),ht(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=w(t)}),ht(["gg","GG"],function(t,e,r,i){e[i]=n.parseTwoDigitYear(t)}),B("Q",0,"Qo","quarter"),O("quarter","Q"),W("quarter",7),st("Q",G),dt("Q",function(t,e){e[vt]=3*(w(t)-1)}),B("D",["DD",2],"Do","date"),O("date","D"),W("date",9),st("D",Z),st("DD",Z,V),st("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),dt(["D","DD"],mt),dt("Do",function(t,e){e[mt]=w(t.match(Z)[0])});var ln=Dt("Date",!0);B("DDD",["DDDD",3],"DDDo","dayOfYear"),O("dayOfYear","DDD"),W("dayOfYear",4),st("DDD",J),st("DDDD",q),dt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=w(t)}),B("m",["mm",2],0,"minute"),O("minute","m"),W("minute",14),st("m",Z),st("mm",Z,V),dt(["m","mm"],bt);var cn=Dt("Minutes",!1);B("s",["ss",2],0,"second"),O("second","s"),W("second",15),st("s",Z),st("ss",Z,V),dt(["s","ss"],xt);var fn,dn=Dt("Seconds",!1);for(B("S",0,0,function(){return~~(this.millisecond()/100)}),B(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,function(){return 10*this.millisecond()}),B(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),B(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),B(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),B(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),B(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),O("millisecond","ms"),W("millisecond",16),st("S",J,G),st("SS",J,V),st("SSS",J,q),fn="SSSS";fn.length<=9;fn+="S")st(fn,nt);function hn(t,e){e[wt]=w(1e3*("0."+t))}for(fn="S";fn.length<=9;fn+="S")dt(fn,hn);var pn=Dt("Milliseconds",!1);B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var gn=y.prototype;function vn(t){return t}gn.add=Ze,gn.calendar=function(t,e){var r=t||Te(),i=He(r,this).startOf("day"),o=n.calendarFormat(this,i)||"sameElse",a=e&&(D(e[o])?e[o].call(this,r):e[o]);return this.format(a||this.localeData().calendar(o,this,Te(r)))},gn.clone=function(){return new y(this)},gn.diff=function(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=He(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=N(e)){case"year":o=Qe(this,r)/12;break;case"month":o=Qe(this,r);break;case"quarter":o=Qe(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:x(o)},gn.endOf=function(t){var e;if(void 0===(t=N(t))||"millisecond"===t||!this.isValid())return this;var r=this._isUTC?an:on;switch(t){case"year":e=r(this.year()+1,0,1)-1;break;case"quarter":e=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=r(this.year(),this.month()+1,1)-1;break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-rn(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-rn(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-rn(e,1e3)-1}return this._d.setTime(e),n.updateOffset(this,!0),this},gn.format=function(t){t||(t=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var e=j(this,t);return this.localeData().postformat(e)},gn.from=function(t,e){return this.isValid()&&(b(t)&&t.isValid()||Te(t).isValid())?Ge({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},gn.fromNow=function(t){return this.from(Te(),t)},gn.to=function(t,e){return this.isValid()&&(b(t)&&t.isValid()||Te(t).isValid())?Ge({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},gn.toNow=function(t){return this.to(Te(),t)},gn.get=function(t){return D(this[t=N(t)])?this[t]():this},gn.invalidAt=function(){return d(this).overflow},gn.isAfter=function(t,e){var n=b(t)?t:Te(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=N(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},gn.isBefore=function(t,e){var n=b(t)?t:Te(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=N(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},gn.isBetween=function(t,e,n,r){var i=b(t)?t:Te(t),o=b(e)?e:Te(e);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))},gn.isSame=function(t,e){var n,r=b(t)?t:Te(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=N(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},gn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},gn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},gn.isValid=function(){return h(this)},gn.lang=tn,gn.locale=Je,gn.localeData=en,gn.max=Ee,gn.min=Le,gn.parsingFlags=function(){return c({},d(this))},gn.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e=[];for(var n in t)e.push({unit:n,priority:P[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}(t=F(t)),r=0;r<n.length;r++)this[n[r].unit](t[n[r].unit]);else if(D(this[t=N(t)]))return this[t](e);return this},gn.startOf=function(t){var e;if(void 0===(t=N(t))||"millisecond"===t||!this.isValid())return this;var r=this._isUTC?an:on;switch(t){case"year":e=r(this.year(),0,1);break;case"quarter":e=r(this.year(),this.month()-this.month()%3,1);break;case"month":e=r(this.year(),this.month(),1);break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=r(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=rn(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=rn(e,6e4);break;case"second":e=this._d.valueOf(),e-=rn(e,1e3)}return this._d.setTime(e),n.updateOffset(this,!0),this},gn.subtract=Ke,gn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},gn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},gn.toDate=function(){return new Date(this.valueOf())},gn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?j(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",j(n,"Z")):j(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},gn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+e+'[")]')},gn.toJSON=function(){return this.isValid()?this.toISOString():null},gn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},gn.unix=function(){return Math.floor(this.valueOf()/1e3)},gn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},gn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},gn.year=At,gn.isLeapYear=function(){return St(this.year())},gn.weekYear=function(t){return sn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},gn.isoWeekYear=function(t){return sn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},gn.quarter=gn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},gn.month=Wt,gn.daysInMonth=function(){return Et(this.year(),this.month())},gn.week=gn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},gn.isoWeek=gn.isoWeeks=function(t){var e=jt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},gn.weeksInYear=function(){var t=this.localeData()._week;return Ut(this.year(),t.dow,t.doy)},gn.isoWeeksInYear=function(){return Ut(this.year(),1,4)},gn.date=ln,gn.day=gn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},gn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},gn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},gn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},gn.hour=gn.hours=re,gn.minute=gn.minutes=cn,gn.second=gn.seconds=dn,gn.millisecond=gn.milliseconds=pn,gn.utcOffset=function(t,e,r){var i,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Ie(ot,t)))return this}else Math.abs(t)<16&&!r&&(t*=60);return!this._isUTC&&e&&(i=Ye(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!e||this._changeInProgress?Xe(this,Ge(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Ye(this)},gn.utc=function(t){return this.utcOffset(0,t)},gn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ye(this),"m")),this},gn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ie(it,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},gn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Te(t).utcOffset():0,(this.utcOffset()-t)%60==0)},gn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},gn.isLocal=function(){return!!this.isValid()&&!this._isUTC},gn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},gn.isUtc=Be,gn.isUTC=Be,gn.zoneAbbr=function(){return this._isUTC?"UTC":""},gn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},gn.dates=M("dates accessor is deprecated. Use date instead.",ln),gn.months=M("months accessor is deprecated. Use month instead",Wt),gn.years=M("years accessor is deprecated. Use year instead",At),gn.zone=M("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),gn.isDSTShifted=M("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var t={};if(v(t,this),(t=Ae(t))._a){var e=t._isUTC?f(t._a):Te(t._a);this._isDSTShifted=this.isValid()&&k(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var mn=L.prototype;function yn(t,e,n,r){var i=fe(),o=f().set(r,e);return i[n](o,t)}function bn(t,e,n){if(a(t)&&(e=t,t=void 0),t=t||"",null!=e)return yn(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=yn(t,r,n,"month");return i}function xn(t,e,n,r){"boolean"==typeof t?(a(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,a(e)&&(n=e,e=void 0),e=e||"");var i,o=fe(),u=t?o._week.dow:0;if(null!=n)return yn(e,(n+u)%7,r,"day");var s=[];for(i=0;i<7;i++)s[i]=yn(e,(i+u)%7,r,"day");return s}mn.calendar=function(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return D(r)?r.call(e,n):r},mn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},mn.invalidDate=function(){return this._invalidDate},mn.ordinal=function(t){return this._ordinal.replace("%d",t)},mn.preparse=vn,mn.postformat=vn,mn.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return D(i)?i(t,e,n,r):i.replace(/%d/i,t)},mn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return D(n)?n(e):n.replace(/%s/i,e)},mn.set=function(t){var e,n;for(n in t)D(e=t[n])?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},mn.months=function(t,e){return t?r(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Ot).test(e)?"format":"standalone"][t.month()]:r(this._months)?this._months:this._months.standalone},mn.monthsShort=function(t,e){return t?r(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Ot.test(e)?"format":"standalone"][t.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},mn.monthsParse=function(t,e,n){var r,i,o;if(this._monthsParseExact)return(function(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=f([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=Ct.call(this._shortMonthsParse,a))?i:null:-1!==(i=Ct.call(this._longMonthsParse,a))?i:null:"MMM"===e?-1!==(i=Ct.call(this._shortMonthsParse,a))?i:-1!==(i=Ct.call(this._longMonthsParse,a))?i:null:-1!==(i=Ct.call(this._longMonthsParse,a))?i:-1!==(i=Ct.call(this._shortMonthsParse,a))?i:null}).call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},mn.monthsRegex=function(t){return this._monthsParseExact?(l(this,"_monthsRegex")||It.call(this),t?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Rt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},mn.monthsShortRegex=function(t){return this._monthsParseExact?(l(this,"_monthsRegex")||It.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=zt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},mn.week=function(t){return jt(t,this._week.dow,this._week.doy).week},mn.firstDayOfYear=function(){return this._week.doy},mn.firstDayOfWeek=function(){return this._week.dow},mn.weekdays=function(t,e){var n=r(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Gt(n,this._week.dow):t?n[t.day()]:n},mn.weekdaysMin=function(t){return!0===t?Gt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},mn.weekdaysShort=function(t){return!0===t?Gt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},mn.weekdaysParse=function(t,e,n){var r,i,o;if(this._weekdaysParseExact)return(function(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=f([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=Ct.call(this._weekdaysParse,a))?i:null:"ddd"===e?-1!==(i=Ct.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Ct.call(this._minWeekdaysParse,a))?i:null:"dddd"===e?-1!==(i=Ct.call(this._weekdaysParse,a))?i:-1!==(i=Ct.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ct.call(this._minWeekdaysParse,a))?i:null:"ddd"===e?-1!==(i=Ct.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ct.call(this._weekdaysParse,a))?i:-1!==(i=Ct.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Ct.call(this._minWeekdaysParse,a))?i:-1!==(i=Ct.call(this._weekdaysParse,a))?i:-1!==(i=Ct.call(this._shortWeekdaysParse,a))?i:null}).call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=f([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}},mn.weekdaysRegex=function(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Qt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Xt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},mn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Qt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Zt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},mn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Qt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Kt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},mn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},mn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},le("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===w(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),n.lang=M("moment.lang is deprecated. Use moment.locale instead.",le),n.langData=M("moment.langData is deprecated. Use moment.localeData instead.",fe);var wn=Math.abs;function kn(t,e,n,r){var i=Ge(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function _n(t){return t<0?Math.floor(t):Math.ceil(t)}function Mn(t){return 4800*t/146097}function Sn(t){return 146097*t/4800}function Cn(t){return function(){return this.as(t)}}var An=Cn("ms"),Dn=Cn("s"),Tn=Cn("m"),Ln=Cn("h"),En=Cn("d"),On=Cn("w"),Nn=Cn("M"),Fn=Cn("Q"),Pn=Cn("y");function Wn(t){return function(){return this.isValid()?this._data[t]:NaN}}var zn=Wn("milliseconds"),Rn=Wn("seconds"),In=Wn("minutes"),Hn=Wn("hours"),Yn=Wn("days"),Bn=Wn("months"),jn=Wn("years"),Un=Math.round,Gn={ss:44,s:45,m:45,h:22,d:26,M:11},Vn=Math.abs;function qn(t){return(t>0)-(t<0)||+t}function $n(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n=Vn(this._milliseconds)/1e3,r=Vn(this._days),i=Vn(this._months);t=x(n/60),e=x(t/60),n%=60,t%=60;var o=x(i/12),a=i%=12,u=r,s=e,l=t,c=n?n.toFixed(3).replace(/\.?0+$/,""):"",f=this.asSeconds();if(!f)return"P0D";var d=f<0?"-":"",h=qn(this._months)!==qn(f)?"-":"",p=qn(this._days)!==qn(f)?"-":"",g=qn(this._milliseconds)!==qn(f)?"-":"";return d+"P"+(o?h+o+"Y":"")+(a?h+a+"M":"")+(u?p+u+"D":"")+(s||l||c?"T":"")+(s?g+s+"H":"")+(l?g+l+"M":"")+(c?g+c+"S":"")}var Xn=Fe.prototype;return Xn.isValid=function(){return this._isValid},Xn.abs=function(){var t=this._data;return this._milliseconds=wn(this._milliseconds),this._days=wn(this._days),this._months=wn(this._months),t.milliseconds=wn(t.milliseconds),t.seconds=wn(t.seconds),t.minutes=wn(t.minutes),t.hours=wn(t.hours),t.months=wn(t.months),t.years=wn(t.years),this},Xn.add=function(t,e){return kn(this,t,e,1)},Xn.subtract=function(t,e){return kn(this,t,e,-1)},Xn.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=N(t))||"quarter"===t||"year"===t)switch(n=this._months+Mn(e=this._days+r/864e5),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Sn(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},Xn.asMilliseconds=An,Xn.asSeconds=Dn,Xn.asMinutes=Tn,Xn.asHours=Ln,Xn.asDays=En,Xn.asWeeks=On,Xn.asMonths=Nn,Xn.asQuarters=Fn,Xn.asYears=Pn,Xn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN},Xn._bubble=function(){var t,e,n,r,i,o=this._milliseconds,a=this._days,u=this._months,s=this._data;return o>=0&&a>=0&&u>=0||o<=0&&a<=0&&u<=0||(o+=864e5*_n(Sn(u)+a),a=0,u=0),s.milliseconds=o%1e3,t=x(o/1e3),s.seconds=t%60,e=x(t/60),s.minutes=e%60,n=x(e/60),s.hours=n%24,a+=x(n/24),u+=i=x(Mn(a)),a-=_n(Sn(i)),r=x(u/12),u%=12,s.days=a,s.months=u,s.years=r,this},Xn.clone=function(){return Ge(this)},Xn.get=function(t){return t=N(t),this.isValid()?this[t+"s"]():NaN},Xn.milliseconds=zn,Xn.seconds=Rn,Xn.minutes=In,Xn.hours=Hn,Xn.days=Yn,Xn.weeks=function(){return x(this.days()/7)},Xn.months=Bn,Xn.years=jn,Xn.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),n=function(t,e,n){var r=Ge(t).abs(),i=Un(r.as("s")),o=Un(r.as("m")),a=Un(r.as("h")),u=Un(r.as("d")),s=Un(r.as("M")),l=Un(r.as("y")),c=i<=Gn.ss&&["s",i]||i<Gn.s&&["ss",i]||o<=1&&["m"]||o<Gn.m&&["mm",o]||a<=1&&["h"]||a<Gn.h&&["hh",a]||u<=1&&["d"]||u<Gn.d&&["dd",u]||s<=1&&["M"]||s<Gn.M&&["MM",s]||l<=1&&["y"]||["yy",l];return c[2]=e,c[3]=+t>0,c[4]=n,(function(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}).apply(null,c)}(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)},Xn.toISOString=$n,Xn.toString=$n,Xn.toJSON=$n,Xn.locale=Je,Xn.localeData=en,Xn.toIsoString=M("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$n),Xn.lang=tn,B("X",0,0,"unix"),B("x",0,0,"valueOf"),st("x",rt),st("X",/[+-]?\d+(\.\d{1,3})?/),dt("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),dt("x",function(t,e,n){n._d=new Date(w(t))}),n.version="2.24.0",t=Te,n.fn=gn,n.min=function(){return Oe("isBefore",[].slice.call(arguments,0))},n.max=function(){return Oe("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=f,n.unix=function(t){return Te(1e3*t)},n.months=function(t,e){return bn(t,e,"months")},n.isDate=u,n.locale=le,n.invalid=p,n.duration=Ge,n.isMoment=b,n.weekdays=function(t,e,n){return xn(t,e,n,"weekdays")},n.parseZone=function(){return Te.apply(null,arguments).parseZone()},n.localeData=fe,n.isDuration=Pe,n.monthsShort=function(t,e){return bn(t,e,"monthsShort")},n.weekdaysMin=function(t,e,n){return xn(t,e,n,"weekdaysMin")},n.defineLocale=ce,n.updateLocale=function(t,e){if(null!=e){var n,r,i=ie;null!=(r=se(t))&&(i=r._config),(n=new L(e=T(i,e))).parentLocale=oe[t],oe[t]=n,le(t)}else null!=oe[t]&&(null!=oe[t].parentLocale?oe[t]=oe[t].parentLocale:null!=oe[t]&&delete oe[t]);return oe[t]},n.locales=function(){return S(oe)},n.weekdaysShort=function(t,e,n){return xn(t,e,n,"weekdaysShort")},n.normalizeUnits=N,n.relativeTimeRounding=function(t){return void 0===t?Un:"function"==typeof t&&(Un=t,!0)},n.relativeTimeThreshold=function(t,e){return void 0!==Gn[t]&&(void 0===e?Gn[t]:(Gn[t]=e,"s"===t&&(Gn.ss=e-1),!0))},n.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},n.prototype=gn,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n}),function(){var t={version:"3.5.17"},e=[].slice,n=function(t){return e.call(t)},r=this.document;function i(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(r)try{n(r.documentElement.childNodes)}catch(Bu){n=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),r)try{r.createElement("DIV").style.setProperty("opacity",0,"")}catch(ju){var a=this.Element.prototype,u=a.setAttribute,s=a.setAttributeNS,l=this.CSSStyleDeclaration.prototype,c=l.setProperty;a.setAttribute=function(t,e){u.call(this,t,e+"")},a.setAttributeNS=function(t,e,n){s.call(this,t,e,n+"")},l.setProperty=function(t,e,n){c.call(this,t,e+"",n)}}function f(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function d(t){return null===t?NaN:+t}function h(t){return!isNaN(t)}function p(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}t.ascending=f,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},t.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},t.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},t.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)h(n=+t[o])&&(r+=n);else for(;++o<i;)h(n=+e.call(t,t[o],o))&&(r+=n);return r},t.mean=function(t,e){var n,r=0,i=t.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)h(n=d(t[o]))?r+=n:--a;else for(;++o<i;)h(n=d(e.call(t,t[o],o)))?r+=n:--a;if(a)return r/a},t.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},t.median=function(e,n){var r,i=[],o=e.length,a=-1;if(1===arguments.length)for(;++a<o;)h(r=d(e[a]))&&i.push(r);else for(;++a<o;)h(r=d(n.call(e,e[a],a)))&&i.push(r);if(i.length)return t.quantile(i.sort(f),.5)},t.variance=function(t,e){var n,r,i=t.length,o=0,a=0,u=-1,s=0;if(1===arguments.length)for(;++u<i;)h(n=d(t[u]))&&(a+=(r=n-o)*(n-(o+=r/++s)));else for(;++u<i;)h(n=d(e.call(t,t[u],u)))&&(a+=(r=n-o)*(n-(o+=r/++s)));if(s>1)return a/(s-1)},t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};var g=p(f);function v(t){return t.length}t.bisectLeft=g.left,t.bisect=t.bisectRight=g.right,t.bisector=function(t){return p(1===t.length?function(e,n){return f(t(e),n)}:t)},t.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},t.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},t.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},t.transpose=function(e){if(!(o=e.length))return[];for(var n=-1,r=t.min(e,v),i=new Array(r);++n<r;)for(var o,a=-1,u=i[n]=new Array(o);++a<o;)u[a]=e[a][n];return i},t.zip=function(){return t.transpose(arguments)},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};var m=Math.abs;function y(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function b(){this._=Object.create(null)}t.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],o=function(t){for(var e=1;t*e%1;)e*=10;return e}(m(n)),a=-1;if(t*=o,e*=o,(n*=o)<0)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},t.map=function(t,e){var n=new b;if(t instanceof b)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var x="__proto__",w="\0";function k(t){return(t+="")===x||t[0]===w?w+t:t}function _(t){return(t+="")[0]===w?t.slice(1):t}function M(t){return k(t)in this._}function S(t){return(t=k(t))in this._&&delete this._[t]}function C(){var t=[];for(var e in this._)t.push(_(e));return t}function A(){var t=0;for(var e in this._)++t;return t}function D(){for(var t in this._)return!1;return!0}function T(){this._=Object.create(null)}function L(t){return t}function E(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function O(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=N.length;n<r;++n){var i=N[n]+e;if(i in t)return i}}y(b,{has:M,get:function(t){return this._[k(t)]},set:function(t,e){return this._[k(t)]=e},remove:S,keys:C,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:_(e),value:this._[e]});return t},size:A,empty:D,forEach:function(t){for(var e in this._)t.call(this,_(e),this._[e])}}),t.nest=function(){var e,n,r={},i=[],o=[];function a(t,o,u){if(u>=i.length)return n?n.call(r,o):e?o.sort(e):o;for(var s,l,c,f,d=-1,h=o.length,p=i[u++],g=new b;++d<h;)(f=g.get(s=p(l=o[d])))?f.push(l):g.set(s,[l]);return t?(l=t(),c=function(e,n){l.set(e,a(t,n,u))}):(l={},c=function(e,n){l[e]=a(t,n,u)}),g.forEach(c),l}return r.map=function(t,e){return a(e,t,0)},r.entries=function(e){return function t(e,n){if(n>=i.length)return e;var r=[],a=o[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),a?r.sort(function(t,e){return a(t.key,e.key)}):r}(a(t.map,e,0),0)},r.key=function(t){return i.push(t),r},r.sortKeys=function(t){return o[i.length-1]=t,r},r.sortValues=function(t){return e=t,r},r.rollup=function(t){return n=t,r},r},t.set=function(t){var e=new T;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},y(T,{has:M,add:function(t){return this._[k(t+="")]=!0,t},remove:S,values:C,size:A,empty:D,forEach:function(t){for(var e in this._)t.call(this,_(e))}}),t.behavior={},t.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=E(t,e,e[n]);return t};var N=["webkit","ms","moz","Moz","o","O"];function F(){}function P(){}function W(t){var e=[],n=new b;function r(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}return r.on=function(r,i){var o,a=n.get(r);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),n.remove(r)),i&&e.push(n.set(r,{on:i})),t)},r}function z(){t.event.preventDefault()}function R(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function I(e){for(var n=new P,r=0,i=arguments.length;++r<i;)n[arguments[r]]=W(n);return n.of=function(r,i){return function(o){try{var a=o.sourceEvent=t.event;o.target=e,t.event=o,n[o.type].apply(r,i)}finally{t.event=a}}},n}t.dispatch=function(){for(var t=new P,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=W(t);return t},P.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},t.event=null,t.requote=function(t){return t.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Y={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function B(t){return Y(t,V),t}var j=function(t,e){return e.querySelector(t)},U=function(t,e){return e.querySelectorAll(t)},G=function(t,e){var n=t.matches||t[O(t,"matchesSelector")];return(G=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(j=function(t,e){return Sizzle(t,e)[0]||null},U=Sizzle,G=Sizzle.matchesSelector),t.selection=function(){return t.select(r.documentElement)};var V=t.selection.prototype=[];function q(t){return"function"==typeof t?t:function(){return j(t,this)}}function $(t){return"function"==typeof t?t:function(){return U(t,this)}}V.select=function(t){var e,n,r,i,o=[];t=q(t);for(var a=-1,u=this.length;++a<u;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var s=-1,l=r.length;++s<l;)(i=r[s])?(e.push(n=t.call(i,i.__data__,s,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return B(o)},V.selectAll=function(t){var e,r,i=[];t=$(t);for(var o=-1,a=this.length;++o<a;)for(var u=this[o],s=-1,l=u.length;++s<l;)(r=u[s])&&(i.push(e=n(t.call(r,r.__data__,s,o))),e.parentNode=r);return B(i)};var X="http://www.w3.org/1999/xhtml",Z={svg:"http://www.w3.org/2000/svg",xhtml:X,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function K(e,n){return e=t.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function Q(t){return t.trim().replace(/\s+/g," ")}function J(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function tt(t){return(t+"").trim().split(/^|\s+/)}function et(t,e){var n=(t=tt(t).map(nt)).length;return"function"==typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function nt(t){var e=J(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",Q(i+" "+t))):n.setAttribute("class",Q(i.replace(e," ")))}}function rt(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function it(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function ot(e){return"function"==typeof e?e:(e=t.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===X&&t.documentElement.namespaceURI===X?t.createElement(e):t.createElementNS(n,e)}}function at(){var t=this.parentNode;t&&t.removeChild(this)}function ut(t){return{__data__:t}}function st(t){return function(){return G(this,t)}}function lt(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,o=t[n],a=0,u=o.length;a<u;a++)(i=o[a])&&e(i,a,n);return t}function ct(t){return Y(t,ft),t}t.ns={prefix:Z,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Z.hasOwnProperty(n)?{space:Z[n],local:t}:t}},V.attr=function(e,n){if(arguments.length<2){if("string"==typeof e){var r=this.node();return(e=t.ns.qualify(e)).local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(n in e)this.each(K(n,e[n]));return this}return this.each(K(e,n))},V.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=tt(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!J(t[i]).test(e))return!1;return!0}for(e in t)this.each(et(e,t[e]));return this}return this.each(et(t,e))},V.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.each(rt(n,t[n],e));return this}if(r<2){var i=this.node();return o(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(rt(t,e,n))},V.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(it(e,t[e]));return this}return this.each(it(t,e))},V.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},V.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},V.append=function(t){return t=ot(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},V.insert=function(t,e){return t=ot(t),e=q(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},V.remove=function(){return this.each(at)},V.data=function(t,e){var n,r,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(n=this[0]).length);++i<o;)(r=n[i])&&(t[i]=r.__data__);return t}function a(t,n){var r,i,o,a=t.length,c=n.length,f=Math.min(a,c),d=new Array(c),h=new Array(c),p=new Array(a);if(e){var g,v=new b,m=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(v.has(g=e.call(i,i.__data__,r))?p[r]=i:v.set(g,i),m[r]=g);for(r=-1;++r<c;)(i=v.get(g=e.call(n,o=n[r],r)))?!0!==i&&(d[r]=i,i.__data__=o):h[r]=ut(o),v.set(g,!0);for(r=-1;++r<a;)r in m&&!0!==v.get(m[r])&&(p[r]=t[r])}else{for(r=-1;++r<f;)o=n[r],(i=t[r])?(i.__data__=o,d[r]=i):h[r]=ut(o);for(;r<c;++r)h[r]=ut(n[r]);for(;r<a;++r)p[r]=t[r]}h.update=d,h.parentNode=d.parentNode=p.parentNode=t.parentNode,u.push(h),s.push(d),l.push(p)}var u=ct([]),s=B([]),l=B([]);if("function"==typeof t)for(;++i<o;)a(n=this[i],t.call(n,n.parentNode.__data__,i));else for(;++i<o;)a(n=this[i],t);return s.enter=function(){return u},s.exit=function(){return l},s},V.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},V.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=st(t));for(var o=0,a=this.length;o<a;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var u=0,s=n.length;u<s;u++)(r=n[u])&&t.call(r,r.__data__,u,o)&&e.push(r)}return B(i)},V.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},V.sort=function(t){t=(function(t){return arguments.length||(t=f),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}).apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},V.each=function(t){return lt(this,function(e,n,r){t.call(e,e.__data__,n,r)})},V.call=function(t){var e=n(arguments);return t.apply(e[0]=this,e),this},V.empty=function(){return!this.node()},V.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},V.size=function(){var t=0;return lt(this,function(){++t}),t};var ft=[];function dt(e,r,i){var o="__on"+e,a=e.indexOf("."),u=pt;a>0&&(e=e.slice(0,a));var s=ht.get(e);function l(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}return s&&(e=s,u=gt),a?r?function(){var t=u(r,n(arguments));l.call(this),this.addEventListener(e,this[o]=t,t.$=i),t._=r}:l:r?F:function(){var n,r=new RegExp("^__on([^.]+)"+t.requote(e)+"$");for(var i in this)if(n=i.match(r)){var o=this[i];this.removeEventListener(n[1],o,o.$),delete this[i]}}}t.selection.enter=ct,t.selection.enter.prototype=ft,ft.append=V.append,ft.empty=V.empty,ft.node=V.node,ft.call=V.call,ft.size=V.size,ft.select=function(t){for(var e,n,r,i,o,a=[],u=-1,s=this.length;++u<s;){r=(i=this[u]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(o=i[l])?(e.push(r[l]=n=t.call(i.parentNode,o.__data__,l,u)),n.__data__=o.__data__):e.push(null)}return B(a)},ft.insert=function(t,e){var n,r,i;return arguments.length<2&&(n=this,e=function(t,e,o){var a,u=n[o].update,s=u.length;for(o!=i&&(i=o,r=0),e>=r&&(r=e+1);!(a=u[r])&&++r<s;);return a}),V.insert.call(this,t,e)},t.select=function(t){var e;return"string"==typeof t?(e=[j(t,r)]).parentNode=r.documentElement:(e=[t]).parentNode=i(t),B([e])},t.selectAll=function(t){var e;return"string"==typeof t?(e=n(U(t,r))).parentNode=r.documentElement:(e=n(t)).parentNode=null,B([e])},V.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=!1),t)this.each(dt(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(dt(t,e,n))};var ht=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});function pt(e,n){return function(r){var i=t.event;t.event=r,n[0]=this.__data__;try{e.apply(this,n)}finally{t.event=i}}}function gt(t,e){var n=pt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}r&&ht.forEach(function(t){"on"+t in r&&ht.remove(t)});var vt,mt=0;function yt(e){var n=".dragsuppress-"+ ++mt,r="click"+n,a=t.select(o(e)).on("touchmove"+n,z).on("dragstart"+n,z).on("selectstart"+n,z);if(null==vt&&(vt=!("onselectstart"in e)&&O(e.style,"userSelect")),vt){var u=i(e).style,s=u[vt];u[vt]="none"}return function(t){if(a.on(n,null),vt&&(u[vt]=s),t){var e=function(){a.on(r,null)};a.on(r,function(){z(),e()},!0),setTimeout(e,0)}}}t.mouse=function(t){return xt(t,R())};var bt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function xt(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(bt<0){var a=o(e);if(a.scrollX||a.scrollY){var u=(r=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();bt=!(u.f||u.e),r.remove()}}return bt?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}function wt(){return t.event.changedTouches[0].identifier}t.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=R().changedTouches),e)for(var r,i=0,o=e.length;i<o;++i)if((r=e[i]).identifier===n)return xt(t,r)},t.behavior.drag=function(){var e=I(a,"drag","dragstart","dragend"),n=null,r=u(F,t.mouse,o,"mousemove","mouseup"),i=u(wt,t.touch,L,"touchmove","touchend");function a(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function u(r,i,o,a,u){return function(){var s,l=t.event.target.correspondingElement||t.event.target,c=this.parentNode,f=e.of(this,arguments),d=0,h=r(),p=".drag"+(null==h?"":"-"+h),g=t.select(o(l)).on(a+p,function(){var t,e,n=i(c,h);n&&(d|=(t=n[0]-m[0])|(e=n[1]-m[1]),m=n,f({type:"drag",x:n[0]+s[0],y:n[1]+s[1],dx:t,dy:e}))}).on(u+p,function(){i(c,h)&&(g.on(a+p,null).on(u+p,null),v(d),f({type:"dragend"}))}),v=yt(l),m=i(c,h);s=n?[(s=n.apply(this,arguments)).x-m[0],s.y-m[1]]:[0,0],f({type:"dragstart"})}}return a.origin=function(t){return arguments.length?(n=t,a):n},t.rebind(a,e,"on")},t.touches=function(t,e){return arguments.length<2&&(e=R().touches),e?n(e).map(function(e){var n=xt(t,e);return n.identifier=e.identifier,n}):[]};var kt=1e-6,_t=kt*kt,Mt=Math.PI,St=2*Mt,Ct=St-kt,At=Mt/2,Dt=Mt/180,Tt=180/Mt;function Lt(t){return t>0?1:t<0?-1:0}function Et(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Ot(t){return t>1?0:t<-1?Mt:Math.acos(t)}function Nt(t){return t>1?At:t<-1?-At:Math.asin(t)}function Ft(t){return((t=Math.exp(t))+1/t)/2}function Pt(t){return(t=Math.sin(t/2))*t}var Wt=Math.SQRT2;t.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],u=e[2],s=e[0]-i,l=e[1]-o,c=s*s+l*l;if(c<_t)r=Math.log(u/a)/Wt,n=function(t){return[i+t*s,o+t*l,a*Math.exp(Wt*t*r)]};else{var f=Math.sqrt(c),d=(u*u-a*a+4*c)/(2*a*2*f),h=(u*u-a*a-4*c)/(2*u*2*f),p=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(h*h+1)-h);r=(g-p)/Wt,n=function(t){var e,n=t*r,u=Ft(p),c=a/(2*f)*(u*(e=Wt*n+p,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(p));return[i+c*s,o+c*l,a*u/Ft(Wt*n+p)]}}return n.duration=1e3*r,n},t.behavior.zoom=function(){var e,n,i,a,u,s,l,c,f,d={x:0,y:0,k:1},h=[960,500],p=It,g=250,v=0,m="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",x="touchstart.zoom",w=I(k,"zoomstart","zoom","zoomend");function k(t){t.on(m,E).on(Rt+".zoom",N).on("dblclick.zoom",F).on(x,O)}function _(t){return[(t[0]-d.x)/d.k,(t[1]-d.y)/d.k]}function M(t){d.k=Math.max(p[0],Math.min(p[1],t))}function S(t,e){e=function(t){return[t[0]*d.k+d.x,t[1]*d.k+d.y]}(e),d.x+=t[0]-e[0],d.y+=t[1]-e[1]}function C(e,r,i,o){e.__chart__={x:d.x,y:d.y,k:d.k},M(Math.pow(2,o)),S(n=r,i),e=t.select(e),g>0&&(e=e.transition().duration(g)),e.call(k.event)}function A(){l&&l.domain(s.range().map(function(t){return(t-d.x)/d.k}).map(s.invert)),f&&f.domain(c.range().map(function(t){return(t-d.y)/d.k}).map(c.invert))}function D(t){v++||t({type:"zoomstart"})}function T(t){A(),t({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function L(t){--v||(t({type:"zoomend"}),n=null)}function E(){var e=this,n=w.of(e,arguments),r=0,i=t.select(o(e)).on(y,function(){r=1,S(t.mouse(e),a),T(n)}).on(b,function(){i.on(y,null).on(b,null),u(r),L(n)}),a=_(t.mouse(e)),u=yt(e);fu.call(e),D(n)}function O(){var e,n=this,r=w.of(n,arguments),i={},o=0,a=".zoom-"+t.event.changedTouches[0].identifier,s="touchmove"+a,l="touchend"+a,c=[],f=t.select(n),h=yt(n);function p(){var r=t.touches(n);return e=d.k,r.forEach(function(t){t.identifier in i&&(i[t.identifier]=_(t))}),r}function g(){var e=t.event.target;t.select(e).on(s,v).on(l,y),c.push(e);for(var r=t.event.changedTouches,a=0,f=r.length;a<f;++a)i[r[a].identifier]=null;var h=p(),g=Date.now();if(1===h.length)g-u<500&&(C(n,m=h[0],i[m.identifier],Math.floor(Math.log(d.k)/Math.LN2)+1),z()),u=g;else if(h.length>1){var m,b=h[1],x=(m=h[0])[0]-b[0],w=m[1]-b[1];o=x*x+w*w}}function v(){var a,s,l,c,f=t.touches(n);fu.call(n);for(var d=0,h=f.length;d<h;++d,c=null)if(c=i[(l=f[d]).identifier]){if(s)break;a=l,s=c}if(c){var p=(p=l[0]-a[0])*p+(p=l[1]-a[1])*p,g=o&&Math.sqrt(p/o);a=[(a[0]+l[0])/2,(a[1]+l[1])/2],s=[(s[0]+c[0])/2,(s[1]+c[1])/2],M(g*e)}u=null,S(a,s),T(r)}function y(){if(t.event.touches.length){for(var e=t.event.changedTouches,n=0,o=e.length;n<o;++n)delete i[e[n].identifier];for(var u in i)return void p()}t.selectAll(c).on(a,null),f.on(m,E).on(x,O),h(),L(r)}g(),D(r),f.on(m,null).on(x,g)}function N(){var r=w.of(this,arguments);a?clearTimeout(a):(fu.call(this),e=_(n=i||t.mouse(this)),D(r)),a=setTimeout(function(){a=null,L(r)},50),z(),M(Math.pow(2,.002*zt())*d.k),S(n,e),T(r)}function F(){var e=t.mouse(this),n=Math.log(d.k)/Math.LN2;C(this,e,_(e),t.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return Rt||(Rt="onwheel"in r?(zt=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in r?(zt=function(){return t.event.wheelDelta},"mousewheel"):(zt=function(){return-t.event.detail},"MozMousePixelScroll")),k.event=function(e){e.each(function(){var e=w.of(this,arguments),r=d;pu?t.select(this).transition().each("start.zoom",function(){d=this.__chart__||{x:0,y:0,k:1},D(e)}).tween("zoom:zoom",function(){var i=h[0],o=n?n[0]:i/2,a=n?n[1]:h[1]/2,u=t.interpolateZoom([(o-d.x)/d.k,(a-d.y)/d.k,i/d.k],[(o-r.x)/r.k,(a-r.y)/r.k,i/r.k]);return function(t){var n=u(t),r=i/n[2];this.__chart__=d={x:o-n[0]*r,y:a-n[1]*r,k:r},T(e)}}).each("interrupt.zoom",function(){L(e)}).each("end.zoom",function(){L(e)}):(this.__chart__=d,D(e),T(e),L(e))})},k.translate=function(t){return arguments.length?(d={x:+t[0],y:+t[1],k:d.k},A(),k):[d.x,d.y]},k.scale=function(t){return arguments.length?(d={x:d.x,y:d.y,k:null},M(+t),A(),k):d.k},k.scaleExtent=function(t){return arguments.length?(p=null==t?It:[+t[0],+t[1]],k):p},k.center=function(t){return arguments.length?(i=t&&[+t[0],+t[1]],k):i},k.size=function(t){return arguments.length?(h=t&&[+t[0],+t[1]],k):h},k.duration=function(t){return arguments.length?(g=+t,k):g},k.x=function(t){return arguments.length?(l=t,s=t.copy(),d={x:0,y:0,k:1},k):l},k.y=function(t){return arguments.length?(f=t,c=t.copy(),d={x:0,y:0,k:1},k):f},t.rebind(k,w,"on")};var zt,Rt,It=[0,1/0];function Ht(){}function Yt(t,e,n){return this instanceof Yt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Yt?new Yt(t.h,t.s,t.l):se(""+t,le,Yt):new Yt(t,e,n)}t.color=Ht,Ht.prototype.toString=function(){return this.rgb()+""},t.hsl=Yt;var Bt=Yt.prototype=new Ht;function jt(t,e,n){var r,i;function o(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new re(o(t+120),o(t),o(t-120))}function Ut(e,n,r){return this instanceof Ut?(this.h=+e,this.c=+n,void(this.l=+r)):arguments.length<2?e instanceof Ut?new Ut(e.h,e.c,e.l):function(t,e,n){return t>0?new Ut(Math.atan2(n,e)*Tt,Math.sqrt(e*e+n*n),t):new Ut(NaN,NaN,t)}(e instanceof qt?e.l:(e=ce((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ut(e,n,r)}Bt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Yt(this.h,this.s,this.l/t)},Bt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Yt(this.h,this.s,t*this.l)},Bt.rgb=function(){return jt(this.h,this.s,this.l)},t.hcl=Ut;var Gt=Ut.prototype=new Ht;function Vt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new qt(n,Math.cos(t*=Dt)*e,Math.sin(t)*e)}function qt(t,e,n){return this instanceof qt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof qt?new qt(t.l,t.a,t.b):t instanceof Ut?Vt(t.h,t.c,t.l):ce((t=re(t)).r,t.g,t.b):new qt(t,e,n)}Gt.brighter=function(t){return new Ut(this.h,this.c,Math.min(100,this.l+$t*(arguments.length?t:1)))},Gt.darker=function(t){return new Ut(this.h,this.c,Math.max(0,this.l-$t*(arguments.length?t:1)))},Gt.rgb=function(){return Vt(this.h,this.c,this.l).rgb()},t.lab=qt;var $t=18,Xt=.95047,Zt=1,Kt=1.08883,Qt=qt.prototype=new Ht;function Jt(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return new re(ne(3.2404542*(i=te(i)*Xt)-1.5371385*(r=te(r)*Zt)-.4985314*(o=te(o)*Kt)),ne(-.969266*i+1.8760108*r+.041556*o),ne(.0556434*i-.2040259*r+1.0572252*o))}function te(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ee(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ne(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function re(t,e,n){return this instanceof re?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof re?new re(t.r,t.g,t.b):se(""+t,re,jt):new re(t,e,n)}function ie(t){return new re(t>>16,t>>8&255,255&t)}function oe(t){return ie(t)+""}Qt.brighter=function(t){return new qt(Math.min(100,this.l+$t*(arguments.length?t:1)),this.a,this.b)},Qt.darker=function(t){return new qt(Math.max(0,this.l-$t*(arguments.length?t:1)),this.a,this.b)},Qt.rgb=function(){return Jt(this.l,this.a,this.b)},t.rgb=re;var ae=re.prototype=new Ht;function ue(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function se(t,e,n){var r,i,o,a=0,u=0,s=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(de(i[0]),de(i[1]),de(i[2]))}return(o=he.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,u=240&o,u|=u>>4,s=15&o,s|=s<<4):7===t.length&&(a=(16711680&o)>>16,u=(65280&o)>>8,s=255&o)),e(a,u,s))}function le(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),u=a-o,s=(a+o)/2;return u?(i=s<.5?u/(a+o):u/(2-a-o),r=t==a?(e-n)/u+(e<n?6:0):e==a?(n-t)/u+2:(t-e)/u+4,r*=60):(r=NaN,i=s>0&&s<1?0:r),new Yt(r,i,s)}function ce(t,e,n){var r=ee((.4124564*(t=fe(t))+.3575761*(e=fe(e))+.1804375*(n=fe(n)))/Xt),i=ee((.2126729*t+.7151522*e+.072175*n)/Zt);return qt(116*i-16,500*(r-i),200*(i-ee((.0193339*t+.119192*e+.9503041*n)/Kt)))}function fe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function de(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}ae.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new re(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new re(i,i,i)},ae.darker=function(t){return new re((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},ae.hsl=function(){return le(this.r,this.g,this.b)},ae.toString=function(){return"#"+ue(this.r)+ue(this.g)+ue(this.b)};var he=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function pe(t){return"function"==typeof t?t:function(){return t}}function ge(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),ve(e,n,t,r)}}function ve(e,r,i,o){var a={},u=t.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,c=null;function f(){var t,e=l.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||e>=200&&e<300||304===e){try{t=i.call(a,l)}catch(Bu){return void u.error.call(a,Bu)}u.load.call(a,t)}else u.error.call(a,l)}return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=f:l.onreadystatechange=function(){l.readyState>3&&f()},l.onprogress=function(e){var n=t.event;t.event=e;try{u.progress.call(a,l)}finally{t.event=n}},a.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",a)},a.mimeType=function(t){return arguments.length?(r=null==t?null:t+"",a):r},a.responseType=function(t){return arguments.length?(c=t,a):c},a.response=function(t){return i=t,a},["get","post"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(n(arguments)))}}),a.send=function(t,n,i){if(2===arguments.length&&"function"==typeof n&&(i=n,n=null),l.open(t,e,!0),null==r||"accept"in s||(s.accept=r+",*/*"),l.setRequestHeader)for(var o in s)l.setRequestHeader(o,s[o]);return null!=r&&l.overrideMimeType&&l.overrideMimeType(r),null!=c&&(l.responseType=c),null!=i&&a.on("error",i).on("load",function(t){i(null,t)}),u.beforesend.call(a,l),l.send(null==n?null:n),a},a.abort=function(){return l.abort(),a},t.rebind(a,u,"on"),null==o?a:a.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(o))}he.forEach(function(t,e){he.set(t,ie(e))}),t.functor=pe,t.xhr=ge(L),t.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,n,r){arguments.length<3&&(r=n,n=null);var i=ve(t,e,null==n?o:a(n),r);return i.row=function(t){return arguments.length?i.response(null==(n=t)?o:a(t)):n},i}function o(t){return i.parse(t.responseText)}function a(t){return function(e){return i.parse(e.responseText,t)}}function u(e){return e.map(s).join(t)}function s(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var n;return i.parseRows(t,function(t,r){if(n)return n(t,r-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,n){return e(i(t),n)}:i})},i.parseRows=function(t,e){var n,i,o={},a={},u=[],s=t.length,l=0,c=0;function f(){if(l>=s)return a;if(i)return i=!1,o;var e=l;if(34===t.charCodeAt(e)){for(var n=e;n++<s;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return l=n+2,13===(u=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++l):10===u&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;l<s;){var u,c=1;if(10===(u=t.charCodeAt(l++)))i=!0;else if(13===u)i=!0,10===t.charCodeAt(l)&&(++l,++c);else if(u!==r)continue;return t.slice(e,l-c)}return t.slice(e)}for(;(n=f())!==a;){for(var d=[];n!==o&&n!==a;)d.push(n),n=f();e&&null==(d=e(d,c++))||u.push(d)}return u},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new T,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(s).join(t)].concat(e.map(function(e){return r.map(function(t){return s(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(u).join("\n")},i},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv("\t","text/tab-separated-values");var me,ye,be,xe,we=this[O(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function ke(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i={c:t,t:n+e,n:null};return ye?ye.n=i:me=i,ye=i,be||(xe=clearTimeout(xe),be=1,we(_e)),i}function _e(){var t=Me(),e=Se()-t;e>24?(isFinite(e)&&(clearTimeout(xe),xe=setTimeout(_e,e)),be=0):(be=1,we(_e))}function Me(){for(var t=Date.now(),e=me;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Se(){for(var t,e=me,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:me=e.n;return ye=t,n}function Ce(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}t.timer=function(){ke.apply(this,arguments)},t.timer.flush=function(){Me(),Se()},t.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ae=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*m(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});function De(e){var n=e.decimal,r=e.thousands,i=e.grouping,o=e.currency,a=i&&r?function(t,e){for(var n=t.length,o=[],a=0,u=i[0],s=0;n>0&&u>0&&(s+u+1>e&&(u=Math.max(1,e-s)),o.push(t.substring(n-=u,n+u)),!((s+=u+1)>e));)u=i[a=(a+1)%i.length];return o.reverse().join(r)}:L;return function(e){var r=Te.exec(e),i=r[1]||" ",u=r[2]||">",s=r[3]||"-",l=r[4]||"",c=r[5],f=+r[6],d=r[7],h=r[8],p=r[9],g=1,v="",m="",y=!1,b=!0;switch(h&&(h=+h.substring(1)),(c||"0"===i&&"="===u)&&(c=i="0",u="="),p){case"n":d=!0,p="g";break;case"%":g=100,m="%",p="f";break;case"p":g=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(v="0"+p.toLowerCase());case"c":b=!1;case"d":y=!0,h=0;break;case"s":g=-1,p="r"}"$"===l&&(v=o[0],m=o[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=Le.get(p)||Ee;var x=c&&d;return function(e){var r=m;if(y&&e%1)return"";var o=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===s?"":s;if(g<0){var l=t.formatPrefix(e,h);e=l.scale(e),r=l.symbol+m}else e*=g;var w,k,_=(e=p(e,h)).lastIndexOf(".");if(_<0){var M=b?e.lastIndexOf("e"):-1;M<0?(w=e,k=""):(w=e.substring(0,M),k=e.substring(M))}else w=e.substring(0,_),k=n+e.substring(_+1);!c&&d&&(w=a(w,1/0));var S=v.length+w.length+k.length+(x?0:o.length),C=S<f?new Array(S=f-S+1).join(i):"";return x&&(w=a(C+w,C.length?f-k.length:1/0)),o+=v,e=w+k,("<"===u?o+e+C:">"===u?C+o+e:"^"===u?C.substring(0,S>>=1)+o+e+C.substring(S):o+(x?e:C+e))+r}}}t.formatPrefix=function(e,n){var r=0;return(e=+e)&&(e<0&&(e*=-1),n&&(e=t.round(e,Ce(e,n))),r=1+Math.floor(1e-12+Math.log(e)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r-1)/3)))),Ae[8+r/3]};var Te=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Le=t.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(e,n){return(e=t.round(e,Ce(e,n))).toFixed(Math.max(0,Math.min(20,Ce(e*(1+1e-15),n))))}});function Ee(t){return t+""}var Oe=t.time={},Ne=Date;function Fe(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Fe.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Pe.setUTCDate.apply(this._,arguments)},setDay:function(){Pe.setUTCDay.apply(this._,arguments)},setFullYear:function(){Pe.setUTCFullYear.apply(this._,arguments)},setHours:function(){Pe.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Pe.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Pe.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Pe.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Pe.setUTCSeconds.apply(this._,arguments)},setTime:function(){Pe.setTime.apply(this._,arguments)}};var Pe=Date.prototype;function We(t,e,n){function r(e){var n=t(e),r=o(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new Ne(n-1)),1),n}function o(t,n){return e(t=new Ne(+t),n),t}function a(t,r,o){var a=i(t),u=[];if(o>1)for(;a<r;)n(a)%o||u.push(new Date(+a)),e(a,1);else for(;a<r;)u.push(new Date(+a)),e(a,1);return u}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var u=t.utc=ze(t);return u.floor=u,u.round=ze(r),u.ceil=ze(i),u.offset=ze(o),u.range=function(t,e,n){try{Ne=Fe;var r=new Fe;return r._=t,a(r,e,n)}finally{Ne=Date}},t}function ze(t){return function(e,n){try{Ne=Fe;var r=new Fe;return r._=e,t(r,n)._}finally{Ne=Date}}}function Re(e){var n=e.dateTime,r=e.date,i=e.time,o=e.periods,a=e.days,u=e.shortDays,s=e.months,l=e.shortMonths;function c(t){var e=t.length;function n(n){for(var r,i,o,a=[],u=-1,s=0;++u<e;)37===t.charCodeAt(u)&&(a.push(t.slice(s,u)),null!=(i=Ie[r=t.charAt(++u)])&&(r=t.charAt(++u)),(o=w[r])&&(r=o(n,null==i?"e"===r?" ":"0":i)),a.push(r),s=u+1);return a.push(t.slice(s,u)),a.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Ne!==Fe,i=new(r?Fe:Ne);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return t},n}function f(t,e,n,r){for(var i,o,a,u=0,s=e.length,l=n.length;u<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(u++))){if(a=e.charAt(u++),!(o=k[a in Ie?e.charAt(u++):a])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.utc=function(t){var e=c(t);function n(t){try{var n=new(Ne=Fe);return n._=t,e(n)}finally{Ne=Date}}return n.parse=function(t){try{Ne=Fe;var n=e.parse(t);return n&&n._}finally{Ne=Date}},n.toString=e.toString,n},c.multi=c.utc.multi=un;var d=t.map(),h=je(a),p=Ue(a),g=je(u),v=Ue(u),m=je(s),y=Ue(s),b=je(l),x=Ue(l);o.forEach(function(t,e){d.set(t.toLowerCase(),e)});var w={a:function(t){return u[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:c(n),d:function(t,e){return Be(t.getDate(),e,2)},e:function(t,e){return Be(t.getDate(),e,2)},H:function(t,e){return Be(t.getHours(),e,2)},I:function(t,e){return Be(t.getHours()%12||12,e,2)},j:function(t,e){return Be(1+Oe.dayOfYear(t),e,3)},L:function(t,e){return Be(t.getMilliseconds(),e,3)},m:function(t,e){return Be(t.getMonth()+1,e,2)},M:function(t,e){return Be(t.getMinutes(),e,2)},p:function(t){return o[+(t.getHours()>=12)]},S:function(t,e){return Be(t.getSeconds(),e,2)},U:function(t,e){return Be(Oe.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Be(Oe.mondayOfYear(t),e,2)},x:c(r),X:c(i),y:function(t,e){return Be(t.getFullYear()%100,e,2)},Y:function(t,e){return Be(t.getFullYear()%1e4,e,4)},Z:on,"%":function(){return"%"}},k={a:function(t,e,n){g.lastIndex=0;var r=g.exec(e.slice(n));return r?(t.w=v.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){h.lastIndex=0;var r=h.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){m.lastIndex=0;var r=m.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,n){return f(t,w.c.toString(),e,n)},d:Qe,e:Qe,H:tn,I:tn,j:Je,L:rn,m:Ke,M:en,p:function(t,e,n){var r=d.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:nn,U:Ve,w:Ge,W:qe,x:function(t,e,n){return f(t,w.x.toString(),e,n)},X:function(t,e,n){return f(t,w.X.toString(),e,n)},y:Xe,Y:$e,Z:Ze,"%":an};return c}Oe.year=We(function(t){return(t=Oe.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Oe.years=Oe.year.range,Oe.years.utc=Oe.year.utc.range,Oe.day=We(function(t){var e=new Ne(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Oe.days=Oe.day.range,Oe.days.utc=Oe.day.utc.range,Oe.dayOfYear=function(t){var e=Oe.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Oe[t]=We(function(t){return(t=Oe.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Oe.year(t).getDay();return Math.floor((Oe.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Oe[t+"s"]=n.range,Oe[t+"s"].utc=n.utc.range,Oe[t+"OfYear"]=function(t){var n=Oe.year(t).getDay();return Math.floor((Oe.dayOfYear(t)+(n+e)%7)/7)}}),Oe.week=Oe.sunday,Oe.weeks=Oe.sunday.range,Oe.weeks.utc=Oe.sunday.utc.range,Oe.weekOfYear=Oe.sundayOfYear;var Ie={"-":"",_:" ",0:"0"},He=/^\s*\d+/,Ye=/^%/;function Be(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function je(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function Ue(t){for(var e=new b,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ge(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ve(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function qe(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function $e(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Xe(t,e,n){He.lastIndex=0;var r,i=He.exec(e.slice(n,n+2));return i?(t.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function Ze(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Ke(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Qe(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Je(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function tn(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function en(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function nn(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function rn(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function on(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=m(e)/60|0,i=m(e)%60;return n+Be(r,"0",2)+Be(i,"0",2)}function an(t,e,n){Ye.lastIndex=0;var r=Ye.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function un(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}t.locale=function(t){return{numberFormat:De(t),timeFormat:Re(t)}};var sn=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ln(){}t.format=sn.numberFormat,t.geo={},ln.prototype={s:0,t:0,add:function(t){fn(t,this.t,cn),fn(cn.s,this.s,this),this.s?this.t+=cn.t:this.s=cn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var cn=new ln;function fn(t,e,n){var r=n.s=t+e,i=r-t;n.t=t-(r-i)+(e-i)}function dn(t,e){t&&pn.hasOwnProperty(t.type)&&pn[t.type](t,e)}t.geo.stream=function(t,e){t&&hn.hasOwnProperty(t.type)?hn[t.type](t,e):dn(t,e)};var hn={Feature:function(t,e){dn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)dn(n[r].geometry,e)}},pn={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){gn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)gn(n[r],e,0)},Polygon:function(t,e){vn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)vn(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)dn(n[r],e)}};function gn(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function vn(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)gn(t[n],e,1);e.polygonEnd()}t.geo.area=function(e){return mn=0,t.geo.stream(e,Ln),mn};var mn,yn,bn,xn,wn,kn,_n,Mn,Sn,Cn,An,Dn,Tn=new ln,Ln={sphere:function(){mn+=4*Mt},point:F,lineStart:F,lineEnd:F,polygonStart:function(){Tn.reset(),Ln.lineStart=En},polygonEnd:function(){var t=2*Tn;mn+=t<0?4*Mt+t:t,Ln.lineStart=Ln.lineEnd=Ln.point=F}};function En(){var t,e,n,r,i;function o(t,e){e=e*Dt/2+Mt/4;var o=(t*=Dt)-n,a=o>=0?1:-1,u=a*o,s=Math.cos(e),l=Math.sin(e),c=i*l,f=r*s+c*Math.cos(u),d=c*a*Math.sin(u);Tn.add(Math.atan2(d,f)),n=t,r=s,i=l}Ln.point=function(a,u){Ln.point=o,n=(t=a)*Dt,r=Math.cos(u=(e=u)*Dt/2+Mt/4),i=Math.sin(u)},Ln.lineEnd=function(){o(t,e)}}function On(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function Nn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Fn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Pn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Wn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function zn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Rn(t){return[Math.atan2(t[1],t[0]),Nt(t[2])]}function In(t,e){return m(t[0]-e[0])<kt&&m(t[1]-e[1])<kt}t.geo.bounds=function(){var e,n,r,i,o,a,u,s,l,c,f,d={point:h,lineStart:g,lineEnd:v,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=x,l=0,Ln.polygonStart()},polygonEnd:function(){Ln.polygonEnd(),d.point=h,d.lineStart=g,d.lineEnd=v,Tn<0?(e=-(r=180),n=-(i=90)):l>kt?i=90:l<-kt&&(n=-90),f[0]=e,f[1]=r}};function h(t,o){c.push(f=[e=t,r=t]),o<n&&(n=o),o>i&&(i=o)}function p(t,a){var u=On([t*Dt,a*Dt]);if(s){var l=Fn(s,u),c=Fn([l[1],-l[0],0],l);zn(c),c=Rn(c);var f=t-o,d=f>0?1:-1,p=c[0]*Tt*d,g=m(f)>180;if(g^(d*o<p&&p<d*t))(v=c[1]*Tt)>i&&(i=v);else if(g^(d*o<(p=(p+360)%360-180)&&p<d*t)){var v;(v=-c[1]*Tt)<n&&(n=v)}else a<n&&(n=a),a>i&&(i=a);g?t<o?w(e,t)>w(e,r)&&(r=t):w(t,r)>w(e,r)&&(e=t):r>=e?(t<e&&(e=t),t>r&&(r=t)):t>o?w(e,t)>w(e,r)&&(r=t):w(t,r)>w(e,r)&&(e=t)}else h(t,a);s=u,o=t}function g(){d.point=p}function v(){f[0]=e,f[1]=r,d.point=h,s=null}function y(t,e){if(s){var n=t-o;l+=m(n)>180?n+(n>0?360:-360):n}else a=t,u=e;Ln.point(t,e),p(t,e)}function b(){Ln.lineStart()}function x(){y(a,u),Ln.lineEnd(),m(l)>kt&&(e=-(r=180)),f[0]=e,f[1]=r,s=null}function w(t,e){return(e-=t)<0?e+360:e}function k(t,e){return t[0]-e[0]}function _(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(o){if(i=r=-(e=n=1/0),c=[],t.geo.stream(o,d),l=c.length){c.sort(k);for(var a=1,u=[g=c[0]];a<l;++a)_((h=c[a])[0],g)||_(h[1],g)?(w(g[0],h[1])>w(g[0],g[1])&&(g[1]=h[1]),w(h[0],g[1])>w(g[0],g[1])&&(g[0]=h[0])):u.push(g=h);for(var s,l,h,p=-1/0,g=(a=0,u[l=u.length-1]);a<=l;g=h,++a)(s=w(g[1],(h=u[a])[0]))>p&&(p=s,e=h[0],r=g[1])}return c=f=null,e===1/0||n===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,n],[r,i]]}}(),t.geo.centroid=function(e){yn=bn=xn=wn=kn=_n=Mn=Sn=Cn=An=Dn=0,t.geo.stream(e,Hn);var n=Cn,r=An,i=Dn,o=n*n+r*r+i*i;return o<_t&&(n=_n,r=Mn,i=Sn,bn<kt&&(n=xn,r=wn,i=kn),(o=n*n+r*r+i*i)<_t)?[NaN,NaN]:[Math.atan2(r,n)*Tt,Nt(i/Math.sqrt(o))*Tt]};var Hn={sphere:F,point:Yn,lineStart:jn,lineEnd:Un,polygonStart:function(){Hn.lineStart=Gn},polygonEnd:function(){Hn.lineStart=jn}};function Yn(t,e){t*=Dt;var n=Math.cos(e*=Dt);Bn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Bn(t,e,n){xn+=(t-xn)/++yn,wn+=(e-wn)/yn,kn+=(n-kn)/yn}function jn(){var t,e,n;function r(r,i){r*=Dt;var o=Math.cos(i*=Dt),a=o*Math.cos(r),u=o*Math.sin(r),s=Math.sin(i),l=Math.atan2(Math.sqrt((l=e*s-n*u)*l+(l=n*a-t*s)*l+(l=t*u-e*a)*l),t*a+e*u+n*s);bn+=l,_n+=l*(t+(t=a)),Mn+=l*(e+(e=u)),Sn+=l*(n+(n=s)),Bn(t,e,n)}Hn.point=function(i,o){i*=Dt;var a=Math.cos(o*=Dt);t=a*Math.cos(i),e=a*Math.sin(i),n=Math.sin(o),Hn.point=r,Bn(t,e,n)}}function Un(){Hn.point=Yn}function Gn(){var t,e,n,r,i;function o(t,e){t*=Dt;var o=Math.cos(e*=Dt),a=o*Math.cos(t),u=o*Math.sin(t),s=Math.sin(e),l=r*s-i*u,c=i*a-n*s,f=n*u-r*a,d=Math.sqrt(l*l+c*c+f*f),h=n*a+r*u+i*s,p=d&&-Ot(h)/d,g=Math.atan2(d,h);Cn+=p*l,An+=p*c,Dn+=p*f,bn+=g,_n+=g*(n+(n=a)),Mn+=g*(r+(r=u)),Sn+=g*(i+(i=s)),Bn(n,r,i)}Hn.point=function(a,u){t=a,e=u,Hn.point=o,a*=Dt;var s=Math.cos(u*=Dt);n=s*Math.cos(a),r=s*Math.sin(a),i=Math.sin(u),Bn(n,r,i)},Hn.lineEnd=function(){o(t,e),Hn.lineEnd=Un,Hn.point=Yn}}function Vn(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function qn(){return!0}function $n(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(In(n,r)){i.lineStart();for(var u=0;u<e;++u)i.point((n=t[u])[0],n[1]);i.lineEnd()}else{var s=new Zn(n,t,null,!0),l=new Zn(n,null,s,!1);s.o=l,o.push(s),a.push(l),s=new Zn(r,t,null,!1),l=new Zn(r,null,s,!0),s.o=l,o.push(s),a.push(l)}}}),a.sort(e),Xn(o),Xn(a),o.length){for(var u=0,s=n,l=a.length;u<l;++u)a[u].e=s=!s;for(var c,f,d=o[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(u=0,l=c.length;u<l;++u)i.point((f=c[u])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(u=(c=h.p.z).length-1;u>=0;--u)i.point((f=c[u])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function Xn(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Zn(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Kn(e,n,r,i){return function(o,a){var u,s=n(a),l=o.invert(i[0],i[1]),c={point:f,lineStart:h,lineEnd:p,polygonStart:function(){c.point=x,c.lineStart=w,c.lineEnd=k,u=[],g=[]},polygonEnd:function(){c.point=f,c.lineStart=h,c.lineEnd=p,u=t.merge(u);var e=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Tn.reset();for(var u=0,s=e.length;u<s;++u){var l=e[u],c=l.length;if(c)for(var f=l[0],d=f[0],h=f[1]/2+Mt/4,p=Math.sin(h),g=Math.cos(h),v=1;;){v===c&&(v=0);var m=(t=l[v])[0],y=t[1]/2+Mt/4,b=Math.sin(y),x=Math.cos(y),w=m-d,k=w>=0?1:-1,_=k*w,M=_>Mt,S=p*b;if(Tn.add(Math.atan2(S*k*Math.sin(_),g*x+S*Math.cos(_))),o+=M?w+k*St:w,M^d>=n^m>=n){var C=Fn(On(f),On(t));zn(C);var A=Fn(i,C);zn(A);var D=(M^w>=0?-1:1)*Nt(A[2]);(r>D||r===D&&(C[0]||C[1]))&&(a+=M^w>=0?1:-1)}if(!v++)break;d=m,p=b,g=x,f=t}}return(o<-kt||o<kt&&Tn<-kt)^1&a}(l,g);u.length?(b||(a.polygonStart(),b=!0),$n(u,tr,e,r,a)):e&&(b||(a.polygonStart(),b=!0),a.lineStart(),r(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),u=g=null},sphere:function(){a.polygonStart(),a.lineStart(),r(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function f(t,n){var r=o(t,n);e(t=r[0],n=r[1])&&a.point(t,n)}function d(t,e){var n=o(t,e);s.point(n[0],n[1])}function h(){c.point=d,s.lineStart()}function p(){c.point=f,s.lineEnd()}var g,v,m=Jn(),y=n(m),b=!1;function x(t,e){v.push([t,e]);var n=o(t,e);y.point(n[0],n[1])}function w(){y.lineStart(),v=[]}function k(){x(v[0][0],v[0][1]),y.lineEnd();var t,e=y.clean(),n=m.buffer(),r=n.length;if(v.pop(),g.push(v),v=null,r)if(1&e){var i,o=-1;if((r=(t=n[0]).length-1)>0){for(b||(a.polygonStart(),b=!0),a.lineStart();++o<r;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),u.push(n.filter(Qn))}return c}}function Qn(t){return t.length>1}function Jn(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:F,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function tr(t,e){return((t=t.x)[0]<0?t[1]-At-kt:At-t[1])-((e=e.x)[0]<0?e[1]-At-kt:At-e[1])}var er=Kn(qn,function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var u=o>0?Mt:-Mt,s=m(o-n);m(s-Mt)<kt?(t.point(n,r=(r+a)/2>0?At:-At),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),e=0):i!==u&&s>=Mt&&(m(n-i)<kt&&(n-=i*kt),m(o-u)<kt&&(o-=u*kt),r=function(t,e,n,r){var i,o,a=Math.sin(t-n);return m(a)>kt?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=o,r=a),i=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)r.point(-Mt,i=n*At),r.point(0,i),r.point(Mt,i),r.point(Mt,0),r.point(Mt,-i),r.point(0,-i),r.point(-Mt,-i),r.point(-Mt,0),r.point(-Mt,i);else if(m(t[0]-e[0])>kt){var o=t[0]<e[0]?Mt:-Mt;r.point(-o,i=n*o/2),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Mt,-Mt/2]);function nr(t,e,n,r){return function(i){var o,a=i.a,u=i.b,s=a.x,l=a.y,c=0,f=1,d=u.x-s,h=u.y-l;if(o=t-s,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<f&&(f=o)}else if(d>0){if(o>f)return;o>c&&(c=o)}if(o=n-s,d||!(o<0)){if(o/=d,d<0){if(o>f)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<f&&(f=o)}if(o=e-l,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>c&&(c=o)}if(o=r-l,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<f&&(f=o)}return c>0&&(i.a={x:s+c*d,y:l+c*h}),f<1&&(i.b={x:s+f*d,y:l+f*h}),i}}}}}}var rr=1e9;function ir(e,n,r,i){return function(s){var l,c,f,d,h,p,g,v,m,y,b,x=s,w=Jn(),k=nr(e,n,r,i),_={point:C,lineStart:function(){_.point=A,c&&c.push(f=[]),y=!0,m=!1,g=v=NaN},lineEnd:function(){l&&(A(d,h),p&&m&&w.rejoin(),l.push(w.buffer())),_.point=C,m&&s.lineEnd()},polygonStart:function(){s=w,l=[],c=[],b=!0},polygonEnd:function(){s=x,l=t.merge(l);var n=function(t){for(var e=0,n=c.length,r=t[1],i=0;i<n;++i)for(var o,a=1,u=c[i],s=u.length,l=u[0];a<s;++a)o=u[a],l[1]<=r?o[1]>r&&Et(l,o,t)>0&&++e:o[1]<=r&&Et(l,o,t)<0&&--e,l=o;return 0!==e}([e,i]),r=b&&n,o=l.length;(r||o)&&(s.polygonStart(),r&&(s.lineStart(),M(null,null,1,s),s.lineEnd()),o&&$n(l,a,n,M,s),s.polygonEnd()),l=c=f=null}};function M(t,a,s,l){var c=0,f=0;if(null==t||(c=o(t,s))!==(f=o(a,s))||u(t,a)<0^s>0)do{l.point(0===c||3===c?e:r,c>1?i:n)}while((c=(c+s+4)%4)!==f);else l.point(a[0],a[1])}function S(t,o){return e<=t&&t<=r&&n<=o&&o<=i}function C(t,e){S(t,e)&&s.point(t,e)}function A(t,e){var n=S(t=Math.max(-rr,Math.min(rr,t)),e=Math.max(-rr,Math.min(rr,e)));if(c&&f.push([t,e]),y)d=t,h=e,p=n,y=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&m)s.point(t,e);else{var r={a:{x:g,y:v},b:{x:t,y:e}};k(r)?(m||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),b=!1):n&&(s.lineStart(),s.point(t,e),b=!1)}g=t,v=e,m=n}return _};function o(t,i){return m(t[0]-e)<kt?i>0?0:3:m(t[0]-r)<kt?i>0?2:1:m(t[1]-n)<kt?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function or(t){var e=0,n=Mt/3,r=Tr(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Mt/180,n=t[1]*Mt/180):[e/Mt*180,n/Mt*180]},i}function ar(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),o=Math.sqrt(i)/r;function a(t,e){var n=Math.sqrt(i-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}return a.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,Nt((i-(t*t+n*n)*r*r)/(2*r))]},a}t.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),(i=o(t)).valid=!0,i},extent:function(u){return arguments.length?(o=ir(t=+u[0][0],e=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(t.geo.conicEqualArea=function(){return or(ar)}).raw=ar,t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},t.geo.albersUsa=function(){var e,n,r,i,o=t.geo.albers(),a=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,n){e=[t,n]}};function l(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(r(o,a),e)||i(o,a),e}return l.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:o).invert(t)},l.stream=function(t){var e=o.stream(t),n=a.stream(t),r=u.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},l.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),u.precision(t),l):o.precision()},l.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),u.scale(t),l.translate(o.translate())):o.scale()},l.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),c=+t[0],f=+t[1];return n=o.translate(t).clipExtent([[c-.455*e,f-.238*e],[c+.455*e,f+.238*e]]).stream(s).point,r=a.translate([c-.307*e,f+.201*e]).clipExtent([[c-.425*e+kt,f+.12*e+kt],[c-.214*e-kt,f+.234*e-kt]]).stream(s).point,i=u.translate([c-.205*e,f+.212*e]).clipExtent([[c-.214*e+kt,f+.166*e+kt],[c-.115*e-kt,f+.234*e-kt]]).stream(s).point,l},l.scale(1070)};var ur,sr,lr,cr,fr,dr,hr={point:F,lineStart:F,lineEnd:F,polygonStart:function(){sr=0,hr.lineStart=pr},polygonEnd:function(){hr.lineStart=hr.lineEnd=hr.point=F,ur+=m(sr/2)}};function pr(){var t,e,n,r;function i(t,e){sr+=r*t-n*e,n=t,r=e}hr.point=function(o,a){hr.point=i,t=n=o,e=r=a},hr.lineEnd=function(){i(t,e)}}var gr={point:function(t,e){t<lr&&(lr=t),t>fr&&(fr=t),e<cr&&(cr=e),e>dr&&(dr=e)},lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F};function vr(){var t=mr(4.5),e=[],n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(e){return t=mr(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function r(n,r){e.push("M",n,",",r,t)}function i(t,r){e.push("M",t,",",r),n.point=o}function o(t,n){e.push("L",t,",",n)}function a(){n.point=r}function u(){e.push("Z")}return n}function mr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var yr,br={point:xr,lineStart:wr,lineEnd:kr,polygonStart:function(){br.lineStart=_r},polygonEnd:function(){br.point=xr,br.lineStart=wr,br.lineEnd=kr}};function xr(t,e){xn+=t,wn+=e,++kn}function wr(){var t,e;function n(n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o);_n+=a*(t+n)/2,Mn+=a*(e+r)/2,Sn+=a,xr(t=n,e=r)}br.point=function(r,i){br.point=n,xr(t=r,e=i)}}function kr(){br.point=xr}function _r(){var t,e,n,r;function i(t,e){var i=t-n,o=e-r,a=Math.sqrt(i*i+o*o);_n+=a*(n+t)/2,Mn+=a*(r+e)/2,Sn+=a,Cn+=(a=r*t-n*e)*(n+t),An+=a*(r+e),Dn+=3*a,xr(n=t,r=e)}br.point=function(o,a){br.point=i,xr(t=n=o,e=r=a)},br.lineEnd=function(){i(t,e)}}function Mr(t){var e=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(t){return e=t,n},result:F};function r(n,r){t.moveTo(n+e,r),t.arc(n,r,e,0,St)}function i(e,r){t.moveTo(e,r),n.point=o}function o(e,n){t.lineTo(e,n)}function a(){n.point=r}function u(){t.closePath()}return n}function Sr(t){var e=.5,n=Math.cos(30*Dt),r=16;function i(e){return(r?function(e){var n,i,a,u,s,l,c,f,d,h,p,g,v={point:m,lineStart:y,lineEnd:x,polygonStart:function(){e.polygonStart(),v.lineStart=w},polygonEnd:function(){e.polygonEnd(),v.lineStart=y}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){f=NaN,v.point=b,e.lineStart()}function b(n,i){var a=On([n,i]),u=t(n,i);o(f,d,c,h,p,g,f=u[0],d=u[1],c=n,h=a[0],p=a[1],g=a[2],r,e),e.point(f,d)}function x(){v.point=m,e.lineEnd()}function w(){y(),v.point=k,v.lineEnd=_}function k(t,e){b(n=t,e),i=f,a=d,u=h,s=p,l=g,v.point=b}function _(){o(f,d,c,h,p,g,i,a,n,u,s,l,r,e),v.lineEnd=x,x()}return v}:function(e){return Ar(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})})(e)}function o(r,i,a,u,s,l,c,f,d,h,p,g,v,y){var b=c-r,x=f-i,w=b*b+x*x;if(w>4*e&&v--){var k=u+h,_=s+p,M=l+g,S=Math.sqrt(k*k+_*_+M*M),C=Math.asin(M/=S),A=m(m(M)-1)<kt||m(a-d)<kt?(a+d)/2:Math.atan2(_,k),D=t(A,C),T=D[0],L=D[1],E=T-r,O=L-i,N=x*E-b*O;(N*N/w>e||m((b*E+x*O)/w-.5)>.3||u*h+s*p+l*g<n)&&(o(r,i,a,u,s,l,T,L,A,k/=S,_/=S,M,v,y),y.point(T,L),o(T,L,A,k,_,M,c,f,d,h,p,g,v,y))}}return i.precision=function(t){return arguments.length?(r=(e=t*t)>0&&16,i):Math.sqrt(e)},i}function Cr(t){this.stream=t}function Ar(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Dr(t){return Tr(function(){return t})()}function Tr(e){var n,r,i,o,a,u,s=Sr(function(t,e){return[(t=n(t,e))[0]*l+o,a-t[1]*l]}),l=150,c=480,f=250,d=0,h=0,p=0,g=0,v=0,y=er,b=L,x=null,w=null;function k(t){return[(t=i(t[0]*Dt,t[1]*Dt))[0]*l+o,a-t[1]*l]}function _(t){return(t=i.invert((t[0]-o)/l,(a-t[1])/l))&&[t[0]*Tt,t[1]*Tt]}function M(){i=Vn(r=Nr(p,g,v),n);var t=n(d,h);return o=c-t[0]*l,a=f+t[1]*l,S()}function S(){return u&&(u.valid=!1,u=null),k}return k.stream=function(t){return u&&(u.valid=!1),(u=Lr(y(r,s(b(t))))).valid=!0,u},k.clipAngle=function(t){return arguments.length?(y=null==t?(x=t,er):function(t){var e=Math.cos(t),n=e>0,r=m(e)>kt;return Kn(i,function(t){var e,u,s,l,c;return{lineStart:function(){l=s=!1,c=1},point:function(f,d){var h,p=[f,d],g=i(f,d),v=n?g?0:a(f,d):g?a(f+(f<0?Mt:-Mt),d):0;if(!e&&(l=s=g)&&t.lineStart(),g!==s&&(h=o(e,p),(In(e,h)||In(p,h))&&(p[0]+=kt,p[1]+=kt,g=i(p[0],p[1]))),g!==s)c=0,g?(t.lineStart(),h=o(p,e),t.point(h[0],h[1])):(h=o(e,p),t.point(h[0],h[1]),t.lineEnd()),e=h;else if(r&&e&&n^g){var m;v&u||!(m=o(p,e,!0))||(c=0,n?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&In(e,p)||t.point(p[0],p[1]),e=p,s=g,u=v},lineEnd:function(){s&&t.lineEnd(),e=null},clean:function(){return c|(l&&s)<<1}}},zr(t,6*Dt),n?[0,-t]:[-Mt,t-Mt]);function i(t,n){return Math.cos(t)*Math.cos(n)>e}function o(t,n,r){var i=[1,0,0],o=Fn(On(t),On(n)),a=Nn(o,o),u=o[0],s=a-u*u;if(!s)return!r&&t;var l=e*a/s,c=-e*u/s,f=Fn(i,o),d=Wn(i,l);Pn(d,Wn(o,c));var h=f,p=Nn(d,h),g=Nn(h,h),v=p*p-g*(Nn(d,d)-1);if(!(v<0)){var y=Math.sqrt(v),b=Wn(h,(-p-y)/g);if(Pn(b,d),b=Rn(b),!r)return b;var x,w=t[0],k=n[0],_=t[1],M=n[1];k<w&&(x=w,w=k,k=x);var S=k-w,C=m(S-Mt)<kt;if(!C&&M<_&&(x=_,_=M,M=x),C||S<kt?C?_+M>0^b[1]<(m(b[0]-w)<kt?_:M):_<=b[1]&&b[1]<=M:S>Mt^(w<=b[0]&&b[0]<=k)){var A=Wn(h,(-p+y)/g);return Pn(A,d),[b,Rn(A)]}}}function a(e,r){var i=n?t:Mt-t,o=0;return e<-i?o|=1:e>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}}((x=+t)*Dt),S()):x},k.clipExtent=function(t){return arguments.length?(w=t,b=t?ir(t[0][0],t[0][1],t[1][0],t[1][1]):L,S()):w},k.scale=function(t){return arguments.length?(l=+t,M()):l},k.translate=function(t){return arguments.length?(c=+t[0],f=+t[1],M()):[c,f]},k.center=function(t){return arguments.length?(d=t[0]%360*Dt,h=t[1]%360*Dt,M()):[d*Tt,h*Tt]},k.rotate=function(t){return arguments.length?(p=t[0]%360*Dt,g=t[1]%360*Dt,v=t.length>2?t[2]%360*Dt:0,M()):[p*Tt,g*Tt,v*Tt]},t.rebind(k,s,"precision"),function(){return n=e.apply(this,arguments),k.invert=n.invert&&_,M()}}function Lr(t){return Ar(t,function(e,n){t.point(e*Dt,n*Dt)})}function Er(t,e){return[t,e]}function Or(t,e){return[t>Mt?t-St:t<-Mt?t+St:t,e]}function Nr(t,e,n){return t?e||n?Vn(Pr(t),Wr(e,n)):Pr(t):e||n?Wr(e,n):Or}function Fr(t){return function(e,n){return[(e+=t)>Mt?e-St:e<-Mt?e+St:e,n]}}function Pr(t){var e=Fr(t);return e.invert=Fr(-t),e}function Wr(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),o=Math.sin(e);function a(t,e){var a=Math.cos(e),u=Math.cos(t)*a,s=Math.sin(t)*a,l=Math.sin(e),c=l*n+u*r;return[Math.atan2(s*i-c*o,u*n-l*r),Nt(c*i+s*o)]}return a.invert=function(t,e){var a=Math.cos(e),u=Math.cos(t)*a,s=Math.sin(t)*a,l=Math.sin(e),c=l*i-s*o;return[Math.atan2(s*i+l*o,u*n+c*r),Nt(c*n-u*r)]},a}function zr(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,u){var s=a*e;null!=i?(i=Rr(n,i),o=Rr(n,o),(a>0?i<o:i>o)&&(i+=a*St)):(i=t+a*St,o=t-.5*s);for(var l,c=i;a>0?c>o:c<o;c-=s)u.point((l=Rn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function Rr(t,e){var n=On(e);n[0]-=t,zn(n);var r=Ot(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-kt)%(2*Math.PI)}function Ir(e,n,r){var i=t.range(e,n-kt,r).concat(n);return function(t){return i.map(function(e){return[t,e]})}}function Hr(e,n,r){var i=t.range(e,n-kt,r).concat(n);return function(t){return i.map(function(e){return[e,t]})}}function Yr(t){return t.source}function Br(t){return t.target}t.geo.path=function(){var e,n,r,i,o,a=4.5;function u(e){return e&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=r(i)),t.geo.stream(e,o)),i.result()}function s(){return o=null,u}return u.area=function(e){return ur=0,t.geo.stream(e,r(hr)),ur},u.centroid=function(e){return xn=wn=kn=_n=Mn=Sn=Cn=An=Dn=0,t.geo.stream(e,r(br)),Dn?[Cn/Dn,An/Dn]:Sn?[_n/Sn,Mn/Sn]:kn?[xn/kn,wn/kn]:[NaN,NaN]},u.bounds=function(e){return fr=dr=-(lr=cr=1/0),t.geo.stream(e,r(gr)),[[lr,cr],[fr,dr]]},u.projection=function(t){return arguments.length?(r=(e=t)?t.stream||(n=t,i=Sr(function(t,e){return n([t*Tt,e*Tt])}),function(t){return Lr(i(t))}):L,s()):e;var n,i},u.context=function(t){return arguments.length?(i=null==(n=t)?new vr:new Mr(t),"function"!=typeof a&&i.pointRadius(a),s()):n},u.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),u):a},u.projection(t.geo.albersUsa()).context(null)},t.geo.transform=function(t){return{stream:function(e){var n=new Cr(e);for(var r in t)n[r]=t[r];return n}}},Cr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},t.geo.projection=Dr,t.geo.projectionMutator=Tr,(t.geo.equirectangular=function(){return Dr(Er)}).raw=Er.invert=Er,t.geo.rotation=function(t){function e(e){return(e=t(e[0]*Dt,e[1]*Dt))[0]*=Tt,e[1]*=Tt,e}return t=Nr(t[0]%360*Dt,t[1]*Dt,t.length>2?t[2]*Dt:0),e.invert=function(e){return(e=t.invert(e[0]*Dt,e[1]*Dt))[0]*=Tt,e[1]*=Tt,e},e},Or.invert=Er,t.geo.circle=function(){var t,e,n=[0,0],r=6;function i(){var t="function"==typeof n?n.apply(this,arguments):n,r=Nr(-t[0]*Dt,-t[1]*Dt,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=r(t,e)),t[0]*=Tt,t[1]*=Tt}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(n=t,i):n},i.angle=function(n){return arguments.length?(e=zr((t=+n)*Dt,r*Dt),i):t},i.precision=function(n){return arguments.length?(e=zr(t*Dt,(r=+n)*Dt),i):r},i.angle(90)},t.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Dt,i=t[1]*Dt,o=e[1]*Dt,a=Math.sin(r),u=Math.cos(r),s=Math.sin(i),l=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=l*c-s*f*u)*n),s*c+l*f*u)},t.geo.graticule=function(){var e,n,r,i,o,a,u,s,l,c,f,d,h=10,p=h,g=90,v=360,y=2.5;function b(){return{type:"MultiLineString",coordinates:x()}}function x(){return t.range(Math.ceil(i/g)*g,r,g).map(f).concat(t.range(Math.ceil(s/v)*v,u,v).map(d)).concat(t.range(Math.ceil(n/h)*h,e,h).filter(function(t){return m(t%g)>kt}).map(l)).concat(t.range(Math.ceil(a/p)*p,o,p).filter(function(t){return m(t%v)>kt}).map(c))}return b.lines=function(){return x().map(function(t){return{type:"LineString",coordinates:t}})},b.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(d(u).slice(1),f(r).reverse().slice(1),d(s).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.majorExtent(t).minorExtent(t):b.minorExtent()},b.majorExtent=function(t){return arguments.length?(s=+t[0][1],u=+t[1][1],(i=+t[0][0])>(r=+t[1][0])&&(t=i,i=r,r=t),s>u&&(t=s,s=u,u=t),b.precision(y)):[[i,s],[r,u]]},b.minorExtent=function(t){return arguments.length?(a=+t[0][1],o=+t[1][1],(n=+t[0][0])>(e=+t[1][0])&&(t=n,n=e,e=t),a>o&&(t=a,a=o,o=t),b.precision(y)):[[n,a],[e,o]]},b.step=function(t){return arguments.length?b.majorStep(t).minorStep(t):b.minorStep()},b.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],b):[g,v]},b.minorStep=function(t){return arguments.length?(h=+t[0],p=+t[1],b):[h,p]},b.precision=function(t){return arguments.length?(y=+t,l=Ir(a,o,90),c=Hr(n,e,y),f=Ir(s,u,90),d=Hr(i,r,y),b):y},b.majorExtent([[-180,-90+kt],[180,90-kt]]).minorExtent([[-180,-80-kt],[180,80+kt]])},t.geo.greatArc=function(){var e,n,r=Yr,i=Br;function o(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}return o.distance=function(){return t.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},o.source=function(t){return arguments.length?(r=t,e="function"==typeof t?null:t,o):r},o.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,o):i},o.precision=function(){return arguments.length?o:0},o},t.geo.interpolate=function(t,e){return n=t[0]*Dt,r=t[1]*Dt,i=e[0]*Dt,o=e[1]*Dt,a=Math.cos(r),u=Math.sin(r),s=Math.cos(o),l=Math.sin(o),c=a*Math.cos(n),f=a*Math.sin(n),d=s*Math.cos(i),h=s*Math.sin(i),p=2*Math.asin(Math.sqrt(Pt(o-r)+a*s*Pt(i-n))),g=1/Math.sin(p),(v=p?function(t){var e=Math.sin(t*=p)*g,n=Math.sin(p-t)*g,r=n*c+e*d,i=n*f+e*h,o=n*u+e*l;return[Math.atan2(i,r)*Tt,Math.atan2(o,Math.sqrt(r*r+i*i))*Tt]}:function(){return[n*Tt,r*Tt]}).distance=p,v;var n,r,i,o,a,u,s,l,c,f,d,h,p,g,v},t.geo.length=function(e){return yr=0,t.geo.stream(e,jr),yr};var jr={sphere:F,point:F,lineStart:function(){var t,e,n;function r(r,i){var o=Math.sin(i*=Dt),a=Math.cos(i),u=m((r*=Dt)-t),s=Math.cos(u);yr+=Math.atan2(Math.sqrt((u=a*Math.sin(u))*u+(u=n*o-e*a*s)*u),e*o+n*a*s),t=r,e=o,n=a}jr.point=function(i,o){t=i*Dt,e=Math.sin(o*=Dt),n=Math.cos(o),jr.point=r},jr.lineEnd=function(){jr.point=jr.lineEnd=F}},lineEnd:F,polygonStart:F,polygonEnd:F};function Ur(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}var Gr=Ur(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(t.geo.azimuthalEqualArea=function(){return Dr(Gr)}).raw=Gr;var Vr=Ur(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},L);function qr(t,e){var n=Math.cos(t),r=function(t){return Math.tan(Mt/4+t/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),o=n*Math.pow(r(t),i)/i;if(!i)return Zr;function a(t,e){o>0?e<-At+kt&&(e=-At+kt):e>At-kt&&(e=At-kt);var n=o/Math.pow(r(e),i);return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}return a.invert=function(t,e){var n=o-e,r=Lt(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(o/r,1/i))-At]},a}function $r(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(m(r)<kt)return Er;function o(t,e){var n=i-e;return[n*Math.sin(r*t),i-n*Math.cos(r*t)]}return o.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,i-Lt(r)*Math.sqrt(t*t+n*n)]},o}(t.geo.azimuthalEquidistant=function(){return Dr(Vr)}).raw=Vr,(t.geo.conicConformal=function(){return or(qr)}).raw=qr,(t.geo.conicEquidistant=function(){return or($r)}).raw=$r;var Xr=Ur(function(t){return 1/t},Math.atan);function Zr(t,e){return[t,Math.log(Math.tan(Mt/4+e/2))]}function Kr(t){var e,n=Dr(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var u=Mt*r(),s=i();o([[s[0]-u,s[1]-u],[s[0]+u,s[1]+u]])}}else e&&(a=null);return a},n.clipExtent(null)}(t.geo.gnomonic=function(){return Dr(Xr)}).raw=Xr,Zr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-At]},(t.geo.mercator=function(){return Kr(Zr)}).raw=Zr;var Qr=Ur(function(){return 1},Math.asin);(t.geo.orthographic=function(){return Dr(Qr)}).raw=Qr;var Jr=Ur(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function ti(t,e){return[Math.log(Math.tan(Mt/4+e/2)),-t]}function ei(t){return t[0]}function ni(t){return t[1]}function ri(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&Et(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function ii(t,e){return t[0]-e[0]||t[1]-e[1]}(t.geo.stereographic=function(){return Dr(Jr)}).raw=Jr,ti.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-At]},(t.geo.transverseMercator=function(){var t=Kr(ti),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=ti,t.geom={},t.geom.hull=function(t){var e=ei,n=ni;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,i=pe(e),o=pe(n),a=t.length,u=[],s=[];for(r=0;r<a;r++)u.push([+i.call(this,t[r],r),+o.call(this,t[r],r),r]);for(u.sort(ii),r=0;r<a;r++)s.push([u[r][0],-u[r][1]]);var l=ri(u),c=ri(s),f=c[0]===l[0],d=c[c.length-1]===l[l.length-1],h=[];for(r=l.length-1;r>=0;--r)h.push(t[u[l[r]][2]]);for(r=+f;r<c.length-d;++r)h.push(t[u[c[r]][2]]);return h}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},t.geom.polygon=function(t){return Y(t,oi),t};var oi=t.geom.polygon.prototype=[];function ai(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function ui(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,u=r[0]-o,s=t[1],l=n[1],c=e[1]-s,f=r[1]-l,d=(u*(s-l)-f*(i-o))/(f*a-u*c);return[i+d*a,s+d*c]}function si(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}oi.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)i+=(t=r)[1]*(r=this[e])[0]-t[0]*r[1];return.5*i},oi.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,u=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)o+=((e=u)[0]+(u=this[r])[0])*(n=e[0]*u[1]-u[0]*e[1]),a+=(e[1]+u[1])*n;return[o*t,a*t]},oi.clip=function(t){for(var e,n,r,i,o,a,u=si(t),s=-1,l=this.length-si(this),c=this[l-1];++s<l;){for(e=t.slice(),t.length=0,i=this[s],o=e[(r=e.length-u)-1],n=-1;++n<r;)ai(a=e[n],c,i)?(ai(o,c,i)||t.push(ui(o,a,c,i)),t.push(a)):ai(o,c,i)&&t.push(ui(o,a,c,i)),o=a;u&&t.push(t[0]),c=i}return t};var li,ci,fi,di,hi,pi=[],gi=[];function vi(){Fi(this),this.edge=this.site=this.circle=null}function mi(t){var e=pi.pop()||new vi;return e.site=t,e}function yi(t){Ai(t),fi.remove(t),pi.push(t),Fi(t)}function bi(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,u=[t];yi(t);for(var s=o;s.circle&&m(n-s.circle.x)<kt&&m(r-s.circle.cy)<kt;)o=s.P,u.unshift(s),yi(s),s=o;u.unshift(s),Ai(s);for(var l=a;l.circle&&m(n-l.circle.x)<kt&&m(r-l.circle.cy)<kt;)a=l.N,u.push(l),yi(l),l=a;u.push(l),Ai(l);var c,f=u.length;for(c=1;c<f;++c)Ei((l=u[c]).edge,(s=u[c-1]).site,l.site,i);(l=u[f-1]).edge=Li((s=u[0]).site,l.site,null,i),Ci(s),Ci(l)}function xi(t){for(var e,n,r,i,o=t.x,a=t.y,u=fi._;u;)if((r=wi(u,a)-o)>kt)u=u.L;else{if(!((i=o-ki(u,a))>kt)){r>-kt?(e=u.P,n=u):i>-kt?(e=u,n=u.N):e=n=u;break}if(!u.R){e=u;break}u=u.R}var s=mi(t);if(fi.insert(e,s),e||n){if(e===n)return Ai(e),n=mi(e.site),fi.insert(s,n),s.edge=n.edge=Li(e.site,s.site),Ci(e),void Ci(n);if(n){Ai(e),Ai(n);var l=e.site,c=l.x,f=l.y,d=t.x-c,h=t.y-f,p=n.site,g=p.x-c,v=p.y-f,m=2*(d*v-h*g),y=d*d+h*h,b=g*g+v*v,x={x:(v*y-h*b)/m+c,y:(d*b-g*y)/m+f};Ei(n.edge,l,p,x),s.edge=Li(l,t,null,x),n.edge=Li(t,p,null,x),Ci(e),Ci(n)}else s.edge=Li(e.site,s.site)}}function wi(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var u=(n=a.site).x,s=n.y,l=s-e;if(!l)return u;var c=u-r,f=1/o-1/l,d=c/l;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*l)-s+l/2+i-o/2)))/f+r:(r+u)/2}function ki(t,e){var n=t.N;if(n)return wi(n,e);var r=t.site;return r.y===e?r.x:1/0}function _i(t){this.site=t,this.edges=[]}function Mi(t,e){return e.angle-t.angle}function Si(){Fi(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ci(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,u=i.y,s=r.x-a,l=r.y-u,c=o.x-a,f=2*(s*(v=o.y-u)-l*c);if(!(f>=-_t)){var d=s*s+l*l,h=c*c+v*v,p=(v*d-l*h)/f,g=(s*h-c*d)/f,v=g+u,m=gi.pop()||new Si;m.arc=t,m.site=i,m.x=p+a,m.y=v+Math.sqrt(p*p+g*g),m.cy=v,t.circle=m;for(var y=null,b=hi._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}hi.insert(y,m),y||(di=m)}}}}function Ai(t){var e=t.circle;e&&(e.P||(di=e.N),hi.remove(e),gi.push(e),Fi(e),t.circle=null)}function Di(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],u=e[1][0],s=e[0][1],l=e[1][1],c=t.l,f=t.r,d=c.x,h=c.y,p=f.x,g=f.y,v=(d+p)/2;if(g===h){if(v<a||v>=u)return;if(d>p){if(o){if(o.y>=l)return}else o={x:v,y:s};n={x:v,y:l}}else{if(o){if(o.y<s)return}else o={x:v,y:l};n={x:v,y:s}}}else if(i=(h+g)/2-(r=(d-p)/(g-h))*v,r<-1||r>1)if(d>p){if(o){if(o.y>=l)return}else o={x:(s-i)/r,y:s};n={x:(l-i)/r,y:l}}else{if(o){if(o.y<s)return}else o={x:(l-i)/r,y:l};n={x:(s-i)/r,y:s}}else if(h<g){if(o){if(o.x>=u)return}else o={x:a,y:r*a+i};n={x:u,y:r*u+i}}else{if(o){if(o.x<a)return}else o={x:u,y:r*u+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function Ti(t,e){this.l=t,this.r=e,this.a=this.b=null}function Li(t,e,n,r){var i=new Ti(t,e);return li.push(i),n&&Ei(i,t,e,n),r&&Ei(i,e,t,r),ci[t.i].edges.push(new Oi(i,t,e)),ci[e.i].edges.push(new Oi(i,e,t)),i}function Ei(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Oi(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Ni(){this._=null}function Fi(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Pi(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Wi(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function zi(t){for(;t.L;)t=t.L;return t}function Ri(t,e){var n,r,i,o=t.sort(Ii).pop();for(li=[],ci=new Array(t.length),fi=new Ni,hi=new Ni;;)if(i=di,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(ci[o.i]=new _i(o),xi(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;bi(i.arc)}e&&(function(t){for(var e,n=li,r=nr(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!Di(e=n[i],t)||!r(e)||m(e.a.x-e.b.x)<kt&&m(e.a.y-e.b.y)<kt)&&(e.a=e.b=null,n.splice(i,1))}(e),function(t){for(var n,r,i,o,a,u,s,l,c,f,d=e[0][0],h=e[1][0],p=e[0][1],g=e[1][1],v=ci,y=v.length;y--;)if((a=v[y])&&a.prepare())for(l=(s=a.edges).length,u=0;u<l;)i=(f=s[u].end()).x,o=f.y,r=(c=s[++u%l].start()).y,(m(i-(n=c.x))>kt||m(o-r)>kt)&&(s.splice(u,0,new Oi((b=a.site,x=f,w=m(i-d)<kt&&g-o>kt?{x:d,y:m(n-d)<kt?r:g}:m(o-g)<kt&&h-i>kt?{x:m(r-g)<kt?n:h,y:g}:m(i-h)<kt&&o-p>kt?{x:h,y:m(n-h)<kt?r:p}:m(o-p)<kt&&i-d>kt?{x:m(r-p)<kt?n:d,y:p}:null,k=void 0,(k=new Ti(b,null)).a=x,k.b=w,li.push(k),k),a.site,null)),++l);var b,x,w,k}());var a={cells:ci,edges:li};return fi=hi=li=ci=null,a}function Ii(t,e){return e.y-t.y||e.x-t.x}_i.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Mi),e.length},Oi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ni.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=zi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Pi(this,n),n=(t=n).U),n.C=!1,r.C=!0,Wi(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Wi(this,n),n=(t=n).U),n.C=!1,r.C=!0,Pi(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?zi(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,i.L=t=n.R,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Pi(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Wi(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Pi(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Wi(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Pi(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Wi(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},t.geom.voronoi=function(t){var e=ei,n=ni,r=e,i=n,o=Hi;if(t)return a(t);function a(t){var e=new Array(t.length),n=o[0][0],r=o[0][1],i=o[1][0],a=o[1][1];return Ri(u(t),o).cells.forEach(function(o,u){var s=o.edges,l=o.site;(e[u]=s.length?s.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=n&&l.x<=i&&l.y>=r&&l.y<=a?[[n,a],[i,a],[i,r],[n,r]]:[]).point=t[u]}),e}function u(t){return t.map(function(t,e){return{x:Math.round(r(t,e)/kt)*kt,y:Math.round(i(t,e)/kt)*kt,i:e}})}return a.links=function(t){return Ri(u(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},a.triangles=function(t){var e=[];return Ri(u(t)).cells.forEach(function(n,r){for(var i,o,a,u,s=n.site,l=n.edges.sort(Mi),c=-1,f=l.length,d=l[f-1].edge,h=d.l===s?d.r:d.l;++c<f;)i=h,h=(d=l[c].edge).l===s?d.r:d.l,r<i.i&&r<h.i&&((o=s).x-(u=h).x)*((a=i).y-o.y)-(o.x-a.x)*(u.y-o.y)<0&&e.push([t[r],t[i.i],t[h.i]])}),e},a.x=function(t){return arguments.length?(r=pe(e=t),a):e},a.y=function(t){return arguments.length?(i=pe(n=t),a):n},a.clipExtent=function(t){return arguments.length?(o=null==t?Hi:t,a):o===Hi?null:o},a.size=function(t){return arguments.length?a.clipExtent(t&&[[0,0],t]):o===Hi?null:o&&o[1]},a};var Hi=[[-1e6,-1e6],[1e6,1e6]];function Yi(t){return t.x}function Bi(t){return t.y}function ji(e,n){e=t.rgb(e),n=t.rgb(n);var r=e.r,i=e.g,o=e.b,a=n.r-r,u=n.g-i,s=n.b-o;return function(t){return"#"+ue(Math.round(r+a*t))+ue(Math.round(i+u*t))+ue(Math.round(o+s*t))}}function Ui(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Xi(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function Gi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Vi(t,e){var n,r,i,o=qi.lastIndex=$i.lastIndex=0,a=-1,u=[],s=[];for(t+="",e+="";(n=qi.exec(t))&&(r=$i.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:Gi(n,r)})),o=$i.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?(e=s[0].x,function(t){return e(t)+""}):function(){return e}:(e=s.length,function(t){for(var n,r=0;r<e;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)},t.geom.quadtree=function(t,e,n,r,i){var o,a=ei,u=ni;if(o=arguments.length)return a=Yi,u=Bi,3===o&&(i=n,r=e,n=e=0),s(t);function s(t){var s,l,c,f,d,h,p,g,v,y=pe(a),b=pe(u);if(null!=e)h=e,p=n,g=r,v=i;else if(g=v=-(h=p=1/0),l=[],c=[],d=t.length,o)for(f=0;f<d;++f)(s=t[f]).x<h&&(h=s.x),s.y<p&&(p=s.y),s.x>g&&(g=s.x),s.y>v&&(v=s.y),l.push(s.x),c.push(s.y);else for(f=0;f<d;++f){var x=+y(s=t[f],f),w=+b(s,f);x<h&&(h=x),w<p&&(p=w),x>g&&(g=x),w>v&&(v=w),l.push(x),c.push(w)}var k=g-h,_=v-p;function M(t,e,n,r,i,o,a,u){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var s=t.x,l=t.y;if(null!=s)if(m(s-n)+m(l-r)<.01)S(t,e,n,r,i,o,a,u);else{var c=t.point;t.x=t.y=t.point=null,S(t,c,s,l,i,o,a,u),S(t,e,n,r,i,o,a,u)}else t.x=n,t.y=r,t.point=e}else S(t,e,n,r,i,o,a,u)}function S(t,e,n,r,i,o,a,u){var s=.5*(i+a),l=.5*(o+u),c=n>=s,f=r>=l,d=f<<1|c;t.leaf=!1,c?i=s:a=s,f?o=l:u=l,M(t=t.nodes[d]||(t.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,r,i,o,a,u)}k>_?v=p+k:g=h+_;var C={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){M(C,t,+y(t,++f),+b(t,f),h,p,g,v)},visit:function(t){!function t(e,n,r,i,o,a){if(!e(n,r,i,o,a)){var u=.5*(r+o),s=.5*(i+a),l=n.nodes;l[0]&&t(e,l[0],r,i,u,s),l[1]&&t(e,l[1],u,i,o,s),l[2]&&t(e,l[2],r,s,u,a),l[3]&&t(e,l[3],u,s,o,a)}}(t,C,h,p,g,v)},find:function(t){return function(t,e,n,r,i,o,a){var u,s=1/0;return function t(l,c,f,d,h){if(!(c>o||f>a||d<r||h<i)){if(p=l.point){var p,g=e-l.x,v=n-l.y,m=g*g+v*v;if(m<s){var y=Math.sqrt(s=m);r=e-y,i=n-y,o=e+y,a=n+y,u=p}}for(var b=l.nodes,x=.5*(c+d),w=.5*(f+h),k=(n>=w)<<1|e>=x,_=k+4;k<_;++k)if(l=b[3&k])switch(3&k){case 0:t(l,c,f,x,w);break;case 1:t(l,x,f,d,w);break;case 2:t(l,c,w,x,h);break;case 3:t(l,x,w,d,h)}}}(t,r,i,o,a),u}(C,t[0],t[1],h,p,g,v)}};if(f=-1,null==e){for(;++f<d;)M(C,t[f],l[f],c[f],h,p,g,v);--f}else t.forEach(C.add);return l=c=t=s=null,C}return s.x=function(t){return arguments.length?(a=t,s):a},s.y=function(t){return arguments.length?(u=t,s):u},s.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),s):null==e?null:[[e,n],[r,i]]},s.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),s):null==e?null:[r-e,i-n]},s},t.interpolateRgb=ji,t.interpolateObject=Ui,t.interpolateNumber=Gi,t.interpolateString=Vi;var qi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$i=new RegExp(qi.source,"g");function Xi(e,n){for(var r,i=t.interpolators.length;--i>=0&&!(r=t.interpolators[i](e,n)););return r}function Zi(t,e){var n,r=[],i=[],o=t.length,a=e.length,u=Math.min(t.length,e.length);for(n=0;n<u;++n)r.push(Xi(t[n],e[n]));for(;n<o;++n)i[n]=t[n];for(;n<a;++n)i[n]=e[n];return function(t){for(n=0;n<u;++n)i[n]=r[n](t);return i}}t.interpolate=Xi,t.interpolators=[function(t,e){var n=typeof e;return("string"===n?he.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?ji:Vi:e instanceof Ht?ji:Array.isArray(e)?Zi:"object"===n&&isNaN(e)?Ui:Gi)(t,e)}],t.interpolateArray=Zi;var Ki=function(){return L},Qi=t.map({linear:Ki,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return no},cubic:function(){return ro},sin:function(){return oo},exp:function(){return ao},circle:function(){return uo},elastic:function(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/St*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*St/e)}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return so}}),Ji=t.map({in:L,out:to,"in-out":eo,"out-in":function(t){return eo(to(t))}});function to(t){return function(e){return 1-t(1-e)}}function eo(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function no(t){return t*t}function ro(t){return t*t*t}function io(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function oo(t){return 1-Math.cos(t*At)}function ao(t){return Math.pow(2,10*(t-1))}function uo(t){return 1-Math.sqrt(1-t*t)}function so(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function lo(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function co(t){var e,n,r,i=[t.a,t.b],o=[t.c,t.d],a=ho(i),u=fo(i,o),s=ho(((e=o)[0]+=(r=-u)*(n=i)[0],e[1]+=r*n[1],e))||0;i[0]*o[1]<o[0]*i[1]&&(i[0]*=-1,i[1]*=-1,a*=-1,u*=-1),this.rotate=(a?Math.atan2(i[1],i[0]):Math.atan2(-o[0],o[1]))*Tt,this.translate=[t.e,t.f],this.scale=[a,s],this.skew=s?Math.atan2(u,s)*Tt:0}function fo(t,e){return t[0]*e[0]+t[1]*e[1]}function ho(t){var e=Math.sqrt(fo(t,t));return e&&(t[0]/=e,t[1]/=e),e}t.ease=function(t){var n,r=t.indexOf("-"),i=r>=0?t.slice(0,r):t,o=r>=0?t.slice(r+1):"in";return i=Qi.get(i)||Ki,o=Ji.get(o)||L,n=o(i.apply(null,e.call(arguments,1))),function(t){return t<=0?0:t>=1?1:n(t)}},t.interpolateHcl=function(e,n){e=t.hcl(e),n=t.hcl(n);var r=e.h,i=e.c,o=e.l,a=n.h-r,u=n.c-i,s=n.l-o;return isNaN(u)&&(u=0,i=isNaN(i)?n.c:i),isNaN(a)?(a=0,r=isNaN(r)?n.h:r):a>180?a-=360:a<-180&&(a+=360),function(t){return Vt(r+a*t,i+u*t,o+s*t)+""}},t.interpolateHsl=function(e,n){e=t.hsl(e),n=t.hsl(n);var r=e.h,i=e.s,o=e.l,a=n.h-r,u=n.s-i,s=n.l-o;return isNaN(u)&&(u=0,i=isNaN(i)?n.s:i),isNaN(a)?(a=0,r=isNaN(r)?n.h:r):a>180?a-=360:a<-180&&(a+=360),function(t){return jt(r+a*t,i+u*t,o+s*t)+""}},t.interpolateLab=function(e,n){e=t.lab(e),n=t.lab(n);var r=e.l,i=e.a,o=e.b,a=n.l-r,u=n.a-i,s=n.b-o;return function(t){return Jt(r+a*t,i+u*t,o+s*t)+""}},t.interpolateRound=lo,t.transform=function(e){var n=r.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new co(e?e.matrix:po)})(e)},co.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var po={a:1,b:0,c:0,d:1,e:0,f:0};function go(t){return t.length?t.pop()+",":""}function vo(e,n){var r=[],i=[];return e=t.transform(e),n=t.transform(n),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Gi(t[0],e[0])},{i:i-2,x:Gi(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(e.translate,n.translate,r,i),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(go(n)+"rotate(",null,")")-2,x:Gi(t,e)})):e&&n.push(go(n)+"rotate("+e+")")}(e.rotate,n.rotate,r,i),function(t,e,n,r){t!==e?r.push({i:n.push(go(n)+"skewX(",null,")")-2,x:Gi(t,e)}):e&&n.push(go(n)+"skewX("+e+")")}(e.skew,n.skew,r,i),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(go(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Gi(t[0],e[0])},{i:i-2,x:Gi(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(go(n)+"scale("+e+")")}(e.scale,n.scale,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}function mo(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function yo(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function bo(t){for(var e=t.source,n=t.target,r=function(t,n){if(e===n)return e;for(var r=xo(e),i=xo(n),o=r.pop(),a=i.pop(),u=null;o===a;)u=o,o=r.pop(),a=i.pop();return u}(0,n),i=[e];e!==r;)i.push(e=e.parent);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function xo(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function wo(t){t.fixed|=2}function ko(t){t.fixed&=-7}function _o(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Mo(t){t.fixed&=-5}t.interpolateTransform=vo,t.layout={},t.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(bo(t[n]));return e}},t.layout.chord=function(){var e,n,r,i,o,a,u,s={},l=0;function c(){var s,c,d,h,p,g={},v=[],m=t.range(i),y=[];for(e=[],n=[],s=0,h=-1;++h<i;){for(c=0,p=-1;++p<i;)c+=r[h][p];v.push(c),y.push(t.range(i)),s+=c}for(o&&m.sort(function(t,e){return o(v[t],v[e])}),a&&y.forEach(function(t,e){t.sort(function(t,n){return a(r[e][t],r[e][n])})}),s=(St-l*i)/s,c=0,h=-1;++h<i;){for(d=c,p=-1;++p<i;){var b=m[h],x=y[b][p],w=r[b][x],k=c,_=c+=w*s;g[b+"-"+x]={index:b,subindex:x,startAngle:k,endAngle:_,value:w}}n[b]={index:b,startAngle:d,endAngle:c,value:v[b]},c+=l}for(h=-1;++h<i;)for(p=h-1;++p<i;){var M=g[h+"-"+p],S=g[p+"-"+h];(M.value||S.value)&&e.push(M.value<S.value?{source:S,target:M}:{source:M,target:S})}u&&f()}function f(){e.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return s.matrix=function(t){return arguments.length?(i=(r=t)&&r.length,e=n=null,s):r},s.padding=function(t){return arguments.length?(l=t,e=n=null,s):l},s.sortGroups=function(t){return arguments.length?(o=t,e=n=null,s):o},s.sortSubgroups=function(t){return arguments.length?(a=t,e=null,s):a},s.sortChords=function(t){return arguments.length?(u=t,e&&f(),s):u},s.chords=function(){return e||c(),e},s.groups=function(){return n||c(),n},s},t.layout.force=function(){var e,n,r,i,o,a,u={},s=t.dispatch("start","tick","end"),l=[1,1],c=.9,f=So,d=Co,h=-30,p=Ao,g=.1,v=.64,m=[],y=[];function b(t){return function(e,n,r,i){if(e.point!==t){var o,a=e.cx-t.x,u=e.cy-t.y,s=i-n,l=a*a+u*u;if(s*s/v<l)return l<p&&(t.px-=a*(o=e.charge/l),t.py-=u*o),!0;e.point&&l&&l<p&&(t.px-=a*(o=e.pointCharge/l),t.py-=u*o)}return!e.charge}}function x(e){e.px=t.event.x,e.py=t.event.y,u.resume()}return u.tick=function(){if((r*=.99)<.005)return e=null,s.end({type:"end",alpha:r=0}),!0;var n,u,f,d,p,v,x,w,k,_=m.length,M=y.length;for(u=0;u<M;++u)(v=(w=(p=(f=y[u]).target).x-(d=f.source).x)*w+(k=p.y-d.y)*k)&&(k*=v=r*o[u]*((v=Math.sqrt(v))-i[u])/v,p.x-=(w*=v)*(x=d.weight+p.weight?d.weight/(d.weight+p.weight):.5),p.y-=k*x,d.x+=w*(x=1-x),d.y+=k*x);if((x=r*g)&&(w=l[0]/2,k=l[1]/2,u=-1,x))for(;++u<_;)(f=m[u]).x+=(w-f.x)*x,f.y+=(k-f.y)*x;if(h)for(function t(e,n,r){var i=0,o=0;if(e.charge=0,!e.leaf)for(var a,u=e.nodes,s=u.length,l=-1;++l<s;)null!=(a=u[l])&&(t(a,n,r),e.charge+=a.charge,i+=a.charge*a.cx,o+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=n*r[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,o+=c*e.point.y}e.cx=i/e.charge,e.cy=o/e.charge}(n=t.geom.quadtree(m),r,a),u=-1;++u<_;)(f=m[u]).fixed||n.visit(b(f));for(u=-1;++u<_;)(f=m[u]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);s.tick({type:"tick",alpha:r})},u.nodes=function(t){return arguments.length?(m=t,u):m},u.links=function(t){return arguments.length?(y=t,u):y},u.size=function(t){return arguments.length?(l=t,u):l},u.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,u):f},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,u):d},u.friction=function(t){return arguments.length?(c=+t,u):c},u.charge=function(t){return arguments.length?(h="function"==typeof t?t:+t,u):h},u.chargeDistance=function(t){return arguments.length?(p=t*t,u):Math.sqrt(p)},u.gravity=function(t){return arguments.length?(g=+t,u):g},u.theta=function(t){return arguments.length?(v=t*t,u):Math.sqrt(v)},u.alpha=function(t){return arguments.length?(t=+t,r?t>0?r=t:(e.c=null,e.t=NaN,e=null,s.end({type:"end",alpha:r=0})):t>0&&(s.start({type:"start",alpha:r=t}),e=ke(u.tick)),u):r},u.start=function(){var t,e,n,r=m.length,s=y.length,c=l[0],p=l[1];for(t=0;t<r;++t)(n=m[t]).index=t,n.weight=0;for(t=0;t<s;++t)"number"==typeof(n=y[t]).source&&(n.source=m[n.source]),"number"==typeof n.target&&(n.target=m[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<r;++t)n=m[t],isNaN(n.x)&&(n.x=g("x",c)),isNaN(n.y)&&(n.y=g("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(i=[],"function"==typeof f)for(t=0;t<s;++t)i[t]=+f.call(this,y[t],t);else for(t=0;t<s;++t)i[t]=f;if(o=[],"function"==typeof d)for(t=0;t<s;++t)o[t]=+d.call(this,y[t],t);else for(t=0;t<s;++t)o[t]=d;if(a=[],"function"==typeof h)for(t=0;t<r;++t)a[t]=+h.call(this,m[t],t);else for(t=0;t<r;++t)a[t]=h;function g(n,i){if(!e){for(e=new Array(r),l=0;l<r;++l)e[l]=[];for(l=0;l<s;++l){var o=y[l];e[o.source.index].push(o.target),e[o.target.index].push(o.source)}}for(var a,u=e[t],l=-1,c=u.length;++l<c;)if(!isNaN(a=u[l][n]))return a;return Math.random()*i}return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){if(n||(n=t.behavior.drag().origin(L).on("dragstart.force",wo).on("drag.force",x).on("dragend.force",ko)),!arguments.length)return n;this.on("mouseover.force",_o).on("mouseout.force",Mo).call(n)},t.rebind(u,s,"on")};var So=20,Co=1,Ao=1/0;function Do(e,n){return t.rebind(e,n,"sort","children","value"),e.nodes=e,e.links=Fo,e}function To(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Lo(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function Eo(t){return t.children}function Oo(t){return t.value}function No(t,e){return e.value-t.value}function Fo(e){return t.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}t.layout.hierarchy=function(){var t=No,e=Eo,n=Oo;function r(i){var o,a=[i],u=[];for(i.depth=0;null!=(o=a.pop());)if(u.push(o),(l=e.call(r,o,o.depth))&&(s=l.length)){for(var s,l,c;--s>=0;)a.push(c=l[s]),c.parent=o,c.depth=o.depth+1;n&&(o.value=0),o.children=l}else n&&(o.value=+n.call(r,o,o.depth)||0),delete o.children;return Lo(i,function(e){var r,i;t&&(r=e.children)&&r.sort(t),n&&(i=e.parent)&&(i.value+=e.value)}),u}return r.sort=function(e){return arguments.length?(t=e,r):t},r.children=function(t){return arguments.length?(e=t,r):e},r.value=function(t){return arguments.length?(n=t,r):n},r.revalue=function(t){return n&&(To(t,function(t){t.children&&(t.value=0)}),Lo(t,function(t){var e;t.children||(t.value=+n.call(r,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},r},t.layout.partition=function(){var e=t.layout.hierarchy(),n=[1,1];function r(t,r){var i=e.call(this,t,r);return function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,u,s,l=-1;for(r=e.value?r/e.value:0;++l<a;)t(u=o[l],n,s=u.value*r,i),n+=s}}(i[0],0,n[0],n[1]/function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(n[o]));return 1+r}(i[0])),i}return r.size=function(t){return arguments.length?(n=t,r):n},Do(r,e)},t.layout.pie=function(){var e=Number,n=Po,r=0,i=St,o=0;function a(u){var s,l=u.length,c=u.map(function(t,n){return+e.call(a,t,n)}),f=+("function"==typeof r?r.apply(this,arguments):r),d=("function"==typeof i?i.apply(this,arguments):i)-f,h=Math.min(Math.abs(d)/l,+("function"==typeof o?o.apply(this,arguments):o)),p=h*(d<0?-1:1),g=t.sum(c),v=g?(d-l*p)/g:0,m=t.range(l),y=[];return null!=n&&m.sort(n===Po?function(t,e){return c[e]-c[t]}:function(t,e){return n(u[t],u[e])}),m.forEach(function(t){y[t]={data:u[t],value:s=c[t],startAngle:f,endAngle:f+=s*v+p,padAngle:h}}),y}return a.value=function(t){return arguments.length?(e=t,a):e},a.sort=function(t){return arguments.length?(n=t,a):n},a.startAngle=function(t){return arguments.length?(r=t,a):r},a.endAngle=function(t){return arguments.length?(i=t,a):i},a.padAngle=function(t){return arguments.length?(o=t,a):o},a};var Po={};function Wo(t){return t.x}function zo(t){return t.y}function Ro(t,e,n){t.y0=e,t.y=n}t.layout.stack=function(){var e=L,n=Yo,r=Bo,i=Ro,o=Wo,a=zo;function u(s,l){if(!(h=s.length))return s;var c=s.map(function(t,n){return e.call(u,t,n)}),f=c.map(function(t){return t.map(function(t,e){return[o.call(u,t,e),a.call(u,t,e)]})}),d=n.call(u,f,l);c=t.permute(c,d),f=t.permute(f,d);var h,p,g,v,m=r.call(u,f,l),y=c[0].length;for(g=0;g<y;++g)for(i.call(u,c[0][g],v=m[g],f[0][g][1]),p=1;p<h;++p)i.call(u,c[p][g],v+=f[p-1][g][1],f[p][g][1]);return s}return u.values=function(t){return arguments.length?(e=t,u):e},u.order=function(t){return arguments.length?(n="function"==typeof t?t:Io.get(t)||Yo,u):n},u.offset=function(t){return arguments.length?(r="function"==typeof t?t:Ho.get(t)||Bo,u):r},u.x=function(t){return arguments.length?(o=t,u):o},u.y=function(t){return arguments.length?(a=t,u):a},u.out=function(t){return arguments.length?(i=t,u):i},u};var Io=t.map({"inside-out":function(e){var n,r,i=e.length,o=e.map(jo),a=e.map(Uo),u=t.range(i).sort(function(t,e){return o[t]-o[e]}),s=0,l=0,c=[],f=[];for(n=0;n<i;++n)r=u[n],s<l?(s+=a[r],c.push(r)):(l+=a[r],f.push(r));return f.reverse().concat(c)},reverse:function(e){return t.range(e.length).reverse()},default:Yo}),Ho=t.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],u=0,s=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>u&&(u=r),a.push(r)}for(n=0;n<o;++n)s[n]=(u-a[n])/2;return s},wiggle:function(t){var e,n,r,i,o,a,u,s,l,c=t.length,f=t[0],d=f.length,h=[];for(h[0]=s=l=0,n=1;n<d;++n){for(e=0,i=0;e<c;++e)i+=t[e][n][1];for(e=0,o=0,u=f[n][0]-f[n-1][0];e<c;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*u);r<e;++r)a+=(t[r][n][1]-t[r][n-1][1])/u;o+=a*t[e][n][1]}h[n]=s-=i?o/i*u:0,s<l&&(l=s)}for(n=0;n<d;++n)h[n]-=l;return h},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,u=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=a}for(n=0;n<o;++n)u[n]=0;return u},zero:Bo});function Yo(e){return t.range(e.length)}function Bo(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function jo(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function Uo(t){return t.reduce(Go,0)}function Go(t,e){return t+e[1]}function Vo(t,e){return qo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function qo(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function $o(e){return[t.min(e),t.max(e)]}function Xo(t,e){return t.value-e.value}function Zo(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Ko(t,e){t._pack_next=e,e._pack_prev=t}function Qo(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Jo(t){if((e=t.children)&&(s=e.length)){var e,n,r,i,o,a,u,s,l=1/0,c=-1/0,f=1/0,d=-1/0;if(e.forEach(ta),(n=e[0]).x=-n.r,n.y=0,b(n),s>1&&((r=e[1]).x=r.r,r.y=0,b(r),s>2))for(na(n,r,i=e[2]),b(i),Zo(n,i),n._pack_prev=i,Zo(i,r),r=n._pack_next,o=3;o<s;o++){na(n,r,i=e[o]);var h=0,p=1,g=1;for(a=r._pack_next;a!==r;a=a._pack_next,p++)if(Qo(a,i)){h=1;break}if(1==h)for(u=n._pack_prev;u!==a._pack_prev&&!Qo(u,i);u=u._pack_prev,g++);h?(p<g||p==g&&r.r<n.r?Ko(n,r=a):Ko(n=u,r),o--):(Zo(n,i),r=i,b(i))}var v=(l+c)/2,m=(f+d)/2,y=0;for(o=0;o<s;o++)(i=e[o]).x-=v,i.y-=m,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,e.forEach(ea)}function b(t){l=Math.min(t.x-t.r,l),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),d=Math.max(t.y+t.r,d)}}function ta(t){t._pack_next=t._pack_prev=t}function ea(t){delete t._pack_next,delete t._pack_prev}function na(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,u=i*i+o*o,s=.5+((r*=r)-(a*=a))/(2*u),l=Math.sqrt(Math.max(0,2*a*(r+u)-(r-=u)*r-a*a))/(2*u);n.x=t.x+s*i+l*o,n.y=t.y+s*o-l*i}else n.x=t.x+r,n.y=t.y}function ra(t,e){return t.parent==e.parent?1:2}function ia(t){var e=t.children;return e.length?e[0]:t.t}function oa(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function aa(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function ua(t,e,n){return t.a.parent===e.parent?t.a:n}function sa(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function la(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function ca(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function fa(t){return t.rangeExtent?t.rangeExtent():ca(t.range())}function da(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function ha(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function pa(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:ga}t.layout.histogram=function(){var e=!0,n=Number,r=$o,i=Vo;function o(o,a){for(var u,s,l=[],c=o.map(n,this),f=r.call(this,c,a),d=i.call(this,f,c,a),h=(a=-1,c.length),p=d.length-1,g=e?1:1/h;++a<p;)(u=l[a]=[]).dx=d[a+1]-(u.x=d[a]),u.y=0;if(p>0)for(a=-1;++a<h;)(s=c[a])>=f[0]&&s<=f[1]&&((u=l[t.bisect(d,s,1,p)-1]).y+=g,u.push(o[a]));return l}return o.value=function(t){return arguments.length?(n=t,o):n},o.range=function(t){return arguments.length?(r=pe(t),o):r},o.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return qo(e,t)}:pe(t),o):i},o.frequency=function(t){return arguments.length?(e=!!t,o):e},o},t.layout.pack=function(){var e,n=t.layout.hierarchy().sort(Xo),r=0,i=[1,1];function o(t,o){var a=n.call(this,t,o),u=a[0],s=i[0],l=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(u.x=u.y=0,Lo(u,function(t){t.r=+c(t.value)}),Lo(u,Jo),r){var f=r*(e?1:Math.max(2*u.r/s,2*u.r/l))/2;Lo(u,function(t){t.r+=f}),Lo(u,Jo),Lo(u,function(t){t.r-=f})}return function t(e,n,r,i){var o=e.children;if(e.x=n+=i*e.x,e.y=r+=i*e.y,e.r*=i,o)for(var a=-1,u=o.length;++a<u;)t(o[a],n,r,i)}(u,s/2,l/2,e?1:1/Math.max(2*u.r/s,2*u.r/l)),a}return o.size=function(t){return arguments.length?(i=t,o):i},o.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,o):e},o.padding=function(t){return arguments.length?(r=+t,o):r},Do(o,n)},t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),n=ra,r=[1,1],i=null;function o(t,o){var l=e.call(this,t,o),c=l[0],f=function(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,o=e.children,a=0,u=o.length;a<u;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}(c);if(Lo(f,a),f.parent.m=-f.z,To(f,u),i)To(c,s);else{var d=c,h=c,p=c;To(c,function(t){t.x<d.x&&(d=t),t.x>h.x&&(h=t),t.depth>p.depth&&(p=t)});var g=n(d,h)/2-d.x,v=r[0]/(h.x+n(h,d)/2+g),m=r[1]/(p.depth||1);To(c,function(t){t.x=(t.x+g)*v,t.y=t.depth*m})}return l}function a(t){var e=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(e.length){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+n(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+n(t._,i._));t.parent.A=function(t,e,r){if(e){for(var i,o=t,a=t,u=e,s=o.parent.children[0],l=o.m,c=a.m,f=u.m,d=s.m;u=oa(u),o=ia(o),u&&o;)s=ia(s),(a=oa(a)).a=t,(i=u.z+f-o.z-l+n(u._,o._))>0&&(aa(ua(u,t,r),t,i),l+=i,c+=i),f+=u.m,l+=o.m,d+=s.m,c+=a.m;u&&!oa(a)&&(a.t=u,a.m+=f-c),o&&!ia(s)&&(s.t=o,s.m+=l-d,r=t)}return r}(t,i,t.parent.A||r[0])}function u(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=r[0],t.y=t.depth*r[1]}return o.separation=function(t){return arguments.length?(n=t,o):n},o.size=function(t){return arguments.length?(i=null==(r=t)?s:null,o):i?null:r},o.nodeSize=function(t){return arguments.length?(i=null==(r=t)?null:s,o):i?r:null},Do(o,e)},t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),n=ra,r=[1,1],i=!1;function o(o,a){var u,s=e.call(this,o,a),l=s[0],c=0;Lo(l,function(e){var r=e.children;r&&r.length?(e.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(r),e.y=function(e){return 1+t.max(e,function(t){return t.y})}(r)):(e.x=u?c+=n(e,u):0,e.y=0,u=e)});var f=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(l),d=function t(e){var n,r=e.children;return r&&(n=r.length)?t(r[n-1]):e}(l),h=f.x-n(f,d)/2,p=d.x+n(d,f)/2;return Lo(l,i?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(p-h)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),s}return o.separation=function(t){return arguments.length?(n=t,o):n},o.size=function(t){return arguments.length?(i=null==(r=t),o):i?null:r},o.nodeSize=function(t){return arguments.length?(i=null!=(r=t),o):i?r:null},Do(o,e)},t.layout.treemap=function(){var e,n=t.layout.hierarchy(),r=Math.round,i=[1,1],o=null,a=sa,u=!1,s="squarify",l=.5*(1+Math.sqrt(5));function c(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function f(t){var e=t.children;if(e&&e.length){var n,r,i,o=a(t),u=[],l=e.slice(),d=1/0,g="slice"===s?o.dx:"dice"===s?o.dy:"slice-dice"===s?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(c(l,o.dx*o.dy/t.value),u.area=0;(i=l.length)>0;)u.push(n=l[i-1]),u.area+=n.area,"squarify"!==s||(r=h(u,g))<=d?(l.pop(),d=r):(u.area-=u.pop().area,p(u,g,o,!1),g=Math.min(o.dx,o.dy),u.length=u.area=0,d=1/0);u.length&&(p(u,g,o,!0),u.length=u.area=0),e.forEach(f)}}function d(t){var e=t.children;if(e&&e.length){var n,r=a(t),i=e.slice(),o=[];for(c(i,r.dx*r.dy/t.value),o.area=0;n=i.pop();)o.push(n),o.area+=n.area,null!=n.z&&(p(o,n.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);e.forEach(d)}}function h(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,u=t.length;++a<u;)(n=t[a].area)&&(n<o&&(o=n),n>i&&(i=n));return e*=e,(r*=r)?Math.max(e*i*l/r,r/(e*o*l)):1/0}function p(t,e,n,i){var o,a=-1,u=t.length,s=n.x,l=n.y,c=e?r(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++a<u;)(o=t[a]).x=s,o.y=l,o.dy=c,s+=o.dx=Math.min(n.x+n.dx-s,c?r(o.area/c):0);o.z=!0,o.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++a<u;)(o=t[a]).x=s,o.y=l,o.dx=c,l+=o.dy=Math.min(n.y+n.dy-l,c?r(o.area/c):0);o.z=!1,o.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function g(t){var r=e||n(t),o=r[0];return o.x=o.y=0,o.value?(o.dx=i[0],o.dy=i[1]):o.dx=o.dy=0,e&&n.revalue(o),c([o],o.dx*o.dy/o.value),(e?d:f)(o),u&&(e=r),r}return g.size=function(t){return arguments.length?(i=t,g):i},g.padding=function(t){if(!arguments.length)return o;function e(e){return la(e,t)}var n;return a=null==(o=t)?sa:"function"==(n=typeof t)?function(e){var n=t.call(g,e,e.depth);return null==n?sa(e):la(e,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,g},g.round=function(t){return arguments.length?(r=t?Math.round:Number,g):r!=Number},g.sticky=function(t){return arguments.length?(u=t,e=null,g):u},g.ratio=function(t){return arguments.length?(l=t,g):l},g.mode=function(t){return arguments.length?(s=t+"",g):s},Do(g,n)},t.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var n=t.random.irwinHall(e);return function(){return n()/e}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},t.scale={};var ga={floor:L,ceil:L};function va(e,n,r,i){var o=[],a=[],u=0,s=Math.min(e.length,n.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++u<=s;)o.push(r(e[u-1],e[u])),a.push(i(n[u-1],n[u]));return function(n){var r=t.bisect(e,n,1,s)-1;return a[r](o[r](n))}}function ma(e,n){return t.rebind(e,n,"range","rangeRound","interpolate","clamp")}function ya(t,e){return ha(t,pa(ba(t,e)[2])),ha(t,pa(ba(t,e)[2])),t}function ba(t,e){null==e&&(e=10);var n=ca(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function xa(e,n){return t.range.apply(t,ba(e,n))}function wa(e,n,r){var i=ba(e,n);if(r){var o=Te.exec(r);if(o.shift(),"s"===o[8]){var a=t.formatPrefix(Math.max(m(i[0]),m(i[1])));return o[7]||(o[7]="."+_a(a.scale(i[2]))),o[8]="f",r=t.format(o.join("")),function(t){return r(a.scale(t))+a.symbol}}o[7]||(o[7]="."+function(t,e){var n=_a(e[2]);return t in ka?Math.abs(n-_a(Math.max(m(e[0]),m(e[1]))))+ +("e"!==t):n-2*("%"===t)}(o[8],i)),r=o.join("")}else r=",."+_a(i[2])+"f";return t.format(r)}t.scale.linear=function(){return function t(e,n,r,i){var o,a;function u(){var t=Math.min(e.length,n.length)>2?va:da,u=i?yo:mo;return o=t(e,n,u,r),a=t(n,e,u,Xi),s}function s(t){return o(t)}return s.invert=function(t){return a(t)},s.domain=function(t){return arguments.length?(e=t.map(Number),u()):e},s.range=function(t){return arguments.length?(n=t,u()):n},s.rangeRound=function(t){return s.range(t).interpolate(lo)},s.clamp=function(t){return arguments.length?(i=t,u()):i},s.interpolate=function(t){return arguments.length?(r=t,u()):r},s.ticks=function(t){return xa(e,t)},s.tickFormat=function(t,n){return wa(e,t,n)},s.nice=function(t){return ya(e,t),u()},s.copy=function(){return t(e,n,r,i)},u()}([0,1],[0,1],Xi,!1)};var ka={s:1,g:1,p:1,r:1,e:1};function _a(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}t.scale.log=function(){return function e(n,r,i,o){function a(t){return(i?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(r)}function u(t){return i?Math.pow(r,t):-Math.pow(r,-t)}function s(t){return n(a(t))}return s.invert=function(t){return u(n.invert(t))},s.domain=function(t){return arguments.length?(i=t[0]>=0,n.domain((o=t.map(Number)).map(a)),s):o},s.base=function(t){return arguments.length?(r=+t,n.domain(o.map(a)),s):r},s.nice=function(){var t=ha(o.map(a),i?Math:Sa);return n.domain(t),o=t.map(u),s},s.ticks=function(){var t=ca(o),e=[],n=t[0],s=t[1],l=Math.floor(a(n)),c=Math.ceil(a(s)),f=r%1?2:r;if(isFinite(c-l)){if(i){for(;l<c;l++)for(var d=1;d<f;d++)e.push(u(l)*d);e.push(u(l))}else for(e.push(u(l));l++<c;)for(d=f-1;d>0;d--)e.push(u(l)*d);for(l=0;e[l]<n;l++);for(c=e.length;e[c-1]>s;c--);e=e.slice(l,c)}return e},s.tickFormat=function(e,n){if(!arguments.length)return Ma;arguments.length<2?n=Ma:"function"!=typeof n&&(n=t.format(n));var i=Math.max(1,r*e/s.ticks().length);return function(t){var e=t/u(Math.round(a(t)));return e*r<r-.5&&(e*=r),e<=i?n(t):""}},s.copy=function(){return e(n.copy(),r,i,o)},ma(s,n)}(t.scale.linear().domain([0,1]),10,!0,[1,10])};var Ma=t.format(".0e"),Sa={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Ca(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}t.scale.pow=function(){return function t(e,n,r){var i=Ca(n),o=Ca(1/n);function a(t){return e(i(t))}return a.invert=function(t){return o(e.invert(t))},a.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(i)),a):r},a.ticks=function(t){return xa(r,t)},a.tickFormat=function(t,e){return wa(r,t,e)},a.nice=function(t){return a.domain(ya(r,t))},a.exponent=function(t){return arguments.length?(i=Ca(n=t),o=Ca(1/n),e.domain(r.map(i)),a):n},a.copy=function(){return t(e.copy(),n,r)},ma(a,e)}(t.scale.linear(),1,[0,1])},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return function e(n,r){var i,o,a;function u(t){return o[((i.get(t)||("range"===r.t?i.set(t,n.push(t)):NaN))-1)%o.length]}function s(e,r){return t.range(n.length).map(function(t){return e+r*t})}return u.domain=function(t){if(!arguments.length)return n;n=[],i=new b;for(var e,o=-1,a=t.length;++o<a;)i.has(e=t[o])||i.set(e,n.push(e));return u[r.t].apply(u,r.a)},u.range=function(t){return arguments.length?(o=t,a=0,r={t:"range",a:arguments},u):o},u.rangePoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],l=t[1],c=n.length<2?(i=(i+l)/2,0):(l-i)/(n.length-1+e);return o=s(i+c*e/2,c),a=0,r={t:"rangePoints",a:arguments},u},u.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],l=t[1],c=n.length<2?(i=l=Math.round((i+l)/2),0):(l-i)/(n.length-1+e)|0;return o=s(i+Math.round(c*e/2+(l-i-(n.length-1+e)*c)/2),c),a=0,r={t:"rangeRoundPoints",a:arguments},u},u.rangeBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var l=t[1]<t[0],c=t[l-0],f=(t[1-l]-c)/(n.length-e+2*i);return o=s(c+f*i,f),l&&o.reverse(),a=f*(1-e),r={t:"rangeBands",a:arguments},u},u.rangeRoundBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var l=t[1]<t[0],c=t[l-0],f=t[1-l],d=Math.floor((f-c)/(n.length-e+2*i));return o=s(c+Math.round((f-c-(n.length-e)*d)/2),d),l&&o.reverse(),a=Math.round(d*(1-e)),r={t:"rangeRoundBands",a:arguments},u},u.rangeBand=function(){return a},u.rangeExtent=function(){return ca(r.a[0])},u.copy=function(){return e(n,r)},u.domain(n)}([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(Aa)},t.scale.category20=function(){return t.scale.ordinal().range(Da)},t.scale.category20b=function(){return t.scale.ordinal().range(Ta)},t.scale.category20c=function(){return t.scale.ordinal().range(La)};var Aa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(oe),Da=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(oe),Ta=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(oe),La=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(oe);function Ea(){return 0}t.scale.quantile=function(){return function e(n,r){var i;function o(){var e=0,o=r.length;for(i=[];++e<o;)i[e-1]=t.quantile(n,e/o);return a}function a(e){if(!isNaN(e=+e))return r[t.bisect(i,e)]}return a.domain=function(t){return arguments.length?(n=t.map(d).filter(h).sort(f),o()):n},a.range=function(t){return arguments.length?(r=t,o()):r},a.quantiles=function(){return i},a.invertExtent=function(t){return(t=r.indexOf(t))<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},a.copy=function(){return e(n,r)},o()}([],[])},t.scale.quantize=function(){return function t(e,n,r){var i,o;function a(t){return r[Math.max(0,Math.min(o,Math.floor(i*(t-e))))]}function u(){return i=r.length/(n-e),o=r.length-1,a}return a.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],u()):[e,n]},a.range=function(t){return arguments.length?(r=t,u()):r},a.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/i+e,t+1/i]},a.copy=function(){return t(e,n,r)},u()}(0,1,[0,1])},t.scale.threshold=function(){return function e(n,r){function i(e){if(e<=e)return r[t.bisect(n,e)]}return i.domain=function(t){return arguments.length?(n=t,i):n},i.range=function(t){return arguments.length?(r=t,i):r},i.invertExtent=function(t){return t=r.indexOf(t),[n[t-1],n[t]]},i.copy=function(){return e(n,r)},i}([.5],[0,1])},t.scale.identity=function(){return function t(e){function n(t){return+t}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e},n.ticks=function(t){return xa(e,t)},n.tickFormat=function(t,n){return wa(e,t,n)},n.copy=function(){return t(e)},n}([0,1])},t.svg={},t.svg.arc=function(){var t=Na,e=Fa,n=Ea,r=Oa,i=Pa,o=Wa,a=za;function u(){var u=Math.max(0,+t.apply(this,arguments)),l=Math.max(0,+e.apply(this,arguments)),c=i.apply(this,arguments)-At,f=o.apply(this,arguments)-At,d=Math.abs(f-c),h=c>f?0:1;if(l<u&&(p=l,l=u,u=p),d>=Ct)return s(l,h)+(u?s(u,1-h):"")+"Z";var p,g,v,m,y,b,x,w,k,_,M,S,C=0,A=0,D=[];if((m=(+a.apply(this,arguments)||0)/2)&&(v=r===Oa?Math.sqrt(u*u+l*l):+r.apply(this,arguments),h||(A*=-1),l&&(A=Nt(v/l*Math.sin(m))),u&&(C=Nt(v/u*Math.sin(m)))),l){y=l*Math.cos(c+A),b=l*Math.sin(c+A),x=l*Math.cos(f-A),w=l*Math.sin(f-A);var T=Math.abs(f-c-2*A)<=Mt?0:1;if(A&&Ra(y,b,x,w)===h^T){var L=(c+f)/2;y=l*Math.cos(L),b=l*Math.sin(L),x=w=null}}else y=b=0;if(u){k=u*Math.cos(f-C),_=u*Math.sin(f-C),M=u*Math.cos(c+C),S=u*Math.sin(c+C);var E=Math.abs(c-f+2*C)<=Mt?0:1;if(C&&Ra(k,_,M,S)===1-h^E){var O=(c+f)/2;k=u*Math.cos(O),_=u*Math.sin(O),M=S=null}}else k=_=0;if(d>kt&&(p=Math.min(Math.abs(l-u)/2,+n.apply(this,arguments)))>.001){g=u<l^h?0:1;var N=p,F=p;if(d<Mt){var P=null==M?[k,_]:null==x?[y,b]:ui([y,b],[M,S],[x,w],[k,_]),W=y-P[0],z=b-P[1],R=x-P[0],I=w-P[1],H=1/Math.sin(Math.acos((W*R+z*I)/(Math.sqrt(W*W+z*z)*Math.sqrt(R*R+I*I)))/2),Y=Math.sqrt(P[0]*P[0]+P[1]*P[1]);F=Math.min(p,(u-Y)/(H-1)),N=Math.min(p,(l-Y)/(H+1))}if(null!=x){var B=Ia(null==M?[k,_]:[M,S],[y,b],l,N,h),j=Ia([x,w],[k,_],l,N,h);p===N?D.push("M",B[0],"A",N,",",N," 0 0,",g," ",B[1],"A",l,",",l," 0 ",1-h^Ra(B[1][0],B[1][1],j[1][0],j[1][1]),",",h," ",j[1],"A",N,",",N," 0 0,",g," ",j[0]):D.push("M",B[0],"A",N,",",N," 0 1,",g," ",j[0])}else D.push("M",y,",",b);if(null!=M){var U=Ia([y,b],[M,S],u,-F,h),G=Ia([k,_],null==x?[y,b]:[x,w],u,-F,h);p===F?D.push("L",G[0],"A",F,",",F," 0 0,",g," ",G[1],"A",u,",",u," 0 ",h^Ra(G[1][0],G[1][1],U[1][0],U[1][1]),",",1-h," ",U[1],"A",F,",",F," 0 0,",g," ",U[0]):D.push("L",G[0],"A",F,",",F," 0 0,",g," ",U[0])}else D.push("L",k,",",_)}else D.push("M",y,",",b),null!=x&&D.push("A",l,",",l," 0 ",T,",",h," ",x,",",w),D.push("L",k,",",_),null!=M&&D.push("A",u,",",u," 0 ",E,",",1-h," ",M,",",S);return D.push("Z"),D.join("")}function s(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return u.innerRadius=function(e){return arguments.length?(t=pe(e),u):t},u.outerRadius=function(t){return arguments.length?(e=pe(t),u):e},u.cornerRadius=function(t){return arguments.length?(n=pe(t),u):n},u.padRadius=function(t){return arguments.length?(r=t==Oa?Oa:pe(t),u):r},u.startAngle=function(t){return arguments.length?(i=pe(t),u):i},u.endAngle=function(t){return arguments.length?(o=pe(t),u):o},u.padAngle=function(t){return arguments.length?(a=pe(t),u):a},u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-At;return[Math.cos(r)*n,Math.sin(r)*n]},u};var Oa="auto";function Na(t){return t.innerRadius}function Fa(t){return t.outerRadius}function Pa(t){return t.startAngle}function Wa(t){return t.endAngle}function za(t){return t&&t.padAngle}function Ra(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Ia(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],u=(i?r:-r)/Math.sqrt(o*o+a*a),s=u*a,l=-u*o,c=t[0]+s,f=t[1]+l,d=e[0]+s,h=e[1]+l,p=(c+d)/2,g=(f+h)/2,v=d-c,m=h-f,y=v*v+m*m,b=n-r,x=c*h-d*f,w=(m<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),k=(x*m-v*w)/y,_=(-x*v-m*w)/y,M=(x*m+v*w)/y,S=(-x*v+m*w)/y,C=k-p,A=_-g,D=M-p,T=S-g;return C*C+A*A>D*D+T*T&&(k=M,_=S),[[k-s,_-l],[k*n/b,_*n/b]]}function Ha(t){var e=ei,n=ni,r=qn,i=Ba,o=i.key,a=.7;function u(o){var u,s=[],l=[],c=-1,f=o.length,d=pe(e),h=pe(n);function p(){s.push("M",i(t(l),a))}for(;++c<f;)r.call(this,u=o[c],c)?l.push([+d.call(this,u,c),+h.call(this,u,c)]):l.length&&(p(),l=[]);return l.length&&p(),s.length?s.join(""):null}return u.x=function(t){return arguments.length?(e=t,u):e},u.y=function(t){return arguments.length?(n=t,u):n},u.defined=function(t){return arguments.length?(r=t,u):r},u.interpolate=function(t){return arguments.length?(o="function"==typeof t?i=t:(i=Ya.get(t)||Ba).key,u):o},u.tension=function(t){return arguments.length?(a=t,u):a},u}t.svg.line=function(){return Ha(L)};var Ya=t.map({linear:Ba,"linear-closed":ja,step:function(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")},"step-before":Ua,"step-after":Ga,basis:$a,"basis-open":function(t){if(t.length<4)return Ba(t);for(var e,n=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)o.push((e=t[r])[0]),a.push(e[1]);for(n.push(Xa(Qa,o)+","+Xa(Qa,a)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Ja(n,o,a);return n.join("")},"basis-closed":function(t){for(var e,n,r=-1,i=t.length,o=i+4,a=[],u=[];++r<4;)a.push((n=t[r%i])[0]),u.push(n[1]);for(e=[Xa(Qa,a),",",Xa(Qa,u)],--r;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),u.shift(),u.push(n[1]),Ja(e,a,u);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],u=t[n][0]-o,s=t[n][1]-a,l=-1;++l<=n;)(r=t[l])[0]=e*r[0]+(1-e)*(o+(i=l/n)*u),r[1]=e*r[1]+(1-e)*(a+i*s);return $a(t)},cardinal:function(t,e){return t.length<3?Ba(t):t[0]+Va(t,qa(t,e))},"cardinal-open":function(t,e){return t.length<4?Ba(t):t[1]+Va(t.slice(1,-1),qa(t,e))},"cardinal-closed":function(t,e){return t.length<3?ja(t):t[0]+Va((t.push(t[0]),t),qa([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Ba(t):t[0]+Va(t,function(t){for(var e,n,r,i,o=[],a=function(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=tu(i,o);++e<n;)r[e]=(a+(a=tu(i=o,o=t[e+1])))/2;return r[e]=a,r}(t),u=-1,s=t.length-1;++u<s;)e=tu(t[u],t[u+1]),m(e)<kt?a[u]=a[u+1]=0:(i=(n=a[u]/e)*n+(r=a[u+1]/e)*r)>9&&(i=3*e/Math.sqrt(i),a[u]=i*n,a[u+1]=i*r);for(u=-1;++u<=s;)i=(t[Math.min(s,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+a[u]*a[u])),o.push([i||0,a[u]*i||0]);return o}(t))}});function Ba(t){return t.length>1?t.join("L"):t+"Z"}function ja(t){return t.join("L")+"Z"}function Ua(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Ga(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Va(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ba(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],u=a,s=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],s=2),e.length>1){o=t[s],s++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-(u=e[1])[0])+","+(o[1]-u[1])+","+o[0]+","+o[1];for(var l=2;l<e.length;l++,s++)r+="S"+((o=t[s])[0]-(u=e[l])[0])+","+(o[1]-u[1])+","+o[0]+","+o[1]}if(n){var c=t[s];r+="Q"+(o[0]+2*u[0]/3)+","+(o[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function qa(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],u=1,s=t.length;++u<s;)n=o,o=a,r.push([i*((a=t[u])[0]-n[0]),i*(a[1]-n[1])]);return r}function $a(t){if(t.length<3)return Ba(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],u=[o,o,o,r[1]],s=[i,",",o,"L",Xa(Qa,a),",",Xa(Qa,u)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),u.shift(),u.push(r[1]),Ja(s,a,u);return t.pop(),s.push("L",r),s.join("")}function Xa(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Ya.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Za=[0,2/3,1/3,0],Ka=[0,1/3,2/3,0],Qa=[0,1/6,2/3,1/6];function Ja(t,e,n){t.push("C",Xa(Za,e),",",Xa(Za,n),",",Xa(Ka,e),",",Xa(Ka,n),",",Xa(Qa,e),",",Xa(Qa,n))}function tu(t,e){return(e[1]-t[1])/(e[0]-t[0])}function eu(t){for(var e,n,r,i=-1,o=t.length;++i<o;)r=(e=t[i])[1]-At,e[0]=(n=e[0])*Math.cos(r),e[1]=n*Math.sin(r);return t}function nu(t){var e=ei,n=ei,r=0,i=ni,o=qn,a=Ba,u=a.key,s=a,l="L",c=.7;function f(u){var f,d,h,p=[],g=[],v=[],m=-1,y=u.length,b=pe(e),x=pe(r),w=e===n?function(){return d}:pe(n),k=r===i?function(){return h}:pe(i);function _(){p.push("M",a(t(v),c),l,s(t(g.reverse()),c),"Z")}for(;++m<y;)o.call(this,f=u[m],m)?(g.push([d=+b.call(this,f,m),h=+x.call(this,f,m)]),v.push([+w.call(this,f,m),+k.call(this,f,m)])):g.length&&(_(),g=[],v=[]);return g.length&&_(),p.length?p.join(""):null}return f.x=function(t){return arguments.length?(e=n=t,f):n},f.x0=function(t){return arguments.length?(e=t,f):e},f.x1=function(t){return arguments.length?(n=t,f):n},f.y=function(t){return arguments.length?(r=i=t,f):i},f.y0=function(t){return arguments.length?(r=t,f):r},f.y1=function(t){return arguments.length?(i=t,f):i},f.defined=function(t){return arguments.length?(o=t,f):o},f.interpolate=function(t){return arguments.length?(u="function"==typeof t?a=t:(a=Ya.get(t)||Ba).key,s=a.reverse||a,l=a.closed?"M":"L",f):u},f.tension=function(t){return arguments.length?(c=t,f):c},f}function ru(t){return t.radius}function iu(t){return[t.x,t.y]}function ou(){return 64}function au(){return"circle"}function uu(t){var e=Math.sqrt(t/Mt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}t.svg.line.radial=function(){var t=Ha(eu);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ua.reverse=Ga,Ga.reverse=Ua,t.svg.area=function(){return nu(L)},t.svg.area.radial=function(){var t=nu(eu);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},t.svg.chord=function(){var t=Yr,e=Br,n=ru,r=Pa,i=Wa;function o(n,r){var i,o,l=a(this,t,n,r),c=a(this,e,n,r);return"M"+l.p0+u(l.r,l.p1,l.a1-l.a0)+((i=l).a0==(o=c).a0&&i.a1==o.a1?s(0,0,0,l.p0):s(0,0,0,c.p0)+u(c.r,c.p1,c.a1-c.a0)+s(0,0,0,l.p0))+"Z"}function a(t,e,o,a){var u=e.call(t,o,a),s=n.call(t,u,a),l=r.call(t,u,a)-At,c=i.call(t,u,a)-At;return{r:s,a0:l,a1:c,p0:[s*Math.cos(l),s*Math.sin(l)],p1:[s*Math.cos(c),s*Math.sin(c)]}}function u(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Mt)+",1 "+e}function s(t,e,n,r){return"Q 0,0 "+r}return o.radius=function(t){return arguments.length?(n=pe(t),o):n},o.source=function(e){return arguments.length?(t=pe(e),o):t},o.target=function(t){return arguments.length?(e=pe(t),o):e},o.startAngle=function(t){return arguments.length?(r=pe(t),o):r},o.endAngle=function(t){return arguments.length?(i=pe(t),o):i},o},t.svg.diagonal=function(){var t=Yr,e=Br,n=iu;function r(r,i){var o=t.call(this,r,i),a=e.call(this,r,i),u=(o.y+a.y)/2,s=[o,{x:o.x,y:u},{x:a.x,y:u},a];return"M"+(s=s.map(n))[0]+"C"+s[1]+" "+s[2]+" "+s[3]}return r.source=function(e){return arguments.length?(t=pe(e),r):t},r.target=function(t){return arguments.length?(e=pe(t),r):e},r.projection=function(t){return arguments.length?(n=t,r):n},r},t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),n=iu,r=e.projection;return e.projection=function(t){return arguments.length?r(function(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-At;return[n*Math.cos(r),n*Math.sin(r)]}}(n=t)):n},e},t.svg.symbol=function(){var t=au,e=ou;function n(n,r){return(su.get(t.call(this,n,r))||uu)(e.call(this,n,r))}return n.type=function(e){return arguments.length?(t=pe(e),n):t},n.size=function(t){return arguments.length?(e=pe(t),n):e},n};var su=t.map({circle:uu,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*cu)),n=e*cu;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/lu),n=e*lu/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/lu),n=e*lu/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});t.svg.symbolTypes=su.keys();var lu=Math.sqrt(3),cu=Math.tan(30*Dt);V.transition=function(t){for(var e,n,r=pu||++mu,i=xu(t),o=[],a=gu||{time:Date.now(),ease:io,delay:0,duration:250},u=-1,s=this.length;++u<s;){o.push(e=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(n=l[c])&&wu(n,c,i,r,a),e.push(n)}return hu(o,i,r)},V.interrupt=function(t){return this.each(null==t?fu:du(xu(t)))};var fu=du(xu());function du(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function hu(t,e,n){return Y(t,vu),t.namespace=e,t.id=n,t}var pu,gu,vu=[],mu=0;function yu(t,e,n,r){var i=t.id,o=t.namespace;return lt(t,"function"==typeof n?function(t,a,u){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,u)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function bu(t){return null==t&&(t=""),function(){this.textContent=t}}function xu(t){return null==t?"__transition__":"__transition_"+t+"__"}function wu(t,e,n,r,i){var o,a,u,s,l,c=t[n]||(t[n]={active:0,count:0}),f=c[r];function d(n){var i=c.active,d=c[i];for(var p in d&&(d.timer.c=null,d.timer.t=NaN,--c.count,delete c[i],d.event&&d.event.interrupt.call(t,t.__data__,d.index)),c)if(+p<r){var g=c[p];g.timer.c=null,g.timer.t=NaN,--c.count,delete c[p]}a.c=h,ke(function(){return a.c&&h(n||1)&&(a.c=null,a.t=NaN),1},0,o),c.active=r,f.event&&f.event.start.call(t,t.__data__,e),l=[],f.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&l.push(r)}),s=f.ease,u=f.duration}function h(i){for(var o=i/u,a=s(o),d=l.length;d>0;)l[--d].call(t,a);if(o>=1)return f.event&&f.event.end.call(t,t.__data__,e),--c.count?delete c[r]:delete t[n],1}f||(a=ke(function(t){var e=f.delay;if(a.t=e+o,e<=t)return d(t-e);a.c=d},0,o=i.time),f=c[r]={tween:new b,time:o,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++c.count)}vu.call=V.call,vu.empty=V.empty,vu.node=V.node,vu.size=V.size,t.transition=function(e,n){return e&&e.transition?pu?e.transition(n):e:t.selection().transition(e)},t.transition.prototype=vu,vu.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=q(t);for(var u=-1,s=this.length;++u<s;){a.push(e=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=t.call(r,r.__data__,c,u))?("__data__"in r&&(n.__data__=r.__data__),wu(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return hu(a,o,i)},vu.selectAll=function(t){var e,n,r,i,o,a=this.id,u=this.namespace,s=[];t=$(t);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],d=-1,h=f.length;++d<h;)if(r=f[d]){o=r[u][a],n=t.call(r,r.__data__,d,l),s.push(e=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&wu(i,p,u,a,o),e.push(i)}return hu(s,u,a)},vu.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=st(t));for(var i=0,o=this.length;i<o;i++){r.push(e=[]);for(var a,u=0,s=(a=this[i]).length;u<s;u++)(n=a[u])&&t.call(n,n.__data__,u,i)&&e.push(n)}return hu(r,this.namespace,this.id)},vu.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):lt(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},vu.attr=function(e,n){if(arguments.length<2){for(n in e)this.attr(n,e[n]);return this}var r="transform"==e?vo:Xi,i=t.ns.qualify(e);function o(){this.removeAttribute(i)}function a(){this.removeAttributeNS(i.space,i.local)}return yu(this,"attr."+e,n,i.local?function(t){return null==t?a:(t+="",function(){var e,n=this.getAttributeNS(i.space,i.local);return n!==t&&(e=r(n,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}:function(t){return null==t?o:(t+="",function(){var e,n=this.getAttribute(i);return n!==t&&(e=r(n,t),function(t){this.setAttribute(i,e(t))})})})},vu.attrTween=function(e,n){var r=t.ns.qualify(e);return this.tween("attr."+e,r.local?function(t,e){var i=n.call(this,t,e,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}:function(t,e){var i=n.call(this,t,e,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}})},vu.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}return yu(this,"style."+t,e,function(e){return null==e?i:(e+="",function(){var r,i=o(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=Xi(i,e),function(e){this.style.setProperty(t,r(e),n)})})})},vu.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(r,i){var a=e.call(this,r,i,o(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}})},vu.text=function(t){return yu(this,"text",t,bu)},vu.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},vu.ease=function(e){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof e&&(e=t.ease.apply(t,arguments)),lt(this,function(t){t[r][n].ease=e}))},vu.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:lt(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},vu.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:lt(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},vu.each=function(e,n){var r=this.id,i=this.namespace;if(arguments.length<2){var o=gu,a=pu;try{pu=r,lt(this,function(t,n,o){gu=t[i][r],e.call(t,t.__data__,n,o)})}finally{gu=o,pu=a}}else lt(this,function(o){var a=o[i][r];(a.event||(a.event=t.dispatch("start","end","interrupt"))).on(e,n)});return this},vu.transition=function(){for(var t,e,n,r=this.id,i=++mu,o=this.namespace,a=[],u=0,s=this.length;u<s;u++){a.push(t=[]);for(var l,c=0,f=(l=this[u]).length;c<f;c++)(e=l[c])&&wu(e,c,o,i,{time:(n=e[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return hu(a,o,i)},t.svg.axis=function(){var e,r=t.scale.linear(),i=ku,o=6,a=6,u=3,s=[10],l=null;function c(n){n.each(function(){var n,c=t.select(this),f=this.__chart__||r,d=this.__chart__=r.copy(),h=null==l?d.ticks?d.ticks.apply(d,s):d.domain():l,p=null==e?d.tickFormat?d.tickFormat.apply(d,s):L:e,g=c.selectAll(".tick").data(h,d),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",kt),m=t.transition(g.exit()).style("opacity",kt).remove(),y=t.transition(g.order()).style("opacity",1),b=Math.max(o,0)+u,x=fa(d),w=c.selectAll(".domain").data([0]),k=(w.enter().append("path").attr("class","domain"),t.transition(w));v.append("line"),v.append("text");var _,M,S,C,A=v.select("line"),D=y.select("line"),T=g.select("text").text(p),E=v.select("text"),O=y.select("text"),N="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(n=Mu,_="x",S="y",M="x2",C="y2",T.attr("dy",N<0?"0em":".71em").style("text-anchor","middle"),k.attr("d","M"+x[0]+","+N*a+"V0H"+x[1]+"V"+N*a)):(n=Su,_="y",S="x",M="y2",C="x2",T.attr("dy",".32em").style("text-anchor",N<0?"end":"start"),k.attr("d","M"+N*a+","+x[0]+"H0V"+x[1]+"H"+N*a)),A.attr(C,N*o),E.attr(S,N*b),D.attr(M,0).attr(C,N*o),O.attr(_,0).attr(S,N*b),d.rangeBand){var F=d,P=F.rangeBand()/2;f=d=function(t){return F(t)+P}}else f.rangeBand?f=d:m.call(n,d,f);v.call(n,f,d),y.call(n,d,d)})}return c.scale=function(t){return arguments.length?(r=t,c):r},c.orient=function(t){return arguments.length?(i=t in _u?t+"":ku,c):i},c.ticks=function(){return arguments.length?(s=n(arguments),c):s},c.tickValues=function(t){return arguments.length?(l=t,c):l},c.tickFormat=function(t){return arguments.length?(e=t,c):e},c.tickSize=function(t){var e=arguments.length;return e?(o=+t,a=+arguments[e-1],c):o},c.innerTickSize=function(t){return arguments.length?(o=+t,c):o},c.outerTickSize=function(t){return arguments.length?(a=+t,c):a},c.tickPadding=function(t){return arguments.length?(u=+t,c):u},c.tickSubdivide=function(){return arguments.length&&c},c};var ku="bottom",_u={top:1,right:1,bottom:1,left:1};function Mu(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Su(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}t.svg.brush=function(){var e,n,r=I(d,"brushstart","brush","brushend"),i=null,a=null,u=[0,0],s=[0,0],l=!0,c=!0,f=Au[0];function d(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v),n=e.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var r=e.selectAll(".resize").data(f,L);r.exit().remove(),r.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Cu[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),r.style("display",d.empty()?"none":null);var o,u=t.transition(e),s=t.transition(n);i&&(o=fa(i),s.attr("x",o[0]).attr("width",o[1]-o[0]),p(u)),a&&(o=fa(a),s.attr("y",o[0]).attr("height",o[1]-o[0]),g(u)),h(u)})}function h(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+u[+/e$/.test(t)]+","+s[+/^s/.test(t)]+")"})}function p(t){t.select(".extent").attr("x",u[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",u[1]-u[0])}function g(t){t.select(".extent").attr("y",s[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function v(){var f,v,m=this,y=t.select(t.event.target),b=r.of(m,arguments),x=t.select(m),w=y.datum(),k=!/^(n|s)$/.test(w)&&i,_=!/^(e|w)$/.test(w)&&a,M=y.classed("extent"),S=yt(m),C=t.mouse(m),A=t.select(o(m)).on("keydown.brush",function(){32==t.event.keyCode&&(M||(f=null,C[0]-=u[1],C[1]-=s[1],M=2),z())}).on("keyup.brush",function(){32==t.event.keyCode&&2==M&&(C[0]+=u[1],C[1]+=s[1],M=0,z())});if(t.event.changedTouches?A.on("touchmove.brush",L).on("touchend.brush",O):A.on("mousemove.brush",L).on("mouseup.brush",O),x.interrupt().selectAll("*").interrupt(),M)C[0]=u[0]-C[0],C[1]=s[0]-C[1];else if(w){var D=+/w$/.test(w),T=+/^n/.test(w);v=[u[1-D]-C[0],s[1-T]-C[1]],C[0]=u[D],C[1]=s[T]}else t.event.altKey&&(f=C.slice());function L(){var e=t.mouse(m),n=!1;v&&(e[0]+=v[0],e[1]+=v[1]),M||(t.event.altKey?(f||(f=[(u[0]+u[1])/2,(s[0]+s[1])/2]),C[0]=u[+(e[0]<f[0])],C[1]=s[+(e[1]<f[1])]):f=null),k&&E(e,i,0)&&(p(x),n=!0),_&&E(e,a,1)&&(g(x),n=!0),n&&(h(x),b({type:"brush",mode:M?"move":"resize"}))}function E(t,r,i){var o,a,d=fa(r),h=d[0],p=d[1],g=C[i],v=i?s:u,m=v[1]-v[0];if(M&&(h-=g,p-=m+g),o=(i?c:l)?Math.max(h,Math.min(p,t[i])):t[i],M?a=(o+=g)+m:(f&&(g=Math.max(h,Math.min(p,2*f[i]-o))),g<o?(a=o,o=g):a=g),v[0]!=o||v[1]!=a)return i?n=null:e=null,v[0]=o,v[1]=a,!0}function O(){L(),x.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null),t.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),S(),b({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),L()}return d.event=function(i){i.each(function(){var i=r.of(this,arguments),o={x:u,y:s,i:e,j:n},a=this.__chart__||o;this.__chart__=o,pu?t.select(this).transition().each("start.brush",function(){e=a.i,n=a.j,u=a.x,s=a.y,i({type:"brushstart"})}).tween("brush:brush",function(){var t=Zi(u,o.x),r=Zi(s,o.y);return e=n=null,function(e){u=o.x=t(e),s=o.y=r(e),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=o.i,n=o.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},d.x=function(t){return arguments.length?(f=Au[!(i=t)<<1|!a],d):i},d.y=function(t){return arguments.length?(f=Au[!i<<1|!(a=t)],d):a},d.clamp=function(t){return arguments.length?(i&&a?(l=!!t[0],c=!!t[1]):i?l=!!t:a&&(c=!!t),d):i&&a?[l,c]:i?l:a?c:null},d.extent=function(t){var r,o,l,c,f;return arguments.length?(i&&(r=t[0],o=t[1],a&&(r=r[0],o=o[0]),e=[r,o],i.invert&&(r=i(r),o=i(o)),o<r&&(f=r,r=o,o=f),r==u[0]&&o==u[1]||(u=[r,o])),a&&(l=t[0],c=t[1],i&&(l=l[1],c=c[1]),n=[l,c],a.invert&&(l=a(l),c=a(c)),c<l&&(f=l,l=c,c=f),l==s[0]&&c==s[1]||(s=[l,c])),d):(i&&(e?(r=e[0],o=e[1]):(r=u[0],o=u[1],i.invert&&(r=i.invert(r),o=i.invert(o)),o<r&&(f=r,r=o,o=f))),a&&(n?(l=n[0],c=n[1]):(l=s[0],c=s[1],a.invert&&(l=a.invert(l),c=a.invert(c)),c<l&&(f=l,l=c,c=f))),i&&a?[[r,l],[o,c]]:i?[r,o]:a&&[l,c])},d.clear=function(){return d.empty()||(u=[0,0],s=[0,0],e=n=null),d},d.empty=function(){return!!i&&u[0]==u[1]||!!a&&s[0]==s[1]},t.rebind(d,r,"on")};var Cu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Au=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Du=Oe.format=sn.timeFormat,Tu=Du.utc,Lu=Tu("%Y-%m-%dT%H:%M:%S.%LZ");function Eu(t){return t.toISOString()}function Ou(e,n,r){function i(t){return e(t)}function o(e,r){var i=(e[1]-e[0])/r,o=t.bisect(Fu,i);return o==Fu.length?[n.year,ba(e.map(function(t){return t/31536e6}),r)[2]]:o?n[i/Fu[o-1]<Fu[o]/i?o-1:o]:[zu,ba(e,r)[2]]}return i.invert=function(t){return Nu(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(Nu)},i.nice=function(t,e){var n=i.domain(),r=ca(n),a=null==t?o(r,10):"number"==typeof t&&o(r,t);function u(n){return!isNaN(n)&&!t.range(n,Nu(+n+1),e).length}return a&&(t=a[0],e=a[1]),i.domain(ha(n,e>1?{floor:function(e){for(;u(e=t.floor(e));)e=Nu(e-1);return e},ceil:function(e){for(;u(e=t.ceil(e));)e=Nu(+e+1);return e}}:t))},i.ticks=function(t,e){var n=ca(i.domain()),r=null==t?o(n,10):"number"==typeof t?o(n,t):!t.range&&[{range:t},e];return r&&(t=r[0],e=r[1]),t.range(n[0],Nu(+n[1]+1),e<1?1:e)},i.tickFormat=function(){return r},i.copy=function(){return Ou(e.copy(),n,r)},ma(i,e)}function Nu(t){return new Date(t)}Du.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Eu:Lu,Eu.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Eu.toString=Lu.toString,Oe.second=We(function(t){return new Ne(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Oe.seconds=Oe.second.range,Oe.seconds.utc=Oe.second.utc.range,Oe.minute=We(function(t){return new Ne(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Oe.minutes=Oe.minute.range,Oe.minutes.utc=Oe.minute.utc.range,Oe.hour=We(function(t){var e=t.getTimezoneOffset()/60;return new Ne(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Oe.hours=Oe.hour.range,Oe.hours.utc=Oe.hour.utc.range,Oe.month=We(function(t){return(t=Oe.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Oe.months=Oe.month.range,Oe.months.utc=Oe.month.utc.range;var Fu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Pu=[[Oe.second,1],[Oe.second,5],[Oe.second,15],[Oe.second,30],[Oe.minute,1],[Oe.minute,5],[Oe.minute,15],[Oe.minute,30],[Oe.hour,1],[Oe.hour,3],[Oe.hour,6],[Oe.hour,12],[Oe.day,1],[Oe.day,2],[Oe.week,1],[Oe.month,1],[Oe.month,3],[Oe.year,1]],Wu=Du.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",qn]]),zu={range:function(e,n,r){return t.range(Math.ceil(e/r)*r,+n,r).map(Nu)},floor:L,ceil:L};Pu.year=Oe.year,Oe.scale=function(){return Ou(t.scale.linear(),Pu,Wu)};var Ru=Pu.map(function(t){return[t[0].utc,t[1]]}),Iu=Tu.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",qn]]);function Hu(t){return JSON.parse(t.responseText)}function Yu(t){var e=r.createRange();return e.selectNode(r.body),e.createContextualFragment(t.responseText)}Ru.year=Oe.year.utc,Oe.scale.utc=function(){return Ou(t.scale.linear(),Ru,Iu)},t.text=ge(function(t){return t.responseText}),t.json=function(t,e){return ve(t,"application/json",Hu,e)},t.html=function(t,e){return ve(t,"text/html",Yu,e)},t.xml=ge(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=t,define(t)):"object"==typeof module&&module.exports?module.exports=t:this.d3=t}(),(function(){var t,e=200,n="Expected a function",r="__lodash_placeholder__",i=1,o=2,a=4,u=1,s=2,l=1,c=2,f=4,d=8,h=16,p=32,g=64,v=128,m=256,y=512,b=800,x=16,w=1/0,k=9007199254740991,_=1.7976931348623157e308,M=NaN,S=4294967295,C=S-1,A=S>>>1,D=[["ary",v],["bind",l],["bindKey",c],["curry",d],["curryRight",h],["flip",y],["partial",p],["partialRight",g],["rearg",m]],T="[object Arguments]",L="[object Array]",E="[object AsyncFunction]",O="[object Boolean]",N="[object Date]",F="[object DOMException]",P="[object Error]",W="[object Function]",z="[object GeneratorFunction]",R="[object Map]",I="[object Number]",H="[object Null]",Y="[object Object]",B="[object Proxy]",j="[object RegExp]",U="[object Set]",G="[object String]",V="[object Symbol]",q="[object Undefined]",$="[object WeakMap]",X="[object ArrayBuffer]",Z="[object DataView]",K="[object Float32Array]",Q="[object Float64Array]",J="[object Int8Array]",tt="[object Int16Array]",et="[object Int32Array]",nt="[object Uint8Array]",rt="[object Uint8ClampedArray]",it="[object Uint16Array]",ot="[object Uint32Array]",at=/\b__p \+= '';/g,ut=/\b(__p \+=) '' \+/g,st=/(__e\(.*?\)|\b__t\)) \+\n'';/g,lt=/&(?:amp|lt|gt|quot|#39);/g,ct=/[&<>"']/g,ft=RegExp(lt.source),dt=RegExp(ct.source),ht=/<%-([\s\S]+?)%>/g,pt=/<%([\s\S]+?)%>/g,gt=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mt=/^\w*$/,yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bt=/[\\^$.*+?()[\]{}|]/g,xt=RegExp(bt.source),wt=/^\s+|\s+$/g,kt=/^\s+/,_t=/\s+$/,Mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,St=/\{\n\/\* \[wrapped with (.+)\] \*/,Ct=/,? & /,At=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dt=/\\(\\)?/g,Tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lt=/\w*$/,Et=/^[-+]0x[0-9a-f]+$/i,Ot=/^0b[01]+$/i,Nt=/^\[object .+?Constructor\]$/,Ft=/^0o[0-7]+$/i,Pt=/^(?:0|[1-9]\d*)$/,Wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zt=/($^)/,Rt=/['\n\r\u2028\u2029\\]/g,It="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ht="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yt="["+Ht+"]",Bt="["+It+"]",jt="\\d+",Ut="[a-z\\xdf-\\xf6\\xf8-\\xff]",Gt="[^\\ud800-\\udfff"+Ht+jt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Vt="\\ud83c[\\udffb-\\udfff]",qt="[^\\ud800-\\udfff]",$t="(?:\\ud83c[\\udde6-\\uddff]){2}",Xt="[\\ud800-\\udbff][\\udc00-\\udfff]",Zt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Kt="(?:"+Ut+"|"+Gt+")",Qt="(?:"+Zt+"|"+Gt+")",Jt="(?:"+Bt+"|"+Vt+")?",te="[\\ufe0e\\ufe0f]?"+Jt+"(?:\\u200d(?:"+[qt,$t,Xt].join("|")+")[\\ufe0e\\ufe0f]?"+Jt+")*",ee="(?:"+["[\\u2700-\\u27bf]",$t,Xt].join("|")+")"+te,ne="(?:"+[qt+Bt+"?",Bt,$t,Xt,"[\\ud800-\\udfff]"].join("|")+")",re=RegExp("['\u2019]","g"),ie=RegExp(Bt,"g"),oe=RegExp(Vt+"(?="+Vt+")|"+ne+te,"g"),ae=RegExp([Zt+"?"+Ut+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[Yt,Zt,"$"].join("|")+")",Qt+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[Yt,Zt+Kt,"$"].join("|")+")",Zt+"?"+Kt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Zt+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jt,ee].join("|"),"g"),ue=RegExp("[\\u200d\\ud800-\\udfff"+It+"\\ufe0e\\ufe0f]"),se=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,le=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ce=-1,fe={};fe[K]=fe[Q]=fe[J]=fe[tt]=fe[et]=fe[nt]=fe[rt]=fe[it]=fe[ot]=!0,fe[T]=fe[L]=fe[X]=fe[O]=fe[Z]=fe[N]=fe[P]=fe[W]=fe[R]=fe[I]=fe[Y]=fe[j]=fe[U]=fe[G]=fe[$]=!1;var de={};de[T]=de[L]=de[X]=de[Z]=de[O]=de[N]=de[K]=de[Q]=de[J]=de[tt]=de[et]=de[R]=de[I]=de[Y]=de[j]=de[U]=de[G]=de[V]=de[nt]=de[rt]=de[it]=de[ot]=!0,de[P]=de[W]=de[$]=!1;var he={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},pe=parseFloat,ge=parseInt,ve="object"==typeof global&&global&&global.Object===Object&&global,me="object"==typeof self&&self&&self.Object===Object&&self,ye=ve||me||Function("return this")(),be="object"==typeof exports&&exports&&!exports.nodeType&&exports,xe=be&&"object"==typeof module&&module&&!module.nodeType&&module,we=xe&&xe.exports===be,ke=we&&ve.process,_e=function(){try{return xe&&xe.require&&xe.require("util").types||ke&&ke.binding&&ke.binding("util")}catch(t){}}(),Me=_e&&_e.isArrayBuffer,Se=_e&&_e.isDate,Ce=_e&&_e.isMap,Ae=_e&&_e.isRegExp,De=_e&&_e.isSet,Te=_e&&_e.isTypedArray;function Le(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ee(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Oe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ne(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Fe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Pe(t,e){return!(null==t||!t.length)&&Ge(t,e,0)>-1}function We(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function ze(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Re(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Ie(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function He(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Ye(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Be=Xe("length");function je(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function Ue(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ge(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ue(t,qe,n)}function Ve(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function qe(t){return t!=t}function $e(t,e){var n=null==t?0:t.length;return n?Qe(t,e)/n:M}function Xe(e){return function(n){return null==n?t:n[e]}}function Ze(e){return function(n){return null==e?t:e[n]}}function Ke(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function Qe(e,n){for(var r,i=-1,o=e.length;++i<o;){var a=n(e[i]);a!==t&&(r=r===t?a:r+a)}return r}function Je(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function tn(t){return function(e){return t(e)}}function en(t,e){return ze(e,function(e){return t[e]})}function nn(t,e){return t.has(e)}function rn(t,e){for(var n=-1,r=t.length;++n<r&&Ge(e,t[n],0)>-1;);return n}function on(t,e){for(var n=t.length;n--&&Ge(e,t[n],0)>-1;);return n}var an=Ze({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),un=Ze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(t){return"\\"+he[t]}function ln(t){return ue.test(t)}function cn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function fn(t,e){return function(n){return t(e(n))}}function dn(t,e){for(var n=-1,i=t.length,o=0,a=[];++n<i;){var u=t[n];u!==e&&u!==r||(t[n]=r,a[o++]=n)}return a}function hn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function pn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function gn(t){return ln(t)?function(t){for(var e=oe.lastIndex=0;oe.test(t);)++e;return e}(t):Be(t)}function vn(t){return ln(t)?function(t){return t.match(oe)||[]}(t):function(t){return t.split("")}(t)}var mn=Ze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),yn=function It(Ht){var Yt,Bt=(Ht=null==Ht?ye:yn.defaults(ye.Object(),Ht,yn.pick(ye,le))).Array,jt=Ht.Date,Ut=Ht.Error,Gt=Ht.Function,Vt=Ht.Math,qt=Ht.Object,$t=Ht.RegExp,Xt=Ht.String,Zt=Ht.TypeError,Kt=Bt.prototype,Qt=qt.prototype,Jt=Ht["__core-js_shared__"],te=Gt.prototype.toString,ee=Qt.hasOwnProperty,ne=0,oe=(Yt=/[^.]+$/.exec(Jt&&Jt.keys&&Jt.keys.IE_PROTO||""))?"Symbol(src)_1."+Yt:"",ue=Qt.toString,he=te.call(qt),ve=ye._,me=$t("^"+te.call(ee).replace(bt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=we?Ht.Buffer:t,xe=Ht.Symbol,ke=Ht.Uint8Array,_e=be?be.allocUnsafe:t,Be=fn(qt.getPrototypeOf,qt),Ze=qt.create,bn=Qt.propertyIsEnumerable,xn=Kt.splice,wn=xe?xe.isConcatSpreadable:t,kn=xe?xe.iterator:t,_n=xe?xe.toStringTag:t,Mn=function(){try{var t=_o(qt,"defineProperty");return t({},"",{}),t}catch(e){}}(),Sn=Ht.clearTimeout!==ye.clearTimeout&&Ht.clearTimeout,Cn=jt&&jt.now!==ye.Date.now&&jt.now,An=Ht.setTimeout!==ye.setTimeout&&Ht.setTimeout,Dn=Vt.ceil,Tn=Vt.floor,Ln=qt.getOwnPropertySymbols,En=be?be.isBuffer:t,On=Ht.isFinite,Nn=Kt.join,Fn=fn(qt.keys,qt),Pn=Vt.max,Wn=Vt.min,zn=jt.now,Rn=Ht.parseInt,In=Vt.random,Hn=Kt.reverse,Yn=_o(Ht,"DataView"),Bn=_o(Ht,"Map"),jn=_o(Ht,"Promise"),Un=_o(Ht,"Set"),Gn=_o(Ht,"WeakMap"),Vn=_o(qt,"create"),qn=Gn&&new Gn,$n={},Xn=Xo(Yn),Zn=Xo(Bn),Kn=Xo(jn),Qn=Xo(Un),Jn=Xo(Gn),tr=xe?xe.prototype:t,er=tr?tr.valueOf:t,nr=tr?tr.toString:t;function rr(t){if(du(t)&&!eu(t)&&!(t instanceof ur)){if(t instanceof ar)return t;if(ee.call(t,"__wrapped__"))return Zo(t)}return new ar(t)}var ir=function(){function e(){}return function(n){if(!fu(n))return{};if(Ze)return Ze(n);e.prototype=n;var r=new e;return e.prototype=t,r}}();function or(){}function ar(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}function ur(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=S,this.__views__=[]}function sr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function lr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function cr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function fr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new cr;++e<n;)this.add(t[e])}function dr(t){var e=this.__data__=new lr(t);this.size=e.size}function hr(t,e){var n=eu(t),r=!n&&tu(t),i=!n&&!r&&ou(t),o=!n&&!r&&!i&&xu(t),a=n||r||i||o,u=a?Je(t.length,Xt):[],s=u.length;for(var l in t)!e&&!ee.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Lo(l,s))||u.push(l);return u}function pr(e){var n=e.length;return n?e[si(0,n-1)]:t}function gr(e,n,r){(r===t||Ka(e[n],r))&&(r!==t||n in e)||xr(e,n,r)}function vr(e,n,r){var i=e[n];ee.call(e,n)&&Ka(i,r)&&(r!==t||n in e)||xr(e,n,r)}function mr(t,e){for(var n=t.length;n--;)if(Ka(t[n][0],e))return n;return-1}function yr(t,e,n,r){return Ar(t,function(t,i,o){e(r,t,n(t),o)}),r}function br(t,e){return t&&Yi(e,Bu(e),t)}function xr(t,e,n){"__proto__"==e&&Mn?Mn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function wr(e,n){for(var r=-1,i=n.length,o=Bt(i),a=null==e;++r<i;)o[r]=a?t:zu(e,n[r]);return o}function kr(e,n,r){return e==e&&(r!==t&&(e=e<=r?e:r),n!==t&&(e=e>=n?e:n)),e}function _r(e,n,r,u,s,l){var c,f=n&i,d=n&o,h=n&a;if(r&&(c=s?r(e,u,s,l):r(e)),c!==t)return c;if(!fu(e))return e;var p=eu(e);if(p){if(c=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ee.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!f)return Hi(e,c)}else{var g=Co(e),v=g==W||g==z;if(ou(e))return Fi(e,f);if(g==Y||g==T||v&&!s){if(c=d||v?{}:Do(e),!f)return d?function(t,e){return Yi(t,So(t),e)}(e,function(t,n){return t&&Yi(e,ju(e),t)}(c)):function(t,e){return Yi(t,Mo(t),e)}(e,br(c,e))}else{if(!de[g])return s?e:{};c=function(t,e,n){var r,i,o=t.constructor;switch(e){case X:return Pi(t);case O:case N:return new o(+t);case Z:return function(t,e){var n=e?Pi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case K:case Q:case J:case tt:case et:case nt:case rt:case it:case ot:return Wi(t,n);case R:return new o;case I:case G:return new o(t);case j:return(i=new(r=t).constructor(r.source,Lt.exec(r))).lastIndex=r.lastIndex,i;case U:return new o;case V:return er?qt(er.call(t)):{}}}(e,g,f)}}l||(l=new dr);var m=l.get(e);if(m)return m;if(l.set(e,c),mu(e))return e.forEach(function(t){c.add(_r(t,n,r,t,e,l))}),c;if(hu(e))return e.forEach(function(t,i){c.set(i,_r(t,n,r,i,e,l))}),c;var y=p?t:(h?d?vo:go:d?ju:Bu)(e);return Oe(y||e,function(t,i){y&&(t=e[i=t]),vr(c,i,_r(t,n,r,i,e,l))}),c}function Mr(e,n,r){var i=r.length;if(null==e)return!i;for(e=qt(e);i--;){var o=r[i],a=e[o];if(a===t&&!(o in e)||!(0,n[o])(a))return!1}return!0}function Sr(e,r,i){if("function"!=typeof e)throw new Zt(n);return Bo(function(){e.apply(t,i)},r)}function Cr(t,n,r,i){var o=-1,a=Pe,u=!0,s=t.length,l=[],c=n.length;if(!s)return l;r&&(n=ze(n,tn(r))),i?(a=We,u=!1):n.length>=e&&(a=nn,u=!1,n=new fr(n));t:for(;++o<s;){var f=t[o],d=null==r?f:r(f);if(f=i||0!==f?f:0,u&&d==d){for(var h=c;h--;)if(n[h]===d)continue t;l.push(f)}else a(n,d,i)||l.push(f)}return l}rr.templateSettings={escape:ht,evaluate:pt,interpolate:gt,variable:"",imports:{_:rr}},(rr.prototype=or.prototype).constructor=rr,(ar.prototype=ir(or.prototype)).constructor=ar,(ur.prototype=ir(or.prototype)).constructor=ur,sr.prototype.clear=function(){this.__data__=Vn?Vn(null):{},this.size=0},sr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},sr.prototype.get=function(e){var n=this.__data__;if(Vn){var r=n[e];return"__lodash_hash_undefined__"===r?t:r}return ee.call(n,e)?n[e]:t},sr.prototype.has=function(e){var n=this.__data__;return Vn?n[e]!==t:ee.call(n,e)},sr.prototype.set=function(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Vn&&n===t?"__lodash_hash_undefined__":n,this},lr.prototype.clear=function(){this.__data__=[],this.size=0},lr.prototype.delete=function(t){var e=this.__data__,n=mr(e,t);return!(n<0||(n==e.length-1?e.pop():xn.call(e,n,1),--this.size,0))},lr.prototype.get=function(e){var n=this.__data__,r=mr(n,e);return r<0?t:n[r][1]},lr.prototype.has=function(t){return mr(this.__data__,t)>-1},lr.prototype.set=function(t,e){var n=this.__data__,r=mr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},cr.prototype.clear=function(){this.size=0,this.__data__={hash:new sr,map:new(Bn||lr),string:new sr}},cr.prototype.delete=function(t){var e=wo(this,t).delete(t);return this.size-=e?1:0,e},cr.prototype.get=function(t){return wo(this,t).get(t)},cr.prototype.has=function(t){return wo(this,t).has(t)},cr.prototype.set=function(t,e){var n=wo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},fr.prototype.add=fr.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},fr.prototype.has=function(t){return this.__data__.has(t)},dr.prototype.clear=function(){this.__data__=new lr,this.size=0},dr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},dr.prototype.get=function(t){return this.__data__.get(t)},dr.prototype.has=function(t){return this.__data__.has(t)},dr.prototype.set=function(t,n){var r=this.__data__;if(r instanceof lr){var i=r.__data__;if(!Bn||i.length<e-1)return i.push([t,n]),this.size=++r.size,this;r=this.__data__=new cr(i)}return r.set(t,n),this.size=r.size,this};var Ar=Ui(Pr),Dr=Ui(Wr,!0);function Tr(t,e){var n=!0;return Ar(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Lr(e,n,r){for(var i=-1,o=e.length;++i<o;){var a=e[i],u=n(a);if(null!=u&&(s===t?u==u&&!bu(u):r(u,s)))var s=u,l=a}return l}function Er(t,e){var n=[];return Ar(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Or(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=To),i||(i=[]);++o<a;){var u=t[o];e>0&&n(u)?e>1?Or(u,e-1,n,r,i):Re(i,u):r||(i[i.length]=u)}return i}var Nr=Gi(),Fr=Gi(!0);function Pr(t,e){return t&&Nr(t,e,Bu)}function Wr(t,e){return t&&Fr(t,e,Bu)}function zr(t,e){return Fe(e,function(e){return su(t[e])})}function Rr(e,n){for(var r=0,i=(n=Li(n,e)).length;null!=e&&r<i;)e=e[$o(n[r++])];return r&&r==i?e:t}function Ir(t,e,n){var r=e(t);return eu(t)?r:Re(r,n(t))}function Hr(e){return null==e?e===t?q:H:_n&&_n in qt(e)?function(e){var n=ee.call(e,_n),r=e[_n];try{e[_n]=t;var i=!0}catch(a){}var o=ue.call(e);return i&&(n?e[_n]=r:delete e[_n]),o}(e):function(t){return ue.call(t)}(e)}function Yr(t,e){return t>e}function Br(t,e){return null!=t&&ee.call(t,e)}function jr(t,e){return null!=t&&e in qt(t)}function Ur(e,n,r){for(var i=r?We:Pe,o=e[0].length,a=e.length,u=a,s=Bt(a),l=1/0,c=[];u--;){var f=e[u];u&&n&&(f=ze(f,tn(n))),l=Wn(f.length,l),s[u]=!r&&(n||o>=120&&f.length>=120)?new fr(u&&f):t}f=e[0];var d=-1,h=s[0];t:for(;++d<o&&c.length<l;){var p=f[d],g=n?n(p):p;if(p=r||0!==p?p:0,!(h?nn(h,g):i(c,g,r))){for(u=a;--u;){var v=s[u];if(!(v?nn(v,g):i(e[u],g,r)))continue t}h&&h.push(g),c.push(p)}}return c}function Gr(e,n,r){var i=null==(e=Io(e,n=Li(n,e)))?e:e[$o(ua(n))];return null==i?t:Le(i,e,r)}function Vr(t){return du(t)&&Hr(t)==T}function qr(e,n,r,i,o){return e===n||(null==e||null==n||!du(e)&&!du(n)?e!=e&&n!=n:function(e,n,r,i,o,a){var l=eu(e),c=eu(n),f=l?L:Co(e),d=c?L:Co(n),h=(f=f==T?Y:f)==Y,p=(d=d==T?Y:d)==Y,g=f==d;if(g&&ou(e)){if(!ou(n))return!1;l=!0,h=!1}if(g&&!h)return a||(a=new dr),l||xu(e)?ho(e,n,r,i,o,a):function(t,e,n,r,i,o,a){switch(f){case Z:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case X:return!(t.byteLength!=e.byteLength||!o(new ke(t),new ke(e)));case O:case N:case I:return Ka(+t,+e);case P:return t.name==e.name&&t.message==e.message;case j:case G:return t==e+"";case R:var l=cn;case U:if(l||(l=hn),t.size!=e.size&&!(r&u))return!1;var c=a.get(t);if(c)return c==e;r|=s,a.set(t,e);var d=ho(l(t),l(e),r,i,o,a);return a.delete(t),d;case V:if(er)return er.call(t)==er.call(e)}return!1}(e,n,0,r,i,o,a);if(!(r&u)){var v=h&&ee.call(e,"__wrapped__"),m=p&&ee.call(n,"__wrapped__");if(v||m){var y=v?e.value():e,b=m?n.value():n;return a||(a=new dr),o(y,b,r,i,a)}}return!!g&&(a||(a=new dr),function(e,n,r,i,o,a){var s=r&u,l=go(e),c=l.length;if(c!=go(n).length&&!s)return!1;for(var f=c;f--;){var d=l[f];if(!(s?d in n:ee.call(n,d)))return!1}var h=a.get(e);if(h&&a.get(n))return h==n;var p=!0;a.set(e,n),a.set(n,e);for(var g=s;++f<c;){var v=e[d=l[f]],m=n[d];if(i)var y=s?i(m,v,d,n,e,a):i(v,m,d,e,n,a);if(!(y===t?v===m||o(v,m,r,i,a):y)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var b=e.constructor,x=n.constructor;b!=x&&"constructor"in e&&"constructor"in n&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x)&&(p=!1)}return a.delete(e),a.delete(n),p}(e,n,r,i,o,a))}(e,n,r,i,qr,o))}function $r(e,n,r,i){var o=r.length,a=o,l=!i;if(null==e)return!a;for(e=qt(e);o--;){var c=r[o];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var f=(c=r[o])[0],d=e[f],h=c[1];if(l&&c[2]){if(d===t&&!(f in e))return!1}else{var p=new dr;if(i)var g=i(d,h,f,e,n,p);if(!(g===t?qr(h,d,u|s,i,p):g))return!1}}return!0}function Xr(t){return!(!fu(t)||(e=t,oe&&oe in e))&&(su(t)?me:Nt).test(Xo(t));var e}function Zr(t){return"function"==typeof t?t:null==t?ps:"object"==typeof t?eu(t)?ei(t[0],t[1]):ti(t):_s(t)}function Kr(t){if(!Po(t))return Fn(t);var e=[];for(var n in qt(t))ee.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Qr(t,e){return t<e}function Jr(t,e){var n=-1,r=ru(t)?Bt(t.length):[];return Ar(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function ti(t){var e=ko(t);return 1==e.length&&e[0][2]?zo(e[0][0],e[0][1]):function(n){return n===t||$r(n,t,e)}}function ei(e,n){return Oo(e)&&Wo(n)?zo($o(e),n):function(r){var i=zu(r,e);return i===t&&i===n?Ru(r,e):qr(n,i,u|s)}}function ni(e,n,r,i,o){e!==n&&Nr(n,function(a,u){if(fu(a))o||(o=new dr),function(e,n,r,i,o,a,u){var s=Ho(e,r),l=Ho(n,r),c=u.get(l);if(c)gr(e,r,c);else{var f=a?a(s,l,r+"",e,n,u):t,d=f===t;if(d){var h=eu(l),p=!h&&ou(l),g=!h&&!p&&xu(l);f=l,h||p||g?eu(s)?f=s:iu(s)?f=Hi(s):p?(d=!1,f=Fi(l,!0)):g?(d=!1,f=Wi(l,!0)):f=[]:gu(l)||tu(l)?(f=s,tu(s)?f=Du(s):fu(s)&&!su(s)||(f=Do(l))):d=!1}d&&(u.set(l,f),o(f,l,i,a,u),u.delete(l)),gr(e,r,f)}}(e,n,u,r,ni,i,o);else{var s=i?i(Ho(e,u),a,u+"",e,n,o):t;s===t&&(s=a),gr(e,u,s)}},ju)}function ri(e,n){var r=e.length;if(r)return Lo(n+=n<0?r:0,r)?e[n]:t}function ii(t,e,n){var r=-1;return e=ze(e.length?e:[ps],tn(xo())),function(t,e){var r=t.length;for(t.sort(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;++r<a;){var s=zi(i[r],o[r]);if(s)return r>=u?s:s*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)});r--;)t[r]=t[r].value;return t}(Jr(t,function(t,n,i){return{criteria:ze(e,function(e){return e(t)}),index:++r,value:t}}))}function oi(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],u=Rr(t,a);n(u,a)&&fi(o,Li(a,t),u)}return o}function ai(t,e,n,r){var i=r?Ve:Ge,o=-1,a=e.length,u=t;for(t===e&&(e=Hi(e)),n&&(u=ze(t,tn(n)));++o<a;)for(var s=0,l=e[o],c=n?n(l):l;(s=i(u,c,s,r))>-1;)u!==t&&xn.call(u,s,1),xn.call(t,s,1);return t}function ui(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Lo(i)?xn.call(t,i,1):ki(t,i)}}return t}function si(t,e){return t+Tn(In()*(e-t+1))}function li(t,e){var n="";if(!t||e<1||e>k)return n;do{e%2&&(n+=t),(e=Tn(e/2))&&(t+=t)}while(e);return n}function ci(t,e){return jo(Ro(t,e,ps),t+"")}function fi(e,n,r,i){if(!fu(e))return e;for(var o=-1,a=(n=Li(n,e)).length,u=a-1,s=e;null!=s&&++o<a;){var l=$o(n[o]),c=r;if(o!=u){var f=s[l];(c=i?i(f,l,s):t)===t&&(c=fu(f)?f:Lo(n[o+1])?[]:{})}vr(s,l,c),s=s[l]}return e}var di=qn?function(t,e){return qn.set(t,e),t}:ps,hi=Mn?function(t,e){return Mn(t,"toString",{configurable:!0,enumerable:!1,value:fs(e),writable:!0})}:ps;function pi(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Bt(i);++r<i;)o[r]=t[r+e];return o}function gi(t,e){var n;return Ar(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function vi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=A){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!bu(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return mi(t,e,ps,n)}function mi(e,n,r,i){n=r(n);for(var o=0,a=null==e?0:e.length,u=n!=n,s=null===n,l=bu(n),c=n===t;o<a;){var f=Tn((o+a)/2),d=r(e[f]),h=d!==t,p=null===d,g=d==d,v=bu(d);if(u)var m=i||g;else m=c?g&&(i||h):s?g&&h&&(i||!p):l?g&&h&&!p&&(i||!v):!p&&!v&&(i?d<=n:d<n);m?o=f+1:a=f}return Wn(a,C)}function yi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],u=e?e(a):a;if(!n||!Ka(u,s)){var s=u;o[i++]=0===a?0:a}}return o}function bi(t){return"number"==typeof t?t:bu(t)?M:+t}function xi(t){if("string"==typeof t)return t;if(eu(t))return ze(t,xi)+"";if(bu(t))return nr?nr.call(t):"";var e=t+"";return"0"==e&&1/t==-w?"-0":e}function wi(t,n,r){var i=-1,o=Pe,a=t.length,u=!0,s=[],l=s;if(r)u=!1,o=We;else if(a>=e){var c=n?null:ao(t);if(c)return hn(c);u=!1,o=nn,l=new fr}else l=n?[]:s;t:for(;++i<a;){var f=t[i],d=n?n(f):f;if(f=r||0!==f?f:0,u&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue t;n&&l.push(d),s.push(f)}else o(l,d,r)||(l!==s&&l.push(d),s.push(f))}return s}function ki(t,e){return null==(t=Io(t,e=Li(e,t)))||delete t[$o(ua(e))]}function _i(t,e,n,r){return fi(t,e,n(Rr(t,e)),r)}function Mi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?pi(t,r?0:o,r?o+1:i):pi(t,r?o+1:0,r?i:o)}function Si(t,e){var n=t;return n instanceof ur&&(n=n.value()),Ie(e,function(t,e){return e.func.apply(e.thisArg,Re([t],e.args))},n)}function Ci(t,e,n){var r=t.length;if(r<2)return r?wi(t[0]):[];for(var i=-1,o=Bt(r);++i<r;)for(var a=t[i],u=-1;++u<r;)u!=i&&(o[i]=Cr(o[i]||a,t[u],e,n));return wi(Or(o,1),e,n)}function Ai(e,n,r){for(var i=-1,o=e.length,a=n.length,u={};++i<o;)r(u,e[i],i<a?n[i]:t);return u}function Di(t){return iu(t)?t:[]}function Ti(t){return"function"==typeof t?t:ps}function Li(t,e){return eu(t)?t:Oo(t,e)?[t]:qo(Tu(t))}var Ei=ci;function Oi(e,n,r){var i=e.length;return r=r===t?i:r,!n&&r>=i?e:pi(e,n,r)}var Ni=Sn||function(t){return ye.clearTimeout(t)};function Fi(t,e){if(e)return t.slice();var n=t.length,r=_e?_e(n):new t.constructor(n);return t.copy(r),r}function Pi(t){var e=new t.constructor(t.byteLength);return new ke(e).set(new ke(t)),e}function Wi(t,e){var n=e?Pi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function zi(e,n){if(e!==n){var r=e!==t,i=null===e,o=e==e,a=bu(e),u=n!==t,s=null===n,l=n==n,c=bu(n);if(!s&&!c&&!a&&e>n||a&&u&&l&&!s&&!c||i&&u&&l||!r&&l||!o)return 1;if(!i&&!a&&!c&&e<n||c&&r&&o&&!i&&!a||s&&r&&o||!u&&o||!l)return-1}return 0}function Ri(t,e,n,r){for(var i=-1,o=t.length,a=n.length,u=-1,s=e.length,l=Pn(o-a,0),c=Bt(s+l),f=!r;++u<s;)c[u]=e[u];for(;++i<a;)(f||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[u++]=t[i++];return c}function Ii(t,e,n,r){for(var i=-1,o=t.length,a=-1,u=n.length,s=-1,l=e.length,c=Pn(o-u,0),f=Bt(c+l),d=!r;++i<c;)f[i]=t[i];for(var h=i;++s<l;)f[h+s]=e[s];for(;++a<u;)(d||i<o)&&(f[h+n[a]]=t[i++]);return f}function Hi(t,e){var n=-1,r=t.length;for(e||(e=Bt(r));++n<r;)e[n]=t[n];return e}function Yi(e,n,r,i){var o=!r;r||(r={});for(var a=-1,u=n.length;++a<u;){var s=n[a],l=i?i(r[s],e[s],s,r,e):t;l===t&&(l=e[s]),o?xr(r,s,l):vr(r,s,l)}return r}function Bi(t,e){return function(n,r){var i=eu(n)?Ee:yr,o=e?e():{};return i(n,t,xo(r,2),o)}}function ji(e){return ci(function(n,r){var i=-1,o=r.length,a=o>1?r[o-1]:t,u=o>2?r[2]:t;for(a=e.length>3&&"function"==typeof a?(o--,a):t,u&&Eo(r[0],r[1],u)&&(a=o<3?t:a,o=1),n=qt(n);++i<o;){var s=r[i];s&&e(n,s,i,a)}return n})}function Ui(t,e){return function(n,r){if(null==n)return n;if(!ru(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=qt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Gi(t){return function(e,n,r){for(var i=-1,o=qt(e),a=r(e),u=a.length;u--;){var s=a[t?u:++i];if(!1===n(o[s],s,o))break}return e}}function Vi(e){return function(n){var r=ln(n=Tu(n))?vn(n):t,i=r?r[0]:n.charAt(0),o=r?Oi(r,1).join(""):n.slice(1);return i[e]()+o}}function qi(t){return function(e){return Ie(ss(ts(e).replace(re,"")),t,"")}}function $i(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ir(t.prototype),r=t.apply(n,e);return fu(r)?r:n}}function Xi(e){return function(n,r,i){var o=qt(n);if(!ru(n)){var a=xo(r,3);n=Bu(n),r=function(t){return a(o[t],t,o)}}var u=e(n,r,i);return u>-1?o[a?n[u]:u]:t}}function Zi(e){return po(function(r){var i=r.length,o=i,a=ar.prototype.thru;for(e&&r.reverse();o--;){var u=r[o];if("function"!=typeof u)throw new Zt(n);if(a&&!s&&"wrapper"==yo(u))var s=new ar([],!0)}for(o=s?o:i;++o<i;){var l=yo(u=r[o]),c="wrapper"==l?mo(u):t;s=c&&No(c[0])&&c[1]==(v|d|p|m)&&!c[4].length&&1==c[9]?s[yo(c[0])].apply(s,c[3]):1==u.length&&No(u)?s[l]():s.thru(u)}return function(){var t=arguments,e=t[0];if(s&&1==t.length&&eu(e))return s.plant(e).value();for(var n=0,o=i?r[n].apply(this,t):e;++n<i;)o=r[n].call(this,o);return o}})}function Ki(e,n,r,i,o,a,u,s,f,p){var g=n&v,m=n&l,b=n&c,x=n&(d|h),w=n&y,k=b?t:$i(e);return function l(){for(var c=arguments.length,d=Bt(c),h=c;h--;)d[h]=arguments[h];if(x)var v=bo(l),y=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(d,v);if(i&&(d=Ri(d,i,o,x)),a&&(d=Ii(d,a,u,x)),c-=y,x&&c<p){var _=dn(d,v);return io(e,n,Ki,l.placeholder,r,d,_,s,f,p-c)}var M=m?r:this,S=b?M[e]:e;return c=d.length,s?d=function(e,n){for(var r=e.length,i=Wn(n.length,r),o=Hi(e);i--;){var a=n[i];e[i]=Lo(a,r)?o[a]:t}return e}(d,s):w&&c>1&&d.reverse(),g&&f<c&&(d.length=f),this&&this!==ye&&this instanceof l&&(S=k||$i(S)),S.apply(M,d)}}function Qi(t,e){return function(n,r){return function(t,e,n,r){return Pr(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function Ji(e,n){return function(r,i){var o;if(r===t&&i===t)return n;if(r!==t&&(o=r),i!==t){if(o===t)return i;"string"==typeof r||"string"==typeof i?(r=xi(r),i=xi(i)):(r=bi(r),i=bi(i)),o=e(r,i)}return o}}function to(t){return po(function(e){return e=ze(e,tn(xo())),ci(function(n){var r=this;return t(e,function(t){return Le(t,r,n)})})})}function eo(e,n){var r=(n=n===t?" ":xi(n)).length;if(r<2)return r?li(n,e):n;var i=li(n,Dn(e/gn(n)));return ln(n)?Oi(vn(i),0,e).join(""):i.slice(0,e)}function no(e){return function(n,r,i){return i&&"number"!=typeof i&&Eo(n,r,i)&&(r=i=t),n=Mu(n),r===t?(r=n,n=0):r=Mu(r),function(t,e,n,r){for(var i=-1,o=Pn(Dn((e-t)/(n||1)),0),a=Bt(o);o--;)a[r?o:++i]=t,t+=n;return a}(n,r,i=i===t?n<r?1:-1:Mu(i),e)}}function ro(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Au(e),n=Au(n)),t(e,n)}}function io(e,n,r,i,o,a,u,s,h,v){var m=n&d;n|=m?p:g,(n&=~(m?g:p))&f||(n&=~(l|c));var y=[e,n,o,m?a:t,m?u:t,m?t:a,m?t:u,s,h,v],b=r.apply(t,y);return No(e)&&Yo(b,y),b.placeholder=i,Uo(b,e,n)}function oo(t){var e=Vt[t];return function(t,n){if(t=Au(t),n=null==n?0:Wn(Su(n),292)){var r=(Tu(t)+"e").split("e");return+((r=(Tu(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var ao=Un&&1/hn(new Un([,-0]))[1]==w?function(t){return new Un(t)}:bs;function uo(t){return function(e){var n=Co(e);return n==R?cn(e):n==U?pn(e):function(t,e){return ze(e,function(e){return[e,t[e]]})}(e,t(e))}}function so(e,i,o,a,u,s,y,b){var x=i&c;if(!x&&"function"!=typeof e)throw new Zt(n);var w=a?a.length:0;if(w||(i&=~(p|g),a=u=t),y=y===t?y:Pn(Su(y),0),b=b===t?b:Su(b),w-=u?u.length:0,i&g){var k=a,_=u;a=u=t}var M=x?t:mo(e),S=[e,i,o,a,u,k,_,s,y,b];if(M&&function(t,e){var n=t[1],i=e[1],o=n|i;if(!(o<(l|c|v)||i==v&&n==d||i==v&&n==m&&t[7].length<=e[8]||i==(v|m)&&e[7].length<=e[8]&&n==d))return t;i&l&&(t[2]=e[2],o|=n&l?0:f);var a=e[3];if(a){var u=t[3];t[3]=u?Ri(u,a,e[4]):a,t[4]=u?dn(t[3],r):e[4]}(a=e[5])&&(t[5]=(u=t[5])?Ii(u,a,e[6]):a,t[6]=u?dn(t[5],r):e[6]),(a=e[7])&&(t[7]=a),i&v&&(t[8]=null==t[8]?e[8]:Wn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o}(S,M),e=S[0],i=S[1],o=S[2],a=S[3],u=S[4],!(b=S[9]=S[9]===t?x?0:e.length:Pn(S[9]-w,0))&&i&(d|h)&&(i&=~(d|h)),i&&i!=l)C=i==d||i==h?function(e,n,r){var i=$i(e);return function o(){for(var a=arguments.length,u=Bt(a),s=a,l=bo(o);s--;)u[s]=arguments[s];var c=a<3&&u[0]!==l&&u[a-1]!==l?[]:dn(u,l);return(a-=c.length)<r?io(e,n,Ki,o.placeholder,t,u,c,t,t,r-a):Le(this&&this!==ye&&this instanceof o?i:e,this,u)}}(e,i,b):i!=p&&i!=(l|p)||u.length?Ki.apply(t,S):function(t,e,n,r){var i=e&l,o=$i(t);return function e(){for(var a=-1,u=arguments.length,s=-1,l=r.length,c=Bt(l+u),f=this&&this!==ye&&this instanceof e?o:t;++s<l;)c[s]=r[s];for(;u--;)c[s++]=arguments[++a];return Le(f,i?n:this,c)}}(e,i,o,a);else var C=function(t,e,n){var r=e&l,i=$i(t);return function e(){return(this&&this!==ye&&this instanceof e?i:t).apply(r?n:this,arguments)}}(e,i,o);return Uo((M?di:Yo)(C,S),e,i)}function lo(e,n,r,i){return e===t||Ka(e,Qt[r])&&!ee.call(i,r)?n:e}function co(e,n,r,i,o,a){return fu(e)&&fu(n)&&(a.set(n,e),ni(e,n,t,co,a),a.delete(n)),e}function fo(e){return gu(e)?t:e}function ho(e,n,r,i,o,a){var l=r&u,c=e.length,f=n.length;if(c!=f&&!(l&&f>c))return!1;var d=a.get(e);if(d&&a.get(n))return d==n;var h=-1,p=!0,g=r&s?new fr:t;for(a.set(e,n),a.set(n,e);++h<c;){var v=e[h],m=n[h];if(i)var y=l?i(m,v,h,n,e,a):i(v,m,h,e,n,a);if(y!==t){if(y)continue;p=!1;break}if(g){if(!Ye(n,function(t,e){if(!nn(g,e)&&(v===t||o(v,t,r,i,a)))return g.push(e)})){p=!1;break}}else if(v!==m&&!o(v,m,r,i,a)){p=!1;break}}return a.delete(e),a.delete(n),p}function po(e){return jo(Ro(e,t,na),e+"")}function go(t){return Ir(t,Bu,Mo)}function vo(t){return Ir(t,ju,So)}var mo=qn?function(t){return qn.get(t)}:bs;function yo(t){for(var e=t.name+"",n=$n[e],r=ee.call($n,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function bo(t){return(ee.call(rr,"placeholder")?rr:t).placeholder}function xo(){var t=rr.iteratee||gs;return t=t===gs?Zr:t,arguments.length?t(arguments[0],arguments[1]):t}function wo(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function ko(t){for(var e=Bu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Wo(i)]}return e}function _o(e,n){var r=function(e,n){return null==e?t:e[n]}(e,n);return Xr(r)?r:t}var Mo=Ln?function(t){return null==t?[]:(t=qt(t),Fe(Ln(t),function(e){return bn.call(t,e)}))}:Cs,So=Ln?function(t){for(var e=[];t;)Re(e,Mo(t)),t=Be(t);return e}:Cs,Co=Hr;function Ao(t,e,n){for(var r=-1,i=(e=Li(e,t)).length,o=!1;++r<i;){var a=$o(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&cu(i)&&Lo(a,i)&&(eu(t)||tu(t))}function Do(t){return"function"!=typeof t.constructor||Po(t)?{}:ir(Be(t))}function To(t){return eu(t)||tu(t)||!!(wn&&t&&t[wn])}function Lo(t,e){var n=typeof t;return!!(e=null==e?k:e)&&("number"==n||"symbol"!=n&&Pt.test(t))&&t>-1&&t%1==0&&t<e}function Eo(t,e,n){if(!fu(n))return!1;var r=typeof e;return!!("number"==r?ru(n)&&Lo(e,n.length):"string"==r&&e in n)&&Ka(n[e],t)}function Oo(t,e){if(eu(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!bu(t))||mt.test(t)||!vt.test(t)||null!=e&&t in qt(e)}function No(t){var e=yo(t),n=rr[e];if("function"!=typeof n||!(e in ur.prototype))return!1;if(t===n)return!0;var r=mo(n);return!!r&&t===r[0]}(Yn&&Co(new Yn(new ArrayBuffer(1)))!=Z||Bn&&Co(new Bn)!=R||jn&&"[object Promise]"!=Co(jn.resolve())||Un&&Co(new Un)!=U||Gn&&Co(new Gn)!=$)&&(Co=function(e){var n=Hr(e),r=n==Y?e.constructor:t,i=r?Xo(r):"";if(i)switch(i){case Xn:return Z;case Zn:return R;case Kn:return"[object Promise]";case Qn:return U;case Jn:return $}return n});var Fo=Jt?su:As;function Po(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Qt)}function Wo(t){return t==t&&!fu(t)}function zo(e,n){return function(r){return null!=r&&r[e]===n&&(n!==t||e in qt(r))}}function Ro(e,n,r){return n=Pn(n===t?e.length-1:n,0),function(){for(var t=arguments,i=-1,o=Pn(t.length-n,0),a=Bt(o);++i<o;)a[i]=t[n+i];i=-1;for(var u=Bt(n+1);++i<n;)u[i]=t[i];return u[n]=r(a),Le(e,this,u)}}function Io(t,e){return e.length<2?t:Rr(t,pi(e,0,-1))}function Ho(t,e){if("__proto__"!=e)return t[e]}var Yo=Go(di),Bo=An||function(t,e){return ye.setTimeout(t,e)},jo=Go(hi);function Uo(t,e,n){var r=e+"";return jo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Mt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Oe(D,function(n){var r="_."+n[0];e&n[1]&&!Pe(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(St);return e?e[1].split(Ct):[]}(r),n)))}function Go(e){var n=0,r=0;return function(){var i=zn(),o=x-(i-r);if(r=i,o>0){if(++n>=b)return arguments[0]}else n=0;return e.apply(t,arguments)}}function Vo(e,n){var r=-1,i=e.length,o=i-1;for(n=n===t?i:n;++r<n;){var a=si(r,o),u=e[a];e[a]=e[r],e[r]=u}return e.length=n,e}var qo=function(t){var e=Ga(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(yt,function(t,n,r,i){e.push(r?i.replace(Dt,"$1"):n||t)}),e},function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}();function $o(t){if("string"==typeof t||bu(t))return t;var e=t+"";return"0"==e&&1/t==-w?"-0":e}function Xo(t){if(null!=t){try{return te.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Zo(t){if(t instanceof ur)return t.clone();var e=new ar(t.__wrapped__,t.__chain__);return e.__actions__=Hi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ko=ci(function(t,e){return iu(t)?Cr(t,Or(e,1,iu,!0)):[]}),Qo=ci(function(e,n){var r=ua(n);return iu(r)&&(r=t),iu(e)?Cr(e,Or(n,1,iu,!0),xo(r,2)):[]}),Jo=ci(function(e,n){var r=ua(n);return iu(r)&&(r=t),iu(e)?Cr(e,Or(n,1,iu,!0),t,r):[]});function ta(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Su(n);return i<0&&(i=Pn(r+i,0)),Ue(t,xo(e,3),i)}function ea(e,n,r){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return r!==t&&(o=Su(r),o=r<0?Pn(i+o,0):Wn(o,i-1)),Ue(e,xo(n,3),o,!0)}function na(t){return null!=t&&t.length?Or(t,1):[]}function ra(e){return e&&e.length?e[0]:t}var ia=ci(function(t){var e=ze(t,Di);return e.length&&e[0]===t[0]?Ur(e):[]}),oa=ci(function(e){var n=ua(e),r=ze(e,Di);return n===ua(r)?n=t:r.pop(),r.length&&r[0]===e[0]?Ur(r,xo(n,2)):[]}),aa=ci(function(e){var n=ua(e),r=ze(e,Di);return(n="function"==typeof n?n:t)&&r.pop(),r.length&&r[0]===e[0]?Ur(r,t,n):[]});function ua(e){var n=null==e?0:e.length;return n?e[n-1]:t}var sa=ci(la);function la(t,e){return t&&t.length&&e&&e.length?ai(t,e):t}var ca=po(function(t,e){var n=null==t?0:t.length,r=wr(t,e);return ui(t,ze(e,function(t){return Lo(t,n)?+t:t}).sort(zi)),r});function fa(t){return null==t?t:Hn.call(t)}var da=ci(function(t){return wi(Or(t,1,iu,!0))}),ha=ci(function(e){var n=ua(e);return iu(n)&&(n=t),wi(Or(e,1,iu,!0),xo(n,2))}),pa=ci(function(e){var n=ua(e);return n="function"==typeof n?n:t,wi(Or(e,1,iu,!0),t,n)});function ga(t){if(!t||!t.length)return[];var e=0;return t=Fe(t,function(t){if(iu(t))return e=Pn(t.length,e),!0}),Je(e,function(e){return ze(t,Xe(e))})}function va(e,n){if(!e||!e.length)return[];var r=ga(e);return null==n?r:ze(r,function(e){return Le(n,t,e)})}var ma=ci(function(t,e){return iu(t)?Cr(t,e):[]}),ya=ci(function(t){return Ci(Fe(t,iu))}),ba=ci(function(e){var n=ua(e);return iu(n)&&(n=t),Ci(Fe(e,iu),xo(n,2))}),xa=ci(function(e){var n=ua(e);return n="function"==typeof n?n:t,Ci(Fe(e,iu),t,n)}),wa=ci(ga),ka=ci(function(e){var n=e.length,r=n>1?e[n-1]:t;return r="function"==typeof r?(e.pop(),r):t,va(e,r)});function _a(t){var e=rr(t);return e.__chain__=!0,e}function Ma(t,e){return e(t)}var Sa=po(function(e){var n=e.length,r=n?e[0]:0,i=this.__wrapped__,o=function(t){return wr(t,e)};return!(n>1||this.__actions__.length)&&i instanceof ur&&Lo(r)?((i=i.slice(r,+r+(n?1:0))).__actions__.push({func:Ma,args:[o],thisArg:t}),new ar(i,this.__chain__).thru(function(e){return n&&!e.length&&e.push(t),e})):this.thru(o)}),Ca=Bi(function(t,e,n){ee.call(t,n)?++t[n]:xr(t,n,1)}),Aa=Xi(ta),Da=Xi(ea);function Ta(t,e){return(eu(t)?Oe:Ar)(t,xo(e,3))}function La(t,e){return(eu(t)?function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}:Dr)(t,xo(e,3))}var Ea=Bi(function(t,e,n){ee.call(t,n)?t[n].push(e):xr(t,n,[e])}),Oa=ci(function(t,e,n){var r=-1,i="function"==typeof e,o=ru(t)?Bt(t.length):[];return Ar(t,function(t){o[++r]=i?Le(e,t,n):Gr(t,e,n)}),o}),Na=Bi(function(t,e,n){xr(t,n,e)});function Fa(t,e){return(eu(t)?ze:Jr)(t,xo(e,3))}var Pa=Bi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Wa=ci(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Eo(t,e[0],e[1])?e=[]:n>2&&Eo(e[0],e[1],e[2])&&(e=[e[0]]),ii(t,Or(e,1),[])}),za=Cn||function(){return ye.Date.now()};function Ra(e,n,r){return n=r?t:n,so(e,v,t,t,t,t,n=e&&null==n?e.length:n)}function Ia(e,r){var i;if("function"!=typeof r)throw new Zt(n);return e=Su(e),function(){return--e>0&&(i=r.apply(this,arguments)),e<=1&&(r=t),i}}var Ha=ci(function(t,e,n){var r=l;if(n.length){var i=dn(n,bo(Ha));r|=p}return so(t,r,e,n,i)}),Ya=ci(function(t,e,n){var r=l|c;if(n.length){var i=dn(n,bo(Ya));r|=p}return so(e,r,t,n,i)});function Ba(e,r,i){var o,a,u,s,l,c,f=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new Zt(n);function g(n){var r=o,i=a;return o=a=t,f=n,s=e.apply(i,r)}function v(e){var n=e-c;return c===t||n>=r||n<0||h&&e-f>=u}function m(){var t=za();if(v(t))return y(t);l=Bo(m,function(t){var e=r-(t-c);return h?Wn(e,u-(t-f)):e}(t))}function y(e){return l=t,p&&o?g(e):(o=a=t,s)}function b(){var e=za(),n=v(e);if(o=arguments,a=this,c=e,n){if(l===t)return function(t){return f=t,l=Bo(m,r),d?g(t):s}(c);if(h)return l=Bo(m,r),g(c)}return l===t&&(l=Bo(m,r)),s}return r=Au(r)||0,fu(i)&&(d=!!i.leading,u=(h="maxWait"in i)?Pn(Au(i.maxWait)||0,r):u,p="trailing"in i?!!i.trailing:p),b.cancel=function(){l!==t&&Ni(l),f=0,o=c=a=l=t},b.flush=function(){return l===t?s:y(za())},b}var ja=ci(function(t,e){return Sr(t,1,e)}),Ua=ci(function(t,e,n){return Sr(t,Au(e)||0,n)});function Ga(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Zt(n);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(Ga.Cache||cr),r}function Va(t){if("function"!=typeof t)throw new Zt(n);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ga.Cache=cr;var qa=Ei(function(t,e){var n=(e=1==e.length&&eu(e[0])?ze(e[0],tn(xo())):ze(Or(e,1),tn(xo()))).length;return ci(function(r){for(var i=-1,o=Wn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Le(t,this,r)})}),$a=ci(function(e,n){var r=dn(n,bo($a));return so(e,p,t,n,r)}),Xa=ci(function(e,n){var r=dn(n,bo(Xa));return so(e,g,t,n,r)}),Za=po(function(e,n){return so(e,m,t,t,t,n)});function Ka(t,e){return t===e||t!=t&&e!=e}var Qa=ro(Yr),Ja=ro(function(t,e){return t>=e}),tu=Vr(function(){return arguments}())?Vr:function(t){return du(t)&&ee.call(t,"callee")&&!bn.call(t,"callee")},eu=Bt.isArray,nu=Me?tn(Me):function(t){return du(t)&&Hr(t)==X};function ru(t){return null!=t&&cu(t.length)&&!su(t)}function iu(t){return du(t)&&ru(t)}var ou=En||As,au=Se?tn(Se):function(t){return du(t)&&Hr(t)==N};function uu(t){if(!du(t))return!1;var e=Hr(t);return e==P||e==F||"string"==typeof t.message&&"string"==typeof t.name&&!gu(t)}function su(t){if(!fu(t))return!1;var e=Hr(t);return e==W||e==z||e==E||e==B}function lu(t){return"number"==typeof t&&t==Su(t)}function cu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=k}function fu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function du(t){return null!=t&&"object"==typeof t}var hu=Ce?tn(Ce):function(t){return du(t)&&Co(t)==R};function pu(t){return"number"==typeof t||du(t)&&Hr(t)==I}function gu(t){if(!du(t)||Hr(t)!=Y)return!1;var e=Be(t);if(null===e)return!0;var n=ee.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&te.call(n)==he}var vu=Ae?tn(Ae):function(t){return du(t)&&Hr(t)==j},mu=De?tn(De):function(t){return du(t)&&Co(t)==U};function yu(t){return"string"==typeof t||!eu(t)&&du(t)&&Hr(t)==G}function bu(t){return"symbol"==typeof t||du(t)&&Hr(t)==V}var xu=Te?tn(Te):function(t){return du(t)&&cu(t.length)&&!!fe[Hr(t)]},wu=ro(Qr),ku=ro(function(t,e){return t<=e});function _u(t){if(!t)return[];if(ru(t))return yu(t)?vn(t):Hi(t);if(kn&&t[kn])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[kn]());var e=Co(t);return(e==R?cn:e==U?hn:Ku)(t)}function Mu(t){return t?(t=Au(t))===w||t===-w?(t<0?-1:1)*_:t==t?t:0:0===t?t:0}function Su(t){var e=Mu(t),n=e%1;return e==e?n?e-n:e:0}function Cu(t){return t?kr(Su(t),0,S):0}function Au(t){if("number"==typeof t)return t;if(bu(t))return M;if(fu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=fu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(wt,"");var n=Ot.test(t);return n||Ft.test(t)?ge(t.slice(2),n?2:8):Et.test(t)?M:+t}function Du(t){return Yi(t,ju(t))}function Tu(t){return null==t?"":xi(t)}var Lu=ji(function(t,e){if(Po(e)||ru(e))Yi(e,Bu(e),t);else for(var n in e)ee.call(e,n)&&vr(t,n,e[n])}),Eu=ji(function(t,e){Yi(e,ju(e),t)}),Ou=ji(function(t,e,n,r){Yi(e,ju(e),t,r)}),Nu=ji(function(t,e,n,r){Yi(e,Bu(e),t,r)}),Fu=po(wr),Pu=ci(function(e,n){e=qt(e);var r=-1,i=n.length,o=i>2?n[2]:t;for(o&&Eo(n[0],n[1],o)&&(i=1);++r<i;)for(var a=n[r],u=ju(a),s=-1,l=u.length;++s<l;){var c=u[s],f=e[c];(f===t||Ka(f,Qt[c])&&!ee.call(e,c))&&(e[c]=a[c])}return e}),Wu=ci(function(e){return e.push(t,co),Le(Gu,t,e)});function zu(e,n,r){var i=null==e?t:Rr(e,n);return i===t?r:i}function Ru(t,e){return null!=t&&Ao(t,e,jr)}var Iu=Qi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=ue.call(e)),t[e]=n},fs(ps)),Hu=Qi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=ue.call(e)),ee.call(t,e)?t[e].push(n):t[e]=[n]},xo),Yu=ci(Gr);function Bu(t){return ru(t)?hr(t):Kr(t)}function ju(t){return ru(t)?hr(t,!0):function(t){if(!fu(t))return function(t){var e=[];if(null!=t)for(var n in qt(t))e.push(n);return e}(t);var e=Po(t),n=[];for(var r in t)("constructor"!=r||!e&&ee.call(t,r))&&n.push(r);return n}(t)}var Uu=ji(function(t,e,n){ni(t,e,n)}),Gu=ji(function(t,e,n,r){ni(t,e,n,r)}),Vu=po(function(t,e){var n={};if(null==t)return n;var r=!1;e=ze(e,function(e){return e=Li(e,t),r||(r=e.length>1),e}),Yi(t,vo(t),n),r&&(n=_r(n,i|o|a,fo));for(var u=e.length;u--;)ki(n,e[u]);return n}),qu=po(function(t,e){return null==t?{}:function(t,e){return oi(t,e,function(e,n){return Ru(t,n)})}(t,e)});function $u(t,e){if(null==t)return{};var n=ze(vo(t),function(t){return[t]});return e=xo(e),oi(t,n,function(t,n){return e(t,n[0])})}var Xu=uo(Bu),Zu=uo(ju);function Ku(t){return null==t?[]:en(t,Bu(t))}var Qu=qi(function(t,e,n){return e=e.toLowerCase(),t+(n?Ju(e):e)});function Ju(t){return us(Tu(t).toLowerCase())}function ts(t){return(t=Tu(t))&&t.replace(Wt,an).replace(ie,"")}var es=qi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),ns=qi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),rs=Vi("toLowerCase"),is=qi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),os=qi(function(t,e,n){return t+(n?" ":"")+us(e)}),as=qi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),us=Vi("toUpperCase");function ss(e,n,r){return e=Tu(e),(n=r?t:n)===t?function(t){return se.test(t)}(e)?function(t){return t.match(ae)||[]}(e):function(t){return t.match(At)||[]}(e):e.match(n)||[]}var ls=ci(function(e,n){try{return Le(e,t,n)}catch(r){return uu(r)?r:new Ut(r)}}),cs=po(function(t,e){return Oe(e,function(e){e=$o(e),xr(t,e,Ha(t[e],t))}),t});function fs(t){return function(){return t}}var ds=Zi(),hs=Zi(!0);function ps(t){return t}function gs(t){return Zr("function"==typeof t?t:_r(t,i))}var vs=ci(function(t,e){return function(n){return Gr(n,t,e)}}),ms=ci(function(t,e){return function(n){return Gr(t,n,e)}});function ys(t,e,n){var r=Bu(e),i=zr(e,r);null!=n||fu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=zr(e,Bu(e)));var o=!(fu(n)&&"chain"in n&&!n.chain),a=su(t);return Oe(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Hi(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Re([this.value()],arguments))})}),t}function bs(){}var xs=to(ze),ws=to(Ne),ks=to(Ye);function _s(t){return Oo(t)?Xe($o(t)):function(t){return function(e){return Rr(e,t)}}(t)}var Ms=no(),Ss=no(!0);function Cs(){return[]}function As(){return!1}var Ds,Ts=Ji(function(t,e){return t+e},0),Ls=oo("ceil"),Es=Ji(function(t,e){return t/e},1),Os=oo("floor"),Ns=Ji(function(t,e){return t*e},1),Fs=oo("round"),Ps=Ji(function(t,e){return t-e},0);return rr.after=function(t,e){if("function"!=typeof e)throw new Zt(n);return t=Su(t),function(){if(--t<1)return e.apply(this,arguments)}},rr.ary=Ra,rr.assign=Lu,rr.assignIn=Eu,rr.assignInWith=Ou,rr.assignWith=Nu,rr.at=Fu,rr.before=Ia,rr.bind=Ha,rr.bindAll=cs,rr.bindKey=Ya,rr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return eu(t)?t:[t]},rr.chain=_a,rr.chunk=function(e,n,r){n=(r?Eo(e,n,r):n===t)?1:Pn(Su(n),0);var i=null==e?0:e.length;if(!i||n<1)return[];for(var o=0,a=0,u=Bt(Dn(i/n));o<i;)u[a++]=pi(e,o,o+=n);return u},rr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},rr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Bt(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Re(eu(n)?Hi(n):[n],Or(e,1))},rr.cond=function(t){var e=null==t?0:t.length,r=xo();return t=e?ze(t,function(t){if("function"!=typeof t[1])throw new Zt(n);return[r(t[0]),t[1]]}):[],ci(function(n){for(var r=-1;++r<e;){var i=t[r];if(Le(i[0],this,n))return Le(i[1],this,n)}})},rr.conforms=function(t){return function(t){var e=Bu(t);return function(n){return Mr(n,t,e)}}(_r(t,i))},rr.constant=fs,rr.countBy=Ca,rr.create=function(t,e){var n=ir(t);return null==e?n:br(n,e)},rr.curry=function e(n,r,i){var o=so(n,d,t,t,t,t,t,r=i?t:r);return o.placeholder=e.placeholder,o},rr.curryRight=function e(n,r,i){var o=so(n,h,t,t,t,t,t,r=i?t:r);return o.placeholder=e.placeholder,o},rr.debounce=Ba,rr.defaults=Pu,rr.defaultsDeep=Wu,rr.defer=ja,rr.delay=Ua,rr.difference=Ko,rr.differenceBy=Qo,rr.differenceWith=Jo,rr.drop=function(e,n,r){var i=null==e?0:e.length;return i?pi(e,(n=r||n===t?1:Su(n))<0?0:n,i):[]},rr.dropRight=function(e,n,r){var i=null==e?0:e.length;return i?pi(e,0,(n=i-(n=r||n===t?1:Su(n)))<0?0:n):[]},rr.dropRightWhile=function(t,e){return t&&t.length?Mi(t,xo(e,3),!0,!0):[]},rr.dropWhile=function(t,e){return t&&t.length?Mi(t,xo(e,3),!0):[]},rr.fill=function(e,n,r,i){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&Eo(e,n,r)&&(r=0,i=o),function(e,n,r,i){var o=e.length;for((r=Su(r))<0&&(r=-r>o?0:o+r),(i=i===t||i>o?o:Su(i))<0&&(i+=o),i=r>i?0:Cu(i);r<i;)e[r++]=n;return e}(e,n,r,i)):[]},rr.filter=function(t,e){return(eu(t)?Fe:Er)(t,xo(e,3))},rr.flatMap=function(t,e){return Or(Fa(t,e),1)},rr.flatMapDeep=function(t,e){return Or(Fa(t,e),w)},rr.flatMapDepth=function(e,n,r){return r=r===t?1:Su(r),Or(Fa(e,n),r)},rr.flatten=na,rr.flattenDeep=function(t){return null!=t&&t.length?Or(t,w):[]},rr.flattenDepth=function(e,n){return null!=e&&e.length?Or(e,n=n===t?1:Su(n)):[]},rr.flip=function(t){return so(t,y)},rr.flow=ds,rr.flowRight=hs,rr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},rr.functions=function(t){return null==t?[]:zr(t,Bu(t))},rr.functionsIn=function(t){return null==t?[]:zr(t,ju(t))},rr.groupBy=Ea,rr.initial=function(t){return null!=t&&t.length?pi(t,0,-1):[]},rr.intersection=ia,rr.intersectionBy=oa,rr.intersectionWith=aa,rr.invert=Iu,rr.invertBy=Hu,rr.invokeMap=Oa,rr.iteratee=gs,rr.keyBy=Na,rr.keys=Bu,rr.keysIn=ju,rr.map=Fa,rr.mapKeys=function(t,e){var n={};return e=xo(e,3),Pr(t,function(t,r,i){xr(n,e(t,r,i),t)}),n},rr.mapValues=function(t,e){var n={};return e=xo(e,3),Pr(t,function(t,r,i){xr(n,r,e(t,r,i))}),n},rr.matches=function(t){return ti(_r(t,i))},rr.matchesProperty=function(t,e){return ei(t,_r(e,i))},rr.memoize=Ga,rr.merge=Uu,rr.mergeWith=Gu,rr.method=vs,rr.methodOf=ms,rr.mixin=ys,rr.negate=Va,rr.nthArg=function(t){return t=Su(t),ci(function(e){return ri(e,t)})},rr.omit=Vu,rr.omitBy=function(t,e){return $u(t,Va(xo(e)))},rr.once=function(t){return Ia(2,t)},rr.orderBy=function(e,n,r,i){return null==e?[]:(eu(n)||(n=null==n?[]:[n]),eu(r=i?t:r)||(r=null==r?[]:[r]),ii(e,n,r))},rr.over=xs,rr.overArgs=qa,rr.overEvery=ws,rr.overSome=ks,rr.partial=$a,rr.partialRight=Xa,rr.partition=Pa,rr.pick=qu,rr.pickBy=$u,rr.property=_s,rr.propertyOf=function(e){return function(n){return null==e?t:Rr(e,n)}},rr.pull=sa,rr.pullAll=la,rr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?ai(t,e,xo(n,2)):t},rr.pullAllWith=function(e,n,r){return e&&e.length&&n&&n.length?ai(e,n,t,r):e},rr.pullAt=ca,rr.range=Ms,rr.rangeRight=Ss,rr.rearg=Za,rr.reject=function(t,e){return(eu(t)?Fe:Er)(t,Va(xo(e,3)))},rr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=xo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return ui(t,i),n},rr.rest=function(e,r){if("function"!=typeof e)throw new Zt(n);return ci(e,r=r===t?r:Su(r))},rr.reverse=fa,rr.sampleSize=function(e,n,r){return n=(r?Eo(e,n,r):n===t)?1:Su(n),(eu(e)?function(t,e){return Vo(Hi(t),kr(e,0,t.length))}:function(t,e){var n=Ku(t);return Vo(n,kr(e,0,n.length))})(e,n)},rr.set=function(t,e,n){return null==t?t:fi(t,e,n)},rr.setWith=function(e,n,r,i){return i="function"==typeof i?i:t,null==e?e:fi(e,n,r,i)},rr.shuffle=function(t){return(eu(t)?function(t){return Vo(Hi(t))}:function(t){return Vo(Ku(t))})(t)},rr.slice=function(e,n,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&Eo(e,n,r)?(n=0,r=i):(n=null==n?0:Su(n),r=r===t?i:Su(r)),pi(e,n,r)):[]},rr.sortBy=Wa,rr.sortedUniq=function(t){return t&&t.length?yi(t):[]},rr.sortedUniqBy=function(t,e){return t&&t.length?yi(t,xo(e,2)):[]},rr.split=function(e,n,r){return r&&"number"!=typeof r&&Eo(e,n,r)&&(n=r=t),(r=r===t?S:r>>>0)?(e=Tu(e))&&("string"==typeof n||null!=n&&!vu(n))&&!(n=xi(n))&&ln(e)?Oi(vn(e),0,r):e.split(n,r):[]},rr.spread=function(t,e){if("function"!=typeof t)throw new Zt(n);return e=null==e?0:Pn(Su(e),0),ci(function(n){var r=n[e],i=Oi(n,0,e);return r&&Re(i,r),Le(t,this,i)})},rr.tail=function(t){var e=null==t?0:t.length;return e?pi(t,1,e):[]},rr.take=function(e,n,r){return e&&e.length?pi(e,0,(n=r||n===t?1:Su(n))<0?0:n):[]},rr.takeRight=function(e,n,r){var i=null==e?0:e.length;return i?pi(e,(n=i-(n=r||n===t?1:Su(n)))<0?0:n,i):[]},rr.takeRightWhile=function(t,e){return t&&t.length?Mi(t,xo(e,3),!1,!0):[]},rr.takeWhile=function(t,e){return t&&t.length?Mi(t,xo(e,3)):[]},rr.tap=function(t,e){return e(t),t},rr.throttle=function(t,e,r){var i=!0,o=!0;if("function"!=typeof t)throw new Zt(n);return fu(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),Ba(t,e,{leading:i,maxWait:e,trailing:o})},rr.thru=Ma,rr.toArray=_u,rr.toPairs=Xu,rr.toPairsIn=Zu,rr.toPath=function(t){return eu(t)?ze(t,$o):bu(t)?[t]:Hi(qo(Tu(t)))},rr.toPlainObject=Du,rr.transform=function(t,e,n){var r=eu(t),i=r||ou(t)||xu(t);if(e=xo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:fu(t)&&su(o)?ir(Be(t)):{}}return(i?Oe:Pr)(t,function(t,r,i){return e(n,t,r,i)}),n},rr.unary=function(t){return Ra(t,1)},rr.union=da,rr.unionBy=ha,rr.unionWith=pa,rr.uniq=function(t){return t&&t.length?wi(t):[]},rr.uniqBy=function(t,e){return t&&t.length?wi(t,xo(e,2)):[]},rr.uniqWith=function(e,n){return n="function"==typeof n?n:t,e&&e.length?wi(e,t,n):[]},rr.unset=function(t,e){return null==t||ki(t,e)},rr.unzip=ga,rr.unzipWith=va,rr.update=function(t,e,n){return null==t?t:_i(t,e,Ti(n))},rr.updateWith=function(e,n,r,i){return i="function"==typeof i?i:t,null==e?e:_i(e,n,Ti(r),i)},rr.values=Ku,rr.valuesIn=function(t){return null==t?[]:en(t,ju(t))},rr.without=ma,rr.words=ss,rr.wrap=function(t,e){return $a(Ti(e),t)},rr.xor=ya,rr.xorBy=ba,rr.xorWith=xa,rr.zip=wa,rr.zipObject=function(t,e){return Ai(t||[],e||[],vr)},rr.zipObjectDeep=function(t,e){return Ai(t||[],e||[],fi)},rr.zipWith=ka,rr.entries=Xu,rr.entriesIn=Zu,rr.extend=Eu,rr.extendWith=Ou,ys(rr,rr),rr.add=Ts,rr.attempt=ls,rr.camelCase=Qu,rr.capitalize=Ju,rr.ceil=Ls,rr.clamp=function(e,n,r){return r===t&&(r=n,n=t),r!==t&&(r=(r=Au(r))==r?r:0),n!==t&&(n=(n=Au(n))==n?n:0),kr(Au(e),n,r)},rr.clone=function(t){return _r(t,a)},rr.cloneDeep=function(t){return _r(t,i|a)},rr.cloneDeepWith=function(e,n){return _r(e,i|a,n="function"==typeof n?n:t)},rr.cloneWith=function(e,n){return _r(e,a,n="function"==typeof n?n:t)},rr.conformsTo=function(t,e){return null==e||Mr(t,e,Bu(e))},rr.deburr=ts,rr.defaultTo=function(t,e){return null==t||t!=t?e:t},rr.divide=Es,rr.endsWith=function(e,n,r){e=Tu(e),n=xi(n);var i=e.length,o=r=r===t?i:kr(Su(r),0,i);return(r-=n.length)>=0&&e.slice(r,o)==n},rr.eq=Ka,rr.escape=function(t){return(t=Tu(t))&&dt.test(t)?t.replace(ct,un):t},rr.escapeRegExp=function(t){return(t=Tu(t))&&xt.test(t)?t.replace(bt,"\\$&"):t},rr.every=function(e,n,r){var i=eu(e)?Ne:Tr;return r&&Eo(e,n,r)&&(n=t),i(e,xo(n,3))},rr.find=Aa,rr.findIndex=ta,rr.findKey=function(t,e){return je(t,xo(e,3),Pr)},rr.findLast=Da,rr.findLastIndex=ea,rr.findLastKey=function(t,e){return je(t,xo(e,3),Wr)},rr.floor=Os,rr.forEach=Ta,rr.forEachRight=La,rr.forIn=function(t,e){return null==t?t:Nr(t,xo(e,3),ju)},rr.forInRight=function(t,e){return null==t?t:Fr(t,xo(e,3),ju)},rr.forOwn=function(t,e){return t&&Pr(t,xo(e,3))},rr.forOwnRight=function(t,e){return t&&Wr(t,xo(e,3))},rr.get=zu,rr.gt=Qa,rr.gte=Ja,rr.has=function(t,e){return null!=t&&Ao(t,e,Br)},rr.hasIn=Ru,rr.head=ra,rr.identity=ps,rr.includes=function(t,e,n,r){t=ru(t)?t:Ku(t),n=n&&!r?Su(n):0;var i=t.length;return n<0&&(n=Pn(i+n,0)),yu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ge(t,e,n)>-1},rr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Su(n);return i<0&&(i=Pn(r+i,0)),Ge(t,e,i)},rr.inRange=function(e,n,r){return n=Mu(n),r===t?(r=n,n=0):r=Mu(r),function(t,e,n){return t>=Wn(e,n)&&t<Pn(e,n)}(e=Au(e),n,r)},rr.invoke=Yu,rr.isArguments=tu,rr.isArray=eu,rr.isArrayBuffer=nu,rr.isArrayLike=ru,rr.isArrayLikeObject=iu,rr.isBoolean=function(t){return!0===t||!1===t||du(t)&&Hr(t)==O},rr.isBuffer=ou,rr.isDate=au,rr.isElement=function(t){return du(t)&&1===t.nodeType&&!gu(t)},rr.isEmpty=function(t){if(null==t)return!0;if(ru(t)&&(eu(t)||"string"==typeof t||"function"==typeof t.splice||ou(t)||xu(t)||tu(t)))return!t.length;var e=Co(t);if(e==R||e==U)return!t.size;if(Po(t))return!Kr(t).length;for(var n in t)if(ee.call(t,n))return!1;return!0},rr.isEqual=function(t,e){return qr(t,e)},rr.isEqualWith=function(e,n,r){var i=(r="function"==typeof r?r:t)?r(e,n):t;return i===t?qr(e,n,t,r):!!i},rr.isError=uu,rr.isFinite=function(t){return"number"==typeof t&&On(t)},rr.isFunction=su,rr.isInteger=lu,rr.isLength=cu,rr.isMap=hu,rr.isMatch=function(t,e){return t===e||$r(t,e,ko(e))},rr.isMatchWith=function(e,n,r){return r="function"==typeof r?r:t,$r(e,n,ko(n),r)},rr.isNaN=function(t){return pu(t)&&t!=+t},rr.isNative=function(t){if(Fo(t))throw new Ut("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Xr(t)},rr.isNil=function(t){return null==t},rr.isNull=function(t){return null===t},rr.isNumber=pu,rr.isObject=fu,rr.isObjectLike=du,rr.isPlainObject=gu,rr.isRegExp=vu,rr.isSafeInteger=function(t){return lu(t)&&t>=-k&&t<=k},rr.isSet=mu,rr.isString=yu,rr.isSymbol=bu,rr.isTypedArray=xu,rr.isUndefined=function(e){return e===t},rr.isWeakMap=function(t){return du(t)&&Co(t)==$},rr.isWeakSet=function(t){return du(t)&&"[object WeakSet]"==Hr(t)},rr.join=function(t,e){return null==t?"":Nn.call(t,e)},rr.kebabCase=es,rr.last=ua,rr.lastIndexOf=function(e,n,r){var i=null==e?0:e.length;if(!i)return-1;var o=i;return r!==t&&(o=(o=Su(r))<0?Pn(i+o,0):Wn(o,i-1)),n==n?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(e,n,o):Ue(e,qe,o,!0)},rr.lowerCase=ns,rr.lowerFirst=rs,rr.lt=wu,rr.lte=ku,rr.max=function(e){return e&&e.length?Lr(e,ps,Yr):t},rr.maxBy=function(e,n){return e&&e.length?Lr(e,xo(n,2),Yr):t},rr.mean=function(t){return $e(t,ps)},rr.meanBy=function(t,e){return $e(t,xo(e,2))},rr.min=function(e){return e&&e.length?Lr(e,ps,Qr):t},rr.minBy=function(e,n){return e&&e.length?Lr(e,xo(n,2),Qr):t},rr.stubArray=Cs,rr.stubFalse=As,rr.stubObject=function(){return{}},rr.stubString=function(){return""},rr.stubTrue=function(){return!0},rr.multiply=Ns,rr.nth=function(e,n){return e&&e.length?ri(e,Su(n)):t},rr.noConflict=function(){return ye._===this&&(ye._=ve),this},rr.noop=bs,rr.now=za,rr.pad=function(t,e,n){t=Tu(t);var r=(e=Su(e))?gn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return eo(Tn(i),n)+t+eo(Dn(i),n)},rr.padEnd=function(t,e,n){t=Tu(t);var r=(e=Su(e))?gn(t):0;return e&&r<e?t+eo(e-r,n):t},rr.padStart=function(t,e,n){t=Tu(t);var r=(e=Su(e))?gn(t):0;return e&&r<e?eo(e-r,n)+t:t},rr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Rn(Tu(t).replace(kt,""),e||0)},rr.random=function(e,n,r){if(r&&"boolean"!=typeof r&&Eo(e,n,r)&&(n=r=t),r===t&&("boolean"==typeof n?(r=n,n=t):"boolean"==typeof e&&(r=e,e=t)),e===t&&n===t?(e=0,n=1):(e=Mu(e),n===t?(n=e,e=0):n=Mu(n)),e>n){var i=e;e=n,n=i}if(r||e%1||n%1){var o=In();return Wn(e+o*(n-e+pe("1e-"+((o+"").length-1))),n)}return si(e,n)},rr.reduce=function(t,e,n){var r=eu(t)?Ie:Ke,i=arguments.length<3;return r(t,xo(e,4),n,i,Ar)},rr.reduceRight=function(t,e,n){var r=eu(t)?He:Ke,i=arguments.length<3;return r(t,xo(e,4),n,i,Dr)},rr.repeat=function(e,n,r){return n=(r?Eo(e,n,r):n===t)?1:Su(n),li(Tu(e),n)},rr.replace=function(){var t=arguments,e=Tu(t[0]);return t.length<3?e:e.replace(t[1],t[2])},rr.result=function(e,n,r){var i=-1,o=(n=Li(n,e)).length;for(o||(o=1,e=t);++i<o;){var a=null==e?t:e[$o(n[i])];a===t&&(i=o,a=r),e=su(a)?a.call(e):a}return e},rr.round=Fs,rr.runInContext=It,rr.sample=function(t){return(eu(t)?pr:function(t){return pr(Ku(t))})(t)},rr.size=function(t){if(null==t)return 0;if(ru(t))return yu(t)?gn(t):t.length;var e=Co(t);return e==R||e==U?t.size:Kr(t).length},rr.snakeCase=is,rr.some=function(e,n,r){var i=eu(e)?Ye:gi;return r&&Eo(e,n,r)&&(n=t),i(e,xo(n,3))},rr.sortedIndex=function(t,e){return vi(t,e)},rr.sortedIndexBy=function(t,e,n){return mi(t,e,xo(n,2))},rr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=vi(t,e);if(r<n&&Ka(t[r],e))return r}return-1},rr.sortedLastIndex=function(t,e){return vi(t,e,!0)},rr.sortedLastIndexBy=function(t,e,n){return mi(t,e,xo(n,2),!0)},rr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=vi(t,e,!0)-1;if(Ka(t[n],e))return n}return-1},rr.startCase=os,rr.startsWith=function(t,e,n){return t=Tu(t),n=null==n?0:kr(Su(n),0,t.length),e=xi(e),t.slice(n,n+e.length)==e},rr.subtract=Ps,rr.sum=function(t){return t&&t.length?Qe(t,ps):0},rr.sumBy=function(t,e){return t&&t.length?Qe(t,xo(e,2)):0},rr.template=function(e,n,r){var i=rr.templateSettings;r&&Eo(e,n,r)&&(n=t),e=Tu(e),n=Ou({},n,i,lo);var o,a,u=Ou({},n.imports,i.imports,lo),s=Bu(u),l=en(u,s),c=0,f=n.interpolate||zt,d="__p += '",h=$t((n.escape||zt).source+"|"+f.source+"|"+(f===gt?Tt:zt).source+"|"+(n.evaluate||zt).source+"|$","g"),p="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++ce+"]")+"\n";e.replace(h,function(t,n,r,i,u,s){return r||(r=i),d+=e.slice(c,s).replace(Rt,sn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),u&&(a=!0,d+="';\n"+u+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+t.length,t}),d+="';\n";var g=n.variable;g||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(at,""):d).replace(ut,"$1").replace(st,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=ls(function(){return Gt(s,p+"return "+d).apply(t,l)});if(v.source=d,uu(v))throw v;return v},rr.times=function(t,e){if((t=Su(t))<1||t>k)return[];var n=S,r=Wn(t,S);e=xo(e),t-=S;for(var i=Je(r,e);++n<t;)e(n);return i},rr.toFinite=Mu,rr.toInteger=Su,rr.toLength=Cu,rr.toLower=function(t){return Tu(t).toLowerCase()},rr.toNumber=Au,rr.toSafeInteger=function(t){return t?kr(Su(t),-k,k):0===t?t:0},rr.toString=Tu,rr.toUpper=function(t){return Tu(t).toUpperCase()},rr.trim=function(e,n,r){if((e=Tu(e))&&(r||n===t))return e.replace(wt,"");if(!e||!(n=xi(n)))return e;var i=vn(e),o=vn(n);return Oi(i,rn(i,o),on(i,o)+1).join("")},rr.trimEnd=function(e,n,r){if((e=Tu(e))&&(r||n===t))return e.replace(_t,"");if(!e||!(n=xi(n)))return e;var i=vn(e);return Oi(i,0,on(i,vn(n))+1).join("")},rr.trimStart=function(e,n,r){if((e=Tu(e))&&(r||n===t))return e.replace(kt,"");if(!e||!(n=xi(n)))return e;var i=vn(e);return Oi(i,rn(i,vn(n))).join("")},rr.truncate=function(e,n){var r=30,i="...";if(fu(n)){var o="separator"in n?n.separator:o;r="length"in n?Su(n.length):r,i="omission"in n?xi(n.omission):i}var a=(e=Tu(e)).length;if(ln(e)){var u=vn(e);a=u.length}if(r>=a)return e;var s=r-gn(i);if(s<1)return i;var l=u?Oi(u,0,s).join(""):e.slice(0,s);if(o===t)return l+i;if(u&&(s+=l.length-s),vu(o)){if(e.slice(s).search(o)){var c,f=l;for(o.global||(o=$t(o.source,Tu(Lt.exec(o))+"g")),o.lastIndex=0;c=o.exec(f);)var d=c.index;l=l.slice(0,d===t?s:d)}}else if(e.indexOf(xi(o),s)!=s){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+i},rr.unescape=function(t){return(t=Tu(t))&&ft.test(t)?t.replace(lt,mn):t},rr.uniqueId=function(t){var e=++ne;return Tu(t)+e},rr.upperCase=as,rr.upperFirst=us,rr.each=Ta,rr.eachRight=La,rr.first=ra,ys(rr,(Ds={},Pr(rr,function(t,e){ee.call(rr.prototype,e)||(Ds[e]=t)}),Ds),{chain:!1}),rr.VERSION="4.17.11",Oe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){rr[t].placeholder=rr}),Oe(["drop","take"],function(e,n){ur.prototype[e]=function(r){r=r===t?1:Pn(Su(r),0);var i=this.__filtered__&&!n?new ur(this):this.clone();return i.__filtered__?i.__takeCount__=Wn(r,i.__takeCount__):i.__views__.push({size:Wn(r,S),type:e+(i.__dir__<0?"Right":"")}),i},ur.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Oe(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;ur.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:xo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Oe(["head","last"],function(t,e){var n="take"+(e?"Right":"");ur.prototype[t]=function(){return this[n](1).value()[0]}}),Oe(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");ur.prototype[t]=function(){return this.__filtered__?new ur(this):this[n](1)}}),ur.prototype.compact=function(){return this.filter(ps)},ur.prototype.find=function(t){return this.filter(t).head()},ur.prototype.findLast=function(t){return this.reverse().find(t)},ur.prototype.invokeMap=ci(function(t,e){return"function"==typeof t?new ur(this):this.map(function(n){return Gr(n,t,e)})}),ur.prototype.reject=function(t){return this.filter(Va(xo(t)))},ur.prototype.slice=function(e,n){e=Su(e);var r=this;return r.__filtered__&&(e>0||n<0)?new ur(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),n!==t&&(r=(n=Su(n))<0?r.dropRight(-n):r.take(n-e)),r)},ur.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},ur.prototype.toArray=function(){return this.take(S)},Pr(ur.prototype,function(e,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),o=rr[i?"take"+("last"==n?"Right":""):n],a=i||/^find/.test(n);o&&(rr.prototype[n]=function(){var n=this.__wrapped__,u=i?[1]:arguments,s=n instanceof ur,l=u[0],c=s||eu(n),f=function(t){var e=o.apply(rr,Re([t],u));return i&&d?e[0]:e};c&&r&&"function"==typeof l&&1!=l.length&&(s=c=!1);var d=this.__chain__,h=a&&!d,p=s&&!this.__actions__.length;if(!a&&c){n=p?n:new ur(this);var g=e.apply(n,u);return g.__actions__.push({func:Ma,args:[f],thisArg:t}),new ar(g,d)}return h&&p?e.apply(this,u):(g=this.thru(f),h?i?g.value()[0]:g.value():g)})}),Oe(["pop","push","shift","sort","splice","unshift"],function(t){var e=Kt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);rr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(eu(i)?i:[],t)}return this[n](function(n){return e.apply(eu(n)?n:[],t)})}}),Pr(ur.prototype,function(t,e){var n=rr[e];if(n){var r=n.name+"";($n[r]||($n[r]=[])).push({name:e,func:n})}}),$n[Ki(t,c).name]=[{name:"wrapper",func:t}],ur.prototype.clone=function(){var t=new ur(this.__wrapped__);return t.__actions__=Hi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Hi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Hi(this.__views__),t},ur.prototype.reverse=function(){if(this.__filtered__){var t=new ur(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},ur.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=eu(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Wn(e,t+a);break;case"takeRight":t=Pn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,u=o.end,s=u-a,l=r?u:a-1,c=this.__iteratees__,f=c.length,d=0,h=Wn(s,this.__takeCount__);if(!n||!r&&i==s&&h==s)return Si(t,this.__actions__);var p=[];t:for(;s--&&d<h;){for(var g=-1,v=t[l+=e];++g<f;){var m=c[g],y=m.type,b=(0,m.iteratee)(v);if(2==y)v=b;else if(!b){if(1==y)continue t;break t}}p[d++]=v}return p},rr.prototype.at=Sa,rr.prototype.chain=function(){return _a(this)},rr.prototype.commit=function(){return new ar(this.value(),this.__chain__)},rr.prototype.next=function(){this.__values__===t&&(this.__values__=_u(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?t:this.__values__[this.__index__++]}},rr.prototype.plant=function(e){for(var n,r=this;r instanceof or;){var i=Zo(r);i.__index__=0,i.__values__=t,n?o.__wrapped__=i:n=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,n},rr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof ur){var n=e;return this.__actions__.length&&(n=new ur(this)),(n=n.reverse()).__actions__.push({func:Ma,args:[fa],thisArg:t}),new ar(n,this.__chain__)}return this.thru(fa)},rr.prototype.toJSON=rr.prototype.valueOf=rr.prototype.value=function(){return Si(this.__wrapped__,this.__actions__)},rr.prototype.first=rr.prototype.head,kn&&(rr.prototype[kn]=function(){return this}),rr}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ye._=yn,define(function(){return yn})):xe?((xe.exports=yn)._=yn,be._=yn):ye._=yn}).call(this),function(t,e){"use strict";function n(t,e){var n,r,i=t.toLowerCase();for(e=[].concat(e),n=0;e.length>n;n+=1)if(r=e[n]){if(r.test&&r.test(t))return!0;if(r.toLowerCase()===i)return!0}}var r=e.prototype.trim,i=e.prototype.trimRight,o=e.prototype.trimLeft,a=function(t){return 1*t||0},u=function(t,e){if(1>e)return"";for(var n="";e>0;)1&e&&(n+=t),e>>=1,t+=t;return n},s=[].slice,l=function(t){return null==t?"\\s":t.source?t.source:"["+p.escapeRegExp(t)+"]"},c={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},f={};for(var d in c)f[c[d]]=d;f["'"]="#39";var h=function(){function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var n=u,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,i){var o,a,u,s,l,c,f,d=1,p=r.length,g="",v=[];for(a=0;p>a;a++)if("string"===(g=t(r[a])))v.push(r[a]);else if("array"===g){if((s=r[a])[2])for(o=i[d],u=0;s[2].length>u;u++){if(!o.hasOwnProperty(s[2][u]))throw new Error(h('[_.sprintf] property "%s" does not exist',s[2][u]));o=o[s[2][u]]}else o=s[1]?i[s[1]]:i[d++];if(/[^s]/.test(s[8])&&"number"!=t(o))throw new Error(h("[_.sprintf] expecting number but found %s",t(o)));switch(s[8]){case"b":o=o.toString(2);break;case"c":o=e.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=s[7]?o.toExponential(s[7]):o.toExponential();break;case"f":o=s[7]?parseFloat(o).toFixed(s[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=e(o))&&s[7]?o.substring(0,s[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(s[8])&&s[3]&&o>=0?"+"+o:o,c=s[4]?"0"==s[4]?"0":s[4].charAt(1):" ",f=s[6]-e(o).length,l=s[6]?n(c,f):"",v.push(s[5]?o+l:l+o)}return v.join("")},r.cache={},r.parse=function(t){for(var e=t,n=[],r=[],i=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var o=[],a=n[2],u=[];if(null===(u=/^([a-z_][a-z_\d]*)/i.exec(a)))throw new Error("[_.sprintf] huh?");for(o.push(u[1]);""!==(a=a.substring(u[0].length));)if(null!==(u=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(u[1]);else{if(null===(u=/^\[(\d+)\]/.exec(a)))throw new Error("[_.sprintf] huh?");o.push(u[1])}n[2]=o}else i|=2;if(3===i)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}e=e.substring(n[0].length)}return r},r}(),p={VERSION:"2.3.0",isBlank:function(t){return null==t&&(t=""),/^\s*$/.test(t)},stripTags:function(t){return null==t?"":e(t).replace(/<\/?[^>]+>/g,"")},capitalize:function(t){return(t=null==t?"":e(t)).charAt(0).toUpperCase()+t.slice(1)},chop:function(t,n){return null==t?[]:(t=e(t),(n=~~n)>0?t.match(new RegExp(".{1,"+n+"}","g")):[t])},clean:function(t){return p.strip(t).replace(/\s+/g," ")},count:function(t,n){if(null==t||null==n)return 0;t=e(t);for(var r=0,i=0,o=(n=e(n)).length;-1!==(i=t.indexOf(n,i));)r++,i+=o;return r},chars:function(t){return null==t?[]:e(t).split("")},swapCase:function(t){return null==t?"":e(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})},escapeHTML:function(t){return null==t?"":e(t).replace(/[&<>"']/g,function(t){return"&"+f[t]+";"})},unescapeHTML:function(t){return null==t?"":e(t).replace(/\&([^;]+);/g,function(t,n){var r;return n in c?c[n]:(r=n.match(/^#x([\da-fA-F]+)$/))?e.fromCharCode(parseInt(r[1],16)):(r=n.match(/^#(\d+)$/))?e.fromCharCode(~~r[1]):t})},escapeRegExp:function(t){return null==t?"":e(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(t,e,n,r){var i=p.chars(t);return i.splice(~~e,~~n,r),i.join("")},insert:function(t,e,n){return p.splice(t,e,0,n)},include:function(t,n){return""===n||null!=t&&-1!==e(t).indexOf(n)},join:function(){var t=s.call(arguments),e=t.shift();return null==e&&(e=""),t.join(e)},lines:function(t){return null==t?[]:e(t).split("\n")},reverse:function(t){return p.chars(t).reverse().join("")},startsWith:function(t,n){return""===n||null!=t&&null!=n&&(t=e(t),n=e(n),t.length>=n.length&&t.slice(0,n.length)===n)},endsWith:function(t,n){return""===n||null!=t&&null!=n&&(t=e(t),n=e(n),t.length>=n.length&&t.slice(t.length-n.length)===n)},succ:function(t){return null==t?"":(t=e(t)).slice(0,-1)+e.fromCharCode(t.charCodeAt(t.length-1)+1)},titleize:function(t){return null==t?"":(t=e(t).toLowerCase()).replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()})},camelize:function(t){return p.trim(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""})},underscored:function(t){return p.trim(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(t){return p.trim(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(t){return p.titleize(e(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(t){return p.capitalize(p.underscored(t).replace(/_id$/,"").replace(/_/g," "))},trim:function(t,n){return null==t?"":!n&&r?r.call(t):(n=l(n),e(t).replace(new RegExp("^"+n+"+|"+n+"+$","g"),""))},ltrim:function(t,n){return null==t?"":!n&&o?o.call(t):(n=l(n),e(t).replace(new RegExp("^"+n+"+"),""))},rtrim:function(t,n){return null==t?"":!n&&i?i.call(t):(n=l(n),e(t).replace(new RegExp(n+"+$"),""))},truncate:function(t,n,r){return null==t?"":(r=r||"...",(t=e(t)).length>(n=~~n)?t.slice(0,n)+r:t)},prune:function(t,n,r){if(null==t)return"";if(t=e(t),n=~~n,r=null!=r?e(r):"...",n>=t.length)return t;var i=t.slice(0,n+1).replace(/.(?=\W*\w*$)/g,function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "});return((i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):p.rtrim(i.slice(0,i.length-1)))+r).length>t.length?t:t.slice(0,i.length)+r},words:function(t,e){return p.isBlank(t)?[]:p.trim(t,e).split(e||/\s+/)},pad:function(t,n,r,i){t=null==t?"":e(t),n=~~n;var o=0;switch(r?r.length>1&&(r=r.charAt(0)):r=" ",i){case"right":return t+u(r,o=n-t.length);case"both":return o=n-t.length,u(r,Math.ceil(o/2))+t+u(r,Math.floor(o/2));default:return u(r,o=n-t.length)+t}},lpad:function(t,e,n){return p.pad(t,e,n)},rpad:function(t,e,n){return p.pad(t,e,n,"right")},lrpad:function(t,e,n){return p.pad(t,e,n,"both")},sprintf:h,vsprintf:function(t,e){return e.unshift(t),h.apply(null,e)},toNumber:function(t,e){return t?(t=p.trim(t)).match(/^-?\d+(?:\.\d+)?$/)?a(a(t).toFixed(~~e)):NaN:0},numberFormat:function(t,e,n,r){if(isNaN(t)||null==t)return"";r="string"==typeof r?r:",";var i=(t=t.toFixed(~~e)).split("."),o=i[1]?(n||".")+i[1]:"";return i[0].replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+o},strRight:function(t,n){if(null==t)return"";t=e(t);var r=(n=null!=n?e(n):n)?t.indexOf(n):-1;return~r?t.slice(r+n.length,t.length):t},strRightBack:function(t,n){if(null==t)return"";t=e(t);var r=(n=null!=n?e(n):n)?t.lastIndexOf(n):-1;return~r?t.slice(r+n.length,t.length):t},strLeft:function(t,n){if(null==t)return"";t=e(t);var r=(n=null!=n?e(n):n)?t.indexOf(n):-1;return~r?t.slice(0,r):t},strLeftBack:function(t,e){if(null==t)return"";var n=(t+="").lastIndexOf(e=null!=e?""+e:e);return~n?t.slice(0,n):t},toSentence:function(t,e,n,r){e=e||", ",n=n||" and ";var i=t.slice(),o=i.pop();return t.length>2&&r&&(n=p.rtrim(e)+n),i.length?i.join(e)+n+o:o},toSentenceSerial:function(){var t=s.call(arguments);return t[3]=!0,p.toSentence.apply(p,t)},slugify:function(t){if(null==t)return"";var n="\u0105\xe0\xe1\xe4\xe2\xe3\xe5\xe6\u0103\u0107\u0119\xe8\xe9\xeb\xea\xec\xed\xef\xee\u0142\u0144\xf2\xf3\xf6\xf4\xf5\xf8\u015b\u0219\u021b\xf9\xfa\xfc\xfb\xf1\xe7\u017c\u017a",r=new RegExp(l(n),"g");return t=e(t).toLowerCase().replace(r,function(t){var e=n.indexOf(t);return"aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz".charAt(e)||"-"}),p.dasherize(t.replace(/[^\w\s-]/g,""))},surround:function(t,e){return[e,t,e].join("")},quote:function(t,e){return p.surround(t,e||'"')},unquote:function(t,e){return t[0]===(e=e||'"')&&t[t.length-1]===e?t.slice(1,t.length-1):t},exports:function(){var t={};for(var e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse)$/)&&(t[e]=this[e]);return t},repeat:function(t,n,r){if(null==t)return"";if(n=~~n,null==r)return u(e(t),n);for(var i=[];n>0;i[--n]=t);return i.join(r)},naturalCmp:function(t,n){if(t==n)return 0;if(!t)return-1;if(!n)return 1;for(var r=/(\.\d+)|(\d+)|(\D+)/g,i=e(t).toLowerCase().match(r),o=e(n).toLowerCase().match(r),a=Math.min(i.length,o.length),u=0;a>u;u++){var s=i[u],l=o[u];if(s!==l){var c=parseInt(s,10);if(!isNaN(c)){var f=parseInt(l,10);if(!isNaN(f)&&c-f)return c-f}return l>s?-1:1}}return i.length===o.length?i.length-o.length:n>t?-1:1},levenshtein:function(t,n){if(null==t&&null==n)return 0;if(null==t)return e(n).length;if(null==n)return e(t).length;t=e(t),n=e(n);for(var r,i,o=[],a=0;n.length>=a;a++)for(var u=0;t.length>=u;u++)i=a&&u?t.charAt(u-1)===n.charAt(a-1)?r:Math.min(o[u],o[u-1],r)+1:a+u,r=o[u],o[u]=i;return o.pop()},toBoolean:function(t,e,r){return"number"==typeof t&&(t=""+t),"string"!=typeof t?!!t:!!n(t=p.trim(t),e||["true","1"])||!n(t,r||["false","0"])&&void 0}};p.strip=p.trim,p.lstrip=p.ltrim,p.rstrip=p.rtrim,p.center=p.lrpad,p.rjust=p.lpad,p.ljust=p.rpad,p.contains=p.include,p.q=p.quote,p.toBool=p.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=p),exports._s=p),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return p}),t._=t._||{},t._.string=t._.str=p}(this,String),function(){var t={dev:!1};t.tooltip=t.tooltip||{},t.utils=t.utils||{},t.models=t.models||{},t.charts={},t.logs={},t.dom={},t.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),t.dev&&(t.dispatch.on("render_start",function(e){t.logs.startTime=+new Date}),t.dispatch.on("render_end",function(e){t.logs.endTime=+new Date,t.logs.totalTime=t.logs.endTime-t.logs.startTime,t.log("total",t.logs.totalTime)})),t.log=function(){return t.dev&&window.console&&console.log&&console.log.apply?console.log.apply(console,arguments):t.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments),arguments[arguments.length-1]},t.deprecated=function(t,e){console&&console.warn&&console.warn("nvd3 warning: `"+t+"` has been deprecated. ",e||"")},t.render=function(e){e=e||1,t.render.active=!0,t.dispatch.render_start();var n=function(){for(var r,i,o=0;o<e&&(i=t.render.queue[o]);o++)r=i.generate(),typeof i.callback==typeof Function&&i.callback(r);t.render.queue.splice(0,o),t.render.queue.length?setTimeout(n):(t.dispatch.render_end(),t.render.active=!1)};setTimeout(n)},t.render.active=!1,t.render.queue=[],t.addGraph=function(e){typeof arguments[0]==typeof Function&&(e={generate:arguments[0],callback:arguments[1]}),t.render.queue.push(e),t.render.active||t.render()},"undefined"!=typeof module&&"undefined"!=typeof exports&&(module.exports=t),"undefined"!=typeof window&&(window.nv=t),t.dom.write=function(t){return void 0!==window.fastdom?fastdom.write(t):t()},t.dom.read=function(t){return void 0!==window.fastdom?fastdom.read(t):t()},t.interactiveGuideline=function(){"use strict";var e=t.models.tooltip();e.duration(0).hideDelay(0)._isInteractiveLayer(!0).hidden(!1);var n=null,r=null,i={left:0,top:0},o=d3.scale.linear(),a=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick"),u=!0,s=null,l="ActiveXObject"in window;function c(f){f.each(function(f){var d=d3.select(this),h=n||960,p=r||400,g=d.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([f]);function v(){var t=d3.mouse(this),n=t[0],r=t[1],u=!0,s=!1;if(l&&(n=d3.event.offsetX,r=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(u=!1),d3.event.target.className.baseVal.match("nv-legend")&&(s=!0)),u&&(n-=i.left,r-=i.top),n<0||r<0||n>h||r>p||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||s){if(l&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(e.nvPointerEventsClass)))return;return a.elementMouseout({mouseX:n,mouseY:r}),c.renderGuideLine(null),void e.hidden(!0)}e.hidden(!1);var f=o.invert(n);a.elementMousemove({mouseX:n,mouseY:r,pointXValue:f}),"dblclick"===d3.event.type&&a.elementDblclick({mouseX:n,mouseY:r,pointXValue:f}),"click"===d3.event.type&&a.elementClick({mouseX:n,mouseY:r,pointXValue:f})}g.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),s&&(s.on("touchmove",v).on("mousemove",v,!0).on("mouseout",v,!0).on("dblclick",v).on("click",v),c.guideLine=null,c.renderGuideLine=function(e){u&&(c.guideLine&&c.guideLine.attr("x1")===e||t.dom.write(function(){var n=g.select(".nv-interactiveGuideLine").selectAll("line").data(null!=e?[t.utils.NaNtoZero(e)]:[],String);n.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",p).attr("y2",0),n.exit().remove()}))})})}return c.dispatch=a,c.tooltip=e,c.margin=function(t){return arguments.length?(i.top=void 0!==t.top?t.top:i.top,i.left=void 0!==t.left?t.left:i.left,c):i},c.width=function(t){return arguments.length?(n=t,c):n},c.height=function(t){return arguments.length?(r=t,c):r},c.xScale=function(t){return arguments.length?(o=t,c):o},c.showGuideLine=function(t){return arguments.length?(u=t,c):u},c.svgContainer=function(t){return arguments.length?(s=t,c):s},c},t.interactiveBisect=function(t,e,n){"use strict";if(!(t instanceof Array))return null;var r;r="function"!=typeof n?function(t){return t.x}:n;var i=d3.bisector(function(t,e){return r(t)-e}).left,o=d3.max([0,i(t,e)-1]),a=r(t[o]);if(void 0===a&&(a=o),a===e)return o;var u=d3.min([o+1,t.length-1]),s=r(t[u]);return void 0===s&&(s=u),Math.abs(s-e)>=Math.abs(a-e)?o:u},t.nearestValueIndex=function(t,e,n){"use strict";var r=1/0,i=null;return t.forEach(function(t,o){var a=Math.abs(e-t);null!=t&&a<=r&&a<n&&(r=a,i=o)}),i},function(){"use strict";t.models.tooltip=function(){var e=null,n="w",r=25,i=0,o=null,a=null,u=null,s=!0,l=400,c=null,f=null,d={left:null,top:null},h={left:0,top:0},p=!0,g=100,v=!0,m=!1,y="nvtooltip-"+Math.floor(1e5*Math.random()),b="nv-pointer-events-none",x=function(t,e){return t},w=function(t){return t},k=function(t,e){return t},_=function(t){if(null===t)return"";var e=d3.select(document.createElement("table"));v&&e.selectAll("thead").data([t]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(w(t.value));var n=e.selectAll("tbody").data([t]).enter().append("tbody").selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});n.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),n.append("td").classed("key",!0).html(function(t,e){return k(t.key,e)}),n.append("td").classed("value",!0).html(function(t,e){return x(t.value,e)}),n.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]);d3.select(this).style("border-bottom-color",e(.6)).style("border-top-color",e(.6))}});var r=e.node().outerHTML;return void 0!==t.footer&&(r+="<div class='footer'>"+t.footer+"</div>"),r},M=function(t){if(t&&t.series){if(t.series instanceof Array)return!!t.series.length;if(t.series instanceof Object)return t.series=[t.series],!0}return!1},S=function(e){f&&t.dom.read(function(){var i,o,a=parseInt(f.offsetHeight,10),u=parseInt(f.offsetWidth,10),d=t.utils.windowSize().width,p=t.utils.windowSize().height,v=window.pageYOffset,m=window.pageXOffset;p=window.innerWidth>=document.body.scrollWidth?p:p-16,d=window.innerHeight>=document.body.scrollHeight?d:d-16;var y,b,x=function(t){var e=o;do{isNaN(t.offsetTop)||(e+=t.offsetTop),t=t.offsetParent}while(t);return e},w=function(t){var e=i;do{isNaN(t.offsetLeft)||(e+=t.offsetLeft),t=t.offsetParent}while(t);return e};switch(n){case"e":i=e[0]-u-r,o=e[1]-a/2,y=w(f),b=x(f),y<m&&(i=e[0]+r>m?e[0]+r:m-y+i),b<v&&(o=v-b+o),b+a>v+p&&(o=v+p-b+o-a);break;case"w":i=e[0]+r,o=e[1]-a/2,y=w(f),b=x(f),y+u>d&&(i=e[0]-u-r),b<v&&(o=v+5),b+a>v+p&&(o=v+p-b+o-a);break;case"n":i=e[0]-u/2-5,o=e[1]+r,y=w(f),b=x(f),y<m&&(i=m+5),y+u>d&&(i=i-u/2+5),b+a>v+p&&(o=v+p-b+o-a);break;case"s":i=e[0]-u/2,o=e[1]-a-r,y=w(f),b=x(f),y<m&&(i=m+5),y+u>d&&(i=i-u/2+5),v>b&&(o=v);break;case"none":i=e[0],o=e[1]-r,y=w(f),b=x(f)}i-=h.left,o-=h.top;var k=f.getBoundingClientRect(),_=(v=window.pageYOffset||document.documentElement.scrollTop,m=window.pageXOffset||document.documentElement.scrollLeft,"translate("+i+"px, "+o+"px)"),M=d3.interpolateString("translate("+(k.left+m)+"px, "+(k.top+v)+"px)",_),S=c.style("opacity")<.1;s?c.transition().delay(l).duration(0).style("opacity",0):c.interrupt().transition().duration(S?0:g).styleTween("transform",function(t){return M},"important").style("-webkit-transform",_).style("opacity",1)})};function C(){if(p&&M(e)){!function(){if(u){var t=d3.select(u);"svg"!==t.node().tagName&&(t=t.select("svg"));var e=t.node()?t.attr("viewBox"):null;if(e){e=e.split(" ");var n=parseInt(t.style("width"),10)/e[2];d.left=d.left*n,d.top=d.top*n}}}();var n=d.left,r=null!==o?o:d.top;return t.dom.write(function(){var o;c||(o=u||document.body,(c=d3.select(o).append("div").attr("class","nvtooltip "+(a||"xy-tooltip")).attr("id",y)).style("top",0).style("left",0),c.style("opacity",0),c.selectAll("div, table, td, tr").classed(b,!0),c.classed(b,!0),f=c.node());var s=_(e);s&&(f.innerHTML=s),u&&m?t.dom.read(function(){var t=u.getElementsByTagName("svg")[0],e={left:0,top:0};if(t){var o=t.getBoundingClientRect(),a=u.getBoundingClientRect(),s=o.top;if(s<0){var l=u.getBoundingClientRect();s=Math.abs(s)>l.height?0:s}e.top=Math.abs(s-a.top),e.left=Math.abs(o.left-a.left)}n+=u.offsetLeft+e.left-2*u.scrollLeft,r+=u.offsetTop+e.top-2*u.scrollTop,i&&i>0&&(r=Math.floor(r/i)*i),S([n,r])}):S([n,r])}),C}}return C.nvPointerEventsClass=b,C.options=t.utils.optionsFunc.bind(C),C._options=Object.create({},{duration:{get:function(){return g},set:function(t){g=t}},gravity:{get:function(){return n},set:function(t){n=t}},distance:{get:function(){return r},set:function(t){r=t}},snapDistance:{get:function(){return i},set:function(t){i=t}},classes:{get:function(){return a},set:function(t){a=t}},chartContainer:{get:function(){return u},set:function(t){u=t}},fixedTop:{get:function(){return o},set:function(t){o=t}},enabled:{get:function(){return p},set:function(t){p=t}},hideDelay:{get:function(){return l},set:function(t){l=t}},contentGenerator:{get:function(){return _},set:function(t){_=t}},valueFormatter:{get:function(){return x},set:function(t){x=t}},headerFormatter:{get:function(){return w},set:function(t){w=t}},keyFormatter:{get:function(){return k},set:function(t){k=t}},headerEnabled:{get:function(){return v},set:function(t){v=t}},_isInteractiveLayer:{get:function(){return m},set:function(t){m=!!t}},position:{get:function(){return d},set:function(t){d.left=void 0!==t.left?t.left:d.left,d.top=void 0!==t.top?t.top:d.top}},offset:{get:function(){return h},set:function(t){h.left=void 0!==t.left?t.left:h.left,h.top=void 0!==t.top?t.top:h.top}},hidden:{get:function(){return s},set:function(t){s!=t&&(s=!!t,C())}},data:{get:function(){return e},set:function(t){t.point&&(t.value=t.point.x,t.series=t.series||{},t.series.value=t.point.y,t.series.color=t.point.color||t.series.color),e=t}},tooltipElem:{get:function(){return f},set:function(t){}},id:{get:function(){return y},set:function(t){}}}),t.utils.initOptions(C),C}}(),t.utils.windowSize=function(){var t={width:640,height:480};return window.innerWidth&&window.innerHeight?(t.width=window.innerWidth,t.height=window.innerHeight,t):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight,t):document.body&&document.body.offsetWidth?(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight,t):t},t.utils.windowResize=function(e){return window.addEventListener?window.addEventListener("resize",e):t.log("ERROR: Failed to bind to window.resize with: ",e),{callback:e,clear:function(){window.removeEventListener("resize",e)}}},t.utils.getColor=function(e){if(void 0===e)return t.utils.defaultColor();if(Array.isArray(e)){var n=d3.scale.ordinal().range(e);return function(t,e){return t.color||n(void 0===e?t:e)}}return e},t.utils.defaultColor=function(){return t.utils.getColor(d3.scale.category20().range())},t.utils.customTheme=function(t,e,n){e=e||function(t){return t.key};var r=(n=n||d3.scale.category20().range()).length;return function(i,o){var a=e(i);return"function"==typeof t[a]?t[a]():void 0!==t[a]?t[a]:(r||(r=n.length),n[r-=1])}},t.utils.pjax=function(e,n){var r=function(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),t.utils.pjax(e,n)})};d3.selectAll(e).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},t.utils.calcApproxTextWidth=function(t){if("function"==typeof t.style&&"function"==typeof t.text){var e=parseInt(t.style("font-size").replace("px",""),10);return t.text().length*e*.5}return 0},t.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||t===1/0||t===-1/0?0:t},d3.selection.prototype.watchTransition=function(t){var e=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,e)},t.utils.renderWatch=function(e,n){if(!(this instanceof t.utils.renderWatch))return new t.utils.renderWatch(e,n);var r=void 0!==n?n:250,i=[],o=this;this.models=function(t){return(t=[].slice.call(arguments,0)).forEach(function(t){var e;t.__rendered=!1,(e=t).dispatch.on("renderEnd",function(t){e.__rendered=!0,o.renderEnd("model")}),i.indexOf(t)<0&&i.push(t)}),this},this.reset=function(t){void 0!==t&&(r=t),i=[]},this.transition=function(t,e,n){if(n=(e=arguments.length>1?[].slice.call(arguments,1):[]).length>1?e.pop():void 0!==r?r:250,t.__rendered=!1,i.indexOf(t)<0&&i.push(t),0===n)return t.__rendered=!0,t.delay=function(){return this},t.duration=function(){return this},t;t.__rendered=0===t.length||!!t.every(function(t){return!t.length});var a=0;return t.transition().duration(n).each(function(){++a}).each("end",function(n,r){0==--a&&(t.__rendered=!0,o.renderEnd.apply(this,e))})},this.renderEnd=function(){i.every(function(t){return t.__rendered})&&(i.forEach(function(t){t.__rendered=!1}),e.renderEnd.apply(this,arguments))}},t.utils.deepExtend=function(e){(arguments.length>1?[].slice.call(arguments,1):[]).forEach(function(n){for(var r in n){var i=e[r]instanceof Array;"object"!=typeof e[r]||i||"object"!=typeof n[r]?e[r]=n[r]:t.utils.deepExtend(e[r],n[r])}})},t.utils.state=function(){if(!(this instanceof t.utils.state))return new t.utils.state;var e={},n=function(){},r=function(){return{}},i=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(t){n(t,!0)}),this.getter=function(t){return r=t,this},this.setter=function(t,e){return e||(e=function(){}),n=function(n,r){t(n),r&&e()},this},this.init=function(e){t.utils.deepExtend(i=i||{},e)},this.update=function(){i&&(n(i,!1),i=null),(function(){var t=r();if(JSON.stringify(t)===JSON.stringify(e))return!1;for(var n in t)void 0===e[n]&&(e[n]={}),e[n]=t[n];return!0}).call(this)&&this.dispatch.change(e)}},t.utils.optionsFunc=function(t){return t&&d3.map(t).forEach((function(t,e){"function"==typeof this[t]&&this[t](e)}).bind(this)),this},t.utils.calcTicksX=function(e,n){for(var r=1,i=0;i<n.length;i+=1){var o=n[i]&&n[i].values?n[i].values.length:0;r=o>r?o:r}return t.log("Requested number of ticks: ",e),t.log("Calculated max values to be: ",r),e=(e=e>r?e=r-1:e)<1?1:e,e=Math.floor(e),t.log("Calculating tick count as: ",e),e},t.utils.calcTicksY=function(e,n){return t.utils.calcTicksX(e,n)},t.utils.initOption=function(t,e){t._calls&&t._calls[e]?t[e]=t._calls[e]:(t[e]=function(n){return arguments.length?(t._overrides[e]=!0,t._options[e]=n,t):t._options[e]},t["_"+e]=function(n){return arguments.length?(t._overrides[e]||(t._options[e]=n),t):t._options[e]})},t.utils.initOptions=function(e){e._overrides=e._overrides||{};var n=Object.getOwnPropertyNames(e._options||{}),r=Object.getOwnPropertyNames(e._calls||{});for(var i in n=n.concat(r))t.utils.initOption(e,n[i])},t.utils.inheritOptionsD3=function(t,e,n){t._d3options=n.concat(t._d3options||[]),n.unshift(e),n.unshift(t),d3.rebind.apply(this,n)},t.utils.arrayUnique=function(t){return t.sort().filter(function(e,n){return!n||e!=t[n-1]})},t.utils.symbolMap=d3.map(),t.utils.symbol=function(){var e,n=64;function r(r,i){var o=e.call(this,r,i),a=n.call(this,r,i);return-1!==d3.svg.symbolTypes.indexOf(o)?d3.svg.symbol().type(o).size(a)():t.utils.symbolMap.get(o)(a)}return r.type=function(t){return arguments.length?(e=d3.functor(t),r):e},r.size=function(t){return arguments.length?(n=d3.functor(t),r):n},r},t.utils.inheritOptions=function(e,n){var r=Object.getOwnPropertyNames(n._options||{}),i=Object.getOwnPropertyNames(n._calls||{}),o=n._inherited||[],a=n._d3options||[],u=r.concat(i).concat(o).concat(a);u.unshift(n),u.unshift(e),d3.rebind.apply(this,u),e._inherited=t.utils.arrayUnique(r.concat(i).concat(o).concat(r).concat(e._inherited||[])),e._d3options=t.utils.arrayUnique(a.concat(e._d3options||[]))},t.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},t.utils.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},t.utils.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},t.utils.availableHeight=function(e,n,r){return t.utils.sanitizeHeight(e,n)-r.top-r.bottom},t.utils.availableWidth=function(e,n,r){return t.utils.sanitizeWidth(e,n)-r.left-r.right},t.utils.noData=function(e,n){var r=e.options(),i=r.margin(),o=r.noData(),a=null==o?["No Data Available."]:[o],u=t.utils.availableHeight(r.height(),n,i),s=t.utils.availableWidth(r.width(),n,i),l=i.left+s/2,c=i.top+u/2;n.selectAll("g").remove();var f=n.selectAll(".nv-noData").data(a);f.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),f.attr("x",l).attr("y",c).text(function(t){return t})},t.models.axis=function(){"use strict";var e,n=d3.svg.axis(),r=d3.scale.linear(),i={top:0,right:0,bottom:0,left:0},o=75,a=60,u=null,s=!0,l=0,c=!0,f=!1,d=!1,h=null,p=0,g=250,v=d3.dispatch("renderEnd");n.scale(r).orient("bottom").tickFormat(function(t){return t});var m=t.utils.renderWatch(v,g);function y(a){return m.reset(),a.each(function(a){var g=d3.select(this);t.utils.initSVG(g);var v=g.selectAll("g.nv-wrap.nv-axis").data([a]),y=(v.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),v.select("g"));null!==h?n.ticks(h):"top"!=n.orient()&&"bottom"!=n.orient()||n.ticks(Math.abs(r.range()[1]-r.range()[0])/100),y.watchTransition(m,"axis").call(n),e=e||n.scale();var b=n.tickFormat();null==b&&(b=e.tickFormat());var x,w,k,_=y.selectAll("text.nv-axislabel").data([u||null]);switch(_.exit().remove(),n.orient()){case"top":_.enter().append("text").attr("class","nv-axislabel"),k=r.range().length<2?0:2===r.range().length?r.range()[1]:r.range()[r.range().length-1]+(r.range()[1]-r.range()[0]),_.attr("text-anchor","middle").attr("y",0).attr("x",k/2),s&&((w=v.selectAll("g.nv-axisMaxMin").data(r.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),w.exit().remove(),w.attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(r(e))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-n.tickPadding()).attr("text-anchor","middle").text(function(t,e){var n=b(t);return(""+n).match("NaN")?"":n}),w.watchTransition(m,"min-max top").attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(r.range()[n])+",0)"}));break;case"bottom":x=p+36;var M=30,S=0,C=y.selectAll("g").select("text"),A="";if(l%360){C.each(function(t,e){var n=this.getBoundingClientRect(),r=n.width;S=n.height,r>M&&(M=r)}),A="rotate("+l+" 0,"+(S/2+n.tickPadding())+")";var D=Math.abs(Math.sin(l*Math.PI/180));x=(D?D*M:M)+30,C.attr("transform",A).style("text-anchor",l%360>0?"start":"end")}_.enter().append("text").attr("class","nv-axislabel"),k=r.range().length<2?0:2===r.range().length?r.range()[1]:r.range()[r.range().length-1]+(r.range()[1]-r.range()[0]),_.attr("text-anchor","middle").attr("y",x).attr("x",k/2),s&&((w=v.selectAll("g.nv-axisMaxMin").data([r.domain()[0],r.domain()[r.domain().length-1]])).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),w.exit().remove(),w.attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(r(e)+(d?r.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",n.tickPadding()).attr("transform",A).style("text-anchor",l?l%360>0?"start":"end":"middle").text(function(t,e){var n=b(t);return(""+n).match("NaN")?"":n}),w.watchTransition(m,"min-max bottom").attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(r(e)+(d?r.rangeBand()/2:0))+",0)"})),f&&C.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"});break;case"right":_.enter().append("text").attr("class","nv-axislabel"),_.style("text-anchor",c?"middle":"begin").attr("transform",c?"rotate(90)":"").attr("y",c?12-Math.max(i.right,o):-10).attr("x",c?d3.max(r.range())/2:n.tickPadding()),s&&((w=v.selectAll("g.nv-axisMaxMin").data(r.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),w.exit().remove(),w.attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(r(e))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",n.tickPadding()).style("text-anchor","start").text(function(t,e){var n=b(t);return(""+n).match("NaN")?"":n}),w.watchTransition(m,"min-max right").attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(r.range()[n])+")"}).select("text").style("opacity",1));break;case"left":_.enter().append("text").attr("class","nv-axislabel"),_.style("text-anchor",c?"middle":"end").attr("transform",c?"rotate(-90)":"").attr("y",c?25-Math.max(i.left,o)-(p||0):-10).attr("x",c?-d3.max(r.range())/2:-n.tickPadding()),s&&((w=v.selectAll("g.nv-axisMaxMin").data(r.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),w.exit().remove(),w.attr("transform",function(n,r){return"translate(0,"+t.utils.NaNtoZero(e(n))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-n.tickPadding()).attr("text-anchor","end").text(function(t,e){var n=b(t);return(""+n).match("NaN")?"":n}),w.watchTransition(m,"min-max right").attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(r.range()[n])+")"}).select("text").style("opacity",1))}if(_.text(function(t){return t}),!s||"left"!==n.orient()&&"right"!==n.orient()||(y.selectAll("g").each(function(t,e){d3.select(this).select("text").attr("opacity",1),(r(t)<r.range()[1]+10||r(t)>r.range()[0]-10)&&((t>1e-10||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),r.domain()[0]==r.domain()[1]&&0==r.domain()[0]&&v.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),s&&("top"===n.orient()||"bottom"===n.orient())){var T=[];v.selectAll("g.nv-axisMaxMin").each(function(t,e){try{T.push(e?r(t)-this.getBoundingClientRect().width-4:r(t)+this.getBoundingClientRect().width+4)}catch(n){T.push(e?r(t)-4:r(t)+4)}}),y.selectAll("g").each(function(t,e){(r(t)<T[0]||r(t)>T[1])&&(t>1e-10||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}y.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t)/1e6)&&void 0!==t}).classed("zero",!0),e=r.copy()}),m.renderEnd("axis immediate"),y}return y.axis=n,y.dispatch=v,y.options=t.utils.optionsFunc.bind(y),y._options=Object.create({},{axisLabelDistance:{get:function(){return p},set:function(t){p=t}},staggerLabels:{get:function(){return f},set:function(t){f=t}},rotateLabels:{get:function(){return l},set:function(t){l=t}},rotateYLabel:{get:function(){return c},set:function(t){c=t}},showMaxMin:{get:function(){return s},set:function(t){s=t}},axisLabel:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return a},set:function(t){a=t}},ticks:{get:function(){return h},set:function(t){h=t}},width:{get:function(){return o},set:function(t){o=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},duration:{get:function(){return g},set:function(t){m.reset(g=t)}},scale:{get:function(){return r},set:function(e){n.scale(r=e),d="function"==typeof r.rangeBands,t.utils.inheritOptionsD3(y,r,["domain","range","rangeBand","rangeBands"])}}}),t.utils.initOptions(y),t.utils.inheritOptionsD3(y,n,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),t.utils.inheritOptionsD3(y,r,["domain","range","rangeBand","rangeBands"]),y},t.models.boxPlot=function(){"use strict";var e,n,r,i,o,a,u={top:0,right:0,bottom:0,left:0},s=960,l=500,c=Math.floor(1e4*Math.random()),f=d3.scale.ordinal(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},g=t.utils.defaultColor(),v=null,m=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),y=250,b=null,x=t.utils.renderWatch(m,y);function w(c){return x.reset(),c.each(function(c){var p=s-u.left-u.right,w=l-u.top-u.bottom;v=d3.select(this),t.utils.initSVG(v),f.domain(e||c.map(function(t,e){return h(t,e)})).rangeBands(r||[0,p],.1);var k=[];n||(k=[d3.min(c.map(function(t){var e=[];return e.push(t.values.Q1),t.values.hasOwnProperty("whisker_low")&&null!==t.values.whisker_low&&e.push(t.values.whisker_low),t.values.hasOwnProperty("outliers")&&null!==t.values.outliers&&(e=e.concat(t.values.outliers)),d3.min(e)})),d3.max(c.map(function(t){var e=[];return e.push(t.values.Q3),t.values.hasOwnProperty("whisker_high")&&null!==t.values.whisker_high&&e.push(t.values.whisker_high),t.values.hasOwnProperty("outliers")&&null!==t.values.outliers&&(e=e.concat(t.values.outliers)),d3.max(e)}))]),d.domain(n||k),d.range(i||[w,0]),o=o||f,a=a||d.copy().range([d(0),d(0)]);var _=v.selectAll("g.nv-wrap").data([c]);_.enter().append("g").attr("class","nvd3 nv-wrap"),_.attr("transform","translate("+u.left+","+u.top+")");var M=_.selectAll(".nv-boxplot").data(function(t){return t}),S=M.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);M.attr("class","nv-boxplot").attr("transform",function(t,e,n){return"translate("+(f(h(t,e))+.05*f.rangeBand())+", 0)"}).classed("hover",function(t){return t.hover}),M.watchTransition(x,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(t,e){return e*y/c.length}).attr("transform",function(t,e){return"translate("+(f(h(t,e))+.05*f.rangeBand())+", 0)"}),M.exit().remove(),S.each(function(t,e){var n=d3.select(this);["low","high"].forEach(function(r){t.values.hasOwnProperty("whisker_"+r)&&null!==t.values["whisker_"+r]&&(n.append("line").style("stroke",t.color?t.color:g(t,e)).attr("class","nv-boxplot-whisker nv-boxplot-"+r),n.append("line").style("stroke",t.color?t.color:g(t,e)).attr("class","nv-boxplot-tick nv-boxplot-"+r))})});var C=M.selectAll(".nv-boxplot-outlier").data(function(t){return t.values.hasOwnProperty("outliers")&&null!==t.values.outliers?t.values.outliers:[]});C.enter().append("circle").style("fill",function(t,e,n){return g(t,n)}).style("stroke",function(t,e,n){return g(t,n)}).on("mouseover",function(t,e,n){d3.select(this).classed("hover",!0),m.elementMouseover({series:{key:t,color:g(t,n)},e:d3.event})}).on("mouseout",function(t,e,n){d3.select(this).classed("hover",!1),m.elementMouseout({series:{key:t,color:g(t,n)},e:d3.event})}).on("mousemove",function(t,e){m.elementMousemove({e:d3.event})}),C.attr("class","nv-boxplot-outlier"),C.watchTransition(x,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*f.rangeBand()).attr("cy",function(t,e,n){return d(t)}).attr("r","3"),C.exit().remove();var A=function(){return null===b?.9*f.rangeBand():Math.min(75,.9*f.rangeBand())},D=function(){return.45*f.rangeBand()-A()/2},T=function(){return.45*f.rangeBand()+A()/2};["low","high"].forEach(function(t){var e="low"===t?"Q1":"Q3";M.select("line.nv-boxplot-whisker.nv-boxplot-"+t).watchTransition(x,"nv-boxplot: boxplots").attr("x1",.45*f.rangeBand()).attr("y1",function(e,n){return d(e.values["whisker_"+t])}).attr("x2",.45*f.rangeBand()).attr("y2",function(t,n){return d(t.values[e])}),M.select("line.nv-boxplot-tick.nv-boxplot-"+t).watchTransition(x,"nv-boxplot: boxplots").attr("x1",D).attr("y1",function(e,n){return d(e.values["whisker_"+t])}).attr("x2",T).attr("y2",function(e,n){return d(e.values["whisker_"+t])})}),["low","high"].forEach(function(t){S.selectAll(".nv-boxplot-"+t).on("mouseover",function(e,n,r){d3.select(this).classed("hover",!0),m.elementMouseover({series:{key:e.values["whisker_"+t],color:g(e,r)},e:d3.event})}).on("mouseout",function(e,n,r){d3.select(this).classed("hover",!1),m.elementMouseout({series:{key:e.values["whisker_"+t],color:g(e,r)},e:d3.event})}).on("mousemove",function(t,e){m.elementMousemove({e:d3.event})})}),S.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(t,e){d3.select(this).classed("hover",!0),m.elementMouseover({key:t.label,value:t.label,series:[{key:"Q3",value:t.values.Q3,color:t.color||g(t,e)},{key:"Q2",value:t.values.Q2,color:t.color||g(t,e)},{key:"Q1",value:t.values.Q1,color:t.color||g(t,e)}],data:t,index:e,e:d3.event})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),m.elementMouseout({key:t.label,value:t.label,series:[{key:"Q3",value:t.values.Q3,color:t.color||g(t,e)},{key:"Q2",value:t.values.Q2,color:t.color||g(t,e)},{key:"Q1",value:t.values.Q1,color:t.color||g(t,e)}],data:t,index:e,e:d3.event})}).on("mousemove",function(t,e){m.elementMousemove({e:d3.event})}),M.select("rect.nv-boxplot-box").watchTransition(x,"nv-boxplot: boxes").attr("y",function(t,e){return d(t.values.Q3)}).attr("width",A).attr("x",D).attr("height",function(t,e){return Math.abs(d(t.values.Q3)-d(t.values.Q1))||1}).style("fill",function(t,e){return t.color||g(t,e)}).style("stroke",function(t,e){return t.color||g(t,e)}),S.append("line").attr("class","nv-boxplot-median"),M.select("line.nv-boxplot-median").watchTransition(x,"nv-boxplot: boxplots line").attr("x1",D).attr("y1",function(t,e){return d(t.values.Q2)}).attr("x2",T).attr("y2",function(t,e){return d(t.values.Q2)}),o=f.copy(),a=d.copy()}),x.renderEnd("nv-boxplot immediate"),w}return w.dispatch=m,w.options=t.utils.optionsFunc.bind(w),w._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},maxBoxWidth:{get:function(){return b},set:function(t){b=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return p},set:function(t){p=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return i},set:function(t){i=t}},id:{get:function(){return c},set:function(t){c=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},color:{get:function(){return g},set:function(e){g=t.utils.getColor(e)}},duration:{get:function(){return y},set:function(t){x.reset(y=t)}}}),t.utils.initOptions(w),w},t.models.boxPlotChart=function(){"use strict";var e,n,r=t.models.boxPlot(),i=t.models.axis(),o=t.models.axis(),a={top:15,right:10,bottom:50,left:60},u=null,s=null,l=t.utils.getColor(),c=!0,f=!0,d=!1,h=!1,p=t.models.tooltip(),g="No Data Available.",v=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),m=250;i.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),o.orient(d?"right":"left").tickFormat(d3.format(",.1f")),p.duration(0);var y=t.utils.renderWatch(v,m);function b(l){return y.reset(),y.models(r),c&&y.models(i),f&&y.models(o),l.each(function(l){var p=d3.select(this);t.utils.initSVG(p);var y=(u||parseInt(p.style("width"))||960)-a.left-a.right,x=(s||parseInt(p.style("height"))||400)-a.top-a.bottom;if(b.update=function(){v.beforeUpdate(),p.transition().duration(m).call(b)},b.container=this,!(l&&l.length&&l.filter(function(t){return t.values.hasOwnProperty("Q1")&&t.values.hasOwnProperty("Q2")&&t.values.hasOwnProperty("Q3")}).length)){var w=p.selectAll(".nv-noData").data([g]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",a.left+y/2).attr("y",a.top+x/2).text(function(t){return t}),b}p.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale().clamp(!0);var k=p.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([l]),_=k.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),M=_.append("defs"),S=k.select("g");if(_.append("g").attr("class","nv-x nv-axis"),_.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),_.append("g").attr("class","nv-barsWrap"),S.attr("transform","translate("+a.left+","+a.top+")"),d&&S.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)"),r.width(y).height(x),S.select(".nv-barsWrap").datum(l.filter(function(t){return!t.disabled})).transition().call(r),M.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect"),S.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",e.rangeBand()*(h?2:1)).attr("height",16).attr("x",-e.rangeBand()/(h?1:2)),c){i.scale(e).ticks(t.utils.calcTicksX(y/100,l)).tickSize(-x,0),S.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),S.select(".nv-x.nv-axis").call(i);var C=S.select(".nv-x.nv-axis").selectAll("g");h&&C.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}f&&(o.scale(n).ticks(Math.floor(x/36)).tickSize(-y,0),S.select(".nv-y.nv-axis").call(o)),S.select(".nv-zeroLine line").attr("x1",0).attr("x2",y).attr("y1",n(0)).attr("y2",n(0))}),y.renderEnd("nv-boxplot chart immediate"),b}return r.dispatch.on("elementMouseover.tooltip",function(t){p.data(t).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){p.data(t).hidden(!0)}),r.dispatch.on("elementMousemove.tooltip",function(t){p.position({top:d3.event.pageY,left:d3.event.pageX})()}),b.dispatch=v,b.boxplot=r,b.xAxis=i,b.yAxis=o,b.tooltip=p,b.options=t.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return s},set:function(t){s=t}},staggerLabels:{get:function(){return h},set:function(t){h=t}},showXAxis:{get:function(){return c},set:function(t){c=t}},showYAxis:{get:function(){return f},set:function(t){f=t}},tooltips:{get:function(){return tooltips},set:function(t){tooltips=t}},tooltipContent:{get:function(){return p},set:function(t){p=t}},noData:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},duration:{get:function(){return m},set:function(t){y.reset(m=t),r.duration(m),i.duration(m),o.duration(m)}},color:{get:function(){return l},set:function(e){l=t.utils.getColor(e),r.color(l)}},rightAlignYAxis:{get:function(){return d},set:function(t){d=t,o.orient(t?"right":"left")}}}),t.utils.inheritOptions(b,r),t.utils.initOptions(b),b},t.models.bullet=function(){"use strict";var e={top:0,right:0,bottom:0,left:0},n="left",r=!1,i=function(t){return t.ranges},o=function(t){return t.markers?t.markers:[0]},a=function(t){return t.measures},u=function(t){return t.rangeLabels?t.rangeLabels:[]},s=function(t){return t.markerLabels?t.markerLabels:[]},l=function(t){return t.measureLabels?t.measureLabels:[]},c=[0],f=380,d=30,h=null,p=null,g=t.utils.getColor(["#1f77b4"]),v=d3.dispatch("elementMouseover","elementMouseout","elementMousemove");function m(n){return n.each(function(n,p){var m=f-e.left-e.right,y=d-e.top-e.bottom;h=d3.select(this),t.utils.initSVG(h);var b=i.call(this,n,p).slice().sort(d3.descending),x=o.call(this,n,p).slice().sort(d3.descending),w=a.call(this,n,p).slice().sort(d3.descending),k=u.call(this,n,p).slice(),_=s.call(this,n,p).slice(),M=l.call(this,n,p).slice(),S=d3.scale.linear().domain(d3.extent(d3.merge([c,b]))).range(r?[m,0]:[0,m]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(S.range()),this.__chart__=S;var C=d3.min(b),A=d3.max(b),D=b[1],T=h.selectAll("g.nv-wrap.nv-bullet").data([n]),L=T.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),E=T.select("g");L.append("rect").attr("class","nv-range nv-rangeMax"),L.append("rect").attr("class","nv-range nv-rangeAvg"),L.append("rect").attr("class","nv-range nv-rangeMin"),L.append("rect").attr("class","nv-measure"),T.attr("transform","translate("+e.left+","+e.top+")");var O=function(t){return Math.abs(S(t)-S(0))},N=function(t){return S(t<0?t:0)};E.select("rect.nv-rangeMax").attr("height",y).attr("width",O(A>0?A:C)).attr("x",N(A>0?A:C)).datum(A>0?A:C),E.select("rect.nv-rangeAvg").attr("height",y).attr("width",O(D)).attr("x",N(D)).datum(D),E.select("rect.nv-rangeMin").attr("height",y).attr("width",O(A)).attr("x",N(A)).attr("width",O(A>0?C:A)).attr("x",N(A>0?C:A)).datum(A>0?C:A),E.select("rect.nv-measure").style("fill",g).attr("height",y/3).attr("y",y/3).attr("width",w<0?S(0)-S(w[0]):S(w[0])-S(0)).attr("x",N(w)).on("mouseover",function(){v.elementMouseover({value:w[0],label:M[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){v.elementMousemove({value:w[0],label:M[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){v.elementMouseout({value:w[0],label:M[0]||"Current",color:d3.select(this).style("fill")})});var F=y/6,P=x.map(function(t,e){return{value:t,label:_[e]}});L.selectAll("path.nv-markerTriangle").data(P).enter().append("path").attr("class","nv-markerTriangle").attr("transform",function(t){return"translate("+S(t.value)+","+y/2+")"}).attr("d","M0,"+F+"L"+F+","+-F+" "+-F+","+-F+"Z").on("mouseover",function(t){v.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[S(t.value),y/2]})}).on("mousemove",function(t){v.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){v.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}),T.selectAll(".nv-range").on("mouseover",function(t,e){v.elementMouseover({value:t,label:k[e]||(e?1==e?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})}).on("mousemove",function(){v.elementMousemove({value:w[0],label:M[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){v.elementMouseout({value:t,label:k[e]||(e?1==e?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})})}),m}return m.dispatch=v,m.options=t.utils.optionsFunc.bind(m),m._options=Object.create({},{ranges:{get:function(){return i},set:function(t){i=t}},markers:{get:function(){return o},set:function(t){o=t}},measures:{get:function(){return a},set:function(t){a=t}},forceX:{get:function(){return c},set:function(t){c=t}},width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return d},set:function(t){d=t}},tickFormat:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},orient:{get:function(){return n},set:function(t){r="right"==(n=t)||"bottom"==n}},color:{get:function(){return g},set:function(e){g=t.utils.getColor(e)}}}),t.utils.initOptions(m),m},t.models.bulletChart=function(){"use strict";var e=t.models.bullet(),n=t.models.tooltip(),r="left",i=!1,o={top:5,right:40,bottom:20,left:120},a=function(t){return t.ranges},u=function(t){return t.markers?t.markers:[0]},s=function(t){return t.measures},l=null,c=55,f=null,d=null,h=null,p=d3.dispatch("tooltipShow","tooltipHide");function g(n){return n.each(function(r,h){var p=d3.select(this);t.utils.initSVG(p);var v=t.utils.availableWidth(l,p,o),m=c-o.top-o.bottom;if(g.update=function(){g(n)},g.container=this,!r||!a.call(this,r,h))return t.utils.noData(g,p),g;p.selectAll(".nv-noData").remove();var y=a.call(this,r,h).slice().sort(d3.descending),b=u.call(this,r,h).slice().sort(d3.descending),x=s.call(this,r,h).slice().sort(d3.descending),w=p.selectAll("g.nv-wrap.nv-bulletChart").data([r]),k=w.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),_=w.select("g");k.append("g").attr("class","nv-bulletWrap"),k.append("g").attr("class","nv-titles"),w.attr("transform","translate("+o.left+","+o.top+")");var M=d3.scale.linear().domain([0,Math.max(y[0],b[0],x[0])]).range(i?[v,0]:[0,v]),S=this.__chart__||d3.scale.linear().domain([0,1/0]).range(M.range());this.__chart__=M;var C=k.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(c-o.top-o.bottom)/2+")");C.append("text").attr("class","nv-title").text(function(t){return t.title}),C.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),e.width(v).height(m);var A=_.select(".nv-bulletWrap");d3.transition(A).call(e);var D=f||M.tickFormat(v/100),T=_.selectAll("g.nv-tick").data(M.ticks(d||v/50),function(t){return this.textContent||D(t)}),L=T.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+S(t)+",0)"}).style("opacity",1e-6);L.append("line").attr("y1",m).attr("y2",7*m/6),L.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*m/6).text(D);var E=d3.transition(T).attr("transform",function(t){return"translate("+M(t)+",0)"}).style("opacity",1);E.select("line").attr("y1",m).attr("y2",7*m/6),E.select("text").attr("y",7*m/6),d3.transition(T.exit()).attr("transform",function(t){return"translate("+M(t)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush(),g}return n.duration(0).headerEnabled(!1),e.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.label,value:t.value,color:t.color},n.data(t).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(t){n.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(t){n.position({top:d3.event.pageY,left:d3.event.pageX})()}),g.bullet=e,g.dispatch=p,g.tooltip=n,g.options=t.utils.optionsFunc.bind(g),g._options=Object.create({},{ranges:{get:function(){return a},set:function(t){a=t}},markers:{get:function(){return u},set:function(t){u=t}},measures:{get:function(){return s},set:function(t){s=t}},width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return c},set:function(t){c=t}},tickFormat:{get:function(){return f},set:function(t){f=t}},ticks:{get:function(){return d},set:function(t){d=t}},noData:{get:function(){return h},set:function(t){h=t}},tooltips:{get:function(){return n.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),n.enabled(!!e)}},tooltipContent:{get:function(){return n.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),n.contentGenerator(e)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},orient:{get:function(){return r},set:function(t){i="right"==(r=t)||"bottom"==r}}}),t.utils.inheritOptions(g,e),t.utils.initOptions(g),g},t.models.candlestickBar=function(){"use strict";var e,n,r,i,o,a={top:0,right:0,bottom:0,left:0},u=null,s=null,l=Math.floor(1e4*Math.random()),c=d3.scale.linear(),f=d3.scale.linear(),d=function(t){return t.x},h=function(t){return t.y},p=function(t){return t.open},g=function(t){return t.close},v=function(t){return t.high},m=function(t){return t.low},y=[],b=[],x=!1,w=!0,k=t.utils.defaultColor(),_=!1,M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function S(k){return k.each(function(k){e=d3.select(this);var _=t.utils.availableWidth(u,e,a),S=t.utils.availableHeight(s,e,a);t.utils.initSVG(e);var C=_/k[0].values.length*.45;c.domain(n||d3.extent(k[0].values.map(d).concat(y))),c.range(x?i||[.5*_/k[0].values.length,_*(k[0].values.length-.5)/k[0].values.length]:i||[5+C/2,_-C/2-5]),f.domain(r||[d3.min(k[0].values.map(m).concat(b)),d3.max(k[0].values.map(v).concat(b))]).range(o||[S,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var A=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([k[0].values]),D=A.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),T=D.append("defs"),L=D.append("g"),E=A.select("g");L.append("g").attr("class","nv-ticks"),A.attr("transform","translate("+a.left+","+a.top+")"),e.on("click",function(t,e){M.chartClick({data:t,index:e,pos:d3.event,id:l})}),T.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect"),A.select("#nv-chart-clip-path-"+l+" rect").attr("width",_).attr("height",S),E.attr("clip-path",w?"url(#nv-chart-clip-path-"+l+")":"");var O=A.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});O.exit().remove();var N=O.enter().append("g").attr("class",function(t,e,n){return(p(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e});N.append("line").attr("class","nv-candlestick-lines").attr("transform",function(t,e){return"translate("+c(d(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return f(v(t,e))}).attr("x2",0).attr("y2",function(t,e){return f(m(t,e))}),N.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(t,e){return"translate("+(c(d(t,e))-C/2)+","+(f(h(t,e))-(p(t,e)>g(t,e)?f(g(t,e))-f(p(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",C).attr("height",function(t,e){var n=p(t,e),r=g(t,e);return n>r?f(r)-f(n):f(n)-f(r)}),e.selectAll(".nv-candlestick-lines").transition().attr("transform",function(t,e){return"translate("+c(d(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return f(v(t,e))}).attr("x2",0).attr("y2",function(t,e){return f(m(t,e))}),e.selectAll(".nv-candlestick-rects").transition().attr("transform",function(t,e){return"translate("+(c(d(t,e))-C/2)+","+(f(h(t,e))-(p(t,e)>g(t,e)?f(g(t,e))-f(p(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",C).attr("height",function(t,e){var n=p(t,e),r=g(t,e);return n>r?f(r)-f(n):f(n)-f(r)})}),S}return S.highlightPoint=function(t,n){S.clearHighlights(),e.select(".nv-candlestickBar .nv-tick-0-"+t).classed("hover",n)},S.clearHighlights=function(){e.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},S.dispatch=M,S.options=t.utils.optionsFunc.bind(S),S._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return s},set:function(t){s=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceX:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return b},set:function(t){b=t}},padData:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return w},set:function(t){w=t}},id:{get:function(){return l},set:function(t){l=t}},interactive:{get:function(){return _},set:function(t){_=t}},x:{get:function(){return d},set:function(t){d=t}},y:{get:function(){return h},set:function(t){h=t}},open:{get:function(){return p()},set:function(t){p=t}},close:{get:function(){return g()},set:function(t){g=t}},high:{get:function(){return v},set:function(t){v=t}},low:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return a},set:function(t){a.top=null!=t.top?t.top:a.top,a.right=null!=t.right?t.right:a.right,a.bottom=null!=t.bottom?t.bottom:a.bottom,a.left=null!=t.left?t.left:a.left}},color:{get:function(){return k},set:function(e){k=t.utils.getColor(e)}}}),t.utils.initOptions(S),S},t.models.cumulativeLineChart=function(){"use strict";var e,n,r=t.models.line(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend(),u=t.models.legend(),s=t.interactiveGuideline(),l=t.models.tooltip(),c={top:30,right:30,bottom:50,left:60},f=t.utils.defaultColor(),d=null,h=null,p=!0,g=!0,v=!0,m=!1,y=!0,b=!1,x=!0,w=r.id(),k=t.utils.state(),_=null,M=null,S=function(t){return t.average},C=d3.dispatch("stateChange","changeState","renderEnd"),A=250,D=!1;k.index=0,k.rescaleY=x,i.orient("bottom").tickPadding(7),o.orient(m?"right":"left"),l.valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return i.tickFormat()(t,e)}),u.updateState(!1);var T=d3.scale.linear(),L={i:0,x:0},E=t.utils.renderWatch(C,A),O=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),index:L.i,rescaleY:x}}},N=function(t){return function(e){void 0!==e.index&&(L.i=e.index),void 0!==e.rescaleY&&(x=e.rescaleY),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function F(l){return E.reset(),E.models(r),g&&E.models(i),v&&E.models(o),l.each(function(l){var M=d3.select(this);t.utils.initSVG(M),M.classed("nv-chart-"+w,!0);var E,W=this,z=t.utils.availableWidth(d,M,c),R=t.utils.availableHeight(h,M,c);if(F.update=function(){0===A?M.call(F):M.transition().duration(A).call(F)},F.container=this,k.setter(N(l),F.update).getter(O(l)).update(),k.disabled=l.map(function(t){return!!t.disabled}),!_)for(E in _={},k)_[E]=k[E]instanceof Array?k[E].slice(0):k[E];var I=d3.behavior.drag().on("dragstart",function(t,e){d3.select(F.container).style("cursor","ew-resize")}).on("drag",function(t,e){L.x=d3.event.x,L.i=Math.round(T.invert(L.x)),J()}).on("dragend",function(t,e){d3.select(F.container).style("cursor","auto"),k.index=L.i,C.stateChange(k)});if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return t.utils.noData(F,M),F;if(M.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale(),x)r.yDomain(null);else{var H=l.filter(function(t){return!t.disabled}).map(function(t,e){var n=d3.extent(t.values,r.y());return n[0]<-.95&&(n[0]=-.95),[(n[0]-n[1])/(1+n[1]),(n[1]-n[0])/(1+n[0])]}),Y=[d3.min(H,function(t){return t[0]}),d3.max(H,function(t){return t[1]})];r.yDomain(Y)}T.domain([0,l[0].values.length-1]).range([0,z]).clamp(!0),l=function(t,e){return P||(P=r.y()),e.map(function(e,n){if(!e.values)return e;var r=e.values[t];if(null==r)return e;var i=P(r,t);return i<-.95&&!D?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map(function(t,e){return t.display={y:(P(t,e)-i)/(1+i)},t}),e)})}(L.i,l);var B=b?"none":"all",j=M.selectAll("g.nv-wrap.nv-cumulativeLine").data([l]),U=j.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),G=j.select("g");if(U.append("g").attr("class","nv-interactive"),U.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),U.append("g").attr("class","nv-y nv-axis"),U.append("g").attr("class","nv-background"),U.append("g").attr("class","nv-linesWrap").style("pointer-events",B),U.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),U.append("g").attr("class","nv-legendWrap"),U.append("g").attr("class","nv-controlsWrap"),p&&(a.width(z),G.select(".nv-legendWrap").datum(l).call(a),c.top!=a.height()&&(c.top=a.height(),R=t.utils.availableHeight(h,M,c)),G.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")),y){var V=[{key:"Re-scale y-axis",disabled:!x}];u.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),G.select(".nv-controlsWrap").datum(V).attr("transform","translate(0,"+-c.top+")").call(u)}j.attr("transform","translate("+c.left+","+c.top+")"),m&&G.select(".nv-y.nv-axis").attr("transform","translate("+z+",0)");var q=l.filter(function(t){return t.tempDisabled});j.select(".tempDisabled").remove(),q.length&&j.append("text").attr("class","tempDisabled").attr("x",z/2).attr("y","-.71em").style("text-anchor","end").text(q.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),b&&(s.width(z).height(R).margin({left:c.left,top:c.top}).svgContainer(M).xScale(e),j.select(".nv-interactive").call(s)),U.select(".nv-background").append("rect"),G.select(".nv-background rect").attr("width",z).attr("height",R),r.y(function(t){return t.display.y}).width(z).height(R).color(l.map(function(t,e){return t.color||f(t,e)}).filter(function(t,e){return!l[e].disabled&&!l[e].tempDisabled}));var $=G.select(".nv-linesWrap").datum(l.filter(function(t){return!t.disabled&&!t.tempDisabled}));$.call(r),l.forEach(function(t,e){t.seriesIndex=e});var X=l.filter(function(t){return!t.disabled&&!!S(t)}),Z=G.select(".nv-avgLinesWrap").selectAll("line").data(X,function(t){return t.key}),K=function(t){var e=n(S(t));return e<0?0:e>R?R:e};Z.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t,e){return r.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",z).attr("y1",K).attr("y2",K),Z.style("stroke-opacity",function(t){var e=n(S(t));return e<0||e>R?0:1}).attr("x1",0).attr("x2",z).attr("y1",K).attr("y2",K),Z.exit().remove();var Q=$.selectAll(".nv-indexLine").data([L]);function J(){Q.data([L]);var t=F.duration();F.duration(0),F.update(),F.duration(t)}Q.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(I),Q.attr("transform",function(t){return"translate("+T(t.i)+",0)"}).attr("height",R),g&&(i.scale(e)._ticks(t.utils.calcTicksX(z/70,l)).tickSize(-R,0),G.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),G.select(".nv-x.nv-axis").call(i)),v&&(o.scale(n)._ticks(t.utils.calcTicksY(R/36,l)).tickSize(-z,0),G.select(".nv-y.nv-axis").call(o)),G.select(".nv-background rect").on("click",function(){L.x=d3.mouse(this)[0],L.i=Math.round(T.invert(L.x)),k.index=L.i,C.stateChange(k),J()}),r.dispatch.on("elementClick",function(t){L.i=t.pointIndex,L.x=T(L.i),k.index=L.i,C.stateChange(k),J()}),u.dispatch.on("legendClick",function(t,e){t.disabled=!t.disabled,k.rescaleY=x=!t.disabled,C.stateChange(k),F.update()}),a.dispatch.on("stateChange",function(t){for(var e in t)k[e]=t[e];C.stateChange(k),F.update()}),s.dispatch.on("elementMousemove",function(e){r.clearHighlights();var n,a,u,d=[];if(l.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(i,o){a=t.interactiveBisect(i.values,e.pointXValue,F.x()),r.highlightPoint(o,a,!0);var s=i.values[a];void 0!==s&&(void 0===n&&(n=s),void 0===u&&(u=F.xScale()(F.x()(s,a))),d.push({key:i.key,value:F.y()(s,a),color:f(i,i.seriesIndex)}))}),d.length>2){var h=F.yScale().invert(e.mouseY),p=.03*Math.abs(F.yScale().domain()[0]-F.yScale().domain()[1]),g=t.nearestValueIndex(d.map(function(t){return t.value}),h,p);null!==g&&(d[g].highlight=!0)}var v=i.tickFormat()(F.x()(n,a),a);s.tooltip.position({left:u+c.left,top:e.mouseY+c.top}).chartContainer(W.parentNode).valueFormatter(function(t,e){return o.tickFormat()(t)}).data({value:v,series:d})(),s.renderGuideLine(u)}),s.dispatch.on("elementMouseout",function(t){r.clearHighlights()}),C.on("changeState",function(t){void 0!==t.disabled&&(l.forEach(function(e,n){e.disabled=t.disabled[n]}),k.disabled=t.disabled),void 0!==t.index&&(L.i=t.index,L.x=T(L.i),k.index=t.index,Q.data([L])),void 0!==t.rescaleY&&(x=t.rescaleY),F.update()})}),E.renderEnd("cumulativeLineChart immediate"),F}r.dispatch.on("elementMouseover.tooltip",function(t){var e={x:F.x()(t.point),y:F.y()(t.point),color:t.point.color};t.point=e,l.data(t).position(t.pos).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0)});var P=null;return F.dispatch=C,F.lines=r,F.legend=a,F.controls=u,F.xAxis=i,F.yAxis=o,F.interactiveLayer=s,F.state=k,F.tooltip=l,F.options=t.utils.optionsFunc.bind(F),F._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return h},set:function(t){h=t}},rescaleY:{get:function(){return x},set:function(t){x=t}},showControls:{get:function(){return y},set:function(t){y=t}},showLegend:{get:function(){return p},set:function(t){p=t}},average:{get:function(){return S},set:function(t){S=t}},defaultState:{get:function(){return _},set:function(t){_=t}},noData:{get:function(){return M},set:function(t){M=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},noErrorCheck:{get:function(){return D},set:function(t){D=t}},tooltips:{get:function(){return l.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),l.enabled(!!e)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),l.contentGenerator(e)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return f},set:function(e){f=t.utils.getColor(e),a.color(f)}},useInteractiveGuideline:{get:function(){return b},set:function(t){b=t,!0===t&&(F.interactive(!1),F.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return m},set:function(t){m=t,o.orient(t?"right":"left")}},duration:{get:function(){return A},set:function(t){r.duration(A=t),i.duration(A),o.duration(A),E.reset(A)}}}),t.utils.inheritOptions(F,r),t.utils.initOptions(F),F},t.models.discreteBar=function(){"use strict";var e,n,r,i,o,a,u,s={top:0,right:0,bottom:0,left:0},l=960,c=500,f=Math.floor(1e4*Math.random()),d=d3.scale.ordinal(),h=d3.scale.linear(),p=function(t){return t.x},g=function(t){return t.y},v=[0],m=t.utils.defaultColor(),y=!1,b=d3.format(",.2f"),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),w="discreteBar",k=250,_=t.utils.renderWatch(x,k);function M(f){return _.reset(),f.each(function(f){var k=l-s.left-s.right,M=c-s.top-s.bottom;e=d3.select(this),t.utils.initSVG(e),f.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var S=n&&r?[]:f.map(function(t){return t.values.map(function(t,e){return{x:p(t,e),y:g(t,e),y0:t.y0}})});d.domain(n||d3.merge(S).map(function(t){return t.x})).rangeBands(i||[0,k],.1),h.domain(r||d3.extent(d3.merge(S).map(function(t){return t.y}).concat(v))),h.range(y?o||[M-(h.domain()[0]<0?12:0),h.domain()[1]>0?12:0]:o||[M,0]),a=a||d,u=u||h.copy().range([h(0),h(0)]);var C=e.selectAll("g.nv-wrap.nv-discretebar").data([f]),A=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");C.select("g"),A.append("g").attr("class","nv-groups"),C.attr("transform","translate("+s.left+","+s.top+")");var D=C.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});D.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),D.exit().watchTransition(_,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),D.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),D.watchTransition(_,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var T=D.selectAll("g.nv-bar").data(function(t){return t.values});T.exit().remove();var L=T.enter().append("g").attr("transform",function(t,e,n){return"translate("+(d(p(t,e))+.05*d.rangeBand())+", "+h(0)+")"}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),x.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),x.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){x.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){x.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,e){x.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});L.append("rect").attr("height",0).attr("width",.9*d.rangeBand()/f.length),y?(L.append("text").attr("text-anchor","middle"),T.select("text").text(function(t,e){return b(g(t,e))}).watchTransition(_,"discreteBar: bars text").attr("x",.9*d.rangeBand()/2).attr("y",function(t,e){return g(t,e)<0?h(g(t,e))-h(0)+12:-4})):T.selectAll("text").remove(),T.attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||m(t,e)}).style("stroke",function(t,e){return t.color||m(t,e)}).select("rect").attr("class",w).watchTransition(_,"discreteBar: bars rect").attr("width",.9*d.rangeBand()/f.length),T.watchTransition(_,"discreteBar: bars").attr("transform",function(t,e){return"translate("+(d(p(t,e))+.05*d.rangeBand())+", "+(g(t,e)<0?h(0):h(0)-h(g(t,e))<1?h(0)-1:h(g(t,e)))+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(h(g(t,e))-h(r&&r[0]||0))||1)}),a=d.copy(),u=h.copy()}),_.renderEnd("discreteBar immediate"),M}return M.dispatch=x,M.options=t.utils.optionsFunc.bind(M),M._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return c},set:function(t){c=t}},forceY:{get:function(){return v},set:function(t){v=t}},showValues:{get:function(){return y},set:function(t){y=t}},x:{get:function(){return p},set:function(t){p=t}},y:{get:function(){return g},set:function(t){g=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},valueFormat:{get:function(){return b},set:function(t){b=t}},id:{get:function(){return f},set:function(t){f=t}},rectClass:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},color:{get:function(){return m},set:function(e){m=t.utils.getColor(e)}},duration:{get:function(){return k},set:function(t){_.reset(k=t)}}}),t.utils.initOptions(M),M},t.models.discreteBarChart=function(){"use strict";var e,n,r=t.models.discreteBar(),i=t.models.axis(),o=t.models.axis(),a=t.models.tooltip(),u={top:15,right:10,bottom:50,left:60},s=null,l=null,c=t.utils.getColor(),f=!0,d=!0,h=!1,p=!1,g=null,v=d3.dispatch("beforeUpdate","renderEnd"),m=250;i.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),o.orient(h?"right":"left").tickFormat(d3.format(",.1f")),a.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return o.tickFormat()(t,e)}).keyFormatter(function(t,e){return i.tickFormat()(t,e)});var y=t.utils.renderWatch(v,m);function b(a){return y.reset(),y.models(r),f&&y.models(i),d&&y.models(o),a.each(function(a){var c=d3.select(this);t.utils.initSVG(c);var g=t.utils.availableWidth(s,c,u),y=t.utils.availableHeight(l,c,u);if(b.update=function(){v.beforeUpdate(),c.transition().duration(m).call(b)},b.container=this,!(a&&a.length&&a.filter(function(t){return t.values.length}).length))return t.utils.noData(b,c),b;c.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale().clamp(!0);var x=c.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([a]),w=x.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),k=w.append("defs"),_=x.select("g");if(w.append("g").attr("class","nv-x nv-axis"),w.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),w.append("g").attr("class","nv-barsWrap"),_.attr("transform","translate("+u.left+","+u.top+")"),h&&_.select(".nv-y.nv-axis").attr("transform","translate("+g+",0)"),r.width(g).height(y),_.select(".nv-barsWrap").datum(a.filter(function(t){return!t.disabled})).transition().call(r),k.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect"),_.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",e.rangeBand()*(p?2:1)).attr("height",16).attr("x",-e.rangeBand()/(p?1:2)),f){i.scale(e)._ticks(t.utils.calcTicksX(g/100,a)).tickSize(-y,0),_.select(".nv-x.nv-axis").attr("transform","translate(0,"+(n.range()[0]+(r.showValues()&&n.domain()[0]<0?16:0))+")"),_.select(".nv-x.nv-axis").call(i);var M=_.select(".nv-x.nv-axis").selectAll("g");p&&M.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}d&&(o.scale(n)._ticks(t.utils.calcTicksY(y/36,a)).tickSize(-g,0),_.select(".nv-y.nv-axis").call(o)),_.select(".nv-zeroLine line").attr("x1",0).attr("x2",g).attr("y1",n(0)).attr("y2",n(0))}),y.renderEnd("discreteBar chart immediate"),b}return r.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:b.x()(t.data),value:b.y()(t.data),color:t.color},a.data(t).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){a.hidden(!0)}),r.dispatch.on("elementMousemove.tooltip",function(t){a.position({top:d3.event.pageY,left:d3.event.pageX})()}),b.dispatch=v,b.discretebar=r,b.xAxis=i,b.yAxis=o,b.tooltip=a,b.options=t.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},staggerLabels:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return f},set:function(t){f=t}},showYAxis:{get:function(){return d},set:function(t){d=t}},noData:{get:function(){return g},set:function(t){g=t}},tooltips:{get:function(){return a.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),a.enabled(!!e)}},tooltipContent:{get:function(){return a.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),a.contentGenerator(e)}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return m},set:function(t){y.reset(m=t),r.duration(m),i.duration(m),o.duration(m)}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),r.color(c)}},rightAlignYAxis:{get:function(){return h},set:function(t){h=t,o.orient(t?"right":"left")}}}),t.utils.inheritOptions(b,r),t.utils.initOptions(b),b},t.models.distribution=function(){"use strict";var e,n={top:0,right:0,bottom:0,left:0},r=400,i=8,o="x",a=function(t){return t[o]},u=t.utils.defaultColor(),s=d3.scale.linear(),l=250,c=d3.dispatch("renderEnd"),f=t.utils.renderWatch(c,l);function d(r){return f.reset(),r.each(function(r){var l="x"==o?"y":"x",c=d3.select(this);t.utils.initSVG(c),e=e||s;var d=c.selectAll("g.nv-distribution").data([r]),h=(d.enter().append("g").attr("class","nvd3 nv-distribution").append("g"),d.select("g"));d.attr("transform","translate("+n.left+","+n.top+")");var p=h.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});p.enter().append("g"),p.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return u(t,e)});var g=p.selectAll("line.nv-dist"+o).data(function(t){return t.values});g.enter().append("line").attr(o+"1",function(t,n){return e(a(t,n))}).attr(o+"2",function(t,n){return e(a(t,n))}),f.transition(p.exit().selectAll("line.nv-dist"+o),"dist exit").attr(o+"1",function(t,e){return s(a(t,e))}).attr(o+"2",function(t,e){return s(a(t,e))}).style("stroke-opacity",0).remove(),g.attr("class",function(t,e){return"nv-dist"+o+" nv-dist"+o+"-"+e}).attr(l+"1",0).attr(l+"2",i),f.transition(g,"dist").attr(o+"1",function(t,e){return s(a(t,e))}).attr(o+"2",function(t,e){return s(a(t,e))}),e=s.copy()}),f.renderEnd("distribution immediate"),d}return d.options=t.utils.optionsFunc.bind(d),d.dispatch=c,d.margin=function(t){return arguments.length?(n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left,d):n},d.width=function(t){return arguments.length?(r=t,d):r},d.axis=function(t){return arguments.length?(o=t,d):o},d.size=function(t){return arguments.length?(i=t,d):i},d.getData=function(t){return arguments.length?(a=d3.functor(t),d):a},d.scale=function(t){return arguments.length?(s=t,d):s},d.color=function(e){return arguments.length?(u=t.utils.getColor(e),d):u},d.duration=function(t){return arguments.length?(f.reset(l=t),d):l},d},t.models.furiousLegend=function(){"use strict";var e={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(t){return t.key},o=t.utils.getColor(),a=!0,u=28,s=!0,l=!0,c=!1,f=!1,d=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),h="classic";function p(g){function v(t,e){return"furious"!=h?"#000":f?t.disengaged?o(t,e):"#fff":f?void 0:t.disabled?o(t,e):"#fff"}function m(t,e){return f&&"furious"==h?t.disengaged?"#fff":o(t,e):t.disabled?"#fff":o(t,e)}return g.each(function(p){var g=n-e.left-e.right,y=d3.select(this);t.utils.initSVG(y);var b=y.selectAll("g.nv-legend").data([p]),x=(b.enter().append("g").attr("class","nvd3 nv-legend").append("g"),b.select("g"));b.attr("transform","translate("+e.left+","+e.top+")");var w,k=x.selectAll(".nv-series").data(function(t){return"furious"!=h?t:t.filter(function(t){return!!f||!t.disengaged})}),_=k.enter().append("g").attr("class","nv-series");"classic"==h?(_.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),w=k.select("circle")):"furious"==h&&(_.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),w=k.select("rect"),_.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),k.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",v(t,e))})),_.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var M,S=k.select("text.nv-legend-text");switch(k.on("mouseover",function(t,e){d.legendMouseover(t,e)}).on("mouseout",function(t,e){d.legendMouseout(t,e)}).on("click",function(t,e){d.legendClick(t,e);var n=k.data();l&&("classic"==h?c?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1})):"furious"==h&&(f?(t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled):f||(t.disabled=!t.disabled,t.userDisabled=t.disabled,n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1}))),d.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})}))}).on("dblclick",function(t,e){if(("furious"!=h||!f)&&(d.legendDblclick(t,e),l)){var n=k.data();n.forEach(function(t){t.disabled=!0,"furious"==h&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==h&&(t.userDisabled=t.disabled),d.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),k.classed("nv-disabled",function(t){return t.userDisabled}),k.exit().remove(),S.attr("fill",v).text(i),h){case"furious":M=23;break;case"classic":M=20}if(a){var C=[];k.each(function(e,n){var r,i=d3.select(this).select("text");try{if((r=i.node().getComputedTextLength())<=0)throw Error()}catch(o){r=t.utils.calcApproxTextWidth(i)}C.push(r+u)});for(var A=0,D=0,T=[];D<g&&A<C.length;)T[A]=C[A],D+=C[A++];for(0===A&&(A=1);D>g&&A>1;){T=[],A--;for(var L=0;L<C.length;L++)C[L]>(T[L%A]||0)&&(T[L%A]=C[L]);D=T.reduce(function(t,e,n,r){return t+e})}for(var E=[],O=0,N=0;O<A;O++)E[O]=N,N+=T[O];k.attr("transform",function(t,e){return"translate("+E[e%A]+","+(5+Math.floor(e/A)*M)+")"}),x.attr("transform",s?"translate("+(n-e.right-D)+","+e.top+")":"translate(0,"+e.top+")"),r=e.top+e.bottom+Math.ceil(C.length/A)*M}else{var F,P=5,W=5,z=0;k.attr("transform",function(t,r){var i=d3.select(this).select("text").node().getComputedTextLength()+u;return n<e.left+e.right+(F=W)+i&&(W=F=5,P+=M),(W+=i)>z&&(z=W),"translate("+F+","+P+")"}),x.attr("transform","translate("+(n-e.right-z)+","+e.top+")"),r=e.top+e.bottom+P+15}"furious"==h&&w.attr("width",function(t,e){return S[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),w.style("fill",m).style("stroke",function(t,e){return t.color||o(t,e)})}),p}return p.dispatch=d,p.options=t.utils.optionsFunc.bind(p),p._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return r},set:function(t){r=t}},key:{get:function(){return i},set:function(t){i=t}},align:{get:function(){return a},set:function(t){a=t}},rightAlign:{get:function(){return s},set:function(t){s=t}},padding:{get:function(){return u},set:function(t){u=t}},updateState:{get:function(){return l},set:function(t){l=t}},radioButtonMode:{get:function(){return c},set:function(t){c=t}},expanded:{get:function(){return f},set:function(t){f=t}},vers:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return o},set:function(e){o=t.utils.getColor(e)}}}),t.utils.initOptions(p),p},t.models.historicalBar=function(){"use strict";var e,n,r,i,o={top:0,right:0,bottom:0,left:0},a=null,u=null,s=Math.floor(1e4*Math.random()),l=null,c=d3.scale.linear(),f=d3.scale.linear(),d=function(t){return t.x},h=function(t){return t.y},p=[],g=[0],v=!1,m=!0,y=t.utils.defaultColor(),b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),x=!0,w=t.utils.renderWatch(b,0);function k(_){return _.each(function(k){w.reset(),l=d3.select(this);var _=t.utils.availableWidth(a,l,o),M=t.utils.availableHeight(u,l,o);t.utils.initSVG(l),c.domain(e||d3.extent(k[0].values.map(d).concat(p))),c.range(v?r||[.5*_/k[0].values.length,_*(k[0].values.length-.5)/k[0].values.length]:r||[0,_]),f.domain(n||d3.extent(k[0].values.map(h).concat(g))).range(i||[M,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var S=l.selectAll("g.nv-wrap.nv-historicalBar-"+s).data([k[0].values]),C=S.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+s),A=C.append("defs"),D=C.append("g"),T=S.select("g");D.append("g").attr("class","nv-bars"),S.attr("transform","translate("+o.left+","+o.top+")"),l.on("click",function(t,e){b.chartClick({data:t,index:e,pos:d3.event,id:s})}),A.append("clipPath").attr("id","nv-chart-clip-path-"+s).append("rect"),S.select("#nv-chart-clip-path-"+s+" rect").attr("width",_).attr("height",M),T.attr("clip-path",m?"url(#nv-chart-clip-path-"+s+")":"");var L=S.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return d(t,e)});L.exit().remove(),L.enter().append("rect").attr("x",0).attr("y",function(e,n){return t.utils.NaNtoZero(f(Math.max(0,h(e,n))))}).attr("height",function(e,n){return t.utils.NaNtoZero(Math.abs(f(h(e,n))-f(0)))}).attr("transform",function(t,e){return"translate("+(c(d(t,e))-_/k[0].values.length*.45)+",0)"}).on("mouseover",function(t,e){x&&(d3.select(this).classed("hover",!0),b.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mouseout",function(t,e){x&&(d3.select(this).classed("hover",!1),b.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mousemove",function(t,e){x&&b.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){x&&(b.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(t,e){x&&(b.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}),L.attr("fill",function(t,e){return y(t,e)}).attr("class",function(t,e,n){return(h(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).watchTransition(w,"bars").attr("transform",function(t,e){return"translate("+(c(d(t,e))-_/k[0].values.length*.45)+",0)"}).attr("width",_/k[0].values.length*.9),L.watchTransition(w,"bars").attr("y",function(e,n){var r=h(e,n)<0?f(0):f(0)-f(h(e,n))<1?f(0)-1:f(h(e,n));return t.utils.NaNtoZero(r)}).attr("height",function(e,n){return t.utils.NaNtoZero(Math.max(Math.abs(f(h(e,n))-f(0)),1))})}),w.renderEnd("historicalBar immediate"),k}return k.highlightPoint=function(t,e){l.select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},k.clearHighlights=function(){l.select(".nv-bars .nv-bar.hover").classed("hover",!1)},k.dispatch=b,k.options=t.utils.optionsFunc.bind(k),k._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return u},set:function(t){u=t}},forceX:{get:function(){return p},set:function(t){p=t}},forceY:{get:function(){return g},set:function(t){g=t}},padData:{get:function(){return v},set:function(t){v=t}},x:{get:function(){return d},set:function(t){d=t}},y:{get:function(){return h},set:function(t){h=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return i},set:function(t){i=t}},clipEdge:{get:function(){return m},set:function(t){m=t}},id:{get:function(){return s},set:function(t){s=t}},interactive:{get:function(){return x},set:function(t){x=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return y},set:function(e){y=t.utils.getColor(e)}}}),t.utils.initOptions(k),k},t.models.historicalBarChart=function(e){"use strict";var n,r,i=e||t.models.historicalBar(),o=t.models.axis(),a=t.models.axis(),u=t.models.legend(),s=t.interactiveGuideline(),l=t.models.tooltip(),c={top:30,right:90,bottom:50,left:90},f=t.utils.defaultColor(),d=null,h=null,p=!1,g=!0,v=!0,m=!1,y=!1,b={},x=null,w=null,k=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),_=250;o.orient("bottom").tickPadding(7),a.orient(m?"right":"left"),l.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return a.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)});var M=t.utils.renderWatch(k,0);function S(e){return e.each(function(l){M.reset(),M.models(i),g&&M.models(o),v&&M.models(a);var w=d3.select(this),C=this;t.utils.initSVG(w);var A,D=t.utils.availableWidth(d,w,c),T=t.utils.availableHeight(h,w,c);if(S.update=function(){w.transition().duration(_).call(S)},S.container=this,b.disabled=l.map(function(t){return!!t.disabled}),!x)for(A in x={},b)x[A]=b[A]instanceof Array?b[A].slice(0):b[A];if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return t.utils.noData(S,w),S;w.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var L=w.selectAll("g.nv-wrap.nv-historicalBarChart").data([l]),E=L.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),O=L.select("g");E.append("g").attr("class","nv-x nv-axis"),E.append("g").attr("class","nv-y nv-axis"),E.append("g").attr("class","nv-barsWrap"),E.append("g").attr("class","nv-legendWrap"),E.append("g").attr("class","nv-interactive"),p&&(u.width(D),O.select(".nv-legendWrap").datum(l).call(u),c.top!=u.height()&&(c.top=u.height(),T=t.utils.availableHeight(h,w,c)),L.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")),L.attr("transform","translate("+c.left+","+c.top+")"),m&&O.select(".nv-y.nv-axis").attr("transform","translate("+D+",0)"),y&&(s.width(D).height(T).margin({left:c.left,top:c.top}).svgContainer(w).xScale(n),L.select(".nv-interactive").call(s)),i.width(D).height(T).color(l.map(function(t,e){return t.color||f(t,e)}).filter(function(t,e){return!l[e].disabled})),O.select(".nv-barsWrap").datum(l.filter(function(t){return!t.disabled})).transition().call(i),g&&(o.scale(n)._ticks(t.utils.calcTicksX(D/100,l)).tickSize(-T,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),O.select(".nv-x.nv-axis").transition().call(o)),v&&(a.scale(r)._ticks(t.utils.calcTicksY(T/36,l)).tickSize(-D,0),O.select(".nv-y.nv-axis").transition().call(a)),s.dispatch.on("elementMousemove",function(e){i.clearHighlights();var n,r,u,d=[];l.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(o,a){r=t.interactiveBisect(o.values,e.pointXValue,S.x()),i.highlightPoint(r,!0);var s=o.values[r];void 0!==s&&(void 0===n&&(n=s),void 0===u&&(u=S.xScale()(S.x()(s,r))),d.push({key:o.key,value:S.y()(s,r),color:f(o,o.seriesIndex),data:o.values[r]}))});var h=o.tickFormat()(S.x()(n,r));s.tooltip.position({left:u+c.left,top:e.mouseY+c.top}).chartContainer(C.parentNode).valueFormatter(function(t,e){return a.tickFormat()(t)}).data({value:h,index:r,series:d})(),s.renderGuideLine(u)}),s.dispatch.on("elementMouseout",function(t){k.tooltipHide(),i.clearHighlights()}),u.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,l.filter(function(t){return!t.disabled}).length||l.map(function(t){return t.disabled=!1,L.selectAll(".nv-series").classed("disabled",!1),t}),b.disabled=l.map(function(t){return!!t.disabled}),k.stateChange(b),e.transition().call(S)}),u.dispatch.on("legendDblclick",function(t){l.forEach(function(t){t.disabled=!0}),t.disabled=!1,b.disabled=l.map(function(t){return!!t.disabled}),k.stateChange(b),S.update()}),k.on("changeState",function(t){void 0!==t.disabled&&(l.forEach(function(e,n){e.disabled=t.disabled[n]}),b.disabled=t.disabled),S.update()})}),M.renderEnd("historicalBarChart immediate"),S}return i.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:S.x()(t.data),value:S.y()(t.data),color:t.color},l.data(t).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(t){l.position({top:d3.event.pageY,left:d3.event.pageX})()}),S.dispatch=k,S.bars=i,S.legend=u,S.xAxis=o,S.yAxis=a,S.interactiveLayer=s,S.tooltip=l,S.options=t.utils.optionsFunc.bind(S),S._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},defaultState:{get:function(){return x},set:function(t){x=t}},noData:{get:function(){return w},set:function(t){w=t}},tooltips:{get:function(){return l.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),l.enabled(!!e)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),l.contentGenerator(e)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return f},set:function(e){f=t.utils.getColor(e),u.color(f),i.color(f)}},duration:{get:function(){return _},set:function(t){M.reset(_=t),a.duration(_),o.duration(_)}},rightAlignYAxis:{get:function(){return m},set:function(t){m=t,a.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return y},set:function(t){y=t,!0===t&&S.interactive(!1)}}}),t.utils.inheritOptions(S,i),t.utils.initOptions(S),S},t.models.ohlcBarChart=function(){var e=t.models.historicalBarChart(t.models.ohlcBar());return e.useInteractiveGuideline(!0),e.interactiveLayer.tooltip.contentGenerator(function(t){var n=t.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+e.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+e.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+e.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+e.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),e},t.models.candlestickBarChart=function(){var e=t.models.historicalBarChart(t.models.candlestickBar());return e.useInteractiveGuideline(!0),e.interactiveLayer.tooltip.contentGenerator(function(t){var n=t.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+e.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+e.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+e.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+e.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),e},t.models.legend=function(){"use strict";var e={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(t){return t.key},o=t.utils.getColor(),a=!0,u=32,s=!0,l=!0,c=!1,f=!1,d=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),h="classic";function p(g){function v(t,e){return"furious"!=h?"#000":f?t.disengaged?"#000":"#fff":f?void 0:(t.color||(t.color=o(t,e)),t.disabled?t.color:"#fff")}function m(t,e){return f&&"furious"==h&&t.disengaged?"#eee":t.color||o(t,e)}function y(t,e){return f&&"furious"==h?1:t.disabled?0:1}return g.each(function(o){var p=n-e.left-e.right,g=d3.select(this);t.utils.initSVG(g);var b=g.selectAll("g.nv-legend").data([o]),x=b.enter().append("g").attr("class","nvd3 nv-legend").append("g"),w=b.select("g");b.attr("transform","translate("+e.left+","+e.top+")");var k,_,M=w.selectAll(".nv-series").data(function(t){return"furious"!=h?t:t.filter(function(t){return!!f||!t.disengaged})}),S=M.enter().append("g").attr("class","nv-series");switch(h){case"furious":_=23;break;case"classic":_=20}"classic"==h?(S.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),k=M.select("circle")):"furious"==h&&(S.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),k=M.select(".nv-legend-symbol"),S.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),M.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",v(t,e))})),S.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var C=M.select("text.nv-legend-text");M.on("mouseover",function(t,e){d.legendMouseover(t,e)}).on("mouseout",function(t,e){d.legendMouseout(t,e)}).on("click",function(t,e){d.legendClick(t,e);var n=M.data();l&&("classic"==h?c?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1})):"furious"==h&&(f?(t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled):f||(t.disabled=!t.disabled,t.userDisabled=t.disabled,n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1}))),d.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})}))}).on("dblclick",function(t,e){if(("furious"!=h||!f)&&(d.legendDblclick(t,e),l)){var n=M.data();n.forEach(function(t){t.disabled=!0,"furious"==h&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==h&&(t.userDisabled=t.disabled),d.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),M.classed("nv-disabled",function(t){return t.userDisabled}),M.exit().remove(),C.attr("fill",v).text(i);var A=0;if(a){var D=[];M.each(function(e,n){var r,i=d3.select(this).select("text");try{if((r=i.node().getComputedTextLength())<=0)throw Error()}catch(o){r=t.utils.calcApproxTextWidth(i)}D.push(r+u)});var T=0,L=[];for(A=0;A<p&&T<D.length;)L[T]=D[T],A+=D[T++];for(0===T&&(T=1);A>p&&T>1;){L=[],T--;for(var E=0;E<D.length;E++)D[E]>(L[E%T]||0)&&(L[E%T]=D[E]);A=L.reduce(function(t,e,n,r){return t+e})}for(var O=[],N=0,F=0;N<T;N++)O[N]=F,F+=L[N];M.attr("transform",function(t,e){return"translate("+O[e%T]+","+(5+Math.floor(e/T)*_)+")"}),w.attr("transform",s?"translate("+(n-e.right-A)+","+e.top+")":"translate(0,"+e.top+")"),r=e.top+e.bottom+Math.ceil(D.length/T)*_}else{var P,W=5,z=5,R=0;M.attr("transform",function(t,r){var i=d3.select(this).select("text").node().getComputedTextLength()+u;return n<e.left+e.right+(P=z)+i&&(z=P=5,W+=_),(z+=i)>R&&(R=z),A<P+R&&(A=P+R),"translate("+P+","+W+")"}),w.attr("transform","translate("+(n-e.right-R)+","+e.top+")"),r=e.top+e.bottom+W+15}"furious"==h&&(k.attr("width",function(t,e){return C[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),x.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),w.select(".nv-legend-bg").transition().duration(300).attr("x",-_).attr("width",A+_-12).attr("height",r+10).attr("y",-e.top-10).attr("opacity",f?1:0)),k.style("fill",m).style("fill-opacity",y).style("stroke",m)}),p}return p.dispatch=d,p.options=t.utils.optionsFunc.bind(p),p._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return r},set:function(t){r=t}},key:{get:function(){return i},set:function(t){i=t}},align:{get:function(){return a},set:function(t){a=t}},rightAlign:{get:function(){return s},set:function(t){s=t}},padding:{get:function(){return u},set:function(t){u=t}},updateState:{get:function(){return l},set:function(t){l=t}},radioButtonMode:{get:function(){return c},set:function(t){c=t}},expanded:{get:function(){return f},set:function(t){f=t}},vers:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return o},set:function(e){o=t.utils.getColor(e)}}}),t.utils.initOptions(p),p},t.models.line=function(){"use strict";var e,n,r=t.models.scatter(),i={top:0,right:0,bottom:0,left:0},o=960,a=500,u=null,s=1.5,l=t.utils.defaultColor(),c=function(t){return t.x},f=function(t){return t.y},d=function(t,e){return!isNaN(f(t,e))&&null!==f(t,e)},h=function(t){return t.area},p=!1,g="linear",v=250,m=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");r.pointSize(16).pointDomain([16,256]);var y,b,x=t.utils.renderWatch(m,v);function w(v){return x.reset(),x.models(r),v.each(function(v){u=d3.select(this);var m=t.utils.availableWidth(o,u,i),w=t.utils.availableHeight(a,u,i);t.utils.initSVG(u),e=r.xScale(),n=r.yScale(),y=y||e,b=b||n;var k=u.selectAll("g.nv-wrap.nv-line").data([v]),_=k.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),M=_.append("defs"),S=_.append("g"),C=k.select("g");S.append("g").attr("class","nv-groups"),S.append("g").attr("class","nv-scatterWrap"),k.attr("transform","translate("+i.left+","+i.top+")"),r.width(m).height(w);var A=k.select(".nv-scatterWrap");A.call(r),M.append("clipPath").attr("id","nv-edge-clip-"+r.id()).append("rect"),k.select("#nv-edge-clip-"+r.id()+" rect").attr("width",m).attr("height",w>0?w:0),C.attr("clip-path",p?"url(#nv-edge-clip-"+r.id()+")":""),A.attr("clip-path",p?"url(#nv-edge-clip-"+r.id()+")":"");var D=k.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});D.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",function(t){return t.strokeWidth||s}).style("fill-opacity",1e-6),D.exit().remove(),D.attr("class",function(t,e){return(t.classed||"")+" nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return l(t,e)}).style("stroke",function(t,e){return l(t,e)}),D.watchTransition(x,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(t){return t.fillOpacity||.5});var T=D.selectAll("path.nv-area").data(function(t){return h(t)?[t]:[]});T.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(g).defined(d).x(function(e,n){return t.utils.NaNtoZero(y(c(e,n)))}).y0(function(e,n){return t.utils.NaNtoZero(b(f(e,n)))}).y1(function(t,e){return b(n.domain()[0]<=0?n.domain()[1]>=0?0:n.domain()[1]:n.domain()[0])}).apply(this,[e.values])}),D.exit().selectAll("path.nv-area").remove(),T.watchTransition(x,"line: areaPaths").attr("d",function(r){return d3.svg.area().interpolate(g).defined(d).x(function(n,r){return t.utils.NaNtoZero(e(c(n,r)))}).y0(function(e,r){return t.utils.NaNtoZero(n(f(e,r)))}).y1(function(t,e){return n(n.domain()[0]<=0?n.domain()[1]>=0?0:n.domain()[1]:n.domain()[0])}).apply(this,[r.values])});var L=D.selectAll("path.nv-line").data(function(t){return[t.values]});L.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(g).defined(d).x(function(e,n){return t.utils.NaNtoZero(y(c(e,n)))}).y(function(e,n){return t.utils.NaNtoZero(b(f(e,n)))})),L.watchTransition(x,"line: linePaths").attr("d",d3.svg.line().interpolate(g).defined(d).x(function(n,r){return t.utils.NaNtoZero(e(c(n,r)))}).y(function(e,r){return t.utils.NaNtoZero(n(f(e,r)))})),y=e.copy(),b=n.copy()}),x.renderEnd("line immediate"),w}return w.dispatch=m,w.scatter=r,r.dispatch.on("elementClick",function(){m.elementClick.apply(this,arguments)}),r.dispatch.on("elementMouseover",function(){m.elementMouseover.apply(this,arguments)}),r.dispatch.on("elementMouseout",function(){m.elementMouseout.apply(this,arguments)}),w.options=t.utils.optionsFunc.bind(w),w._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},defined:{get:function(){return d},set:function(t){d=t}},interpolate:{get:function(){return g},set:function(t){g=t}},clipEdge:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},duration:{get:function(){return v},set:function(t){x.reset(v=t),r.duration(v)}},isArea:{get:function(){return h},set:function(t){h=d3.functor(t)}},x:{get:function(){return c},set:function(t){c=t,r.x(t)}},y:{get:function(){return f},set:function(t){f=t,r.y(t)}},color:{get:function(){return l},set:function(e){l=t.utils.getColor(e),r.color(l)}}}),t.utils.inheritOptions(w,r),t.utils.initOptions(w),w},t.models.lineChart=function(){"use strict";var e,n,r=t.models.line(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend(),u=t.interactiveGuideline(),s=t.models.tooltip(),l={top:30,right:20,bottom:50,left:60},c=t.utils.defaultColor(),f=null,d=null,h=!0,p=!0,g=!0,v=!1,m=!1,y=t.utils.state(),b=null,x=null,w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),k=250;i.orient("bottom").tickPadding(7),o.orient(v?"right":"left"),s.valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return i.tickFormat()(t,e)});var _=t.utils.renderWatch(w,k),M=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},S=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function C(s){return _.reset(),_.models(r),p&&_.models(i),g&&_.models(o),s.each(function(s){var x=d3.select(this),_=this;t.utils.initSVG(x);var A,D=t.utils.availableWidth(f,x,l),T=t.utils.availableHeight(d,x,l);if(C.update=function(){0===k?x.call(C):x.transition().duration(k).call(C)},C.container=this,y.setter(S(s),C.update).getter(M(s)).update(),y.disabled=s.map(function(t){return!!t.disabled}),!b)for(A in b={},y)b[A]=y[A]instanceof Array?y[A].slice(0):y[A];if(!(s&&s.length&&s.filter(function(t){return t.values.length}).length))return t.utils.noData(C,x),C;x.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale();var L=x.selectAll("g.nv-wrap.nv-lineChart").data([s]),E=L.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),O=L.select("g");E.append("rect").style("opacity",0),E.append("g").attr("class","nv-x nv-axis"),E.append("g").attr("class","nv-y nv-axis"),E.append("g").attr("class","nv-linesWrap"),E.append("g").attr("class","nv-legendWrap"),E.append("g").attr("class","nv-interactive"),O.select("rect").attr("width",D).attr("height",T>0?T:0),h&&(a.width(D),O.select(".nv-legendWrap").datum(s).call(a),l.top!=a.height()&&(l.top=a.height(),T=t.utils.availableHeight(d,x,l)),L.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")),L.attr("transform","translate("+l.left+","+l.top+")"),v&&O.select(".nv-y.nv-axis").attr("transform","translate("+D+",0)"),m&&(u.width(D).height(T).margin({left:l.left,top:l.top}).svgContainer(x).xScale(e),L.select(".nv-interactive").call(u)),r.width(D).height(T).color(s.map(function(t,e){return t.color||c(t,e)}).filter(function(t,e){return!s[e].disabled})),O.select(".nv-linesWrap").datum(s.filter(function(t){return!t.disabled})).call(r),p&&(i.scale(e)._ticks(t.utils.calcTicksX(D/100,s)).tickSize(-T,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),O.select(".nv-x.nv-axis").call(i)),g&&(o.scale(n)._ticks(t.utils.calcTicksY(T/36,s)).tickSize(-D,0),O.select(".nv-y.nv-axis").call(o)),a.dispatch.on("stateChange",function(t){for(var e in t)y[e]=t[e];w.stateChange(y),C.update()}),u.dispatch.on("elementMousemove",function(e){r.clearHighlights();var n,a,f,d=[];if(s.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(i,o){a=t.interactiveBisect(i.values,e.pointXValue,C.x());var u=i.values[a],s=C.y()(u,a);null!=s&&r.highlightPoint(o,a,!0),void 0!==u&&(void 0===n&&(n=u),void 0===f&&(f=C.xScale()(C.x()(u,a))),d.push({key:i.key,value:s,color:c(i,i.seriesIndex)}))}),d.length>2){var h=C.yScale().invert(e.mouseY),p=.03*Math.abs(C.yScale().domain()[0]-C.yScale().domain()[1]),g=t.nearestValueIndex(d.map(function(t){return t.value}),h,p);null!==g&&(d[g].highlight=!0)}var v=i.tickFormat()(C.x()(n,a));u.tooltip.position({left:e.mouseX+l.left,top:e.mouseY+l.top}).chartContainer(_.parentNode).valueFormatter(function(t,e){return null==t?"N/A":o.tickFormat()(t)}).data({value:v,index:a,series:d})(),u.renderGuideLine(f)}),u.dispatch.on("elementClick",function(e){var n,i=[];s.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(r){var o=t.interactiveBisect(r.values,e.pointXValue,C.x()),a=r.values[o];if(void 0!==a){void 0===n&&(n=C.xScale()(C.x()(a,o)));var u=C.yScale()(C.y()(a,o));i.push({point:a,pointIndex:o,pos:[n,u],seriesIndex:r.seriesIndex,series:r})}}),r.dispatch.elementClick(i)}),u.dispatch.on("elementMouseout",function(t){r.clearHighlights()}),w.on("changeState",function(t){void 0!==t.disabled&&s.length===t.disabled.length&&(s.forEach(function(e,n){e.disabled=t.disabled[n]}),y.disabled=t.disabled),C.update()})}),_.renderEnd("lineChart immediate"),C}return r.dispatch.on("elementMouseover.tooltip",function(t){s.data(t).position(t.pos).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){s.hidden(!0)}),C.dispatch=w,C.lines=r,C.legend=a,C.xAxis=i,C.yAxis=o,C.interactiveLayer=u,C.tooltip=s,C.dispatch=w,C.options=t.utils.optionsFunc.bind(C),C._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return d},set:function(t){d=t}},showLegend:{get:function(){return h},set:function(t){h=t}},showXAxis:{get:function(){return p},set:function(t){p=t}},showYAxis:{get:function(){return g},set:function(t){g=t}},defaultState:{get:function(){return b},set:function(t){b=t}},noData:{get:function(){return x},set:function(t){x=t}},tooltips:{get:function(){return s.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),s.enabled(!!e)}},tooltipContent:{get:function(){return s.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),s.contentGenerator(e)}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return k},set:function(t){_.reset(k=t),r.duration(k),i.duration(k),o.duration(k)}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),a.color(c),r.color(c)}},rightAlignYAxis:{get:function(){return v},set:function(t){o.orient((v=t)?"right":"left")}},useInteractiveGuideline:{get:function(){return m},set:function(t){(m=t)&&(r.interactive(!1),r.useVoronoi(!1))}}}),t.utils.inheritOptions(C,r),t.utils.initOptions(C),C},t.models.linePlusBarChart=function(){"use strict";var e,n,r,i,o,a,u,s=t.models.line(),l=t.models.line(),c=t.models.historicalBar(),f=t.models.historicalBar(),d=t.models.axis(),h=t.models.axis(),p=t.models.axis(),g=t.models.axis(),v=t.models.axis(),m=t.models.axis(),y=t.models.legend(),b=d3.svg.brush(),x=t.models.tooltip(),w={top:30,right:30,bottom:30,left:60},k={top:0,right:30,bottom:20,left:60},_=null,M=null,S=function(t){return t.x},C=function(t){return t.y},A=t.utils.defaultColor(),D=!0,T=!0,L=!1,E=!0,O=50,N=null,F=null,P=d3.dispatch("brush","stateChange","changeState"),W=0,z=t.utils.state(),R=null,I=" (left axis)",H=" (right axis)";s.clipEdge(!0),l.interactive(!1),d.orient("bottom").tickPadding(5),p.orient("left"),g.orient("right"),h.orient("bottom").tickPadding(5),v.orient("left"),m.orient("right"),x.headerEnabled(!0).headerFormatter(function(t,e){return d.tickFormat()(t,e)});var Y=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},B=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function j(x){return x.each(function(x){var F=d3.select(this);t.utils.initSVG(F);var U,G=t.utils.availableWidth(_,F,w),V=t.utils.availableHeight(M,F,w)-(T?O:0),q=O-k.top-k.bottom;if(j.update=function(){F.transition().duration(W).call(j)},j.container=this,z.setter(B(x),j.update).getter(Y(x)).update(),z.disabled=x.map(function(t){return!!t.disabled}),!R)for(U in R={},z)R[U]=z[U]instanceof Array?z[U].slice(0):z[U];if(!(x&&x.length&&x.filter(function(t){return t.values.length}).length))return t.utils.noData(j,F),j;F.selectAll(".nv-noData").remove();var $=x.filter(function(t){return!t.disabled&&t.bar}),X=x.filter(function(t){return!t.bar});n=c.xScale(),r=h.scale(),i=c.yScale(),o=s.yScale(),a=f.yScale(),u=l.yScale();var Z=x.filter(function(t){return!t.disabled&&t.bar}).map(function(t){return t.values.map(function(t,e){return{x:S(t,e),y:C(t,e)}})}),K=x.filter(function(t){return!t.disabled&&!t.bar}).map(function(t){return t.values.map(function(t,e){return{x:S(t,e),y:C(t,e)}})});n.range([0,G]),r.domain(d3.extent(d3.merge(Z.concat(K)),function(t){return t.x})).range([0,G]);var Q=F.selectAll("g.nv-wrap.nv-linePlusBar").data([x]),J=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),tt=Q.select("g");J.append("g").attr("class","nv-legendWrap");var et=J.append("g").attr("class","nv-focus");et.append("g").attr("class","nv-x nv-axis"),et.append("g").attr("class","nv-y1 nv-axis"),et.append("g").attr("class","nv-y2 nv-axis"),et.append("g").attr("class","nv-barsWrap"),et.append("g").attr("class","nv-linesWrap");var nt=J.append("g").attr("class","nv-context");if(nt.append("g").attr("class","nv-x nv-axis"),nt.append("g").attr("class","nv-y1 nv-axis"),nt.append("g").attr("class","nv-y2 nv-axis"),nt.append("g").attr("class","nv-barsWrap"),nt.append("g").attr("class","nv-linesWrap"),nt.append("g").attr("class","nv-brushBackground"),nt.append("g").attr("class","nv-x nv-brush"),D){var rt=y.align()?G/2:G,it=y.align()?rt:0;y.width(rt),tt.select(".nv-legendWrap").datum(x.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?I:H),t})).call(y),w.top!=y.height()&&(w.top=y.height(),V=t.utils.availableHeight(M,F,w)-O),tt.select(".nv-legendWrap").attr("transform","translate("+it+","+-w.top+")")}Q.attr("transform","translate("+w.left+","+w.top+")"),tt.select(".nv-context").style("display",T?"initial":"none"),f.width(G).height(q).color(x.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!x[e].disabled&&x[e].bar})),l.width(G).height(q).color(x.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!x[e].disabled&&!x[e].bar}));var ot=tt.select(".nv-context .nv-barsWrap").datum($.length?$:[{values:[]}]),at=tt.select(".nv-context .nv-linesWrap").datum(X[0].disabled?[{values:[]}]:X);tt.select(".nv-context").attr("transform","translate(0,"+(V+w.bottom+k.top)+")"),ot.transition().call(f),at.transition().call(l),E&&(h._ticks(t.utils.calcTicksX(G/100,x)).tickSize(-q,0),tt.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),tt.select(".nv-context .nv-x.nv-axis").transition().call(h)),L&&(v.scale(a)._ticks(q/36).tickSize(-G,0),m.scale(u)._ticks(q/36).tickSize($.length?0:-G,0),tt.select(".nv-context .nv-y3.nv-axis").style("opacity",$.length?1:0).attr("transform","translate(0,"+r.range()[0]+")"),tt.select(".nv-context .nv-y2.nv-axis").style("opacity",X.length?1:0).attr("transform","translate("+r.range()[1]+",0)"),tt.select(".nv-context .nv-y1.nv-axis").transition().call(v),tt.select(".nv-context .nv-y2.nv-axis").transition().call(m)),b.x(r).on("brush",ct),N&&b.extent(N);var ut=tt.select(".nv-brushBackground").selectAll("g").data([N||b.extent()]),st=ut.enter().append("g");st.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",q),st.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",q);var lt=tt.select(".nv-x.nv-brush").call(b);function ct(){N=b.empty()?null:b.extent(),e=b.empty()?r.domain():b.extent(),P.brush({extent:e,brush:b}),b.empty()||b.extent(N),ut.data([b.empty()?r.domain():N]).each(function(t,e){var n=r(t[0])-r.range()[0],i=r.range()[1]-r(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",r(t[1])).attr("width",i<0?0:i)}),c.width(G).height(V).color(x.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!x[e].disabled&&x[e].bar})),s.width(G).height(V).color(x.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!x[e].disabled&&!x[e].bar}));var a=tt.select(".nv-focus .nv-barsWrap").datum($.length?$.map(function(t,n){return{key:t.key,values:t.values.filter(function(t,n){return c.x()(t,n)>=e[0]&&c.x()(t,n)<=e[1]})}}):[{values:[]}]),u=tt.select(".nv-focus .nv-linesWrap").datum(X[0].disabled?[{values:[]}]:X.map(function(t,n){return{area:t.area,fillOpacity:t.fillOpacity,key:t.key,values:t.values.filter(function(t,n){return s.x()(t,n)>=e[0]&&s.x()(t,n)<=e[1]})}}));n=$.length?c.xScale():s.xScale(),d.scale(n)._ticks(t.utils.calcTicksX(G/100,x)).tickSize(-V,0),d.domain([Math.ceil(e[0]),Math.floor(e[1])]),tt.select(".nv-x.nv-axis").transition().duration(W).call(d),a.transition().duration(W).call(c),u.transition().duration(W).call(s),tt.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),p.scale(i)._ticks(t.utils.calcTicksY(V/36,x)).tickSize(-G,0),g.scale(o)._ticks(t.utils.calcTicksY(V/36,x)).tickSize($.length?0:-G,0),tt.select(".nv-focus .nv-y1.nv-axis").style("opacity",$.length?1:0),tt.select(".nv-focus .nv-y2.nv-axis").style("opacity",X.length&&!X[0].disabled?1:0).attr("transform","translate("+n.range()[1]+",0)"),tt.select(".nv-focus .nv-y1.nv-axis").transition().duration(W).call(p),tt.select(".nv-focus .nv-y2.nv-axis").transition().duration(W).call(g)}lt.selectAll("rect").attr("height",q),lt.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,r=q/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}),y.dispatch.on("stateChange",function(t){for(var e in t)z[e]=t[e];P.stateChange(z),j.update()}),P.on("changeState",function(t){void 0!==t.disabled&&(x.forEach(function(e,n){e.disabled=t.disabled[n]}),z.disabled=t.disabled),j.update()}),ct()}),j}return s.dispatch.on("elementMouseover.tooltip",function(t){x.duration(100).valueFormatter(function(t,e){return g.tickFormat()(t,e)}).data(t).position(t.pos).hidden(!1)}),s.dispatch.on("elementMouseout.tooltip",function(t){x.hidden(!0)}),c.dispatch.on("elementMouseover.tooltip",function(t){t.value=j.x()(t.data),t.series={value:j.y()(t.data),color:t.color},x.duration(0).valueFormatter(function(t,e){return p.tickFormat()(t,e)}).data(t).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(t){x.hidden(!0)}),c.dispatch.on("elementMousemove.tooltip",function(t){x.position({top:d3.event.pageY,left:d3.event.pageX})()}),j.dispatch=P,j.legend=y,j.lines=s,j.lines2=l,j.bars=c,j.bars2=f,j.xAxis=d,j.x2Axis=h,j.y1Axis=p,j.y2Axis=g,j.y3Axis=v,j.y4Axis=m,j.tooltip=x,j.options=t.utils.optionsFunc.bind(j),j._options=Object.create({},{width:{get:function(){return _},set:function(t){_=t}},height:{get:function(){return M},set:function(t){M=t}},showLegend:{get:function(){return D},set:function(t){D=t}},brushExtent:{get:function(){return N},set:function(t){N=t}},noData:{get:function(){return F},set:function(t){F=t}},focusEnable:{get:function(){return T},set:function(t){T=t}},focusHeight:{get:function(){return O},set:function(t){O=t}},focusShowAxisX:{get:function(){return E},set:function(t){E=t}},focusShowAxisY:{get:function(){return L},set:function(t){L=t}},legendLeftAxisHint:{get:function(){return I},set:function(t){I=t}},legendRightAxisHint:{get:function(){return H},set:function(t){H=t}},tooltips:{get:function(){return x.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),x.enabled(!!e)}},tooltipContent:{get:function(){return x.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),x.contentGenerator(e)}},margin:{get:function(){return w},set:function(t){w.top=void 0!==t.top?t.top:w.top,w.right=void 0!==t.right?t.right:w.right,w.bottom=void 0!==t.bottom?t.bottom:w.bottom,w.left=void 0!==t.left?t.left:w.left}},duration:{get:function(){return W},set:function(t){W=t}},color:{get:function(){return A},set:function(e){A=t.utils.getColor(e),y.color(A)}},x:{get:function(){return S},set:function(t){S=t,s.x(t),l.x(t),c.x(t),f.x(t)}},y:{get:function(){return C},set:function(t){C=t,s.y(t),l.y(t),c.y(t),f.y(t)}}}),t.utils.inheritOptions(j,s),t.utils.initOptions(j),j},t.models.lineWithFocusChart=function(){"use strict";var e,n,r,i,o=t.models.line(),a=t.models.line(),u=t.models.axis(),s=t.models.axis(),l=t.models.axis(),c=t.models.axis(),f=t.models.legend(),d=d3.svg.brush(),h=t.models.tooltip(),p=t.interactiveGuideline(),g={top:30,right:30,bottom:30,left:60},v={top:0,right:30,bottom:20,left:60},m=t.utils.defaultColor(),y=null,b=null,x=50,w=!1,k=!0,_=null,M=null,S=d3.dispatch("brush","stateChange","changeState"),C=250,A=t.utils.state(),D=null;o.clipEdge(!0).duration(0),a.interactive(!1),u.orient("bottom").tickPadding(5),s.orient("left"),l.orient("bottom").tickPadding(5),c.orient("left"),h.valueFormatter(function(t,e){return s.tickFormat()(t,e)}).headerFormatter(function(t,e){return u.tickFormat()(t,e)});var T=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},L=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function E(h){return h.each(function(h){var M=d3.select(this),O=this;t.utils.initSVG(M);var N,F=t.utils.availableWidth(y,M,g),P=t.utils.availableHeight(b,M,g)-x,W=x-v.top-v.bottom;if(E.update=function(){M.transition().duration(C).call(E)},E.container=this,A.setter(L(h),E.update).getter(T(h)).update(),A.disabled=h.map(function(t){return!!t.disabled}),!D)for(N in D={},A)D[N]=A[N]instanceof Array?A[N].slice(0):A[N];if(!(h&&h.length&&h.filter(function(t){return t.values.length}).length))return t.utils.noData(E,M),E;M.selectAll(".nv-noData").remove(),e=o.xScale(),n=o.yScale(),r=a.xScale(),i=a.yScale();var z=M.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([h]),R=z.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),I=z.select("g");R.append("g").attr("class","nv-legendWrap");var H=R.append("g").attr("class","nv-focus");H.append("g").attr("class","nv-x nv-axis"),H.append("g").attr("class","nv-y nv-axis"),H.append("g").attr("class","nv-linesWrap"),H.append("g").attr("class","nv-interactive");var Y=R.append("g").attr("class","nv-context");Y.append("g").attr("class","nv-x nv-axis"),Y.append("g").attr("class","nv-y nv-axis"),Y.append("g").attr("class","nv-linesWrap"),Y.append("g").attr("class","nv-brushBackground"),Y.append("g").attr("class","nv-x nv-brush"),k&&(f.width(F),I.select(".nv-legendWrap").datum(h).call(f),g.top!=f.height()&&(g.top=f.height(),P=t.utils.availableHeight(b,M,g)-x),I.select(".nv-legendWrap").attr("transform","translate(0,"+-g.top+")")),z.attr("transform","translate("+g.left+","+g.top+")"),w&&(p.width(F).height(P).margin({left:g.left,top:g.top}).svgContainer(M).xScale(e),z.select(".nv-interactive").call(p)),o.width(F).height(P).color(h.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!h[e].disabled})),a.defined(o.defined()).width(F).height(W).color(h.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!h[e].disabled})),I.select(".nv-context").attr("transform","translate(0,"+(P+g.bottom+v.top)+")");var B=I.select(".nv-context .nv-linesWrap").datum(h.filter(function(t){return!t.disabled}));d3.transition(B).call(a),u.scale(e)._ticks(t.utils.calcTicksX(F/100,h)).tickSize(-P,0),s.scale(n)._ticks(t.utils.calcTicksY(P/36,h)).tickSize(-F,0),I.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+P+")"),d.x(r).on("brush",function(){V()}),_&&d.extent(_);var j=I.select(".nv-brushBackground").selectAll("g").data([_||d.extent()]),U=j.enter().append("g");U.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",W),U.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",W);var G=I.select(".nv-x.nv-brush").call(d);function V(){_=d.empty()?null:d.extent();var t=d.empty()?r.domain():d.extent();Math.abs(t[0]-t[1])<=1||(S.brush({extent:t,brush:d}),d.empty()||d.extent(_),j.data([d.empty()?r.domain():_]).each(function(t,n){var i=r(t[0])-e.range()[0],o=F-r(t[1]);d3.select(this).select(".left").attr("width",i<0?0:i),d3.select(this).select(".right").attr("x",r(t[1])).attr("width",o<0?0:o)}),I.select(".nv-focus .nv-linesWrap").datum(h.filter(function(t){return!t.disabled}).map(function(e,n){return{key:e.key,area:e.area,values:e.values.filter(function(e,n){return o.x()(e,n)>=t[0]&&o.x()(e,n)<=t[1]})}})).transition().duration(C).call(o),I.select(".nv-focus .nv-x.nv-axis").transition().duration(C).call(u),I.select(".nv-focus .nv-y.nv-axis").transition().duration(C).call(s))}G.selectAll("rect").attr("height",W),G.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,r=W/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}),V(),l.scale(r)._ticks(t.utils.calcTicksX(F/100,h)).tickSize(-W,0),I.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d3.transition(I.select(".nv-context .nv-x.nv-axis")).call(l),c.scale(i)._ticks(t.utils.calcTicksY(W/36,h)).tickSize(-F,0),d3.transition(I.select(".nv-context .nv-y.nv-axis")).call(c),I.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),f.dispatch.on("stateChange",function(t){for(var e in t)A[e]=t[e];S.stateChange(A),E.update()}),p.dispatch.on("elementMousemove",function(e){o.clearHighlights();var n,i,a,l=[];if(h.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(u,s){var c=d.empty()?r.domain():d.extent(),f=u.values.filter(function(t,e){return o.x()(t,e)>=c[0]&&o.x()(t,e)<=c[1]}),h=f[i=t.interactiveBisect(f,e.pointXValue,o.x())];null!=E.y()(h,i)&&o.highlightPoint(s,i,!0),void 0!==h&&(void 0===n&&(n=h),void 0===a&&(a=E.xScale()(E.x()(h,i))),l.push({key:u.key,value:E.y()(h,i),color:m(u,u.seriesIndex)}))}),l.length>2){var c=E.yScale().invert(e.mouseY),f=.03*Math.abs(E.yScale().domain()[0]-E.yScale().domain()[1]),v=t.nearestValueIndex(l.map(function(t){return t.value}),c,f);null!==v&&(l[v].highlight=!0)}var y=u.tickFormat()(E.x()(n,i));p.tooltip.position({left:e.mouseX+g.left,top:e.mouseY+g.top}).chartContainer(O.parentNode).valueFormatter(function(t,e){return null==t?"N/A":s.tickFormat()(t)}).data({value:y,index:i,series:l})(),p.renderGuideLine(a)}),p.dispatch.on("elementMouseout",function(t){o.clearHighlights()}),S.on("changeState",function(t){void 0!==t.disabled&&h.forEach(function(e,n){e.disabled=t.disabled[n]}),E.update()})}),E}return o.dispatch.on("elementMouseover.tooltip",function(t){h.data(t).position(t.pos).hidden(!1)}),o.dispatch.on("elementMouseout.tooltip",function(t){h.hidden(!0)}),E.dispatch=S,E.legend=f,E.lines=o,E.lines2=a,E.xAxis=u,E.yAxis=s,E.x2Axis=l,E.y2Axis=c,E.interactiveLayer=p,E.tooltip=h,E.options=t.utils.optionsFunc.bind(E),E._options=Object.create({},{width:{get:function(){return y},set:function(t){y=t}},height:{get:function(){return b},set:function(t){b=t}},focusHeight:{get:function(){return x},set:function(t){x=t}},showLegend:{get:function(){return k},set:function(t){k=t}},brushExtent:{get:function(){return _},set:function(t){_=t}},defaultState:{get:function(){return D},set:function(t){D=t}},noData:{get:function(){return M},set:function(t){M=t}},tooltips:{get:function(){return h.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),h.enabled(!!e)}},tooltipContent:{get:function(){return h.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),h.contentGenerator(e)}},margin:{get:function(){return g},set:function(t){g.top=void 0!==t.top?t.top:g.top,g.right=void 0!==t.right?t.right:g.right,g.bottom=void 0!==t.bottom?t.bottom:g.bottom,g.left=void 0!==t.left?t.left:g.left}},color:{get:function(){return m},set:function(e){m=t.utils.getColor(e),f.color(m)}},interpolate:{get:function(){return o.interpolate()},set:function(t){o.interpolate(t),a.interpolate(t)}},xTickFormat:{get:function(){return u.tickFormat()},set:function(t){u.tickFormat(t),l.tickFormat(t)}},yTickFormat:{get:function(){return s.tickFormat()},set:function(t){s.tickFormat(t),c.tickFormat(t)}},duration:{get:function(){return C},set:function(t){s.duration(C=t),c.duration(C),u.duration(C),l.duration(C)}},x:{get:function(){return o.x()},set:function(t){o.x(t),a.x(t)}},y:{get:function(){return o.y()},set:function(t){o.y(t),a.y(t)}},useInteractiveGuideline:{get:function(){return w},set:function(t){(w=t)&&(o.interactive(!1),o.useVoronoi(!1))}}}),t.utils.inheritOptions(E,o),t.utils.initOptions(E),E},t.models.multiBar=function(){"use strict";var e,n,r,i,o,a,u,s={top:0,right:0,bottom:0,left:0},l=960,c=500,f=d3.scale.ordinal(),d=d3.scale.linear(),h=Math.floor(1e4*Math.random()),p=null,g=function(t){return t.x},v=function(t){return t.y},m=[0],y=!0,b=!1,x="zero",w=t.utils.defaultColor(),k=!1,_=null,M=500,S=.1,C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),A=t.utils.renderWatch(C,M),D=0;function T(L){return A.reset(),L.each(function(T){var L=l-s.left-s.right,E=c-s.top-s.bottom;p=d3.select(this),t.utils.initSVG(p);var O=0;if(k&&T.length&&(k=[{values:T[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),b){var N=d3.layout.stack().offset(x).values(function(t){return t.values}).y(v)(!T.length&&k?k:T);N.forEach(function(t,e){t.nonStackable?(T[e].nonStackableSeries=O++,N[e]=T[e]):e>0&&N[e-1].nonStackable&&N[e].values.map(function(t,n){t.y0-=N[e-1].values[n].y,t.y1=t.y0+t.y})}),T=N}T.forEach(function(t,e){t.values.forEach(function(n){n.series=e,n.key=t.key})}),b&&T[0].values.map(function(t,e){var n=0,r=0;T.map(function(t,i){if(!T[i].nonStackable){var o=t.values[e];o.size=Math.abs(o.y),o.y<0?(o.y1=r,r-=o.size):(o.y1=o.size+n,n+=o.size)}})});var F=n&&r?[]:T.map(function(t,e){return t.values.map(function(t,n){return{x:g(t,n),y:v(t,n),y0:t.y0,y1:t.y1,idx:e}})});f.domain(n||d3.merge(F).map(function(t){return t.x})).rangeBands(i||[0,L],S),d.domain(r||d3.extent(d3.merge(F).map(function(t){var e=t.y;return b&&!T[t.idx].nonStackable&&(e=t.y>0?t.y1:t.y1+t.y),e}).concat(m))).range(o||[E,0]),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1])),a=a||f,u=u||d;var P=p.selectAll("g.nv-wrap.nv-multibar").data([T]),W=P.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),z=W.append("defs"),R=W.append("g"),I=P.select("g");R.append("g").attr("class","nv-groups"),P.attr("transform","translate("+s.left+","+s.top+")"),z.append("clipPath").attr("id","nv-edge-clip-"+h).append("rect"),P.select("#nv-edge-clip-"+h+" rect").attr("width",L).attr("height",E),I.attr("clip-path",y?"url(#nv-edge-clip-"+h+")":"");var H=P.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});H.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var Y=A.transition(H.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,M)).attr("y",function(t,e,n){var r=u(0)||0;return b&&T[t.series]&&!T[t.series].nonStackable&&(r=u(t.y0)),r}).attr("height",0).remove();Y.delay&&Y.delay(function(t,e){return e*(M/(D+1))-e}),H.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return w(t,e)}).style("stroke",function(t,e){return w(t,e)}),H.style("stroke-opacity",1).style("fill-opacity",.75);var B=H.selectAll("rect.nv-bar").data(function(t){return k&&!T.length?k.values:t.values});B.exit().remove(),B.enter().append("rect").attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(t,e,n){return b&&!T[n].nonStackable?0:n*f.rangeBand()/T.length}).attr("y",function(t,e,n){return u(b&&!T[n].nonStackable?t.y0:0)||0}).attr("height",0).attr("width",function(t,e,n){return f.rangeBand()/(b&&!T[n].nonStackable?1:T.length)}).attr("transform",function(t,e){return"translate("+f(g(t,e))+",0)"}),B.style("fill",function(t,e,n){return w(t,n,e)}).style("stroke",function(t,e,n){return w(t,n,e)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),C.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),C.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){C.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){C.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,e){C.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),B.attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(t,e){return"translate("+f(g(t,e))+",0)"}),_&&(e||(e=T.map(function(){return!0})),B.style("fill",function(t,n,r){return d3.rgb(_(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()}).style("stroke",function(t,n,r){return d3.rgb(_(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()}));var j=B.watchTransition(A,"multibar",Math.min(250,M)).delay(function(t,e){return e*M/T[0].values.length});b?j.attr("y",function(t,e,n){return T[n].nonStackable?v(t,e)<0?d(0):d(0)-d(v(t,e))<-1?d(0)-1:d(v(t,e))||0:d(t.y1)}).attr("height",function(t,e,n){return T[n].nonStackable?Math.max(Math.abs(d(v(t,e))-d(0)),1)||0:Math.max(Math.abs(d(t.y+t.y0)-d(t.y0)),1)}).attr("x",function(t,e,n){var r=0;return T[n].nonStackable&&(r=t.series*f.rangeBand()/T.length,T.length!==O&&(r=T[n].nonStackableSeries*f.rangeBand()/(2*O))),r}).attr("width",function(t,e,n){if(T[n].nonStackable){var r=f.rangeBand()/O;return T.length!==O&&(r=f.rangeBand()/(2*O)),r}return f.rangeBand()}):j.attr("x",function(t,e){return t.series*f.rangeBand()/T.length}).attr("width",f.rangeBand()/T.length).attr("y",function(t,e){return v(t,e)<0?d(0):d(0)-d(v(t,e))<1?d(0)-1:d(v(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(d(v(t,e))-d(0)),1)||0}),a=f.copy(),u=d.copy(),T[0]&&T[0].values&&(D=T[0].values.length)}),A.renderEnd("multibar immediate"),T}return T.dispatch=C,T.options=t.utils.optionsFunc.bind(T),T._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return g},set:function(t){g=t}},y:{get:function(){return v},set:function(t){v=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return m},set:function(t){m=t}},stacked:{get:function(){return b},set:function(t){b=t}},stackOffset:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return y},set:function(t){y=t}},disabled:{get:function(){return e},set:function(t){e=t}},id:{get:function(){return h},set:function(t){h=t}},hideable:{get:function(){return k},set:function(t){k=t}},groupSpacing:{get:function(){return S},set:function(t){S=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},duration:{get:function(){return M},set:function(t){A.reset(M=t)}},color:{get:function(){return w},set:function(e){w=t.utils.getColor(e)}},barColor:{get:function(){return _},set:function(e){_=e?t.utils.getColor(e):null}}}),t.utils.initOptions(T),T},t.models.multiBarChart=function(){"use strict";var e,n,r=t.models.multiBar(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend(),u=t.models.legend(),s=t.models.tooltip(),l={top:30,right:20,bottom:50,left:60},c=null,f=null,d=t.utils.defaultColor(),h=!0,p={},g=!0,v=!0,m=!0,y=!1,b=!0,x=!1,w=0,k=t.utils.state(),_=null,M=null,S=d3.dispatch("stateChange","changeState","renderEnd"),C=function(){return h?180:0},A=250;k.stacked=!1,r.stacked(!1),i.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(t){return t}),o.orient(y?"right":"left").tickFormat(d3.format(",.1f")),s.duration(0).valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return i.tickFormat()(t,e)}),u.updateState(!1);var D=t.utils.renderWatch(S),T=!1,L=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:T}}},E=function(t){return function(e){void 0!==e.stacked&&(T=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function O(s){return D.reset(),D.models(r),v&&D.models(i),m&&D.models(o),s.each(function(s){var M=d3.select(this);t.utils.initSVG(M);var D,N=t.utils.availableWidth(c,M,l),F=t.utils.availableHeight(f,M,l);if(O.update=function(){0===A?M.call(O):M.transition().duration(A).call(O)},O.container=this,k.setter(E(s),O.update).getter(L(s)).update(),k.disabled=s.map(function(t){return!!t.disabled}),!_)for(D in _={},k)_[D]=k[D]instanceof Array?k[D].slice(0):k[D];if(!(s&&s.length&&s.filter(function(t){return t.values.length}).length))return t.utils.noData(O,M),O;M.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale();var P=M.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([s]),W=P.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),z=P.select("g");if(W.append("g").attr("class","nv-x nv-axis"),W.append("g").attr("class","nv-y nv-axis"),W.append("g").attr("class","nv-barsWrap"),W.append("g").attr("class","nv-legendWrap"),W.append("g").attr("class","nv-controlsWrap"),g&&(a.width(N-C()),z.select(".nv-legendWrap").datum(s).call(a),l.top!=a.height()&&(l.top=a.height(),F=t.utils.availableHeight(f,M,l)),z.select(".nv-legendWrap").attr("transform","translate("+C()+","+-l.top+")")),h){var R=[{key:p.grouped||"Grouped",disabled:r.stacked()},{key:p.stacked||"Stacked",disabled:!r.stacked()}];u.width(C()).color(["#444","#444","#444"]),z.select(".nv-controlsWrap").datum(R).attr("transform","translate(0,"+-l.top+")").call(u)}if(P.attr("transform","translate("+l.left+","+l.top+")"),y&&z.select(".nv-y.nv-axis").attr("transform","translate("+N+",0)"),r.disabled(s.map(function(t){return t.disabled})).width(N).height(F).color(s.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!s[e].disabled})),z.select(".nv-barsWrap").datum(s.filter(function(t){return!t.disabled})).call(r),v){i.scale(e)._ticks(t.utils.calcTicksX(N/100,s)).tickSize(-F,0),z.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),z.select(".nv-x.nv-axis").call(i);var I=z.select(".nv-x.nv-axis > g").selectAll("g");if(I.selectAll("line, text").style("opacity",1),x){var H=function(t,e){return"translate("+t+","+e+")"};I.selectAll("text").attr("transform",function(t,e,n){return H(0,n%2==0?5:17)});var Y=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;z.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return H(0,0===e||Y%2!=0?17:5)})}b&&I.filter(function(t,e){return e%Math.ceil(s[0].values.length/(N/100))!=0}).selectAll("text, line").style("opacity",0),w&&I.selectAll(".tick text").attr("transform","rotate("+w+" 0,0)").style("text-anchor",w>0?"start":"end"),z.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}m&&(o.scale(n)._ticks(t.utils.calcTicksY(F/36,s)).tickSize(-N,0),z.select(".nv-y.nv-axis").call(o)),a.dispatch.on("stateChange",function(t){for(var e in t)k[e]=t[e];S.stateChange(k),O.update()}),u.dispatch.on("legendClick",function(t,e){if(t.disabled){switch(R=R.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":case p.grouped:r.stacked(!1);break;case"Stacked":case p.stacked:r.stacked(!0)}k.stacked=r.stacked(),S.stateChange(k),O.update()}}),S.on("changeState",function(t){void 0!==t.disabled&&(s.forEach(function(e,n){e.disabled=t.disabled[n]}),k.disabled=t.disabled),void 0!==t.stacked&&(r.stacked(t.stacked),k.stacked=t.stacked,T=t.stacked),O.update()})}),D.renderEnd("multibarchart immediate"),O}return r.dispatch.on("elementMouseover.tooltip",function(t){t.value=O.x()(t.data),t.series={key:t.data.key,value:O.y()(t.data),color:t.color},s.data(t).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){s.hidden(!0)}),r.dispatch.on("elementMousemove.tooltip",function(t){s.position({top:d3.event.pageY,left:d3.event.pageX})()}),O.dispatch=S,O.multibar=r,O.legend=a,O.controls=u,O.xAxis=i,O.yAxis=o,O.state=k,O.tooltip=s,O.options=t.utils.optionsFunc.bind(O),O._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return f},set:function(t){f=t}},showLegend:{get:function(){return g},set:function(t){g=t}},showControls:{get:function(){return h},set:function(t){h=t}},controlLabels:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return v},set:function(t){v=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return _},set:function(t){_=t}},noData:{get:function(){return M},set:function(t){M=t}},reduceXTicks:{get:function(){return b},set:function(t){b=t}},rotateLabels:{get:function(){return w},set:function(t){w=t}},staggerLabels:{get:function(){return x},set:function(t){x=t}},tooltips:{get:function(){return s.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),s.enabled(!!e)}},tooltipContent:{get:function(){return s.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),s.contentGenerator(e)}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return A},set:function(t){r.duration(A=t),i.duration(A),o.duration(A),D.reset(A)}},color:{get:function(){return d},set:function(e){d=t.utils.getColor(e),a.color(d)}},rightAlignYAxis:{get:function(){return y},set:function(t){o.orient((y=t)?"right":"left")}},barColor:{get:function(){return r.barColor},set:function(t){r.barColor(t),a.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),t.utils.inheritOptions(O,r),t.utils.initOptions(O),O},t.models.multiBarHorizontal=function(){"use strict";var e,n,r,i,o,a,u,s={top:0,right:0,bottom:0,left:0},l=960,c=500,f=Math.floor(1e4*Math.random()),d=null,h=d3.scale.ordinal(),p=d3.scale.linear(),g=function(t){return t.x},v=function(t){return t.y},m=function(t){return t.yErr},y=[0],b=t.utils.defaultColor(),x=null,w=!1,k=!1,_=!1,M=60,S=.1,C=d3.format(",.2f"),A=250,D=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),T=t.utils.renderWatch(D,A);function L(f){return T.reset(),f.each(function(f){var A=l-s.left-s.right,L=c-s.top-s.bottom;d=d3.select(this),t.utils.initSVG(d),w&&(f=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(v)(f)),f.forEach(function(t,e){t.values.forEach(function(n){n.series=e,n.key=t.key})}),w&&f[0].values.map(function(t,e){var n=0,r=0;f.map(function(t){var i=t.values[e];i.size=Math.abs(i.y),i.y<0?(i.y1=r-i.size,r-=i.size):(i.y1=n,n+=i.size)})});var E=n&&r?[]:f.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:v(t,e),y0:t.y0,y1:t.y1}})});h.domain(n||d3.merge(E).map(function(t){return t.x})).rangeBands(i||[0,L],S),p.domain(r||d3.extent(d3.merge(E).map(function(t){return w?t.y>0?t.y1+t.y:t.y1:t.y}).concat(y))),p.range(k&&!w?o||[p.domain()[0]<0?M:0,A-(p.domain()[1]>0?M:0)]:o||[0,A]),a=a||h,u=u||d3.scale.linear().domain(p.domain()).range([p(0),p(0)]);var O=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([f]),N=O.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),F=(N.append("defs"),N.append("g"));O.select("g"),F.append("g").attr("class","nv-groups"),O.attr("transform","translate("+s.left+","+s.top+")");var P=O.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});P.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),P.exit().watchTransition(T,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),P.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return b(t,e)}).style("stroke",function(t,e){return b(t,e)}),P.watchTransition(T,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",.75);var W=P.selectAll("g.nv-bar").data(function(t){return t.values});W.exit().remove();var z=W.enter().append("g").attr("transform",function(t,e,n){return"translate("+u(w?t.y0:0)+","+(w?0:n*h.rangeBand()/f.length+h(g(t,e)))+")"});z.append("rect").attr("width",0).attr("height",h.rangeBand()/(w?1:f.length)),W.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),D.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),D.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){D.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){D.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){D.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,e){D.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),m(f[0],0)&&(z.append("polyline"),W.select("polyline").attr("fill","none").attr("points",function(t,e){var n=m(t,e),r=.8*h.rangeBand()/(2*(w?1:f.length));return[[(n=(n=n.length?n:[-Math.abs(n),Math.abs(n)]).map(function(t){return p(t)-p(0)}))[0],-r],[n[0],r],[n[0],0],[n[1],0],[n[1],-r],[n[1],r]].map(function(t){return t.join(",")}).join(" ")}).attr("transform",function(t,e){var n=h.rangeBand()/(2*(w?1:f.length));return"translate("+(v(t,e)<0?0:p(v(t,e))-p(0))+", "+n+")"})),z.append("text"),k&&!w?(W.select("text").attr("text-anchor",function(t,e){return v(t,e)<0?"end":"start"}).attr("y",h.rangeBand()/(2*f.length)).attr("dy",".32em").text(function(t,e){var n=C(v(t,e)),r=m(t,e);return void 0===r?n:r.length?n+"+"+C(Math.abs(r[1]))+"-"+C(Math.abs(r[0])):n+"\xb1"+C(Math.abs(r))}),W.watchTransition(T,"multibarhorizontal: bars").select("text").attr("x",function(t,e){return v(t,e)<0?-4:p(v(t,e))-p(0)+4})):W.selectAll("text").text(""),_&&!w?(z.append("text").classed("nv-bar-label",!0),W.select("text.nv-bar-label").attr("text-anchor",function(t,e){return v(t,e)<0?"start":"end"}).attr("y",h.rangeBand()/(2*f.length)).attr("dy",".32em").text(function(t,e){return g(t,e)}),W.watchTransition(T,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(t,e){return v(t,e)<0?p(0)-p(v(t,e))+4:-4})):W.selectAll("text.nv-bar-label").text(""),W.attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}),x&&(e||(e=f.map(function(){return!0})),W.style("fill",function(t,n,r){return d3.rgb(x(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()}).style("stroke",function(t,n,r){return d3.rgb(x(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()})),w?W.watchTransition(T,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+p(t.y1)+","+h(g(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(p(v(t,e)+t.y0)-p(t.y0))}).attr("height",h.rangeBand()):W.watchTransition(T,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+(v(t,e)<0?p(v(t,e)):p(0))+","+(t.series*h.rangeBand()/f.length+h(g(t,e)))+")"}).select("rect").attr("height",h.rangeBand()/f.length).attr("width",function(t,e){return Math.max(Math.abs(p(v(t,e))-p(0)),1)}),a=h.copy(),u=p.copy()}),T.renderEnd("multibarHorizontal immediate"),L}return L.dispatch=D,L.options=t.utils.optionsFunc.bind(L),L._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return g},set:function(t){g=t}},y:{get:function(){return v},set:function(t){v=t}},yErr:{get:function(){return m},set:function(t){m=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return y},set:function(t){y=t}},stacked:{get:function(){return w},set:function(t){w=t}},showValues:{get:function(){return k},set:function(t){k=t}},disabled:{get:function(){return e},set:function(t){e=t}},id:{get:function(){return f},set:function(t){f=t}},valueFormat:{get:function(){return C},set:function(t){C=t}},valuePadding:{get:function(){return M},set:function(t){M=t}},groupSpacing:{get:function(){return S},set:function(t){S=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},duration:{get:function(){return A},set:function(t){T.reset(A=t)}},color:{get:function(){return b},set:function(e){b=t.utils.getColor(e)}},barColor:{get:function(){return x},set:function(e){x=e?t.utils.getColor(e):null}}}),t.utils.initOptions(L),L},t.models.multiBarHorizontalChart=function(){"use strict";var e,n,r=t.models.multiBarHorizontal(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend().height(30),u=t.models.legend().height(30),s=t.models.tooltip(),l={top:30,right:20,bottom:50,left:60},c=null,f=null,d=t.utils.defaultColor(),h=!0,p={},g=!0,v=!0,m=!0,y=!1,b=t.utils.state(),x=null,w=null,k=d3.dispatch("stateChange","changeState","renderEnd"),_=function(){return h?180:0},M=250;b.stacked=!1,r.stacked(y),i.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(t){return t}),o.orient("bottom").tickFormat(d3.format(",.1f")),s.duration(0).valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return i.tickFormat()(t,e)}),u.updateState(!1);var S=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:y}}},C=function(t){return function(e){void 0!==e.stacked&&(y=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},A=t.utils.renderWatch(k,M);function D(s){return A.reset(),A.models(r),v&&A.models(i),m&&A.models(o),s.each(function(s){var w=d3.select(this);t.utils.initSVG(w);var A,T=t.utils.availableWidth(c,w,l),L=t.utils.availableHeight(f,w,l);if(D.update=function(){w.transition().duration(M).call(D)},D.container=this,y=r.stacked(),b.setter(C(s),D.update).getter(S(s)).update(),b.disabled=s.map(function(t){return!!t.disabled}),!x)for(A in x={},b)x[A]=b[A]instanceof Array?b[A].slice(0):b[A];if(!(s&&s.length&&s.filter(function(t){return t.values.length}).length))return t.utils.noData(D,w),D;w.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale();var E=w.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([s]),O=E.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),N=E.select("g");if(O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),O.append("g").attr("class","nv-barsWrap"),O.append("g").attr("class","nv-legendWrap"),O.append("g").attr("class","nv-controlsWrap"),g&&(a.width(T-_()),N.select(".nv-legendWrap").datum(s).call(a),l.top!=a.height()&&(l.top=a.height(),L=t.utils.availableHeight(f,w,l)),N.select(".nv-legendWrap").attr("transform","translate("+_()+","+-l.top+")")),h){var F=[{key:p.grouped||"Grouped",disabled:r.stacked()},{key:p.stacked||"Stacked",disabled:!r.stacked()}];u.width(_()).color(["#444","#444","#444"]),N.select(".nv-controlsWrap").datum(F).attr("transform","translate(0,"+-l.top+")").call(u)}E.attr("transform","translate("+l.left+","+l.top+")"),r.disabled(s.map(function(t){return t.disabled})).width(T).height(L).color(s.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!s[e].disabled})),N.select(".nv-barsWrap").datum(s.filter(function(t){return!t.disabled})).transition().call(r),v&&(i.scale(e)._ticks(t.utils.calcTicksY(L/24,s)).tickSize(-T,0),N.select(".nv-x.nv-axis").call(i),N.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text")),m&&(o.scale(n)._ticks(t.utils.calcTicksX(T/100,s)).tickSize(-L,0),N.select(".nv-y.nv-axis").attr("transform","translate(0,"+L+")"),N.select(".nv-y.nv-axis").call(o)),N.select(".nv-zeroLine line").attr("x1",n(0)).attr("x2",n(0)).attr("y1",0).attr("y2",-L),a.dispatch.on("stateChange",function(t){for(var e in t)b[e]=t[e];k.stateChange(b),D.update()}),u.dispatch.on("legendClick",function(t,e){if(t.disabled){switch(F=F.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":r.stacked(!1);break;case"Stacked":r.stacked(!0)}b.stacked=r.stacked(),k.stateChange(b),y=r.stacked(),D.update()}}),k.on("changeState",function(t){void 0!==t.disabled&&(s.forEach(function(e,n){e.disabled=t.disabled[n]}),b.disabled=t.disabled),void 0!==t.stacked&&(r.stacked(t.stacked),b.stacked=t.stacked,y=t.stacked),D.update()})}),A.renderEnd("multibar horizontal chart immediate"),D}return r.dispatch.on("elementMouseover.tooltip",function(t){t.value=D.x()(t.data),t.series={key:t.data.key,value:D.y()(t.data),color:t.color},s.data(t).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){s.hidden(!0)}),r.dispatch.on("elementMousemove.tooltip",function(t){s.position({top:d3.event.pageY,left:d3.event.pageX})()}),D.dispatch=k,D.multibar=r,D.legend=a,D.controls=u,D.xAxis=i,D.yAxis=o,D.state=b,D.tooltip=s,D.options=t.utils.optionsFunc.bind(D),D._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return f},set:function(t){f=t}},showLegend:{get:function(){return g},set:function(t){g=t}},showControls:{get:function(){return h},set:function(t){h=t}},controlLabels:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return v},set:function(t){v=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return x},set:function(t){x=t}},noData:{get:function(){return w},set:function(t){w=t}},tooltips:{get:function(){return s.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),s.enabled(!!e)}},tooltipContent:{get:function(){return s.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),s.contentGenerator(e)}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return M},set:function(t){A.reset(M=t),r.duration(M),i.duration(M),o.duration(M)}},color:{get:function(){return d},set:function(e){d=t.utils.getColor(e),a.color(d)}},barColor:{get:function(){return r.barColor},set:function(t){r.barColor(t),a.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),t.utils.inheritOptions(D,r),t.utils.initOptions(D),D},t.models.multiChart=function(){"use strict";var e,n,r={top:30,right:20,bottom:50,left:60},i=t.utils.defaultColor(),o=null,a=null,u=!0,s=null,l=function(t){return t.x},c=function(t){return t.y},f="monotone",d=!0,h=d3.scale.linear(),p=d3.scale.linear(),g=d3.scale.linear(),v=t.models.line().yScale(p),m=t.models.line().yScale(g),y=t.models.multiBar().stacked(!1).yScale(p),b=t.models.multiBar().stacked(!1).yScale(g),x=t.models.stackedArea().yScale(p),w=t.models.stackedArea().yScale(g),k=t.models.axis().scale(h).orient("bottom").tickPadding(5),_=t.models.axis().scale(p).orient("left"),M=t.models.axis().scale(g).orient("right"),S=t.models.legend().height(30),C=t.models.tooltip(),A=d3.dispatch();function D(s){return s.each(function(s){var l=d3.select(this);t.utils.initSVG(l),D.update=function(){l.transition().call(D)},D.container=this;var c=t.utils.availableWidth(o,l,r),d=t.utils.availableHeight(a,l,r),A=s.filter(function(t){return"line"==t.type&&1==t.yAxis}),T=s.filter(function(t){return"line"==t.type&&2==t.yAxis}),L=s.filter(function(t){return"bar"==t.type&&1==t.yAxis}),E=s.filter(function(t){return"bar"==t.type&&2==t.yAxis}),O=s.filter(function(t){return"area"==t.type&&1==t.yAxis}),N=s.filter(function(t){return"area"==t.type&&2==t.yAxis});if(!(s&&s.length&&s.filter(function(t){return t.values.length}).length))return t.utils.noData(D,l),D;l.selectAll(".nv-noData").remove();var F=s.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:t.x,y:t.y}})}),P=s.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:t.x,y:t.y}})});h.domain(d3.extent(d3.merge(F.concat(P)),function(t){return t.x})).range([0,c]);var W=l.selectAll("g.wrap.multiChart").data([s]),z=W.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y1 nv-axis"),z.append("g").attr("class","nv-y2 nv-axis"),z.append("g").attr("class","lines1Wrap"),z.append("g").attr("class","lines2Wrap"),z.append("g").attr("class","bars1Wrap"),z.append("g").attr("class","bars2Wrap"),z.append("g").attr("class","stack1Wrap"),z.append("g").attr("class","stack2Wrap"),z.append("g").attr("class","legendWrap");var R=W.select("g"),I=s.map(function(t,e){return s[e].color||i(t,e)});if(u){var H=S.align()?c/2:c,Y=S.align()?H:0;S.width(H),S.color(I),R.select(".legendWrap").datum(s.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":" (right axis)"),t})).call(S),r.top!=S.height()&&(r.top=S.height(),d=t.utils.availableHeight(a,l,r)),R.select(".legendWrap").attr("transform","translate("+Y+","+-r.top+")")}v.width(c).height(d).interpolate(f).color(I.filter(function(t,e){return!s[e].disabled&&1==s[e].yAxis&&"line"==s[e].type})),m.width(c).height(d).interpolate(f).color(I.filter(function(t,e){return!s[e].disabled&&2==s[e].yAxis&&"line"==s[e].type})),y.width(c).height(d).color(I.filter(function(t,e){return!s[e].disabled&&1==s[e].yAxis&&"bar"==s[e].type})),b.width(c).height(d).color(I.filter(function(t,e){return!s[e].disabled&&2==s[e].yAxis&&"bar"==s[e].type})),x.width(c).height(d).color(I.filter(function(t,e){return!s[e].disabled&&1==s[e].yAxis&&"area"==s[e].type})),w.width(c).height(d).color(I.filter(function(t,e){return!s[e].disabled&&2==s[e].yAxis&&"area"==s[e].type})),R.attr("transform","translate("+r.left+","+r.top+")");var B=R.select(".lines1Wrap").datum(A.filter(function(t){return!t.disabled})),j=R.select(".bars1Wrap").datum(L.filter(function(t){return!t.disabled})),U=R.select(".stack1Wrap").datum(O.filter(function(t){return!t.disabled})),G=R.select(".lines2Wrap").datum(T.filter(function(t){return!t.disabled})),V=R.select(".bars2Wrap").datum(E.filter(function(t){return!t.disabled})),q=R.select(".stack2Wrap").datum(N.filter(function(t){return!t.disabled})),$=O.length?O.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[],X=N.length?N.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[];function Z(t){var e=2===s[t.seriesIndex].yAxis?M:_;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color},C.duration(100).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).position(t.pos).hidden(!1)}function K(t){var e=2===s[t.seriesIndex].yAxis?M:_;t.point.x=x.x()(t.point),t.point.y=x.y()(t.point),C.duration(100).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).position(t.pos).hidden(!1)}function Q(t){var e=2===s[t.data.series].yAxis?M:_;t.value=y.x()(t.data),t.series={value:y.y()(t.data),color:t.color},C.duration(0).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).hidden(!1)}p.domain(e||d3.extent(d3.merge(F).concat($),function(t){return t.y})).range([0,d]),g.domain(n||d3.extent(d3.merge(P).concat(X),function(t){return t.y})).range([0,d]),v.yDomain(p.domain()),y.yDomain(p.domain()),x.yDomain(p.domain()),m.yDomain(g.domain()),b.yDomain(g.domain()),w.yDomain(g.domain()),O.length&&d3.transition(U).call(x),N.length&&d3.transition(q).call(w),L.length&&d3.transition(j).call(y),E.length&&d3.transition(V).call(b),A.length&&d3.transition(B).call(v),T.length&&d3.transition(G).call(m),k._ticks(t.utils.calcTicksX(c/100,s)).tickSize(-d,0),R.select(".nv-x.nv-axis").attr("transform","translate(0,"+d+")"),d3.transition(R.select(".nv-x.nv-axis")).call(k),_._ticks(t.utils.calcTicksY(d/36,s)).tickSize(-c,0),d3.transition(R.select(".nv-y1.nv-axis")).call(_),M._ticks(t.utils.calcTicksY(d/36,s)).tickSize(-c,0),d3.transition(R.select(".nv-y2.nv-axis")).call(M),R.select(".nv-y1.nv-axis").classed("nv-disabled",!F.length).attr("transform","translate("+h.range()[0]+",0)"),R.select(".nv-y2.nv-axis").classed("nv-disabled",!P.length).attr("transform","translate("+h.range()[1]+",0)"),S.dispatch.on("stateChange",function(t){D.update()}),v.dispatch.on("elementMouseover.tooltip",Z),m.dispatch.on("elementMouseover.tooltip",Z),v.dispatch.on("elementMouseout.tooltip",function(t){C.hidden(!0)}),m.dispatch.on("elementMouseout.tooltip",function(t){C.hidden(!0)}),x.dispatch.on("elementMouseover.tooltip",K),w.dispatch.on("elementMouseover.tooltip",K),x.dispatch.on("elementMouseout.tooltip",function(t){C.hidden(!0)}),w.dispatch.on("elementMouseout.tooltip",function(t){C.hidden(!0)}),y.dispatch.on("elementMouseover.tooltip",Q),b.dispatch.on("elementMouseover.tooltip",Q),y.dispatch.on("elementMouseout.tooltip",function(t){C.hidden(!0)}),b.dispatch.on("elementMouseout.tooltip",function(t){C.hidden(!0)}),y.dispatch.on("elementMousemove.tooltip",function(t){C.position({top:d3.event.pageY,left:d3.event.pageX})()}),b.dispatch.on("elementMousemove.tooltip",function(t){C.position({top:d3.event.pageY,left:d3.event.pageX})()})}),D}return D.dispatch=A,D.lines1=v,D.lines2=m,D.bars1=y,D.bars2=b,D.stack1=x,D.stack2=w,D.xAxis=k,D.yAxis1=_,D.yAxis2=M,D.tooltip=C,D.options=t.utils.optionsFunc.bind(D),D._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},showLegend:{get:function(){return u},set:function(t){u=t}},yDomain1:{get:function(){return e},set:function(t){e=t}},yDomain2:{get:function(){return n},set:function(t){n=t}},noData:{get:function(){return s},set:function(t){s=t}},interpolate:{get:function(){return f},set:function(t){f=t}},tooltips:{get:function(){return C.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),C.enabled(!!e)}},tooltipContent:{get:function(){return C.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),C.contentGenerator(e)}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},color:{get:function(){return i},set:function(e){i=t.utils.getColor(e)}},x:{get:function(){return l},set:function(t){l=t,v.x(t),m.x(t),y.x(t),b.x(t),x.x(t),w.x(t)}},y:{get:function(){return c},set:function(t){c=t,v.y(t),m.y(t),x.y(t),w.y(t),y.y(t),b.y(t)}},useVoronoi:{get:function(){return d},set:function(t){d=t,v.useVoronoi(t),m.useVoronoi(t),x.useVoronoi(t),w.useVoronoi(t)}}}),t.utils.initOptions(D),D},t.models.ohlcBar=function(){"use strict";var e,n,r,i,o={top:0,right:0,bottom:0,left:0},a=null,u=null,s=Math.floor(1e4*Math.random()),l=null,c=d3.scale.linear(),f=d3.scale.linear(),d=function(t){return t.x},h=function(t){return t.y},p=function(t){return t.open},g=function(t){return t.close},v=function(t){return t.high},m=function(t){return t.low},y=[],b=[],x=!1,w=!0,k=t.utils.defaultColor(),_=!1,M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function S(_){return _.each(function(_){l=d3.select(this);var S=t.utils.availableWidth(a,l,o),C=t.utils.availableHeight(u,l,o);t.utils.initSVG(l);var A=S/_[0].values.length*.9;c.domain(e||d3.extent(_[0].values.map(d).concat(y))),c.range(x?r||[.5*S/_[0].values.length,S*(_[0].values.length-.5)/_[0].values.length]:r||[5+A/2,S-A/2-5]),f.domain(n||[d3.min(_[0].values.map(m).concat(b)),d3.max(_[0].values.map(v).concat(b))]).range(i||[C,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var D=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([_[0].values]),T=D.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),L=T.append("defs"),E=T.append("g"),O=D.select("g");E.append("g").attr("class","nv-ticks"),D.attr("transform","translate("+o.left+","+o.top+")"),l.on("click",function(t,e){M.chartClick({data:t,index:e,pos:d3.event,id:s})}),L.append("clipPath").attr("id","nv-chart-clip-path-"+s).append("rect"),D.select("#nv-chart-clip-path-"+s+" rect").attr("width",S).attr("height",C),O.attr("clip-path",w?"url(#nv-chart-clip-path-"+s+")":"");var N=D.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});N.exit().remove(),N.enter().append("path").attr("class",function(t,e,n){return(p(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(t,e){return"m0,0l0,"+(f(p(t,e))-f(v(t,e)))+"l"+-A/2+",0l"+A/2+",0l0,"+(f(m(t,e))-f(p(t,e)))+"l0,"+(f(g(t,e))-f(m(t,e)))+"l"+A/2+",0l"+-A/2+",0z"}).attr("transform",function(t,e){return"translate("+c(d(t,e))+","+f(v(t,e))+")"}).attr("fill",function(t,e){return k[0]}).attr("stroke",function(t,e){return k[0]}).attr("x",0).attr("y",function(t,e){return f(Math.max(0,h(t,e)))}).attr("height",function(t,e){return Math.abs(f(h(t,e))-f(0))}),N.attr("class",function(t,e,n){return(p(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(N).attr("transform",function(t,e){return"translate("+c(d(t,e))+","+f(v(t,e))+")"}).attr("d",function(t,e){var n=S/_[0].values.length*.9;return"m0,0l0,"+(f(p(t,e))-f(v(t,e)))+"l"+-n/2+",0l"+n/2+",0l0,"+(f(m(t,e))-f(p(t,e)))+"l0,"+(f(g(t,e))-f(m(t,e)))+"l"+n/2+",0l"+-n/2+",0z"})}),S}return S.highlightPoint=function(t,e){S.clearHighlights(),l.select(".nv-ohlcBar .nv-tick-0-"+t).classed("hover",e)},S.clearHighlights=function(){l.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},S.dispatch=M,S.options=t.utils.optionsFunc.bind(S),S._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return u},set:function(t){u=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return i},set:function(t){i=t}},forceX:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return b},set:function(t){b=t}},padData:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return w},set:function(t){w=t}},id:{get:function(){return s},set:function(t){s=t}},interactive:{get:function(){return _},set:function(t){_=t}},x:{get:function(){return d},set:function(t){d=t}},y:{get:function(){return h},set:function(t){h=t}},open:{get:function(){return p()},set:function(t){p=t}},close:{get:function(){return g()},set:function(t){g=t}},high:{get:function(){return v},set:function(t){v=t}},low:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return o},set:function(t){o.top=null!=t.top?t.top:o.top,o.right=null!=t.right?t.right:o.right,o.bottom=null!=t.bottom?t.bottom:o.bottom,o.left=null!=t.left?t.left:o.left}},color:{get:function(){return k},set:function(e){k=t.utils.getColor(e)}}}),t.utils.initOptions(S),S},t.models.parallelCoordinates=function(){"use strict";var e={top:30,right:0,bottom:10,left:0},n=null,r=null,i=d3.scale.ordinal(),o={},a=[],u=[],s=t.utils.defaultColor(),l=[],c=[],f=[],d=1,h=d3.dispatch("brush","elementMouseover","elementMouseout");function p(g){return g.each(function(p){var g=d3.select(this),v=t.utils.availableWidth(n,g,e),m=t.utils.availableHeight(r,g,e);t.utils.initSVG(g),c=p,i.rangePoints([0,v],1).domain(a);var y={};a.forEach(function(t){var e=d3.extent(p,function(e){return+e[t]});return y[t]=!1,void 0===e[0]&&(y[t]=!0,e[0]=0,e[1]=0),e[0]===e[1]&&(e[0]=e[0]-1,e[1]=e[1]+1),o[t]=d3.scale.linear().domain(e).range([.9*(m-12),0]),o[t].brush=d3.svg.brush().y(o[t]).on("brush",P),"name"!=t});var b=g.selectAll("g.nv-wrap.nv-parallelCoordinates").data([p]),x=b.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),w=b.select("g");x.append("g").attr("class","nv-parallelCoordinates background"),x.append("g").attr("class","nv-parallelCoordinates foreground"),x.append("g").attr("class","nv-parallelCoordinates missingValuesline"),b.attr("transform","translate("+e.left+","+e.top+")");var k,_,M=d3.svg.line().interpolate("cardinal").tension(d),S=d3.svg.axis().orient("left"),C=d3.behavior.drag().on("dragstart",function(t,e){f[t]=this.parentNode.__origin__=i(t),L.attr("visibility","hidden")}).on("drag",function(t,e){f[t]=Math.min(v,Math.max(0,this.parentNode.__origin__+=d3.event.x)),E.attr("d",F),a.sort(function(t,e){return W(t)-W(e)}),i.domain(a),O.attr("transform",function(t){return"translate("+W(t)+")"})}).on("dragend",function(t,e){delete this.parentNode.__origin__,delete f[t],d3.select(this.parentNode).attr("transform","translate("+i(t)+")"),E.attr("d",F),L.attr("d",F).attr("visibility",null)}),A=i.range()[1]-i.range()[0],D=[],T=[0+A/2,m-12,v-A/2,m-12];(k=b.select(".missingValuesline").selectAll("line").data([T])).enter().append("line"),k.exit().remove(),k.attr("x1",function(t){return t[0]}).attr("y1",function(t){return t[1]}).attr("x2",function(t){return t[2]}).attr("y2",function(t){return t[3]}),(_=b.select(".missingValuesline").selectAll("text").data(["undefined values"])).append("text").data(["undefined values"]),_.enter().append("text"),_.exit().remove(),_.attr("y",m).attr("x",v-92-A/2).text(function(t){return t});var L=b.select(".background").selectAll("path").data(p);L.enter().append("path"),L.exit().remove(),L.attr("d",F);var E=b.select(".foreground").selectAll("path").data(p);E.enter().append("path"),E.exit().remove(),E.attr("d",F).attr("stroke",s),E.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),h.elementMouseover({label:t.name,data:t.data,index:e,pos:[d3.mouse(this.parentNode)[0],d3.mouse(this.parentNode)[1]]})}),E.on("mouseout",function(t,e){d3.select(this).classed("hover",!1),h.elementMouseout({label:t.name,data:t.data,index:e})});var O=w.selectAll(".dimension").data(a),N=O.enter().append("g").attr("class","nv-parallelCoordinates dimension");function F(t){return M(a.map(function(e){if(isNaN(t[e])||isNaN(parseFloat(t[e]))){var n=o[e].domain(),r=o[e].range(),a=n[0]-(n[1]-n[0])/9;if(D.indexOf(e)<0){var u=d3.scale.linear().domain([a,n[1]]).range([m-12,r[1]]);o[e].brush.y(u),D.push(e)}return[i(e),o[e](a)]}return D.length>0?(k.style("display","inline"),_.style("display","inline")):(k.style("display","none"),_.style("display","none")),[i(e),o[e](t[e])]}))}function P(){var t=a.filter(function(t){return!o[t].brush.empty()}),e=t.map(function(t){return o[t].brush.extent()});l=[],t.forEach(function(t,n){l[n]={dimension:t,extent:e[n]}}),c=[],E.style("display",function(n){var r=t.every(function(t,r){return!(!isNaN(n[t])||e[r][0]!=o[t].brush.y().domain()[0])||e[r][0]<=n[t]&&n[t]<=e[r][1]});return r&&c.push(n),r?null:"none"}),h.brush({filters:l,active:c})}function W(t){var e=f[t];return null==e?i(t):e}N.append("g").attr("class","nv-parallelCoordinates nv-axis"),N.append("g").attr("class","nv-parallelCoordinates-brush"),N.append("text").attr("class","nv-parallelCoordinates nv-label"),O.attr("transform",function(t){return"translate("+i(t)+",0)"}),O.exit().remove(),O.select(".nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").text(String).on("mouseover",function(t,e){h.elementMouseover({dim:t,pos:[d3.mouse(this.parentNode.parentNode)[0],d3.mouse(this.parentNode.parentNode)[1]]})}).on("mouseout",function(t,e){h.elementMouseout({dim:t})}).call(C),O.select(".nv-axis").each(function(t,e){d3.select(this).call(S.scale(o[t]).tickFormat(d3.format(u[e])))}),O.select(".nv-parallelCoordinates-brush").each(function(t){d3.select(this).call(o[t].brush)}).selectAll("rect").attr("x",-8).attr("width",16)}),p}return p.dispatch=h,p.options=t.utils.optionsFunc.bind(p),p._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return r},set:function(t){r=t}},dimensionNames:{get:function(){return a},set:function(t){a=t}},dimensionFormats:{get:function(){return u},set:function(t){u=t}},lineTension:{get:function(){return d},set:function(t){d=t}},dimensions:{get:function(){return a},set:function(e){t.deprecated("dimensions","use dimensionNames instead"),a=e}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return s},set:function(e){s=t.utils.getColor(e)}}}),t.utils.initOptions(p),p},t.models.pie=function(){"use strict";var e={top:0,right:0,bottom:0,left:0},n=500,r=500,i=function(t){return t.x},o=function(t){return t.y},a=Math.floor(1e4*Math.random()),u=null,s=t.utils.defaultColor(),l=d3.format(",.2f"),c=!0,f=!1,d="key",h=.02,p=!1,g=!1,v=!0,m=0,y=!1,b=!1,x=!1,w=!1,k=0,_=.5,M=[],S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),C=[],A=[],D=t.utils.renderWatch(S);function T(L){return D.reset(),L.each(function(T){var L=n-e.left-e.right,E=r-e.top-e.bottom,O=Math.min(L,E)/2,N=[],F=[];if(u=d3.select(this),0===M.length)for(var P=O-O/5,W=_*O,z=0;z<T[0].length;z++)N.push(P),F.push(W);else N=M.map(function(t){return(t.outer-t.outer/5)*O}),F=M.map(function(t){return(t.inner-t.inner/5)*O}),_=d3.min(M.map(function(t){return t.inner-t.inner/5}));t.utils.initSVG(u);var R=u.selectAll(".nv-wrap.nv-pie").data(T),I=R.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+a).append("g"),H=R.select("g"),Y=I.append("g").attr("class","nv-pie");for(I.append("g").attr("class","nv-pieLabels"),R.attr("transform","translate("+e.left+","+e.top+")"),H.select(".nv-pie").attr("transform","translate("+L/2+","+E/2+")"),H.select(".nv-pieLabels").attr("transform","translate("+L/2+","+E/2+")"),u.on("click",function(t,e){S.chartClick({data:t,index:e,pos:d3.event,id:a})}),C=[],A=[],z=0;z<T[0].length;z++){var B=d3.svg.arc().outerRadius(N[z]),j=d3.svg.arc().outerRadius(N[z]+5);!1!==b&&(B.startAngle(b),j.startAngle(b)),!1!==w&&(B.endAngle(w),j.endAngle(w)),p&&(B.innerRadius(F[z]),j.innerRadius(F[z])),B.cornerRadius&&k&&(B.cornerRadius(k),j.cornerRadius(k)),C.push(B),A.push(j)}var U=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:o(t)});U.padAngle&&x&&U.padAngle(x),p&&g&&(Y.append("text").attr("class","nv-pie-title"),R.select(".nv-pie-title").style("text-anchor","middle").text(function(t){return g}).style("font-size",Math.min(L,E)*_*2/(g.length+2)+"px").attr("dy","0.35em").attr("transform",function(t,e){return"translate(0, "+m+")"}));var G=R.select(".nv-pie").selectAll(".nv-slice").data(U),V=R.select(".nv-pieLabels").selectAll(".nv-label").data(U);G.exit().remove(),V.exit().remove();var q=G.enter().append("g");if(q.attr("class","nv-slice"),q.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),v&&d3.select(this).select("path").transition().duration(70).attr("d",A[e]),S.elementMouseover({data:t.data,index:e,color:d3.select(this).style("fill")})}),q.on("mouseout",function(t,e){d3.select(this).classed("hover",!1),v&&d3.select(this).select("path").transition().duration(50).attr("d",C[e]),S.elementMouseout({data:t.data,index:e})}),q.on("mousemove",function(t,e){S.elementMousemove({data:t.data,index:e})}),q.on("click",function(t,e){S.elementClick({data:t.data,index:e,color:d3.select(this).style("fill")})}),q.on("dblclick",function(t,e){S.elementDblClick({data:t.data,index:e,color:d3.select(this).style("fill")})}),G.attr("fill",function(t,e){return s(t.data,e)}),G.attr("stroke",function(t,e){return s(t.data,e)}),q.append("path").each(function(t){this._current=t}),G.select("path").transition().attr("d",function(t,e){return C[e](t)}).attrTween("d",function(t,e){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,p||(t.innerRadius=0);var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return C[e](n(t))}}),c){var $=[];for(z=0;z<T[0].length;z++)$.push(C[z]),f?p&&($[z]=d3.svg.arc().outerRadius(C[z].outerRadius()),!1!==b&&$[z].startAngle(b),!1!==w&&$[z].endAngle(w)):p||$[z].innerRadius(0);V.enter().append("g").classed("nv-label",!0).each(function(t,e){var n=d3.select(this);n.attr("transform",function(t,e){if(y){t.outerRadius=N[e]+10,t.innerRadius=N[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+$[e].centroid(t)+") rotate("+n+")"}return t.outerRadius=O+10,t.innerRadius=O+15,"translate("+$[e].centroid(t)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",y?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var X={},Z=function(t){return 140*Math.floor(t[0]/140)+","+14*Math.floor(t[1]/14)};V.watchTransition(D,"pie labels").attr("transform",function(t,e){if(y){t.outerRadius=N[e]+10,t.innerRadius=N[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+$[e].centroid(t)+") rotate("+n+")"}t.outerRadius=O+10,t.innerRadius=O+15;var r=$[e].centroid(t);if(t.value){var i=Z(r);X[i]&&(r[1]-=14),X[Z(r)]=!0}return"translate("+r+")"}),V.select(".nv-label text").style("text-anchor",function(t,e){return y?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(t,e){var n=(t.endAngle-t.startAngle)/(2*Math.PI),r="";if(!t.value||n<h)return"";if("function"==typeof d)r=d(t,e,{key:i(t.data),value:o(t.data),percent:l(n)});else switch(d){case"key":r=i(t.data);break;case"value":r=l(o(t.data));break;case"percent":r=d3.format("%")(n)}return r})}}),D.renderEnd("pie immediate"),T}return T.dispatch=S,T.options=t.utils.optionsFunc.bind(T),T._options=Object.create({},{arcsRadius:{get:function(){return M},set:function(t){M=t}},width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return r},set:function(t){r=t}},showLabels:{get:function(){return c},set:function(t){c=t}},title:{get:function(){return g},set:function(t){g=t}},titleOffset:{get:function(){return m},set:function(t){m=t}},labelThreshold:{get:function(){return h},set:function(t){h=t}},valueFormat:{get:function(){return l},set:function(t){l=t}},x:{get:function(){return i},set:function(t){i=t}},id:{get:function(){return a},set:function(t){a=t}},endAngle:{get:function(){return w},set:function(t){w=t}},startAngle:{get:function(){return b},set:function(t){b=t}},padAngle:{get:function(){return x},set:function(t){x=t}},cornerRadius:{get:function(){return k},set:function(t){k=t}},donutRatio:{get:function(){return _},set:function(t){_=t}},labelsOutside:{get:function(){return f},set:function(t){f=t}},labelSunbeamLayout:{get:function(){return y},set:function(t){y=t}},donut:{get:function(){return p},set:function(t){p=t}},growOnHover:{get:function(){return v},set:function(t){v=t}},pieLabelsOutside:{get:function(){return f},set:function(e){f=e,t.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return f},set:function(e){f=e,t.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return l},set:function(e){l=e,t.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},y:{get:function(){return o},set:function(t){o=d3.functor(t)}},color:{get:function(){return s},set:function(e){s=t.utils.getColor(e)}},labelType:{get:function(){return d},set:function(t){d=t||"key"}}}),t.utils.initOptions(T),T},t.models.pieChart=function(){"use strict";var e=t.models.pie(),n=t.models.legend(),r=t.models.tooltip(),i={top:30,right:20,bottom:20,left:20},o=null,a=null,u=!0,s="top",l=t.utils.defaultColor(),c=t.utils.state(),f=null,d=null,h=250,p=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd");r.headerEnabled(!1).duration(0).valueFormatter(function(t,n){return e.valueFormat()(t,n)});var g=t.utils.renderWatch(p),v=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},m=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function y(r){return g.reset(),g.models(e),r.each(function(r){var l=d3.select(this);t.utils.initSVG(l);var d,h=t.utils.availableWidth(o,l,i),g=t.utils.availableHeight(a,l,i);if(y.update=function(){l.transition().call(y)},y.container=this,c.setter(m(r),y.update).getter(v(r)).update(),c.disabled=r.map(function(t){return!!t.disabled}),!f)for(d in f={},c)f[d]=c[d]instanceof Array?c[d].slice(0):c[d];if(!r||!r.length)return t.utils.noData(y,l),y;l.selectAll(".nv-noData").remove();var b=l.selectAll("g.nv-wrap.nv-pieChart").data([r]),x=b.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),w=b.select("g");if(x.append("g").attr("class","nv-pieWrap"),x.append("g").attr("class","nv-legendWrap"),u)if("top"===s)n.width(h).key(e.x()),b.select(".nv-legendWrap").datum(r).call(n),i.top!=n.height()&&(i.top=n.height(),g=t.utils.availableHeight(a,l,i)),b.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")");else if("right"===s){var k=t.models.legend().width();h/2<k&&(k=h/2),n.height(g).key(e.x()),n.width(k),h-=n.width(),b.select(".nv-legendWrap").datum(r).call(n).attr("transform","translate("+h+",0)")}b.attr("transform","translate("+i.left+","+i.top+")"),e.width(h).height(g);var _=w.select(".nv-pieWrap").datum([r]);d3.transition(_).call(e),n.dispatch.on("stateChange",function(t){for(var e in t)c[e]=t[e];p.stateChange(c),y.update()}),p.on("changeState",function(t){void 0!==t.disabled&&(r.forEach(function(e,n){e.disabled=t.disabled[n]}),c.disabled=t.disabled),y.update()})}),g.renderEnd("pieChart immediate"),y}return e.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:y.x()(t.data),value:y.y()(t.data),color:t.color},r.data(t).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(t){r.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(t){r.position({top:d3.event.pageY,left:d3.event.pageX})()}),y.legend=n,y.dispatch=p,y.pie=e,y.tooltip=r,y.options=t.utils.optionsFunc.bind(y),y._options=Object.create({},{noData:{get:function(){return d},set:function(t){d=t}},showLegend:{get:function(){return u},set:function(t){u=t}},legendPosition:{get:function(){return s},set:function(t){s=t}},defaultState:{get:function(){return f},set:function(t){f=t}},tooltips:{get:function(){return r.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),r.enabled(!!e)}},tooltipContent:{get:function(){return r.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),r.contentGenerator(e)}},color:{get:function(){return l},set:function(t){n.color(l=t),e.color(l)}},duration:{get:function(){return h},set:function(t){g.reset(h=t)}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}}}),t.utils.inheritOptions(y,e),t.utils.initOptions(y),y},t.models.scatter=function(){"use strict";var e,n,r,i,o={top:0,right:0,bottom:0,left:0},a=null,u=null,s=t.utils.defaultColor(),l=Math.floor(1e5*Math.random()),c=null,f=d3.scale.linear(),d=d3.scale.linear(),h=d3.scale.linear(),p=function(t){return t.x},g=function(t){return t.y},v=function(t){return t.size||1},m=function(t){return t.shape||"circle"},y=[],b=[],x=[],w=!0,k=function(t){return!t.notActive},_=!1,M=.1,S=!1,C=!0,A=!1,D=function(){return 25},T=null,L=null,E=null,O=null,N=null,F=null,P=!1,W=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),z=!0,R=250,I=!1,H=t.utils.renderWatch(W,R),Y=[16,256];function B(R){return H.reset(),R.each(function(R){c=d3.select(this);var B=t.utils.availableWidth(a,c,o),j=t.utils.availableHeight(u,c,o);t.utils.initSVG(c),R.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var U=T&&L&&N?[]:d3.merge(R.map(function(t){return t.values.map(function(t,e){return{x:p(t,e),y:g(t,e),size:v(t,e)}})}));f.domain(T||d3.extent(U.map(function(t){return t.x}).concat(y))),f.range(_&&R[0]?E||[(B*M+B)/(2*R[0].values.length),B-B*(1+M)/(2*R[0].values.length)]:E||[0,B]),d.domain(L||d3.extent(U.map(function(t){return t.y}).concat(b))).range(O||[j,0]),h.domain(N||d3.extent(U.map(function(t){return t.size}).concat(x))).range(F||Y),P=f.domain()[0]===f.domain()[1]||d.domain()[0]===d.domain()[1],f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),isNaN(f.domain()[0])&&f.domain([-1,1]),isNaN(d.domain()[0])&&d.domain([-1,1]),e=e||f,n=n||d,r=r||h;var G=c.selectAll("g.nv-wrap.nv-scatter").data([R]),V=G.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+l),q=V.append("defs"),$=V.append("g"),X=G.select("g");G.classed("nv-single-point",P),$.append("g").attr("class","nv-groups"),$.append("g").attr("class","nv-point-paths"),V.append("g").attr("class","nv-point-clips"),G.attr("transform","translate("+o.left+","+o.top+")"),q.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect"),G.select("#nv-edge-clip-"+l+" rect").attr("width",B).attr("height",j>0?j:0),X.attr("clip-path",S?"url(#nv-edge-clip-"+l+")":""),I=!0;var Z=G.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});Z.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),Z.exit().remove(),Z.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),Z.watchTransition(H,"scatter: groups").style("fill",function(t,e){return s(t,e)}).style("stroke",function(t,e){return s(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5);var K=Z.selectAll("path.nv-point").data(function(t){return t.values.map(function(t,e){return[t,e]}).filter(function(t,e){return k(t[0],e)})});K.enter().append("path").style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("transform",function(t){return"translate("+e(p(t[0],t[1]))+","+n(g(t[0],t[1]))+")"}).attr("d",t.utils.symbol().type(function(t){return m(t[0])}).size(function(t){return h(v(t[0],t[1]))})),K.exit().remove(),Z.exit().selectAll("path.nv-point").watchTransition(H,"scatter exit").attr("transform",function(t){return"translate("+f(p(t[0],t[1]))+","+d(g(t[0],t[1]))+")"}).remove(),K.each(function(t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t[1],!0).classed("nv-noninteractive",!w).classed("hover",!1)}),K.watchTransition(H,"scatter points").attr("transform",function(t){return"translate("+f(p(t[0],t[1]))+","+d(g(t[0],t[1]))+")"}).attr("d",t.utils.symbol().type(function(t){return m(t[0])}).size(function(t){return h(v(t[0],t[1]))})),clearTimeout(i),i=setTimeout(function(){if(I=!1,!w)return!1;if(!0===z){var t=d3.merge(R.map(function(t,e){return t.values.map(function(t,n){var r=p(t,n),i=g(t,n);return[f(r)+1e-4*Math.random(),d(i)+1e-4*Math.random(),e,n,t]}).filter(function(t,e){return k(t[4],e)})}));if(0==t.length)return!1;t.length<3&&(t.push([f.range()[0]-20,d.range()[0]-20,null,null]),t.push([f.range()[1]+20,d.range()[1]+20,null,null]),t.push([f.range()[0]-20,d.range()[0]+20,null,null]),t.push([f.range()[1]+20,d.range()[1]-20,null,null]));var e=d3.geom.polygon([[-10,-10],[-10,u+10],[a+10,u+10],[a+10,-10]]),n=d3.geom.voronoi(t).map(function(n,r){return{data:e.clip(n),series:t[r][2],point:t[r][3]}});G.select(".nv-point-paths").selectAll("path").remove();var r=G.select(".nv-point-paths").selectAll("path").data(n),i=r.enter().append("svg:path").attr("d",function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"}).attr("id",function(t,e){return"nv-path-"+e}).attr("clip-path",function(t,e){return"url(#nv-clip-"+e+")"});A&&i.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),C&&(G.select(".nv-point-clips").selectAll("clipPath").remove(),G.select(".nv-point-clips").selectAll("clipPath").data(t).enter().append("svg:clipPath").attr("id",function(t,e){return"nv-clip-"+e}).append("svg:circle").attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",D));var l=function(t,e){if(I)return 0;var n=R[t.series];if(void 0!==n){var r=n.values[t.point];r.color=s(n,t.series),r.x=p(r),r.y=g(r);var i=c.node().getBoundingClientRect(),a=window.pageYOffset||document.documentElement.scrollTop,u=window.pageXOffset||document.documentElement.scrollLeft;e({point:r,series:n,pos:{left:f(p(r,t.point))+i.left+u+o.left+10,top:d(g(r,t.point))+i.top+a+o.top+10},seriesIndex:t.series,pointIndex:t.point})}};r.on("click",function(t){l(t,W.elementClick)}).on("dblclick",function(t){l(t,W.elementDblClick)}).on("mouseover",function(t){l(t,W.elementMouseover)}).on("mouseout",function(t,e){l(t,W.elementMouseout)})}else G.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(t,e){if(I||!R[t.series])return 0;var n=R[t.series],r=n.values[e];W.elementClick({point:r,series:n,pos:[f(p(r,e))+o.left,d(g(r,e))+o.top],seriesIndex:t.series,pointIndex:e})}).on("dblclick",function(t,e){if(I||!R[t.series])return 0;var n=R[t.series],r=n.values[e];W.elementDblClick({point:r,series:n,pos:[f(p(r,e))+o.left,d(g(r,e))+o.top],seriesIndex:t.series,pointIndex:e})}).on("mouseover",function(t,e){if(I||!R[t.series])return 0;var n=R[t.series],r=n.values[e];W.elementMouseover({point:r,series:n,pos:[f(p(r,e))+o.left,d(g(r,e))+o.top],seriesIndex:t.series,pointIndex:e,color:s(t,e)})}).on("mouseout",function(t,e){if(I||!R[t.series])return 0;var n=R[t.series];W.elementMouseout({point:n.values[e],series:n,seriesIndex:t.series,pointIndex:e,color:s(t,e)})})},300),e=f.copy(),n=d.copy(),r=h.copy()}),H.renderEnd("scatter immediate"),B}return B.dispatch=W,B.options=t.utils.optionsFunc.bind(B),B._calls=new function(){this.clearHighlights=function(){return t.dom.write(function(){c.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(e,n,r){t.dom.write(function(){c.select(" .nv-series-"+e+" .nv-point-"+n).classed("hover",r)})}},W.on("elementMouseover.point",function(t){w&&B._calls.highlightPoint(t.seriesIndex,t.pointIndex,!0)}),W.on("elementMouseout.point",function(t){w&&B._calls.highlightPoint(t.seriesIndex,t.pointIndex,!1)}),B._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return u},set:function(t){u=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},pointScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return T},set:function(t){T=t}},yDomain:{get:function(){return L},set:function(t){L=t}},pointDomain:{get:function(){return N},set:function(t){N=t}},xRange:{get:function(){return E},set:function(t){E=t}},yRange:{get:function(){return O},set:function(t){O=t}},pointRange:{get:function(){return F},set:function(t){F=t}},forceX:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return b},set:function(t){b=t}},forcePoint:{get:function(){return x},set:function(t){x=t}},interactive:{get:function(){return w},set:function(t){w=t}},pointActive:{get:function(){return k},set:function(t){k=t}},padDataOuter:{get:function(){return M},set:function(t){M=t}},padData:{get:function(){return _},set:function(t){_=t}},clipEdge:{get:function(){return S},set:function(t){S=t}},clipVoronoi:{get:function(){return C},set:function(t){C=t}},clipRadius:{get:function(){return D},set:function(t){D=t}},showVoronoi:{get:function(){return A},set:function(t){A=t}},id:{get:function(){return l},set:function(t){l=t}},x:{get:function(){return p},set:function(t){p=d3.functor(t)}},y:{get:function(){return g},set:function(t){g=d3.functor(t)}},pointSize:{get:function(){return v},set:function(t){v=d3.functor(t)}},pointShape:{get:function(){return m},set:function(t){m=d3.functor(t)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},duration:{get:function(){return R},set:function(t){H.reset(R=t)}},color:{get:function(){return s},set:function(e){s=t.utils.getColor(e)}},useVoronoi:{get:function(){return z},set:function(t){!1===(z=t)&&(C=!1)}}}),t.utils.initOptions(B),B},t.models.scatterChart=function(){"use strict";var e=t.models.scatter(),n=t.models.axis(),r=t.models.axis(),i=t.models.legend(),o=t.models.distribution(),a=t.models.distribution(),u=t.models.tooltip(),s={top:30,right:20,bottom:50,left:75},l=null,c=null,f=null,d=t.utils.defaultColor(),h=e.xScale(),p=e.yScale(),g=!1,v=!1,m=!0,y=!0,b=!0,x=!1,w=t.utils.state(),k=null,_=d3.dispatch("stateChange","changeState","renderEnd"),M=null,S=250;e.xScale(h).yScale(p),n.orient("bottom").tickPadding(10),r.orient(x?"right":"left").tickPadding(10),o.axis("x"),a.axis("y"),u.headerFormatter(function(t,e){return n.tickFormat()(t,e)}).valueFormatter(function(t,e){return r.tickFormat()(t,e)});var C=t.utils.renderWatch(_,S),A=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},D=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};function T(M){return C.reset(),C.models(e),y&&C.models(n),b&&C.models(r),g&&C.models(o),v&&C.models(a),M.each(function(M){f=d3.select(this),t.utils.initSVG(f);var L,E=t.utils.availableWidth(l,f,s),O=t.utils.availableHeight(c,f,s);if(T.update=function(){0===S?f.call(T):f.transition().duration(S).call(T)},T.container=this,w.setter(D(M),T.update).getter(A(M)).update(),w.disabled=M.map(function(t){return!!t.disabled}),!k)for(L in k={},w)k[L]=w[L]instanceof Array?w[L].slice(0):w[L];if(!(M&&M.length&&M.filter(function(t){return t.values.length}).length))return t.utils.noData(T,f),C.renderEnd("scatter immediate"),T;f.selectAll(".nv-noData").remove(),h=e.xScale(),p=e.yScale();var N=f.selectAll("g.nv-wrap.nv-scatterChart").data([M]),F=N.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()).append("g"),P=N.select("g");F.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y nv-axis"),F.append("g").attr("class","nv-scatterWrap"),F.append("g").attr("class","nv-regressionLinesWrap"),F.append("g").attr("class","nv-distWrap"),F.append("g").attr("class","nv-legendWrap"),x&&P.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)"),m&&(i.width(E),N.select(".nv-legendWrap").datum(M).call(i),s.top!=i.height()&&(s.top=i.height(),O=t.utils.availableHeight(c,f,s)),N.select(".nv-legendWrap").attr("transform","translate(0,"+-s.top+")")),N.attr("transform","translate("+s.left+","+s.top+")"),e.width(E).height(O).color(M.map(function(t,e){return t.color=t.color||d(t,e),t.color}).filter(function(t,e){return!M[e].disabled})),N.select(".nv-scatterWrap").datum(M.filter(function(t){return!t.disabled})).call(e),N.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");var W=N.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});W.enter().append("g").attr("class","nv-regLines");var z=W.selectAll(".nv-regLine").data(function(t){return[t]});z.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),z.filter(function(t){return t.intercept&&t.slope}).watchTransition(C,"scatterPlusLineChart: regline").attr("x1",h.range()[0]).attr("x2",h.range()[1]).attr("y1",function(t,e){return p(h.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t,e){return p(h.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return d(t,n)}).style("stroke-opacity",function(t,e){return t.disabled||void 0===t.slope||void 0===t.intercept?0:1}),y&&(n.scale(h)._ticks(t.utils.calcTicksX(E/100,M)).tickSize(-O,0),P.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(n)),b&&(r.scale(p)._ticks(t.utils.calcTicksY(O/36,M)).tickSize(-E,0),P.select(".nv-y.nv-axis").call(r)),g&&(o.getData(e.x()).scale(h).width(E).color(M.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!M[e].disabled})),F.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),P.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(M.filter(function(t){return!t.disabled})).call(o)),v&&(a.getData(e.y()).scale(p).width(O).color(M.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!M[e].disabled})),F.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),P.select(".nv-distributionY").attr("transform","translate("+(x?E:-a.size())+",0)").datum(M.filter(function(t){return!t.disabled})).call(a)),i.dispatch.on("stateChange",function(t){for(var e in t)w[e]=t[e];_.stateChange(w),T.update()}),_.on("changeState",function(t){void 0!==t.disabled&&(M.forEach(function(e,n){e.disabled=t.disabled[n]}),w.disabled=t.disabled),T.update()}),e.dispatch.on("elementMouseout.tooltip",function(t){u.hidden(!0),f.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),f.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",a.size())}),e.dispatch.on("elementMouseover.tooltip",function(t){f.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.pos.top-O-s.top),f.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos.left+o.size()-s.left),u.position(t.pos).data(t).hidden(!1)}),h.copy(),p.copy()}),C.renderEnd("scatter with line immediate"),T}return T.dispatch=_,T.scatter=e,T.legend=i,T.xAxis=n,T.yAxis=r,T.distX=o,T.distY=a,T.tooltip=u,T.options=t.utils.optionsFunc.bind(T),T._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return c},set:function(t){c=t}},container:{get:function(){return f},set:function(t){f=t}},showDistX:{get:function(){return g},set:function(t){g=t}},showDistY:{get:function(){return v},set:function(t){v=t}},showLegend:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return y},set:function(t){y=t}},showYAxis:{get:function(){return b},set:function(t){b=t}},defaultState:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return M},set:function(t){M=t}},duration:{get:function(){return S},set:function(t){S=t}},tooltips:{get:function(){return u.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),u.enabled(!!e)}},tooltipContent:{get:function(){return u.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),u.contentGenerator(e)}},tooltipXContent:{get:function(){return u.contentGenerator()},set:function(e){t.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},tooltipYContent:{get:function(){return u.contentGenerator()},set:function(e){t.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},rightAlignYAxis:{get:function(){return x},set:function(t){x=t,r.orient(t?"right":"left")}},color:{get:function(){return d},set:function(e){d=t.utils.getColor(e),i.color(d),o.color(d),a.color(d)}}}),t.utils.inheritOptions(T,e),t.utils.initOptions(T),T},t.models.sparkline=function(){"use strict";var e,n,r,i,o={top:2,right:0,bottom:2,left:0},a=400,u=32,s=null,l=!0,c=d3.scale.linear(),f=d3.scale.linear(),d=function(t){return t.x},h=function(t){return t.y},p=t.utils.getColor(["#000"]);function g(l){return l.each(function(l){var g=a-o.left-o.right,v=u-o.top-o.bottom;s=d3.select(this),t.utils.initSVG(s),c.domain(e||d3.extent(l,d)).range(r||[0,g]),f.domain(n||d3.extent(l,h)).range(i||[v,0]);var m=s.selectAll("g.nv-wrap.nv-sparkline").data([l]);m.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g"),m.select("g"),m.attr("transform","translate("+o.left+","+o.top+")");var y=m.selectAll("path").data(function(t){return[t]});y.enter().append("path"),y.exit().remove(),y.style("stroke",function(t,e){return t.color||p(t,e)}).attr("d",d3.svg.line().x(function(t,e){return c(d(t,e))}).y(function(t,e){return f(h(t,e))}));var b=m.selectAll("circle.nv-point").data(function(t){var e=t.map(function(t,e){return h(t,e)});function n(e){if(-1!=e){var n=t[e];return n.pointIndex=e,n}return null}var r=n(e.lastIndexOf(f.domain()[1]));return[n(e.indexOf(f.domain()[0])),r,n(e.length-1)].filter(function(t){return null!=t})});b.enter().append("circle"),b.exit().remove(),b.attr("cx",function(t,e){return c(d(t,t.pointIndex))}).attr("cy",function(t,e){return f(h(t,t.pointIndex))}).attr("r",2).attr("class",function(t,e){return d(t,t.pointIndex)==c.domain()[1]?"nv-point nv-currentValue":h(t,t.pointIndex)==f.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),g}return g.options=t.utils.optionsFunc.bind(g),g._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return u},set:function(t){u=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return i},set:function(t){i=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return f},set:function(t){f=t}},animate:{get:function(){return l},set:function(t){l=t}},x:{get:function(){return d},set:function(t){d=d3.functor(t)}},y:{get:function(){return h},set:function(t){h=d3.functor(t)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return p},set:function(e){p=t.utils.getColor(e)}}}),t.utils.initOptions(g),g},t.models.sparklinePlus=function(){"use strict";var e,n,r=t.models.sparkline(),i={top:15,right:100,bottom:10,left:50},o=null,a=null,u=[],s=!1,l=d3.format(",r"),c=d3.format(",.2f"),f=!0,d=!0,h=!1,p=null;function g(p){return p.each(function(p){var v=d3.select(this);t.utils.initSVG(v);var m=t.utils.availableWidth(o,v,i),y=t.utils.availableHeight(a,v,i);if(g.update=function(){v.call(g)},g.container=this,!p||!p.length)return t.utils.noData(g,v),g;v.selectAll(".nv-noData").remove();var b=r.y()(p[p.length-1],p.length-1);e=r.xScale(),n=r.yScale();var x=v.selectAll("g.nv-wrap.nv-sparklineplus").data([p]),w=x.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),k=x.select("g");w.append("g").attr("class","nv-sparklineWrap"),w.append("g").attr("class","nv-valueWrap"),w.append("g").attr("class","nv-hoverArea"),x.attr("transform","translate("+i.left+","+i.top+")");var _=k.select(".nv-sparklineWrap");if(r.width(m).height(y),_.call(r),f){var M=k.select(".nv-valueWrap").selectAll(".nv-currentValue").data([b]);M.enter().append("text").attr("class","nv-currentValue").attr("dx",h?-8:8).attr("dy",".9em").style("text-anchor",h?"end":"start"),M.attr("x",m+(h?i.right:0)).attr("y",d?function(t){return n(t)}:0).style("fill",r.color()(p[p.length-1],p.length-1)).text(c(b))}function S(){if(!s){var t=k.selectAll(".nv-hoverValue").data(u),n=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+e(r.x()(p[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),u.length&&(n.append("line").attr("x1",0).attr("y1",-i.top).attr("x2",0).attr("y2",y),n.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-i.top).attr("text-anchor","end").attr("dy",".9em"),k.select(".nv-hoverValue .nv-xValue").text(l(r.x()(p[u[0]],u[0]))),n.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-i.top).attr("text-anchor","start").attr("dy",".9em"),k.select(".nv-hoverValue .nv-yValue").text(c(r.y()(p[u[0]],u[0]))))}}w.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!s){var t=d3.mouse(this)[0]-i.left;u=[function(t,e){for(var n=Math.abs(r.x()(t[0],0)-e),i=0,o=0;o<t.length;o++)Math.abs(r.x()(t[o],o)-e)<n&&(n=Math.abs(r.x()(t[o],o)-e),i=o);return i}(p,Math.round(e.invert(t)))],S()}}).on("click",function(){s=!s}).on("mouseout",function(){u=[],S()}),k.select(".nv-hoverArea rect").attr("transform",function(t){return"translate("+-i.left+","+-i.top+")"}).attr("width",m+i.left+i.right).attr("height",y+i.top)}),g}return g.sparkline=r,g.options=t.utils.optionsFunc.bind(g),g._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},xTickFormat:{get:function(){return l},set:function(t){l=t}},yTickFormat:{get:function(){return c},set:function(t){c=t}},showLastValue:{get:function(){return f},set:function(t){f=t}},alignValue:{get:function(){return d},set:function(t){d=t}},rightAlignValue:{get:function(){return h},set:function(t){h=t}},noData:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}}}),t.utils.inheritOptions(g,r),t.utils.initOptions(g),g},t.models.stackedArea=function(){"use strict";var e,n,r={top:0,right:0,bottom:0,left:0},i=960,o=500,a=t.utils.defaultColor(),u=Math.floor(1e5*Math.random()),s=null,l=function(t){return t.x},c=function(t){return t.y},f="stack",d="zero",h="default",p="linear",g=!1,v=t.models.scatter(),m=250,y=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");v.pointSize(2.2).pointDomain([2.2,2.2]);var b=t.utils.renderWatch(y,m);function x(f){return b.reset(),b.models(v),f.each(function(f){var m=i-r.left-r.right,w=o-r.top-r.bottom;s=d3.select(this),t.utils.initSVG(s),e=v.xScale(),n=v.yScale();var k=f;f.forEach(function(t,e){t.seriesIndex=e,t.values=t.values.map(function(t,n){return t.index=n,t.seriesIndex=e,t})});var _=f.filter(function(t){return!t.disabled});f=d3.layout.stack().order(h).offset(d).values(function(t){return t.values}).x(l).y(c).out(function(t,e,n){t.display={y:n,y0:e}})(_);var M=s.selectAll("g.nv-wrap.nv-stackedarea").data([f]),S=M.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),C=S.append("defs"),A=S.append("g"),D=M.select("g");A.append("g").attr("class","nv-areaWrap"),A.append("g").attr("class","nv-scatterWrap"),M.attr("transform","translate("+r.left+","+r.top+")"),0==v.forceY().length&&v.forceY().push(0),v.width(m).height(w).x(l).y(function(t){return t.display.y+t.display.y0}).forceY([0]).color(f.map(function(t,e){return t.color||a(t,t.seriesIndex)})),D.select(".nv-scatterWrap").datum(f).call(v),C.append("clipPath").attr("id","nv-edge-clip-"+u).append("rect"),M.select("#nv-edge-clip-"+u+" rect").attr("width",m).attr("height",w),D.attr("clip-path",g?"url(#nv-edge-clip-"+u+")":"");var T=d3.svg.area().x(function(t,n){return e(l(t,n))}).y0(function(t){return n(t.display.y0)}).y1(function(t){return n(t.display.y+t.display.y0)}).interpolate(p),L=d3.svg.area().x(function(t,n){return e(l(t,n))}).y0(function(t){return n(t.display.y0)}).y1(function(t){return n(t.display.y0)}),E=D.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});E.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t,e){return L(t.values,t.seriesIndex)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),y.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),y.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("click",function(t,e){d3.select(this).classed("hover",!1),y.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}),E.exit().remove(),E.style("fill",function(t,e){return t.color||a(t,t.seriesIndex)}).style("stroke",function(t,e){return t.color||a(t,t.seriesIndex)}),E.watchTransition(b,"stackedArea path").attr("d",function(t,e){return T(t.values,e)}),v.dispatch.on("elementMouseover.area",function(t){D.select(".nv-chart-"+u+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),v.dispatch.on("elementMouseout.area",function(t){D.select(".nv-chart-"+u+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),x.d3_stackedOffset_stackPercent=function(t){var e,n,r,i=t.length,o=t[0].length,a=[];for(n=0;n<o;++n){for(e=0,r=0;e<k.length;e++)r+=c(k[e].values[n]);if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=0}for(n=0;n<o;++n)a[n]=0;return a}}),b.renderEnd("stackedArea immediate"),x}return x.dispatch=y,x.scatter=v,v.dispatch.on("elementClick",function(){y.elementClick.apply(this,arguments)}),v.dispatch.on("elementMouseover",function(){y.elementMouseover.apply(this,arguments)}),v.dispatch.on("elementMouseout",function(){y.elementMouseout.apply(this,arguments)}),x.interpolate=function(t){return arguments.length?(p=t,x):p},x.duration=function(t){return arguments.length?(b.reset(m=t),v.duration(m),x):m},x.dispatch=y,x.scatter=v,x.options=t.utils.optionsFunc.bind(x),x._options=Object.create({},{width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return o},set:function(t){o=t}},clipEdge:{get:function(){return g},set:function(t){g=t}},offset:{get:function(){return d},set:function(t){d=t}},order:{get:function(){return h},set:function(t){h=t}},interpolate:{get:function(){return p},set:function(t){p=t}},x:{get:function(){return l},set:function(t){l=d3.functor(t)}},y:{get:function(){return c},set:function(t){c=d3.functor(t)}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},color:{get:function(){return a},set:function(e){a=t.utils.getColor(e)}},style:{get:function(){return f},set:function(t){switch(f=t){case"stack":x.offset("zero"),x.order("default");break;case"stream":x.offset("wiggle"),x.order("inside-out");break;case"stream-center":x.offset("silhouette"),x.order("inside-out");break;case"expand":x.offset("expand"),x.order("default");break;case"stack_percent":x.offset(x.d3_stackedOffset_stackPercent),x.order("default")}}},duration:{get:function(){return m},set:function(t){b.reset(m=t),v.duration(m)}}}),t.utils.inheritOptions(x,v),t.utils.initOptions(x),x},t.models.stackedAreaChart=function(){"use strict";var e,n,r=t.models.stackedArea(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend(),u=t.models.legend(),s=t.interactiveGuideline(),l=t.models.tooltip(),c={top:30,right:25,bottom:50,left:60},f=null,d=null,h=t.utils.defaultColor(),p=!0,g=!0,v=!0,m=!0,y=!1,b=!1,x=t.utils.state(),w=null,k=null,_=d3.dispatch("stateChange","changeState","renderEnd"),M=250,S=["Stacked","Stream","Expanded"],C={},A=250;x.style=r.style(),i.orient("bottom").tickPadding(7),o.orient(y?"right":"left"),l.headerFormatter(function(t,e){return i.tickFormat()(t,e)}).valueFormatter(function(t,e){return o.tickFormat()(t,e)}),s.tooltip.headerFormatter(function(t,e){return i.tickFormat()(t,e)}).valueFormatter(function(t,e){return o.tickFormat()(t,e)});var D=null,T=null;u.updateState(!1);var L=t.utils.renderWatch(_),E=(r.style(),function(t){return function(){return{active:t.map(function(t){return!t.disabled}),style:r.style()}}}),O=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},N=d3.format("%");function F(l){return L.reset(),L.models(r),v&&L.models(i),m&&L.models(o),l.each(function(l){var k=d3.select(this),L=this;t.utils.initSVG(k);var P,W=t.utils.availableWidth(f,k,c),z=t.utils.availableHeight(d,k,c);if(F.update=function(){k.transition().duration(A).call(F)},F.container=this,x.setter(O(l),F.update).getter(E(l)).update(),x.disabled=l.map(function(t){return!!t.disabled}),!w)for(P in w={},x)w[P]=x[P]instanceof Array?x[P].slice(0):x[P];if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return t.utils.noData(F,k),F;k.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale();var R=k.selectAll("g.nv-wrap.nv-stackedAreaChart").data([l]),I=R.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),H=R.select("g");if(I.append("rect").style("opacity",0),I.append("g").attr("class","nv-x nv-axis"),I.append("g").attr("class","nv-y nv-axis"),I.append("g").attr("class","nv-stackedWrap"),I.append("g").attr("class","nv-legendWrap"),I.append("g").attr("class","nv-controlsWrap"),I.append("g").attr("class","nv-interactive"),H.select("rect").attr("width",W).attr("height",z),g){var Y=p?W-M:W;a.width(Y),H.select(".nv-legendWrap").datum(l).call(a),c.top!=a.height()&&(c.top=a.height(),z=t.utils.availableHeight(d,k,c)),H.select(".nv-legendWrap").attr("transform","translate("+(W-Y)+","+-c.top+")")}if(p){var B=[{key:C.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=r.style(),style:"stack"},{key:C.stream||"Stream",metaKey:"Stream",disabled:"stream"!=r.style(),style:"stream"},{key:C.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=r.style(),style:"expand"},{key:C.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=r.style(),style:"stack_percent"}];M=S.length/3*260,B=B.filter(function(t){return-1!==S.indexOf(t.metaKey)}),u.width(M).color(["#444","#444","#444"]),H.select(".nv-controlsWrap").datum(B).call(u),c.top!=Math.max(u.height(),a.height())&&(c.top=Math.max(u.height(),a.height()),z=t.utils.availableHeight(d,k,c)),H.select(".nv-controlsWrap").attr("transform","translate(0,"+-c.top+")")}if(R.attr("transform","translate("+c.left+","+c.top+")"),y&&H.select(".nv-y.nv-axis").attr("transform","translate("+W+",0)"),b&&(s.width(W).height(z).margin({left:c.left,top:c.top}).svgContainer(k).xScale(e),R.select(".nv-interactive").call(s)),r.width(W).height(z),H.select(".nv-stackedWrap").datum(l).transition().call(r),v&&(i.scale(e)._ticks(t.utils.calcTicksX(W/100,l)).tickSize(-z,0),H.select(".nv-x.nv-axis").attr("transform","translate(0,"+z+")"),H.select(".nv-x.nv-axis").transition().duration(0).call(i)),m){var j;if(j="wiggle"===r.offset()?0:t.utils.calcTicksY(z/36,l),o.scale(n)._ticks(j).tickSize(-W,0),"expand"===r.style()||"stack_percent"===r.style()){var U=o.tickFormat();D&&U===N||(D=U),o.tickFormat(N)}else D&&(o.tickFormat(D),D=null);H.select(".nv-y.nv-axis").transition().duration(0).call(o)}r.dispatch.on("areaClick.toggle",function(t){1===l.filter(function(t){return!t.disabled}).length?l.forEach(function(t){t.disabled=!1}):l.forEach(function(e,n){e.disabled=n!=t.seriesIndex}),x.disabled=l.map(function(t){return!!t.disabled}),_.stateChange(x),F.update()}),a.dispatch.on("stateChange",function(t){for(var e in t)x[e]=t[e];_.stateChange(x),F.update()}),u.dispatch.on("legendClick",function(t,e){t.disabled&&(B=B.map(function(t){return t.disabled=!0,t}),t.disabled=!1,r.style(t.style),x.style=r.style(),_.stateChange(x),F.update())}),s.dispatch.on("elementMousemove",function(e){r.clearHighlights();var n,o,a,u=[];if(l.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(i,s){o=t.interactiveBisect(i.values,e.pointXValue,F.x());var l=i.values[o];if(null!=F.y()(l,o)&&r.highlightPoint(s,o,!0),void 0!==l){void 0===n&&(n=l),void 0===a&&(a=F.xScale()(F.x()(l,o)));var c="expand"==r.style()?l.display.y:F.y()(l,o);u.push({key:i.key,value:c,color:h(i,i.seriesIndex),stackedValue:l.display})}}),u.reverse(),u.length>2){var f=F.yScale().invert(e.mouseY),d=null;u.forEach(function(t,e){f=Math.abs(f);var n=Math.abs(t.stackedValue.y0),r=Math.abs(t.stackedValue.y);f>=n&&f<=r+n&&(d=e)}),null!=d&&(u[d].highlight=!0)}var p=i.tickFormat()(F.x()(n,o)),g=s.tooltip.valueFormatter();"expand"===r.style()||"stack_percent"===r.style()?(T||(T=g),g=d3.format(".1%")):T&&(g=T,T=null),s.tooltip.position({left:a+c.left,top:e.mouseY+c.top}).chartContainer(L.parentNode).valueFormatter(g).data({value:p,series:u})(),s.renderGuideLine(a)}),s.dispatch.on("elementMouseout",function(t){r.clearHighlights()}),_.on("changeState",function(t){void 0!==t.disabled&&l.length===t.disabled.length&&(l.forEach(function(e,n){e.disabled=t.disabled[n]}),x.disabled=t.disabled),void 0!==t.style&&r.style(t.style),F.update()})}),L.renderEnd("stacked Area chart immediate"),F}return r.dispatch.on("elementMouseover.tooltip",function(t){t.point.x=r.x()(t.point),t.point.y=r.y()(t.point),l.data(t).position(t.pos).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0)}),F.dispatch=_,F.stacked=r,F.legend=a,F.controls=u,F.xAxis=i,F.yAxis=o,F.interactiveLayer=s,F.tooltip=l,F.dispatch=_,F.options=t.utils.optionsFunc.bind(F),F._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return d},set:function(t){d=t}},showLegend:{get:function(){return g},set:function(t){g=t}},showXAxis:{get:function(){return v},set:function(t){v=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return w},set:function(t){w=t}},noData:{get:function(){return k},set:function(t){k=t}},showControls:{get:function(){return p},set:function(t){p=t}},controlLabels:{get:function(){return C},set:function(t){C=t}},controlOptions:{get:function(){return S},set:function(t){S=t}},tooltips:{get:function(){return l.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),l.enabled(!!e)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),l.contentGenerator(e)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return A},set:function(t){L.reset(A=t),r.duration(A),i.duration(A),o.duration(A)}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),a.color(h),r.color(h)}},rightAlignYAxis:{get:function(){return y},set:function(t){o.orient((y=t)?"right":"left")}},useInteractiveGuideline:{get:function(){return b},set:function(t){b=!!t,F.interactive(!t),F.useVoronoi(!t),r.scatter.interactive(!t)}}}),t.utils.inheritOptions(F,r),t.utils.initOptions(F),F},t.models.sunburst=function(){"use strict";var e,n,r,i={top:0,right:0,bottom:0,left:0},o=null,a=null,u="count",s={count:function(t){return 1},size:function(t){return t.size}},l=Math.floor(1e4*Math.random()),c=null,f=t.utils.defaultColor(),d=500,h=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),p=d3.scale.linear().range([0,2*Math.PI]),g=d3.scale.sqrt(),v=d3.layout.partition().sort(null).value(function(t){return 1}),m=d3.svg.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,p(t.x)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,p(t.x+t.dx)))}).innerRadius(function(t){return Math.max(0,g(t.y))}).outerRadius(function(t){return Math.max(0,g(t.y+t.dy))}),y=t.utils.renderWatch(h);function b(x){return y.reset(),x.each(function(y){c=d3.select(this);var b,x=t.utils.availableWidth(o,c,i),w=t.utils.availableHeight(a,c,i),k=Math.min(x,w)/2;t.utils.initSVG(c);var _=c.selectAll(".nv-wrap.nv-sunburst").data(y),M=_.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+l).selectAll("nv-sunburst");function S(t){t.x0=t.x,t.dx0=t.dx}function C(t){var e=d3.interpolate(p.domain(),[t.x,t.x+t.dx]),n=d3.interpolate(g.domain(),[t.y,1]),r=d3.interpolate(g.range(),[t.y?20:0,k]);return function(t,i){return i?function(e){return m(t)}:function(i){return p.domain(e(i)),g.domain(n(i)).range(r(i)),m(t)}}}_.attr("transform","translate("+x/2+","+w/2+")"),c.on("click",function(t,e){h.chartClick({data:t,index:e,pos:d3.event,id:l})}),g.range([0,k]),e=e||y,r=y[0],v.value(s[u]||s.count),b=M.data(v.nodes).enter().append("path").attr("d",m).style("fill",function(t){return f((t.children?t:t.parent).name)}).style("stroke","#FFF").on("click",function(t){n!==e&&e!==t&&(n=e),e=t,b.transition().duration(d).attrTween("d",C(t))}).each(S).on("dblclick",function(t){n.parent==t&&b.transition().duration(d).attrTween("d",C(r))}).each(S).on("mouseover",function(t,e){d3.select(this).classed("hover",!0).style("opacity",.8),h.elementMouseover({data:t,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1).style("opacity",1),h.elementMouseout({data:t})}).on("mousemove",function(t,e){h.elementMousemove({data:t})})}),y.renderEnd("sunburst immediate"),b}return b.dispatch=h,b.options=t.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},mode:{get:function(){return u},set:function(t){u=t}},id:{get:function(){return l},set:function(t){l=t}},duration:{get:function(){return d},set:function(t){d=t}},margin:{get:function(){return i},set:function(t){i.top=null!=t.top?t.top:i.top,i.right=null!=t.right?t.right:i.right,i.bottom=null!=t.bottom?t.bottom:i.bottom,i.left=null!=t.left?t.left:i.left}},color:{get:function(){return f},set:function(e){f=t.utils.getColor(e)}}}),t.utils.initOptions(b),b},t.models.sunburstChart=function(){"use strict";var e=t.models.sunburst(),n=t.models.tooltip(),r={top:30,right:20,bottom:20,left:20},i=null,o=null,a=t.utils.defaultColor(),u=(Math.round(1e5*Math.random()),null),s=null,l=250,c=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),f=t.utils.renderWatch(c);function d(n){return f.reset(),f.models(e),n.each(function(n){var a=d3.select(this);t.utils.initSVG(a);var u=t.utils.availableWidth(i,a,r),s=t.utils.availableHeight(o,a,r);if(d.update=function(){0===l?a.call(d):a.transition().duration(l).call(d)},d.container=this,!n||!n.length)return t.utils.noData(d,a),d;a.selectAll(".nv-noData").remove();var c=a.selectAll("g.nv-wrap.nv-sunburstChart").data(n),f=c.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburstChart").append("g"),h=c.select("g");f.append("g").attr("class","nv-sunburstWrap"),c.attr("transform","translate("+r.left+","+r.top+")"),e.width(u).height(s);var p=h.select(".nv-sunburstWrap").datum(n);d3.transition(p).call(e)}),f.renderEnd("sunburstChart immediate"),d}return n.headerEnabled(!1).duration(0).valueFormatter(function(t,e){return t}),e.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.data.name,value:t.data.size,color:t.color},n.data(t).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(t){n.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(t){n.position({top:d3.event.pageY,left:d3.event.pageX})()}),d.dispatch=c,d.sunburst=e,d.tooltip=n,d.options=t.utils.optionsFunc.bind(d),d._options=Object.create({},{noData:{get:function(){return s},set:function(t){s=t}},defaultState:{get:function(){return u},set:function(t){u=t}},color:{get:function(){return a},set:function(t){e.color(a=t)}},duration:{get:function(){return l},set:function(t){f.reset(l=t),e.duration(l)}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}}}),t.utils.inheritOptions(d,e),t.utils.initOptions(d),d},t.version="1.8.1"}(),function(t,e){"use strict";"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.returnExports=e()}(this,function(){var t,e,n=Array,r=n.prototype,i=Object,o=i.prototype,a=Function,u=a.prototype,s=String,l=s.prototype,c=Number,f=c.prototype,d=r.slice,h=r.splice,p=r.push,g=r.unshift,v=r.concat,m=r.join,y=u.call,b=u.apply,x=Math.max,w=Math.min,k=o.toString,_="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,M=Function.prototype.toString,S=/^\s*class /,C=function(t){try{var e=M.call(t).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return S.test(e)}catch(n){return!1}},A=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(_)return function(t){try{return!C(t)&&(M.call(t),!0)}catch(e){return!1}}(t);if(C(t))return!1;var e=k.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e},D=RegExp.prototype.exec;t=function(t){return"object"==typeof t&&(_?function(t){try{return D.call(t),!0}catch(e){return!1}}(t):"[object RegExp]"===k.call(t))};var T=String.prototype.valueOf;e=function(t){return"string"==typeof t||"object"==typeof t&&(_?function(t){try{return T.call(t),!0}catch(e){return!1}}(t):"[object String]"===k.call(t))};var L,E,O=i.defineProperty&&function(){try{var t={};for(var e in i.defineProperty(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(n){return!1}}(),N=(L=o.hasOwnProperty,E=O?function(t,e,n,r){!r&&e in t||i.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(t,e,n,r){!r&&e in t||(t[e]=n)},function(t,e,n){for(var r in e)L.call(e,r)&&E(t,r,e[r],n)}),F=function(t){var e=typeof t;return null===t||"object"!==e&&"function"!==e},P=c.isNaN||function(t){return t!=t},W=function(t){var e=+t;return P(e)?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e},z=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return i(t)},R=function(t){return t>>>0},I=function(){};N(u,{bind:function(t){var e=this;if(!A(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,r=d.call(arguments,1),o=x(0,e.length-r.length),u=[],s=0;s<o;s++)p.call(u,"$"+s);return n=a("binder","return function ("+m.call(u,",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof n){var o=b.call(e,this,v.call(r,d.call(arguments)));return i(o)===o?o:this}return b.call(e,t,v.call(r,d.call(arguments)))}),e.prototype&&(I.prototype=e.prototype,n.prototype=new I,I.prototype=null),n}});var H=y.bind(o.hasOwnProperty),Y=y.bind(o.toString),B=y.bind(d),j=b.bind(d);if("object"==typeof document&&document&&document.documentElement)try{B(document.documentElement.childNodes)}catch(Oe){var U=B,G=j;B=function(t){for(var e=[],n=t.length;n-- >0;)e[n]=t[n];return G(e,U(arguments,1))},j=function(t,e){return G(B(t),e)}}var V=y.bind(l.slice),q=y.bind(l.split),$=y.bind(l.indexOf),X=y.bind(p),Z=y.bind(o.propertyIsEnumerable),K=y.bind(r.sort),Q=n.isArray||function(t){return"[object Array]"===Y(t)},J=1!==[].unshift(0);N(r,{unshift:function(){return g.apply(this,arguments),this.length}},J),N(n,{isArray:Q});var tt=i("a"),et="a"!==tt[0]||!(0 in tt),nt=function(t){var e=!0,n=!0,r=!1;if(t)try{t.call("foo",function(t,n,r){"object"!=typeof r&&(e=!1)}),t.call([1],function(){"use strict";n="string"==typeof this},"x")}catch(Oe){r=!0}return!!t&&!r&&e&&n};N(r,{forEach:function(t){var n,r=z(this),i=et&&e(this)?q(this,""):r,o=-1,a=R(i.length);if(arguments.length>1&&(n=arguments[1]),!A(t))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++o<a;)o in i&&(void 0===n?t(i[o],o,r):t.call(n,i[o],o,r))}},!nt(r.forEach)),N(r,{map:function(t){var r,i=z(this),o=et&&e(this)?q(this,""):i,a=R(o.length),u=n(a);if(arguments.length>1&&(r=arguments[1]),!A(t))throw new TypeError("Array.prototype.map callback must be a function");for(var s=0;s<a;s++)s in o&&(u[s]=void 0===r?t(o[s],s,i):t.call(r,o[s],s,i));return u}},!nt(r.map)),N(r,{filter:function(t){var n,r,i=z(this),o=et&&e(this)?q(this,""):i,a=R(o.length),u=[];if(arguments.length>1&&(r=arguments[1]),!A(t))throw new TypeError("Array.prototype.filter callback must be a function");for(var s=0;s<a;s++)s in o&&(n=o[s],(void 0===r?t(n,s,i):t.call(r,n,s,i))&&X(u,n));return u}},!nt(r.filter)),N(r,{every:function(t){var n,r=z(this),i=et&&e(this)?q(this,""):r,o=R(i.length);if(arguments.length>1&&(n=arguments[1]),!A(t))throw new TypeError("Array.prototype.every callback must be a function");for(var a=0;a<o;a++)if(a in i&&!(void 0===n?t(i[a],a,r):t.call(n,i[a],a,r)))return!1;return!0}},!nt(r.every)),N(r,{some:function(t){var n,r=z(this),i=et&&e(this)?q(this,""):r,o=R(i.length);if(arguments.length>1&&(n=arguments[1]),!A(t))throw new TypeError("Array.prototype.some callback must be a function");for(var a=0;a<o;a++)if(a in i&&(void 0===n?t(i[a],a,r):t.call(n,i[a],a,r)))return!0;return!1}},!nt(r.some));var rt=!1;r.reduce&&(rt="object"==typeof r.reduce.call("es5",function(t,e,n,r){return r})),N(r,{reduce:function(t){var n=z(this),r=et&&e(this)?q(this,""):n,i=R(r.length);if(!A(t))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,a=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in r){o=r[a++];break}if(++a>=i)throw new TypeError("reduce of empty array with no initial value")}for(;a<i;a++)a in r&&(o=t(o,r[a],a,n));return o}},!rt);var it=!1;r.reduceRight&&(it="object"==typeof r.reduceRight.call("es5",function(t,e,n,r){return r})),N(r,{reduceRight:function(t){var n,r=z(this),i=et&&e(this)?q(this,""):r,o=R(i.length);if(!A(t))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===o&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var a=o-1;if(arguments.length>=2)n=arguments[1];else for(;;){if(a in i){n=i[a--];break}if(--a<0)throw new TypeError("reduceRight of empty array with no initial value")}if(a<0)return n;do{a in i&&(n=t(n,i[a],a,r))}while(a--);return n}},!it);var ot=r.indexOf&&-1!==[0,1].indexOf(1,2);N(r,{indexOf:function(t){var n=et&&e(this)?q(this,""):z(this),r=R(n.length);if(0===r)return-1;var i=0;for(arguments.length>1&&(i=W(arguments[1])),i=i>=0?i:x(0,r+i);i<r;i++)if(i in n&&n[i]===t)return i;return-1}},ot);var at=r.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);N(r,{lastIndexOf:function(t){var n=et&&e(this)?q(this,""):z(this),r=R(n.length);if(0===r)return-1;var i=r-1;for(arguments.length>1&&(i=w(i,W(arguments[1]))),i=i>=0?i:r-Math.abs(i);i>=0;i--)if(i in n&&t===n[i])return i;return-1}},at);var ut,st,lt=(st=(ut=[1,2]).splice(),2===ut.length&&Q(st)&&0===st.length);N(r,{splice:function(t,e){return 0===arguments.length?[]:h.apply(this,arguments)}},!lt);var ct,ft=(r.splice.call(ct={},0,0,1),1===ct.length);N(r,{splice:function(t,e){if(0===arguments.length)return[];var n=arguments;return this.length=x(W(this.length),0),arguments.length>0&&"number"!=typeof e&&((n=B(arguments)).length<2?X(n,this.length-t):n[1]=W(e)),h.apply(this,n)}},!ft);var dt,ht=((dt=new n(1e5))[8]="x",dt.splice(1,1),7===dt.indexOf("x")),pt=function(){var t=[];return t[256]="a",t.splice(257,0,"b"),"a"===t[256]}();N(r,{splice:function(t,e){for(var n,r=z(this),i=[],o=R(r.length),a=W(t),u=a<0?x(o+a,0):w(a,o),l=w(x(W(e),0),o-u),c=0;c<l;)n=s(u+c),H(r,n)&&(i[c]=r[n]),c+=1;var f,d=B(arguments,2),h=d.length;if(h<l){c=u;for(var p=o-l;c<p;)n=s(c+l),f=s(c+h),H(r,n)?r[f]=r[n]:delete r[f],c+=1;c=o;for(var g=o-l+h;c>g;)delete r[c-1],c-=1}else if(h>l)for(c=o-l;c>u;)n=s(c+l-1),f=s(c+h-1),H(r,n)?r[f]=r[n]:delete r[f],c-=1;c=u;for(var v=0;v<d.length;++v)r[c]=d[v],c+=1;return r.length=o-l+h,i}},!ht||!pt);var gt,vt=r.join;try{gt="1,2,3"!==Array.prototype.join.call("123",",")}catch(Oe){gt=!0}gt&&N(r,{join:function(t){var n=void 0===t?",":t;return vt.call(e(this)?q(this,""):this,n)}},gt);var mt="1,2"!==[1,2].join(void 0);mt&&N(r,{join:function(t){return vt.call(this,void 0===t?",":t)}},mt);var yt=function(t){for(var e=z(this),n=R(e.length),r=0;r<arguments.length;)e[n+r]=arguments[r],r+=1;return e.length=n+r,n+r},bt=function(){var t={};return 1!==Array.prototype.push.call(t,void 0)||1!==t.length||void 0!==t[0]||!H(t,0)}();N(r,{push:function(t){return Q(this)?p.apply(this,arguments):yt.apply(this,arguments)}},bt);var xt=function(){var t=[];return 1!==t.push(void 0)||1!==t.length||void 0!==t[0]||!H(t,0)}();N(r,{push:yt},xt),N(r,{slice:function(t,n){var r=e(this)?q(this,""):this;return j(r,arguments)}},et);var wt=function(){try{[1,2].sort(null)}catch(Oe){try{[1,2].sort({})}catch(t){return!1}}return!0}(),kt=function(){try{return[1,2].sort(/a/),!1}catch(Oe){}return!0}(),_t=function(){try{return[1,2].sort(void 0),!0}catch(Oe){}return!1}();N(r,{sort:function(t){if(void 0===t)return K(this);if(!A(t))throw new TypeError("Array.prototype.sort callback must be a function");return K(this,t)}},wt||!_t||!kt);var Mt=!Z({toString:null},"toString"),St=Z(function(){},"prototype"),Ct=!H("x","0"),At=function(t){var e=t.constructor;return e&&e.prototype===t},Dt={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0,$width:!0,$height:!0,$top:!0,$localStorage:!0},Tt=function(){if("undefined"==typeof window)return!1;for(var t in window)try{!Dt["$"+t]&&H(window,t)&&null!==window[t]&&"object"==typeof window[t]&&At(window[t])}catch(Oe){return!0}return!1}(),Lt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Et=Lt.length,Ot=function(t){return"[object Arguments]"===Y(t)},Nt=Ot(arguments)?Ot:function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&!Q(t)&&A(t.callee)};N(i,{keys:function(t){var n=A(t),r=Nt(t),i=null!==t&&"object"==typeof t,o=i&&e(t);if(!i&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var a=[],u=St&&n;if(o&&Ct||r)for(var l=0;l<t.length;++l)X(a,s(l));if(!r)for(var c in t)u&&"prototype"===c||!H(t,c)||X(a,s(c));if(Mt)for(var f=function(t){if("undefined"==typeof window||!Tt)return At(t);try{return At(t)}catch(Oe){return!1}}(t),d=0;d<Et;d++){var h=Lt[d];f&&"constructor"===h||!H(t,h)||X(a,h)}return a}});var Ft=i.keys&&function(){return 2===i.keys(arguments).length}(1,2),Pt=i.keys&&function(){var t=i.keys(arguments);return 1!==arguments.length||1!==t.length||1!==t[0]}(1),Wt=i.keys;N(i,{keys:function(t){return Nt(t)?Wt(B(t)):Wt(t)}},!Ft||Pt);var zt,Rt,It=0!==new Date(-0xc782b5b342b24).getUTCMonth(),Ht=new Date(-0x55d318d56a724),Yt=new Date(14496624e5),Bt="Mon, 01 Jan -45875 11:59:59 GMT"!==Ht.toUTCString();Ht.getTimezoneOffset()<-720?(zt="Tue Jan 02 -45875"!==Ht.toDateString(),Rt=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(Yt))):(zt="Mon Jan 01 -45875"!==Ht.toDateString(),Rt=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(Yt)));var jt=y.bind(Date.prototype.getFullYear),Ut=y.bind(Date.prototype.getMonth),Gt=y.bind(Date.prototype.getDate),Vt=y.bind(Date.prototype.getUTCFullYear),qt=y.bind(Date.prototype.getUTCMonth),$t=y.bind(Date.prototype.getUTCDate),Xt=y.bind(Date.prototype.getUTCDay),Zt=y.bind(Date.prototype.getUTCHours),Kt=y.bind(Date.prototype.getUTCMinutes),Qt=y.bind(Date.prototype.getUTCSeconds),Jt=y.bind(Date.prototype.getUTCMilliseconds),te=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ne=function(t,e){return Gt(new Date(e,t,0))};N(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=jt(this);return t<0&&Ut(this)>11?t+1:t},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=jt(this),e=Ut(this);return t<0&&e>11?0:e},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=jt(this),e=Ut(this),n=Gt(this);return t<0&&e>11?12===e?n:ne(0,t+1)-n+1:n},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=Vt(this);return t<0&&qt(this)>11?t+1:t},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=Vt(this),e=qt(this);return t<0&&e>11?0:e},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=Vt(this),e=qt(this),n=$t(this);return t<0&&e>11?12===e?n:ne(0,t+1)-n+1:n}},It),N(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=Xt(this),e=$t(this),n=qt(this),r=Vt(this),i=Zt(this),o=Kt(this),a=Qt(this);return te[t]+", "+(e<10?"0"+e:e)+" "+ee[n]+" "+r+" "+(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"}},It||Bt),N(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=this.getDay(),e=this.getDate(),n=this.getMonth(),r=this.getFullYear();return te[t]+" "+ee[n]+" "+(e<10?"0"+e:e)+" "+r}},It||zt),(It||Rt)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=this.getDay(),e=this.getDate(),n=this.getMonth(),r=this.getFullYear(),i=this.getHours(),o=this.getMinutes(),a=this.getSeconds(),u=this.getTimezoneOffset(),s=Math.floor(Math.abs(u)/60),l=Math.floor(Math.abs(u)%60);return te[t]+" "+ee[n]+" "+(e<10?"0"+e:e)+" "+r+" "+(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"+(u>0?"-":"+")+(s<10?"0"+s:s)+(l<10?"0"+l:l)},O&&i.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var re=Date.prototype.toISOString&&-1===new Date(-621987552e5).toISOString().indexOf("-000001"),ie=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),oe=y.bind(Date.prototype.getTime);N(Date.prototype,{toISOString:function(){if(!isFinite(this)||!isFinite(oe(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var t=Vt(this),e=qt(this);t+=Math.floor(e/12);var n=[1+(e=(e%12+12)%12),$t(this),Zt(this),Kt(this),Qt(this)];t=(t<0?"-":t>9999?"+":"")+V("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var r=0;r<n.length;++r)n[r]=V("00"+n[r],-2);return t+"-"+B(n,0,2).join("-")+"T"+B(n,2).join(":")+"."+V("000"+Jt(this),-3)+"Z"}},re||ie),function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(-621987552e5).toJSON().indexOf("-000001")&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(Oe){return!1}}()||(Date.prototype.toJSON=function(t){var e=i(this),n=function(t){var e,n,r;if(F(t))return t;if(A(n=t.valueOf)&&(e=n.call(t),F(e)))return e;if(A(r=t.toString)&&(e=r.call(t),F(e)))return e;throw new TypeError}(e);if("number"==typeof n&&!isFinite(n))return null;var r=e.toISOString;if(!A(r))throw new TypeError("toISOString property is not callable");return r.call(e)});var ae=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),ue=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));if(isNaN(Date.parse("2000-01-01T00:00:00.000Z"))||ue||!ae){var se=Math.pow(2,31)-1,le=P(new Date(1970,0,1,0,0,0,se+1).getTime());Date=function(t){var e=function(n,r,i,o,a,u,l){var c,f=arguments.length;if(this instanceof t){var d=u,h=l;if(le&&f>=7&&l>se){var p=Math.floor(l/se)*se,g=Math.floor(p/1e3);d+=g,h-=1e3*g}c=1===f&&s(n)===n?new t(e.parse(n)):f>=7?new t(n,r,i,o,a,d,h):f>=6?new t(n,r,i,o,a,d):f>=5?new t(n,r,i,o,a):f>=4?new t(n,r,i,o):f>=3?new t(n,r,i):f>=2?new t(n,r):f>=1?new t(n instanceof t?+n:n):new t}else c=t.apply(this,arguments);return F(c)||N(c,{constructor:e},!0),c},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),r=[0,31,59,90,120,151,181,212,243,273,304,334,365],i=function(t,e){var n=e>1?1:0;return r[e]+Math.floor((t-1969+n)/4)-Math.floor((t-1901+n)/100)+Math.floor((t-1601+n)/400)+365*(t-1970)};for(var o in t)H(t,o)&&(e[o]=t[o]);return N(e,{now:t.now,UTC:t.UTC},!0),e.prototype=t.prototype,N(e.prototype,{constructor:e},!0),N(e,{parse:function(e){var r=n.exec(e);if(r){var o,a=c(r[1]),u=c(r[2]||1)-1,s=c(r[3]||1)-1,l=c(r[4]||0),f=c(r[5]||0),d=c(r[6]||0),h=Math.floor(1e3*c(r[7]||0)),p=Boolean(r[4]&&!r[8]),g="-"===r[9]?1:-1,v=c(r[10]||0),m=c(r[11]||0);return l<(f>0||d>0||h>0?24:25)&&f<60&&d<60&&h<1e3&&u>-1&&u<12&&v<24&&m<60&&s>-1&&s<i(a,u+1)-i(a,u)&&(o=1e3*(60*((o=60*(24*(i(a,u)+s)+l+v*g))+f+m*g)+d)+h,p&&(o=function(e){var n=0,r=o;if(le&&r>se){var i=Math.floor(r/se)*se,a=Math.floor(i/1e3);n+=a,r-=1e3*a}return c(new t(1970,0,1,0,0,n,r))}()),-864e13<=o&&o<=864e13)?o:NaN}return t.parse.apply(this,arguments)}}),e}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var ce=f.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),fe={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(t,e){for(var n=-1,r=e;++n<fe.size;)fe.data[n]=(r+=t*fe.data[n])%fe.base,r=Math.floor(r/fe.base)},divide:function(t){for(var e=fe.size,n=0;--e>=0;)n+=fe.data[e],fe.data[e]=Math.floor(n/t),n=n%t*fe.base},numToString:function(){for(var t=fe.size,e="";--t>=0;)if(""!==e||0===t||0!==fe.data[t]){var n=s(fe.data[t]);""===e?e=n:e+=V("0000000",0,7-n.length)+n}return e},pow:function t(e,n,r){return 0===n?r:n%2==1?t(e,n-1,r*e):t(e*e,n/2,r)},log:function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}};N(f,{toFixed:function(t){var e,n,r,i,o,a,u,l;if(e=c(t),(e=P(e)?0:Math.floor(e))<0||e>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=c(this),P(n))return"NaN";if(n<=-1e21||n>=1e21)return s(n);if(r="",n<0&&(r="-",n=-n),i="0",n>1e-21)if(a=(o=fe.log(n*fe.pow(2,69,1))-69)<0?n*fe.pow(2,-o,1):n/fe.pow(2,o,1),a*=4503599627370496,(o=52-o)>0){for(fe.multiply(0,a),u=e;u>=7;)fe.multiply(1e7,0),u-=7;for(fe.multiply(fe.pow(10,u,1),0),u=o-1;u>=23;)fe.divide(1<<23),u-=23;fe.divide(1<<u),fe.multiply(1,1),fe.divide(2),i=fe.numToString()}else fe.multiply(0,a),fe.multiply(1<<-o,0),i=fe.numToString()+V("0.00000000000000000000",2,2+e);return e>0?(l=i.length)<=e?r+V("0.0000000000000000000",0,e-l+2)+i:r+V(i,0,l-e)+"."+V(i,l-e):r+i}},ce);var de,he,pe=function(){try{return"1"===1..toPrecision(void 0)}catch(Oe){return!0}}(),ge=f.toPrecision;N(f,{toPrecision:function(t){return void 0===t?ge.call(this):ge.call(this,t)}},pe),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(de=void 0===/()??/.exec("")[1],he=Math.pow(2,32)-1,l.split=function(e,n){var r=String(this);if(void 0===e&&0===n)return[];if(!t(e))return q(this,e,n);var i,o,a,u,s=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,f=new RegExp(e.source,l+"g");de||(i=new RegExp("^"+f.source+"$(?!\\s)",l));var d=void 0===n?he:R(n);for(o=f.exec(r);o&&!((a=o.index+o[0].length)>c&&(X(s,V(r,c,o.index)),!de&&o.length>1&&o[0].replace(i,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(o[t]=void 0)}),o.length>1&&o.index<r.length&&p.apply(s,B(o,1)),u=o[0].length,c=a,s.length>=d));)f.lastIndex===o.index&&f.lastIndex++,o=f.exec(r);return c===r.length?!u&&f.test("")||X(s,""):X(s,V(r,c)),s.length>d?B(s,0,d):s}):"0".split(void 0,0).length&&(l.split=function(t,e){return void 0===t&&0===e?[]:q(this,t,e)});var ve,me=l.replace;ve=[],"x".replace(/x(.)?/g,function(t,e){X(ve,e)}),1===ve.length&&void 0===ve[0]||(l.replace=function(e,n){var r=A(n),i=t(e)&&/\)[*?]/.test(e.source);return me.call(this,e,r&&i?function(t){var r=arguments.length,i=e.lastIndex;e.lastIndex=0;var o=e.exec(t)||[];return e.lastIndex=i,X(o,arguments[r-2],arguments[r-1]),n.apply(this,o)}:n)});var ye=l.substr,be="".substr&&"b"!=="0b".substr(-1);N(l,{substr:function(t,e){var n=t;return t<0&&(n=x(this.length+t,0)),ye.call(this,n,e)}},be);var xe="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",we="["+xe+"]",ke=new RegExp("^"+we+we+"*"),_e=new RegExp(we+we+"*$"),Me=l.trim&&(xe.trim()||!"\u200b".trim());N(l,{trim:function(){if(null==this)throw new TypeError("can't convert "+this+" to object");return s(this).replace(ke,"").replace(_e,"")}},Me);var Se=y.bind(String.prototype.trim),Ce=l.lastIndexOf&&-1!=="abc\u3042\u3044".lastIndexOf("\u3042\u3044",2);N(l,{lastIndexOf:function(t){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var e=s(this),n=s(t),r=arguments.length>1?c(arguments[1]):NaN,i=P(r)?1/0:W(r),o=w(x(i,0),e.length),a=n.length,u=o+a;u>0;){u=x(0,u-a);var l=$(V(e,u,o+a),n);if(-1!==l)return u+l}return-1}},Ce);var Ae,De,Te,Le=l.lastIndexOf;if(N(l,{lastIndexOf:function(t){return Le.apply(this,arguments)}},1!==l.lastIndexOf.length),8===parseInt(xe+"08")&&22===parseInt(xe+"0x16")||(parseInt=(Ae=parseInt,De=/^[-+]?0[xX]/,function(t,e){var n=Se(String(t)),r=c(e)||(De.test(n)?16:10);return Ae(n,r)})),1/parseFloat("-0")!=-1/0&&(parseFloat=(Te=parseFloat,function(t){var e=Se(String(t)),n=Te(e);return 0===n&&"-"===V(e,0,1)?-0:n})),"RangeError: test"!==String(new RangeError("test"))&&(Error.prototype.toString=function(){if(null==this)throw new TypeError("can't convert "+this+" to object");var t=this.name;void 0===t?t="Error":"string"!=typeof t&&(t=s(t));var e=this.message;return void 0===e?e="":"string"!=typeof e&&(e=s(e)),t?e?t+": "+e:t:e}),O){var Ee=function(t,e){if(Z(t,e)){var n=Object.getOwnPropertyDescriptor(t,e);n.configurable&&(n.enumerable=!1,Object.defineProperty(t,e,n))}};Ee(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),Ee(Error.prototype,"name")}"/a/gim"!==String(/a/gim)&&(RegExp.prototype.toString=function(){var t="/"+this.source+"/";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),t})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.CodeMirror=e()}(this,function(){"use strict";var t=navigator.userAgent,e=navigator.platform,n=/gecko\/\d/i.test(t),r=/MSIE \d/.test(t),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),a=r||i||o,u=a&&(r?document.documentMode||6:+(o||i)[1]),s=!o&&/WebKit\//.test(t),l=s&&/Qt\/\d+\.\d+/.test(t),c=!o&&/Chrome\//.test(t),f=/Opera\//.test(t),d=/Apple Computer/.test(navigator.vendor),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),p=/PhantomJS/.test(t),g=!o&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t),v=/Android/.test(t),m=g||v||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),y=g||/Mac/.test(e),b=/\bCrOS\b/.test(t),x=/win/i.test(e),w=f&&t.match(/Version\/(\d*\.\d*)/);w&&(w=Number(w[1])),w&&w>=15&&(f=!1,s=!0);var k=y&&(l||f&&(null==w||w<12.11)),_=n||a&&u>=9;function M(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var S,C=function(t,e){var n=t.className,r=M(e).exec(n);if(r){var i=n.slice(r.index+r[0].length);t.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function A(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function D(t,e){return A(t).appendChild(e)}function T(t,e,n,r){var i=document.createElement(t);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof e)i.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)i.appendChild(e[o]);return i}function L(t,e,n,r){var i=T(t,e,n,r);return i.setAttribute("role","presentation"),i}function E(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function O(){var t;try{t=document.activeElement}catch(xe){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function N(t,e){var n=t.className;M(e).test(n)||(t.className+=(n?" ":"")+e)}function F(t,e){for(var n=t.split(" "),r=0;r<n.length;r++)n[r]&&!M(n[r]).test(e)&&(e+=" "+n[r]);return e}S=document.createRange?function(t,e,n,r){var i=document.createRange();return i.setEnd(r||t,n),i.setStart(t,e),i}:function(t,e,n){var r=document.body.createTextRange();try{r.moveToElementText(t.parentNode)}catch(xe){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",e),r};var P=function(t){t.select()};function W(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function z(t,e,n){for(var r in e||(e={}),t)!t.hasOwnProperty(r)||!1===n&&e.hasOwnProperty(r)||(e[r]=t[r]);return e}function R(t,e,n,r,i){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=r||0,a=i||0;;){var u=t.indexOf("\t",o);if(u<0||u>=e)return a+(e-o);a+=u-o,a+=n-a%n,o=u+1}}g?P=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:a&&(P=function(t){try{t.select()}catch(e){}});var I=function(){this.id=null};function H(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}I.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var Y=30,B={toString:function(){return"CodeMirror.Pass"}},j={scroll:!1},U={origin:"*mouse"},G={origin:"+move"};function V(t,e,n){for(var r=0,i=0;;){var o=t.indexOf("\t",r);-1==o&&(o=t.length);var a=o-r;if(o==t.length||i+a>=e)return r+Math.min(a,e-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=e)return r}}var q=[""];function $(t){for(;q.length<=t;)q.push(X(q)+" ");return q[t]}function X(t){return t[t.length-1]}function Z(t,e){for(var n=[],r=0;r<t.length;r++)n[r]=e(t[r],r);return n}function K(){}function Q(t,e){var n;return Object.create?n=Object.create(t):(K.prototype=t,n=new K),e&&z(e,n),n}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function tt(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||J.test(t))}function et(t,e){return e?!!(e.source.indexOf("\\w")>-1&&tt(t))||e.test(t):tt(t)}function nt(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var rt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function it(t){return t.charCodeAt(0)>=768&&rt.test(t)}function ot(t,e,n){for(;(n<0?e>0:e<t.length)&&it(t.charAt(e));)e+=n;return e}function at(t,e,n){for(var r=e>n?-1:1;;){if(e==n)return e;var i=(e+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==e)return t(o)?e:n;t(o)?n=o:e=o+r}}function ut(t,e,r){var i=this;this.input=r,i.scrollbarFiller=T("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=T("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=L("div",null,"CodeMirror-code"),i.selectionDiv=T("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=T("div",null,"CodeMirror-cursors"),i.measure=T("div",null,"CodeMirror-measure"),i.lineMeasure=T("div",null,"CodeMirror-measure"),i.lineSpace=L("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var o=L("div",[i.lineSpace],"CodeMirror-lines");i.mover=T("div",[o],null,"position: relative"),i.sizer=T("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=T("div",null,null,"position: absolute; height: "+Y+"px; width: 1px;"),i.gutters=T("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=T("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=T("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),a&&u<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),s||n&&m||(i.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(i.wrapper):t(i.wrapper)),i.viewFrom=i.viewTo=e.first,i.reportedViewFrom=i.reportedViewTo=e.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,r.init(i)}function st(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(e<o){n=i;break}e-=o}return n.lines[e]}function lt(t,e,n){var r=[],i=e.line;return t.iter(e.line,n.line+1,function(t){var o=t.text;i==n.line&&(o=o.slice(0,n.ch)),i==e.line&&(o=o.slice(e.ch)),r.push(o),++i}),r}function ct(t,e,n){var r=[];return t.iter(e,n,function(t){r.push(t.text)}),r}function ft(t,e){var n=e-t.height;if(n)for(var r=t;r;r=r.parent)r.height+=n}function dt(t){if(null==t.parent)return null;for(var e=t.parent,n=H(e.lines,t),r=e.parent;r;e=r,r=r.parent)for(var i=0;r.children[i]!=e;++i)n+=r.children[i].chunkSize();return n+e.first}function ht(t,e){var n=t.first;t:do{for(var r=0;r<t.children.length;++r){var i=t.children[r],o=i.height;if(e<o){t=i;continue t}e-=o,n+=i.chunkSize()}return n}while(!t.lines);for(var a=0;a<t.lines.length;++a){var u=t.lines[a].height;if(e<u)break;e-=u}return n+a}function pt(t,e){return e>=t.first&&e<t.first+t.size}function gt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function vt(t,e,n){if(void 0===n&&(n=null),!(this instanceof vt))return new vt(t,e,n);this.line=t,this.ch=e,this.sticky=n}function mt(t,e){return t.line-e.line||t.ch-e.ch}function yt(t,e){return t.sticky==e.sticky&&0==mt(t,e)}function bt(t){return vt(t.line,t.ch)}function xt(t,e){return mt(t,e)<0?e:t}function wt(t,e){return mt(t,e)<0?t:e}function kt(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function _t(t,e){if(e.line<t.first)return vt(t.first,0);var n=t.first+t.size-1;return e.line>n?vt(n,st(t,n).text.length):function(t,e){var n=t.ch;return null==n||n>e?vt(t.line,e):n<0?vt(t.line,0):t}(e,st(t,e.line).text.length)}function Mt(t,e){for(var n=[],r=0;r<e.length;r++)n[r]=_t(t,e[r]);return n}var St=!1,Ct=!1;function At(t,e,n){this.marker=t,this.from=e,this.to=n}function Dt(t,e){if(t)for(var n=0;n<t.length;++n){var r=t[n];if(r.marker==e)return r}}function Tt(t,e){for(var n,r=0;r<t.length;++r)t[r]!=e&&(n||(n=[])).push(t[r]);return n}function Lt(t,e){if(e.full)return null;var n=pt(t,e.from.line)&&st(t,e.from.line).markedSpans,r=pt(t,e.to.line)&&st(t,e.to.line).markedSpans;if(!n&&!r)return null;var i=e.from.ch,o=e.to.ch,a=0==mt(e.from,e.to),u=function(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var o=t[i],a=o.marker;null!=o.from&&!(a.inclusiveLeft?o.from<=e:o.from<e)&&(o.from!=e||"bookmark"!=a.type||n&&o.marker.insertLeft)||(r||(r=[])).push(new At(a,o.from,null==o.to||(a.inclusiveRight?o.to>=e:o.to>e)?null:o.to))}return r}(n,i,a),s=function(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var o=t[i],a=o.marker;(null==o.to||(a.inclusiveRight?o.to>=e:o.to>e)||o.from==e&&"bookmark"==a.type&&(!n||o.marker.insertLeft))&&(r||(r=[])).push(new At(a,null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e)?null:o.from-e,null==o.to?null:o.to-e))}return r}(r,o,a),l=1==e.text.length,c=X(e.text).length+(l?i:0);if(u)for(var f=0;f<u.length;++f){var d=u[f];if(null==d.to){var h=Dt(s,d.marker);h?l&&(d.to=null==h.to?null:h.to+c):d.to=i}}if(s)for(var p=0;p<s.length;++p){var g=s[p];null!=g.to&&(g.to+=c),null==g.from?Dt(u,g.marker)||(g.from=c,l&&(u||(u=[])).push(g)):(g.from+=c,l&&(u||(u=[])).push(g))}u&&(u=Et(u)),s&&s!=u&&(s=Et(s));var v=[u];if(!l){var m,y=e.text.length-2;if(y>0&&u)for(var b=0;b<u.length;++b)null==u[b].to&&(m||(m=[])).push(new At(u[b].marker,null,null));for(var x=0;x<y;++x)v.push(m);v.push(s)}return v}function Et(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Ot(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Nt(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Ft(t){return t.inclusiveLeft?-1:0}function Pt(t){return t.inclusiveRight?1:0}function Wt(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var r=t.find(),i=e.find(),o=mt(r.from,i.from)||Ft(t)-Ft(e);return o?-o:mt(r.to,i.to)||Pt(t)-Pt(e)||e.id-t.id}function zt(t,e){var n,r=Ct&&t.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(e?i.from:i.to)&&(!n||Wt(n,i.marker)<0)&&(n=i.marker);return n}function Rt(t){return zt(t,!0)}function It(t){return zt(t,!1)}function Ht(t,e){var n,r=Ct&&t.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<e)&&(null==o.to||o.to>e)&&(!n||Wt(n,o.marker)<0)&&(n=o.marker)}return n}function Yt(t,e,n,r,i){var o=st(t,e),a=Ct&&o.markedSpans;if(a)for(var u=0;u<a.length;++u){var s=a[u];if(s.marker.collapsed){var l=s.marker.find(0),c=mt(l.from,n)||Ft(s.marker)-Ft(i),f=mt(l.to,r)||Pt(s.marker)-Pt(i);if(!(c>=0&&f<=0||c<=0&&f>=0)&&(c<=0&&(s.marker.inclusiveRight&&i.inclusiveLeft?mt(l.to,n)>=0:mt(l.to,n)>0)||c>=0&&(s.marker.inclusiveRight&&i.inclusiveLeft?mt(l.from,r)<=0:mt(l.from,r)<0)))return!0}}}function Bt(t){for(var e;e=Rt(t);)t=e.find(-1,!0).line;return t}function jt(t,e){var n=st(t,e),r=Bt(n);return n==r?e:dt(r)}function Ut(t,e){if(e>t.lastLine())return e;var n,r=st(t,e);if(!Gt(t,r))return e;for(;n=It(r);)r=n.find(1,!0).line;return dt(r)+1}function Gt(t,e){var n=Ct&&e.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Vt(t,e,r))return!0}}function Vt(t,e,n){if(null==n.to){var r=n.marker.find(1,!0);return Vt(t,r.line,Dt(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var i=void 0,o=0;o<e.markedSpans.length;++o)if((i=e.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Vt(t,e,i))return!0}function qt(t){for(var e=0,n=(t=Bt(t)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==t)break;e+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var u=o.children[a];if(u==n)break;e+=u.height}return e}function $t(t){if(0==t.height)return 0;for(var e,n=t.text.length,r=t;e=Rt(r);){var i=e.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=t;e=It(r);){var o=e.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function Xt(t){var e=t.display,n=t.doc;e.maxLine=st(n,n.first),e.maxLineLength=$t(e.maxLine),e.maxLineChanged=!0,n.iter(function(t){var n=$t(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)})}var Zt=null;function Kt(t,e,n){var r;Zt=null;for(var i=0;i<t.length;++i){var o=t[i];if(o.from<e&&o.to>e)return i;o.to==e&&(o.from!=o.to&&"before"==n?r=i:Zt=i),o.from==e&&(o.from!=o.to&&"before"!=n?r=i:Zt=i)}return null!=r?r:Zt}var Qt=function(){var t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,n=/[LRr]/,r=/[Lb1n]/,i=/[1n]/;function o(t,e,n){this.level=t,this.from=e,this.to=n}return function(a,u){var s="ltr"==u?"L":"R";if(0==a.length||"ltr"==u&&!t.test(a))return!1;for(var l,c=a.length,f=[],d=0;d<c;++d)f.push((l=a.charCodeAt(d))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(l):1424<=l&&l<=1524?"R":1536<=l&&l<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(l-1536):1774<=l&&l<=2220?"r":8192<=l&&l<=8203?"w":8204==l?"b":"L");for(var h=0,p=s;h<c;++h){var g=f[h];"m"==g?f[h]=p:p=g}for(var v=0,m=s;v<c;++v){var y=f[v];"1"==y&&"r"==m?f[v]="n":n.test(y)&&(m=y,"r"==y&&(f[v]="R"))}for(var b=1,x=f[0];b<c-1;++b){var w=f[b];"+"==w&&"1"==x&&"1"==f[b+1]?f[b]="1":","!=w||x!=f[b+1]||"1"!=x&&"n"!=x||(f[b]=x),x=w}for(var k=0;k<c;++k){var _=f[k];if(","==_)f[k]="N";else if("%"==_){var M=void 0;for(M=k+1;M<c&&"%"==f[M];++M);for(var S=k&&"!"==f[k-1]||M<c&&"1"==f[M]?"1":"N",C=k;C<M;++C)f[C]=S;k=M-1}}for(var A=0,D=s;A<c;++A){var T=f[A];"L"==D&&"1"==T?f[A]="L":n.test(T)&&(D=T)}for(var L=0;L<c;++L)if(e.test(f[L])){var E=void 0;for(E=L+1;E<c&&e.test(f[E]);++E);for(var O="L"==(L?f[L-1]:s),N=O==("L"==(E<c?f[E]:s))?O?"L":"R":s,F=L;F<E;++F)f[F]=N;L=E-1}for(var P,W=[],z=0;z<c;)if(r.test(f[z])){var R=z;for(++z;z<c&&r.test(f[z]);++z);W.push(new o(0,R,z))}else{var I=z,H=W.length;for(++z;z<c&&"L"!=f[z];++z);for(var Y=I;Y<z;)if(i.test(f[Y])){I<Y&&W.splice(H,0,new o(1,I,Y));var B=Y;for(++Y;Y<z&&i.test(f[Y]);++Y);W.splice(H,0,new o(2,B,Y)),I=Y}else++Y;I<z&&W.splice(H,0,new o(1,I,z))}return"ltr"==u&&(1==W[0].level&&(P=a.match(/^\s+/))&&(W[0].from=P[0].length,W.unshift(new o(0,0,P[0].length))),1==X(W).level&&(P=a.match(/\s+$/))&&(X(W).to-=P[0].length,W.push(new o(0,c-P[0].length,c)))),"rtl"==u?W.reverse():W}}();function Jt(t,e){var n=t.order;return null==n&&(n=t.order=Qt(t.text,e)),n}var te=[],ee=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var r=t._handlers||(t._handlers={});r[e]=(r[e]||te).concat(n)}};function ne(t,e){return t._handlers&&t._handlers[e]||te}function re(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var r=t._handlers,i=r&&r[e];if(i){var o=H(i,n);o>-1&&(r[e]=i.slice(0,o).concat(i.slice(o+1)))}}}function ie(t,e){var n=ne(t,e);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function oe(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),ie(t,n||e.type,t,e),fe(e)||e.codemirrorIgnore}function ae(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),r=0;r<e.length;++r)-1==H(n,e[r])&&n.push(e[r])}function ue(t,e){return ne(t,e).length>0}function se(t){t.prototype.on=function(t,e){ee(this,t,e)},t.prototype.off=function(t,e){re(this,t,e)}}function le(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function ce(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function fe(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function de(t){le(t),ce(t)}function he(t){return t.target||t.srcElement}function pe(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),y&&t.ctrlKey&&1==e&&(e=3),e}var ge,ve,me=function(){if(a&&u<9)return!1;var t=T("div");return"draggable"in t||"dragDrop"in t}();function ye(t){if(null==ge){var e=T("span","\u200b");D(t,T("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(ge=e.offsetWidth<=1&&e.offsetHeight>2&&!(a&&u<8))}var n=ge?T("span","\u200b"):T("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function be(t){if(null!=ve)return ve;var e=D(t,document.createTextNode("A\u062eA")),n=S(e,0,1).getBoundingClientRect(),r=S(e,1,2).getBoundingClientRect();return A(t),!(!n||n.left==n.right)&&(ve=r.right-n.right<3)}var xe,we=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],r=t.length;e<=r;){var i=t.indexOf("\n",e);-1==i&&(i=t.length);var o=t.slice(e,"\r"==t.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),e+=a+1):(n.push(o),e=i+1)}return n}:function(t){return t.split(/\r\n?|\n/)},ke=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(xe){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(xe){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},_e="oncopy"in(xe=T("div"))||(xe.setAttribute("oncopy","return;"),"function"==typeof xe.oncopy),Me=null,Se={},Ce={};function Ae(t){if("string"==typeof t&&Ce.hasOwnProperty(t))t=Ce[t];else if(t&&"string"==typeof t.name&&Ce.hasOwnProperty(t.name)){var e=Ce[t.name];"string"==typeof e&&(e={name:e}),(t=Q(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Ae("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Ae("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function De(t,e){e=Ae(e);var n=Se[e.name];if(!n)return De(t,"text/plain");var r=n(t,e);if(Te.hasOwnProperty(e.name)){var i=Te[e.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=e.name,e.helperType&&(r.helperType=e.helperType),e.modeProps)for(var a in e.modeProps)r[a]=e.modeProps[a];return r}var Te={};function Le(t,e){z(e,Te.hasOwnProperty(t)?Te[t]:Te[t]={})}function Ee(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var r in e){var i=e[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Oe(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function Ne(t,e,n){return!t.startState||t.startState(e,n)}var Fe=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};Fe.prototype.eol=function(){return this.pos>=this.string.length},Fe.prototype.sol=function(){return this.pos==this.lineStart},Fe.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Fe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Fe.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},Fe.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Fe.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Fe.prototype.skipToEnd=function(){this.pos=this.string.length},Fe.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},Fe.prototype.backUp=function(t){this.pos-=t},Fe.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=R(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},Fe.prototype.indentation=function(){return R(this.string,null,this.tabSize)-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},Fe.prototype.match=function(t,e,n){if("string"!=typeof t){var r=this.string.slice(this.pos).match(t);return r&&r.index>0?null:(r&&!1!==e&&(this.pos+=r[0].length),r)}var i=function(t){return n?t.toLowerCase():t};if(i(this.string.substr(this.pos,t.length))==i(t))return!1!==e&&(this.pos+=t.length),!0},Fe.prototype.current=function(){return this.string.slice(this.start,this.pos)},Fe.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Fe.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Fe.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var Pe=function(t,e){this.state=t,this.lookAhead=e},We=function(t,e,n,r){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function ze(t,e,n,r){var i=[t.state.modeGen],o={};Ve(t,e.text,t.doc.mode,n,function(t,e){return i.push(t,e)},o,r);for(var a=n.state,u=function(r){n.baseTokens=i;var u=t.state.overlays[r],s=1,l=0;n.state=!0,Ve(t,e.text,u.mode,n,function(t,e){for(var n=s;l<t;){var r=i[s];r>t&&i.splice(s,1,t,i[s+1],r),s+=2,l=Math.min(t,r)}if(e)if(u.opaque)i.splice(n,s-n,t,"overlay "+e),s=n+2;else for(;n<s;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+e}},o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},s=0;s<t.state.overlays.length;++s)u(s);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function Re(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var r=Ie(t,dt(e)),i=e.text.length>t.options.maxHighlightLength&&Ee(t.doc.mode,r.state),o=ze(t,e,r);i&&(r.state=i),e.stateAfter=r.save(!i),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function Ie(t,e,n){var r=t.doc,i=t.display;if(!r.mode.startState)return new We(r,!0,e);var o=function(t,e,n){for(var r,i,o=t.doc,a=n?-1:e-(t.doc.mode.innerMode?1e3:100),u=e;u>a;--u){if(u<=o.first)return o.first;var s=st(o,u-1),l=s.stateAfter;if(l&&(!n||u+(l instanceof Pe?l.lookAhead:0)<=o.modeFrontier))return u;var c=R(s.text,null,t.options.tabSize);(null==i||r>c)&&(i=u-1,r=c)}return i}(t,e,n),a=o>r.first&&st(r,o-1).stateAfter,u=a?We.fromSaved(r,a,o):new We(r,Ne(r.mode),o);return r.iter(o,e,function(n){He(t,n.text,u);var r=u.line;n.stateAfter=r==e-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?u.save():null,u.nextLine()}),n&&(r.modeFrontier=u.line),u}function He(t,e,n,r){var i=t.doc.mode,o=new Fe(e,t.options.tabSize,n);for(o.start=o.pos=r||0,""==e&&Ye(i,n.state);!o.eol();)Be(i,o,n.state),o.start=o.pos}function Ye(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Oe(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Be(t,e,n,r){for(var i=0;i<10;i++){r&&(r[0]=Oe(t,n).mode);var o=t.token(e,n);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}We.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},We.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},We.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},We.fromSaved=function(t,e,n){return e instanceof Pe?new We(t,Ee(t.mode,e.state),n,e.lookAhead):new We(t,Ee(t.mode,e),n)},We.prototype.save=function(t){var e=!1!==t?Ee(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Pe(e,this.maxLookAhead):e};var je=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n};function Ue(t,e,n,r){var i,o,a=t.doc,u=a.mode,s=st(a,(e=_t(a,e)).line),l=Ie(t,e.line,n),c=new Fe(s.text,t.options.tabSize,l);for(r&&(o=[]);(r||c.pos<e.ch)&&!c.eol();)c.start=c.pos,i=Be(u,c,l.state),r&&o.push(new je(c,i,Ee(a.mode,l.state)));return r?o:new je(c,i,l.state)}function Ge(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==e[r]?e[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[r])||(e[r]+=" "+n[2])}return t}function Ve(t,e,n,r,i,o,a){var u=n.flattenSpans;null==u&&(u=t.options.flattenSpans);var s,l=0,c=null,f=new Fe(e,t.options.tabSize,r),d=t.options.addModeClass&&[null];for(""==e&&Ge(Ye(n,r.state),o);!f.eol();){if(f.pos>t.options.maxHighlightLength?(u=!1,a&&He(t,e,r,f.pos),f.pos=e.length,s=null):s=Ge(Be(n,f,r.state,d),o),d){var h=d[0].name;h&&(s="m-"+(s?h+" "+s:h))}if(!u||c!=s){for(;l<f.start;)i(l=Math.min(f.start,l+5e3),c);c=s}f.start=f.pos}for(;l<f.pos;){var p=Math.min(f.pos,l+5e3);i(p,c),l=p}}var qe=function(t,e,n){this.text=t,Nt(this,e),this.height=n?n(this):1};function $e(t){t.parent=null,Ot(t)}qe.prototype.lineNo=function(){return dt(this)},se(qe);var Xe={},Ze={};function Ke(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?Ze:Xe;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function Qe(t,e){var n=L("span",null,null,s?"padding-right: .1px":null),r={pre:L("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var i=0;i<=(e.rest?e.rest.length:0);i++){var o=i?e.rest[i-1]:e.line,a=void 0;r.pos=0,r.addToken=tn,be(t.display.measure)&&(a=Jt(o,t.doc.direction))&&(r.addToken=en(r.addToken,a)),r.map=[],rn(o,r,Re(t,o,e!=t.display.externalMeasured&&dt(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=F(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=F(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(ye(t.display.measure))),0==i?(e.measure.map=r.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(r.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(s){var u=r.content.lastChild;(/\bcm-tab\b/.test(u.className)||u.querySelector&&u.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return ie(t,"renderLine",t,e.line,r.pre),r.pre.className&&(r.textClass=F(r.pre.className,r.textClass||"")),r}function Je(t){var e=T("span","\u2022","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function tn(t,e,n,r,i,o,s){if(e){var l,c=t.splitSpaces?function(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,r="",i=0;i<t.length;i++){var o=t.charAt(i);" "!=o||!n||i!=t.length-1&&32!=t.charCodeAt(i+1)||(o="\xa0"),r+=o,n=" "==o}return r}(e,t.trailingSpace):e,f=t.cm.state.specialChars,d=!1;if(f.test(e)){l=document.createDocumentFragment();for(var h=0;;){f.lastIndex=h;var p=f.exec(e),g=p?p.index-h:e.length-h;if(g){var v=document.createTextNode(c.slice(h,h+g));l.appendChild(a&&u<9?T("span",[v]):v),t.map.push(t.pos,t.pos+g,v),t.col+=g,t.pos+=g}if(!p)break;h+=g+1;var m=void 0;if("\t"==p[0]){var y=t.cm.options.tabSize,b=y-t.col%y;(m=l.appendChild(T("span",$(b),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),t.col+=b}else"\r"==p[0]||"\n"==p[0]?((m=l.appendChild(T("span","\r"==p[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",p[0]),t.col+=1):((m=t.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),l.appendChild(a&&u<9?T("span",[m]):m),t.col+=1);t.map.push(t.pos,t.pos+1,m),t.pos++}}else t.col+=e.length,l=document.createTextNode(c),t.map.push(t.pos,t.pos+e.length,l),a&&u<9&&(d=!0),t.pos+=e.length;if(t.trailingSpace=32==c.charCodeAt(e.length-1),n||r||i||d||o){var x=n||"";r&&(x+=r),i&&(x+=i);var w=T("span",[l],x,o);if(s)for(var k in s)s.hasOwnProperty(k)&&"style"!=k&&"class"!=k&&w.setAttribute(k,s[k]);return t.content.appendChild(w)}t.content.appendChild(l)}}function en(t,e){return function(n,r,i,o,a,u,s){i=i?i+" cm-force-border":"cm-force-border";for(var l=n.pos,c=l+r.length;;){for(var f=void 0,d=0;d<e.length&&!((f=e[d]).to>l&&f.from<=l);d++);if(f.to>=c)return t(n,r,i,o,a,u,s);t(n,r.slice(0,f.to-l),i,o,null,u,s),o=null,r=r.slice(f.to-l),l=f.to}}}function nn(t,e,n,r){var i=!r&&n.widgetNode;i&&t.map.push(t.pos,t.pos+e,i),!r&&t.cm.display.input.needsContentAttribute&&(i||(i=t.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(t.cm.display.input.setUneditable(i),t.content.appendChild(i)),t.pos+=e,t.trailingSpace=!1}function rn(t,e,n){var r=t.markedSpans,i=t.text,o=0;if(r)for(var a,u,s,l,c,f,d,h=i.length,p=0,g=1,v="",m=0;;){if(m==p){s=l=c=u="",d=null,f=null,m=1/0;for(var y=[],b=void 0,x=0;x<r.length;++x){var w=r[x],k=w.marker;if("bookmark"==k.type&&w.from==p&&k.widgetNode)y.push(k);else if(w.from<=p&&(null==w.to||w.to>p||k.collapsed&&w.to==p&&w.from==p)){if(null!=w.to&&w.to!=p&&m>w.to&&(m=w.to,l=""),k.className&&(s+=" "+k.className),k.css&&(u=(u?u+";":"")+k.css),k.startStyle&&w.from==p&&(c+=" "+k.startStyle),k.endStyle&&w.to==m&&(b||(b=[])).push(k.endStyle,w.to),k.title&&((d||(d={})).title=k.title),k.attributes)for(var _ in k.attributes)(d||(d={}))[_]=k.attributes[_];k.collapsed&&(!f||Wt(f.marker,k)<0)&&(f=w)}else w.from>p&&m>w.from&&(m=w.from)}if(b)for(var M=0;M<b.length;M+=2)b[M+1]==m&&(l+=" "+b[M]);if(!f||f.from==p)for(var S=0;S<y.length;++S)nn(e,0,y[S]);if(f&&(f.from||0)==p){if(nn(e,(null==f.to?h+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(p>=h)break;for(var C=Math.min(h,m);;){if(v){var A=p+v.length;if(!f){var D=A>C?v.slice(0,C-p):v;e.addToken(e,D,a?a+s:s,c,p+D.length==m?l:"",u,d)}if(A>=C){v=v.slice(C-p),p=C;break}p=A,c=""}v=i.slice(o,o=n[g++]),a=Ke(n[g++],e.cm.options)}}else for(var T=1;T<n.length;T+=2)e.addToken(e,i.slice(o,o=n[T]),Ke(n[T+1],e.cm.options))}function on(t,e,n){this.line=e,this.rest=function(t){for(var e,n;e=It(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}(e),this.size=this.rest?dt(X(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Gt(t,e)}function an(t,e,n){for(var r,i=[],o=e;o<n;o=r){var a=new on(t.doc,st(t.doc,o),o);r=o+a.size,i.push(a)}return i}var un=null,sn=null;function ln(t,e){var n=ne(t,e);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);un?r=un.delayedCallbacks:sn?r=sn:(r=sn=[],setTimeout(cn,0));for(var o=function(t){r.push(function(){return n[t].apply(null,i)})},a=0;a<n.length;++a)o(a)}}function cn(){var t=sn;sn=null;for(var e=0;e<t.length;++e)t[e]()}function fn(t,e,n,r){for(var i=0;i<e.changes.length;i++){var o=e.changes[i];"text"==o?pn(t,e):"gutter"==o?vn(t,e,n,r):"class"==o?gn(t,e):"widget"==o&&mn(t,e,r)}e.changes=null}function dn(t){return t.node==t.text&&(t.node=T("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),a&&u<8&&(t.node.style.zIndex=2)),t.node}function hn(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):Qe(t,e)}function pn(t,e){var n=e.text.className,r=hn(t,e);e.text==e.node&&(e.node=r.pre),e.text.parentNode.replaceChild(r.pre,e.text),e.text=r.pre,r.bgClass!=e.bgClass||r.textClass!=e.textClass?(e.bgClass=r.bgClass,e.textClass=r.textClass,gn(t,e)):n&&(e.text.className=n)}function gn(t,e){!function(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var r=dn(e);e.background=r.insertBefore(T("div",null,n),r.firstChild),t.display.input.setUneditable(e.background)}}(t,e),e.line.wrapClass?dn(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className=""),e.text.className=(e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass)||""}function vn(t,e,n,r){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var i=dn(e);e.gutterBackground=T("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),i.insertBefore(e.gutterBackground,e.text)}var o=e.line.gutterMarkers;if(t.options.lineNumbers||o){var a=dn(e),u=e.gutter=T("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(t.display.input.setUneditable(u),a.insertBefore(u,e.text),e.line.gutterClass&&(u.className+=" "+e.line.gutterClass),!t.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(e.lineNumber=u.appendChild(T("div",gt(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),o)for(var s=0;s<t.options.gutters.length;++s){var l=t.options.gutters[s],c=o.hasOwnProperty(l)&&o[l];c&&u.appendChild(T("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[l]+"px; width: "+r.gutterWidth[l]+"px"))}}}function mn(t,e,n){e.alignable&&(e.alignable=null);for(var r=e.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&e.node.removeChild(r);bn(t,e,n)}function yn(t,e,n,r){var i=hn(t,e);return e.text=e.node=i.pre,i.bgClass&&(e.bgClass=i.bgClass),i.textClass&&(e.textClass=i.textClass),gn(t,e),vn(t,e,n,r),bn(t,e,r),e.node}function bn(t,e,n){if(xn(t,e.line,e,n,!0),e.rest)for(var r=0;r<e.rest.length;r++)xn(t,e.rest[r],e,n,!1)}function xn(t,e,n,r,i){if(e.widgets)for(var o=dn(n),a=0,u=e.widgets;a<u.length;++a){var s=u[a],l=T("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||l.setAttribute("cm-ignore-events","true"),wn(s,l,n,r),t.display.input.setUneditable(l),i&&s.above?o.insertBefore(l,n.gutter||n.text):o.appendChild(l),ln(s,"redraw")}}function wn(t,e,n,r){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var i=r.wrapperWidth;e.style.left=r.fixedPos+"px",t.coverGutter||(i-=r.gutterTotalWidth,e.style.paddingLeft=r.gutterTotalWidth+"px"),e.style.width=i+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-r.gutterTotalWidth+"px"))}function kn(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!E(document.body,t.node)){var n="position: relative;";t.coverGutter&&(n+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(n+="width: "+e.display.wrapper.clientWidth+"px;"),D(e.display.measure,T("div",[t.node],null,n))}return t.height=t.node.parentNode.offsetHeight}function _n(t,e){for(var n=he(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function Mn(t){return t.lineSpace.offsetTop}function Sn(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Cn(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=D(t.measure,T("pre","x")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(t.cachedPaddingH=r),r}function An(t){return Y-t.display.nativeBarWidth}function Dn(t){return t.display.scroller.clientWidth-An(t)-t.display.barWidth}function Tn(t){return t.display.scroller.clientHeight-An(t)-t.display.barHeight}function Ln(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var r=0;r<t.rest.length;r++)if(t.rest[r]==e)return{map:t.measure.maps[r],cache:t.measure.caches[r]};for(var i=0;i<t.rest.length;i++)if(dt(t.rest[i])>n)return{map:t.measure.maps[i],cache:t.measure.caches[i],before:!0}}function En(t,e,n,r){return Fn(t,Nn(t,e),n,r)}function On(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[lr(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function Nn(t,e){var n=dt(e),r=On(t,n);r&&!r.text?r=null:r&&r.changes&&(fn(t,r,n,ir(t)),t.curOp.forceUpdate=!0),r||(r=function(t,e){var n=dt(e=Bt(e)),r=t.display.externalMeasured=new on(t.doc,e,n);r.lineN=n;var i=r.built=Qe(t,r);return r.text=i.pre,D(t.display.lineMeasure,i.pre),r}(t,e));var i=Ln(r,e,n);return{line:e,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Fn(t,e,n,r,i){e.before&&(n=-1);var o,s=n+(r||"");return e.cache.hasOwnProperty(s)?o=e.cache[s]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(function(t,e,n){var r=t.options.lineWrapping,i=r&&Dn(t);if(!e.measure.heights||r&&e.measure.width!=i){var o=e.measure.heights=[];if(r){e.measure.width=i;for(var a=e.text.firstChild.getClientRects(),u=0;u<a.length-1;u++){var s=a[u],l=a[u+1];Math.abs(s.bottom-l.bottom)>2&&o.push((s.bottom+l.top)/2-n.top)}}o.push(n.bottom-n.top)}}(t,e.view,e.rect),e.hasHeights=!0),(o=function(t,e,n,r){var i,o=zn(e.map,n,r),s=o.node,l=o.start,c=o.end,f=o.collapse;if(3==s.nodeType){for(var d=0;d<4;d++){for(;l&&it(e.line.text.charAt(o.coverStart+l));)--l;for(;o.coverStart+c<o.coverEnd&&it(e.line.text.charAt(o.coverStart+c));)++c;if((i=a&&u<9&&0==l&&c==o.coverEnd-o.coverStart?s.parentNode.getBoundingClientRect():Rn(S(s,l,c).getClientRects(),r)).left||i.right||0==l)break;c=l,l-=1,f="right"}a&&u<11&&(i=function(e,n){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Me)return Me;var n=D(t.display.measure,T("span","x")),r=n.getBoundingClientRect(),i=S(n,0,1).getBoundingClientRect();return Me=Math.abs(r.left-i.left)>1}())return n;var r=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:n.left*r,right:n.right*r,top:n.top*i,bottom:n.bottom*i}}(0,i))}else{var h;l>0&&(f=r="right"),i=t.options.lineWrapping&&(h=s.getClientRects()).length>1?h["right"==r?h.length-1:0]:s.getBoundingClientRect()}if(a&&u<9&&!l&&(!i||!i.left&&!i.right)){var p=s.parentNode.getClientRects()[0];i=p?{left:p.left,right:p.left+rr(t.display),top:p.top,bottom:p.bottom}:Wn}for(var g=i.top-e.rect.top,v=i.bottom-e.rect.top,m=(g+v)/2,y=e.view.measure.heights,b=0;b<y.length-1&&!(m<y[b]);b++);var x={left:("right"==f?i.right:i.left)-e.rect.left,right:("left"==f?i.left:i.right)-e.rect.left,top:b?y[b-1]:0,bottom:y[b]};return i.left||i.right||(x.bogus=!0),t.options.singleCursorHeightPerLine||(x.rtop=g,x.rbottom=v),x}(t,e,n,r)).bogus||(e.cache[s]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Pn,Wn={left:0,right:0,top:0,bottom:0};function zn(t,e,n){for(var r,i,o,a,u,s,l=0;l<t.length;l+=3)if(s=t[l+1],e<(u=t[l])?(i=0,o=1,a="left"):e<s?o=1+(i=e-u):(l==t.length-3||e==s&&t[l+3]>e)&&(i=(o=s-u)-1,e>=s&&(a="right")),null!=i){if(r=t[l+2],u==s&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;l&&t[l-2]==t[l-3]&&t[l-1].insertLeft;)r=t[2+(l-=3)],a="left";if("right"==n&&i==s-u)for(;l<t.length-3&&t[l+3]==t[l+4]&&!t[l+5].insertLeft;)r=t[(l+=3)+2],a="right";break}return{node:r,start:i,end:o,collapse:a,coverStart:u,coverEnd:s}}function Rn(t,e){var n=Wn;if("left"==e)for(var r=0;r<t.length&&(n=t[r]).left==n.right;r++);else for(var i=t.length-1;i>=0&&(n=t[i]).left==n.right;i--);return n}function In(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Hn(t){t.display.externalMeasure=null,A(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)In(t.display.view[e])}function Yn(t){Hn(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Bn(){return c&&v?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function jn(){return c&&v?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Un(t){var e=0;if(t.widgets)for(var n=0;n<t.widgets.length;++n)t.widgets[n].above&&(e+=kn(t.widgets[n]));return e}function Gn(t,e,n,r,i){if(!i){var o=Un(e);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=qt(e);if("local"==r?a+=Mn(t.display):a-=t.display.viewOffset,"page"==r||"window"==r){var u=t.display.lineSpace.getBoundingClientRect();a+=u.top+("window"==r?0:jn());var s=u.left+("window"==r?0:Bn());n.left+=s,n.right+=s}return n.top+=a,n.bottom+=a,n}function Vn(t,e,n){if("div"==n)return e;var r=e.left,i=e.top;if("page"==n)r-=Bn(),i-=jn();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=t.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function qn(t,e,n,r,i){return r||(r=st(t.doc,e.line)),Gn(t,r,En(t,r,e.ch,i),n)}function $n(t,e,n,r,i,o){function a(e,a){var u=Fn(t,i,e,a?"right":"left",o);return a?u.left=u.right:u.right=u.left,Gn(t,r,u,n)}r=r||st(t.doc,e.line),i||(i=Nn(t,r));var u=Jt(r,t.doc.direction),s=e.ch,l=e.sticky;if(s>=r.text.length?(s=r.text.length,l="before"):s<=0&&(s=0,l="after"),!u)return a("before"==l?s-1:s,"before"==l);function c(t,e,n){return a(n?t-1:t,1==u[e].level!=n)}var f=Kt(u,s,l),d=Zt,h=c(s,f,"before"==l);return null!=d&&(h.other=c(s,d,"before"!=l)),h}function Xn(t,e){var n=0;e=_t(t.doc,e),t.options.lineWrapping||(n=rr(t.display)*e.ch);var r=st(t.doc,e.line),i=qt(r)+Mn(t.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Zn(t,e,n,r,i){var o=vt(t,e,n);return o.xRel=i,r&&(o.outside=!0),o}function Kn(t,e,n){var r=t.doc;if((n+=t.display.viewOffset)<0)return Zn(r.first,0,null,!0,-1);var i=ht(r,n),o=r.first+r.size-1;if(i>o)return Zn(r.first+r.size-1,st(r,o).text.length,null,!0,1);e<0&&(e=0);for(var a=st(r,i);;){var u=er(t,a,i,e,n),s=Ht(a,u.ch+(u.xRel>0?1:0));if(!s)return u;var l=s.find(1);if(l.line==i)return l;a=st(r,i=l.line)}}function Qn(t,e,n,r){r-=Un(e);var i=e.text.length,o=at(function(e){return Fn(t,n,e-1).bottom<=r},i,0);return{begin:o,end:i=at(function(e){return Fn(t,n,e).top>r},o,i)}}function Jn(t,e,n,r){return n||(n=Nn(t,e)),Qn(t,e,n,Gn(t,e,Fn(t,n,r),"line").top)}function tr(t,e,n,r){return!(t.bottom<=n)&&(t.top>n||(r?t.left:t.right)>e)}function er(t,e,n,r,i){i-=qt(e);var o=Nn(t,e),a=Un(e),u=0,s=e.text.length,l=!0,c=Jt(e,t.doc.direction);if(c){var f=(t.options.lineWrapping?function(t,e,n,r,i,o,a){var u=Qn(t,e,r,a),s=u.begin,l=u.end;/\s/.test(e.text.charAt(l-1))&&l--;for(var c=null,f=null,d=0;d<i.length;d++){var h=i[d];if(!(h.from>=l||h.to<=s)){var p=Fn(t,r,1!=h.level?Math.min(l,h.to)-1:Math.max(s,h.from)).right,g=p<o?o-p+1e9:p-o;(!c||f>g)&&(c=h,f=g)}}return c||(c=i[i.length-1]),c.from<s&&(c={from:s,to:c.to,level:c.level}),c.to>l&&(c={from:c.from,to:l,level:c.level}),c}:function(t,e,n,r,i,o,a){var u=at(function(u){var s=i[u],l=1!=s.level;return tr($n(t,vt(n,l?s.to:s.from,l?"before":"after"),"line",e,r),o,a,!0)},0,i.length-1),s=i[u];if(u>0){var l=1!=s.level,c=$n(t,vt(n,l?s.from:s.to,l?"after":"before"),"line",e,r);tr(c,o,a,!0)&&c.top>a&&(s=i[u-1])}return s})(t,e,n,o,c,r,i);u=(l=1!=f.level)?f.from:f.to-1,s=l?f.to:f.from-1}var d,h,p=null,g=null,v=at(function(e){var n=Fn(t,o,e);return n.top+=a,n.bottom+=a,!!tr(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(p=e,g=n),!0)},u,s),m=!1;if(g){var y=r-g.left<g.right-r,b=y==l;v=p+(b?0:1),h=b?"after":"before",d=y?g.left:g.right}else{l||v!=s&&v!=u||v++,h=0==v?"after":v==e.text.length?"before":Fn(t,o,v-(l?1:0)).bottom+a<=i==l?"after":"before";var x=$n(t,vt(n,v,h),"line",e,o);d=x.left,m=i<x.top||i>=x.bottom}return Zn(n,v=ot(e.text,v,1),h,m,r-d)}function nr(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Pn){Pn=T("pre");for(var e=0;e<49;++e)Pn.appendChild(document.createTextNode("x")),Pn.appendChild(T("br"));Pn.appendChild(document.createTextNode("x"))}D(t.measure,Pn);var n=Pn.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),A(t.measure),n||1}function rr(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=T("span","xxxxxxxxxx"),n=T("pre",[e]);D(t.measure,n);var r=e.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(t.cachedCharWidth=i),i||10}function ir(t){for(var e=t.display,n={},r={},i=e.gutters.clientLeft,o=e.gutters.firstChild,a=0;o;o=o.nextSibling,++a)n[t.options.gutters[a]]=o.offsetLeft+o.clientLeft+i,r[t.options.gutters[a]]=o.clientWidth;return{fixedPos:or(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:e.wrapper.clientWidth}}function or(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function ar(t){var e=nr(t.display),n=t.options.lineWrapping,r=n&&Math.max(5,t.display.scroller.clientWidth/rr(t.display)-3);return function(i){if(Gt(t.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*e:o+e}}function ur(t){var e=t.doc,n=ar(t);e.iter(function(t){var e=n(t);e!=t.height&&ft(t,e)})}function sr(t,e,n,r){var i=t.display;if(!n&&"true"==he(e).getAttribute("cm-not-content"))return null;var o,a,u=i.lineSpace.getBoundingClientRect();try{o=e.clientX-u.left,a=e.clientY-u.top}catch(e){return null}var s,l=Kn(t,o,a);if(r&&1==l.xRel&&(s=st(t.doc,l.line).text).length==l.ch){var c=R(s,s.length,t.options.tabSize)-s.length;l=vt(l.line,Math.max(0,Math.round((o-Cn(t.display).left)/rr(t.display))-c))}return l}function lr(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,r=0;r<n.length;r++)if((e-=n[r].size)<0)return r}function cr(t){t.display.input.showSelection(t.display.input.prepareSelection())}function fr(t,e){void 0===e&&(e=!0);for(var n=t.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(e||a!=n.sel.primIndex){var u=n.sel.ranges[a];if(!(u.from().line>=t.display.viewTo||u.to().line<t.display.viewFrom)){var s=u.empty();(s||t.options.showCursorWhenSelecting)&&dr(t,u.head,i),s||pr(t,u,o)}}return r}function dr(t,e,n){var r=$n(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),i=n.appendChild(T("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*t.options.cursorHeight+"px",r.other){var o=n.appendChild(T("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function hr(t,e){return t.top-e.top||t.left-e.left}function pr(t,e,n){var r=t.display,i=t.doc,o=document.createDocumentFragment(),a=Cn(t.display),u=a.left,s=Math.max(r.sizerWidth,Dn(t)-r.sizer.offsetLeft)-a.right,l="ltr"==i.direction;function c(t,e,n,r){e<0&&(e=0),e=Math.round(e),r=Math.round(r),o.appendChild(T("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?s-t:n)+"px;\n                             height: "+(r-e)+"px"))}function f(e,n,r){var o,a,f=st(i,e),d=f.text.length;function h(n,r){return qn(t,vt(e,n),"div",f,r)}function p(e,n,r){var i=Jn(t,f,null,e),o="ltr"==n==("after"==r)?"left":"right";return h("after"==r?i.begin:i.end-(/\s/.test(f.text.charAt(i.end-1))?2:1),o)[o]}var g=Jt(f,i.direction);return function(t,e,n,r){if(!t)return r(e,n,"ltr",0);for(var i=!1,o=0;o<t.length;++o){var a=t[o];(a.from<n&&a.to>e||e==n&&a.to==e)&&(r(Math.max(a.from,e),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),i=!0)}i||r(e,n,"ltr")}(g,n||0,null==r?d:r,function(t,e,i,f){var v="ltr"==i,m=h(t,v?"left":"right"),y=h(e-1,v?"right":"left"),b=null==n&&0==t,x=null==r&&e==d,w=0==f,k=!g||f==g.length-1;if(y.top-m.top<=3){var _=(l?b:x)&&w?u:(v?m:y).left;c(_,m.top,((l?x:b)&&k?s:(v?y:m).right)-_,m.bottom)}else{var M,S,C,A;v?(M=l&&b&&w?u:m.left,S=l?s:p(t,i,"before"),C=l?u:p(e,i,"after"),A=l&&x&&k?s:y.right):(M=l?p(t,i,"before"):u,S=!l&&b&&w?s:m.right,C=!l&&x&&k?u:y.left,A=l?p(e,i,"after"):s),c(M,m.top,S-M,m.bottom),m.bottom<y.top&&c(u,m.bottom,null,y.top),c(C,y.top,A-C,y.bottom)}(!o||hr(m,o)<0)&&(o=m),hr(y,o)<0&&(o=y),(!a||hr(m,a)<0)&&(a=m),hr(y,a)<0&&(a=y)}),{start:o,end:a}}var d=e.from(),h=e.to();if(d.line==h.line)f(d.line,d.ch,h.ch);else{var p=st(i,d.line),g=st(i,h.line),v=Bt(p)==Bt(g),m=f(d.line,d.ch,v?p.text.length+1:null).end,y=f(h.line,v?0:null,h.ch).start;v&&(m.top<y.top-2?(c(m.right,m.top,null,m.bottom),c(u,y.top,y.left,y.bottom)):c(m.right,m.top,y.left-m.right,m.bottom)),m.bottom<y.top&&c(u,m.bottom,null,y.top)}n.appendChild(o)}function gr(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){return e.cursorDiv.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function vr(t){t.state.focused||(t.display.input.focus(),yr(t))}function mr(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,br(t))},100)}function yr(t,e){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(ie(t,"focus",t,e),t.state.focused=!0,N(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),s&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),gr(t))}function br(t,e){t.state.delayingBlurEvent||(t.state.focused&&(ie(t,"blur",t,e),t.state.focused=!1,C(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function xr(t){for(var e=t.display,n=e.lineDiv.offsetTop,r=0;r<e.view.length;r++){var i=e.view[r],o=t.options.lineWrapping,s=void 0,l=0;if(!i.hidden){if(a&&u<8){var c=i.node.offsetTop+i.node.offsetHeight;s=c-n,n=c}else{var f=i.node.getBoundingClientRect();s=f.bottom-f.top,!o&&i.text.firstChild&&(l=i.text.firstChild.getBoundingClientRect().right-f.left-1)}var d=i.line.height-s;if((d>.005||d<-.005)&&(ft(i.line,s),wr(i.line),i.rest))for(var h=0;h<i.rest.length;h++)wr(i.rest[h]);if(l>t.display.sizerWidth){var p=Math.ceil(l/rr(t.display));p>t.display.maxLineLength&&(t.display.maxLineLength=p,t.display.maxLine=i.line,t.display.maxLineChanged=!0)}}}}function wr(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function kr(t,e,n){var r=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;r=Math.floor(r-Mn(t));var i=n&&null!=n.bottom?n.bottom:r+t.wrapper.clientHeight,o=ht(e,r),a=ht(e,i);if(n&&n.ensure){var u=n.ensure.from.line,s=n.ensure.to.line;u<o?(o=u,a=ht(e,qt(st(e,u))+t.wrapper.clientHeight)):Math.min(s,e.lastLine())>=a&&(o=ht(e,qt(st(e,s))-t.wrapper.clientHeight),a=s)}return{from:o,to:Math.max(a,o+1)}}function _r(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var r=or(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){t.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var u=n[a].alignable;if(u)for(var s=0;s<u.length;s++)u[s].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=r+i+"px")}}function Mr(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=gt(t.options,e.first+e.size-1),r=t.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(T("div",[T("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",li(t),!0}return!1}function Sr(t,e){var n=t.display,r=nr(t.display);e.top<0&&(e.top=0);var i=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,o=Tn(t),a={};e.bottom-e.top>o&&(e.bottom=e.top+o);var u=t.doc.height+Sn(n),s=e.bottom>u-r;if(e.top<i)a.scrollTop=e.top<r?0:e.top;else if(e.bottom>i+o){var l=Math.min(e.top,(s?u:e.bottom)-o);l!=i&&(a.scrollTop=l)}var c=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft,f=Dn(t)-(t.options.fixedGutter?n.gutters.offsetWidth:0),d=e.right-e.left>f;return d&&(e.right=e.left+f),e.left<10?a.scrollLeft=0:e.left<c?a.scrollLeft=Math.max(0,e.left-(d?0:10)):e.right>f+c-3&&(a.scrollLeft=e.right+(d?0:10)-f),a}function Cr(t,e){null!=e&&(Tr(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function Ar(t){Tr(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function Dr(t,e,n){null==e&&null==n||Tr(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function Tr(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,Lr(t,Xn(t,e.from),Xn(t,e.to),e.margin))}function Lr(t,e,n,r){var i=Sr(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-r,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+r});Dr(t,i.scrollLeft,i.scrollTop)}function Er(t,e){Math.abs(t.doc.scrollTop-e)<2||(n||si(t,{top:e}),Or(t,e,!0),n&&si(t),ri(t,100))}function Or(t,e,n){e=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function Nr(t,e,n,r){e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!r||(t.doc.scrollLeft=e,_r(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function Fr(t){var e=t.display,n=e.gutters.offsetWidth,r=Math.round(t.doc.height+Sn(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+An(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}var Pr=function(t,e,n){this.cm=n;var r=this.vert=T("div",[T("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=T("div",[T("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,t(r),t(i),ee(r,"scroll",function(){r.clientHeight&&e(r.scrollTop,"vertical")}),ee(i,"scroll",function(){i.clientWidth&&e(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,a&&u<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Pr.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,r=t.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=e?r+"px":"0",this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+(t.viewHeight-(e?r:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),e?(this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=t.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+(t.viewWidth-t.barLeft-(n?r:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&t.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:e?r:0}},Pr.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Pr.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Pr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=y&&!h?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new I,this.disableVert=new I},Pr.prototype.enableZeroWidthBar=function(t,e,n){t.style.pointerEvents="auto",e.set(1e3,function r(){var i=t.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,r)})},Pr.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Wr=function(){};function zr(t,e){e||(e=Fr(t));var n=t.display.barWidth,r=t.display.barHeight;Rr(t,e);for(var i=0;i<4&&n!=t.display.barWidth||r!=t.display.barHeight;i++)n!=t.display.barWidth&&t.options.lineWrapping&&xr(t),Rr(t,Fr(t)),n=t.display.barWidth,r=t.display.barHeight}function Rr(t,e){var n=t.display,r=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}Wr.prototype.update=function(){return{bottom:0,right:0}},Wr.prototype.setScrollLeft=function(){},Wr.prototype.setScrollTop=function(){},Wr.prototype.clear=function(){};var Ir={native:Pr,null:Wr};function Hr(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&C(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Ir[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),ee(e,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,n){"horizontal"==n?Nr(t,e):Er(t,e)},t),t.display.scrollbars.addClass&&N(t.display.wrapper,t.display.scrollbars.addClass)}var Yr=0;function Br(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Yr},e=t.curOp,un?un.ops.push(e):e.ownsGroup=un={ops:[e],delayedCallbacks:[]}}function jr(t){var e=t.curOp;e&&function(t,e){var n=t.ownsGroup;if(n)try{!function(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var r=0;r<t.ops.length;r++){var i=t.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<e.length)}(n)}finally{un=null,function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,n=0;n<e.length;n++)Ur(e[n]);for(var r=0;r<e.length;r++)(i=e[r]).updatedDisplay=i.mustUpdate&&ai(i.cm,i.update);for(var i,o=0;o<e.length;o++)Gr(e[o]);for(var a=0;a<e.length;a++)Vr(e[a]);for(var u=0;u<e.length;u++)qr(e[u])}(t)}(n)}}(e)}function Ur(t){var e=t.cm,n=e.display;!function(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=An(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=An(t)+"px",e.scrollbarsClipped=!0)}(e),t.updateMaxLine&&Xt(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new oi(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Gr(t){var e=t.cm,n=e.display;t.updatedDisplay&&xr(e),t.barMeasure=Fr(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=En(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+An(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-Dn(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function Vr(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Nr(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==O();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&zr(e,t.barMeasure),t.updatedDisplay&&ci(e,t.barMeasure),t.selectionChanged&&gr(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&vr(t.cm)}function qr(t){var e=t.cm,n=e.display,r=e.doc;t.updatedDisplay&&ui(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&Or(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&Nr(e,t.scrollLeft,!0,!0),t.scrollToPos&&function(t,e){if(!oe(t,"scrollCursorIntoView")){var n=t.display,r=n.sizer.getBoundingClientRect(),i=null;if(e.top+r.top<0?i=!0:e.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!p){var o=T("div","\u200b",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-Mn(t.display))+"px;\n                         height: "+(e.bottom-e.top+An(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(i),t.display.lineSpace.removeChild(o)}}}(e,function(t,e,n,r){var i;null==r&&(r=0),t.options.lineWrapping||e!=n||(n="before"==(e=e.ch?vt(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e).sticky?vt(e.line,e.ch+1,"before"):e);for(var o=0;o<5;o++){var a=!1,u=$n(t,e),s=n&&n!=e?$n(t,n):u,l=Sr(t,i={left:Math.min(u.left,s.left),top:Math.min(u.top,s.top)-r,right:Math.max(u.left,s.left),bottom:Math.max(u.bottom,s.bottom)+r}),c=t.doc.scrollTop,f=t.doc.scrollLeft;if(null!=l.scrollTop&&(Er(t,l.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(a=!0)),null!=l.scrollLeft&&(Nr(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-f)>1&&(a=!0)),!a)break}return i}(e,_t(r,t.scrollToPos.from),_t(r,t.scrollToPos.to),t.scrollToPos.margin));var i=t.maybeHiddenMarkers,o=t.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||ie(i[a],"hide");if(o)for(var u=0;u<o.length;++u)o[u].lines.length&&ie(o[u],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&ie(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function $r(t,e){if(t.curOp)return e();Br(t);try{return e()}finally{jr(t)}}function Xr(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Br(t);try{return e.apply(t,arguments)}finally{jr(t)}}}function Zr(t){return function(){if(this.curOp)return t.apply(this,arguments);Br(this);try{return t.apply(this,arguments)}finally{jr(this)}}}function Kr(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Br(e);try{return t.apply(this,arguments)}finally{jr(e)}}}function Qr(t,e,n,r){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),r||(r=0);var i=t.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>e)&&(i.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=i.viewTo)Ct&&jt(t.doc,e)<i.viewTo&&ti(t);else if(n<=i.viewFrom)Ct&&Ut(t.doc,n+r)>i.viewFrom?ti(t):(i.viewFrom+=r,i.viewTo+=r);else if(e<=i.viewFrom&&n>=i.viewTo)ti(t);else if(e<=i.viewFrom){var o=ei(t,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):ti(t)}else if(n>=i.viewTo){var a=ei(t,e,e,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):ti(t)}else{var u=ei(t,e,e,-1),s=ei(t,n,n+r,1);u&&s?(i.view=i.view.slice(0,u.index).concat(an(t,u.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=r):ti(t)}var l=i.externalMeasured;l&&(n<l.lineN?l.lineN+=r:e<l.lineN+l.size&&(i.externalMeasured=null))}function Jr(t,e,n){t.curOp.viewChanged=!0;var r=t.display,i=t.display.externalMeasured;if(i&&e>=i.lineN&&e<i.lineN+i.size&&(r.externalMeasured=null),!(e<r.viewFrom||e>=r.viewTo)){var o=r.view[lr(t,e)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==H(a,n)&&a.push(n)}}}function ti(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function ei(t,e,n,r){var i,o=lr(t,e),a=t.display.view;if(!Ct||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var u=t.display.viewFrom,s=0;s<o;s++)u+=a[s].size;if(u!=e){if(r>0){if(o==a.length-1)return null;i=u+a[o].size-e,o++}else i=u-e;e+=i,n+=i}for(;jt(t.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function ni(t){for(var e=t.display.view,n=0,r=0;r<e.length;r++){var i=e[r];i.hidden||i.node&&!i.changes||++n}return n}function ri(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,W(ii,t))}function ii(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,r=Ie(t,e.highlightFrontier),i=[];e.iter(r.line,Math.min(e.first+e.size,t.display.viewTo+500),function(o){if(r.line>=t.display.viewFrom){var a=o.styles,u=o.text.length>t.options.maxHighlightLength?Ee(e.mode,r.state):null,s=ze(t,o,r,!0);u&&(r.state=u),o.styles=s.styles;var l=o.styleClasses,c=s.classes;c?o.styleClasses=c:l&&(o.styleClasses=null);for(var f=!a||a.length!=o.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),d=0;!f&&d<a.length;++d)f=a[d]!=o.styles[d];f&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=t.options.maxHighlightLength&&He(t,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ri(t,t.options.workDelay),!0}),e.highlightFrontier=r.line,e.modeFrontier=Math.max(e.modeFrontier,r.line),i.length&&$r(t,function(){for(var e=0;e<i.length;e++)Jr(t,i[e],"text")})}}var oi=function(t,e,n){var r=t.display;this.viewport=e,this.visible=kr(r,t.doc,e),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Dn(t),this.force=n,this.dims=ir(t),this.events=[]};function ai(t,e){var n=t.display,r=t.doc;if(e.editorIsHidden)return ti(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ni(t))return!1;Mr(t)&&(ti(t),e.dims=ir(t));var i=r.first+r.size,o=Math.max(e.visible.from-t.options.viewportMargin,r.first),a=Math.min(i,e.visible.to+t.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),Ct&&(o=jt(t.doc,o),a=Ut(t.doc,a));var u=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=e.wrapperHeight||n.lastWrapWidth!=e.wrapperWidth;!function(t,e,n){var r=t.display;0==r.view.length||e>=r.viewTo||n<=r.viewFrom?(r.view=an(t,e,n),r.viewFrom=e):(r.viewFrom>e?r.view=an(t,e,r.viewFrom).concat(r.view):r.viewFrom<e&&(r.view=r.view.slice(lr(t,e))),r.viewFrom=e,r.viewTo<n?r.view=r.view.concat(an(t,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,lr(t,n)))),r.viewTo=n}(t,o,a),n.viewOffset=qt(st(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var l=ni(t);if(!u&&0==l&&!e.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=function(t){if(t.hasFocus())return null;var e=O();if(!e||!E(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&E(t.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(t);return l>4&&(n.lineDiv.style.display="none"),function(t,e,n){var r=t.display,i=t.options.lineNumbers,o=r.lineDiv,a=o.firstChild;function u(e){var n=e.nextSibling;return s&&y&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var l=r.view,c=r.viewFrom,f=0;f<l.length;f++){var d=l[f];if(d.hidden);else if(d.node&&d.node.parentNode==o){for(;a!=d.node;)a=u(a);var h=i&&null!=e&&e<=c&&d.lineNumber;d.changes&&(H(d.changes,"gutter")>-1&&(h=!1),fn(t,d,c,n)),h&&(A(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(gt(t.options,c)))),a=d.node.nextSibling}else{var p=yn(t,d,c,n);o.insertBefore(p,a)}c+=d.size}for(;a;)a=u(a)}(t,n.updateLineNumbers,e.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(t){if(t&&t.activeElt&&t.activeElt!=O()&&(t.activeElt.focus(),t.anchorNode&&E(document.body,t.anchorNode)&&E(document.body,t.focusNode))){var e=window.getSelection(),n=document.createRange();n.setEnd(t.anchorNode,t.anchorOffset),n.collapse(!1),e.removeAllRanges(),e.addRange(n),e.extend(t.focusNode,t.focusOffset)}}(c),A(n.cursorDiv),A(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,u&&(n.lastWrapHeight=e.wrapperHeight,n.lastWrapWidth=e.wrapperWidth,ri(t,400)),n.updateLineNumbers=null,!0}function ui(t,e){for(var n=e.viewport,r=!0;(r&&t.options.lineWrapping&&e.oldDisplayWidth!=Dn(t)||(n&&null!=n.top&&(n={top:Math.min(t.doc.height+Sn(t.display)-Tn(t),n.top)}),e.visible=kr(t.display,t.doc,n),!(e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)))&&ai(t,e);r=!1){xr(t);var i=Fr(t);cr(t),zr(t,i),ci(t,i),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function si(t,e){var n=new oi(t,e);if(ai(t,n)){xr(t),ui(t,n);var r=Fr(t);cr(t),zr(t,r),ci(t,r),n.finish()}}function li(t){t.display.sizer.style.marginLeft=t.display.gutters.offsetWidth+"px"}function ci(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+An(t)+"px"}function fi(t){var e=t.display.gutters,n=t.options.gutters;A(e);for(var r=0;r<n.length;++r){var i=n[r],o=e.appendChild(T("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=r?"":"none",li(t)}function di(t){var e=H(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}oi.prototype.signal=function(t,e){ue(t,e)&&this.events.push(arguments)},oi.prototype.finish=function(){for(var t=0;t<this.events.length;t++)ie.apply(null,this.events[t])};var hi=0,pi=null;function gi(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function vi(t){var e=gi(t);return e.x*=pi,e.y*=pi,e}function mi(t,e){var r=gi(e),i=r.x,o=r.y,a=t.display,u=a.scroller,l=u.scrollHeight>u.clientHeight;if(i&&u.scrollWidth>u.clientWidth||o&&l){if(o&&y&&s)t:for(var c=e.target,d=a.view;c!=u;c=c.parentNode)for(var h=0;h<d.length;h++)if(d[h].node==c){t.display.currentWheelTarget=c;break t}if(i&&!n&&!f&&null!=pi)return o&&l&&Er(t,Math.max(0,u.scrollTop+o*pi)),Nr(t,Math.max(0,u.scrollLeft+i*pi)),(!o||o&&l)&&le(e),void(a.wheelStartX=null);if(o&&null!=pi){var p=o*pi,g=t.doc.scrollTop,v=g+a.wrapper.clientHeight;p<0?g=Math.max(0,g+p-50):v=Math.min(t.doc.height,v+p+50),si(t,{top:g,bottom:v})}hi<20&&(null==a.wheelStartX?(a.wheelStartX=u.scrollLeft,a.wheelStartY=u.scrollTop,a.wheelDX=i,a.wheelDY=o,setTimeout(function(){if(null!=a.wheelStartX){var t=u.scrollLeft-a.wheelStartX,e=u.scrollTop-a.wheelStartY,n=e&&a.wheelDY&&e/a.wheelDY||t&&a.wheelDX&&t/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(pi=(pi*hi+n)/(hi+1),++hi)}},200)):(a.wheelDX+=i,a.wheelDY+=o))}}a?pi=-.53:n?pi=15:c?pi=-.7:d&&(pi=-1/3);var yi=function(t,e){this.ranges=t,this.primIndex=e};yi.prototype.primary=function(){return this.ranges[this.primIndex]},yi.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],r=t.ranges[e];if(!yt(n.anchor,r.anchor)||!yt(n.head,r.head))return!1}return!0},yi.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new bi(bt(this.ranges[e].anchor),bt(this.ranges[e].head));return new yi(t,this.primIndex)},yi.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},yi.prototype.contains=function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(mt(e,r.from())>=0&&mt(t,r.to())<=0)return n}return-1};var bi=function(t,e){this.anchor=t,this.head=e};function xi(t,e,n){var r=t&&t.options.selectionsMayTouch,i=e[n];e.sort(function(t,e){return mt(t.from(),e.from())}),n=H(e,i);for(var o=1;o<e.length;o++){var a=e[o],u=e[o-1],s=mt(u.to(),a.from());if(r&&!a.empty()?s>0:s>=0){var l=wt(u.from(),a.from()),c=xt(u.to(),a.to()),f=u.empty()?a.from()==a.head:u.from()==u.head;o<=n&&--n,e.splice(--o,2,new bi(f?c:l,f?l:c))}}return new yi(e,n)}function wi(t,e){return new yi([new bi(t,e||t)],0)}function ki(t){return t.text?vt(t.from.line+t.text.length-1,X(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function _i(t,e){if(mt(t,e.from)<0)return t;if(mt(t,e.to)<=0)return ki(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,r=t.ch;return t.line==e.to.line&&(r+=ki(e).ch-e.to.ch),vt(n,r)}function Mi(t,e){for(var n=[],r=0;r<t.sel.ranges.length;r++){var i=t.sel.ranges[r];n.push(new bi(_i(i.anchor,e),_i(i.head,e)))}return xi(t.cm,n,t.sel.primIndex)}function Si(t,e,n){return t.line==e.line?vt(n.line,t.ch-e.ch+n.ch):vt(n.line+(t.line-e.line),t.ch)}function Ci(t){t.doc.mode=De(t.options,t.doc.modeOption),Ai(t)}function Ai(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,ri(t,100),t.state.modeGen++,t.curOp&&Qr(t)}function Di(t,e){return 0==e.from.ch&&0==e.to.ch&&""==X(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Ti(t,e,n,r){function i(t){return n?n[t]:null}function o(t,n,i){!function(t,e,n,r){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Ot(t),Nt(t,n);var i=r?r(t):1;i!=t.height&&ft(t,i)}(t,n,i,r),ln(t,"change",t,e)}function a(t,e){for(var n=[],o=t;o<e;++o)n.push(new qe(l[o],i(o),r));return n}var u=e.from,s=e.to,l=e.text,c=st(t,u.line),f=st(t,s.line),d=X(l),h=i(l.length-1),p=s.line-u.line;if(e.full)t.insert(0,a(0,l.length)),t.remove(l.length,t.size-l.length);else if(Di(t,e)){var g=a(0,l.length-1);o(f,f.text,h),p&&t.remove(u.line,p),g.length&&t.insert(u.line,g)}else if(c==f)if(1==l.length)o(c,c.text.slice(0,u.ch)+d+c.text.slice(s.ch),h);else{var v=a(1,l.length-1);v.push(new qe(d+c.text.slice(s.ch),h,r)),o(c,c.text.slice(0,u.ch)+l[0],i(0)),t.insert(u.line+1,v)}else if(1==l.length)o(c,c.text.slice(0,u.ch)+l[0]+f.text.slice(s.ch),i(0)),t.remove(u.line+1,p);else{o(c,c.text.slice(0,u.ch)+l[0],i(0)),o(f,d+f.text.slice(s.ch),h);var m=a(1,l.length-1);p>1&&t.remove(u.line+1,p-1),t.insert(u.line+1,m)}ln(t,"change",t,e)}function Li(t,e,n){!function t(r,i,o){if(r.linked)for(var a=0;a<r.linked.length;++a){var u=r.linked[a];if(u.doc!=i){var s=o&&u.sharedHist;n&&!s||(e(u.doc,s),t(u.doc,r,s))}}}(t,null,!0)}function Ei(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,ur(t),Ci(t),Oi(t),t.options.lineWrapping||Xt(t),t.options.mode=e.modeOption,Qr(t)}function Oi(t){("rtl"==t.doc.direction?N:C)(t.display.lineDiv,"CodeMirror-rtl")}function Ni(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function Fi(t,e){var n={from:bt(e.from),to:ki(e),text:lt(t,e.from,e.to)};return Ri(t,n,e.from.line,e.to.line+1),Li(t,function(t){return Ri(t,n,e.from.line,e.to.line+1)},!0),n}function Pi(t){for(;t.length&&X(t).ranges;)t.pop()}function Wi(t,e,n,r){var i=t.history;i.undone.length=0;var o,a,u=+new Date;if((i.lastOp==r||i.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&i.lastModTime>u-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(o=function(t,e){return e?(Pi(t.done),X(t.done)):t.done.length&&!X(t.done).ranges?X(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),X(t.done)):void 0}(i,i.lastOp==r)))a=X(o.changes),0==mt(e.from,e.to)&&0==mt(e.from,a.to)?a.to=ki(e):o.changes.push(Fi(t,e));else{var s=X(i.done);for(s&&s.ranges||zi(t.sel,i.done),o={changes:[Fi(t,e)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=u,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=e.origin,a||ie(t,"historyAdded")}function zi(t,e){var n=X(e);n&&n.ranges&&n.equals(t)||e.push(t)}function Ri(t,e,n,r){var i=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,r),function(n){n.markedSpans&&((i||(i=e["spans_"+t.id]={}))[o]=n.markedSpans),++o})}function Ii(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Hi(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var r=[],i=0;i<e.text.length;++i)r.push(Ii(n[i]));return r}(t,e),r=Lt(t,e);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)t:for(var u=0;u<a.length;++u){for(var s=a[u],l=0;l<o.length;++l)if(o[l].marker==s.marker)continue t;o.push(s)}else a&&(n[i]=a)}return n}function Yi(t,e,n){for(var r=[],i=0;i<t.length;++i){var o=t[i];if(o.ranges)r.push(n?yi.prototype.deepCopy.call(o):o);else{var a=o.changes,u=[];r.push({changes:u});for(var s=0;s<a.length;++s){var l=a[s],c=void 0;if(u.push({from:l.from,to:l.to,text:l.text}),e)for(var f in l)(c=f.match(/^spans_(\d+)$/))&&H(e,Number(c[1]))>-1&&(X(u)[f]=l[f],delete l[f])}}}return r}function Bi(t,e,n,r){if(r){var i=t.anchor;if(n){var o=mt(e,i)<0;o!=mt(n,i)<0?(i=e,e=n):o!=mt(e,n)<0&&(e=n)}return new bi(i,e)}return new bi(n||e,e)}function ji(t,e,n,r,i){null==i&&(i=t.cm&&(t.cm.display.shift||t.extend)),$i(t,new yi([Bi(t.sel.primary(),e,n,i)],0),r)}function Ui(t,e,n){for(var r=[],i=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)r[o]=Bi(t.sel.ranges[o],e[o],null,i);$i(t,xi(t.cm,r,t.sel.primIndex),n)}function Gi(t,e,n,r){var i=t.sel.ranges.slice(0);i[e]=n,$i(t,xi(t.cm,i,t.sel.primIndex),r)}function Vi(t,e,n,r){$i(t,wi(e,n),r)}function qi(t,e,n){var r=t.history.done,i=X(r);i&&i.ranges?(r[r.length-1]=e,Xi(t,e,n)):$i(t,e,n)}function $i(t,e,n){Xi(t,e,n),function(t,e,n,r){var i=t.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(t,e,n,r){var i=e.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,o,X(i.done),e))?i.done[i.done.length-1]=e:zi(e,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Pi(i.undone)}(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function Xi(t,e,n){(ue(t,"beforeSelectionChange")||t.cm&&ue(t.cm,"beforeSelectionChange"))&&(e=function(t,e,n){var r={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new bi(_t(t,e[n].anchor),_t(t,e[n].head))},origin:n&&n.origin};return ie(t,"beforeSelectionChange",t,r),t.cm&&ie(t.cm,"beforeSelectionChange",t.cm,r),r.ranges!=e.ranges?xi(t.cm,r.ranges,r.ranges.length-1):e}(t,e,n));var r=n&&n.bias||(mt(e.primary().head,t.sel.primary().head)<0?-1:1);Zi(t,Qi(t,e,r,!0)),n&&!1===n.scroll||!t.cm||Ar(t.cm)}function Zi(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,ae(t.cm)),ln(t,"cursorActivity",t))}function Ki(t){Zi(t,Qi(t,t.sel,null,!1))}function Qi(t,e,n,r){for(var i,o=0;o<e.ranges.length;o++){var a=e.ranges[o],u=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],s=to(t,a.anchor,u&&u.anchor,n,r),l=to(t,a.head,u&&u.head,n,r);(i||s!=a.anchor||l!=a.head)&&(i||(i=e.ranges.slice(0,o)),i[o]=new bi(s,l))}return i?xi(t.cm,i,e.primIndex):e}function Ji(t,e,n,r,i){var o=st(t,e.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var u=o.markedSpans[a],s=u.marker;if((null==u.from||(s.inclusiveLeft?u.from<=e.ch:u.from<e.ch))&&(null==u.to||(s.inclusiveRight?u.to>=e.ch:u.to>e.ch))){if(i&&(ie(s,"beforeCursorEnter"),s.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!s.atomic)continue;if(n){var l=s.find(r<0?1:-1),c=void 0;if((r<0?s.inclusiveRight:s.inclusiveLeft)&&(l=eo(t,l,-r,l&&l.line==e.line?o:null)),l&&l.line==e.line&&(c=mt(l,n))&&(r<0?c<0:c>0))return Ji(t,l,e,r,i)}var f=s.find(r<0?-1:1);return(r<0?s.inclusiveLeft:s.inclusiveRight)&&(f=eo(t,f,r,f.line==e.line?o:null)),f?Ji(t,f,e,r,i):null}}return e}function to(t,e,n,r,i){var o=r||1;return Ji(t,e,n,o,i)||!i&&Ji(t,e,n,o,!0)||Ji(t,e,n,-o,i)||!i&&Ji(t,e,n,-o,!0)||(t.cantEdit=!0,vt(t.first,0))}function eo(t,e,n,r){return n<0&&0==e.ch?e.line>t.first?_t(t,vt(e.line-1)):null:n>0&&e.ch==(r||st(t,e.line)).text.length?e.line<t.first+t.size-1?vt(e.line+1,0):null:new vt(e.line,e.ch+n)}function no(t){t.setSelection(vt(t.firstLine(),0),vt(t.lastLine()),j)}function ro(t,e,n){var r={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(e,n,i,o){e&&(r.from=_t(t,e)),n&&(r.to=_t(t,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),ie(t,"beforeChange",t,r),t.cm&&ie(t.cm,"beforeChange",t.cm,r),r.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function io(t,e,n){if(t.cm){if(!t.cm.curOp)return Xr(t.cm,io)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(ue(t,"beforeChange")||t.cm&&ue(t.cm,"beforeChange"))||(e=ro(t,e,!0))){var r=St&&!n&&function(t,e,n){var r=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||r&&-1!=H(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:e,to:n}],o=0;o<r.length;++o)for(var a=r[o],u=a.find(0),s=0;s<i.length;++s){var l=i[s];if(!(mt(l.to,u.from)<0||mt(l.from,u.to)>0)){var c=[s,1],f=mt(l.from,u.from),d=mt(l.to,u.to);(f<0||!a.inclusiveLeft&&!f)&&c.push({from:l.from,to:u.from}),(d>0||!a.inclusiveRight&&!d)&&c.push({from:u.to,to:l.to}),i.splice.apply(i,c),s+=c.length-3}}return i}(t,e.from,e.to);if(r)for(var i=r.length-1;i>=0;--i)oo(t,{from:r[i].from,to:r[i].to,text:i?[""]:e.text,origin:e.origin});else oo(t,e)}}function oo(t,e){if(1!=e.text.length||""!=e.text[0]||0!=mt(e.from,e.to)){var n=Mi(t,e);Wi(t,e,n,t.cm?t.cm.curOp.id:NaN),so(t,e,n,Lt(t,e));var r=[];Li(t,function(t,n){n||-1!=H(r,t.history)||(ho(t.history,e),r.push(t.history)),so(t,e,null,Lt(t,e))})}}function ao(t,e,n){var r=t.cm&&t.cm.state.suppressEdits;if(!r||n){for(var i,o=t.history,a=t.sel,u="undo"==e?o.done:o.undone,s="undo"==e?o.undone:o.done,l=0;l<u.length&&(i=u[l],n?!i.ranges||i.equals(t.sel):i.ranges);l++);if(l!=u.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=u.pop()).ranges){if(r)return void u.push(i);break}if(zi(i,s),n&&!i.equals(t.sel))return void $i(t,i,{clearRedo:!1});a=i}var c=[];zi(a,s),s.push({changes:c,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var f=ue(t,"beforeChange")||t.cm&&ue(t.cm,"beforeChange"),d=function(n){var r=i.changes[n];if(r.origin=e,f&&!ro(t,r,!1))return u.length=0,{};c.push(Fi(t,r));var o=n?Mi(t,r):X(u);so(t,r,o,Hi(t,r)),!n&&t.cm&&t.cm.scrollIntoView({from:r.from,to:ki(r)});var a=[];Li(t,function(t,e){e||-1!=H(a,t.history)||(ho(t.history,r),a.push(t.history)),so(t,r,null,Hi(t,r))})},h=i.changes.length-1;h>=0;--h){var p=d(h);if(p)return p.v}}}}function uo(t,e){if(0!=e&&(t.first+=e,t.sel=new yi(Z(t.sel.ranges,function(t){return new bi(vt(t.anchor.line+e,t.anchor.ch),vt(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){Qr(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,r=n.viewFrom;r<n.viewTo;r++)Jr(t.cm,r,"gutter")}}function so(t,e,n,r){if(t.cm&&!t.cm.curOp)return Xr(t.cm,so)(t,e,n,r);if(e.to.line<t.first)uo(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var i=e.text.length-1-(t.first-e.from.line);uo(t,i),e={from:vt(t.first,0),to:vt(e.to.line+i,e.to.ch),text:[X(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:vt(o,st(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=lt(t,e.from,e.to),n||(n=Mi(t,e)),t.cm?function(t,e,n){var r=t.doc,i=t.display,o=e.from,a=e.to,u=!1,s=o.line;t.options.lineWrapping||(s=dt(Bt(st(r,o.line))),r.iter(s,a.line+1,function(t){if(t==i.maxLine)return u=!0,!0})),r.sel.contains(e.from,e.to)>-1&&ae(t),Ti(r,e,n,ar(t)),t.options.lineWrapping||(r.iter(s,o.line+e.text.length,function(t){var e=$t(t);e>i.maxLineLength&&(i.maxLine=t,i.maxLineLength=e,i.maxLineChanged=!0,u=!1)}),u&&(t.curOp.updateMaxLine=!0)),function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,r=e-1;r>n;r--){var i=st(t,r).stateAfter;if(i&&(!(i instanceof Pe)||r+i.lookAhead<e)){n=r+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}}(r,o.line),ri(t,400);var l=e.text.length-(a.line-o.line)-1;e.full?Qr(t):o.line!=a.line||1!=e.text.length||Di(t.doc,e)?Qr(t,o.line,a.line+1,l):Jr(t,o.line,"text");var c=ue(t,"changes"),f=ue(t,"change");if(f||c){var d={from:o,to:a,text:e.text,removed:e.removed,origin:e.origin};f&&ln(t,"change",t,d),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(d)}t.display.selForContextMenu=null}(t.cm,e,r):Ti(t,e,r),Xi(t,n,j)}}function lo(t,e,n,r,i){var o;r||(r=n),mt(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof e&&(e=t.splitLines(e)),io(t,{from:n,to:r,text:e,origin:i})}function co(t,e,n,r){n<t.line?t.line+=r:e<t.line&&(t.line=e,t.ch=0)}function fo(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i],a=!0;if(o.ranges){o.copied||((o=t[i]=o.deepCopy()).copied=!0);for(var u=0;u<o.ranges.length;u++)co(o.ranges[u].anchor,e,n,r),co(o.ranges[u].head,e,n,r)}else{for(var s=0;s<o.changes.length;++s){var l=o.changes[s];if(n<l.from.line)l.from=vt(l.from.line+r,l.from.ch),l.to=vt(l.to.line+r,l.to.ch);else if(e<=l.to.line){a=!1;break}}a||(t.splice(0,i+1),i=0)}}}function ho(t,e){var n=e.from.line,r=e.to.line,i=e.text.length-(r-n)-1;fo(t.done,n,r,i),fo(t.undone,n,r,i)}function po(t,e,n,r){var i=e,o=e;return"number"==typeof e?o=st(t,kt(t,e)):i=dt(e),null==i?null:(r(o,i)&&t.cm&&Jr(t.cm,i,n),o)}function go(t){this.lines=t,this.parent=null;for(var e=0,n=0;n<t.length;++n)t[n].parent=this,e+=t[n].height;this.height=e}function vo(t){this.children=t;for(var e=0,n=0,r=0;r<t.length;++r){var i=t[r];e+=i.chunkSize(),n+=i.height,i.parent=this}this.size=e,this.height=n,this.parent=null}bi.prototype.from=function(){return wt(this.anchor,this.head)},bi.prototype.to=function(){return xt(this.anchor,this.head)},bi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},go.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,r=t+e;n<r;++n){var i=this.lines[n];this.height-=i.height,$e(i),ln(i,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var r=0;r<e.length;++r)e[r].parent=this},iterN:function(t,e,n){for(var r=t+e;t<r;++t)if(n(this.lines[t]))return!0}},vo.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(t<i){var o=Math.min(e,i-t),a=r.height;if(r.removeInner(t,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(e-=o))break;t=0}else t-=i}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof go))){var u=[];this.collapse(u),this.children=[new go(u)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(t<=o){if(i.insertInner(t,e,n),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,u=a;u<i.lines.length;){var s=new go(i.lines.slice(u,u+=25));i.height-=s.height,this.children.splice(++r,0,s),s.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new vo(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=H(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var r=new vo(t.children);r.parent=t,t.children=[r,e],t=r}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(t<o){var a=Math.min(e,o-t);if(i.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=o}}};var mo=function(t,e,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=t,this.node=e};function yo(t,e,n){qt(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Cr(t,n)}mo.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,r=dt(n);if(null!=r&&e){for(var i=0;i<e.length;++i)e[i]==this&&e.splice(i--,1);e.length||(n.widgets=null);var o=kn(this);ft(n,Math.max(0,n.height-o)),t&&($r(t,function(){yo(t,n,-o),Jr(t,r,"widget")}),ln(t,"lineWidgetCleared",t,this,r))}},mo.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=kn(this)-e;i&&(Gt(this.doc,r)||ft(r,r.height+i),n&&$r(n,function(){n.curOp.forceUpdate=!0,yo(n,r,i),ln(n,"lineWidgetChanged",n,t,dt(r))}))},se(mo);var bo=0,xo=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++bo};function wo(t,e,n,r,i){if(r&&r.shared)return function(t,e,n,r,i){(r=z(r)).shared=!1;var o=[wo(t,e,n,r,i)],a=o[0],u=r.widgetNode;return Li(t,function(t){u&&(r.widgetNode=u.cloneNode(!0)),o.push(wo(t,_t(t,e),_t(t,n),r,i));for(var s=0;s<t.linked.length;++s)if(t.linked[s].isParent)return;a=X(o)}),new ko(o,a)}(t,e,n,r,i);if(t.cm&&!t.cm.curOp)return Xr(t.cm,wo)(t,e,n,r,i);var o=new xo(t,i),a=mt(e,n);if(r&&z(r,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=L("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Yt(t,e.line,e,n,o)||e.line!=n.line&&Yt(t,n.line,e,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ct=!0}o.addToHistory&&Wi(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var u,s=e.line,l=t.cm;if(t.iter(s,n.line+1,function(t){l&&o.collapsed&&!l.options.lineWrapping&&Bt(t)==l.display.maxLine&&(u=!0),o.collapsed&&s!=e.line&&ft(t,0),function(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}(t,new At(o,s==e.line?e.ch:null,s==n.line?n.ch:null)),++s}),o.collapsed&&t.iter(e.line,n.line+1,function(e){Gt(t,e)&&ft(e,0)}),o.clearOnEnter&&ee(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(St=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++bo,o.atomic=!0),l){if(u&&(l.curOp.updateMaxLine=!0),o.collapsed)Qr(l,e.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=e.line;c<=n.line;c++)Jr(l,c,"text");o.atomic&&Ki(l.doc),ln(l,"markerAdded",l,o)}return o}xo.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Br(t),ue(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],u=Dt(a.markedSpans,this);t&&!this.collapsed?Jr(t,dt(a),"text"):t&&(null!=u.to&&(i=dt(a)),null!=u.from&&(r=dt(a))),a.markedSpans=Tt(a.markedSpans,u),null==u.from&&this.collapsed&&!Gt(this.doc,a)&&t&&ft(a,nr(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var l=Bt(this.lines[s]),c=$t(l);c>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=r&&t&&this.collapsed&&Qr(t,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Ki(t.doc)),t&&ln(t,"markerCleared",t,this,r,i),e&&jr(t),this.parent&&this.parent.clear()}},xo.prototype.find=function(t,e){var n,r;null==t&&"bookmark"==this.type&&(t=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],a=Dt(o.markedSpans,this);if(null!=a.from&&(n=vt(e?o:dt(o),a.from),-1==t))return n;if(null!=a.to&&(r=vt(e?o:dt(o),a.to),1==t))return r}return n&&{from:n,to:r}},xo.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,r=this.doc.cm;e&&r&&$r(r,function(){var i=e.line,o=dt(e.line),a=On(r,o);if(a&&(In(a),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Gt(n.doc,i)&&null!=n.height){var u=n.height;n.height=null;var s=kn(n)-u;s&&ft(i,i.height+s)}ln(r,"markerChanged",r,t)})},xo.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=H(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},xo.prototype.detachLine=function(t){if(this.lines.splice(H(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},se(xo);var ko=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};function _o(t){return t.findMarks(vt(t.first,0),t.clipPos(vt(t.lastLine())),function(t){return t.parent})}function Mo(t){for(var e=function(e){var n=t[e],r=[n.primary.doc];Li(n.primary.doc,function(t){return r.push(t)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==H(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<t.length;n++)e(n)}ko.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ln(this,"clear")}},ko.prototype.find=function(t,e){return this.primary.find(t,e)},se(ko);var So=0,Co=function(t,e,n,r,i){if(!(this instanceof Co))return new Co(t,e,n,r,i);null==n&&(n=0),vo.call(this,[new go([new qe("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=vt(n,0);this.sel=wi(o),this.history=new Ni(null),this.id=++So,this.modeOption=e,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Ti(this,{from:o,to:o,text:t}),$i(this,wi(o),j)};Co.prototype=Q(vo.prototype,{constructor:Co,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,r=0;r<e.length;++r)n+=e[r].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=ct(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:Kr(function(t){var e=vt(this.first,0),n=this.first+this.size-1;io(this,{from:e,to:vt(n,st(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Dr(this.cm,0,0),$i(this,wi(e),j)}),replaceRange:function(t,e,n,r){lo(this,t,e=_t(this,e),n=n?_t(this,n):e,r)},getRange:function(t,e,n){var r=lt(this,_t(this,t),_t(this,e));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(pt(this,t))return st(this,t)},getLineNumber:function(t){return dt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=st(this,t)),Bt(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return _t(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Kr(function(t,e,n){Vi(this,_t(this,"number"==typeof t?vt(t,e||0):t),null,n)}),setSelection:Kr(function(t,e,n){Vi(this,_t(this,t),_t(this,e||t),n)}),extendSelection:Kr(function(t,e,n){ji(this,_t(this,t),e&&_t(this,e),n)}),extendSelections:Kr(function(t,e){Ui(this,Mt(this,t),e)}),extendSelectionsBy:Kr(function(t,e){Ui(this,Mt(this,Z(this.sel.ranges,t)),e)}),setSelections:Kr(function(t,e,n){if(t.length){for(var r=[],i=0;i<t.length;i++)r[i]=new bi(_t(this,t[i].anchor),_t(this,t[i].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),$i(this,xi(this.cm,r,e),n)}}),addSelection:Kr(function(t,e,n){var r=this.sel.ranges.slice(0);r.push(new bi(_t(this,t),_t(this,e||t))),$i(this,xi(this.cm,r,r.length-1),n)}),getSelection:function(t){for(var e,n=this.sel.ranges,r=0;r<n.length;r++){var i=lt(this,n[r].from(),n[r].to());e=e?e.concat(i):i}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=lt(this,n[r].from(),n[r].to());!1!==t&&(i=i.join(t||this.lineSeparator())),e[r]=i}return e},replaceSelection:function(t,e,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=t;this.replaceSelections(r,e,n||"+input")},replaceSelections:Kr(function(t,e,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:this.splitLines(t[o]),origin:n}}for(var u=e&&"end"!=e&&function(t,e,n){for(var r=[],i=vt(t.first,0),o=i,a=0;a<e.length;a++){var u=e[a],s=Si(u.from,i,o),l=Si(ki(u),i,o);if(i=u.to,o=l,"around"==n){var c=t.sel.ranges[a],f=mt(c.head,c.anchor)<0;r[a]=new bi(f?l:s,f?s:l)}else r[a]=new bi(s,s)}return new yi(r,t.sel.primIndex)}(this,r,e),s=r.length-1;s>=0;s--)io(this,r[s]);u?qi(this,u):this.cm&&Ar(this.cm)}),undo:Kr(function(){ao(this,"undo")}),redo:Kr(function(){ao(this,"redo")}),undoSelection:Kr(function(){ao(this,"undo",!0)}),redoSelection:Kr(function(){ao(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,r=0;r<t.done.length;r++)t.done[r].ranges||++e;for(var i=0;i<t.undone.length;i++)t.undone[i].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){this.history=new Ni(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Yi(this.history.done),undone:Yi(this.history.undone)}},setHistory:function(t){var e=this.history=new Ni(this.history.maxGeneration);e.done=Yi(t.done.slice(0),null,!0),e.undone=Yi(t.undone.slice(0),null,!0)},setGutterMarker:Kr(function(t,e,n){return po(this,t,"gutter",function(t){var r=t.gutterMarkers||(t.gutterMarkers={});return r[e]=n,!n&&nt(r)&&(t.gutterMarkers=null),!0})}),clearGutter:Kr(function(t){var e=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[t]&&po(e,n,"gutter",function(){return n.gutterMarkers[t]=null,nt(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(t){var e;if("number"==typeof t){if(!pt(this,t))return null;if(e=t,!(t=st(this,t)))return null}else if(null==(e=dt(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:Kr(function(t,e,n){return po(this,t,"gutter"==e?"gutter":"class",function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[r]){if(M(n).test(t[r]))return!1;t[r]+=" "+n}else t[r]=n;return!0})}),removeLineClass:Kr(function(t,e,n){return po(this,t,"gutter"==e?"gutter":"class",function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",i=t[r];if(!i)return!1;if(null==n)t[r]=null;else{var o=i.match(M(n));if(!o)return!1;var a=o.index+o[0].length;t[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:Kr(function(t,e,n){return function(t,e,n,r){var i=new mo(t,n,r),o=t.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),po(t,e,"widget",function(e){var n=e.widgets||(e.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=e,o&&!Gt(t,e)){var r=qt(e)<t.scrollTop;ft(e,e.height+kn(i)),r&&Cr(o,i.height),o.curOp.forceUpdate=!0}return!0}),o&&ln(o,"lineWidgetAdded",o,i,"number"==typeof e?e:dt(e)),i}(this,t,e,n)}),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return wo(this,_t(this,t),_t(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return wo(this,t=_t(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=st(this,(t=_t(this,t)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=t.ch)&&(null==i.to||i.to>=t.ch)&&e.push(i.marker.parent||i.marker)}return e},findMarks:function(t,e,n){t=_t(this,t),e=_t(this,e);var r=[],i=t.line;return this.iter(t.line,e.line+1,function(o){var a=o.markedSpans;if(a)for(var u=0;u<a.length;u++){var s=a[u];null!=s.to&&i==t.line&&t.ch>=s.to||null==s.from&&i!=t.line||null!=s.from&&i==e.line&&s.from>=e.ch||n&&!n(s.marker)||r.push(s.marker.parent||s.marker)}++i}),r},getAllMarks:function(){var t=[];return this.iter(function(e){var n=e.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&t.push(n[r].marker)}),t},posFromIndex:function(t){var e,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+r;if(o>t)return e=t,!0;t-=o,++n}),_t(this,vt(n,e))},indexFromPos:function(t){var e=(t=_t(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,function(t){e+=t.text.length+n}),e},copy:function(t){var e=new Co(ct(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var r=new Co(ct(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:t.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.find(),o=t.clipPos(i.from),a=t.clipPos(i.to);if(mt(o,a)){var u=wo(t,o,a,r.primary,r.primary.type);r.markers.push(u),u.parent=r}}}(r,_o(this)),r},unlinkDoc:function(t){if(t instanceof wa&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e)if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),Mo(_o(this));break}if(t.history==this.history){var n=[t.id];Li(t,function(t){return n.push(t.id)},!0),t.history=new Ni(null),t.history.done=Yi(this.history.done,n),t.history.undone=Yi(this.history.undone,n)}},iterLinkedDocs:function(t){Li(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):we(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Kr(function(t){var e;"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(t){return t.order=null}),this.cm&&$r(e=this.cm,function(){Oi(e),Qr(e)}))})}),Co.prototype.eachLine=Co.prototype.iter;var Ao=0;function Do(t){var e=this;if(To(e),!oe(e,t)&&!_n(e.display,t)){le(t),a&&(Ao=+new Date);var n=sr(e,t,!0),r=t.dataTransfer.files;if(n&&!e.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),u=0,s=function(t,r){if(!e.options.allowDropFileTypes||-1!=H(e.options.allowDropFileTypes,t.type)){var a=new FileReader;a.onload=Xr(e,function(){var t=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(t)&&(t=""),o[r]=t,++u==i){var s={from:n=_t(e.doc,n),to:n,text:e.doc.splitLines(o.join(e.doc.lineSeparator())),origin:"paste"};io(e.doc,s),qi(e.doc,wi(n,ki(s)))}}),a.readAsText(t)}},l=0;l<i;++l)s(r[l],l);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout(function(){return e.display.input.focus()},20);try{var c=t.dataTransfer.getData("Text");if(c){var f;if(e.state.draggingText&&!e.state.draggingText.copy&&(f=e.listSelections()),Xi(e.doc,wi(n,n)),f)for(var d=0;d<f.length;++d)lo(e.doc,"",f[d].anchor,f[d].head,"drag");e.replaceSelection(c,"around","paste"),e.display.input.focus()}}catch(t){}}}}function To(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Lo(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<e.length;r++){var i=e[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation(function(){for(var e=0;e<n.length;e++)t(n[e])})}}var Eo=!1;function Oo(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var No={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Fo=0;Fo<10;Fo++)No[Fo+48]=No[Fo+96]=String(Fo);for(var Po=65;Po<=90;Po++)No[Po]=String.fromCharCode(Po);for(var Wo=1;Wo<=12;Wo++)No[Wo+111]=No[Wo+63235]="F"+Wo;var zo={};function Ro(t){var e,n,r,i,o=t.split(/-(?!$)/);t=o[o.length-1];for(var a=0;a<o.length-1;a++){var u=o[a];if(/^(cmd|meta|m)$/i.test(u))i=!0;else if(/^a(lt)?$/i.test(u))e=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else{if(!/^s(hift)?$/i.test(u))throw new Error("Unrecognized modifier name: "+u);r=!0}}return e&&(t="Alt-"+t),n&&(t="Ctrl-"+t),i&&(t="Cmd-"+t),r&&(t="Shift-"+t),t}function Io(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete t[n];continue}for(var i=Z(n.split(" "),Ro),o=0;o<i.length;o++){var a=void 0,u=void 0;o==i.length-1?(u=i.join(" "),a=r):(u=i.slice(0,o+1).join(" "),a="...");var s=e[u];if(s){if(s!=a)throw new Error("Inconsistent bindings for "+u)}else e[u]=a}delete t[n]}for(var l in e)t[l]=e[l];return t}function Ho(t,e,n,r){var i=(e=Uo(e)).call?e.call(t,r):e[t];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return Ho(t,e.fallthrough,n,r);for(var o=0;o<e.fallthrough.length;o++){var a=Ho(t,e.fallthrough[o],n,r);if(a)return a}}}function Yo(t){var e="string"==typeof t?t:No[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Bo(t,e,n){var r=t;return e.altKey&&"Alt"!=r&&(t="Alt-"+t),(k?e.metaKey:e.ctrlKey)&&"Ctrl"!=r&&(t="Ctrl-"+t),(k?e.ctrlKey:e.metaKey)&&"Cmd"!=r&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=r&&(t="Shift-"+t),t}function jo(t,e){if(f&&34==t.keyCode&&t.char)return!1;var n=No[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),Bo(n,t,e))}function Uo(t){return"string"==typeof t?zo[t]:t}function Go(t,e){for(var n=t.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=e(n[i]);r.length&&mt(o.from,X(r).to)<=0;){var a=r.pop();if(mt(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}$r(t,function(){for(var e=r.length-1;e>=0;e--)lo(t.doc,"",r[e].from,r[e].to,"+delete");Ar(t)})}function Vo(t,e,n){var r=ot(t.text,e+n,n);return r<0||r>t.text.length?null:r}function qo(t,e,n){var r=Vo(t,e.ch,n);return null==r?null:new vt(e.line,r,n<0?"after":"before")}function $o(t,e,n,r,i){if(t){var o=Jt(n,e.doc.direction);if(o){var a,u=i<0?X(o):o[0],s=i<0==(1==u.level)?"after":"before";if(u.level>0||"rtl"==e.doc.direction){var l=Nn(e,n),c=Fn(e,l,a=i<0?n.text.length-1:0).top;a=at(function(t){return Fn(e,l,t).top==c},i<0==(1==u.level)?u.from:u.to-1,a),"before"==s&&(a=Vo(n,a,1))}else a=i<0?u.to:u.from;return new vt(r,a,s)}}return new vt(r,i<0?n.text.length:0,i<0?"before":"after")}zo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},zo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},zo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},zo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},zo.default=y?zo.macDefault:zo.pcDefault;var Xo={selectAll:no,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),j)},killLine:function(t){return Go(t,function(e){if(e.empty()){var n=st(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:vt(e.head.line+1,0)}:{from:e.head,to:vt(e.head.line,n)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return Go(t,function(e){return{from:vt(e.from().line,0),to:_t(t.doc,vt(e.to().line+1,0))}})},delLineLeft:function(t){return Go(t,function(t){return{from:vt(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){return Go(t,function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}})},delWrappedLineRight:function(t){return Go(t,function(e){var n=t.charCoords(e.head,"div").top+5,r=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:r}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(vt(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(vt(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return Zo(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return Ko(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return function(t,e){var n=st(t.doc,e),r=function(t){for(var e;e=It(t);)t=e.find(1,!0).line;return t}(n);return r!=n&&(e=dt(r)),$o(!0,t,n,e,-1)}(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")},G)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")},G)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5,r=t.coordsChar({left:0,top:n},"div");return r.ch<t.getLine(r.line).search(/\S/)?Ko(t,e.head):r},G)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"char")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),r=t.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=R(t.getLine(o.line),o.ch,r);e.push($(r-a%r))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return $r(t,function(){for(var e=t.listSelections(),n=[],r=0;r<e.length;r++)if(e[r].empty()){var i=e[r].head,o=st(t.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new vt(i.line,i.ch-1)),i.ch>0)i=new vt(i.line,i.ch+1),t.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),vt(i.line,i.ch-2),i,"+transpose");else if(i.line>t.doc.first){var a=st(t.doc,i.line-1).text;a&&(i=new vt(i.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+a.charAt(a.length-1),vt(i.line-1,a.length-1),i,"+transpose"))}n.push(new bi(i,i))}t.setSelections(n)})},newlineAndIndent:function(t){return $r(t,function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var r=0;r<e.length;r++)t.indentLine(e[r].from().line,null,!0);Ar(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function Zo(t,e){var n=st(t.doc,e),r=Bt(n);return r!=n&&(e=dt(r)),$o(!0,t,r,e,1)}function Ko(t,e){var n=Zo(t,e.line),r=st(t.doc,n.line),i=Jt(r,t.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/));return vt(n.line,e.line==n.line&&e.ch<=o&&e.ch?0:o,n.sticky)}return n}function Qo(t,e,n){if("string"==typeof e&&!(e=Xo[e]))return!1;t.display.input.ensurePolled();var r=t.display.shift,i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),i=e(t)!=B}finally{t.display.shift=r,t.state.suppressEdits=!1}return i}var Jo=new I;function ta(t,e,n,r){var i=t.state.keySeq;if(i){if(Yo(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:Jo.set(50,function(){t.state.keySeq==i&&(t.state.keySeq=null,t.display.input.reset())}),ea(t,i+" "+e,n,r))return!0}return ea(t,e,n,r)}function ea(t,e,n,r){var i=function(t,e,n){for(var r=0;r<t.state.keyMaps.length;r++){var i=Ho(e,t.state.keyMaps[r],n,t);if(i)return i}return t.options.extraKeys&&Ho(e,t.options.extraKeys,n,t)||Ho(e,t.options.keyMap,n,t)}(t,e,r);return"multi"==i&&(t.state.keySeq=e),"handled"==i&&ln(t,"keyHandled",t,e,n),"handled"!=i&&"multi"!=i||(le(n),gr(t)),!!i}function na(t,e){var n=jo(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?ta(t,"Shift-"+n,e,function(e){return Qo(t,e,!0)})||ta(t,n,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return Qo(t,e)}):ta(t,n,e,function(e){return Qo(t,e)}))}var ra=null;function ia(t){var e=this;if(e.curOp.focus=O(),!oe(e,t)){a&&u<11&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.display.shift=16==n||t.shiftKey;var r=na(e,t);f&&(ra=r?n:null,!r&&88==n&&!_e&&(y?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function n(t){18!=t.keyCode&&t.altKey||(C(e,"CodeMirror-crosshair"),re(document,"keyup",n),re(document,"mouseover",n))}N(e,"CodeMirror-crosshair"),ee(document,"keyup",n),ee(document,"mouseover",n)}(e)}}function oa(t){16==t.keyCode&&(this.doc.sel.shift=!1),oe(this,t)}function aa(t){var e=this;if(!(_n(e.display,t)||oe(e,t)||t.ctrlKey&&!t.altKey||y&&t.metaKey)){var n=t.keyCode,r=t.charCode;if(f&&n==ra)return ra=null,void le(t);if(!f||t.which&&!(t.which<10)||!na(e,t)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(t,e,n){return ta(t,"'"+n+"'",e,function(e){return Qo(t,e,!0)})}(e,t,i)||e.display.input.onKeyPress(t))}}}var ua,sa,la=function(t,e,n){this.time=t,this.pos=e,this.button=n};function ca(t){var e=this,n=e.display;if(!(oe(e,t)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=t.shiftKey,_n(n,t))s||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!ha(e,t)){var r=sr(e,t),i=pe(t),o=r?function(t,e){var n=+new Date;return sa&&sa.compare(n,t,e)?(ua=sa=null,"triple"):ua&&ua.compare(n,t,e)?(sa=new la(n,t,e),ua=null,"double"):(ua=new la(n,t,e),sa=null,"single")}(r,i):"single";window.focus(),1==i&&e.state.selectingText&&e.state.selectingText(t),r&&function(t,e,n,r,i){var o="Click";return"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o),ta(t,Bo(o=(1==e?"Left":2==e?"Middle":"Right")+o,i),i,function(e){if("string"==typeof e&&(e=Xo[e]),!e)return!1;var r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),r=e(t,n)!=B}finally{t.state.suppressEdits=!1}return r})}(e,i,r,o,t)||(1==i?r?function(t,e,n,r){a?setTimeout(W(vr,t),0):t.curOp.focus=O();var i,o=function(t,e,n){var r=t.getOption("configureMouse"),i=r?r(t,e,n):{};return null==i.unit&&(i.unit=(b?n.shiftKey&&n.metaKey:n.altKey)?"rectangle":"single"==e?"char":"double"==e?"word":"line"),(null==i.extend||t.doc.extend)&&(i.extend=t.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=y?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(y?n.altKey:n.ctrlKey)),i}(t,n,r),l=t.doc.sel;t.options.dragDrop&&me&&!t.isReadOnly()&&"single"==n&&(i=l.contains(e))>-1&&(mt((i=l.ranges[i]).from(),e)<0||e.xRel>0)&&(mt(i.to(),e)>0||e.xRel<0)?function(t,e,n,r){var i=t.display,o=!1,l=Xr(t,function(e){s&&(i.scroller.draggable=!1),t.state.draggingText=!1,re(i.wrapper.ownerDocument,"mouseup",l),re(i.wrapper.ownerDocument,"mousemove",c),re(i.scroller,"dragstart",f),re(i.scroller,"drop",l),o||(le(e),r.addNew||ji(t.doc,n,null,null,r.extend),s||a&&9==u?setTimeout(function(){i.wrapper.ownerDocument.body.focus(),i.input.focus()},20):i.input.focus())}),c=function(t){o=o||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},f=function(){return o=!0};s&&(i.scroller.draggable=!0),t.state.draggingText=l,l.copy=!r.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop(),ee(i.wrapper.ownerDocument,"mouseup",l),ee(i.wrapper.ownerDocument,"mousemove",c),ee(i.scroller,"dragstart",f),ee(i.scroller,"drop",l),mr(t),setTimeout(function(){return i.input.focus()},20)}(t,r,e,o):function(t,e,n,r){var i=t.display,o=t.doc;le(e);var a,u,s=o.sel,l=s.ranges;if(r.addNew&&!r.extend?(u=o.sel.contains(n),a=u>-1?l[u]:new bi(n,n)):(a=o.sel.primary(),u=o.sel.primIndex),"rectangle"==r.unit)r.addNew||(a=new bi(n,n)),n=sr(t,e,!0,!0),u=-1;else{var c=fa(t,n,r.unit);a=r.extend?Bi(a,c.anchor,c.head,r.extend):c}r.addNew?-1==u?(u=l.length,$i(o,xi(t,l.concat([a]),u),{scroll:!1,origin:"*mouse"})):l.length>1&&l[u].empty()&&"char"==r.unit&&!r.extend?($i(o,xi(t,l.slice(0,u).concat(l.slice(u+1)),0),{scroll:!1,origin:"*mouse"}),s=o.sel):Gi(o,u,a,U):(u=0,$i(o,new yi([a],0),U),s=o.sel);var f=n,d=i.wrapper.getBoundingClientRect(),h=0;function p(e){t.state.selectingText=!1,h=1/0,le(e),i.input.focus(),re(i.wrapper.ownerDocument,"mousemove",g),re(i.wrapper.ownerDocument,"mouseup",v),o.history.lastSelOrigin=null}var g=Xr(t,function(e){0!==e.buttons&&pe(e)?function e(l){var c=++h,p=sr(t,l,!0,"rectangle"==r.unit);if(p)if(0!=mt(p,f)){t.curOp.focus=O(),function(e){if(0!=mt(f,e))if(f=e,"rectangle"==r.unit){for(var i=[],l=t.options.tabSize,c=R(st(o,n.line).text,n.ch,l),d=R(st(o,e.line).text,e.ch,l),h=Math.min(c,d),p=Math.max(c,d),g=Math.min(n.line,e.line),v=Math.min(t.lastLine(),Math.max(n.line,e.line));g<=v;g++){var m=st(o,g).text,y=V(m,h,l);h==p?i.push(new bi(vt(g,y),vt(g,y))):m.length>y&&i.push(new bi(vt(g,y),vt(g,V(m,p,l))))}i.length||i.push(new bi(n,n)),$i(o,xi(t,s.ranges.slice(0,u).concat(i),u),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b,x=a,w=fa(t,e,r.unit),k=x.anchor;mt(w.anchor,k)>0?(b=w.head,k=wt(x.from(),w.anchor)):(b=w.anchor,k=xt(x.to(),w.head));var _=s.ranges.slice(0);_[u]=function(t,e){var n=e.anchor,r=e.head,i=st(t.doc,n.line);if(0==mt(n,r)&&n.sticky==r.sticky)return e;var o=Jt(i);if(!o)return e;var a=Kt(o,n.ch,n.sticky),u=o[a];if(u.from!=n.ch&&u.to!=n.ch)return e;var s,l=a+(u.from==n.ch==(1!=u.level)?0:1);if(0==l||l==o.length)return e;if(r.line!=n.line)s=(r.line-n.line)*("ltr"==t.doc.direction?1:-1)>0;else{var c=Kt(o,r.ch,r.sticky),f=c-a||(r.ch-n.ch)*(1==u.level?-1:1);s=c==l-1||c==l?f<0:f>0}var d=o[l+(s?-1:0)],h=s==(1==d.level),p=h?d.from:d.to,g=h?"after":"before";return n.ch==p&&n.sticky==g?e:new bi(new vt(n.line,p,g),r)}(t,new bi(_t(o,k),b)),$i(o,xi(t,_,u),U)}}(p);var g=kr(i,o);(p.line>=g.to||p.line<g.from)&&setTimeout(Xr(t,function(){h==c&&e(l)}),150)}else{var v=l.clientY<d.top?-20:l.clientY>d.bottom?20:0;v&&setTimeout(Xr(t,function(){h==c&&(i.scroller.scrollTop+=v,e(l))}),50)}}(e):p(e)}),v=Xr(t,p);t.state.selectingText=v,ee(i.wrapper.ownerDocument,"mousemove",g),ee(i.wrapper.ownerDocument,"mouseup",v)}(t,r,e,o)}(e,r,o,t):he(t)==n.scroller&&le(t):2==i?(r&&ji(e.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(_?e.display.input.onContextMenu(t):mr(e)))}}function fa(t,e,n){if("char"==n)return new bi(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new bi(vt(e.line,0),_t(t.doc,vt(e.line+1,0)));var r=n(t,e);return new bi(r.from,r.to)}function da(t,e,n,r){var i,o;if(e.touches)i=e.touches[0].clientX,o=e.touches[0].clientY;else try{i=e.clientX,o=e.clientY}catch(e){return!1}if(i>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;r&&le(e);var a=t.display,u=a.lineDiv.getBoundingClientRect();if(o>u.bottom||!ue(t,n))return fe(e);o-=u.top-a.viewOffset;for(var s=0;s<t.options.gutters.length;++s){var l=a.gutters.childNodes[s];if(l&&l.getBoundingClientRect().right>=i)return ie(t,n,t,ht(t.doc,o),t.options.gutters[s],e),fe(e)}}function ha(t,e){return da(t,e,"gutterClick",!0)}function pa(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Yn(t)}la.prototype.compare=function(t,e,n){return this.time+400>t&&0==mt(e,this.pos)&&n==this.button};var ga={toString:function(){return"CodeMirror.Init"}},va={},ma={};function ya(t){fi(t),Qr(t),_r(t)}function ba(t,e,n){if(!e!=!(n&&n!=ga)){var r=t.display.dragFunctions,i=e?ee:re;i(t.display.scroller,"dragstart",r.start),i(t.display.scroller,"dragenter",r.enter),i(t.display.scroller,"dragover",r.over),i(t.display.scroller,"dragleave",r.leave),i(t.display.scroller,"drop",r.drop)}}function xa(t){t.options.lineWrapping?(N(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(C(t.display.wrapper,"CodeMirror-wrap"),Xt(t)),ur(t),Qr(t),Yn(t),setTimeout(function(){return zr(t)},100)}function wa(t,e){var n=this;if(!(this instanceof wa))return new wa(t,e);this.options=e=e?z(e):{},z(va,e,!1),di(e);var r=e.value;"string"==typeof r?r=new Co(r,e.mode,null,e.lineSeparator,e.direction):e.mode&&(r.modeOption=e.mode),this.doc=r;var i=new wa.inputStyles[e.inputStyle](this),o=this.display=new ut(t,r,i);for(var l in o.wrapper.CodeMirror=this,fi(this),pa(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Hr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new I,keySeq:null,specialChars:null},e.autofocus&&!m&&o.input.focus(),a&&u<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(t){var e=t.display;ee(e.scroller,"mousedown",Xr(t,ca)),ee(e.scroller,"dblclick",a&&u<11?Xr(t,function(e){if(!oe(t,e)){var n=sr(t,e);if(n&&!ha(t,e)&&!_n(t.display,e)){le(e);var r=t.findWordAt(n);ji(t.doc,r.anchor,r.head)}}}):function(e){return oe(t,e)||le(e)}),ee(e.scroller,"contextmenu",function(e){return function(t,e){_n(t.display,e)||function(t,e){return!!ue(t,"gutterContextMenu")&&da(t,e,"gutterContextMenu",!1)}(t,e)||oe(t,e,"contextmenu")||_||t.display.input.onContextMenu(e)}(t,e)});var n,r={end:0};function i(){e.activeTouch&&(n=setTimeout(function(){return e.activeTouch=null},1e3),(r=e.activeTouch).end=+new Date)}function o(t,e){if(null==e.left)return!0;var n=e.left-t.left,r=e.top-t.top;return n*n+r*r>400}ee(e.scroller,"touchstart",function(i){if(!oe(t,i)&&!function(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}(i)&&!ha(t,i)){e.input.ensurePolled(),clearTimeout(n);var o=+new Date;e.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(e.activeTouch.left=i.touches[0].pageX,e.activeTouch.top=i.touches[0].pageY)}}),ee(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)}),ee(e.scroller,"touchend",function(n){var r=e.activeTouch;if(r&&!_n(e,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var a,u=t.coordsChar(e.activeTouch,"page");a=!r.prev||o(r,r.prev)?new bi(u,u):!r.prev.prev||o(r,r.prev.prev)?t.findWordAt(u):new bi(vt(u.line,0),_t(t.doc,vt(u.line+1,0))),t.setSelection(a.anchor,a.head),t.focus(),le(n)}i()}),ee(e.scroller,"touchcancel",i),ee(e.scroller,"scroll",function(){e.scroller.clientHeight&&(Er(t,e.scroller.scrollTop),Nr(t,e.scroller.scrollLeft,!0),ie(t,"scroll",t))}),ee(e.scroller,"mousewheel",function(e){return mi(t,e)}),ee(e.scroller,"DOMMouseScroll",function(e){return mi(t,e)}),ee(e.wrapper,"scroll",function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),e.dragFunctions={enter:function(e){oe(t,e)||de(e)},over:function(e){oe(t,e)||(function(t,e){var n=sr(t,e);if(n){var r=document.createDocumentFragment();dr(t,n,r),t.display.dragCursor||(t.display.dragCursor=T("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),D(t.display.dragCursor,r)}}(t,e),de(e))},start:function(e){return function(t,e){if(a&&(!t.state.draggingText||+new Date-Ao<100))de(e);else if(!oe(t,e)&&!_n(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!d)){var n=T("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",f&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),f&&n.parentNode.removeChild(n)}}(t,e)},drop:Xr(t,Do),leave:function(e){oe(t,e)||To(t)}};var s=e.input.getField();ee(s,"keyup",function(e){return oa.call(t,e)}),ee(s,"keydown",Xr(t,ia)),ee(s,"keypress",Xr(t,aa)),ee(s,"focus",function(e){return yr(t,e)}),ee(s,"blur",function(e){return br(t,e)})}(this),function(){var t;Eo||(ee(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Lo(Oo)},100))}),ee(window,"blur",function(){return Lo(br)}),Eo=!0)}(),Br(this),this.curOp.forceUpdate=!0,Ei(this,r),e.autofocus&&!m||this.hasFocus()?setTimeout(W(yr,this),20):br(this),ma)ma.hasOwnProperty(l)&&ma[l](n,e[l],ga);Mr(this),e.finishInit&&e.finishInit(this);for(var c=0;c<ka.length;++c)ka[c](n);jr(this),s&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}wa.defaults=va,wa.optionHandlers=ma;var ka=[];function _a(t,e,n,r){var i,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=Ie(t,e).state:n="prev");var a=t.options.tabSize,u=st(o,e),s=R(u.text,null,a);u.stateAfter&&(u.stateAfter=null);var l,c=u.text.match(/^\s*/)[0];if(r||/\S/.test(u.text)){if("smart"==n&&((l=o.mode.indent(i,u.text.slice(c.length),u.text))==B||l>150)){if(!r)return;n="prev"}}else l=0,n="not";"prev"==n?l=e>o.first?R(st(o,e-1).text,null,a):0:"add"==n?l=s+t.options.indentUnit:"subtract"==n?l=s-t.options.indentUnit:"number"==typeof n&&(l=s+n),l=Math.max(0,l);var f="",d=0;if(t.options.indentWithTabs)for(var h=Math.floor(l/a);h;--h)d+=a,f+="\t";if(d<l&&(f+=$(l-d)),f!=c)return lo(o,f,vt(e,0),vt(e,c.length),"+input"),u.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==e&&g.head.ch<c.length){var v=vt(e,c.length);Gi(o,p,new bi(v,v));break}}}wa.defineInitHook=function(t){return ka.push(t)};var Ma=null;function Sa(t){Ma=t}function Ca(t,e,n,r,i){var o=t.doc;t.display.shift=!1,r||(r=o.sel);var a=+new Date-200,u="paste"==i||t.state.pasteIncoming>a,s=we(e),l=null;if(u&&r.ranges.length>1)if(Ma&&Ma.text.join("\n")==e){if(r.ranges.length%Ma.text.length==0){l=[];for(var c=0;c<Ma.text.length;c++)l.push(o.splitLines(Ma.text[c]))}}else s.length==r.ranges.length&&t.options.pasteLinesPerSelection&&(l=Z(s,function(t){return[t]}));for(var f=t.curOp.updateInput,d=r.ranges.length-1;d>=0;d--){var h=r.ranges[d],p=h.from(),g=h.to();h.empty()&&(n&&n>0?p=vt(p.line,p.ch-n):t.state.overwrite&&!u?g=vt(g.line,Math.min(st(o,g.line).text.length,g.ch+X(s).length)):u&&Ma&&Ma.lineWise&&Ma.text.join("\n")==e&&(p=g=vt(p.line,0)));var v={from:p,to:g,text:l?l[d%l.length]:s,origin:i||(u?"paste":t.state.cutIncoming>a?"cut":"+input")};io(t.doc,v),ln(t,"inputRead",t,v)}e&&!u&&Da(t,e),Ar(t),t.curOp.updateInput<2&&(t.curOp.updateInput=f),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Aa(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||$r(e,function(){return Ca(e,n,0,null,"paste")}),!0}function Da(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=t.getModeAt(i.head),a=!1;if(o.electricChars){for(var u=0;u<o.electricChars.length;u++)if(e.indexOf(o.electricChars.charAt(u))>-1){a=_a(t,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(st(t.doc,i.head.line).text.slice(0,i.head.ch))&&(a=_a(t,i.head.line,"smart"));a&&ln(t,"electricInput",t,i.head.line)}}}function Ta(t){for(var e=[],n=[],r=0;r<t.doc.sel.ranges.length;r++){var i=t.doc.sel.ranges[r].head.line,o={anchor:vt(i,0),head:vt(i+1,0)};n.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:n}}function La(t,e,n,r){t.setAttribute("autocorrect",!!n),t.setAttribute("autocapitalize",!!r),t.setAttribute("spellcheck",!!e)}function Ea(){var t=T("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=T("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return s?t.style.width="1000px":t.setAttribute("wrap","off"),g&&(t.style.border="1px solid black"),La(t),e}function Oa(t,e,n,r,i){var o=e,a=n,u=st(t,e.line);function s(r){var o,a;if(null==(o=i?function(t,e,n,r){var i=Jt(e,t.doc.direction);if(!i)return qo(e,n,r);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=Kt(i,n.ch,n.sticky),a=i[o];if("ltr"==t.doc.direction&&a.level%2==0&&(r>0?a.to>n.ch:a.from<n.ch))return qo(e,n,r);var u,s=function(t,n){return Vo(e,t instanceof vt?t.ch:t,n)},l=function(n){return t.options.lineWrapping?(u=u||Nn(t,e),Jn(t,e,u,n)):{begin:0,end:e.text.length}},c=l("before"==n.sticky?s(n,-1):n.ch);if("rtl"==t.doc.direction||1==a.level){var f=1==a.level==r<0,d=s(n,f?1:-1);if(null!=d&&(f?d<=a.to&&d<=c.end:d>=a.from&&d>=c.begin))return new vt(n.line,d,f?"before":"after")}var h=function(t,e,r){for(var o=function(t,e){return e?new vt(n.line,s(t,1),"before"):new vt(n.line,t,"after")};t>=0&&t<i.length;t+=e){var a=i[t],u=e>0==(1!=a.level),l=u?r.begin:s(r.end,-1);if(a.from<=l&&l<a.to)return o(l,u);if(l=u?a.from:s(a.to,-1),r.begin<=l&&l<r.end)return o(l,u)}},p=h(o+r,r,c);if(p)return p;var g=r>0?c.end:s(c.begin,-1);return null==g||r>0&&g==e.text.length||!(p=h(r>0?0:i.length-1,r,l(g)))?null:p}(t.cm,u,e,n):qo(u,e,n))){if(r||(a=e.line+n)<t.first||a>=t.first+t.size||(e=new vt(a,e.ch,e.sticky),!(u=st(t,a))))return!1;e=$o(i,t.cm,u,e.line,n)}else e=o;return!0}if("char"==r)s();else if("column"==r)s(!0);else if("word"==r||"group"==r)for(var l=null,c="group"==r,f=t.cm&&t.cm.getHelper(e,"wordChars"),d=!0;!(n<0)||s(!d);d=!1){var h=u.text.charAt(e.ch)||"\n",p=et(h,f)?"w":c&&"\n"==h?"n":!c||/\s/.test(h)?null:"p";if(!c||d||p||(p="s"),l&&l!=p){n<0&&(n=1,s(),e.sticky="after");break}if(p&&(l=p),n>0&&!s(!d))break}var g=to(t,e,o,a,!0);return yt(o,g)&&(g.hitSide=!0),g}function Na(t,e,n,r){var i,o,a=t.doc,u=e.left;if("page"==r){var s=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(s-.5*nr(t.display),3);i=(n>0?e.bottom:e.top)+n*l}else"line"==r&&(i=n>0?e.bottom+3:e.top-3);for(;(o=Kn(t,u,i)).outside;){if(n<0?i<=0:i>=a.height){o.hitSide=!0;break}i+=5*n}return o}var Fa=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new I,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Pa(t,e){var n=On(t,e.line);if(!n||n.hidden)return null;var r=st(t.doc,e.line),i=Ln(n,r,e.line),o=Jt(r,t.doc.direction),a="left";o&&(a=Kt(o,e.ch)%2?"right":"left");var u=zn(i.map,e.ch,a);return u.offset="right"==u.collapse?u.end:u.start,u}function Wa(t,e){return e&&(t.bad=!0),t}function za(t,e,n){var r;if(e==t.display.lineDiv){if(!(r=t.display.lineDiv.childNodes[n]))return Wa(t.clipPos(vt(t.display.viewTo-1)),!0);e=null,n=0}else for(r=e;;r=r.parentNode){if(!r||r==t.display.lineDiv)return null;if(r.parentNode&&r.parentNode==t.display.lineDiv)break}for(var i=0;i<t.display.view.length;i++){var o=t.display.view[i];if(o.node==r)return Ra(o,e,n)}}function Ra(t,e,n){var r=t.text.firstChild,i=!1;if(!e||!E(r,e))return Wa(vt(dt(t.line),0),!0);if(e==r&&(i=!0,e=r.childNodes[n],n=0,!e)){var o=t.rest?X(t.rest):t.line;return Wa(vt(dt(o),o.text.length),i)}var a=3==e.nodeType?e:null,u=e;for(a||1!=e.childNodes.length||3!=e.firstChild.nodeType||(a=e.firstChild,n&&(n=a.nodeValue.length));u.parentNode!=r;)u=u.parentNode;var s=t.measure,l=s.maps;function c(e,n,r){for(var i=-1;i<(l?l.length:0);i++)for(var o=i<0?s.map:l[i],a=0;a<o.length;a+=3){var u=o[a+2];if(u==e||u==n){var c=dt(i<0?t.line:t.rest[i]),f=o[a]+r;return(r<0||u!=e)&&(f=o[a+(r?1:0)]),vt(c,f)}}}var f=c(a,u,n);if(f)return Wa(f,i);for(var d=u.nextSibling,h=a?a.nodeValue.length-n:0;d;d=d.nextSibling){if(f=c(d,d.firstChild,0))return Wa(vt(f.line,f.ch-h),i);h+=d.textContent.length}for(var p=u.previousSibling,g=n;p;p=p.previousSibling){if(f=c(p,p.firstChild,-1))return Wa(vt(f.line,f.ch+g),i);g+=p.textContent.length}}Fa.prototype.init=function(t){var e=this,n=this,r=n.cm,i=n.div=t.lineDiv;function o(t){if(!oe(r,t)){if(r.somethingSelected())Sa({lineWise:!1,text:r.getSelections()}),"cut"==t.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var e=Ta(r);Sa({lineWise:!0,text:e.text}),"cut"==t.type&&r.operation(function(){r.setSelections(e.ranges,0,j),r.replaceSelection("",null,"cut")})}if(t.clipboardData){t.clipboardData.clearData();var o=Ma.text.join("\n");if(t.clipboardData.setData("Text",o),t.clipboardData.getData("Text")==o)return void t.preventDefault()}var a=Ea(),u=a.firstChild;r.display.lineSpace.insertBefore(a,r.display.lineSpace.firstChild),u.value=Ma.text.join("\n");var s=document.activeElement;P(u),setTimeout(function(){r.display.lineSpace.removeChild(a),s.focus(),s==i&&n.showPrimarySelection()},50)}}La(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),ee(i,"paste",function(t){oe(r,t)||Aa(t,r)||u<=11&&setTimeout(Xr(r,function(){return e.updateFromDOM()}),20)}),ee(i,"compositionstart",function(t){e.composing={data:t.data,done:!1}}),ee(i,"compositionupdate",function(t){e.composing||(e.composing={data:t.data,done:!1})}),ee(i,"compositionend",function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)}),ee(i,"touchstart",function(){return n.forceCompositionEnd()}),ee(i,"input",function(){e.composing||e.readFromDOMSoon()}),ee(i,"copy",o),ee(i,"cut",o)},Fa.prototype.prepareSelection=function(){var t=fr(this.cm,!1);return t.focus=this.cm.state.focused,t},Fa.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Fa.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Fa.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,r=e.doc.sel.primary(),i=r.from(),o=r.to();if(e.display.viewTo==e.display.viewFrom||i.line>=e.display.viewTo||o.line<e.display.viewFrom)t.removeAllRanges();else{var a=za(e,t.anchorNode,t.anchorOffset),u=za(e,t.focusNode,t.focusOffset);if(!a||a.bad||!u||u.bad||0!=mt(wt(a,u),i)||0!=mt(xt(a,u),o)){var s=e.display.view,l=i.line>=e.display.viewFrom&&Pa(e,i)||{node:s[0].measure.map[2],offset:0},c=o.line<e.display.viewTo&&Pa(e,o);if(!c){var f=s[s.length-1].measure,d=f.maps?f.maps[f.maps.length-1]:f.map;c={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(l&&c){var h,p=t.rangeCount&&t.getRangeAt(0);try{h=S(l.node,l.offset,c.offset,c.node)}catch(xe){}h&&(!n&&e.state.focused?(t.collapse(l.node,l.offset),h.collapsed||(t.removeAllRanges(),t.addRange(h))):(t.removeAllRanges(),t.addRange(h)),p&&null==t.anchorNode?t.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},Fa.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},Fa.prototype.showMultipleSelections=function(t){D(this.cm.display.cursorDiv,t.cursors),D(this.cm.display.selectionDiv,t.selection)},Fa.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Fa.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return E(this.div,e)},Fa.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Fa.prototype.blur=function(){this.div.blur()},Fa.prototype.getField=function(){return this.div},Fa.prototype.supportsTouch=function(){return!0},Fa.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():$r(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},Fa.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Fa.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(v&&c&&this.cm.options.gutters.length&&function(e){for(var n=t.anchorNode;n;n=n.parentNode)if(/CodeMirror-gutter-wrapper/.test(n.className))return!0;return!1}())return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=za(e,t.anchorNode,t.anchorOffset),r=za(e,t.focusNode,t.focusOffset);n&&r&&$r(e,function(){$i(e.doc,wi(n,r),j),(n.bad||r.bad)&&(e.curOp.selectionChanged=!0)})}}},Fa.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),a=o.from(),u=o.to();if(0==a.ch&&a.line>r.firstLine()&&(a=vt(a.line-1,st(r.doc,a.line-1).length)),u.ch==st(r.doc,u.line).text.length&&u.line<r.lastLine()&&(u=vt(u.line+1,0)),a.line<i.viewFrom||u.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(t=lr(r,a.line))?(e=dt(i.view[0].line),n=i.view[0].node):(e=dt(i.view[t].line),n=i.view[t-1].node.nextSibling);var s,l,c=lr(r,u.line);if(c==i.view.length-1?(s=i.viewTo-1,l=i.lineDiv.lastChild):(s=dt(i.view[c+1].line)-1,l=i.view[c+1].node.previousSibling),!n)return!1;for(var f=r.doc.splitLines(function(t,e,n,r,i){var o="",a=!1,u=t.doc.lineSeparator(),s=!1;function l(){a&&(o+=u,s&&(o+=u),a=s=!1)}function c(t){t&&(l(),o+=t)}function f(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(n)return void c(n);var o,d=e.getAttribute("cm-marker");if(d){var h=t.findMarks(vt(r,0),vt(i+1,0),(v=+d,function(t){return t.id==v}));return void(h.length&&(o=h[0].find(0))&&c(lt(t.doc,o.from,o.to).join(u)))}if("false"==e.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;p&&l();for(var g=0;g<e.childNodes.length;g++)f(e.childNodes[g]);/^(pre|p)$/i.test(e.nodeName)&&(s=!0),p&&(a=!0)}else 3==e.nodeType&&c(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var v}for(;f(e),e!=n;)e=e.nextSibling,s=!1;return o}(r,n,l,e,s)),d=lt(r.doc,vt(e,0),vt(s,st(r.doc,s).text.length));f.length>1&&d.length>1;)if(X(f)==X(d))f.pop(),d.pop(),s--;else{if(f[0]!=d[0])break;f.shift(),d.shift(),e++}for(var h=0,p=0,g=f[0],v=d[0],m=Math.min(g.length,v.length);h<m&&g.charCodeAt(h)==v.charCodeAt(h);)++h;for(var y=X(f),b=X(d),x=Math.min(y.length-(1==f.length?h:0),b.length-(1==d.length?h:0));p<x&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==f.length&&1==d.length&&e==a.line)for(;h&&h>a.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)h--,p++;f[f.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),f[0]=f[0].slice(h).replace(/\u200b+$/,"");var w=vt(e,h),k=vt(s,d.length?X(d).length-p:0);return f.length>1||f[0]||mt(w,k)?(lo(r.doc,f,w,k,"+input"),!0):void 0},Fa.prototype.ensurePolled=function(){this.forceCompositionEnd()},Fa.prototype.reset=function(){this.forceCompositionEnd()},Fa.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Fa.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},Fa.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||$r(this.cm,function(){return Qr(t.cm)})},Fa.prototype.setUneditable=function(t){t.contentEditable="false"},Fa.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||Xr(this.cm,Ca)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Fa.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Fa.prototype.onContextMenu=function(){},Fa.prototype.resetPosition=function(){},Fa.prototype.needsContentAttribute=!0;var Ia=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new I,this.hasSelection=!1,this.composing=null};Ia.prototype.init=function(t){var e=this,n=this,r=this.cm;this.createField(t);var i=this.textarea;function o(t){if(!oe(r,t)){if(r.somethingSelected())Sa({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var e=Ta(r);Sa({lineWise:!0,text:e.text}),"cut"==t.type?r.setSelections(e.ranges,null,j):(n.prevInput="",i.value=e.text.join("\n"),P(i))}"cut"==t.type&&(r.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),g&&(i.style.width="0px"),ee(i,"input",function(){a&&u>=9&&e.hasSelection&&(e.hasSelection=null),n.poll()}),ee(i,"paste",function(t){oe(r,t)||Aa(t,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())}),ee(i,"cut",o),ee(i,"copy",o),ee(t.scroller,"paste",function(e){if(!_n(t,e)&&!oe(r,e)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=e.clipboardData,i.dispatchEvent(o)}}),ee(t.lineSpace,"selectstart",function(e){_n(t,e)||le(e)}),ee(i,"compositionstart",function(){var t=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:t,range:r.markText(t,r.getCursor("to"),{className:"CodeMirror-composing"})}}),ee(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Ia.prototype.createField=function(t){this.wrapper=Ea(),this.textarea=this.wrapper.firstChild},Ia.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,r=fr(t);if(t.options.moveInputWithCursor){var i=$n(t,n.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),a=e.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},Ia.prototype.showSelection=function(t){var e=this.cm.display;D(e.cursorDiv,t.cursors),D(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},Ia.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&P(this.textarea),a&&u>=9&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",a&&u>=9&&(this.hasSelection=null))}},Ia.prototype.getField=function(){return this.textarea},Ia.prototype.supportsTouch=function(){return!1},Ia.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!m||O()!=this.textarea))try{this.textarea.focus()}catch(xe){}},Ia.prototype.blur=function(){this.textarea.blur()},Ia.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ia.prototype.receivedFocus=function(){this.slowPoll()},Ia.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},Ia.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0,e.polling.set(20,function n(){e.poll()||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,n))})},Ia.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||ke(n)&&!r&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var i=n.value;if(i==r&&!e.somethingSelected())return!1;if(a&&u>=9&&this.hasSelection===i||y&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="\u200b"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var s=0,l=Math.min(r.length,i.length);s<l&&r.charCodeAt(s)==i.charCodeAt(s);)++s;return $r(e,function(){Ca(e,i.slice(s),r.length-s,null,t.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=i,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ia.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ia.prototype.onKeyPress=function(){a&&u>=9&&(this.hasSelection=null),this.fastPoll()},Ia.prototype.onContextMenu=function(t){var e=this,n=e.cm,r=n.display,i=e.textarea;e.contextMenuPending&&e.contextMenuPending();var o=sr(n,t),l=r.scroller.scrollTop;if(o&&!f){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&Xr(n,$i)(n.doc,wi(o),j);var c,d=i.style.cssText,h=e.wrapper.style.cssText,p=e.wrapper.offsetParent.getBoundingClientRect();if(e.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-p.top-5)+"px; left: "+(t.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",s&&(c=window.scrollY),r.input.focus(),s&&window.scrollTo(null,c),r.input.reset(),n.somethingSelected()||(i.value=e.prevInput=" "),e.contextMenuPending=m,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),a&&u>=9&&v(),_){de(t);var g=function(){re(window,"mouseup",g),setTimeout(m,20)};ee(window,"mouseup",g)}else setTimeout(m,50)}function v(){if(null!=i.selectionStart){var t=n.somethingSelected(),o="\u200b"+(t?i.value:"");i.value="\u21da",i.value=o,e.prevInput=t?"":"\u200b",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function m(){if(e.contextMenuPending==m&&(e.contextMenuPending=!1,e.wrapper.style.cssText=h,i.style.cssText=d,a&&u<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=l),null!=i.selectionStart)){(!a||a&&u<9)&&v();var t=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"\u200b"==e.prevInput?Xr(n,no)(n):t++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},Ia.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t},Ia.prototype.setUneditable=function(){},Ia.prototype.needsContentAttribute=!1,function(t){var e=t.optionHandlers;function n(n,r,i,o){t.defaults[n]=r,i&&(e[n]=o?function(t,e,n){n!=ga&&i(t,e,n)}:i)}t.defineOption=n,t.Init=ga,n("value","",function(t,e){return t.setValue(e)},!0),n("mode",null,function(t,e){t.doc.modeOption=e,Ci(t)},!0),n("indentUnit",2,Ci,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(t){Ai(t),Yn(t),Qr(t)},!0),n("lineSeparator",null,function(t,e){if(t.doc.lineSep=e,e){var n=[],r=t.doc.first;t.doc.iter(function(t){for(var i=0;;){var o=t.text.indexOf(e,i);if(-1==o)break;i=o+e.length,n.push(vt(r,o))}r++});for(var i=n.length-1;i>=0;i--)lo(t.doc,e,n[i],vt(n[i].line,n[i].ch+e.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=ga&&t.refresh()}),n("specialCharPlaceholder",Je,function(t){return t.refresh()},!0),n("electricChars",!0),n("inputStyle",m?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(t,e){return t.getInputField().spellcheck=e},!0),n("autocorrect",!1,function(t,e){return t.getInputField().autocorrect=e},!0),n("autocapitalize",!1,function(t,e){return t.getInputField().autocapitalize=e},!0),n("rtlMoveVisually",!x),n("wholeLineUpdateBefore",!0),n("theme","default",function(t){pa(t),ya(t)},!0),n("keyMap","default",function(t,e,n){var r=Uo(e),i=n!=ga&&Uo(n);i&&i.detach&&i.detach(t,r),r.attach&&r.attach(t,i||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,xa,!0),n("gutters",[],function(t){di(t.options),ya(t)},!0),n("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?or(t.display)+"px":"0",t.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(t){return zr(t)},!0),n("scrollbarStyle","native",function(t){Hr(t),zr(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),n("lineNumbers",!1,function(t){di(t.options),ya(t)},!0),n("firstLineNumber",1,ya,!0),n("lineNumberFormatter",function(t){return t},ya,!0),n("showCursorWhenSelecting",!1,cr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(t,e){"nocursor"==e&&(br(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)}),n("disableInput",!1,function(t,e){e||t.display.input.reset()},!0),n("dragDrop",!0,ba),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,cr,!0),n("singleCursorHeightPerLine",!0,cr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ai,!0),n("addModeClass",!1,Ai,!0),n("pollInterval",100),n("undoDepth",200,function(t,e){return t.doc.history.undoDepth=e}),n("historyEventDelay",1250),n("viewportMargin",10,function(t){return t.refresh()},!0),n("maxHighlightLength",1e4,Ai,!0),n("moveInputWithCursor",!0,function(t,e){e||t.display.input.resetPosition()}),n("tabindex",null,function(t,e){return t.display.input.getField().tabIndex=e||""}),n("autofocus",null),n("direction","ltr",function(t,e){return t.doc.setDirection(e)},!0),n("phrases",null)}(wa),function(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,n){var r=this.options,i=r[t];r[t]==n&&"mode"!=t||(r[t]=n,e.hasOwnProperty(t)&&Xr(this,e[t])(this,n,i),ie(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](Uo(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:Zr(function(e,n){var r=e.token?e:t.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");!function(t,e,n){for(var r=0,i=n(e);r<t.length&&n(t[r])<=i;)r++;t.splice(r,0,e)}(this.state.overlays,{mode:r,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},function(t){return t.priority}),this.state.modeGen++,Qr(this)}),removeOverlay:Zr(function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var r=e[n].modeSpec;if(r==t||"string"==typeof t&&r.name==t)return e.splice(n,1),this.state.modeGen++,void Qr(this)}}),indentLine:Zr(function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),pt(this.doc,t)&&_a(this,t,e,n)}),indentSelection:Zr(function(t){for(var e=this.doc.sel.ranges,n=-1,r=0;r<e.length;r++){var i=e[r];if(i.empty())i.head.line>n&&(_a(this,i.head.line,t,!0),n=i.head.line,r==this.doc.sel.primIndex&&Ar(this));else{var o=i.from(),a=i.to(),u=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var s=u;s<n;++s)_a(this,s,t);var l=this.doc.sel.ranges;0==o.ch&&e.length==l.length&&l[r].from().ch>0&&Gi(this.doc,r,new bi(o,l[r].to()),j)}}}),getTokenAt:function(t,e){return Ue(this,t,e)},getLineTokens:function(t,e){return Ue(this,vt(t),e,!0)},getTokenTypeAt:function(t){t=_t(this.doc,t);var e,n=Re(this,st(this.doc,t.line)),r=0,i=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){e=n[2*a+2];break}r=a+1}}var u=e?e.indexOf("overlay "):-1;return u<0?e:0==u?null:e.slice(0,u-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var r=[];if(!n.hasOwnProperty(e))return r;var i=n[e],o=this.getModeAt(t);if("string"==typeof o[e])i[o[e]]&&r.push(i[o[e]]);else if(o[e])for(var a=0;a<o[e].length;a++){var u=i[o[e][a]];u&&r.push(u)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var s=0;s<i._global.length;s++){var l=i._global[s];l.pred(o,this)&&-1==H(r,l.val)&&r.push(l.val)}return r},getStateAfter:function(t,e){var n=this.doc;return Ie(this,(t=kt(n,null==t?n.first+n.size-1:t))+1,e).state},cursorCoords:function(t,e){var n=this.doc.sel.primary();return $n(this,null==t?n.head:"object"==typeof t?_t(this.doc,t):t?n.from():n.to(),e||"page")},charCoords:function(t,e){return qn(this,_t(this.doc,t),e||"page")},coordsChar:function(t,e){return Kn(this,(t=Vn(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=Vn(this,{top:t,left:0},e||"page").top,ht(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var r,i=!1;if("number"==typeof t){var o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>o&&(t=o,i=!0),r=st(this.doc,t)}else r=t;return Gn(this,r,{top:0,left:0},e||"page",n||i).top+(i?this.doc.height-qt(r):0)},defaultTextHeight:function(){return nr(this.display)},defaultCharWidth:function(){return rr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,r,i){var o,a=this.display,u=(t=$n(this,_t(this.doc,t))).bottom,s=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),a.sizer.appendChild(e),"over"==r)u=t.top;else if("above"==r||"near"==r){var l=Math.max(a.wrapper.clientHeight,this.doc.height),c=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==r||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?u=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(u=t.bottom),s+e.offsetWidth>c&&(s=c-e.offsetWidth)}e.style.top=u+"px",e.style.left=e.style.right="","right"==i?(s=a.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(a.sizer.clientWidth-e.offsetWidth)/2),e.style.left=s+"px"),n&&(null!=(o=Sr(this,{left:s,top:u,right:s+e.offsetWidth,bottom:u+e.offsetHeight})).scrollTop&&Er(this,o.scrollTop),null!=o.scrollLeft&&Nr(this,o.scrollLeft))},triggerOnKeyDown:Zr(ia),triggerOnKeyPress:Zr(aa),triggerOnKeyUp:oa,triggerOnMouseDown:Zr(ca),execCommand:function(t){if(Xo.hasOwnProperty(t))return Xo[t].call(null,this)},triggerElectric:Zr(function(t){Da(this,t)}),findPosH:function(t,e,n,r){var i=1;e<0&&(i=-1,e=-e);for(var o=_t(this.doc,t),a=0;a<e&&!(o=Oa(this.doc,o,i,n,r)).hitSide;++a);return o},moveH:Zr(function(t,e){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Oa(n.doc,r.head,t,e,n.options.rtlMoveVisually):t<0?r.from():r.to()},G)}),deleteH:Zr(function(t,e){var n=this.doc;this.doc.sel.somethingSelected()?n.replaceSelection("",null,"+delete"):Go(this,function(r){var i=Oa(n,r.head,t,e,!1);return t<0?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(t,e,n,r){var i=1,o=r;e<0&&(i=-1,e=-e);for(var a=_t(this.doc,t),u=0;u<e;++u){var s=$n(this,a,"div");if(null==o?o=s.left:s.left=o,(a=Na(this,s,i,n)).hitSide)break}return a},moveV:Zr(function(t,e){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return t<0?a.from():a.to();var u=$n(n,a.head,"div");null!=a.goalColumn&&(u.left=a.goalColumn),i.push(u.left);var s=Na(n,u,t,e);return"page"==e&&a==r.sel.primary()&&Cr(n,qn(n,s,"div").top-u.top),s},G),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),findWordAt:function(t){var e=st(this.doc,t.line).text,n=t.ch,r=t.ch;if(e){var i=this.getHelper(t,"wordChars");"before"!=t.sticky&&r!=e.length||!n?++r:--n;for(var o=e.charAt(n),a=et(o,i)?function(t){return et(t,i)}:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!et(t)};n>0&&a(e.charAt(n-1));)--n;for(;r<e.length&&a(e.charAt(r));)++r}return new bi(vt(t.line,n),vt(t.line,r))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?N(this.display.cursorDiv,"CodeMirror-overwrite"):C(this.display.cursorDiv,"CodeMirror-overwrite"),ie(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==O()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Zr(function(t,e){Dr(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-An(this)-this.display.barHeight,width:t.scrollWidth-An(this)-this.display.barWidth,clientHeight:Tn(this),clientWidth:Dn(this)}},scrollIntoView:Zr(function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:vt(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?function(t,e){Tr(t),t.curOp.scrollToPos=e}(this,t):Lr(this,t.from,t.to,t.margin)}),setSize:Zr(function(t,e){var n=this,r=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=r(t)),null!=e&&(this.display.wrapper.style.height=r(e)),this.options.lineWrapping&&Hn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){Jr(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,ie(this,"refresh",this)}),operation:function(t){return $r(this,t)},startOperation:function(){return Br(this)},endOperation:function(){return jr(this)},refresh:Zr(function(){var t=this.display.cachedTextHeight;Qr(this),this.curOp.forceUpdate=!0,Yn(this),Dr(this,this.doc.scrollLeft,this.doc.scrollTop),li(this),(null==t||Math.abs(t-nr(this.display))>.5)&&ur(this),ie(this,"refresh",this)}),swapDoc:Zr(function(t){var e=this.doc;return e.cm=null,Ei(this,t),Yn(this),this.display.input.reset(),Dr(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,e),e}),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},se(t),t.registerHelper=function(e,r,i){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][r]=i},t.registerGlobalHelper=function(e,r,i,o){t.registerHelper(e,r,o),n[e]._global.push({pred:i,val:o})}}(wa);var Ha="iter insert remove copy getEditor constructor".split(" ");for(var Ya in Co.prototype)Co.prototype.hasOwnProperty(Ya)&&H(Ha,Ya)<0&&(wa.prototype[Ya]=function(t){return function(){return t.apply(this.doc,arguments)}}(Co.prototype[Ya]));return se(Co),wa.inputStyles={textarea:Ia,contenteditable:Fa},wa.defineMode=function(t){wa.defaults.mode||"null"==t||(wa.defaults.mode=t),(function(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),Se[t]=e}).apply(this,arguments)},wa.defineMIME=function(t,e){Ce[t]=e},wa.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),wa.defineMIME("text/plain","null"),wa.defineExtension=function(t,e){wa.prototype[t]=e},wa.defineDocExtension=function(t,e){Co.prototype[t]=e},wa.fromTextArea=function(t,e){if((e=e?z(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var n=O();e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function r(){t.value=u.getValue()}var i;if(t.form&&(ee(t.form,"submit",r),!e.leaveSubmitMethodAlone)){var o=t.form;i=o.submit;try{var a=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=a}}catch(xe){}}e.finishInit=function(e){e.save=r,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,r(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(re(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=i))}},t.style.display="none";var u=wa(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return u},function(t){t.off=re,t.on=ee,t.wheelEventPixels=vi,t.Doc=Co,t.splitLines=we,t.countColumn=R,t.findColumn=V,t.isWordChar=tt,t.Pass=B,t.signal=ie,t.Line=qe,t.changeEnd=ki,t.scrollbarModel=Ir,t.Pos=vt,t.cmpPos=mt,t.modes=Se,t.mimeModes=Ce,t.resolveMode=Ae,t.getMode=De,t.modeExtensions=Te,t.extendMode=Le,t.copyState=Ee,t.startState=Ne,t.innerMode=Oe,t.commands=Xo,t.keyMap=zo,t.keyName=jo,t.isModifierKey=Yo,t.lookupKey=Ho,t.normalizeKeyMap=Io,t.StringStream=Fe,t.SharedTextMarker=ko,t.TextMarker=xo,t.LineWidget=mo,t.e_preventDefault=le,t.e_stopPropagation=ce,t.e_stop=de,t.addClass=N,t.contains=E,t.rmClass=C,t.keyNames=No}(wa),wa.version="5.45.0",wa}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){function e(t){t.state.placeholder&&(t.state.placeholder.parentNode.removeChild(t.state.placeholder),t.state.placeholder=null)}function n(t){e(t);var n=t.state.placeholder=document.createElement("pre");n.style.cssText="height: 0; overflow: visible",n.style.direction=t.getOption("direction"),n.className="CodeMirror-placeholder";var r=t.getOption("placeholder");"string"==typeof r&&(r=document.createTextNode(r)),n.appendChild(r),t.display.lineSpace.insertBefore(n,t.display.lineSpace.firstChild)}function r(t){o(t)&&n(t)}function i(t){var r=t.getWrapperElement(),i=o(t);r.className=r.className.replace(" CodeMirror-empty","")+(i?" CodeMirror-empty":""),i?n(t):e(t)}function o(t){return 1===t.lineCount()&&""===t.getLine(0)}t.defineOption("placeholder","",function(n,o,a){var u=a&&a!=t.Init;if(o&&!u)n.on("blur",r),n.on("change",i),n.on("swapDoc",i),i(n);else if(!o&&u){n.off("blur",r),n.off("change",i),n.off("swapDoc",i),e(n);var s=n.getWrapperElement();s.className=s.className.replace(" CodeMirror-empty","")}o&&!n.hasFocus()&&r(n)})}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("../xml/xml"),require("../meta")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../meta"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("markdown",function(e,n){var r=t.getMode(e,"text/html"),i="null"==r.name;void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1),void 0===n.emoji&&(n.emoji=!1),void 0===n.fencedCodeBlockHighlighting&&(n.fencedCodeBlockHighlighting=!0),void 0===n.xml&&(n.xml=!0),void 0===n.tokenTypeOverrides&&(n.tokenTypeOverrides={});var o={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var a in o)o.hasOwnProperty(a)&&n.tokenTypeOverrides[a]&&(o[a]=n.tokenTypeOverrides[a]);var u=/^([*\-_])(?:\s*\1){2,}\s*$/,s=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,l=/^\[(x| )\](?=\s)/i,c=n.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,f=/^ *(?:\={1,}|-{1,})\s*$/,d=/^[^#!\[\]*_\\<>` "'(~:]+/,h=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,p=/^\s*\[[^\]]+?\]:.*$/,g=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function v(t,e,n){return e.f=e.inline=n,n(t,e)}function m(t,e,n){return e.f=e.block=n,n(t,e)}function y(e){if(e.linkTitle=!1,e.linkHref=!1,e.linkText=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,e.f==x){var n=i;if(!n){var o=t.innerMode(r,e.htmlState);n="xml"==o.mode.name&&null===o.state.tagStart&&!o.state.context&&o.state.tokenize.isInText}n&&(e.f=M,e.block=b,e.htmlState=null)}return e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine={stream:null},null}function b(r,i){var a,d=r.column()===i.indentation,g=!(a=i.prevLine.stream)||!/\S/.test(a.string),m=i.indentedCode,y=i.prevLine.hr,b=!1!==i.list,x=(i.listStack[i.listStack.length-1]||0)+3;i.indentedCode=!1;var _=i.indentation;if(null===i.indentationDiff&&(i.indentationDiff=i.indentation,b)){for(i.em=!1,i.strong=!1,i.code=!1,i.strikethrough=!1,i.list=null;_<i.listStack[i.listStack.length-1];)i.listStack.pop(),i.listStack.length?i.indentation=i.listStack[i.listStack.length-1]:i.list=!1;!1!==i.list&&(i.indentationDiff=_-i.listStack[i.listStack.length-1])}var M=!(g||y||i.prevLine.header||b&&m||i.prevLine.fencedCodeEnd),S=(!1===i.list||y||g)&&i.indentation<=x&&r.match(u),C=null;if(i.indentationDiff>=4&&(m||i.prevLine.fencedCodeEnd||i.prevLine.header||g))return r.skipToEnd(),i.indentedCode=!0,o.code;if(r.eatSpace())return null;if(d&&i.indentation<=x&&(C=r.match(c))&&C[1].length<=6)return i.quote=0,i.header=C[1].length,i.thisLine.header=!0,n.highlightFormatting&&(i.formatting="header"),i.f=i.inline,k(i);if(i.indentation<=x&&r.eat(">"))return i.quote=d?1:i.quote+1,n.highlightFormatting&&(i.formatting="quote"),r.eatSpace(),k(i);if(!S&&!i.setext&&d&&i.indentation<=x&&(C=r.match(s))){var A=C[1]?"ol":"ul";return i.indentation=_+r.current().length,i.list=!0,i.quote=0,i.listStack.push(i.indentation),n.taskLists&&r.match(l,!1)&&(i.taskList=!0),i.f=i.inline,n.highlightFormatting&&(i.formatting=["list","list-"+A]),k(i)}return d&&i.indentation<=x&&(C=r.match(h,!0))?(i.quote=0,i.fencedEndRE=new RegExp(C[1]+"+ *$"),i.localMode=n.fencedCodeBlockHighlighting&&function(n){if(t.findModeByName){var r=t.findModeByName(n);r&&(n=r.mime||r.mimes[0])}var i=t.getMode(e,n);return"null"==i.name?null:i}(C[2]),i.localMode&&(i.localState=t.startState(i.localMode)),i.f=i.block=w,n.highlightFormatting&&(i.formatting="code-block"),i.code=-1,k(i)):i.setext||!(M&&b||i.quote||!1!==i.list||i.code||S||p.test(r.string))&&(C=r.lookAhead(1))&&(C=C.match(f))?(i.setext?(i.header=i.setext,i.setext=0,r.skipToEnd(),n.highlightFormatting&&(i.formatting="header")):(i.header="="==C[0].charAt(0)?1:2,i.setext=i.header),i.thisLine.header=!0,i.f=i.inline,k(i)):S?(r.skipToEnd(),i.hr=!0,i.thisLine.hr=!0,o.hr):"["===r.peek()?v(r,i,D):v(r,i,i.inline)}function x(e,n){var o=r.token(e,n.htmlState);if(!i){var a=t.innerMode(r,n.htmlState);("xml"==a.mode.name&&null===a.state.tagStart&&!a.state.context&&a.state.tokenize.isInText||n.md_inside&&e.current().indexOf(">")>-1)&&(n.f=M,n.block=b,n.htmlState=null)}return o}function w(t,e){var r,i=e.listStack[e.listStack.length-1]||0,a=e.indentation<i;return e.fencedEndRE&&e.indentation<=i+3&&(a||t.match(e.fencedEndRE))?(n.highlightFormatting&&(e.formatting="code-block"),a||(r=k(e)),e.localMode=e.localState=null,e.block=b,e.f=M,e.fencedEndRE=null,e.code=0,e.thisLine.fencedCodeEnd=!0,a?m(t,e,e.block):r):e.localMode?e.localMode.token(t,e.localState):(t.skipToEnd(),o.code)}function k(t){var e=[];if(t.formatting){e.push(o.formatting),"string"==typeof t.formatting&&(t.formatting=[t.formatting]);for(var r=0;r<t.formatting.length;r++)e.push(o.formatting+"-"+t.formatting[r]),"header"===t.formatting[r]&&e.push(o.formatting+"-"+t.formatting[r]+"-"+t.header),"quote"===t.formatting[r]&&e.push(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=t.quote?o.formatting+"-"+t.formatting[r]+"-"+t.quote:"error")}if(t.taskOpen)return e.push("meta"),e.length?e.join(" "):null;if(t.taskClosed)return e.push("property"),e.length?e.join(" "):null;if(t.linkHref?e.push(o.linkHref,"url"):(t.strong&&e.push(o.strong),t.em&&e.push(o.em),t.strikethrough&&e.push(o.strikethrough),t.emoji&&e.push(o.emoji),t.linkText&&e.push(o.linkText),t.code&&e.push(o.code),t.image&&e.push(o.image),t.imageAltText&&e.push(o.imageAltText,"link"),t.imageMarker&&e.push(o.imageMarker)),t.header&&e.push(o.header,o.header+"-"+t.header),t.quote&&(e.push(o.quote),e.push(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=t.quote?o.quote+"-"+t.quote:o.quote+"-"+n.maxBlockquoteDepth)),!1!==t.list){var i=(t.listStack.length-1)%3;e.push(i?1===i?o.list2:o.list3:o.list1)}return t.trailingSpaceNewLine?e.push("trailing-space-new-line"):t.trailingSpace&&e.push("trailing-space-"+(t.trailingSpace%2?"a":"b")),e.length?e.join(" "):null}function _(t,e){if(t.match(d,!0))return k(e)}function M(e,i){var a=i.text(e,i);if(void 0!==a)return a;if(i.list)return i.list=null,k(i);if(i.taskList)return" "===e.match(l,!0)[1]?i.taskOpen=!0:i.taskClosed=!0,n.highlightFormatting&&(i.formatting="task"),i.taskList=!1,k(i);if(i.taskOpen=!1,i.taskClosed=!1,i.header&&e.match(/^#+$/,!0))return n.highlightFormatting&&(i.formatting="header"),k(i);var u=e.next();if(i.linkTitle){i.linkTitle=!1;var s=u;if("("===u&&(s=")"),s=(s+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"),e.match(new RegExp("^\\s*(?:[^"+s+"\\\\]+|\\\\\\\\|\\\\.)"+s),!0))return o.linkHref}if("`"===u){var c=i.formatting;n.highlightFormatting&&(i.formatting="code"),e.eatWhile("`");var f=e.current().length;if(0!=i.code||i.quote&&1!=f){if(f==i.code){var d=k(i);return i.code=0,d}return i.formatting=c,k(i)}return i.code=f,k(i)}if(i.code)return k(i);if("\\"===u&&(e.next(),n.highlightFormatting)){var h=k(i),p=o.formatting+"-escape";return h?h+" "+p:p}if("!"===u&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return i.imageMarker=!0,i.image=!0,n.highlightFormatting&&(i.formatting="image"),k(i);if("["===u&&i.imageMarker&&e.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return i.imageMarker=!1,i.imageAltText=!0,n.highlightFormatting&&(i.formatting="image"),k(i);if("]"===u&&i.imageAltText)return n.highlightFormatting&&(i.formatting="image"),h=k(i),i.imageAltText=!1,i.image=!1,i.inline=i.f=C,h;if("["===u&&!i.image)return i.linkText&&e.match(/^.*?\]/)?k(i):(i.linkText=!0,n.highlightFormatting&&(i.formatting="link"),k(i));if("]"===u&&i.linkText)return n.highlightFormatting&&(i.formatting="link"),h=k(i),i.linkText=!1,i.inline=i.f=e.match(/\(.*?\)| ?\[.*?\]/,!1)?C:M,h;if("<"===u&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return i.f=i.inline=S,n.highlightFormatting&&(i.formatting="link"),(h=k(i))?h+=" ":h="",h+o.linkInline;if("<"===u&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return i.f=i.inline=S,n.highlightFormatting&&(i.formatting="link"),(h=k(i))?h+=" ":h="",h+o.linkEmail;if(n.xml&&"<"===u&&e.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var v=e.string.indexOf(">",e.pos);if(-1!=v){var y=e.string.substring(e.start,v);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(y)&&(i.md_inside=!0)}return e.backUp(1),i.htmlState=t.startState(r),m(e,i,x)}if(n.xml&&"<"===u&&e.match(/^\/\w*?>/))return i.md_inside=!1,"tag";if("*"===u||"_"===u){for(var b=1,w=1==e.pos?" ":e.string.charAt(e.pos-2);b<3&&e.eat(u);)b++;var _=e.peek()||" ",A=!/\s/.test(_)&&(!g.test(_)||/\s/.test(w)||g.test(w)),D=!/\s/.test(w)&&(!g.test(w)||/\s/.test(_)||g.test(_)),T=null,L=null;if(b%2&&(i.em||!A||"*"!==u&&D&&!g.test(w)?i.em!=u||!D||"*"!==u&&A&&!g.test(_)||(T=!1):T=!0),b>1&&(i.strong||!A||"*"!==u&&D&&!g.test(w)?i.strong!=u||!D||"*"!==u&&A&&!g.test(_)||(L=!1):L=!0),null!=L||null!=T)return n.highlightFormatting&&(i.formatting=null==T?"strong":null==L?"em":"strong em"),!0===T&&(i.em=u),!0===L&&(i.strong=u),d=k(i),!1===T&&(i.em=!1),!1===L&&(i.strong=!1),d}else if(" "===u&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return k(i);e.backUp(1)}if(n.strikethrough)if("~"===u&&e.eatWhile(u)){if(i.strikethrough)return n.highlightFormatting&&(i.formatting="strikethrough"),d=k(i),i.strikethrough=!1,d;if(e.match(/^[^\s]/,!1))return i.strikethrough=!0,n.highlightFormatting&&(i.formatting="strikethrough"),k(i)}else if(" "===u&&e.match(/^~~/,!0)){if(" "===e.peek())return k(i);e.backUp(2)}if(n.emoji&&":"===u&&e.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){i.emoji=!0,n.highlightFormatting&&(i.formatting="emoji");var E=k(i);return i.emoji=!1,E}return" "===u&&(e.match(/^ +$/,!1)?i.trailingSpace++:i.trailingSpace&&(i.trailingSpaceNewLine=!0)),k(i)}function S(t,e){if(">"===t.next()){e.f=e.inline=M,n.highlightFormatting&&(e.formatting="link");var r=k(e);return r?r+=" ":r="",r+o.linkInline}return t.match(/^[^>]+/,!0),o.linkInline}function C(t,e){if(t.eatSpace())return null;var r,i=t.next();return"("===i||"["===i?(e.f=e.inline=(r="("===i?")":"]",function(t,e){if(t.next()===r){e.f=e.inline=M,n.highlightFormatting&&(e.formatting="link-string");var i=k(e);return e.linkHref=!1,i}return t.match(A[r]),e.linkHref=!0,k(e)}),n.highlightFormatting&&(e.formatting="link-string"),e.linkHref=!0,k(e)):"error"}var A={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function D(t,e){return t.match(/^([^\]\\]|\\.)*\]:/,!1)?(e.f=T,t.next(),n.highlightFormatting&&(e.formatting="link"),e.linkText=!0,k(e)):v(t,e,M)}function T(t,e){if(t.match(/^\]:/,!0)){e.f=e.inline=L,n.highlightFormatting&&(e.formatting="link");var r=k(e);return e.linkText=!1,r}return t.match(/^([^\]\\]|\\.)+/,!0),o.linkText}function L(t,e){return t.eatSpace()?null:(t.match(/^[^\s]+/,!0),void 0===t.peek()?e.linkTitle=!0:t.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),e.f=e.inline=M,o.linkHref+" url")}var E={startState:function(){return{f:b,prevLine:{stream:null},thisLine:{stream:null},block:b,htmlState:null,indentation:0,inline:M,text:_,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.thisLine,block:e.block,htmlState:e.htmlState&&t.copyState(r,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?t.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkText:e.linkText,linkTitle:e.linkTitle,linkHref:e.linkHref,code:e.code,em:e.em,strong:e.strong,strikethrough:e.strikethrough,emoji:e.emoji,header:e.header,setext:e.setext,hr:e.hr,taskList:e.taskList,list:e.list,listStack:e.listStack.slice(0),quote:e.quote,indentedCode:e.indentedCode,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside,fencedEndRE:e.fencedEndRE}},token:function(t,e){if(e.formatting=!1,t!=e.thisLine.stream){if(e.header=0,e.hr=!1,t.match(/^\s*$/,!0))return y(e),null;if(e.prevLine=e.thisLine,e.thisLine={stream:t},e.taskList=!1,e.trailingSpace=0,e.trailingSpaceNewLine=!1,!e.localState&&(e.f=e.block,e.f!=x)){var n=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(e.indentation=n,e.indentationDiff=null,n>0)return null}}return e.f(t,e)},innerMode:function(t){return t.block==x?{state:t.htmlState,mode:r}:t.localState?{state:t.localState,mode:t.localMode}:{state:t,mode:E}},indent:function(e,n,i){return e.block==x&&r.indent?r.indent(e.htmlState,n,i):e.localState&&e.localMode.indent?e.localMode.indent(e.localState,n,i):t.Pass},blankLine:y,getType:k,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return E},"xml"),t.defineMIME("text/markdown","markdown"),t.defineMIME("text/x-markdown","markdown")}),(function(){function t(t){"use strict";var e={omitExtraWLInCodeBlocks:{default:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{default:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{default:!1,describe:"Specify a prefix to generated header ids",type:"string"},headerLevelStart:{default:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{default:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{default:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},literalMidWordUnderscores:{default:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},strikethrough:{default:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{default:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{default:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{default:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{default:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{default:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"}};if(!1===t)return JSON.parse(JSON.stringify(e));var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r].default);return n}var e={},n={},r={},i=t(!0),o={github:{omitExtraWLInCodeBlocks:!0,prefixHeaderId:"user-content-",simplifiedAutoLink:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0},vanilla:t(!0)};function a(t,n){"use strict";var r=n?"Error in "+n+" extension->":"Error in unnamed extension",i={valid:!0,error:""};e.helper.isArray(t)||(t=[t]);for(var o=0;o<t.length;++o){var a=r+" sub-extension "+o+": ",u=t[o];if("object"!=typeof u)return i.valid=!1,i.error=a+"must be an object, but "+typeof u+" given",i;if(!e.helper.isString(u.type))return i.valid=!1,i.error=a+'property "type" must be a string, but '+typeof u.type+" given",i;var s=u.type=u.type.toLowerCase();if("language"===s&&(s=u.type="lang"),"html"===s&&(s=u.type="output"),"lang"!==s&&"output"!==s&&"listener"!==s)return i.valid=!1,i.error=a+"type "+s+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',i;if("listener"===s){if(e.helper.isUndefined(u.listeners))return i.valid=!1,i.error=a+'. Extensions of type "listener" must have a property called "listeners"',i}else if(e.helper.isUndefined(u.filter)&&e.helper.isUndefined(u.regex))return i.valid=!1,i.error=a+s+' extensions must define either a "regex" property or a "filter" method',i;if(u.listeners){if("object"!=typeof u.listeners)return i.valid=!1,i.error=a+'"listeners" property must be an object but '+typeof u.listeners+" given",i;for(var l in u.listeners)if(u.listeners.hasOwnProperty(l)&&"function"!=typeof u.listeners[l])return i.valid=!1,i.error=a+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+l+" must be a function but "+typeof u.listeners[l]+" given",i}if(u.filter){if("function"!=typeof u.filter)return i.valid=!1,i.error=a+'"filter" must be a function, but '+typeof u.filter+" given",i}else if(u.regex){if(e.helper.isString(u.regex)&&(u.regex=new RegExp(u.regex,"g")),!u.regex instanceof RegExp)return i.valid=!1,i.error=a+'"regex" property must either be a string or a RegExp object, but '+typeof u.regex+" given",i;if(e.helper.isUndefined(u.replace))return i.valid=!1,i.error=a+'"regex" extensions must implement a replace string or function',i}}return i}function u(t,e){"use strict";return"~E"+e.charCodeAt(0)+"E"}e.helper={},e.extensions={},e.setOption=function(t,e){"use strict";return i[t]=e,this},e.getOption=function(t){"use strict";return i[t]},e.getOptions=function(){"use strict";return i},e.resetOptions=function(){"use strict";i=t(!0)},e.setFlavor=function(t){"use strict";if(o.hasOwnProperty(t)){var e=o[t];for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n])}},e.getDefaultOptions=function(e){"use strict";return t(e)},e.subParser=function(t,r){"use strict";if(e.helper.isString(t)){if(void 0===r){if(n.hasOwnProperty(t))return n[t];throw Error("SubParser named "+t+" not registered!")}n[t]=r}},e.extension=function(t,n){"use strict";if(!e.helper.isString(t))throw Error("Extension 'name' must be a string");if(t=e.helper.stdExtName(t),e.helper.isUndefined(n)){if(!r.hasOwnProperty(t))throw Error("Extension named "+t+" is not registered!");return r[t]}"function"==typeof n&&(n=n()),e.helper.isArray(n)||(n=[n]);var i=a(n,t);if(!i.valid)throw Error(i.error);r[t]=n},e.getAllExtensions=function(){"use strict";return r},e.removeExtension=function(t){"use strict";delete r[t]},e.resetExtensions=function(){"use strict";r={}},e.validateExtension=function(t){"use strict";var e=a(t,null);return!!e.valid||(console.warn(e.error),!1)},e.hasOwnProperty("helper")||(e.helper={}),e.helper.isString=function(t){"use strict";return"string"==typeof t||t instanceof String},e.helper.forEach=function(t,e){"use strict";if("function"==typeof t.forEach)t.forEach(e);else for(var n=0;n<t.length;n++)e(t[n],n,t)},e.helper.isArray=function(t){"use strict";return t.constructor===Array},e.helper.isUndefined=function(t){"use strict";return void 0===t},e.helper.stdExtName=function(t){"use strict";return t.replace(/[_-]||\s/g,"").toLowerCase()},e.helper.escapeCharactersCallback=u,e.helper.escapeCharacters=function(t,e,n){"use strict";var r="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return t.replace(i,u)},e.helper.matchRecursiveRegExp=function(t,e,n,r){"use strict";var i,o,a,u,s,l=r||"",c=l.indexOf("g")>-1,f=new RegExp(e+"|"+n,l),d=new RegExp(e,l.replace(/g/g,"")),h=[];do{for(i=0;a=f.exec(t);)if(d.test(a[0]))i++||(u=a[0],o=f.lastIndex);else if(i&&!--i){s=a[0];var p=t.slice(o,a.index);if(h.push([u+p+s,p]),!c)return h}}while(i&&(f.lastIndex=o));return h},e.helper.isUndefined(console)&&(console={warn:function(t){"use strict";alert(t)},log:function(t){"use strict";alert(t)},error:function(t){"use strict";throw t}}),e.Converter=function(t){"use strict";var n={},u=[],s=[],l={};function c(t,n){if(n=n||null,e.helper.isString(t)){if(n=t=e.helper.stdExtName(t),e.extensions[t])return console.warn("DEPRECATION WARNING: "+t+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(t,n){"function"==typeof t&&(t=t(new e.Converter)),e.helper.isArray(t)||(t=[t]);var r=a(t,n);if(!r.valid)throw Error(r.error);for(var i=0;i<t.length;++i)switch(t[i].type){case"lang":u.push(t[i]);break;case"output":s.push(t[i]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(e.extensions[t],t);if(e.helper.isUndefined(r[t]))throw Error('Extension "'+t+'" could not be loaded. It was either not found or is not a valid extension.');t=r[t]}"function"==typeof t&&(t=t()),e.helper.isArray(t)||(t=[t]);var i=a(t,n);if(!i.valid)throw Error(i.error);for(var o=0;o<t.length;++o){switch(t[o].type){case"lang":u.push(t[o]);break;case"output":s.push(t[o])}if(t[o].hasOwnProperty(l))for(var c in t[o].listeners)t[o].listeners.hasOwnProperty(c)&&f(c,t[o].listeners[c])}}function f(t,n){if(!e.helper.isString(t))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof t+" given");if("function"!=typeof n)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof n+" given");l.hasOwnProperty(t)||(l[t]=[]),l[t].push(n)}!function(){for(var r in t=t||{},i)i.hasOwnProperty(r)&&(n[r]=i[r]);if("object"!=typeof t)throw Error("Converter expects the passed parameter to be an object, but "+typeof t+" was passed instead.");for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);n.extensions&&e.helper.forEach(n.extensions,c)}(),this._dispatch=function(t,e,n){if(l.hasOwnProperty(t))for(var r=0;r<l[t].length;++r){var i=l[t][r](t,e,this,n);i&&void 0!==i&&(e=i)}return e},this.listen=function(t,e){return f(t,e),this},this.makeHtml=function(t){if(!t)return t;var r={gHtmlBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:u,outputModifiers:s,converter:this};return t="\n\n"+(t=(t=(t=(t=t.replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"))+"\n\n",t=e.subParser("detab")(t,n,r),t=e.subParser("stripBlankLines")(t,n,r),e.helper.forEach(u,function(i){t=e.subParser("runExtension")(i,t,n,r)}),t=e.subParser("githubCodeBlocks")(t,n,r),t=e.subParser("hashHTMLBlocks")(t,n,r),t=e.subParser("hashHTMLSpans")(t,n,r),t=e.subParser("stripLinkDefinitions")(t,n,r),t=e.subParser("blockGamut")(t,n,r),t=e.subParser("unhashHTMLSpans")(t,n,r),t=(t=(t=e.subParser("unescapeSpecialChars")(t,n,r)).replace(/~D/g,"$$")).replace(/~T/g,"~"),e.helper.forEach(s,function(i){t=e.subParser("runExtension")(i,t,n,r)}),t},this.setOption=function(t,e){n[t]=e},this.getOption=function(t){return n[t]},this.getOptions=function(){return n},this.addExtension=function(t,e){c(t,e=e||null)},this.useExtension=function(t){c(t)},this.setFlavor=function(t){if(o.hasOwnProperty(t)){var e=o[t];for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r])}},this.removeExtension=function(t){e.helper.isArray(t)||(t=[t]);for(var n=0;n<t.length;++n){for(var r=t[n],i=0;i<u.length;++i)u[i]===r&&u[i].splice(i,1);for(;0<s.length;++i)s[0]===r&&s[0].splice(i,1)}},this.getAllExtensions=function(){return{language:u,output:s}}},e.subParser("anchors",function(t,n,r){"use strict";var i=function(t,n,i,o,a,u,s,l){e.helper.isUndefined(l)&&(l=""),t=n;var c=i,f=o.toLowerCase(),d=a,h=l;if(!d)if(f||(f=c.toLowerCase().replace(/ ?\n/g," ")),d="#"+f,e.helper.isUndefined(r.gUrls[f])){if(!(t.search(/\(\s*\)$/m)>-1))return t;d=""}else d=r.gUrls[f],e.helper.isUndefined(r.gTitles[f])||(h=r.gTitles[f]);var p='<a href="'+(d=e.helper.escapeCharacters(d,"*_",!1))+'"';return""!==h&&null!==h&&(h=h.replace(/"/g,"&quot;"),p+=' title="'+(h=e.helper.escapeCharacters(h,"*_",!1))+'"'),p+">"+c+"</a>"};return t=(t=(t=(t=r.converter._dispatch("anchors.before",t,n)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)][ ]?(?:\n[ ]*)?\[(.*?)])()()()()/g,i)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,i)).replace(/(\[([^\[\]]+)])()()()()()/g,i),r.converter._dispatch("anchors.after",t,n)}),e.subParser("autoLinks",function(t,n,r){"use strict";function i(t,n){var r=e.subParser("unescapeSpecialChars")(n);return e.subParser("encodeEmailAddress")(r)}return t=(t=(t=r.converter._dispatch("autoLinks.before",t,n)).replace(/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)>/gi,'<a href="$1">$1</a>')).replace(/<(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,i),n.simplifiedAutoLink&&(t=(t=t.replace(/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)(?=\s|$)(?!["<>])/gi,'<a href="$1">$1</a>')).replace(/(?:^|[ \n\t])([A-Za-z0-9!#$%&'*+-\/=?^_`\{|}~\.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?:$|[ \n\t])/gi,i)),r.converter._dispatch("autoLinks.after",t,n)}),e.subParser("blockGamut",function(t,n,r){"use strict";t=r.converter._dispatch("blockGamut.before",t,n),t=e.subParser("blockQuotes")(t,n,r),t=e.subParser("headers")(t,n,r);var i=e.subParser("hashBlock")("<hr />",n,r);return t=(t=(t=t.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,i)).replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,i)).replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,i),t=e.subParser("lists")(t,n,r),t=e.subParser("codeBlocks")(t,n,r),t=e.subParser("tables")(t,n,r),t=e.subParser("hashHTMLBlocks")(t,n,r),t=e.subParser("paragraphs")(t,n,r),r.converter._dispatch("blockGamut.after",t,n)}),e.subParser("blockQuotes",function(t,n,r){"use strict";return t=(t=r.converter._dispatch("blockQuotes.before",t,n)).replace(/((^[ \t]{0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(t,i){var o=i;return o=(o=(o=o.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""),o=e.subParser("githubCodeBlocks")(o,n,r),o=(o=(o=e.subParser("blockGamut")(o,n,r)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(t,e){return e.replace(/^  /gm,"~0").replace(/~0/g,"")}),e.subParser("hashBlock")("<blockquote>\n"+o+"\n</blockquote>",n,r)}),r.converter._dispatch("blockQuotes.after",t,n)}),e.subParser("codeBlocks",function(t,n,r){"use strict";return t=r.converter._dispatch("codeBlocks.before",t,n),t=(t=(t+="~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(t,i,o){var a=i,u=o,s="\n";return a=e.subParser("outdent")(a),a=e.subParser("encodeCode")(a),a=(a=(a=e.subParser("detab")(a)).replace(/^\n+/g,"")).replace(/\n+$/g,""),n.omitExtraWLInCodeBlocks&&(s=""),a="<pre><code>"+a+s+"</code></pre>",e.subParser("hashBlock")(a,n,r)+u})).replace(/~0/,""),r.converter._dispatch("codeBlocks.after",t,n)}),e.subParser("codeSpans",function(t,n,r){"use strict";return t=(t=r.converter._dispatch("codeSpans.before",t,n)).replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(t,n,r,i){var o=i;return o=(o=o.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),n+"<code>"+(o=e.subParser("encodeCode")(o))+"</code>"}),r.converter._dispatch("codeSpans.after",t,n)}),e.subParser("detab",function(t){"use strict";return(t=(t=(t=(t=t.replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"~A~B")).replace(/~B(.+?)~A/g,function(t,e){for(var n=e,r=4-n.length%4,i=0;i<r;i++)n+=" ";return n})).replace(/~A/g,"    ")).replace(/~B/g,"")}),e.subParser("encodeAmpsAndAngles",function(t){"use strict";return(t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?\$!])/gi,"&lt;")}),e.subParser("encodeBackslashEscapes",function(t){"use strict";return(t=t.replace(/\\(\\)/g,e.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+-.!])/g,e.helper.escapeCharactersCallback)}),e.subParser("encodeCode",function(t){"use strict";return t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),e.helper.escapeCharacters(t,"*_{}[]\\",!1)}),e.subParser("encodeEmailAddress",function(t){"use strict";var e=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+t.charCodeAt(0).toString(16)+";"},function(t){return t}];return(t='<a href="'+(t=(t="mailto:"+t).replace(/./g,function(t){if("@"===t)t=e[Math.floor(2*Math.random())](t);else if(":"!==t){var n=Math.random();t=n>.9?e[2](t):n>.45?e[1](t):e[0](t)}return t}))+'">'+t+"</a>").replace(/">.+:/g,'">')}),e.subParser("escapeSpecialCharsWithinTagAttributes",function(t){"use strict";return t.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(t){var n=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return e.helper.escapeCharacters(n,"\\`*_",!1)})}),e.subParser("githubCodeBlocks",function(t,n,r){"use strict";return n.ghCodeBlocks?(t=r.converter._dispatch("githubCodeBlocks.before",t,n),t=(t=(t+="~0").replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(t,i,o){var a=n.omitExtraWLInCodeBlocks?"":"\n";return o=e.subParser("encodeCode")(o),o="<pre><code"+(i?' class="'+i+" language-"+i+'"':"")+">"+(o=(o=(o=e.subParser("detab")(o)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+a+"</code></pre>",e.subParser("hashBlock")(o,n,r)})).replace(/~0/,""),t=r.converter._dispatch("githubCodeBlocks.after",t,n)):t}),e.subParser("hashBlock",function(t,e,n){"use strict";return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(n.gHtmlBlocks.push(t)-1)+"K\n\n"}),e.subParser("hashElement",function(t,e,n){"use strict";return function(t,e){var r=e;return r=(r=(r=r.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),"\n\n~K"+(n.gHtmlBlocks.push(r)-1)+"K\n\n"}}),e.subParser("hashHTMLBlocks",function(t,n,r){"use strict";return(t=(t=(t=(t=(t=(t=t.replace(/\n/g,"\n\n")).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,e.subParser("hashElement")(t,n,r))).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside|address|audio|canvas|figure|hgroup|output|video)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,e.subParser("hashElement")(t,n,r))).replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(t,n,r))).replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(t,n,r))).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(t,n,r))).replace(/\n\n/g,"\n")}),e.subParser("hashHTMLSpans",function(t,n,r){"use strict";for(var i=e.helper.matchRecursiveRegExp(t,"<code\\b[^>]*>","</code>","gi"),o=0;o<i.length;++o)t=t.replace(i[o][0],"~L"+(r.gHtmlSpans.push(i[o][0])-1)+"L");return t}),e.subParser("unhashHTMLSpans",function(t,e,n){"use strict";for(var r=0;r<n.gHtmlSpans.length;++r)t=t.replace("~L"+r+"L",n.gHtmlSpans[r]);return t}),e.subParser("headers",function(t,n,r){"use strict";t=r.converter._dispatch("headers.before",t,n);var i=n.prefixHeaderId,o=isNaN(parseInt(n.headerLevelStart))?1:parseInt(n.headerLevelStart),a=n.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;function u(t){var n,o=t.replace(/[^\w]/g,"").toLowerCase();return r.hashLinkCounts[o]?n=o+"-"+r.hashLinkCounts[o]++:(n=o,r.hashLinkCounts[o]=1),!0===i&&(i="section"),e.helper.isString(i)?i+n:n}return t=(t=(t=t.replace(n.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(t,i){var a=e.subParser("spanGamut")(i,n,r),s=n.noHeaderId?"":' id="'+u(i)+'"',l="<h"+o+s+">"+a+"</h"+o+">";return e.subParser("hashBlock")(l,n,r)})).replace(a,function(t,i){var a=e.subParser("spanGamut")(i,n,r),s=n.noHeaderId?"":' id="'+u(i)+'"',l=o+1,c="<h"+l+s+">"+a+"</h"+l+">";return e.subParser("hashBlock")(c,n,r)})).replace(/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,function(t,i,a){var s=e.subParser("spanGamut")(a,n,r),l=n.noHeaderId?"":' id="'+u(a)+'"',c=o-1+i.length,f="<h"+c+l+">"+s+"</h"+c+">";return e.subParser("hashBlock")(f,n,r)}),r.converter._dispatch("headers.after",t,n)}),e.subParser("images",function(t,n,r){"use strict";function i(t,n,i,o,a,u,s,l){var c=r.gUrls,f=r.gTitles,d=r.gDimensions;if(i=i.toLowerCase(),l||(l=""),""===o||null===o){if(""!==i&&null!==i||(i=n.toLowerCase().replace(/ ?\n/g," ")),o="#"+i,e.helper.isUndefined(c[i]))return t;o=c[i],e.helper.isUndefined(f[i])||(l=f[i]),e.helper.isUndefined(d[i])||(a=d[i].width,u=d[i].height)}n=n.replace(/"/g,"&quot;"),n=e.helper.escapeCharacters(n,"*_",!1);var h='<img src="'+(o=e.helper.escapeCharacters(o,"*_",!1))+'" alt="'+n+'"';return l&&(l=l.replace(/"/g,"&quot;"),h+=' title="'+(l=e.helper.escapeCharacters(l,"*_",!1))+'"'),a&&u&&(h+=' width="'+(a="*"===a?"auto":a)+'"',h+=' height="'+(u="*"===u?"auto":u)+'"'),h+" />"}return t=(t=(t=r.converter._dispatch("images.before",t,n)).replace(/!\[(.*?)][ ]?(?:\n[ ]*)?\[(.*?)]()()()()()/g,i)).replace(/!\[(.*?)]\s?\([ \t]*()<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(['"])(.*?)\6[ \t]*)?\)/g,i),r.converter._dispatch("images.after",t,n)}),e.subParser("italicsAndBold",function(t,e,n){"use strict";return t=n.converter._dispatch("italicsAndBold.before",t,e),t=e.literalMidWordUnderscores?(t=(t=(t=t.replace(/(^|\s|>|\b)__(?=\S)([^]+?)__(?=\b|<|\s|$)/gm,"$1<strong>$2</strong>")).replace(/(^|\s|>|\b)_(?=\S)([^]+?)_(?=\b|<|\s|$)/gm,"$1<em>$2</em>")).replace(/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,"<strong>$2</strong>")).replace(/(\*)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"):(t=t.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>")).replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),n.converter._dispatch("italicsAndBold.after",t,e)}),e.subParser("lists",function(t,n,r){"use strict";function i(t,i){r.gListLevel++,t=t.replace(/\n{2,}$/,"\n");var o=/\n[ \t]*\n(?!~0)/.test(t+="~0");return t=(t=t.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+((\[(x| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(t,i,a,u,s,l,c){c=c&&""!==c.trim();var f=e.subParser("outdent")(s,n,r),d="";return l&&n.tasklists&&(d=' class="task-list-item" style="list-style-type: none;"',f=f.replace(/^[ \t]*\[(x| )?]/m,function(){var t='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return c&&(t+=" checked"),t+">"})),i||f.search(/\n{2,}/)>-1?(f=e.subParser("githubCodeBlocks")(f,n,r),f=e.subParser("blockGamut")(f,n,r)):(f=(f=e.subParser("lists")(f,n,r)).replace(/\n$/,""),f=o?e.subParser("paragraphs")(f,n,r):e.subParser("spanGamut")(f,n,r)),"\n<li"+d+">"+f+"</li>\n"})).replace(/~0/g,""),r.gListLevel--,i&&(t=t.replace(/\s+$/,"")),t}function o(t,e,n){var r="ul"===e?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,o=[],a="";if(-1!==t.search(r)){!function t(o){var u=o.search(r);-1!==u?(a+="\n\n<"+e+">"+i(o.slice(0,u),!!n)+"</"+e+">\n\n",r="ul"==(e="ul"===e?"ol":"ul")?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,t(o.slice(u))):a+="\n\n<"+e+">"+i(o,!!n)+"</"+e+">\n\n"}(t);for(var u=0;u<o.length;++u);}else a="\n\n<"+e+">"+i(t,!!n)+"</"+e+">\n\n";return a}t=r.converter._dispatch("lists.before",t,n),t+="~0";var a=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return t=(t=r.gListLevel?t.replace(a,function(t,e,n){return o(e,n.search(/[*+-]/g)>-1?"ul":"ol",!0)}):t.replace(a=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(t,e,n,r){return o(n,r.search(/[*+-]/g)>-1?"ul":"ol")})).replace(/~0/,""),r.converter._dispatch("lists.after",t,n)}),e.subParser("outdent",function(t){"use strict";return(t=t.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")}),e.subParser("paragraphs",function(t,n,r){"use strict";for(var i=(t=(t=(t=r.converter._dispatch("paragraphs.before",t,n)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),o=[],a=i.length,u=0;u<a;u++){var s=i[u];s.search(/~K(\d+)K/g)>=0?o.push(s):s.search(/\S/)>=0&&(s=(s=e.subParser("spanGamut")(s,n,r)).replace(/^([ \t]*)/g,"<p>"),o.push(s+="</p>"))}for(a=o.length,u=0;u<a;u++)for(;o[u].search(/~K(\d+)K/)>=0;){var l=r.gHtmlBlocks[RegExp.$1];l=l.replace(/\$/g,"$$$$"),o[u]=o[u].replace(/~K\d+K/,l)}return t=r.converter._dispatch("paragraphs.after",t,n),o.join("\n\n")}),e.subParser("runExtension",function(t,e,n,r){"use strict";if(t.filter)e=t.filter(e,r.converter,n);else if(t.regex){var i=t.regex;!i instanceof RegExp&&(i=new RegExp(i,"g")),e=e.replace(i,t.replace)}return e}),e.subParser("spanGamut",function(t,n,r){"use strict";return t=r.converter._dispatch("spanGamut.before",t,n),t=e.subParser("codeSpans")(t,n,r),t=e.subParser("escapeSpecialCharsWithinTagAttributes")(t,n,r),t=e.subParser("encodeBackslashEscapes")(t,n,r),t=e.subParser("images")(t,n,r),t=e.subParser("anchors")(t,n,r),t=e.subParser("autoLinks")(t,n,r),t=e.subParser("encodeAmpsAndAngles")(t,n,r),t=e.subParser("italicsAndBold")(t,n,r),t=(t=e.subParser("strikethrough")(t,n,r)).replace(/  +\n/g," <br />\n"),r.converter._dispatch("spanGamut.after",t,n)}),e.subParser("strikethrough",function(t,e,n){"use strict";return e.strikethrough&&(t=(t=n.converter._dispatch("strikethrough.before",t,e)).replace(/(?:~T){2}([^~]+)(?:~T){2}/g,"<del>$1</del>"),t=n.converter._dispatch("strikethrough.after",t,e)),t}),e.subParser("stripBlankLines",function(t){"use strict";return t.replace(/^[ \t]+$/gm,"")}),e.subParser("stripLinkDefinitions",function(t,n,r){"use strict";return(t=(t+="~0").replace(/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=~0))/gm,function(t,i,o,a,u,s,l){return i=i.toLowerCase(),r.gUrls[i]=e.subParser("encodeAmpsAndAngles")(o),s?s+l:(l&&(r.gTitles[i]=l.replace(/"|'/g,"&quot;")),n.parseImgDimensions&&a&&u&&(r.gDimensions[i]={width:a,height:u}),"")})).replace(/~0/,"")}),e.subParser("tables",function(t,n,r){"use strict";var i;if(n.tables){t=r.converter._dispatch("tables.before",t,n);var o=((i={}).th=function(t,i){var o="";return""===(t=t.trim())?"":(n.tableHeaderId&&(o=' id="'+t.replace(/ /g,"_").toLowerCase()+'"'),t=e.subParser("spanGamut")(t,n,r),"<th"+o+(i=i&&""!==i.trim()?' style="'+i+'"':"")+">"+t+"</th>")},i.td=function(t,i){var o=e.subParser("spanGamut")(t.trim(),n,r);return"<td"+(i=i&&""!==i.trim()?' style="'+i+'"':"")+">"+o+"</td>"},i.ths=function(){for(var t="",e=0,n=[].slice.apply(arguments[0]),r=[].slice.apply(arguments[1]);e<n.length;e+=1)t+=i.th(n[e],r[e])+"\n";return t},i.tds=function(){for(var t="",e=0,n=[].slice.apply(arguments[0]),r=[].slice.apply(arguments[1]);e<n.length;e+=1)t+=i.td(n[e],r[e])+"\n";return t},i.thead=function(){var t,e=[].slice.apply(arguments[0]),n=[].slice.apply(arguments[1]);return t="<thead>\n",t+="<tr>\n",t+=i.ths.apply(this,[e,n]),(t+="</tr>\n")+"</thead>\n"},i.tr=function(){var t,e=[].slice.apply(arguments[0]),n=[].slice.apply(arguments[1]);return t="<tr>\n",(t+=i.tds.apply(this,[e,n]))+"</tr>\n"},{parse:function(t){for(var e,n,r=0,o=t.split("\n"),a=[];r<o.length;r+=1){if((e=o[r]).trim().match(/^[|].*[|]$/)){e=e.trim();var u=[],s=o[r+1].trim(),l=[],c=0;if(s.match(/^[|][-=|: ]+[|]$/))for(l=s.substring(1,s.length-1).split("|"),c=0;c<l.length;++c)l[c]=l[c].trim(),l[c]=l[c].match(/^[:][-=| ]+[:]$/)?"text-align:center;":l[c].match(/^[-=| ]+[:]$/)?"text-align:right;":l[c].match(/^[:][-=| ]+$/)?"text-align:left;":"";if(u.push("<table>"),n=e.substring(1,e.length-1).split("|"),0===l.length)for(c=0;c<n.length;++c)l.push("text-align:left");if(u.push(i.thead.apply(this,[n,l])),(e=o[++r]).trim().match(/^[|][-=|: ]+[|]$/)){for(e=o[++r],u.push("<tbody>");e.trim().match(/^[|].*[|]$/);)e=e.trim(),u.push(i.tr.apply(this,[e.substring(1,e.length-1).split("|"),l])),e=o[++r];u.push("</tbody>"),u.push("</table>"),a.push(u.join("\n"));continue}e=o[--r]}a.push(e)}return a.join("\n")}});t=o.parse(t),t=r.converter._dispatch("tables.after",t,n)}return t}),e.subParser("unescapeSpecialChars",function(t){"use strict";return t.replace(/~E(\d+)E/g,function(t,e){var n=parseInt(e);return String.fromCharCode(n)})}),"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define("showdown",function(){"use strict";return e}):this.showdown=e}).call(this);